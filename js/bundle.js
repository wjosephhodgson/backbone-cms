/*
 RequireJS 2.1.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash underscore exports="amd,commonjs,global,node" -o ./dist/lodash.underscore.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Backbone may be freely distributed under the MIT license.

/*!
 * hoverIntent v1.8.0 // 2014.06.29 // jQuery v1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */

/*! 
 *CUSTOM CHANGES MADE TO JQUERYUI
 * Line 8895: inst.input.trigger("blur"); (NOT HERE ANYMORE BECAUSE OF BLUR TRIGGERED ON DATEPICKER CALLS)
 * This is done for jQuery validate, since it is applied on blur event.  When a date is picked, validation
 * does not get applied unless a blur event is fired
 */

/*! jQuery UI - v1.11.1 - 2014-08-24
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, selectmenu.js, slider.js, spinner.js, tabs.js, tooltip.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Core 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*!
 * jQuery UI Mouse 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */

/*!
 * jQuery UI Position 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*!
 * jQuery UI Draggable 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */

/*!
 * jQuery UI Droppable 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */

/*!
 * jQuery UI Resizable 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */

/*!
 * jQuery UI Selectable 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */

/*!
 * jQuery UI Sortable 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */

/*!
 * jQuery UI Accordion 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/accordion/
 */

/*!
 * jQuery UI Menu 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */

/*!
 * jQuery UI Autocomplete 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */

/*!
 * jQuery UI Button 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */

/*!
 * jQuery UI Datepicker 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */

/*!
 * jQuery UI Dialog 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */

/*!
 * jQuery UI Progressbar 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */

/*!
 * jQuery UI Selectmenu 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */

/*!
 * jQuery UI Slider 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */

/*!
 * jQuery UI Spinner 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */

/*!
 * jQuery UI Tabs 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */

/*!
 * jQuery UI Tooltip 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 */

/*!
 * jQuery UI Effects 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

/*!
 * jQuery UI Effects Blind 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 */

/*!
 * jQuery UI Effects Bounce 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/bounce-effect/
 */

/*!
 * jQuery UI Effects Clip 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/clip-effect/
 */

/*!
 * jQuery UI Effects Drop 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/drop-effect/
 */

/*!
 * jQuery UI Effects Explode 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/explode-effect/
 */

/*!
 * jQuery UI Effects Fade 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 */

/*!
 * jQuery UI Effects Fold 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fold-effect/
 */

/*!
 * jQuery UI Effects Highlight 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 */

/*!
 * jQuery UI Effects Size 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/size-effect/
 */

/*!
 * jQuery UI Effects Scale 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 */

/*!
 * jQuery UI Effects Puff 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/puff-effect/
 */

/*!
 * jQuery UI Effects Pulsate 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/pulsate-effect/
 */

/*!
 * jQuery UI Effects Shake 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/shake-effect/
 */

/*!
 * jQuery UI Effects Slide 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 */

/*!
 * jQuery UI Effects Transfer 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 */

/*!
 * jQuery Validation Plugin v1.13.0
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 Jörn Zaefferer
 * Released under the MIT license
 */

/* NOTICE: Modified version of Castle.Components.Validator.CreditCardValidator
 * Redistributed under the the Apache License 2.0 at http://www.apache.org/licenses/LICENSE-2.0
 * Valid Types: mastercard, visa, amex, dinersclub, enroute, discover, jcb, unknown, all (overrides all other settings)
 */

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*! DataTables 1.10.2
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */

/**
 * @summary     DataTables
 * @description Paginate, search and order HTML tables
 * @version     1.10.2
 * @file        jquery.dataTables.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2008-2014 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */

// license: MIT

/**
 * lodash 3.0.3 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern modularize exports="npm" -o ./`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/**
 * lodash 3.0.0 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern modularize exports="npm" -o ./`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.7.0 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/**
 * lodash 3.0.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern modularize exports="npm" -o ./`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/**
 * lodash 3.0.4 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern modularize exports="npm" -o ./`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/**
 * lodash 3.0.3 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern modularize exports="npm" -o ./`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.7.0 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/*
    jQuery Masked Input Plugin
    Copyright (c) 2007 - 2014 Josh Bush (digitalbush.com)
    Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
    Version: 1.4.0
*/

/*
 * jQuery Dynatable plugin 0.3.1
 *
 * Copyright (c) 2014 Steve Schwartz (JangoSteve)
 *
 * Dual licensed under the AGPL and Proprietary licenses:
 *   http://www.dynatable.com/license/
 *
 * Date: Tue Jan 02 2014
 */

var requirejs,require,define;!function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var i in e)if(t(e,i)&&n(e[i],i))break}function U(e,n,i,o){return n&&B(n,function(n,r){(i||!t(e,r))&&(!o||"object"!=typeof n||!n||H(n)||G(n)||n instanceof RegExp?e[r]=n:(e[r]||(e[r]={}),U(e[r],n,i,o)))}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,i){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=i,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var i,o,r,a,s,l,c,d,t=t&&t.split("/"),u=A.map,h=u&&u["*"];if(e){for(e=e.split("/"),o=e.length-1,A.nodeIdCompat&&Q.test(e[o])&&(e[o]=e[o].replace(Q,"")),"."===e[0].charAt(0)&&t&&(o=t.slice(0,t.length-1),e=o.concat(e)),o=e,r=0;r<o.length;r++)a=o[r],"."===a?(o.splice(r,1),r-=1):".."===a&&0!==r&&(1!=r||".."!==o[2])&&".."!==o[r-1]&&r>0&&(o.splice(r-1,2),r-=2);e=e.join("/")}if(n&&u&&(t||h)){o=e.split("/"),r=o.length;e:for(;r>0;r-=1){if(s=o.slice(0,r).join("/"),t)for(a=t.length;a>0;a-=1)if((n=m(u,t.slice(0,a).join("/")))&&(n=m(n,s))){i=n,l=r;break e}!c&&h&&m(h,s)&&(c=m(h,s),d=r)}!i&&c&&(i=c,l=d),i&&(o.splice(0,l,i),e=o.join("/"))}return(i=m(A.pkgs,e))?i:e}function i(e){z&&v(document.getElementsByTagName("script"),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===$.contextName?(t.parentNode.removeChild(t),!0):void 0})}function o(e){var t=m(A.paths,e);return t&&H(t)&&1<t.length?(t.shift(),$.require.undef(e),$.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function r(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,o){var a,s,l=null,c=t?t.name:null,d=e,u=!0,h="";return e||(u=!1,e="_@r"+(O+=1)),e=r(e),l=e[0],e=e[1],l&&(l=n(l,c,o),s=m(F,l)),e&&(l?h=s&&s.normalize?s.normalize(e,function(e){return n(e,c,o)}):-1===e.indexOf("!")?n(e,c,o):e:(h=n(e,c,o),e=r(h),l=e[0],h=e[1],i=!0,a=$.nameToUrl(h))),i=!l||s||i?"":"_unnormalized"+(q+=1),{prefix:l,name:h,parentMap:t,unnormalized:!!i,url:a,originalName:d,isDefine:u,id:(l?l+"!"+h:h)+i}}function s(e){var t=e.id,n=m(D,t);return n||(n=D[t]=new $.Module(e)),n}function l(e,n,i){var o=e.id,r=m(D,o);!t(F,o)||r&&!r.defineEmitComplete?(r=s(e),r.error&&"error"===n?i(r.error):r.on(n,i)):"defined"===n&&i(F[o])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(v(n,function(t){(t=m(D,t))&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||g.onError(e))}function d(){R.length&&(ha.apply(I,[I.length,0].concat(R)),R=[])}function h(e){delete D[e],delete P[e]}function p(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,v(e.depMaps,function(i,o){var r=i.id,a=m(D,r);a&&!e.depMatched[o]&&!n[r]&&(m(t,r)?(e.defineDep(o,F[r]),e.check()):p(a,t,n))}),n[i]=!0)}function f(){var e,t,n=(e=1e3*A.waitSeconds)&&$.startTime+e<(new Date).getTime(),r=[],a=[],s=!1,l=!0;if(!w){if(w=!0,B(P,function(e){var c=e.map,d=c.id;if(e.enabled&&(c.isDefine||a.push(e),!e.error))if(!e.inited&&n)o(d)?s=t=!0:(r.push(d),i(d));else if(!e.inited&&e.fetched&&c.isDefine&&(s=!0,!c.prefix))return l=!1}),n&&r.length)return e=C("timeout","Load timeout for modules: "+r,null,r),e.contextName=$.contextName,c(e);l&&v(a,function(e){p(e,{},{})}),n&&!t||!s||!z&&!ea||S||(S=setTimeout(function(){S=0,f()},50)),w=!1}}function b(e){t(F,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function y(e){var e=e.currentTarget||e.srcElement,t=$.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=$.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function _(){var e;for(d();I.length;){if(e=I.shift(),null===e[0])return c(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));b(e)}}var w,x,$,k,S,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},D={},P={},E={},I=[],F={},L={},j={},O=1,q=1;return k={require:function(e){return e.require?e.require:e.require=$.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?F[e.map.id]=e.exports:e.exports=F[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},x=function(e){this.events=m(E,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},x.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,$.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();$.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;L[e]||(L[e]=!0,$.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(o)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{i=$.execCb(n,o,t,i)}catch(r){e=r}else i=$.execCb(n,o,t,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(F[n]=i,g.onResourceLoad)&&g.onResourceLoad($,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,o=a(e.prefix);this.depMaps.push(o),l(o,"defined",u(this,function(o){var r,d;d=m(j,this.map.id);var p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,v=$.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(o.normalize&&(p=o.normalize(p,function(e){return n(e,f,!0)})||""),o=a(e.prefix+"!"+p,this.map.parentMap),l(o,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(d=m(D,o.id))&&(this.depMaps.push(o),this.events.error&&d.on("error",u(this,function(e){this.emit("error",e)})),d.enable())):d?(this.map.url=$.nameToUrl(d),this.load()):(r=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[i],B(D,function(e){0===e.map.id.indexOf(i+"_unnormalized")&&h(e.map.id)}),c(e)}),r.fromText=u(this,function(n,o){var l=e.name,d=a(l),u=M;o&&(n=o),u&&(M=!1),s(d),t(A.config,i)&&(A.config[l]=A.config[i]);try{g.exec(n)}catch(h){return c(C("fromtexteval","fromText eval for "+i+" failed: "+h,h,[i]))}u&&(M=!0),this.depMaps.push(d),$.completeLoad(l),v([l],r)}),o.load(e.name,v,r,A))})),$.enable(o,this),this.pluginMaps[o.id]=o},enable:function(){P[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var i,o;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,i=m(k,e.id))return void(this.depExports[n]=i(this));this.depCount+=1,l(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&l(e,"error",u(this,this.errback))}i=e.id,o=D[i],!t(k,i)&&o&&!o.enabled&&$.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(D,e.id);t&&!t.enabled&&$.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},$={config:A,contextName:e,registry:D,defined:F,urlFetched:L,defQueue:I,Module:x,makeModuleMap:a,nextTick:g.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(j[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=$.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(D,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=a(t))}),(e.deps||e.callback)&&$.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(o,r){function l(n,i,d){var u,h;return r.enableBuildCallback&&i&&G(i)&&(i.__requireJsBuild=!0),"string"==typeof n?G(i)?c(C("requireargs","Invalid require call"),d):o&&t(k,n)?k[n](D[o.id]):g.get?g.get($,n,o,l):(u=a(n,o,!1,!0),u=u.id,t(F,u)?F[u]:c(C("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(o?"":". Use require([])")))):(_(),$.nextTick(function(){_(),h=s(a(null,o)),h.skipMap=r.skipMap,h.init(n,i,d,{enabled:!0}),f()}),l)}return r=r||{},U(l,{isBrowser:z,toUrl:function(e){var t,i=e.lastIndexOf("."),r=e.split("/")[0];return-1!==i&&("."!==r&&".."!==r||i>1)&&(t=e.substring(i,e.length),e=e.substring(0,i)),$.nameToUrl(n(e,o&&o.id,!0),t,!0)},defined:function(e){return t(F,a(e,o,!1,!0).id)},specified:function(e){return e=a(e,o,!1,!0).id,t(F,e)||t(D,e)}}),o||(l.undef=function(e){d();var t=a(e,o,!0),n=m(D,e);i(e),delete F[e],delete L[t.url],delete E[e],T(I,function(t,n){t[0]===e&&I.splice(n,1)}),n&&(n.events.defined&&(E[e]=n.events),h(e))}),l},enable:function(e){m(D,e.id)&&s(e).enable()},completeLoad:function(e){var n,i,r=m(A.shim,e)||{},a=r.exports;for(d();I.length;){if(i=I.shift(),null===i[0]){if(i[0]=e,n)break;n=!0}else i[0]===e&&(n=!0);b(i)}if(i=m(D,e),!n&&!t(F,e)&&i&&!i.inited){if(A.enforceDefine&&(!a||!da(a)))return o(e)?void 0:c(C("nodefine","No define call for "+e,null,[e]));b([e,r.deps||[],r.exportsFn])}f()},nameToUrl:function(e,t,n){var i,o,r;if((i=m(A.pkgs,e))&&(e=i),i=m(j,e))return $.nameToUrl(i,t,n);if(g.jsExtRegExp.test(e))i=e+(t||"");else{for(i=A.paths,e=e.split("/"),o=e.length;o>0;o-=1)if(r=e.slice(0,o).join("/"),r=m(i,r)){H(r)&&(r=r[0]),e.splice(0,o,r);break}i=e.join("/"),i+=t||(/^data\:|\?/.test(i)||n?"":".js"),i=("/"===i.charAt(0)||i.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+i}return A.urlArgs?i+((-1===i.indexOf("?")?"?":"&")+A.urlArgs):i},load:function(e,t){g.load($,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))&&(N=null,e=y(e),$.completeLoad(e.id))},onScriptError:function(e){var t=y(e);return o(t.id)?void 0:c(C("scripterror","Script error for: "+t.id,e,[t.id]))}},$.require=$.makeRequire(),$}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,i){var o,r="_";return!H(e)&&"string"!=typeof e&&(o=e,H(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(r=o.context),(i=m(F,r))||(i=F[r]=g.s.newContext(r)),o&&i.configure(o),i.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.14",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var i=e&&e.config||{};if(z)return i=g.createNode(i,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||Y?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(M=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,J=i,D?y.insertBefore(i,D):y.appendChild(i),J=null,i;if(ea)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){return y||(y=e.parentNode),(I=e.getAttribute("data-main"))?(s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0):void 0}),define=function(e,t,n){var i,o;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((i=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){return"interactive"===e.readyState?N=e:void 0}),i=N),i&&(e||(e=i.getAttribute("data-requiremodule")),o=F[i.getAttribute("data-requirecontext")])),(o?o.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this),define("../vendor/require.js",function(){}),function(){function e(e,t,n){for(var i=(n||0)-1,o=e?e.length:0;++i<o;)if(e[i]===t)return i;return-1}function t(e,t){for(var n=e.criteria,i=t.criteria,o=-1,r=n.length;++o<r;){var a=n[o],s=i[o];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return e.index-t.index}function n(e){return"\\"+xn[e]}function i(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,o=n-t||0,r=Array(0>o?0:o);++i<o;)r[i]=e[t+i];return r}function o(e){return e instanceof o?e:new r(e)}function r(e,t){this.__chain__=!!t,this.__wrapped__=e}function a(e){function t(){if(o){var e=i(o);Ln.apply(e,arguments)}if(this instanceof t){var a=s(n.prototype),l=n.apply(a,e||arguments);return F(l)?l:a}return n.apply(r,e||arguments)}var n=e[0],o=e[2],r=e[4];return t}function s(e){return F(e)?On(e):{}}function l(e,t,n){if("function"!=typeof e)return zt;if("undefined"==typeof t||!("prototype"in e))return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return Et(e,t)}function c(e){function t(){var e=u?l:this;if(r){var m=i(r);Ln.apply(m,arguments)}if((a||p)&&(m||(m=i(arguments)),a&&Ln.apply(m,a),p&&m.length<d))return o|=16,c([n,f?o:-4&o,m,null,l,d]);if(m||(m=arguments),h&&(n=e[v]),this instanceof t){e=s(n.prototype);var g=n.apply(e,m);return F(g)?g:e}return n.apply(e,m)}var n=e[0],o=e[1],r=e[2],a=e[3],l=e[4],d=e[5],u=1&o,h=2&o,p=4&o,f=8&o,v=n;return t}function d(e,t){for(var n=-1,i=b(),o=e?e.length:0,r=[];++n<o;){var a=e[n];i(t,a)<0&&r.push(a)}return r}function u(e,t,n,i){for(var o=(i||0)-1,r=e?e.length:0,a=[];++o<r;){var s=e[o];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Yn(s)||w(s))){t||(s=u(s,t,n));var l=-1,c=s.length,d=a.length;for(a.length+=c;++l<c;)a[d++]=s[l]}else n||a.push(s)}return a}function h(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;var r=typeof e,a=typeof t;if(!(e!==e||e&&wn[r]||t&&wn[a]))return!1;if(null==e||null==t)return e===t;var s=En.call(e),l=En.call(t);if(s!=l)return!1;switch(s){case fn:case vn:return+e==+t;case gn:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case yn:case _n:return e==String(t)}var c=s==pn;if(!c){var d=e instanceof o,u=t instanceof o;if(d||u)return h(d?e.__wrapped__:e,u?t.__wrapped__:t,n,i);if(s!=bn)return!1;var p=e.constructor,f=t.constructor;if(p!=f&&!(N(p)&&p instanceof p&&N(f)&&f instanceof f)&&"constructor"in e&&"constructor"in t)return!1}n||(n=[]),i||(i=[]);for(var v=n.length;v--;)if(n[v]==e)return i[v]==t;var m=!0,g=0;if(n.push(e),i.push(t),c){if(g=t.length,m=g==e.length)for(;g--&&(m=h(e[g],t[g],n,i)););}else ei(t,function(t,o,r){return Fn.call(r,o)?(g++,!(m=Fn.call(e,o)&&h(e[o],t,n,i))&&sn):void 0}),m&&ei(e,function(e,t,n){return Fn.call(n,t)?!(m=--g>-1)&&sn:void 0});return n.pop(),i.pop(),m}function p(e,t){return e+Nn(Vn()*(t-e+1))}function f(e,t,n){for(var i=-1,o=b(),r=e?e.length:0,a=[],s=n?[]:a;++i<r;){var l=e[i],c=n?n(l,i,e):l;(t?!i||s[s.length-1]!==c:o(s,c)<0)&&(n&&s.push(c),a.push(l))}return a}function v(e){return function(t,n,i){var o={};n=qt(n,i,3);var r=-1,a=t?t.length:0;if("number"==typeof a)for(;++r<a;){var s=t[r];e(o,s,n(s,r,t),t)}else ti(t,function(t,i,r){e(o,t,n(t,i,r),r)});return o}}function m(e,t,n,i,o,r){var s=2&t,l=16&t,d=32&t;if(!s&&!N(e))throw new TypeError;l&&!n.length&&(t&=-17,l=n=!1),d&&!i.length&&(t&=-33,d=i=!1);var u=1==t||17===t?a:c;return u([e,t,n,i,o,r])}function g(e){return Kn[e]}function b(){var t=(t=o.indexOf)===gt?e:t;return t}function y(e){return"function"==typeof e&&Mn.test(e)}function _(e){return Xn[e]}function w(e){return e&&"object"==typeof e&&"number"==typeof e.length&&En.call(e)==hn||!1}function x(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var o in i)e[o]=i[o]}return e}function $(e){return F(e)?Yn(e)?i(e):x({},e):e}function k(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var o in i)"undefined"==typeof e[o]&&(e[o]=i[o])}return e}function C(e){var t=[];return ei(e,function(e,n){N(e)&&t.push(n)}),t.sort()}function T(e,t){return e?Fn.call(e,t):!1}function S(e){for(var t=-1,n=Gn(e),i=n.length,o={};++t<i;){var r=n[t];o[e[r]]=r}return o}function A(e){return e===!0||e===!1||e&&"object"==typeof e&&En.call(e)==fn||!1}function D(e){return e&&"object"==typeof e&&En.call(e)==vn||!1}function P(e){return e&&1===e.nodeType||!1}function E(e){if(!e)return!0;if(Yn(e)||H(e))return!e.length;for(var t in e)if(Fn.call(e,t))return!1;return!0}function M(e,t){return h(e,t)}function I(e){return Hn(e)&&!Bn(parseFloat(e))}function N(e){return"function"==typeof e}function F(e){return!(!e||!wn[typeof e])}function L(e){return O(e)&&e!=+e}function j(e){return null===e}function O(e){return"number"==typeof e||e&&"object"==typeof e&&En.call(e)==gn||!1}function R(e){return e&&wn[typeof e]&&En.call(e)==yn||!1}function H(e){return"string"==typeof e||e&&"object"==typeof e&&En.call(e)==_n||!1}function B(e){return"undefined"==typeof e}function q(e){var t=[];ei(e,function(e,n){t.push(n)}),t=d(t,u(arguments,!0,!1,1));for(var n=-1,i=t.length,o={};++n<i;){var r=t[n];o[r]=e[r]}return o}function U(e){for(var t=-1,n=Gn(e),i=n.length,o=Array(i);++t<i;){var r=n[t];o[t]=[r,e[r]]}return o}function z(e){for(var t=-1,n=u(arguments,!0,!1,1),i=n.length,o={};++t<i;){var r=n[t];r in e&&(o[r]=e[r])}return o}function V(e){for(var t=-1,n=Gn(e),i=n.length,o=Array(i);++t<i;)o[t]=e[n[t]];return o}function W(e,t){var n=b(),i=e?e.length:0,o=!1;return i&&"number"==typeof i?o=n(e,t)>-1:ti(e,function(e){return(o=e===t)&&sn}),o}function Y(e,t,n){var i=!0;t=qt(t,n,3);var o=-1,r=e?e.length:0;if("number"==typeof r)for(;++o<r&&(i=!!t(e[o],o,e)););else ti(e,function(e,n,o){return!(i=!!t(e,n,o))&&sn});return i}function J(e,t,n){var i=[];t=qt(t,n,3);var o=-1,r=e?e.length:0;if("number"==typeof r)for(;++o<r;){var a=e[o];t(a,o,e)&&i.push(a)}else ti(e,function(e,n,o){t(e,n,o)&&i.push(e)});return i}function G(e,t,n){t=qt(t,n,3);var i=-1,o=e?e.length:0;if("number"!=typeof o){var r;return ti(e,function(e,n,i){return t(e,n,i)?(r=e,sn):void 0}),r}for(;++i<o;){var a=e[i];if(t(a,i,e))return a}}function K(e,t){return ht(e,t,!0)}function X(e,t,n){var i=-1,o=e?e.length:0;if(t=t&&"undefined"==typeof n?t:l(t,n,3),"number"==typeof o)for(;++i<o&&t(e[i],i,e)!==sn;);else ti(e,t)}function Z(e,t){var n=e?e.length:0;if("number"==typeof n)for(;n--&&t(e[n],n,e)!==!1;);else{var i=Gn(e);n=i.length,ti(e,function(e,o,r){return o=i?i[--n]:--n,t(r[o],o,r)===!1&&sn})}}function Q(e,t){var n=i(arguments,2),o=-1,r="function"==typeof t,a=e?e.length:0,s=Array("number"==typeof a?a:0);return X(e,function(e){s[++o]=(r?t:e[t]).apply(e,n)}),s}function et(e,t,n){var i=-1,o=e?e.length:0;if(t=qt(t,n,3),"number"==typeof o)for(var r=Array(o);++i<o;)r[i]=t(e[i],i,e);else r=[],ti(e,function(e,n,o){r[++i]=t(e,n,o)});return r}function tt(e,t,n){var i=-1/0,o=i;"function"!=typeof t&&n&&n[t]===e&&(t=null);var r=-1,a=e?e.length:0;if(null==t&&"number"==typeof a)for(;++r<a;){var s=e[r];s>o&&(o=s)}else t=qt(t,n,3),X(e,function(e,n,r){var a=t(e,n,r);a>i&&(i=a,o=e)});return o}function nt(e,t,n){var i=1/0,o=i;"function"!=typeof t&&n&&n[t]===e&&(t=null);var r=-1,a=e?e.length:0;if(null==t&&"number"==typeof a)for(;++r<a;){var s=e[r];o>s&&(o=s)}else t=qt(t,n,3),X(e,function(e,n,r){var a=t(e,n,r);i>a&&(i=a,o=e)});return o}function it(e,t,n,i){if(!e)return n;var o=arguments.length<3;t=qt(t,i,4);var r=-1,a=e.length;if("number"==typeof a)for(o&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);else ti(e,function(e,i,r){n=o?(o=!1,e):t(n,e,i,r)});return n}function ot(e,t,n,i){var o=arguments.length<3;return t=qt(t,i,4),Z(e,function(e,i,r){n=o?(o=!1,e):t(n,e,i,r)}),n}function rt(e,t,n){return t=qt(t,n,3),J(e,function(e,n,i){return!t(e,n,i)})}function at(e,t,n){if(e&&"number"!=typeof e.length&&(e=V(e)),null==t||n)return e?e[p(0,e.length-1)]:rn;var i=st(e);return i.length=zn(Un(0,t),i.length),i}function st(e){var t=-1,n=e?e.length:0,i=Array("number"==typeof n?n:0);return X(e,function(e){var n=p(0,++t);i[t]=i[n],i[n]=e}),i}function lt(e){var t=e?e.length:0;return"number"==typeof t?t:Gn(e).length}function ct(e,t,n){var i;t=qt(t,n,3);var o=-1,r=e?e.length:0;if("number"==typeof r)for(;++o<r&&!(i=t(e[o],o,e)););else ti(e,function(e,n,o){return(i=t(e,n,o))&&sn});return!!i}function dt(e,n,i){var o=-1,r=e?e.length:0,a=Array("number"==typeof r?r:0);for(n=qt(n,i,3),X(e,function(e,t,i){a[++o]={criteria:[n(e,t,i)],index:o,value:e}}),r=a.length,a.sort(t);r--;)a[r]=a[r].value;return a}function ut(e){return Yn(e)?i(e):e&&"number"==typeof e.length?et(e):V(e)}function ht(e,t,n){return n&&E(t)?rn:(n?G:J)(e,t)}function pt(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var o=e[t];o&&i.push(o)}return i}function ft(e){return d(e,u(arguments,!0,!0,1))}function vt(e,t,n){var o=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=qt(t,n,3);++a<r&&t(e[a],a,e);)o++}else if(o=t,null==o||n)return e?e[0]:rn;return i(e,0,zn(Un(0,o),r))}function mt(e,t){return u(e,t)}function gt(t,n,i){if("number"==typeof i){var o=t?t.length:0;i=0>i?Un(0,o+i):i||0}else if(i){var r=kt(t,n);return t[r]===n?r:-1}return e(t,n,i)}function bt(e,t,n){var o=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var a=r;for(t=qt(t,n,3);a--&&t(e[a],a,e);)o++}else o=null==t||n?1:t||o;return i(e,0,zn(Un(0,r-o),r))}function yt(){for(var e=[],t=-1,n=arguments.length;++t<n;){var i=arguments[t];(Yn(i)||w(i))&&e.push(i)}var o=e[0],r=-1,a=b(),s=o?o.length:0,l=[];e:for(;++r<s;)if(i=o[r],a(l,i)<0){for(var t=n;--t;)if(a(e[t],i)<0)continue e;l.push(i)}return l}function _t(e,t,n){var o=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var a=r;for(t=qt(t,n,3);a--&&t(e[a],a,e);)o++}else if(o=t,null==o||n)return e?e[r-1]:rn;return i(e,Un(0,r-o))}function wt(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?Un(0,i+n):zn(n,i-1))+1);i--;)if(e[i]===t)return i;return-1}function xt(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var i=-1,o=Un(0,In((t-e)/n)),r=Array(o);++i<o;)r[i]=e,e+=n;return r}function $t(e,t,n){if("number"!=typeof t&&null!=t){var o=0,r=-1,a=e?e.length:0;for(t=qt(t,n,3);++r<a&&t(e[r],r,e);)o++}else o=null==t||n?1:Un(0,t);return i(e,o)}function kt(e,t,n,i){var o=0,r=e?e.length:o;for(n=n?qt(n,i,1):zt,t=n(t);r>o;){var a=o+r>>>1;n(e[a])<t?o=a+1:r=a}return o}function Ct(){return f(u(arguments,!0,!0))}function Tt(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(n=qt(n,i,3)),f(e,t,n)}function St(e){return d(e,i(arguments,1))}function At(){for(var e=-1,t=tt(ri(arguments,"length")),n=Array(0>t?0:t);++e<t;)n[e]=ri(arguments,e);return n}function Dt(e,t){var n=-1,i=e?e.length:0,o={};for(t||!i||Yn(e[0])||(t=[]);++n<i;){var r=e[n];t?o[r]=t[n]:r&&(o[r[0]]=r[1])}return o}function Pt(e,t){if(!N(t))throw new TypeError;return function(){return--e<1?t.apply(this,arguments):void 0}}function Et(e,t){return arguments.length>2?m(e,17,i(arguments,2),null,t):m(e,1,null,null,t)}function Mt(e){for(var t=arguments.length>1?u(arguments,!0,!1,1):C(e),n=-1,i=t.length;++n<i;){var o=t[n];e[o]=m(e[o],1,null,null,e)}return e}function It(){for(var e=arguments,t=e.length;t--;)if(!N(e[t]))throw new TypeError;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Nt(e,t,n){var i,o,r,a,s,l,c,d=0,u=!1,h=!0;if(!N(e))throw new TypeError;if(t=Un(0,t)||0,n===!0){var p=!0;h=!1}else F(n)&&(p=n.leading,u="maxWait"in n&&(Un(t,n.maxWait)||0),h="trailing"in n?n.trailing:h);var f=function(){var n=t-(ai()-a);if(0>=n){o&&clearTimeout(o);var u=c;o=l=c=rn,u&&(d=ai(),r=e.apply(s,i),l||o||(i=s=null))}else l=setTimeout(f,n)},v=function(){l&&clearTimeout(l),o=l=c=rn,(h||u!==t)&&(d=ai(),r=e.apply(s,i),l||o||(i=s=null))};return function(){if(i=arguments,a=ai(),s=this,c=h&&(l||!p),u===!1)var n=p&&!l;else{o||p||(d=a);var m=u-(a-d),g=0>=m;g?(o&&(o=clearTimeout(o)),d=a,r=e.apply(s,i)):o||(o=setTimeout(v,m))}return g&&l?l=clearTimeout(l):l||t===u||(l=setTimeout(f,t)),n&&(g=!0,r=e.apply(s,i)),!g||l||o||(i=s=null),r}}function Ft(e){if(!N(e))throw new TypeError;var t=i(arguments,1);return setTimeout(function(){e.apply(rn,t)},1)}function Lt(e,t){if(!N(e))throw new TypeError;var n=i(arguments,2);return setTimeout(function(){e.apply(rn,n)},t)}function jt(e,t){var n={};return function(){var i=t?t.apply(this,arguments):ln+arguments[0];return Fn.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}}function Ot(e){var t,n;if(!N(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Rt(e){return m(e,16,i(arguments,1))}function Ht(e,t,n){var i=!0,o=!0;if(!N(e))throw new TypeError;return n===!1?i=!1:F(n)&&(i="leading"in n?n.leading:i,o="trailing"in n?n.trailing:o),n={},n.leading=i,n.maxWait=t,n.trailing=o,Nt(e,t,n)}function Bt(e,t){return m(t,16,[e])}function qt(e,t,n){var i=typeof e;if(null==e||"function"==i)return l(e,t,n);if("object"!=i)return Yt(e);var o=Gn(e);return function(t){for(var n=o.length,i=!1;n--&&(i=t[o[n]]===e[o[n]]););return i}}function Ut(e){return null==e?"":String(e).replace(Qn,g)}function zt(e){return e}function Vt(e){X(C(e),function(t){var n=o[t]=e[t];o.prototype[t]=function(){var e=[this.__wrapped__];Ln.apply(e,arguments);var t=n.apply(o,e);return this.__chain__?new r(t,!0):t}})}function Wt(){return $n._=Pn,this}function Yt(e){return function(t){return t[e]}}function Jt(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0,e+Nn(Vn()*(t-e+1))}function Gt(e,t){if(e){var n=e[t];return N(n)?e[t]():n}}function Kt(e,t,i){var r=o,a=r.templateSettings;e=String(e||""),i=k({},i,a);var s=0,l="__p += '",c=i.variable,d=RegExp((i.escape||dn).source+"|"+(i.interpolate||dn).source+"|"+(i.evaluate||dn).source+"|$","g");e.replace(d,function(t,i,o,r,a){return l+=e.slice(s,a).replace(un,n),i&&(l+="' +\n_.escape("+i+") +\n'"),r&&(l+="';\n"+r+";\n__p += '"),o&&(l+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),s=a+t.length,t}),l+="';\n",c||(c="obj",l="with ("+c+" || {}) {\n"+l+"\n}\n"),l="function("+c+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+l+"return __p\n}";try{var u=Function("_","return "+l)(r)}catch(h){throw h.source=l,h}return t?u(t):(u.source=l,u)}function Xt(e,t,n){e=(e=+e)>-1?e:0;var i=-1,o=Array(e);for(t=l(t,n,1);++i<e;)o[i]=t(i);return o}function Zt(e){return null==e?"":String(e).replace(Zn,_)}function Qt(e){var t=++an+"";return e?e+t:t}function en(e){return e=new r(e),e.__chain__=!0,e}function tn(e,t){return t(e),e}function nn(){return this.__chain__=!0,this}function on(){return this.__wrapped__}var rn,an=0,sn={},ln=+new Date+"",cn=/<%=([\s\S]+?)%>/g,dn=/($^)/,un=/['\n\r\t\u2028\u2029\\]/g,hn="[object Arguments]",pn="[object Array]",fn="[object Boolean]",vn="[object Date]",mn="[object Function]",gn="[object Number]",bn="[object Object]",yn="[object RegExp]",_n="[object String]",wn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},xn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},$n=wn[typeof window]&&window||this,kn=wn[typeof exports]&&exports&&!exports.nodeType&&exports,Cn=wn[typeof module]&&module&&!module.nodeType&&module,Tn=Cn&&Cn.exports===kn&&kn,Sn=wn[typeof global]&&global;!Sn||Sn.global!==Sn&&Sn.window!==Sn||($n=Sn);var An=[],Dn=Object.prototype,Pn=$n._,En=Dn.toString,Mn=RegExp("^"+String(En).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),In=Math.ceil,Nn=Math.floor,Fn=Dn.hasOwnProperty,Ln=An.push,jn=Dn.propertyIsEnumerable,On=y(On=Object.create)&&On,Rn=y(Rn=Array.isArray)&&Rn,Hn=$n.isFinite,Bn=$n.isNaN,qn=y(qn=Object.keys)&&qn,Un=Math.max,zn=Math.min,Vn=Math.random;r.prototype=o.prototype;var Wn={};!function(){var e={0:1,length:1};Wn.spliceObjects=(An.splice.call(e,0,1),!e[0])}(1),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:cn,variable:""},On||(s=function(){function e(){}return function(t){if(F(t)){e.prototype=t;var n=new e;e.prototype=null}return n||$n.Object()}}()),w(arguments)||(w=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Fn.call(e,"callee")&&!jn.call(e,"callee")||!1});var Yn=Rn||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&En.call(e)==pn||!1},Jn=function(e){var t,n=e,i=[];if(!n)return i;if(!wn[typeof e])return i;for(t in n)Fn.call(n,t)&&i.push(t);return i},Gn=qn?function(e){return F(e)?qn(e):[]}:Jn,Kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Xn=S(Kn),Zn=RegExp("("+Gn(Xn).join("|")+")","g"),Qn=RegExp("["+Gn(Kn).join("")+"]","g"),ei=function(e,t){var n,i=e,o=i;if(!i)return o;if(!wn[typeof i])return o;for(n in i)if(t(i[n],n,e)===sn)return o;return o},ti=function(e,t){var n,i=e,o=i;if(!i)return o;if(!wn[typeof i])return o;for(n in i)if(Fn.call(i,n)&&t(i[n],n,e)===sn)return o;return o};N(/x/)&&(N=function(e){return"function"==typeof e&&En.call(e)==mn});var ni=v(function(e,t,n){Fn.call(e,n)?e[n]++:e[n]=1}),ii=v(function(e,t,n){(Fn.call(e,n)?e[n]:e[n]=[]).push(t)}),oi=v(function(e,t,n){e[n]=t}),ri=et,ai=y(ai=Date.now)&&ai||function(){return(new Date).getTime()
};o.after=Pt,o.bind=Et,o.bindAll=Mt,o.chain=en,o.compact=pt,o.compose=It,o.countBy=ni,o.debounce=Nt,o.defaults=k,o.defer=Ft,o.delay=Lt,o.difference=ft,o.filter=J,o.flatten=mt,o.forEach=X,o.functions=C,o.groupBy=ii,o.indexBy=oi,o.initial=bt,o.intersection=yt,o.invert=S,o.invoke=Q,o.keys=Gn,o.map=et,o.max=tt,o.memoize=jt,o.min=nt,o.omit=q,o.once=Ot,o.pairs=U,o.partial=Rt,o.pick=z,o.pluck=ri,o.range=xt,o.reject=rt,o.rest=$t,o.shuffle=st,o.sortBy=dt,o.tap=tn,o.throttle=Ht,o.times=Xt,o.toArray=ut,o.union=Ct,o.uniq=Tt,o.values=V,o.where=ht,o.without=St,o.wrap=Bt,o.zip=At,o.collect=et,o.drop=$t,o.each=X,o.extend=x,o.methods=C,o.object=Dt,o.select=J,o.tail=$t,o.unique=Tt,o.clone=$,o.contains=W,o.escape=Ut,o.every=Y,o.find=G,o.has=T,o.identity=zt,o.indexOf=gt,o.isArguments=w,o.isArray=Yn,o.isBoolean=A,o.isDate=D,o.isElement=P,o.isEmpty=E,o.isEqual=M,o.isFinite=I,o.isFunction=N,o.isNaN=L,o.isNull=j,o.isNumber=O,o.isObject=F,o.isRegExp=R,o.isString=H,o.isUndefined=B,o.lastIndexOf=wt,o.mixin=Vt,o.noConflict=Wt,o.random=Jt,o.reduce=it,o.reduceRight=ot,o.result=Gt,o.size=lt,o.some=ct,o.sortedIndex=kt,o.template=Kt,o.unescape=Zt,o.uniqueId=Qt,o.all=Y,o.any=ct,o.detect=G,o.findWhere=K,o.foldl=it,o.foldr=ot,o.include=W,o.inject=it,o.first=vt,o.last=_t,o.sample=at,o.take=vt,o.head=vt,Vt(o),o.VERSION="2.4.1",o.prototype.chain=nn,o.prototype.value=on,X(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=An[e];o.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),Wn.spliceObjects||0!==e.length||delete e[0],this}}),X(["concat","join","slice"],function(e){var t=An[e];o.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new r(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?($n._=o,define("underscore",[],function(){return o})):kn&&Cn?Tn?(Cn.exports=o)._=o:kn._=o:$n._=o}.call(this),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=ot.type(e);return"function"===n||ot.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(ot.isFunction(t))return ot.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ot.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ht.test(t))return ot.filter(t,e,n);t=ot.filter(t,e)}return ot.grep(e,function(e){return ot.inArray(e,t)>=0!==n})}function o(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function r(e){var t=_t[e]={};return ot.each(e.match(yt)||[],function(e,n){t[n]=!0}),t}function a(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(ft.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(a(),ot.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(Ct,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:kt.test(n)?ot.parseJSON(n):n}catch(o){}ot.data(e,t,n)}else n=void 0}return n}function c(e){var t;for(t in e)if(("data"!==t||!ot.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function d(e,t,n,i){if(ot.acceptData(e)){var o,r,a=ot.expando,s=e.nodeType,l=s?ot.cache:e,c=s?e[a]:e[a]&&a;if(c&&l[c]&&(i||l[c].data)||void 0!==n||"string"!=typeof t)return c||(c=s?e[a]=J.pop()||ot.guid++:a),l[c]||(l[c]=s?{}:{toJSON:ot.noop}),("object"==typeof t||"function"==typeof t)&&(i?l[c]=ot.extend(l[c],t):l[c].data=ot.extend(l[c].data,t)),r=l[c],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[ot.camelCase(t)]=n),"string"==typeof t?(o=r[t],null==o&&(o=r[ot.camelCase(t)])):o=r,o}}function u(e,t,n){if(ot.acceptData(e)){var i,o,r=e.nodeType,a=r?ot.cache:e,s=r?e[ot.expando]:ot.expando;if(a[s]){if(t&&(i=n?a[s]:a[s].data)){ot.isArray(t)?t=t.concat(ot.map(t,ot.camelCase)):t in i?t=[t]:(t=ot.camelCase(t),t=t in i?[t]:t.split(" ")),o=t.length;for(;o--;)delete i[t[o]];if(n?!c(i):!ot.isEmptyObject(i))return}(n||(delete a[s].data,c(a[s])))&&(r?ot.cleanData([e],!0):nt.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function h(){return!0}function p(){return!1}function f(){try{return ft.activeElement}catch(e){}}function v(e){var t=Lt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function m(e,t){var n,i,o=0,r=typeof e.getElementsByTagName!==$t?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==$t?e.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],n=e.childNodes||e;null!=(i=n[o]);o++)!t||ot.nodeName(i,t)?r.push(i):ot.merge(r,m(i,t));return void 0===t||t&&ot.nodeName(e,t)?ot.merge([e],r):r}function g(e){Pt.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t){return ot.nodeName(e,"table")&&ot.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==ot.find.attr(e,"type"))+"/"+e.type,e}function _(e){var t=Yt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,i=0;null!=(n=e[i]);i++)ot._data(n,"globalEval",!t||ot._data(t[i],"globalEval"))}function x(e,t){if(1===t.nodeType&&ot.hasData(e)){var n,i,o,r=ot._data(e),a=ot._data(t,r),s=r.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,o=s[n].length;o>i;i++)ot.event.add(t,n,s[n][i])}a.data&&(a.data=ot.extend({},a.data))}}function $(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[ot.expando]){o=ot._data(t);for(i in o.events)ot.removeEvent(t,i,o.handle);t.removeAttribute(ot.expando)}"script"===n&&t.text!==e.text?(y(t).text=e.text,_(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!ot.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Pt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function k(t,n){var i,o=ot(n.createElement(t)).appendTo(n.body),r=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(o[0]))?i.display:ot.css(o[0],"display");return o.detach(),r}function C(e){var t=ft,n=Qt[e];return n||(n=k(e,t),"none"!==n&&n||(Zt=(Zt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Zt[0].contentWindow||Zt[0].contentDocument).document,t.write(),t.close(),n=k(e,t),Zt.detach()),Qt[e]=n),n}function T(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=pn.length;o--;)if(t=pn[o]+n,t in e)return t;return i}function A(e,t){for(var n,i,o,r=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(r[a]=ot._data(i,"olddisplay"),n=i.style.display,t?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&At(i)&&(r[a]=ot._data(i,"olddisplay",C(i.nodeName)))):(o=At(i),(n&&"none"!==n||!o)&&ot._data(i,"olddisplay",o?n:ot.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function D(e,t,n){var i=cn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function P(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=ot.css(e,n+St[r],!0,o)),i?("content"===n&&(a-=ot.css(e,"padding"+St[r],!0,o)),"margin"!==n&&(a-=ot.css(e,"border"+St[r]+"Width",!0,o))):(a+=ot.css(e,"padding"+St[r],!0,o),"padding"!==n&&(a+=ot.css(e,"border"+St[r]+"Width",!0,o)));return a}function E(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=en(e),a=nt.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=tn(e,t,r),(0>o||null==o)&&(o=e.style[t]),on.test(o))return o;i=a&&(nt.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+P(e,t,n||(a?"border":"content"),i,r)+"px"}function M(e,t,n,i,o){return new M.prototype.init(e,t,n,i,o)}function I(){return setTimeout(function(){fn=void 0}),fn=ot.now()}function N(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=St[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function F(e,t,n){for(var i,o=(_n[t]||[]).concat(_n["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,t,e))return i}function L(e,t,n){var i,o,r,a,s,l,c,d,u=this,h={},p=e.style,f=e.nodeType&&At(e),v=ot._data(e,"fxshow");n.queue||(s=ot._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,ot.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=ot.css(e,"display"),d="none"===c?ot._data(e,"olddisplay")||C(e.nodeName):c,"inline"===d&&"none"===ot.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==C(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",nt.shrinkWrapBlocks()||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],mn.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!v||void 0===v[i])continue;f=!0}h[i]=v&&v[i]||ot.style(e,i)}else c=void 0;if(ot.isEmptyObject(h))"inline"===("none"===c?C(e.nodeName):c)&&(p.display=c);else{v?"hidden"in v&&(f=v.hidden):v=ot._data(e,"fxshow",{}),r&&(v.hidden=!f),f?ot(e).show():u.done(function(){ot(e).hide()}),u.done(function(){var t;ot._removeData(e,"fxshow");for(t in h)ot.style(e,t,h[t])});for(i in h)a=F(f?v[i]:0,i,u),i in v||(v[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function j(e,t){var n,i,o,r,a;for(n in e)if(i=ot.camelCase(n),o=t[i],r=e[n],ot.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),a=ot.cssHooks[i],a&&"expand"in a){r=a.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function O(e,t,n){var i,o,r=0,a=yn.length,s=ot.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=fn||I(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(r);return s.notifyWith(e,[c,r,n]),1>r&&l?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:ot.extend({},t),opts:ot.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:fn||I(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ot.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),d=c.props;for(j(d,c.opts.specialEasing);a>r;r++)if(i=yn[r].call(c,e,d,c.opts))return i;return ot.map(d,F,c),ot.isFunction(c.opts.start)&&c.opts.start.call(e,c),ot.fx.timer(ot.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function R(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(yt)||[];if(ot.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function H(e,t,n,i){function o(s){var l;return r[s]=!0,ot.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||a||r[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},a=e===zn;return o(t.dataTypes[0])||!r["*"]&&o("*")}function B(e,t){var n,i,o=ot.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&ot.extend(!0,e,n),e}function q(e,t,n){for(var i,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(a in s)if(s[a]&&s[a].test(o)){l.unshift(a);break}if(l[0]in n)r=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){r=a;break}i||(i=a)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function U(e,t,n,i){var o,r,a,s,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(r=d.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(a=c[l+" "+r]||c["* "+r],!a)for(o in c)if(s=o.split(" "),s[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[o]:c[o]!==!0&&(r=s[0],d.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(u){return{state:"parsererror",error:a?u:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function z(e,t,n,i){var o;if(ot.isArray(t))ot.each(t,function(t,o){n||Jn.test(e)?i(e,o):z(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==ot.type(t))i(e,t);else for(o in t)z(e+"["+o+"]",t[o],n,i)}function V(){try{return new e.XMLHttpRequest}catch(t){}}function W(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Y(e){return ot.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var J=[],G=J.slice,K=J.concat,X=J.push,Z=J.indexOf,Q={},et=Q.toString,tt=Q.hasOwnProperty,nt={},it="1.11.1",ot=function(e,t){return new ot.fn.init(e,t)},rt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,st=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};ot.fn=ot.prototype={jquery:it,constructor:ot,selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:G.call(this)},pushStack:function(e){var t=ot.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ot.each(this,e,t)},map:function(e){return this.pushStack(ot.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:J.sort,splice:J.splice},ot.extend=ot.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||ot.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(o=arguments[s]))for(i in o)e=a[i],n=o[i],a!==n&&(c&&n&&(ot.isPlainObject(n)||(t=ot.isArray(n)))?(t?(t=!1,r=e&&ot.isArray(e)?e:[]):r=e&&ot.isPlainObject(e)?e:{},a[i]=ot.extend(c,r,n)):void 0!==n&&(a[i]=n));return a},ot.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ot.type(e)},isArray:Array.isArray||function(e){return"array"===ot.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ot.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ot.type(e)||e.nodeType||ot.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Q[et.call(e)]||"object":typeof e},globalEval:function(t){t&&ot.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(at,"ms-").replace(st,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var o,r=0,a=e.length,s=n(e);if(i){if(s)for(;a>r&&(o=t.apply(e[r],i),o!==!1);r++);else for(r in e)if(o=t.apply(e[r],i),o===!1)break}else if(s)for(;a>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);else for(r in e)if(o=t.call(e[r],r,e[r]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(rt,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ot.merge(i,"string"==typeof e?[e]:e):X.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(Z)return Z.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;)e[o++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[o++]=t[i++];return e.length=o,e},grep:function(e,t,n){for(var i,o=[],r=0,a=e.length,s=!n;a>r;r++)i=!t(e[r],r),i!==s&&o.push(e[r]);return o},map:function(e,t,i){var o,r=0,a=e.length,s=n(e),l=[];if(s)for(;a>r;r++)o=t(e[r],r,i),null!=o&&l.push(o);else for(r in e)o=t(e[r],r,i),null!=o&&l.push(o);return K.apply([],l)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(o=e[t],t=e,e=o),ot.isFunction(e)?(n=G.call(arguments,2),i=function(){return e.apply(t||this,n.concat(G.call(arguments)))},i.guid=e.guid=e.guid||ot.guid++,i):void 0},now:function(){return+new Date},support:nt}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Q["[object "+t+"]"]=t.toLowerCase()});var ct=function(e){function t(e,t,n,i){var o,r,a,s,l,c,u,p,f,v;if((t?t.ownerDocument||t:H)!==M&&E(t),t=t||M,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(N&&!i){if(o=bt.exec(e))if(a=o[1]){if(9===s){if(r=t.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&O(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!F||!F.test(e))){if(p=u=R,f=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=C(e),(u=t.getAttribute("id"))?p=u.replace(_t,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+h(c[l]);f=yt.test(e)&&d(t.parentNode)||t,v=c.join(",")}if(v)try{return Q.apply(n,f.querySelectorAll(v)),n}catch(m){}finally{u||t.removeAttribute("id")}}}return S(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[R]=!0,e}function o(e){var t=M.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=e.length;i--;)x.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function d(e){return e&&typeof e.getElementsByTagName!==Y&&e}function u(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=q++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,c=[B,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(l=t[R]||(t[R]={}),(s=l[i])&&s[0]===B&&s[1]===r)return c[2]=s[2];if(l[i]=c,c[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function v(e,n,i){for(var o=0,r=n.length;r>o;o++)t(e,n[o],i);return i}function m(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(r=e[s])&&(!n||n(r,i,o))&&(a.push(r),c&&t.push(s));return a}function g(e,t,n,o,r,a){return o&&!o[R]&&(o=g(o)),r&&!r[R]&&(r=g(r,a)),i(function(i,a,s,l){var c,d,u,h=[],p=[],f=a.length,g=i||v(t||"*",s.nodeType?[s]:s,[]),b=!e||!i&&t?g:m(g,h,e,s,l),y=n?r||(i?e:f||o)?[]:a:b;if(n&&n(b,y,s,l),o)for(c=m(y,p),o(c,[],s,l),d=c.length;d--;)(u=c[d])&&(y[p[d]]=!(b[p[d]]=u));if(i){if(r||e){if(r){for(c=[],d=y.length;d--;)(u=y[d])&&c.push(b[d]=u);r(null,y=[],c,l)}for(d=y.length;d--;)(u=y[d])&&(c=r?tt.call(i,u):h[d])>-1&&(i[c]=!(a[c]=u))}}else y=m(y===a?y.splice(f,y.length):y),r?r(null,a,y,l):Q.apply(a,y)})}function b(e){for(var t,n,i,o=e.length,r=x.relative[e[0].type],a=r||x.relative[" "],s=r?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return tt.call(t,e)>-1},a,!0),d=[function(e,n,i){return!r&&(i||n!==A)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];o>s;s++)if(n=x.relative[e[s].type])d=[p(f(d),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[R]){for(i=++s;o>i&&!x.relative[e[i].type];i++);return g(s>1&&f(d),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),n,i>s&&b(e.slice(s,i)),o>i&&b(e=e.slice(i)),o>i&&h(e))}d.push(n)}return f(d)}function y(e,n){var o=n.length>0,r=e.length>0,a=function(i,a,s,l,c){var d,u,h,p=0,f="0",v=i&&[],g=[],b=A,y=i||r&&x.find.TAG("*",c),_=B+=null==b?1:Math.random()||.1,w=y.length;for(c&&(A=a!==M&&a);f!==w&&null!=(d=y[f]);f++){if(r&&d){for(u=0;h=e[u++];)if(h(d,a,s)){l.push(d);break}c&&(B=_)}o&&((d=!h&&d)&&p--,i&&v.push(d))}if(p+=f,o&&f!==p){for(u=0;h=n[u++];)h(v,g,a,s);if(i){if(p>0)for(;f--;)v[f]||g[f]||(g[f]=X.call(l));g=m(g)}Q.apply(l,g),c&&!i&&g.length>0&&p+n.length>1&&t.uniqueSort(l)}return c&&(B=_,A=b),v};return o?i(a):a}var _,w,x,$,k,C,T,S,A,D,P,E,M,I,N,F,L,j,O,R="sizzle"+-new Date,H=e.document,B=0,q=0,U=n(),z=n(),V=n(),W=function(e,t){return e===t&&(P=!0),0},Y="undefined",J=1<<31,G={}.hasOwnProperty,K=[],X=K.pop,Z=K.push,Q=K.push,et=K.slice,tt=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=ot.replace("w","w#"),at="\\["+it+"*("+ot+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+it+"*\\]",st=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),dt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ht=new RegExp(st),pt=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},vt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(K=et.call(H.childNodes),H.childNodes),K[H.childNodes.length].nodeType}catch($t){Q={apply:K.length?function(e,t){Z.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},E=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:H,i=n.defaultView;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,I=n.documentElement,N=!k(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){E()},!1):i.attachEvent&&i.attachEvent("onunload",function(){E()})),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(n.getElementsByClassName)&&o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=o(function(e){return I.appendChild(e).id=R,!n.getElementsByName||!n.getElementsByName(R).length}),w.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==Y&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&N?t.getElementsByClassName(e):void 0},L=[],F=[],(w.qsa=gt.test(n.querySelectorAll))&&(o(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&F.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||F.push(":checked")}),o(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=gt.test(j=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&o(function(e){w.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),L.push("!=",st)}),F=F.length&&new RegExp(F.join("|")),L=L.length&&new RegExp(L.join("|")),t=gt.test(I.compareDocumentPosition),O=t||gt.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return P=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===H&&O(H,e)?-1:t===n||t.ownerDocument===H&&O(H,t)?1:D?tt.call(D,e)-tt.call(D,t):0:4&i?-1:1)}:function(e,t){if(e===t)return P=!0,0;var i,o=0,r=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!r||!s)return e===n?-1:t===n?1:r?-1:s?1:D?tt.call(D,e)-tt.call(D,t):0;if(r===s)return a(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===H?-1:c[o]===H?1:0},n):M},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==M&&E(e),n=n.replace(ut,"='$1']"),!(!w.matchesSelector||!N||L&&L.test(n)||F&&F.test(n)))try{var i=j.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return t(n,M,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==M&&E(e),O(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==M&&E(e);var n=x.attrHandle[t.toLowerCase()],i=n&&G.call(x.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==i?i:w.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(P=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(W),P){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return D=null,e},$=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=$(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=$(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,xt),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,xt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,p,f,v=r!==a?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),b=!l&&!s;if(m){if(r){for(;v;){for(u=t;u=u[v];)if(s?u.nodeName.toLowerCase()===g:1===u.nodeType)return!1;f=v="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&b){for(d=m[R]||(m[R]={}),c=d[e]||[],p=c[0]===B&&c[1],h=c[0]===B&&c[2],u=p&&m.childNodes[p];u=++p&&u&&u[v]||(h=p=0)||f.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[B,p,h];break}}else if(b&&(c=(t[R]||(t[R]={}))[e])&&c[0]===B)h=c[1];else for(;(u=++p&&u&&u[v]||(h=p=0)||f.pop())&&((s?u.nodeName.toLowerCase()!==g:1!==u.nodeType)||!++h||(b&&((u[R]||(u[R]={}))[e]=[B,h]),u!==t)););return h-=o,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,n){var o,r=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[R]?r(n):r.length>1?(o=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),a=o.length;a--;)i=tt.call(e,o[a]),e[i]=!(t[i]=o[a])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=T(e.replace(lt,"$1"));return o[R]?i(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||$(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,xt).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;
return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return mt.test(e.nodeName)},input:function(e){return vt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})x.pseudos[_]=l(_);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,C=t.tokenize=function(e,n){var i,o,r,a,s,l,c,d=z[e+" "];if(d)return n?0:d.slice(0);for(s=e,l=[],c=x.preFilter;s;){(!i||(o=ct.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=dt.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(lt," ")}),s=s.slice(i.length));for(a in x.filter)!(o=ft[a].exec(s))||c[a]&&!(o=c[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):z(e,l).slice(0)},T=t.compile=function(e,t){var n,i=[],o=[],r=V[e+" "];if(!r){for(t||(t=C(e)),n=t.length;n--;)r=b(t[n]),r[R]?i.push(r):o.push(r);r=V(e,y(o,i)),r.selector=e}return r},S=t.select=function(e,t,n,i){var o,r,a,s,l,c="function"==typeof e&&e,u=!i&&C(e=c.selector||e);if(n=n||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&w.getById&&9===t.nodeType&&N&&x.relative[r[1].type]){if(t=(x.find.ID(a.matches[0].replace(wt,xt),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=ft.needsContext.test(e)?0:r.length;o--&&(a=r[o],!x.relative[s=a.type]);)if((l=x.find[s])&&(i=l(a.matches[0].replace(wt,xt),yt.test(r[0].type)&&d(t.parentNode)||t))){if(r.splice(o,1),e=i.length&&h(r),!e)return Q.apply(n,i),n;break}}return(c||T(e,u))(i,t,!N,n,yt.test(e)&&d(t.parentNode)||t),n},w.sortStable=R.split("").sort(W).join("")===R,w.detectDuplicates=!!P,E(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(M.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var dt=ot.expr.match.needsContext,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;ot.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ot.find.matchesSelector(i,e)?[i]:[]:ot.find.matches(e,ot.grep(t,function(e){return 1===e.nodeType}))},ot.fn.extend({find:function(e){var t,n=[],i=this,o=i.length;if("string"!=typeof e)return this.pushStack(ot(e).filter(function(){for(t=0;o>t;t++)if(ot.contains(i[t],this))return!0}));for(t=0;o>t;t++)ot.find(e,i[t],n);return n=this.pushStack(o>1?ot.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&dt.test(e)?ot(e):e||[],!1).length}});var pt,ft=e.document,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=ot.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:vt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||pt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ot?t[0]:t,ot.merge(this,ot.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ft,!0)),ut.test(n[1])&&ot.isPlainObject(t))for(n in t)ot.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=ft.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return pt.find(e);this.length=1,this[0]=i}return this.context=ft,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ot.isFunction(e)?"undefined"!=typeof pt.ready?pt.ready(e):e(ot):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ot.makeArray(e,this))};mt.prototype=ot.fn,pt=ot(ft);var gt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(e,t,n){for(var i=[],o=e[t];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!ot(o).is(n));)1===o.nodeType&&i.push(o),o=o[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ot.fn.extend({has:function(e){var t,n=ot(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(ot.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],a=dt.test(e)||"string"!=typeof e?ot(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ot.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?ot.unique(r):r)},index:function(e){return e?"string"==typeof e?ot.inArray(this[0],ot(e)):ot.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ot.unique(ot.merge(this.get(),ot(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ot.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ot.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ot.dir(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return ot.dir(e,"nextSibling")},prevAll:function(e){return ot.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ot.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ot.dir(e,"previousSibling",n)},siblings:function(e){return ot.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ot.sibling(e.firstChild)},contents:function(e){return ot.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ot.merge([],e.childNodes)}},function(e,t){ot.fn[e]=function(n,i){var o=ot.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=ot.filter(i,o)),this.length>1&&(bt[e]||(o=ot.unique(o)),gt.test(e)&&(o=o.reverse())),this.pushStack(o)}});var yt=/\S+/g,_t={};ot.Callbacks=function(e){e="string"==typeof e?_t[e]||r(e):ot.extend({},e);var t,n,i,o,a,s,l=[],c=!e.once&&[],d=function(r){for(n=e.memory&&r,i=!0,a=s||0,s=0,o=l.length,t=!0;l&&o>a;a++)if(l[a].apply(r[0],r[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(c?c.length&&d(c.shift()):n?l=[]:u.disable())},u={add:function(){if(l){var i=l.length;!function r(t){ot.each(t,function(t,n){var i=ot.type(n);"function"===i?e.unique&&u.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),t?o=l.length:n&&(s=i,d(n))}return this},remove:function(){return l&&ot.each(arguments,function(e,n){for(var i;(i=ot.inArray(n,l,i))>-1;)l.splice(i,1),t&&(o>=i&&o--,a>=i&&a--)}),this},has:function(e){return e?ot.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=n=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,n||u.disable(),this},locked:function(){return!c},fireWith:function(e,n){return!l||i&&!c||(n=n||[],n=[e,n.slice?n.slice():n],t?c.push(n):d(n)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},ot.extend({Deferred:function(e){var t=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ot.Deferred(function(n){ot.each(t,function(t,r){var a=ot.isFunction(e[t])&&e[t];o[r[1]](function(){var e=a&&a.apply(this,arguments);e&&ot.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ot.extend(e,i):i}},o={};return i.pipe=i.then,ot.each(t,function(e,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=G.call(arguments),a=r.length,s=1!==a||e&&ot.isFunction(e.promise)?a:0,l=1===s?e:ot.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?G.call(arguments):o,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)r[o]&&ot.isFunction(r[o].promise)?r[o].promise().done(c(o,i,r)).fail(l.reject).progress(c(o,n,t)):--s;return s||l.resolveWith(i,r),l.promise()}});var wt;ot.fn.ready=function(e){return ot.ready.promise().done(e),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ot.readyWait++:ot.ready(!0)},ready:function(e){if(e===!0?!--ot.readyWait:!ot.isReady){if(!ft.body)return setTimeout(ot.ready);ot.isReady=!0,e!==!0&&--ot.readyWait>0||(wt.resolveWith(ft,[ot]),ot.fn.triggerHandler&&(ot(ft).triggerHandler("ready"),ot(ft).off("ready")))}}}),ot.ready.promise=function(t){if(!wt)if(wt=ot.Deferred(),"complete"===ft.readyState)setTimeout(ot.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{ft.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&ft.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!ot.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}a(),ot.ready()}}()}return wt.promise(t)};var xt,$t="undefined";for(xt in ot(nt))break;nt.ownLast="0"!==xt,nt.inlineBlockNeedsLayout=!1,ot(function(){var e,t,n,i;n=ft.getElementsByTagName("body")[0],n&&n.style&&(t=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==$t&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=ft.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),ot.acceptData=function(e){var t=ot.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var kt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ct=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ot.cache[e[ot.expando]]:e[ot.expando],!!e&&!c(e)},data:function(e,t,n){return d(e,t,n)},removeData:function(e,t){return u(e,t)},_data:function(e,t,n){return d(e,t,n,!0)},_removeData:function(e,t){return u(e,t,!0)}}),ot.fn.extend({data:function(e,t){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=ot.data(r),1===r.nodeType&&!ot._data(r,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=ot.camelCase(i.slice(5)),l(r,i,o[i])));ot._data(r,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ot.data(this,e)}):arguments.length>1?this.each(function(){ot.data(this,e,t)}):r?l(r,e,ot.data(r,e)):void 0},removeData:function(e){return this.each(function(){ot.removeData(this,e)})}}),ot.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ot._data(e,t),n&&(!i||ot.isArray(n)?i=ot._data(e,t,ot.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ot.queue(e,t),i=n.length,o=n.shift(),r=ot._queueHooks(e,t),a=function(){ot.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ot._data(e,n)||ot._data(e,n,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(e,t+"queue"),ot._removeData(e,n)})})}}),ot.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ot.queue(this[0],e):void 0===t?this:this.each(function(){var n=ot.queue(this,e,t);ot._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ot.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ot.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=ot.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ot._data(r[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=["Top","Right","Bottom","Left"],At=function(e,t){return e=t||e,"none"===ot.css(e,"display")||!ot.contains(e.ownerDocument,e)},Dt=ot.access=function(e,t,n,i,o,r,a){var s=0,l=e.length,c=null==n;if("object"===ot.type(n)){o=!0;for(s in n)ot.access(e,t,s,n[s],!0,r,a)}else if(void 0!==i&&(o=!0,ot.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(ot(e),n)})),t))for(;l>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):r},Pt=/^(?:checkbox|radio)$/i;!function(){var e=ft.createElement("input"),t=ft.createElement("div"),n=ft.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,n,i=ft.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),nt[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Et=/^(?:input|select|textarea)$/i,Mt=/^key/,It=/^(?:mouse|pointer|contextmenu)|click/,Nt=/^(?:focusinfocus|focusoutblur)$/,Ft=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(e,t,n,i,o){var r,a,s,l,c,d,u,h,p,f,v,m=ot._data(e);if(m){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=ot.guid++),(a=m.events)||(a=m.events={}),(d=m.handle)||(d=m.handle=function(e){return typeof ot===$t||e&&ot.event.triggered===e.type?void 0:ot.event.dispatch.apply(d.elem,arguments)},d.elem=e),t=(t||"").match(yt)||[""],s=t.length;s--;)r=Ft.exec(t[s])||[],p=v=r[1],f=(r[2]||"").split(".").sort(),p&&(c=ot.event.special[p]||{},p=(o?c.delegateType:c.bindType)||p,c=ot.event.special[p]||{},u=ot.extend({type:p,origType:v,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:f.join(".")},l),(h=a[p])||(h=a[p]=[],h.delegateCount=0,c.setup&&c.setup.call(e,i,f,d)!==!1||(e.addEventListener?e.addEventListener(p,d,!1):e.attachEvent&&e.attachEvent("on"+p,d))),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),ot.event.global[p]=!0);e=null}},remove:function(e,t,n,i,o){var r,a,s,l,c,d,u,h,p,f,v,m=ot.hasData(e)&&ot._data(e);if(m&&(d=m.events)){for(t=(t||"").match(yt)||[""],c=t.length;c--;)if(s=Ft.exec(t[c])||[],p=v=s[1],f=(s[2]||"").split(".").sort(),p){for(u=ot.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,h=d[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=h.length;r--;)a=h[r],!o&&v!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(h.splice(r,1),a.selector&&h.delegateCount--,u.remove&&u.remove.call(e,a));l&&!h.length&&(u.teardown&&u.teardown.call(e,f,m.handle)!==!1||ot.removeEvent(e,p,m.handle),delete d[p])}else for(p in d)ot.event.remove(e,p+t[c],n,i,!0);ot.isEmptyObject(d)&&(delete m.handle,ot._removeData(e,"events"))}},trigger:function(t,n,i,o){var r,a,s,l,c,d,u,h=[i||ft],p=tt.call(t,"type")?t.type:t,f=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=d=i=i||ft,3!==i.nodeType&&8!==i.nodeType&&!Nt.test(p+ot.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[ot.expando]?t:new ot.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:ot.makeArray(n,[t]),c=ot.event.special[p]||{},o||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!o&&!c.noBubble&&!ot.isWindow(i)){for(l=c.delegateType||p,Nt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),d=s;d===(i.ownerDocument||ft)&&h.push(d.defaultView||d.parentWindow||e)}for(u=0;(s=h[u++])&&!t.isPropagationStopped();)t.type=u>1?l:c.bindType||p,r=(ot._data(s,"events")||{})[t.type]&&ot._data(s,"handle"),r&&r.apply(s,n),r=a&&s[a],r&&r.apply&&ot.acceptData(s)&&(t.result=r.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=p,!o&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),n)===!1)&&ot.acceptData(i)&&a&&i[p]&&!ot.isWindow(i)){d=i[a],d&&(i[a]=null),ot.event.triggered=p;try{i[p]()}catch(v){}ot.event.triggered=void 0,d&&(i[a]=d)}return t.result}},dispatch:function(e){e=ot.event.fix(e);var t,n,i,o,r,a=[],s=G.call(arguments),l=(ot._data(this,"events")||{})[e.type]||[],c=ot.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=ot.event.handlers.call(this,e,l),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((ot.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],r=0;s>r;r++)i=t[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?ot(n,this).index(l)>=0:ot.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[ot.expando])return e;var t,n,i,o=e.type,r=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=It.test(o)?this.mouseHooks:Mt.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new ot.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||ft),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,r=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||ft,o=i.documentElement,n=i.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ot.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var o=ot.extend(new ot.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?ot.event.trigger(o,null,t):ot.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},ot.removeEvent=ft.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===$t&&(e[i]=null),e.detachEvent(i,n))},ot.Event=function(e,t){return this instanceof ot.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:p):this.type=e,t&&ot.extend(this,t),this.timeStamp=e&&e.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(e,t)},ot.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ot.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==i&&!ot.contains(i,o))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(ot.event.special.submit={setup:function(){return ot.nodeName(this,"form")?!1:void ot.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ot.nodeName(t,"input")||ot.nodeName(t,"button")?t.form:void 0;n&&!ot._data(n,"submitBubbles")&&(ot.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ot._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ot.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ot.nodeName(this,"form")?!1:void ot.event.remove(this,"._submit")}}),nt.changeBubbles||(ot.event.special.change={setup:function(){return Et.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ot.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,e,!0)})),!1):void ot.event.add(this,"beforeactivate._change",function(e){var t=e.target;Et.test(t.nodeName)&&!ot._data(t,"changeBubbles")&&(ot.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ot.event.simulate("change",this.parentNode,e,!0)}),ot._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ot.event.remove(this,"._change"),!Et.test(this.nodeName)}}),nt.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ot.event.simulate(t,e.target,ot.event.fix(e),!0)};ot.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=ot._data(i,t);o||i.addEventListener(e,n,!0),ot._data(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=ot._data(i,t)-1;o?ot._data(i,t,o):(i.removeEventListener(e,n,!0),ot._removeData(i,t))}}}),ot.fn.extend({on:function(e,t,n,i,o){var r,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(r in e)this.on(r,t,n,e[r],o);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=p;else if(!i)return this;return 1===o&&(a=i,i=function(e){return ot().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=ot.guid++)),this.each(function(){ot.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ot(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){ot.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ot.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ot.event.trigger(e,t,n,!0):void 0}});var Lt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",jt=/ jQuery\d+="(?:null|\d+)"/g,Ot=new RegExp("<(?:"+Lt+")[\\s/>]","i"),Rt=/^\s+/,Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bt=/<([\w:]+)/,qt=/<tbody/i,Ut=/<|&#?\w+;/,zt=/<(?:script|style|link)/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^$|\/(?:java|ecma)script/i,Yt=/^true\/(.*)/,Jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Kt=v(ft),Xt=Kt.appendChild(ft.createElement("div"));Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td,ot.extend({clone:function(e,t,n){var i,o,r,a,s,l=ot.contains(e.ownerDocument,e);if(nt.html5Clone||ot.isXMLDoc(e)||!Ot.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(Xt.innerHTML=e.outerHTML,Xt.removeChild(r=Xt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ot.isXMLDoc(e)))for(i=m(r),s=m(e),a=0;null!=(o=s[a]);++a)i[a]&&$(o,i[a]);if(t)if(n)for(s=s||m(e),i=i||m(r),a=0;null!=(o=s[a]);a++)x(o,i[a]);else x(e,r);return i=m(r,"script"),i.length>0&&w(i,!l&&m(e,"script")),i=s=o=null,r},buildFragment:function(e,t,n,i){for(var o,r,a,s,l,c,d,u=e.length,h=v(t),p=[],f=0;u>f;f++)if(r=e[f],r||0===r)if("object"===ot.type(r))ot.merge(p,r.nodeType?[r]:r);else if(Ut.test(r)){for(s=s||h.appendChild(t.createElement("div")),l=(Bt.exec(r)||["",""])[1].toLowerCase(),d=Gt[l]||Gt._default,s.innerHTML=d[1]+r.replace(Ht,"<$1></$2>")+d[2],o=d[0];o--;)s=s.lastChild;if(!nt.leadingWhitespace&&Rt.test(r)&&p.push(t.createTextNode(Rt.exec(r)[0])),!nt.tbody)for(r="table"!==l||qt.test(r)?"<table>"!==d[1]||qt.test(r)?0:s:s.firstChild,o=r&&r.childNodes.length;o--;)ot.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(ot.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else p.push(t.createTextNode(r));for(s&&h.removeChild(s),nt.appendChecked||ot.grep(m(p,"input"),g),f=0;r=p[f++];)if((!i||-1===ot.inArray(r,i))&&(a=ot.contains(r.ownerDocument,r),s=m(h.appendChild(r),"script"),a&&w(s),n))for(o=0;r=s[o++];)Wt.test(r.type||"")&&n.push(r);return s=null,h},cleanData:function(e,t){for(var n,i,o,r,a=0,s=ot.expando,l=ot.cache,c=nt.deleteExpando,d=ot.event.special;null!=(n=e[a]);a++)if((t||ot.acceptData(n))&&(o=n[s],r=o&&l[o])){if(r.events)for(i in r.events)d[i]?ot.event.remove(n,i):ot.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c?delete n[s]:typeof n.removeAttribute!==$t?n.removeAttribute(s):n[s]=null,J.push(o))}}}),ot.fn.extend({text:function(e){return Dt(this,function(e){return void 0===e?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?ot.filter(e,this):this,o=0;null!=(n=i[o]);o++)t||1!==n.nodeType||ot.cleanData(m(n)),n.parentNode&&(t&&ot.contains(n.ownerDocument,n)&&w(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ot.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ot.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ot.clone(this,e,t)})},html:function(e){return Dt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(jt,""):void 0;if(!("string"!=typeof e||zt.test(e)||!nt.htmlSerialize&&Ot.test(e)||!nt.leadingWhitespace&&Rt.test(e)||Gt[(Bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ht,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(ot.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ot.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=K.apply([],e);var n,i,o,r,a,s,l=0,c=this.length,d=this,u=c-1,h=e[0],p=ot.isFunction(h);if(p||c>1&&"string"==typeof h&&!nt.checkClone&&Vt.test(h))return this.each(function(n){var i=d.eq(n);p&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(c&&(s=ot.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(r=ot.map(m(s,"script"),y),o=r.length;c>l;l++)i=s,l!==u&&(i=ot.clone(i,!0,!0),o&&ot.merge(r,m(i,"script"))),t.call(this[l],i,l);
if(o)for(a=r[r.length-1].ownerDocument,ot.map(r,_),l=0;o>l;l++)i=r[l],Wt.test(i.type||"")&&!ot._data(i,"globalEval")&&ot.contains(a,i)&&(i.src?ot._evalUrl&&ot._evalUrl(i.src):ot.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Jt,"")));s=n=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ot.fn[e]=function(e){for(var n,i=0,o=[],r=ot(e),a=r.length-1;a>=i;i++)n=i===a?this:this.clone(!0),ot(r[i])[t](n),X.apply(o,n.get());return this.pushStack(o)}});var Zt,Qt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=ft.getElementsByTagName("body")[0],n&&n.style?(t=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==$t&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ft.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var en,tn,nn=/^margin/,on=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),rn=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tn=function(e,t,n){var i,o,r,a,s=e.style;return n=n||en(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||ot.contains(e.ownerDocument,e)||(a=ot.style(e,t)),on.test(a)&&nn.test(t)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0===a?a:a+""}):ft.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var i,o,r,a,s=e.style;return n=n||en(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),on.test(a)&&!rn.test(t)&&(i=s.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=i,r&&(o.left=r)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,i,o;n=ft.getElementsByTagName("body")[0],n&&n.style&&(t=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=a=!1,l=!0,e.getComputedStyle&&(r="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,o=t.appendChild(ft.createElement("div")),o.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=t.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===o[0].offsetHeight,s&&(o[0].style.display="",o[1].style.display="none",s=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,a,s,l;n=ft.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,ot.extend(nt,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==r&&t(),r},reliableMarginRight:function(){return null==l&&t(),l}}))}(),ot.swap=function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,cn=new RegExp("^("+Tt+")(.*)$","i"),dn=new RegExp("^([+-])=("+Tt+")","i"),un={position:"absolute",visibility:"hidden",display:"block"},hn={letterSpacing:"0",fontWeight:"400"},pn=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=ot.camelCase(t),l=e.style;if(t=ot.cssProps[s]||(ot.cssProps[s]=S(l,s)),a=ot.cssHooks[t]||ot.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:l[t];if(r=typeof n,"string"===r&&(o=dn.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(ot.css(e,t)),r="number"),null!=n&&n===n&&("number"!==r||ot.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,i)))))try{l[t]=n}catch(c){}}},css:function(e,t,n,i){var o,r,a,s=ot.camelCase(t);return t=ot.cssProps[s]||(ot.cssProps[s]=S(e.style,s)),a=ot.cssHooks[t]||ot.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=tn(e,t,i)),"normal"===r&&t in hn&&(r=hn[t]),""===n||n?(o=parseFloat(r),n===!0||ot.isNumeric(o)?o||0:r):r}}),ot.each(["height","width"],function(e,t){ot.cssHooks[t]={get:function(e,n,i){return n?ln.test(ot.css(e,"display"))&&0===e.offsetWidth?ot.swap(e,un,function(){return E(e,t,i)}):E(e,t,i):void 0},set:function(e,n,i){var o=i&&en(e);return D(e,n,i?P(e,t,i,nt.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,o),o):0)}}}),nt.opacity||(ot.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=ot.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ot.trim(r.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=an.test(r)?r.replace(an,o):r+" "+o)}}),ot.cssHooks.marginRight=T(nt.reliableMarginRight,function(e,t){return t?ot.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(e,t){ot.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+St[i]+t]=r[i]||r[i-2]||r[0];return o}},nn.test(e)||(ot.cssHooks[e+t].set=D)}),ot.fn.extend({css:function(e,t){return Dt(this,function(e,t,n){var i,o,r={},a=0;if(ot.isArray(t)){for(i=en(e),o=t.length;o>a;a++)r[t[a]]=ot.css(e,t[a],!1,i);return r}return void 0!==n?ot.style(e,t,n):ot.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){At(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=M,M.prototype={constructor:M,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(ot.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.pos=t=this.options.duration?ot.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ot.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ot.fx.step[e.prop]?ot.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ot.cssProps[e.prop]]||ot.cssHooks[e.prop])?ot.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ot.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ot.fx=M.prototype.init,ot.fx.step={};var fn,vn,mn=/^(?:toggle|show|hide)$/,gn=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),bn=/queueHooks$/,yn=[L],_n={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),o=gn.exec(t),r=o&&o[3]||(ot.cssNumber[e]?"":"px"),a=(ot.cssNumber[e]||"px"!==r&&+i)&&gn.exec(ot.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==r){r=r||a[3],o=o||[],a=+i||1;do s=s||".5",a/=s,ot.style(n.elem,e,a+r);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return o&&(a=n.start=+a||+i||0,n.unit=r,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};ot.Animation=ot.extend(O,{tweener:function(e,t){ot.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],_n[n]=_n[n]||[],_n[n].unshift(t)},prefilter:function(e,t){t?yn.unshift(e):yn.push(e)}}),ot.speed=function(e,t,n){var i=e&&"object"==typeof e?ot.extend({},e):{complete:n||!n&&t||ot.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ot.isFunction(t)&&t};return i.duration=ot.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ot.fx.speeds?ot.fx.speeds[i.duration]:ot.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ot.isFunction(i.old)&&i.old.call(this),i.queue&&ot.dequeue(this,i.queue)},i},ot.fn.extend({fadeTo:function(e,t,n,i){return this.filter(At).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=ot.isEmptyObject(e),r=ot.speed(t,n,i),a=function(){var t=O(this,ot.extend({},e),r);(o||ot._data(this,"finish"))&&t.stop(!0)};return a.finish=a,o||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=ot.timers,a=ot._data(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&bn.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));(t||!n)&&ot.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ot._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=ot.timers,a=i?i.length:0;for(n.finish=!0,ot.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ot.each(["toggle","show","hide"],function(e,t){var n=ot.fn[t];ot.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,i,o)}}),ot.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ot.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ot.timers=[],ot.fx.tick=function(){var e,t=ot.timers,n=0;for(fn=ot.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||ot.fx.stop(),fn=void 0},ot.fx.timer=function(e){ot.timers.push(e),e()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){vn||(vn=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(vn),vn=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(e,t){return e=ot.fx?ot.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,o;t=ft.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=ft.createElement("select"),o=n.appendChild(ft.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=o.selected,nt.enctype=!!ft.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!o.disabled,e=ft.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var wn=/\r/g;ot.fn.extend({val:function(e){var t,n,i,o=this[0];{if(arguments.length)return i=ot.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,ot(this).val()):e,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(e){return null==e?"":e+""})),t=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(wn,""):null==n?"":n)}}}),ot.extend({valHooks:{option:{get:function(e){var t=ot.find.attr(e,"value");return null!=t?t:ot.trim(ot.text(e))}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,a=r?null:[],s=r?o+1:i.length,l=0>o?s:r?o:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==o||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ot.nodeName(n.parentNode,"optgroup"))){if(t=ot(n).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=ot.makeArray(t),a=o.length;a--;)if(i=o[a],ot.inArray(ot.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(e,t){return ot.isArray(t)?e.checked=ot.inArray(ot(e).val(),t)>=0:void 0}},nt.checkOn||(ot.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xn,$n,kn=ot.expr.attrHandle,Cn=/^(?:checked|selected)$/i,Tn=nt.getSetAttribute,Sn=nt.input;ot.fn.extend({attr:function(e,t){return Dt(this,ot.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ot.removeAttr(this,e)})}}),ot.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===$t?ot.prop(e,t,n):(1===r&&ot.isXMLDoc(e)||(t=t.toLowerCase(),i=ot.attrHooks[t]||(ot.expr.match.bool.test(t)?$n:xn)),void 0===n?i&&"get"in i&&null!==(o=i.get(e,t))?o:(o=ot.find.attr(e,t),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(e,n,t))?o:(e.setAttribute(t,n+""),n):void ot.removeAttr(e,t))},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(yt);if(r&&1===e.nodeType)for(;n=r[o++];)i=ot.propFix[n]||n,ot.expr.match.bool.test(n)?Sn&&Tn||!Cn.test(n)?e[i]=!1:e[ot.camelCase("default-"+n)]=e[i]=!1:ot.attr(e,n,""),e.removeAttribute(Tn?n:i)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&ot.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),$n={set:function(e,t,n){return t===!1?ot.removeAttr(e,n):Sn&&Tn||!Cn.test(n)?e.setAttribute(!Tn&&ot.propFix[n]||n,n):e[ot.camelCase("default-"+n)]=e[n]=!0,n}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(e,t){var n=kn[t]||ot.find.attr;kn[t]=Sn&&Tn||!Cn.test(t)?function(e,t,i){var o,r;return i||(r=kn[t],kn[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,kn[t]=r),o}:function(e,t,n){return n?void 0:e[ot.camelCase("default-"+t)]?t.toLowerCase():null}}),Sn&&Tn||(ot.attrHooks.value={set:function(e,t,n){return ot.nodeName(e,"input")?void(e.defaultValue=t):xn&&xn.set(e,t,n)}}),Tn||(xn={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},kn.id=kn.name=kn.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},ot.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:xn.set},ot.attrHooks.contenteditable={set:function(e,t,n){xn.set(e,""===t?!1:t,n)}},ot.each(["width","height"],function(e,t){ot.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(ot.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var An=/^(?:input|select|textarea|button|object)$/i,Dn=/^(?:a|area)$/i;ot.fn.extend({prop:function(e,t){return Dt(this,ot.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ot.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ot.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,o,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return r=1!==a||!ot.isXMLDoc(e),r&&(t=ot.propFix[t]||t,o=ot.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ot.find.attr(e,"tabindex");return t?parseInt(t,10):An.test(e.nodeName)||Dn.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||ot.each(["href","src"],function(e,t){ot.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(ot.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),nt.enctype||(ot.propFix.enctype="encoding");var Pn=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(e){var t,n,i,o,r,a,s=0,l=this.length,c="string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(yt)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pn," "):" ")){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=ot.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,o,r,a,s=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(yt)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pn," "):"")){for(r=0;o=t[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");a=e?ot.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ot.isFunction(e)?function(n){ot(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,o=ot(this),r=e.match(yt)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===$t||"boolean"===n)&&(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ot._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Pn," ").indexOf(t)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ot.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ot.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var En=ot.now(),Mn=/\?/,In=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,o=ot.trim(t+"");return o&&!ot.trim(o.replace(In,function(e,t,o,r){return n&&t&&(i=0),0===i?e:(n=o||t,i+=!r-!o,"")}))?Function("return "+o)():ot.error("Invalid JSON: "+t)},ot.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+t),n};var Nn,Fn,Ln=/#.*$/,jn=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hn=/^(?:GET|HEAD)$/,Bn=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Un={},zn={},Vn="*/".concat("*");try{Fn=location.href}catch(Wn){Fn=ft.createElement("a"),Fn.href="",Fn=Fn.href}Nn=qn.exec(Fn.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fn,type:"GET",isLocal:Rn.test(Nn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,ot.ajaxSettings),t):B(ot.ajaxSettings,e)},ajaxPrefilter:R(Un),ajaxTransport:R(zn),ajax:function(e,t){function n(e,t,n,i){var o,d,g,b,_,x=t;2!==y&&(y=2,s&&clearTimeout(s),c=void 0,a=i||"",w.readyState=e>0?4:0,o=e>=200&&300>e||304===e,n&&(b=q(u,w,n)),b=U(u,b,w,o),o?(u.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(ot.lastModified[r]=_),_=w.getResponseHeader("etag"),_&&(ot.etag[r]=_)),204===e||"HEAD"===u.type?x="nocontent":304===e?x="notmodified":(x=b.state,d=b.data,g=b.error,o=!g)):(g=x,(e||!x)&&(x="error",0>e&&(e=0))),w.status=e,w.statusText=(t||x)+"",o?f.resolveWith(h,[d,x,w]):f.rejectWith(h,[w,x,g]),w.statusCode(m),m=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[w,u,o?d:g]),v.fireWith(h,[w,x]),l&&(p.trigger("ajaxComplete",[w,u]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,r,a,s,l,c,d,u=ot.ajaxSetup({},t),h=u.context||u,p=u.context&&(h.nodeType||h.jquery)?ot(h):ot.event,f=ot.Deferred(),v=ot.Callbacks("once memory"),m=u.statusCode||{},g={},b={},y=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!d)for(d={};t=On.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=b[n]=b[n]||e,g[e]=t),this},overrideMimeType:function(e){return y||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return c&&c.abort(t),n(0,t),this}};if(f.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,u.url=((e||u.url||Fn)+"").replace(Ln,"").replace(Bn,Nn[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=ot.trim(u.dataType||"*").toLowerCase().match(yt)||[""],null==u.crossDomain&&(i=qn.exec(u.url.toLowerCase()),u.crossDomain=!(!i||i[1]===Nn[1]&&i[2]===Nn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Nn[3]||("http:"===Nn[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=ot.param(u.data,u.traditional)),H(Un,u,t,w),2===y)return w;l=u.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Hn.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(Mn.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=jn.test(r)?r.replace(jn,"$1_="+En++):r+(Mn.test(r)?"&":"?")+"_="+En++)),u.ifModified&&(ot.lastModified[r]&&w.setRequestHeader("If-Modified-Since",ot.lastModified[r]),ot.etag[r]&&w.setRequestHeader("If-None-Match",ot.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",u.contentType),w.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Vn+"; q=0.01":""):u.accepts["*"]);for(o in u.headers)w.setRequestHeader(o,u.headers[o]);if(u.beforeSend&&(u.beforeSend.call(h,w,u)===!1||2===y))return w.abort();_="abort";for(o in{success:1,error:1,complete:1})w[o](u[o]);if(c=H(zn,u,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,u]),u.async&&u.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},u.timeout));try{y=1,c.send(g,n)}catch(x){if(!(2>y))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return ot.get(e,t,n,"json")},getScript:function(e,t){return ot.get(e,void 0,t,"script")}}),ot.each(["get","post"],function(e,t){ot[t]=function(e,n,i,o){return ot.isFunction(n)&&(o=o||i,i=n,n=void 0),ot.ajax({url:e,type:t,dataType:o,data:n,success:i})}}),ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ot.fn[t]=function(e){return this.on(t,e)}}),ot._evalUrl=function(e){return ot.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(e){if(ot.isFunction(e))return this.each(function(t){ot(this).wrapAll(e.call(this,t))});if(this[0]){var t=ot(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(ot.isFunction(e)?function(t){ot(this).wrapInner(e.call(this,t))}:function(){var t=ot(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ot.isFunction(e);return this.each(function(n){ot(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ot.css(e,"display"))},ot.expr.filters.visible=function(e){return!ot.expr.filters.hidden(e)};var Yn=/%20/g,Jn=/\[\]$/,Gn=/\r?\n/g,Kn=/^(?:submit|button|image|reset|file)$/i,Xn=/^(?:input|select|textarea|keygen)/i;ot.param=function(e,t){var n,i=[],o=function(e,t){t=ot.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(e)||e.jquery&&!ot.isPlainObject(e))ot.each(e,function(){o(this.name,this.value)});else for(n in e)z(n,e[n],t,o);return i.join("&").replace(Yn,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ot.prop(this,"elements");return e?ot.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ot(this).is(":disabled")&&Xn.test(this.nodeName)&&!Kn.test(e)&&(this.checked||!Pt.test(e))}).map(function(e,t){var n=ot(this).val();return null==n?null:ot.isArray(n)?ot.map(n,function(e){return{name:t.name,value:e.replace(Gn,"\r\n")}}):{name:t.name,value:n.replace(Gn,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||W()}:V;var Zn=0,Qn={},ei=ot.ajaxSettings.xhr();e.ActiveXObject&&ot(e).on("unload",function(){for(var e in Qn)Qn[e](void 0,!0)}),nt.cors=!!ei&&"withCredentials"in ei,ei=nt.ajax=!!ei,ei&&ot.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,i){var o,r=e.xhr(),a=++Zn;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)r[o]=e.xhrFields[o];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(e.hasContent&&e.data||null),t=function(n,o){var s,l,c;if(t&&(o||4===r.readyState))if(delete Qn[a],t=void 0,r.onreadystatechange=ot.noop,o)4!==r.readyState&&r.abort();else{c={},s=r.status,"string"==typeof r.responseText&&(c.text=r.responseText);try{l=r.statusText}catch(d){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=c.text?200:404}c&&i(s,l,c,r.getAllResponseHeaders())},e.async?4===r.readyState?setTimeout(t):r.onreadystatechange=Qn[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ot.globalEval(e),e}}}),ot.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ot.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ft.head||ot("head")[0]||ft.documentElement;return{send:function(i,o){t=ft.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ti=[],ni=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||ot.expando+"_"+En++;return this[e]=!0,e}}),ot.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,a,s=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=ot.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+o):t.jsonp!==!1&&(t.url+=(Mn.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||ot.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},i.always(function(){e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,ti.push(o)),a&&ot.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),ot.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ft;var i=ut.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=ot.buildFragment([e],t,o),o&&o.length&&ot(o).remove(),ot.merge([],i.childNodes))};var ii=ot.fn.load;ot.fn.load=function(e,t,n){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var i,o,r,a=this,s=e.indexOf(" ");return s>=0&&(i=ot.trim(e.slice(s,e.length)),e=e.slice(0,s)),ot.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&ot.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?ot("<div>").append(ot.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},ot.expr.filters.animated=function(e){return ot.grep(ot.timers,function(t){return e===t.elem}).length};var oi=e.document.documentElement;ot.offset={setOffset:function(e,t,n){var i,o,r,a,s,l,c,d=ot.css(e,"position"),u=ot(e),h={};"static"===d&&(e.style.position="relative"),s=u.offset(),r=ot.css(e,"top"),l=ot.css(e,"left"),c=("absolute"===d||"fixed"===d)&&ot.inArray("auto",[r,l])>-1,c?(i=u.position(),a=i.top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),ot.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):u.css(h)}},ot.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ot.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return t=r.documentElement,ot.contains(t,o)?(typeof o.getBoundingClientRect!==$t&&(i=o.getBoundingClientRect()),n=Y(r),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i
},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===ot.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ot.nodeName(e[0],"html")||(n=e.offset()),n.top+=ot.css(e[0],"borderTopWidth",!0),n.left+=ot.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ot.css(i,"marginTop",!0),left:t.left-n.left-ot.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||oi;e&&!ot.nodeName(e,"html")&&"static"===ot.css(e,"position");)e=e.offsetParent;return e||oi})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ot.fn[e]=function(i){return Dt(this,function(e,i,o){var r=Y(e);return void 0===o?r?t in r?r[t]:r.document.documentElement[i]:e[i]:void(r?r.scrollTo(n?ot(r).scrollLeft():o,n?o:ot(r).scrollTop()):e[i]=o)},e,i,arguments.length,null)}}),ot.each(["top","left"],function(e,t){ot.cssHooks[t]=T(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),on.test(n)?ot(e).position()[t]+"px":n):void 0})}),ot.each({Height:"height",Width:"width"},function(e,t){ot.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ot.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||o===!0?"margin":"border");return Dt(this,function(t,n,i){var o;return ot.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?ot.css(t,n,a):ot.style(t,n,i,a)},t,r?i:void 0,r,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var ri=e.jQuery,ai=e.$;return ot.noConflict=function(t){return e.$===ot&&(e.$=ai),t&&e.jQuery===ot&&(e.jQuery=ri),ot},typeof t===$t&&(e.jQuery=e.$=ot),ot}),function(e,t){if("function"==typeof define&&define.amd)define("backbonebase",["underscore","jquery","exports"],function(n,i,o){e.Backbone=t(e,o,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){{var o=e.Backbone,r=[],a=(r.push,r.slice);r.splice}t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var o=this,r=n.once(function(){o.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var o,r,a,s,l,d,u,h;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(s=e?[e]:n.keys(this._events),l=0,d=s.length;d>l;l++)if(e=s[l],a=this._events[e]){if(this._events[e]=o=[],t||i)for(u=0,h=a.length;h>u;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&o.push(r);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,i){var o=this._listeningTo;if(!o)return this;var r=!t&&!i;i||"object"!=typeof t||(i=this),e&&((o={})[e._listenId]=e);for(var a in o)e=o[a],e.off(t,i,this),(r||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),a=0,s=r.length;s>a;a++)e[t].apply(e,[r[a]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,o=e.length,r=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,a);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,a,s);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t);return}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(e,t){s[t]=function(t,i,o){var r=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=n.uniqueId("l"));return r[a]=t,o||"object"!=typeof i||(o=this),t[e](i,o,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var o,r,a,s,l,c,d,u;if(null==e)return this;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;a=i.unset,l=i.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(o in r)t=r[o],n.isEqual(u[o],t)||s.push(o),n.isEqual(d[o],t)?delete this.changed[o]:this.changed[o]=t,a?delete u[o]:u[o]=t;if(!l){s.length&&(this._pending=i);for(var h=0,p=s.length;p>h;h++)this.trigger("change:"+s[h],this,u[s[h]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in e)n.isEqual(o[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},j(this,e),this.sync("read",this,e)},save:function(e,t,i){var o,r,a,s=this.attributes;if(null==e||"object"==typeof e?(o=e,i=t):(o={})[e]=t,i=n.extend({validate:!0},i),o&&!i.wait){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;o&&i.wait&&(this.attributes=n.extend({},s,o)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=s;var t=l.parse(e,i);return i.wait&&(t=n.extend(o||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),void l.trigger("sync",l,e,i))},j(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=o),a=this.sync(r,this,i),o&&i.wait&&(this.attributes=s),a},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&o(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;j(this,e);var r=this.sync("delete",this,e);return e.wait||o(),r},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){h.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(f.prototype,s,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,m))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var o,r,a,s;for(o=0,r=e.length;r>o;o++)s=e[o]=this.get(e[o]),s&&(delete this._byId[s.id],delete this._byId[s.cid],a=this.indexOf(s),this.models.splice(a,1),this.length--,t.silent||(t.index=a,s.trigger("remove",s,this,t)),this._removeReference(s,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,v),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var o,r,a,s,l,c,d,u=t.at,p=this.model,f=this.comparator&&null==u&&t.sort!==!1,m=n.isString(this.comparator)?this.comparator:null,g=[],b=[],y={},_=t.add,w=t.merge,x=t.remove,$=!f&&_&&x?[]:!1;for(o=0,r=e.length;r>o;o++){if(l=e[o]||{},a=l instanceof h?s=l:l[p.prototype.idAttribute||"id"],c=this.get(a))x&&(y[c.cid]=!0),w&&(l=l===s?s.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!d&&c.hasChanged(m)&&(d=!0)),e[o]=c;else if(_){if(s=e[o]=this._prepareModel(l,t),!s)continue;g.push(s),this._addReference(s,t)}s=c||s,!$||!s.isNew()&&y[s.id]||$.push(s),y[s.id]=!0}if(x){for(o=0,r=this.length;r>o;++o)y[(s=this.models[o]).cid]||b.push(s);b.length&&this.remove(b,t)}if(g.length||$&&$.length)if(f&&(d=!0),this.length+=g.length,null!=u)for(o=0,r=g.length;r>o;o++)this.models.splice(u+o,0,g[o]);else{$&&(this.models.length=0);var k=$||g;for(o=0,r=k.length;r>o;o++)this.models.push(k[o])}if(d&&this.sort({silent:!0}),!t.silent){for(o=0,r=g.length;r>o;o++)(s=g[o]).trigger("add",s,this,t);(d||$&&$.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,o=this.models.length;o>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,o=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),o&&o(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(g,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var b=["groupBy","countBy","sortBy","indexBy"];n.each(b,function(e){f.prototype[e]=function(t,i){var o=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,o,i)}});var y=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var o=t.match(_),r=o[1],a=o[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,i):this.$el.on(r,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,o){var r=$[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:r,dataType:"json"};if(o.url||(a.url=n.result(i,"url")||L()),null!=o.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",o.emulateJSON&&(a.data._method=r);var s=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===a.type||o.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(n.extend(a,o));return i.trigger("request",i,l,o),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),$={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,S=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,s,{initialize:function(){},route:function(e,i,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return t.history.route(e,function(n){var a=r._extractParameters(e,n);r.execute(o,a),r.trigger.apply(r,["route:"+i].concat(a)),r.trigger("route",i,a),t.history.trigger("route",r,i,a)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,E=/^\/+|\/+$/g,M=/msie [\w.]+/,I=/\/$/,N=/#.*$/;D.started=!1,n.extend(D.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(I,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(P,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),o=document.documentMode,r=M.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(E,"/"),r&&this._wantsHashChange){var a=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!D.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(N,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new D;var F=function(e,t){var i,o=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,t);var r=function(){this.constructor=i};return r.prototype=o.prototype,i.prototype=new r,e&&n.extend(i.prototype,e),i.__super__=o.prototype,i};h.extend=f.extend=k.extend=y.extend=D.extend=F;var L=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),define("backbone",["backbonebase"],function(e){return _.extend(e.Collection.prototype,{deepClone:function(){return new this.constructor(this.invoke("toJSON"))},isEqualTo:function(e){for(var t,n=0,i=this.models.length;i>n;++n)if(t=this.models[n],!e.get(t.get("id")).isEqualTo(t))return!1;return!0},fetchCustom:function(e,t){e=e||{};var n=this;return n.fetchDeferred&&!t?n.fetchDeferred:(n.fetchDeferred=$.Deferred(),n.fetch(_.extend({success:function(e){n.fetchDeferred.resolve(e)},error:function(e){n.fetchDeferred.reject(e)}}),e),n.fetchDeferred)}}),_.extend(e.Model.prototype,{deepClone:function(){return new this.constructor(this.toJSON())},isEqualTo:function(e){for(var t in this.attributes)if(this.get(t)!==e.get(t))return!1;return!0},fetchCustom:function(e){e=e||{};var t=this;return t.fetchDeferred?t.fetchDeferred:(t.fetchDeferred=$.Deferred(),t.fetch(_.extend({success:function(e){t.fetchDeferred.resolve(e)},error:function(e){t.fetchDeferred.reject(e)}}),e),t.fetchDeferred)}}),e}),define("global-events",["underscore","backbone"],function(e,t){var n={};return e.extend(n,t.Events),n}),define("router",["backbone","global-events"],function(e,t){var n,i;return n=e.Router.extend({routes:{"more/image-management(/*folder)":"changeImageManagement",":category/:section(/*argument)":"changeSection","help-section":"changeHelp","(:content)":"changeContent","(*path)":"defaultRoute"},changeImageManagement:function(e){t.trigger("route:image-management",e)},changeSection:function(e,n,i){if(e=e&&e.toLowerCase(),n=n&&n.toLowerCase(),"edit/78787878"===i)t.trigger("route:category-section",e,"deal-of-the-day");else if("reporting"===e&&"click-to-call"===n){window.open("http://teleflora.voicestar.com/campaigns/report/dashboard?acc=QrOXxEWK299TDAEy","_blank")}else t.trigger("route:category-section",e,n),t.trigger("route:argument",e,n,i)},changeContent:function(e){t.trigger("route:content",e)},defaultRoute:function(){}}),{get:function(){return i||(i=new n),i}}}),define("navigation/templates/navigation-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+="<div>\r\n	";for(var i=0,j=categories.length;j>i;++i){__p+='\r\n		<span class="nav-group">\r\n			<div id="'+(null==(__t=categories[i].id)?"":__t)+'" class="nav-title">'+(null==(__t=categories[i].name)?"":__t)+'</div>\r\n			<div class="nav-body">\r\n				<div class="clearfix">\r\n					<div class="clearfix">\r\n						<div class="col-12">\r\n							<div class="nav-title-row clearfix">\r\n								';for(var k=0;3>k;++k)__p+=categories[i].subCategories[k]?'\r\n										<div class="col-3 no-padding">\r\n										<div class="nav-sub-title"><i class="icon '+(null==(__t=categories[i].subCategories[k].iconClass)?"":__t)+' icon-prefix"></i>'+(null==(__t=categories[i].subCategories[k].name)?"":__t)+"</div>\r\n										</div>\r\n									":'\r\n										<div class="col-3 no-padding">\r\n											<div class="nav-sub-title"></div>\r\n										</div>\r\n									',__p+="\r\n								";__p+='\r\n\r\n								<div class="col-3 no-padding pull-right">\r\n									<div class="nav-sub-title"><i class="icon icon-question-circle icon-prefix"></i>Did You Know?</div>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="row">\r\n						<div class="col-12">\r\n							';for(var k=0;3>k;++k){if(categories[i].subCategories[k]){__p+='\r\n									<div class="col-3 no-padding">\r\n									<ul class="nav-links">\r\n									';for(var m=0,n=categories[i].subCategories[k].sections.length;n>m;++m)__p+='\r\n											<li><a href="'+(null==(__t=categories[i].baseUrl+categories[i].subCategories[k].sections[m].url)?"":__t)+'">'+(null==(__t=categories[i].subCategories[k].sections[m].name)?"":__t)+"</a></li>\r\n									";__p+="\r\n									</ul>\r\n									</div>\r\n								"}else __p+='\r\n									<div class="col-3 no-padding"></div>\r\n								';__p+="\r\n							"}__p+='\r\n\r\n							<div class="col-3 no-padding pull-right">\r\n								<img src="http://placekitten.com/g/200/300" class="y-space-s fit-container">\r\n							</div>\r\n						</div>\r\n					</div>\r\n						\r\n					\r\n				</div>\r\n			</div>\r\n		</span>\r\n	'}__p+="\r\n</div>"}return __p}}),define("settings",[],function(){var e={productManagementBaseUrl:"#merchandising/product-management/",marketingCampaignBaseUrl:"#marketing-promotions/marketing-campaigns/",manageRewardsBaseUrl:"#more/manage-rewards/",floralAppCodeBaseUrl:"#more/floral-app-code-management/",categoryIndex:{merchandising:0,contentManagement:1,marketingPromotions:2,reporting:3,more:4,help:5},categories:[{name:"Merchandising",id:"merchandising",baseUrl:"#merchandising",subCategories:[{name:"Homepage",iconClass:"icon-home",sections:[{name:"Homepage Customization",url:"/homepage-customization"},{name:"Homepage Settings",url:"/homepage-settings"},{name:"Products & Messaging",url:"/products-messaging"}]},{name:"Categories",iconClass:"icon-site-map",sections:[{name:"Category Management",url:"/manage-categories"},{name:"Category Settings",url:"/category-settings"},{name:"Collections",url:"/collections"},{name:"Sympathy Page",url:"/sympathy-page"}]},{name:"Products",iconClass:"icon-leaf",sections:[{name:"Add-Ons",url:"/add-ons"},{name:"Deal of the Day",url:"/deal-of-the-day"},{name:"General Product Settings",url:"/general-product-settings"},{name:"Merchandising Icons",url:"/merchandising-icons"},{name:"Product Attributes",url:"/product-attributes"},{name:"Product Management",url:"/product-management"},{name:"Product Page Settings",url:"/product-page-settings"},{name:"Subscription Product",url:"/subscription-product-setup"},{name:"Third Party Product Catalogs",url:"/third-party-products-catalog"}]}]},{baseUrl:"#content-management",name:"Content Management",id:"content-management",subCategories:[{name:"Custom Pages",iconClass:"icon-list-ul",sections:[{name:"About Us",url:"/about-us"},{name:"Custom HTML Pages",url:"/custom-html-pages"},{name:"Help Page",url:"/help"}]},{name:"Additional Content",iconClass:"icon-grid",sections:[{name:"Checkout Messaging",url:"/checkout-messaging-management"},{name:"Custom Forms",url:"/custom-forms"},{name:"Modal Management",url:"/modal-management"},{name:"Social Media Setup",url:"/social-media-setup"}]},{name:"Wedding Pages",iconClass:"icon-heart",sections:[{name:"Flowers Page",url:"/wedding-flowers"},{name:"Galleries",url:"/wedding-gallery"},{name:"Landing Page",url:"/wedding-page"},{name:"Product Page",url:"/wedding-product"}]}]},{baseUrl:"#marketing-promotions",name:"Marketing & Promotions",id:"marketing-promotions",subCategories:[{name:"Emails",iconClass:"icon-email",sections:[{name:"Email List Management",url:"/email-list-management"},{name:"Email Settings",url:"/email-settings"},{name:"Marketing Email Management",url:"/manage-marketing-emails"}]},{name:"Marketing",iconClass:"icon-money",sections:[{name:"Bonus Blooms Program",url:"/bonus-bloom-program"},{name:"Floral App Code Management",url:"/floral-app-code-management"},{name:"Floral App Settings",url:"/floral-app-settings"},{name:"Marketing Campaigns",url:"/marketing-campaigns"},{name:"Paid Membership",url:"/paid-membership"},{name:"Promotion Codes",url:"/promotion-codes"},{name:"Rewards Program",url:"/manage-rewards"}]},{name:"SEO",iconClass:"icon-search",sections:[{name:"About Us Page",url:"/about-us"},{name:"Footer Management",url:"/footer-management"},{name:"Site Map",url:"/site-map"},{name:"Site Meta Tags",url:"/site-meta-tags"},{name:"Social Media Setup",url:"/social-media-setup"},{name:"URL Management",url:"/url-management"}]}]},{baseUrl:"#reporting",name:"Reporting",id:"reporting",subCategories:[{name:"Site Performance",iconClass:"icon-bar-chart",sections:[{name:"Find a Florist",url:"/find-a-florist"},{name:"Orders & Traffic",url:"/orders-traffic"},{name:"Promotion Codes",url:"/promo-codes"},{name:"Source Codes",url:"/source-codes"},{name:"Top Products",url:"/top-products"},{name:"Top Referrals",url:"/top-referrals"}]},{name:"Other Reports",iconClass:"icon-line-chart",sections:[{name:"Click to Call",url:"/click-to-call"},{name:"Floral App Reports",url:"/floral-app-reports"},{name:"Online Search",url:"/online-search"},{name:"Order Lookup",url:"/order-lookup"},{name:"Search Optimizer",url:"/search-optimizer"}]},{name:"Reporting Admin",iconClass:"icon-analytics",sections:[{name:"eSAT Audit Log",url:"/esat-audit-log"},{name:"Google Analytics",url:"/google-analytics"}]}]},{baseUrl:"#more",name:"More",id:"more",subCategories:[{name:"Settings",iconClass:"icon-cogs",sections:[{name:"Checkout Configuration",url:"/checkout-configuration"},{name:"Customer Accounts",url:"/customer-accounts"},{name:"eSAT Administration",url:"/esat-administration"},{name:"General Settings",url:"/general-settings"},{name:"Search Term Management",url:"/manage-search-terms"},{name:"Site Navigation",url:"/site-navigation"}]},{name:"Delivery",iconClass:"icon-cube",sections:[{name:"Delivery Days & Times",url:"/delivery-days-times"},{name:"Delivery Fee Management",url:"/manage-delivery-fees"},{name:"Drop Shipping Setup",url:"/drop-shipping-setup"},{name:"Funeral Home Locations",url:"/funeral-home-locations"},{name:"Order Blocks/Exceptions",url:"/orders-exceptions"},{name:"Store Locations",url:"/store-locations"}]},{name:"Site Design",iconClass:"icon-image",sections:[{name:"Image Management",url:"/image-management"},{name:"Site Theme",url:"/site-theme"}]}]},{baseUrl:"#help-section",name:"Help",id:"help",subCategories:[]}]};return e}),function(e){e.fn.hoverIntent=function(t,n,i){var o={interval:100,sensitivity:6,timeout:0};o="object"==typeof t?e.extend(o,t):e.isFunction(n)?e.extend(o,{over:t,out:n,selector:i}):e.extend(o,{over:t,out:t,selector:n});var r,a,s,l,c=function(e){r=e.pageX,a=e.pageY},d=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((s-r)*(s-r)+(l-a)*(l-a))<o.sensitivity?(e(n).off("mousemove.hoverIntent",c),n.hoverIntent_s=!0,o.over.apply(n,[t])):(s=r,l=a,n.hoverIntent_t=setTimeout(function(){d(t,n)},o.interval),void 0)},u=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=!1,o.out.apply(t,[e])},h=function(t){var n=e.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseenter"===t.type?(s=n.pageX,l=n.pageY,e(i).on("mousemove.hoverIntent",c),i.hoverIntent_s||(i.hoverIntent_t=setTimeout(function(){d(n,i)},o.interval))):(e(i).off("mousemove.hoverIntent",c),i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){u(n,i)},o.timeout)))};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},o.selector)}}(jQuery||$),define("hoverintent",["jquery"],function(e){return function(){var t;return t||e.$}}(this)),define("navigation/views/navigation-view",["underscore","backbone","../templates/navigation-tpl","settings","hoverintent"],function(e,t,n,i){var o=t.View.extend({template:n,initialize:function(){this.setElement(this.template(i)),this.cacheElem(),this.$helpGroup.addClass("help-group"),this.$el.find(".nav-group").hoverIntent({over:function(){$(this).addClass("active")
},out:function(){$(this).removeClass("active")},timeout:400})},cacheElem:function(){this.$navGroups=this.$el.find(".nav-group"),this.$helpGroup=this.$el.find(".nav-group:has(.nav-title#help)")},events:{"click a":"handleLink","click .help-group":"goHelp"},goHelp:function(){window.open("/#","_blank")},showNav:function(){$(this).addClass("active")},hideNav:function(){$(this).removeClass("active")},handleLink:function(e){$(e.target).closest(".nav-group").trigger("mouseleave")}});return new o}),define("navigation/templates/mobile-navigation-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<ul id="mobile-nav-list" class="compact-list">\r\n<li class="mobile-nav-search form-section">\r\n	<div class="search-container">\r\n		<input placeholder="Search" name="f-nav-search" id="f-nav-search" type="text">\r\n	</div>\r\n</li>\r\n';for(var i=0,j=categories.length;j>i;++i){__p+='\r\n	<li class="link mobile-nav-parent">\r\n		'+(null==(__t=categories[i].name)?"":__t)+'\r\n		<i class="icon icon-right-chevron pull-right"></i>\r\n	</li>\r\n	<ul class="mobile-nav-sub-list">\r\n		<li class="link main-menu-link"><i class="icon icon-left-chevron x-space-s"></i>Main Menu</li>\r\n		';for(var k=0,l=categories[i].subCategories.length;l>k;++k){__p+='\r\n			<li class="mobile-nav-title"><i class="icon '+(null==(__t=categories[i].subCategories[k].iconClass)?"":__t)+' icon-prefix"></i>'+(null==(__t=categories[i].subCategories[k].name)?"":__t)+"</li>\r\n			";for(var m=0,n=categories[i].subCategories[k].sections.length;n>m;++m)__p+='\r\n				<a href="'+(null==(__t=categories[i].baseUrl+categories[i].subCategories[k].sections[m].url)?"":__t)+'"><li>'+(null==(__t=categories[i].subCategories[k].sections[m].name)?"":__t)+"</li></a>\r\n			";__p+="\r\n		"}__p+='\r\n		<li class="mobile-nav-title">&nbsp;</li>\r\n	</ul>\r\n'}__p+='\r\n<li class="mobile-nav-title">Customer Service</li>\r\n<a href="#"><li>E-Mail Us</li></a>\r\n<a href="#"><li>800-835-3356</li></a>\r\n<li class="clearfix center-align">\r\n	<div class="centered-content-container">\r\n		<div class="col-2"><button class="icon icon-btn icon-pinterest icon-2x icon-colored"></button></div>\r\n		<div class="col-2"><button class="icon icon-btn icon-facebook icon-2x icon-colored"></button></div>\r\n		<div class="col-2"><button class="icon icon-btn icon-twitter icon-2x icon-colored"></button></div>\r\n		<div class="col-2"><button class="icon icon-btn icon-instagram icon-2x icon-colored"></button></div>\r\n		<div class="col-2"><button class="icon icon-btn icon-yelp icon-2x icon-colored"></button></div>\r\n	</div>\r\n</li>\r\n</ul>\r\n'}return __p}}),define("navigation/views/mobile-navigation-view",["backbone","../templates/mobile-navigation-tpl","settings"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(){this.setElement(this.template(n)),this.sections=[];var e,t,i,o,t,r,a;for(e=n.categories,i=0,o=e.length;o>i;++i)for(t=e[i].subCategories,r=0,a=t.length;a>r;++r)this.sections=this.sections.concat(t[r].sections);this.$el.find('.mobile-nav-parent:contains("Help")').addClass("mobile-help-group")},events:{"click .mobile-nav-parent":"toggleSubMenu","click .main-menu-link":"toggleSubMenu","click a":"handleLink","keydown #f-nav-search":"searchMenu","click .mobile-help-group":"goHelp"},toggleSubMenu:function(e){var t=$(e.currentTarget),n=t.hasClass("main-menu-link")?t.closest(".mobile-nav-sub-list"):t.next(".mobile-nav-sub-list"),i="transitionend webkitTransitionEnd otransitionend MSTransitionEnd";return t.hasClass("mobile-help-group")?!1:(n.addClass("mobile-nav-animating"),n.addClass(n.hasClass("mobile-nav-visible")?"right":"left"),void n.on(i,function(){n.removeClass("mobile-nav-animating left right").toggleClass("mobile-nav-visible"),n.off(i)}))},debounce:null,searchMenu:function(e){var t=this;null!==t.debounce&&window.clearTimeout(t.debounce),t.debounce=window.setTimeout(function(){t.showSearchResults(e.currentTarget.value),t.debounce=null},100)},goHelp:function(){window.open("/#","_blank")},showSearchResults:function(e){var t,n,i,o,r;if(e)for(t=[],r=new RegExp(e,"i"),n=0,i=this.sections.length;i>n;++n)o=this.sections[n],r.test(o.name)&&t.push(o)},handleLink:function(e){this.toggleSubMenu({currentTarget:$(e.currentTarget).siblings(".main-menu-link")[0]}),this.parent.toggleNav()}});return new i}),define("components/create-modal/templates/create-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="clearfix section-title">\r\n      <h2 class="pull-left">'+(null==(__t=title)?"":__t)+'</h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n  <div class="col-12 left-align">\r\n    <label for="text-input">'+(null==(__t=label)?"":__t)+'</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n    <input type="text" id="text-input" name="text-input">\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="btn-container-space-s">\r\n      <button id="cancel" class="btn btn-other">'+(null==(__t=cancelBtnText)?"":__t)+'</button>\r\n      <button id="confirm" class="btn btn-submit">'+(null==(__t=confirmBtnText)?"":__t)+"</button>\r\n    </div>\r\n  </div>\r\n</div>";return __p}}),function(e){"function"==typeof define&&define.amd?define("jqueryui",["jquery"],e):e(jQuery)}(function(e){function t(t,i){var o,r,a,s=t.nodeName.toLowerCase();return"area"===s?(o=t.parentNode,r=o.name,t.href&&r&&"map"===o.nodeName.toLowerCase()?(a=e("img[usemap='#"+r+"']")[0],!!a&&n(a)):!1):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function i(e){for(var t,n;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function o(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=r(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",a)}function a(){e.datepicker._isDisabledDatepicker(g.inline?g.dpDiv.parent()[0]:g.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function s(t,n){e.extend(t,n);for(var i in n)null==n[i]&&(t[i]=n[i]);return t}function l(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),i="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var i=e.attr(n,"tabindex"),o=isNaN(i);return(o||i>=0)&&t(n,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,i(this,t)+"px")})},e.fn["outer"+n]=function(t,o){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,i(this,t,!0,o)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(o.css("zIndex"),10),!isNaN(i)&&0!==i))return i;o=o.parent()}return 0}}),e.ui.plugin={add:function(t,n,i){var o,r=e.ui[t].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n,i){var o,r=e.plugins[t];if(r&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,n)}};var c=0,d=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{i=e._data(o,"events"),i&&i.remove&&e(o).triggerHandler("remove")}catch(a){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var o,r,a,s,l={},c=t.split(".")[0];return t=t.split(".")[1],o=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],a=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},o=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()):void(l[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},l,{constructor:a,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete r._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var n,i,o=d.call(arguments,1),r=0,a=o.length;a>r;r++)for(n in o[r])i=o[r][n],o[r].hasOwnProperty(n)&&void 0!==i&&(t[n]=e.isPlainObject(i)?e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(o){var r="string"==typeof o,a=d.call(arguments,1),s=this;return o=!r&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,this.each(r?function(){var n,r=e.data(this,i);return"instance"===o?(s=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,a),n!==r&&void 0!==n?(s=n&&n.jquery?s.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}:function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new n(o,this))}),s}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,r,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(o=a[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,function(i,a){function s(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,d=l[2];d?o.delegate(d,c,s):n.bind(c,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var o,r,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){"string"==typeof o&&(o={effect:o});var a,s=o?o===!0||"number"==typeof o?n:o.effect||n:t;o=o||{},"number"==typeof o&&(o={duration:o}),a=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),a&&e.effects&&e.effects.effect[s]?i[t](o):s!==t&&i[s]?i[s](o.duration,o.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}});var u=(e.widget,!1);e(document).mouseup(function(){u=!1});e.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return i&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),u=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function t(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r,a=Math.max,s=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=i.children()[0];return e("body").append(i),t=r.offsetWidth,i.css("overflow","scroll"),n=r.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),o=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,r="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:o,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i||o?n.width():n.outerWidth(),height:i||o?n.height():n.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return f.apply(this,arguments);o=e.extend({},o);var p,v,m,g,b,y,_=e(o.of),w=e.position.getWithinInfo(o.within),x=e.position.getScrollInfo(w),$=(o.collision||"flip").split(" "),k={};return y=i(_),_[0].preventDefault&&(o.at="left top"),v=y.width,m=y.height,g=y.offset,b=e.extend({},g),e.each(["my","at"],function(){var e,t,n=(o[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",e=u.exec(n[0]),t=u.exec(n[1]),k[this]=[e?e[0]:0,t?t[0]:0],o[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===$.length&&($[1]=$[0]),"right"===o.at[0]?b.left+=v:"center"===o.at[0]&&(b.left+=v/2),"bottom"===o.at[1]?b.top+=m:"center"===o.at[1]&&(b.top+=m/2),p=t(k.at,v,m),b.left+=p[0],b.top+=p[1],this.each(function(){var i,c,d=e(this),u=d.outerWidth(),h=d.outerHeight(),f=n(this,"marginLeft"),y=n(this,"marginTop"),C=u+f+n(this,"marginRight")+x.width,T=h+y+n(this,"marginBottom")+x.height,S=e.extend({},b),A=t(k.my,d.outerWidth(),d.outerHeight());"right"===o.my[0]?S.left-=u:"center"===o.my[0]&&(S.left-=u/2),"bottom"===o.my[1]?S.top-=h:"center"===o.my[1]&&(S.top-=h/2),S.left+=A[0],S.top+=A[1],r||(S.left=l(S.left),S.top=l(S.top)),i={marginLeft:f,marginTop:y},e.each(["left","top"],function(t,n){e.ui.position[$[t]]&&e.ui.position[$[t]][n](S,{targetWidth:v,targetHeight:m,elemWidth:u,elemHeight:h,collisionPosition:i,collisionWidth:C,collisionHeight:T,offset:[p[0]+A[0],p[1]+A[1]],my:o.my,at:o.at,within:w,elem:d})}),o.using&&(c=function(e){var t=g.left-S.left,n=t+v-u,i=g.top-S.top,r=i+m-h,l={target:{element:_,left:g.left,top:g.top,width:v,height:m},element:{element:d,left:S.left,top:S.top,width:u,height:h},horizontal:0>n?"left":t>0?"right":"center",vertical:0>r?"top":i>0?"bottom":"middle"};u>v&&s(t+n)<v&&(l.horizontal="center"),h>m&&s(i+r)<m&&(l.vertical="middle"),l.important=a(s(t),s(n))>a(s(i),s(r))?"horizontal":"vertical",o.using.call(this,e,l)}),d.offset(e.extend(S,{using:c}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=e.left-t.collisionPosition.marginLeft,l=o-s,c=s+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&0>=c?(n=e.left+l+t.collisionWidth-r-o,e.left+=l-n):e.left=c>0&&0>=l?o:l>c?o+r-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=a(e.left-s,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,s=e.top-t.collisionPosition.marginTop,l=o-s,c=s+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&0>=c?(n=e.top+l+t.collisionHeight-r-o,e.top+=l-n):e.top=c>0&&0>=l?o:l>c?o+r-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=a(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,r=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>d?(n=e.left+h+p+f+t.collisionWidth-a-r,(0>n||n<s(d))&&(e.left+=h+p+f)):u>0&&(i=e.left-t.collisionPosition.marginLeft+h+p+f-l,(i>0||s(i)<u)&&(e.left+=h+p+f))},top:function(e,t){var n,i,o=t.within,r=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-a-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,v=-2*t.offset[1];0>d?(i=e.top+p+f+v+t.collisionHeight-a-r,e.top+p+f+v>d&&(0>i||i<s(d))&&(e.top+=p+f+v)):u>0&&(n=e.top-t.collisionPosition.marginTop+p+f+v-l,e.top+p+f+v>u&&(n>0||s(n)<u)&&(e.top+=p+f+v))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,o,a,s=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in i)t.style[a]=i[a];t.appendChild(l),n=s||document.documentElement,n.insertBefore(t,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=e(l).offset().left,r=o>10&&11>o,t.innerHTML="",n.removeChild(t)}()}();e.ui.position;e.widget("ui.draggable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.document[0],i=this.options;try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(o){}return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this
},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=e(o.containment),i=n[0],void(i&&(t="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,o,r,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(o=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-a.grid[1]:o+a.grid[1]:o,r=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-a.grid[0]:r+a.grid[0]:r),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var o=i.options,r=e.extend({},n,{item:i.element});i.sortables=[],e(o.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,r))})},stop:function(t,n,i){var o=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,n,i){var o=this;e.each(i.sortables,function(){var r=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var o=e("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,n,i){var o=i.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,n,i){var o=i.options;o._opacity&&e(n.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var o=i.options,r=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+a.offsetHeight-t.pageY<o.scrollSensitivity?a.scrollTop=r=a.scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(a.scrollTop=r=a.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+a.offsetWidth-t.pageX<o.scrollSensitivity?a.scrollLeft=r=a.scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(a.scrollLeft=r=a.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(s).scrollTop()<o.scrollSensitivity?r=e(s).scrollTop(e(s).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<o.scrollSensitivity&&(r=e(s).scrollTop(e(s).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(s).scrollLeft()<o.scrollSensitivity?r=e(s).scrollLeft(e(s).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<o.scrollSensitivity&&(r=e(s).scrollLeft(e(s).scrollLeft()+o.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var o=i.options;i.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var o,r,a,s,l,c,d,u,h,p,f=i.options,v=f.snapTolerance,m=n.offset.left,g=m+i.helperProportions.width,b=n.offset.top,y=b+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)l=i.snapElements[h].left,c=l+i.snapElements[h].width,d=i.snapElements[h].top,u=d+i.snapElements[h].height,l-v>g||m>c+v||d-v>y||b>u+v||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(d-y)<=v,r=Math.abs(u-b)<=v,a=Math.abs(l-g)<=v,s=Math.abs(c-m)<=v,o&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top-i.margins.top),r&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top-i.margins.top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left-i.margins.left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left-i.margins.left)),p=o||r||a||s,"outer"!==f.snapMode&&(o=Math.abs(d-b)<=v,r=Math.abs(u-y)<=v,a=Math.abs(l-m)<=v,s=Math.abs(c-g)<=v,o&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top-i.margins.top),r&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top-i.margins.top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left-i.margins.left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left-i.margins.left)),!i.snapElements[h].snapping&&(o||r||a||s||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=o||r||a||s||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var o,r=i.options,a=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});a.length&&(o=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,n,i){var o=i.options;o._zIndex&&e(n.helper).css("zIndex",o._zIndex)}});e.ui.draggable;e.widget("ui.droppable",{version:"1.11.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,o=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&t+n>e}return function(t,n,i,o){if(!n.offset)return!1;var r=(t.positionAbs||t.position.absolute).left,a=(t.positionAbs||t.position.absolute).top,s=r+t.helperProportions.width,l=a+t.helperProportions.height,c=n.offset.left,d=n.offset.top,u=c+n.proportions().width,h=d+n.proportions().height;switch(i){case"fit":return r>=c&&u>=s&&a>=d&&h>=l;case"intersect":return c<r+t.helperProportions.width/2&&s-t.helperProportions.width/2<u&&d<a+t.helperProportions.height/2&&l-t.helperProportions.height/2<h;case"pointer":return e(o.pageY,d,n.proportions().height)&&e(o.pageX,c,n.proportions().width);case"touch":return(a>=d&&h>=a||l>=d&&h>=l||d>a&&l>h)&&(r>=c&&u>=r||s>=c&&u>=s||c>r&&s>u);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i,o,r=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<r.length;i++)if(!(r[i].options.disabled||t&&!r[i].accept.call(r[i].element[0],t.currentItem||t.element))){for(o=0;o<s.length;o++)if(s[o]===r[i].element[0]){r[i].proportions().height=0;continue e}r[i].visible="none"!==r[i].element.css("display"),r[i].visible&&("mousedown"===a&&r[i]._activate.call(r[i],n),r[i].offset=r[i].element.offset(),r[i].proportions({width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight}))}},drop:function(t,n){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,o,r,a=e.ui.intersect(t,this,this.options.tolerance,n),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===o}),r.length&&(i=e(r[0]).droppable("instance"),i.greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}};e.ui.droppable;e.widget("ui.resizable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0?!0:(t[i]=1,o=t[i]>0,t[i]=0,o)},_create:function(){var t,n,i,o,r,a=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;n<t.length;n++)i=e.trim(t[n]),r="ui-resizable-"+i,o=e("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:s.zIndex}),"se"===i&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(o);this._renderAxis=function(t){var n,i,o,r;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=this.element.children(this.handles[n]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){s.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,o=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var n,i,o,r=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,i+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,o=this.originalMousePosition,r=this.axis,a=t.pageX-o.left||0,s=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),l?(n=l.apply(this,[t,a,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,o,r,a,s,l,c=this.options,d=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&this._hasScroll(n[0],"left")?0:d.sizeDiff.height,r=i?0:d.sizeDiff.width,a={width:d.helper.width()-r,height:d.helper.height()-o},s=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(a,{top:l,left:s})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,o,r,a=this.options;r={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),i>r.minHeight&&(r.minHeight=i),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=s-t.minWidth),i&&c&&(e.left=s-t.maxWidth),a&&d&&(e.top=l-t.minHeight),o&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseInt(i[t],10)||0,n[t]+=parseInt(o[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),a=r&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,d=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};
o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,o,r,a,s,l=e(this).resizable("instance"),c=l.options,d=l.element,u=c.containment,h=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;h&&(l.containerElement=e(h),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=l._num(t.css("padding"+i))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,a=l._hasScroll(h,"left")?h.scrollWidth:r,s=l._hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:i.left,top:i.top,width:a,height:s}))},resize:function(t){var n,i,o,r,a=e(this).resizable("instance"),s=a.options,l=a.containerOffset,c=a.position,d=a._aspectRatio||t.shiftKey,u={top:0,left:0},h=a.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),c.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-u.left),d&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=s.helper?l.left:0),c.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),d&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),o=a.containerElement.get(0)===a.element.parent().get(0),r=/relative|absolute/.test(a.containerElement.css("position")),o&&r?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-l.left)),i=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-l.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,d&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,d&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,o=t.containerPosition,r=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:s.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:s.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).resizable("instance"),o=i.options,r=i.originalSize,a=i.originalPosition,s={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0},l=function(t,i){e(t).each(function(){var t=e(this),o=e(this).data("ui-resizable-alsoresize"),r={},a=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(o[t]||0)+(s[t]||0);n&&n>=0&&(r[t]=n||null)}),t.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,o=n.size,r=n.originalSize,a=n.originalPosition,s=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,d=l[1]||1,u=Math.round((o.width-r.width)/c)*c,h=Math.round((o.height-r.height)/d)*d,p=r.width+u,f=r.height+h,v=i.maxWidth&&i.maxWidth<p,m=i.maxHeight&&i.maxHeight<f,g=i.minWidth&&i.minWidth>p,b=i.minHeight&&i.minHeight>f;i.grid=l,g&&(p+=c),b&&(f+=d),v&&(p-=c),m&&(f-=d),/^(se|s|e)$/.test(s)?(n.size.width=p,n.size.height=f):/^(ne)$/.test(s)?(n.size.width=p,n.size.height=f,n.position.top=a.top-h):/^(sw)$/.test(s)?(n.size.width=p,n.size.height=f,n.position.left=a.left-u):((0>=f-d||0>=p-c)&&(t=n._getPaddingPlusBorderDimensions(this)),f-d>0?(n.size.height=f,n.position.top=a.top-h):(f=d-t.height,n.size.height=f,n.position.top=a.top+r.height-f),p-c>0?(n.size.width=p,n.position.left=a.left-u):(p=d-t.height,n.size.width=p,n.position.left=a.left+r.width-p))}});e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,o=e.data(this,"selectable-item");return o?(i=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),o.unselecting=!i,o.selecting=i,o.selected=i,i?n._trigger("selecting",t,{selecting:o.element}):n._trigger("unselecting",t,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,o=this.options,r=this.opos[0],a=this.opos[1],s=t.pageX,l=t.pageY;return r>s&&(n=s,s=r,r=n),a>l&&(n=l,l=a,a=n),this.helper.css({left:r,top:a,width:s-r,height:l-a}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),c=!1;n&&n.element!==i.element[0]&&("touch"===o.tolerance?c=!(n.left>s||n.right<r||n.top>l||n.bottom<a):"fit"===o.tolerance&&(c=n.left>r&&n.right<s&&n.top>a&&n.bottom<l),c?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(i=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var o,r,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(r)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,o,r,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],r=this._intersectsWithPointer(i),r&&i.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,a={};r&&"x"!==r||(a.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(a.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=e.left,a=r+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||i+c>s&&l>i+c,h="y"===this.options.axis||t+d>r&&a>t+d,p=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:r<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&n,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return i?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){s.push(this)}var i,o,r,a,s=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(r=e(c[i]),o=r.length-1;o>=0;o--)a=e.data(r[o],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,o,r,a,s,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(o=e(h[n]),i=o.length-1;i>=0;i--)r=e.data(o[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(u.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(n=u.length-1;n>=0;n--)for(a=u[n][1],s=u[n][0],i=0,c=s.length;c>i;i++)l=e(s[i]),l.data(this.widgetName+"-item",a),d.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(o)}):"img"===i&&o.attr("src",t.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(e,o){(!n||i.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,i,o,r,a,s,l,c,d,u,h=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,d=h.floating||this._isFloating(this.currentItem),a=d?"left":"top",s=d?"width":"height",u=d?"clientX":"clientY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[a],c=!1,t[u]-l>this.items[i][s]/2&&(c=!0),Math.abs(t[u]-l)<o&&(o=Math.abs(t[u]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],n=e(o.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(t){var n,i,o=this.options,r=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/o.grid[1])*o.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))
}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<o.length;i++)o[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<o.length;i++)o[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.widget("ui.accordion",{version:"1.11.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,o=this.headers.index(t.target),r=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:r=this.headers[(o+1)%i];break;case n.LEFT:case n.UP:r=this.headers[(o-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:r=this.headers[0];break;case n.END:r=this.headers[i-1]}r&&(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,n=this.options,i=n.heightStyle,o=this.element.parent();this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),i=t.next(),o=i.uniqueId().attr("id");t.attr("aria-controls",o),i.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===i?(t=o.height(),this.element.siblings(":visible").each(function(){var n=e(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(t-=n.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget),r=o[0]===i[0],a=r&&n.collapsible,s=a?e():o.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:a?e():o,newPanel:s};t.preventDefault(),r&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=a?!1:this.headers.index(o),this.active=r?e():o,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),r||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&o.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,n){var i,o,r,a=this,s=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},d=l&&c.down||c,u=function(){a._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(o=d),o=o||d.easing||c.easing,r=r||d.duration||c.duration,t.length?e.length?(i=e.show().outerHeight(),t.animate(this.hideProps,{duration:r,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:r,easing:o,complete:u,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?s+=n.now:"content"!==a.options.heightStyle&&(n.now=Math.round(i-t.outerHeight()-s),s=0)}})):t.animate(this.hideProps,r,o,u):e.animate(this.showProps,r,o,u)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,r,a,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",r=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),r===o?a=!0:r=o+r,s=new RegExp("^"+n(r),"i"),i=this.activeMenu.find(this.options.items).filter(function(){return s.test(e(this).text())}),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(r=String.fromCharCode(t.keyCode),s=new RegExp("^"+n(r),"i"),i=this.activeMenu.find(this.options.items).filter(function(){return s.test(e(this).text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,i=this,o=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),i=e("<span>").addClass("ui-menu-icon ui-icon "+o).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),t=r.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);i._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,r,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.outerHeight(),0>o?this.activeMenu.scrollTop(r+o):o+s>a&&this.activeMenu.scrollTop(r+o-a+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-o<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,i,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+o>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}});e.widget("ui.autocomplete",{version:"1.11.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,a="input"===o;this.isMultiLine=r?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[r||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault());if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){var i,o;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(o=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),i=n.item.attr("aria-label")||o.value,void(i&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!n&&!i)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}});var h,p=(e.ui.autocomplete,"ui-button ui-widget ui-state-default ui-corner-all"),f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",v=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},m=function(t){var n=t.name,i=t.form,o=e([]);return n&&(n=n.replace(/'/g,"\\'"),o=i?e(i).find("[name='"+n+"'][type=radio]"):e("[name='"+n+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"1.11.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,v),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,i="checkbox"===this.type||"radio"===this.type,o=i?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===h&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||e(this).removeClass(o)}).bind("click"+this.eventNamespace,function(e){n.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),i&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return n.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];m(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return n.disabled?!1:(e(this).addClass("ui-state-active"),h=this,void t.document.one("mouseup",function(){h=null}))}).bind("mouseup"+this.eventNamespace,function(){return n.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return n.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("checkbox"===this.type||"radio"===this.type?"ui-state-focus":"ui-state-focus ui-state-active"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?m(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))
},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(f),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,o=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),n=this.element.find(this.options.items),i=n.filter(":ui-button");n.not(":ui-button").button(),i.button("refresh"),this.buttons=n.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});e.ui.button;e.extend(e.ui,{datepicker:{version:"1.11.1"}});var g;e.extend(o.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,o,r;i=t.nodeName.toLowerCase(),o="div"===i||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),r=this._newInst(e(t),o),r.settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,r):o&&this._inlineDatepicker(t,r)},_newInst:function(t,n){var i=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?r(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,o,r,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[s?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&t.focus(this._showDatepicker),("button"===i||"both"===i)&&(o=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(r?e("<img/>").attr({src:r,alt:o,title:o}):o)),t[s?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,o,r=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(n=0,i=0,o=0;o<e.length;o++)e[o].length>n&&(n=e[o].length,i=o);return i},r.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,o,r){var a,l,c,d,u,h=this._dialogInst;return h||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},e.data(this._dialogInput[0],"datepicker",h)),s(h.settings,o||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+d,c/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var n,i=e(t),o=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===n?(o.append.remove(),o.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var n,i,o=e(t),r=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=o.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,i,o=e(t),r=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=o.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,i){var o,r,a,l,c=this._getInst(t);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):c?"all"===n?e.extend({},c.settings):this._get(c,n):null:(o=n||{},"string"==typeof n&&(o={},o[n]=i),void(c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),a=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,o),null!==a&&void 0!==o.dateFormat&&void 0===o.minDate&&(c.settings.minDate=this._formatDate(c,a)),null!==l&&void 0!==o.dateFormat&&void 0===o.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c))))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,o,r=e.datepicker._getInst(t.target),a=!0,s=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv),o[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,o[0]),n=e.datepicker._get(r,"onSelect"),n?(i=e.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,o=e.datepicker._getInst(t.target);return e.datepicker._get(o,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(t){var n,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i)),n&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(o){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,o,r,a,l,c,d;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),o=e.datepicker._get(n,"beforeShow"),r=o?o.apply(t,[t,n]):{},r!==!1&&(s(n.settings,r),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each(function(){return a|="fixed"===e(this).css("position"),!a}),l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),l=e.datepicker._checkOffset(n,l,a),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),n.inline||(c=e.datepicker._get(n,"showAnim"),d=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",i(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[c]?n.dpDiv.show(c,e.datepicker._get(n,"showOptions"),d):n.dpDiv[c||"show"](c?d:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,g=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,i=this._getNumberOfMonths(t),o=i[1],r=17,s=t.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&a.apply(s.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&t.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",r*o+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var o=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?o-a:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+o>l&&l>o?Math.abs(n.left+o-l):0),n.top-=Math.min(n.top,n.top+r>c&&c>r?Math.abs(r+s):0),n},_findPos:function(t){for(var n,i=this._getInst(t),o=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[o?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,i,o,r,a=this._curInst;!a||t&&a!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),o=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[n]||e.effects[n])?a.dpDiv.hide(n,e.datepicker._get(a,"showOptions"),i,o):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,o),n||o(),this._datepickerShowing=!1,r=this._get(a,"onClose"),r&&r.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var o=e(t),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(t){var n,i=e(t),o=this._getInst(i[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(n=new Date,o.selectedDay=n.getDate(),o.drawMonth=o.selectedMonth=n.getMonth(),o.drawYear=o.selectedYear=n.getFullYear()),this._notifyChange(o),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var o=e(t),r=this._getInst(o[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(t,n,i,o){var r,a=e(t);e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(r=this._getInst(a[0]),r.selectedDay=r.currentDay=e("a",o).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,o=e(t),r=this._getInst(o[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),i=this._get(r,"onSelect"),i?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,i,o,r=this._get(t,"altField");r&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),o=this.formatDate(n,i,this._getFormatConfig(t)),e(r).each(function(){e(this).val(o)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var o,r,a,s,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,v=-1,m=-1,g=-1,b=-1,y=!1,_=function(e){var n=o+1<t.length&&t.charAt(o+1)===e;return n&&o++,n},w=function(e){var t=_(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o="y"===e?i:1,r=new RegExp("^\\d{"+o+","+i+"}"),a=n.substring(l).match(r);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(t,i,o){var r=-1,a=e.map(_(t)?o:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,t){var i=t[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(r=t[0],l+=i.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},$=function(){if(n.charAt(l)!==t.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<t.length;o++)if(y)"'"!==t.charAt(o)||_("'")?$():y=!1;else switch(t.charAt(o)){case"d":g=w("d");break;case"D":x("D",u,h);break;case"o":b=w("o");break;case"m":m=w("m");break;case"M":m=x("M",p,f);break;case"y":v=w("y");break;case"@":s=new Date(w("@")),v=s.getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"!":s=new Date((w("!")-this._ticksTo1970)/1e4),v=s.getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"'":_("'")?$():y=!0;break;default:$()}if(l<n.length&&(a=n.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===v?v=(new Date).getFullYear():100>v&&(v+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=v?0:-100)),b>-1)for(m=1,g=b;;){if(r=this._getDaysInMonth(v,m-1),r>=g)break;m++,g-=r}if(s=this._daylightSavingAdjust(new Date(v,m-1,g)),s.getFullYear()!==v||s.getMonth()+1!==m||s.getDate()!==g)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var i,o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;return n&&i++,n},c=function(e,t,n){var i=""+t;if(l(e))for(;i.length<n;)i="0"+i;return i},d=function(e,t,n,i){return l(e)?i[t]:n[t]},u="",h=!1;if(t)for(i=0;i<e.length;i++)if(h)"'"!==e.charAt(i)||l("'")?u+=e.charAt(i):h=!1;else switch(e.charAt(i)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),o,r);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),a,s);break;case"y":u+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(i)}return u},_possibleChars:function(e){var t,n="",i=!1,o=function(n){var i=t+1<e.length&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||o("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":o("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),r=o,a=this._getFormatConfig(e);try{r=this.parseDate(n,i,a)||o}catch(s){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var o=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(i){}for(var o=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=o.getFullYear(),a=o.getMonth(),s=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(n);c;){switch(c[2]||"d"){case"d":case"D":s+=parseInt(c[1],10);break;case"w":case"W":s+=7*parseInt(c[1],10);break;case"m":case"M":a+=parseInt(c[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(c[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(r,a))}c=l.exec(n)}return new Date(r,a,s)},a=null==n||""===n?i:"string"==typeof n?r(n):"number"==typeof n?isNaN(n)?i:o(n):new Date(n.getTime());return a=a&&"Invalid Date"===a.toString()?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,o=e.selectedMonth,r=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),o===e.selectedMonth&&r===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,o,r,a,s,l,c,d,u,h,p,f,v,m,g,b,y,_,w,x,$,k,C,T,S,A,D,P,E,M,I,N,F,L,j,O,R,H=new Date,B=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),q=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),V=this._get(e,"navigationAsDateFormat"),W=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),G=1!==W[0]||1!==W[1],K=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),Q=e.drawMonth-Y,et=e.drawYear;if(0>Q&&(Q+=12,et--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-W[0]*W[1]+1,Z.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Q,1))>t;)Q--,0>Q&&(Q=11,et--);for(e.drawMonth=Q,e.drawYear=et,n=this._get(e,"prevText"),n=V?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Q-J,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,et,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+n+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+n+"</span></a>",o=this._get(e,"nextText"),o=V?this.formatDate(o,this._daylightSavingAdjust(new Date(et,Q+J,1)),this._getFormatConfig(e)):o,r=this._canAdjustMonth(e,1,et,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+o+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+o+"</span></a>",a=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?K:B,a=V?this.formatDate(a,s,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(q?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),_="",x=0;x<W[0];x++){for($="",this.maxRows=4,k=0;k<W[1];k++){if(C=this._daylightSavingAdjust(new Date(et,Q,e.selectedDay)),T=" ui-corner-all",S="",G){if(S+="<div class='ui-datepicker-group",W[1]>1)switch(k){case 0:S+=" ui-datepicker-group-first",T=" ui-corner-"+(q?"right":"left");break;case W[1]-1:S+=" ui-datepicker-group-last",T=" ui-corner-"+(q?"left":"right");break;default:S+=" ui-datepicker-group-middle",T=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?q?r:i:"")+(/all|right/.test(T)&&0===x?q?i:r:"")+this._generateMonthYearHeader(e,Q,et,X,Z,x>0||k>0,f,v)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)D=(w+d)%7,A+="<th scope='col'"+((w+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[D]+"'>"+p[D]+"</span></th>";for(S+=A+"</tr></thead><tbody>",P=this._getDaysInMonth(et,Q),et===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,P)),E=(this._getFirstDayOfMonth(et,Q)-d+7)%7,M=Math.ceil((E+P)/7),I=G&&this.maxRows>M?this.maxRows:M,this.maxRows=I,N=this._daylightSavingAdjust(new Date(et,Q,1-E)),F=0;I>F;F++){for(S+="<tr>",L=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",w=0;7>w;w++)j=m?m.apply(e.input?e.input[0]:null,[N]):[!0,""],O=N.getMonth()!==Q,R=O&&!b||!j[0]||X&&X>N||Z&&N>Z,L+="<td class='"+((w+d+6)%7>=5?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(N.getTime()===C.getTime()&&Q===e.selectedMonth&&e._keyEvent||y.getTime()===N.getTime()&&y.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!g?"":" "+j[1]+(N.getTime()===K.getTime()?" "+this._currentClass:"")+(N.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+(O&&!g||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(O&&!g?"&#xa0;":R?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===B.getTime()?" ui-state-highlight":"")+(N.getTime()===K.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);S+=L+"</tr>"}Q++,Q>11&&(Q=0,et++),S+="</tbody></table>"+(G?"</div>"+(W[0]>0&&k===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),$+=S}_+=$}return _+=c,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,n,i,o,r,a,s){var l,c,d,u,h,p,f,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",_="";if(r||!m)_+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=i&&i.getFullYear()===n,c=o&&o.getFullYear()===n,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=i.getMonth())&&(!c||d<=o.getMonth())&&(_+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+s[d]+"</option>");_+="</select>"}if(b||(y+=_+(!r&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!g)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},f=p(u[0]),v=Math.max(f,p(u[1]||"")),f=i?Math.max(f,i.getFullYear()):f,v=o?Math.min(v,o.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";v>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!r&&m&&g?"":"&#xa0;")+_),y+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"===n?t:0),o=e.drawMonth+("M"===n?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,o))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,o,r)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)
},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),o=n&&n>t?n:t;return i&&o>i?i:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var o=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(n,i+(0>t?t:o[0]*o[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var n,i,o=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),a=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=i),n[1].match(/[+\-].*/)&&(s+=i)),(!o||t.getTime()>=o.getTime())&&(!r||t.getTime()<=r.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new o,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.1";var b=(e.datepicker,e.widget("ui.dialog",{version:"1.11.1",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n,i=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{n=this.document[0].activeElement,n&&"body"!==n.nodeName.toLowerCase()&&e(n).blur()}catch(o){}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),o=n.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){o.focus()}),t.preventDefault()):(this._delay(function(){i.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(n,function(n,i){var o,r;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),o=i.click,i.click=function(){o.apply(t.element[0],arguments)},r={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(r).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,t(o))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(o,r){var a=r.offset.left-n.document.scrollLeft(),s=r.offset.top-n.document.scrollTop();i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(s>=0?"+":"")+s,of:n.window},e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",o,t(r))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,i=this.options,o=i.resizable,r=this.uiDialog.css("position"),a="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,o){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,t(o))},resize:function(e,i){n._trigger("resize",e,t(i))},stop:function(o,r){var a=n.uiDialog.offset(),s=a.left-n.document.scrollLeft(),l=a.top-n.document.scrollTop();i.height=n.uiDialog.height(),i.width=n.uiDialog.width(),i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(l>=0?"+":"")+l,of:n.window},e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",o,t(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,o={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(o[e]=t)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,i,o=this.uiDialog;"dialogClass"===e&&o.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=o.is(":data(ui-draggable)"),n&&!t&&o.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(i=o.is(":data(ui-resizable)"),i&&!t&&o.resizable("destroy"),i&&"string"==typeof t&&o.resizable("option","handles",t),i||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.progressbar",{version:"1.11.1",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectmenu",{version:"1.11.1",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this,n=this.element.attr("tabindex");this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:n||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,n){e.preventDefault(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var i=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&i.index!==t.focusIndex&&(t._trigger("focus",e,{item:i}),t.isOpen||t._select(i,e)),t.focusIndex=i.index,t.button.attr("aria-activedescendant",t.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,n){var i=this,o="";e.each(n,function(n,r){r.optgroup!==o&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(r.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:r.optgroup}).appendTo(t),o=r.optgroup),i._renderItemData(t,r)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var i=e("<li>");return n.disabled&&i.addClass("ui-state-disabled"),this._setText(i,n.label),i.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,i,o=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex):(n=this.menuItems.eq(this.element[0].selectedIndex),o+=":not(.ui-state-disabled)"),i="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](o).eq(-1):n[e+"All"](o).eq(0),i.length&&this.menuInstance.focus(t,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(e){e.preventDefault()},click:"_toggle",keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var n=[];t.each(function(t,i){var o=e(i),r=o.parent("optgroup");n.push({element:o,index:t,value:o.attr("value"),label:o.text(),optgroup:r.attr("label")||"",disabled:r.prop("disabled")||o.prop("disabled")})}),this.items=n},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",a=[];for(n=i.values&&i.values.length||1,o.length>n&&(o.slice(n).remove(),o=o.slice(0,n)),t=o.length;n>t;t++)a.push(r);this.handles=o.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,o,r,a,s,l,c,d=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-d.values(t));(o>n||o===n&&(t===d._lastChangedValue||d.values(t)===u.min))&&(o=n,r=e(this),a=t)}),s=this._start(t,a),s===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,r.addClass("ui-state-active").focus(),l=r.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-r.width()/2,top:t.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),r=this._valueMin()+i*o,this._trimAlignValue(r)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,o,r;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(o=this.values(),o[t]=n,r=this._trigger("slide",e,{handle:this.handles[t],value:n,values:o}),i=this.values(t?0:1),r!==!1&&this.values(t,n))):n!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:n}),r!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,o,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,o=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,o=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;o>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,o,r,a=this.options.range,s=this.options,l=this,c=this._animateOff?!1:s.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](d,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n
}):(i=this.value(),o=this._valueMin(),r=this._valueMax(),n=r!==o?(i-o)/(r-o)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](d,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var n,i,o,r,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,a),n===!1))return}switch(r=this.options.step,i=o=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;o=this._trimAlignValue(i+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;o=this._trimAlignValue(i-r)}this._slide(t,a,o)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.spinner",{version:"1.11.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,i){var o=n.attr(i);void 0!==o&&o.length&&(t[i]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return t=null!==i.min?i.min:0,n=e-t,n=Math.round(n/i.step)*i.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(n))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:l(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:l(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:l(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:l(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:l(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void l(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,i;t=t.cloneNode(!1),n=t.href.replace(e,""),i=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(o){}try{i=decodeURIComponent(i)}catch(o){}return t.hash.length>1&&n===i}}(),_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each(function(n,o){return e(o).attr("aria-controls")===i?(t=n,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i===this.options.active?!1:i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,o),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function i(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,i){var o,r,a,s=e(i).uniqueId().attr("id"),l=e(i).closest("li"),c=l.attr("aria-controls");t._isLocal(i)?(o=i.hash,a=o.substring(1),r=t.element.find(t._sanitizeSelector(o))):(a=l.attr("aria-controls")||e({}).uniqueId()[0].id,o="#"+a,r=t.element.find(o),r.length||(r=t._createPanel(a),r.insertAfter(t.panels[n-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":a,"aria-labelledby":s}),r.attr("aria-labelledby",s)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget),r=o.closest("li"),a=r[0]===i[0],s=a&&n.collapsible,l=s?e():this._getPanelForTab(r),c=i.length?this._getPanelForTab(i):e(),d={oldTab:i,oldPanel:c,newTab:s?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||a&&!n.collapsible||this._trigger("beforeActivate",t,d)===!1||(n.active=s?!1:this.tabs.index(r),this.active=a?e():r,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,d))},_toggle:function(t,n){function i(){r.running=!1,r._trigger("activate",t,n)}function o(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&r.options.show?r._show(a,r.options.show,i):(a.show(),i())}var r=this,a=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),o()),s.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&s.length?n.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;n!==!1&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setupDisabled(n))},disable:function(t){var n=this.options.disabled;if(n!==!0){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var i=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),s={tab:o,panel:a};this._isLocal(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),i._trigger("load",n,s)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&i.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr},1)})))},_ajaxSettings:function(t,n,i){var o=this;return{url:t.attr("href"),beforeSend:function(t,r){return o._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:r},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.widget("ui.tooltip",{version:"1.11.1",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(n,i);-1!==o&&i.splice(o,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,n){var i=this;return"disabled"===t?(this[n?"_disable":"_enable"](),void(this.options[t]=n)):(this._super(t,n),void("content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i[0],t.close(o,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,o=this,r=t?t.type:null;return"string"==typeof i?this._open(t,e,i):(n=i.call(e[0],function(n){e.data("ui-tooltip-open")&&o._delay(function(){t&&(t.type=r),this._open(t,e,n)})}),void(n&&this._open(t,e,n)))},_open:function(t,n,i){function o(e){c.of=e,r.is(":hidden")||r.position(c)}var r,a,s,l,c=e.extend({},this.options.position);if(i){if(r=this._find(n),r.length)return void r.find(".ui-tooltip-content").html(i);n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),this._addDescribedBy(n,r.attr("id")),r.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),i.clone?(l=i.clone(),l.removeAttr("id").find("[id]").removeAttr("id")):l=i,e("<div>").html(l).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:o}),o(t)):r.position(e.extend({of:n},this.options.position)),this.hiding=!1,this.closing=!1,r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){r.is(":visible")&&(o(c.of),clearInterval(s))},e.fx.interval)),this._trigger("open",t,{tooltip:r}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}}},n[0]!==this.element[0]&&(a.remove=function(){this._removeTooltip(r)}),t&&"mouseover"!==t.type||(a.mouseleave="close"),t&&"focusin"!==t.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),o=this._find(i);this.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),this.hiding=!0,o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(e(this)),this.hiding=!1,this.closing=!1}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.hiding||(this.closing=!1))},_tooltip:function(t){var n=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),i=n.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=t,n},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i[0],t.close(o,!0),e("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title")||i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),"ui-effects-"),y=e;e.effects={effect:{}},function(e,t){function n(e,t,n){var i=u[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=c(),i=n._rgba=[];return t=t.toLowerCase(),f(l,function(e,o){var r,a=o.re.exec(t),s=a&&o.parse(a),l=o.space||"rgba";return s?(r=n[l](s),n[d[l].cache]=r[d[l].cache],i=n._rgba=r._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,r.transparent),n):r[t]}function o(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var r,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,n,i,o){return new e.Color.fn.parse(t,n,i,o)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,a,s,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(a),a=t);var u=this,h=e.type(o),p=this._rgba=[];return a!==t&&(o=[o,a,s,l],h="array"),"string"===h?this.parse(i(o)||r._default):"array"===h?(f(d.rgba.props,function(e,t){p[t.idx]=n(o[t.idx],t)}),this):"object"===h?(o instanceof c?f(d,function(e,t){o[t.cache]&&(u[t.cache]=o[t.cache].slice())}):f(d,function(t,i){var r=i.cache;f(i.props,function(e,t){if(!u[r]&&i.to){if("alpha"===e||null==o[e])return;u[r]=i.to(u._rgba)}u[r][t.idx]=n(o[e],t,!0)}),u[r]&&e.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,i.from&&(u._rgba=i.from(u[r])))}),this):void 0},is:function(e){var t=c(e),n=!0,i=this;return f(d,function(e,o){var r,a=t[o.cache];return a&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],f(o.props,function(e,t){return null!=a[t.idx]?n=a[t.idx]===r[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return f(d,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=c(e),o=i._space(),r=d[o],a=0===this.alpha()?c("transparent"):this,s=a[r.cache]||r.to(a._rgba),l=s.slice();return i=i[r.cache],f(r.props,function(e,o){var r=o.idx,a=s[r],c=i[r],d=u[o.type]||{};null!==c&&(null===a?l[r]=c:(d.mod&&(c-a>d.mod/2?a+=d.mod:a-c>d.mod/2&&(a-=d.mod)),l[r]=n((c-a)*t+a,o)))}),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=c(t)._rgba;return c(e.map(n,function(e,t){return(1-i)*o[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,o=e[1]/255,r=e[2]/255,a=e[3],s=Math.max(i,o,r),l=Math.min(i,o,r),c=s-l,d=s+l,u=.5*d;return t=l===s?0:i===s?60*(o-r)/c+360:o===s?60*(r-i)/c+120:60*(i-o)/c+240,n=0===c?0:.5>=u?c/d:c/(2-d),[Math.round(t)%360,n,u,null==a?1:a]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],r=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*o(s,a,t+1/3)),Math.round(255*o(s,a,t)),Math.round(255*o(s,a,t-1/3)),r]},f(d,function(i,o){var r=o.props,a=o.cache,l=o.to,d=o.from;c.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===t)return this[a].slice();var o,s=e.type(i),u="array"===s||"object"===s?i:arguments,h=this[a].slice();return f(r,function(e,t){var i=u["object"===s?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)}),d?(o=c(d(h)),o[a]=h,o):c(h)},f(r,function(t,n){c.fn[t]||(c.fn[t]=function(o){var r,a=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":i,c=this[l](),d=c[n.idx];return"undefined"===a?d:("function"===a&&(o=o.call(this,d),a=e.type(o)),null==o&&n.empty?this:("string"===a&&(r=s.exec(o),r&&(o=d+parseFloat(r[2])*("+"===r[1]?1:-1))),c[n.idx]=o,this[l](c)))})})}),c.hook=function(t){var n=t.split(" ");f(n,function(t,n){e.cssHooks[n]={set:function(t,o){var r,a,s="";if("transparent"!==o&&("string"!==e.type(o)||(r=i(o)))){if(o=c(r||o),!h.rgba&&1!==o._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}o=o.blend(s&&"transparent"!==s?s:"_default")}o=o.toRgbaString()}try{t.style[n]=o}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=c(t.elem,n),t.end=c(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(y),function(){function t(t){var n,i,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};
if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)n=o[i],"string"==typeof o[n]&&(r[e.camelCase(n)]=o[n]);else for(n in o)"string"==typeof o[n]&&(r[n]=o[n]);return r}function n(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var i=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(y.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(o,r,a,s){var l=e.speed(r,a,s);return this.queue(function(){var r,a=e(this),s=a.attr("class")||"",c=l.children?a.find("*").addBack():a;c=c.map(function(){var n=e(this);return{el:n,start:t(this)}}),r=function(){e.each(i,function(e,t){o[t]&&a[t+"Class"](o[t])})},r(),c=c.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),a.attr("class",s),c=c.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,o,r){return i?e.effects.animateClass.call(this,{add:n},i,o,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,o,r,a){return"boolean"==typeof i||void 0===i?o?e.effects.animateClass.call(this,i?{add:n}:{remove:n},o,r,a):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,o,r)}}(e.fn.toggleClass),switchClass:function(t,n,i,o,r){return e.effects.animateClass.call(this,{add:n,remove:t},i,o,r)}})}(),function(){function t(t,n,i,o){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(o=i,i=n,n={}),e.isFunction(i)&&(o=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=o||n.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.1",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(b+t[n],e[0].style[t[n]])},restore:function(e,t){var n,i;for(i=0;i<t.length;i++)null!==t[i]&&(n=e.data(b+t[i]),void 0===n&&(n=""),e.css(t[i],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(a){r=document.body}return t.wrap(i),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,o){return o=o||{},e.each(n,function(e,n){var r=t.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])}),o}}),e.fn.extend({effect:function(){function n(t){function n(){e.isFunction(r)&&r.call(o[0]),e.isFunction(t)&&t()}var o=e(this),r=i.complete,s=i.mode;(o.is(":hidden")?"hide"===s:"show"===s)?(o[s](),n()):a.call(o[0],i,n)}var i=t.apply(this,arguments),o=i.mode,r=i.queue,a=e.effects.effect[i.effect];return e.fx.off||!a?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):r===!1?this.each(n):this.queue(r||"fx",n)},show:function(e){return function(i){if(n(i))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(i){if(n(i))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(i){if(n(i)||"boolean"==typeof i)return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}();e.effects,e.effects.effect.blind=function(t,n){var i,o,r,a=e(this),s=/up|down|vertical/,l=/up|left|vertical|horizontal/,c=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(a,t.mode||"hide"),u=t.direction||"up",h=s.test(u),p=h?"height":"width",f=h?"top":"left",v=l.test(u),m={},g="show"===d;a.parent().is(".ui-effects-wrapper")?e.effects.save(a.parent(),c):e.effects.save(a,c),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),o=i[p](),r=parseFloat(i.css(f))||0,m[p]=g?o:0,v||(a.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),m[f]=g?r:o+r),g&&(i.css(p,0),v||i.css(f,r+o)),i.animate(m,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===d&&a.hide(),e.effects.restore(a,c),e.effects.removeWrapper(a),n()}})},e.effects.effect.bounce=function(t,n){var i,o,r,a=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),c="hide"===l,d="show"===l,u=t.direction||"up",h=t.distance,p=t.times||5,f=2*p+(d||c?1:0),v=t.duration/f,m=t.easing,g="up"===u||"down"===u?"top":"left",b="up"===u||"left"===u,y=a.queue(),_=y.length;for((d||c)&&s.push("opacity"),e.effects.save(a,s),a.show(),e.effects.createWrapper(a),h||(h=a["top"===g?"outerHeight":"outerWidth"]()/3),d&&(r={opacity:1},r[g]=0,a.css("opacity",0).css(g,b?2*-h:2*h).animate(r,v,m)),c&&(h/=Math.pow(2,p-1)),r={},r[g]=0,i=0;p>i;i++)o={},o[g]=(b?"-=":"+=")+h,a.animate(o,v,m).animate(r,v,m),h=c?2*h:h/2;c&&(o={opacity:0},o[g]=(b?"-=":"+=")+h,a.animate(o,v,m)),a.queue(function(){c&&a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()}),_>1&&y.splice.apply(y,[1,0].concat(y.splice(_,f+1))),a.dequeue()},e.effects.effect.clip=function(t,n){var i,o,r,a=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),c="show"===l,d=t.direction||"vertical",u="vertical"===d,h=u?"height":"width",p=u?"top":"left",f={};e.effects.save(a,s),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),o="IMG"===a[0].tagName?i:a,r=o[h](),c&&(o.css(h,0),o.css(p,r/2)),f[h]=c?r:0,f[p]=c?0:r/2,o.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()}})},e.effects.effect.drop=function(t,n){var i,o=e(this),r=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(o,t.mode||"hide"),s="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",u={opacity:s?1:0};e.effects.save(o,r),o.show(),e.effects.createWrapper(o),i=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,s&&o.css("opacity",0).css(c,"pos"===d?-i:i),u[c]=(s?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+i,o.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),n()}})},e.effects.effect.explode=function(t,n){function i(){y.push(this),y.length===u*h&&o()}function o(){p.css({visibility:"visible"}),e(y).remove(),v||p.hide(),n()}var r,a,s,l,c,d,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=u,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),v="show"===f,m=p.show().css("visibility","hidden").offset(),g=Math.ceil(p.outerWidth()/h),b=Math.ceil(p.outerHeight()/u),y=[];for(r=0;u>r;r++)for(l=m.top+r*b,d=r-(u-1)/2,a=0;h>a;a++)s=m.left+a*g,c=a-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*g,top:-r*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:b,left:s+(v?c*g:0),top:l+(v?d*b:0),opacity:v?0:1}).animate({left:s+(v?0:c*g),top:l+(v?0:d*b),opacity:v?1:0},t.duration||500,t.easing,i)},e.effects.effect.fade=function(t,n){var i=e(this),o=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:n})},e.effects.effect.fold=function(t,n){var i,o,r=e(this),a=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),l="show"===s,c="hide"===s,d=t.size||15,u=/([0-9]+)%/.exec(d),h=!!t.horizFirst,p=l!==h,f=p?["width","height"]:["height","width"],v=t.duration/2,m={},g={};e.effects.save(r,a),r.show(),i=e.effects.createWrapper(r).css({overflow:"hidden"}),o=p?[i.width(),i.height()]:[i.height(),i.width()],u&&(d=parseInt(u[1],10)/100*o[c?0:1]),l&&i.css(h?{height:0,width:d}:{height:d,width:0}),m[f[0]]=l?o[0]:d,g[f[1]]=l?o[1]:0,i.animate(m,v,t.easing).animate(g,v,t.easing,function(){c&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),n()})},e.effects.effect.highlight=function(t,n){var i=e(this),o=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===r&&(a.opacity=0),e.effects.save(i,o),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&i.hide(),e.effects.restore(i,o),n()}})},e.effects.effect.size=function(t,n){var i,o,r,a=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],d=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(a,t.mode||"effect"),f=t.restore||"effect"!==p,v=t.scale||"both",m=t.origin||["middle","center"],g=a.css("position"),b=f?s:l,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),i={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===p?(a.from=t.to||y,a.to=t.from||i):(a.from=t.from||("show"===p?y:i),a.to=t.to||("hide"===p?y:i)),r={from:{y:a.from.height/i.height,x:a.from.width/i.width},to:{y:a.to.height/i.height,x:a.to.width/i.width}},("box"===v||"both"===v)&&(r.from.y!==r.to.y&&(b=b.concat(u),a.from=e.effects.setTransition(a,u,r.from.y,a.from),a.to=e.effects.setTransition(a,u,r.to.y,a.to)),r.from.x!==r.to.x&&(b=b.concat(h),a.from=e.effects.setTransition(a,h,r.from.x,a.from),a.to=e.effects.setTransition(a,h,r.to.x,a.to))),("content"===v||"both"===v)&&r.from.y!==r.to.y&&(b=b.concat(d).concat(c),a.from=e.effects.setTransition(a,d,r.from.y,a.from),a.to=e.effects.setTransition(a,d,r.to.y,a.to)),e.effects.save(a,b),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),m&&(o=e.effects.getBaseline(m,i),a.from.top=(i.outerHeight-a.outerHeight())*o.y,a.from.left=(i.outerWidth-a.outerWidth())*o.x,a.to.top=(i.outerHeight-a.to.outerHeight)*o.y,a.to.left=(i.outerWidth-a.to.outerWidth)*o.x),a.css(a.from),("content"===v||"both"===v)&&(u=u.concat(["marginTop","marginBottom"]).concat(d),h=h.concat(["marginLeft","marginRight"]),c=s.concat(u).concat(h),a.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};f&&e.effects.save(n,c),n.from={height:i.height*r.from.y,width:i.width*r.from.x,outerHeight:i.outerHeight*r.from.y,outerWidth:i.outerWidth*r.from.x},n.to={height:i.height*r.to.y,width:i.width*r.to.x,outerHeight:i.height*r.to.y,outerWidth:i.width*r.to.x},r.from.y!==r.to.y&&(n.from=e.effects.setTransition(n,u,r.from.y,n.from),n.to=e.effects.setTransition(n,u,r.to.y,n.to)),r.from.x!==r.to.x&&(n.from=e.effects.setTransition(n,h,r.from.x,n.from),n.to=e.effects.setTransition(n,h,r.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){f&&e.effects.restore(n,c)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),e.effects.restore(a,b),f||("static"===g?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,n){var i=parseInt(n,10),o=e?a.to.left:a.to.top;return"auto"===n?o+"px":i+o+"px"})})),e.effects.removeWrapper(a),n()}})},e.effects.effect.scale=function(t,n){var i=e(this),o=e.extend(!0,{},t),r=e.effects.setMode(i,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===r?0:100),s=t.direction||"both",l=t.origin,c={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},d={y:"horizontal"!==s?a/100:1,x:"vertical"!==s?a/100:1};o.effect="size",o.queue=!1,o.complete=n,"effect"!==r&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*d.y,width:c.width*d.x,outerHeight:c.outerHeight*d.y,outerWidth:c.outerWidth*d.x},o.fade&&("show"===r&&(o.from.opacity=0,o.to.opacity=1),"hide"===r&&(o.from.opacity=1,o.to.opacity=0)),i.effect(o)},e.effects.effect.puff=function(t,n){var i=e(this),o=e.effects.setMode(i,t.mode||"hide"),r="hide"===o,a=parseInt(t.percent,10)||150,s=a/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:o,complete:n,percent:r?a:100,from:r?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),i.effect(t)},e.effects.effect.pulsate=function(t,n){var i,o=e(this),r=e.effects.setMode(o,t.mode||"show"),a="show"===r,s="hide"===r,l=a||"hide"===r,c=2*(t.times||5)+(l?1:0),d=t.duration/c,u=0,h=o.queue(),p=h.length;for((a||!o.is(":visible"))&&(o.css("opacity",0).show(),u=1),i=1;c>i;i++)o.animate({opacity:u},d,t.easing),u=1-u;o.animate({opacity:u},d,t.easing),o.queue(function(){s&&o.hide(),n()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,c+1))),o.dequeue()},e.effects.effect.shake=function(t,n){var i,o=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,c=t.times||3,d=2*c+1,u=Math.round(t.duration/d),h="up"===s||"down"===s?"top":"left",p="up"===s||"left"===s,f={},v={},m={},g=o.queue(),b=g.length;for(e.effects.save(o,r),o.show(),e.effects.createWrapper(o),f[h]=(p?"-=":"+=")+l,v[h]=(p?"+=":"-=")+2*l,m[h]=(p?"-=":"+=")+2*l,o.animate(f,u,t.easing),i=1;c>i;i++)o.animate(v,u,t.easing).animate(m,u,t.easing);o.animate(v,u,t.easing).animate(f,u/2,t.easing).queue(function(){"hide"===a&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),n()}),b>1&&g.splice.apply(g,[1,0].concat(g.splice(b,d+1))),o.dequeue()},e.effects.effect.slide=function(t,n){var i,o=e(this),r=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(o,t.mode||"show"),s="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,u={};e.effects.save(o,r),o.show(),i=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),s&&o.css(c,d?isNaN(i)?"-"+i:-i:i),u[c]=(s?d?"+=":"-=":d?"-=":"+=")+i,o.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),n()}})},e.effects.effect.transfer=function(t,n){var i=e(this),o=e(t.to),r="fixed"===o.css("position"),a=e("body"),s=r?a.scrollTop():0,l=r?a.scrollLeft():0,c=o.offset(),d={top:c.top-s,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},u=i.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-s,left:u.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(d,t.duration,t.easing,function(){h.remove(),n()})}}),define("components/create-modal/views/create-modal-view",["backbone","../templates/create-modal-tpl","global-events","jqueryui"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(){var e=this;e.initModal($("#modal-container-form")),e.listenTo(n,"form:create",function(t){e.render(t)})},render:function(e){var t=e.template||{};return this.cb=e.cb,this.$el.empty(),this.$el.html(this.template({title:t.title,text:t.text,label:t.label,confirmBtnText:t.confirmBtnText||"Create",cancelBtnText:t.cancelBtnText||"Cancel"})),this.delegateEvents(),this.$el.dialog("open"),this},events:{"click #confirm":"confirm","click #cancel":"cancel"},initModal:function(e){this.$el=e.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",sped:100},hide:{effect:"fade",speed:100}})},confirm:function(){this.cb(this.$el.find("#text-input").val().trim()),this.closeModal()},cancel:function(){this.closeModal()},closeModal:function(){this.$el.dialog("close")}});return new i}),define("components/confirm-modal/templates/confirm-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="page-change-modal">\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">'+(null==(__t=title)?"":__t)+'</h2>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12 left-align">\r\n      '+(null==(__t=text)?"":__t)+'\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="btn-container-space-s">\r\n        ',singleBtn||(__p+='\r\n        <button id="cancel" class="btn btn-other">'+(null==(__t=cancelBtnText)?"":__t)+"</button>\r\n        "),__p+='\r\n        <button id="confirm" class="btn btn-submit">'+(null==(__t=confirmBtnText)?"":__t)+'</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div class="page-save-tip">\r\n  <div role="tooltip" class="ui-tooltip ui-widget ui-corner-all ui-widget-content" style="display: none;"><div class="ui-tooltip-content">???</div></div>\r\n</div>';return __p}}),define("components/confirm-modal/views/confirm-modal-view",["backbone","../templates/confirm-modal-tpl","global-events","router","jqueryui"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(){var e=this;e.initModal($("#modal-container")),e.listenTo(n,"form:editing",function(){e.state.editing=!0}),e.listenTo(n,"form:finished form:save",function(t){e.state.editing?(e.handleImgLoaderTip(t),e.showSaveTip(t),e.state.editing=!1):e.showNoSaveTip(t)}),e.listenTo(n,"form:delete",function(t){e.showDeleteModal(t)}),e.listenTo(n,"form:invalid",function(t){e.showInvalidTip(t)}),e.listenTo(n,"form:reset",function(t){e.state.editing&&e.showResetModal(t)}),e.listenTo(n,"modal:custom",function(t){e.render(t)}),e.listenTo(n,"form:cancel:hash",function(e){n.trigger("form:cancel",function(){i.get().navigate(e,{trigger:!0})})}),e.listenTo(n,"form:cancel:url",function(e){n.trigger("form:cancel",function(){window.location.href=e})}),e.listenTo(n,"form:cancel",function(t){e.state.editing?e.showCancelModal(t):t()})},render:function(e){var t=e.template||{};return this.cacheElem(),this.confirmFn=e.confirmFn,this.cancelFn=e.cancelFn,this.$el.html(this.template({title:void 0===t.title?"Please Confirm":t.title,text:t.text||"Do you really want to continue?",confirmBtnText:t.confirmBtnText||"Confirm",cancelBtnText:t.cancelBtnText||"Cancel",singleBtn:t.singleBtn||!1})),this.delegateEvents(),this.$el.dialog("open"),this},cacheElem:function(){this.$modal=this.$el.find(".page-change-modal"),this.$tip=this.$el.find(".page-save-tip")},state:{editing:!1},events:{"click #confirm":"confirm","click #cancel":"cancel"},initModal:function(e){this.$el=e.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",sped:100},hide:{effect:"fade",speed:100}})},confirm:function(){this.confirmFn&&this.confirmFn(),this.closeModal()},cancel:function(){this.cancelFn&&this.cancelFn(),this.closeModal()},closeModal:function(){this.$el.dialog("close")},showResetModal:function(e){this.render({confirmFn:function(){e(),n.trigger("form:finished")},template:{text:"Do you really want to reset changes made?",confirmBtnText:"Confirm reset",cancelBtnText:"Continue editing"}})},showDeleteModal:function(e){this.render({confirmFn:e,template:{text:"Do you really want to delete this?",confirmBtnText:"Confirm delete"}})},showCancelModal:function(e){this.render({confirmFn:function(){e(),n.trigger("form:finished")},template:{text:"Are you sure you wish to cancel?  You will lose all saved changes.",confirmBtnText:"Cancel changes",cancelBtnText:"Stay on this page"}})},handleImgLoaderTip:function(e){if(e){e.removeClass("tooltip-nosave").removeClass("tooltip-invalid");var t=$(e).attr("data-parent"),n="#"+t,i=$("#save-btn");i.after('<img id="spinImg" src="/images/icons/ajax-loader.gif" style="position: absolute;">'),$("#spinImg").position({my:"right top",at:"right bottom",of:$(n)})}},showSaveTip:function(e){if(e){e.addClass("tooltip-save").removeClass("tooltip-nosave").removeClass("tooltip-invalid"),e.html('<div class="icon icon-added"></div>&nbsp;&nbsp;Your changes have been saved.');var t=$("#spinImg");t.delay(600).fadeOut(100);var n=$(e).attr("data-parent"),i="#"+n;e.fadeIn(1600).delay(500).fadeOut(500),$(e).position({my:"right top",at:"right bottom",of:$(i)})}},showInvalidTip:function(e){if(e){e.removeClass("tooltip-save").removeClass("tooltip-nosave").addClass("tooltip-invalid"),e.html('<div class="icon icon-x"></div>&nbsp;&nbsp;There was a problem with your change. Please review your changes and try again.');var t=$(e).attr("data-parent"),n="#"+t;e.fadeIn(500).delay(3e3).fadeOut(500),$(e).position({my:"right top",at:"right bottom",of:$(n)})}},showNoSaveTip:function(e){if(e){e.removeClass("tooltip-save").addClass("tooltip-nosave").removeClass("tooltip-invalid"),e.html('<div class="icon icon-x"></div>&nbsp;&nbsp;You haven\'t made any changes yet.');var t=$(e).attr("data-parent"),n="#"+t;e.fadeIn(500).delay(3e3).fadeOut(500),$(e).position({my:"right top",at:"right bottom",of:$(n)})}}});return new o}),define("components/image-modal/templates/image-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="image-modal">\r\n  <div id="aviary" class="hidden-alt"></div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">Select an Image</h2>\r\n        <button type="button" id="cancel-btn" class="btn btn-other pull-right">Cancel</button>\r\n        <button type="button" id="back-btn" class="btn btn-other x-space-m pull-right hidden">Go Back One Level</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="row panel alert-panel hidden-alt">\r\n    <div class="col-12">\r\n      <div class="row">\r\n        <div class="col-1">\r\n          <div class="icon icon-3x icon-warning"></div>\r\n        </div>\r\n        <div class="col-11 alert-text left-align">\r\n          You have uploaded an invalid image file.  Please upload image files that have\r\n          extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div id="edit-btn-panel" class="col-6 left-align">\r\n      <button type="button" id="delete-btn" class="btn btn-cancel hidden-alt">Delete</button>\r\n      <button type="button" id="edit-btn" class="btn btn-other x-space-s hidden-alt">Edit</button>\r\n      <button type="button" id="select-btn" class="btn btn-submit hidden-alt">Select</button>\r\n    </div>\r\n    <div class="col-6 pull-right right-align form-section">\r\n      <button type="button" class="btn btn-submit btn-file">\r\n        <input type="file" id="upload-btn">\r\n        <i class="icon icon-add icon-lg"></i> Upload Image\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div id="image-grid" class="row row-spaced"></div>\r\n</div>';return __p}}),define("components/image-modal/templates/edit-image-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="image-modal" class="left-align">\r\n  <div id="aviary" class="hidden-alt"></div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">Edit Image</h2>\r\n        <div class="btn-panel">\r\n          <button type="button" class="cancel-btn btn btn-other">Cancel</button>\r\n          <button type="button" class="save-btn btn btn-submit">Save Changes</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Delectus, alias voluptate voluptatum veniam, consectetur iste sapiente provident ad quidem quod rerum ullam sed atque aperiam quibusdam odit earum eum harum.\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced form-section">\r\n    <div class="col-12">\r\n      <div class="row row-spaced">\r\n        <div class="scroll-container auto-resize">\r\n          <div class="col-3">\r\n            <div class="row">\r\n              <div class="col-12">\r\n              <img id="f-image" class="fit-container" src="'+(null==(__t=url)?"":__t)+'" alt="'+(null==(__t=altText)?"":__t)+'"/>\r\n              </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n              <div class="col-12">\r\n                <button type="button" title="Edit image with Aviary" class="edit-btn icon icon-edit icon-btn fa-lg">\r\n                  <div class="icon-text">Edit image with Aviary</div>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-9">\r\n            <div class="row row-spaced">\r\n              <div><b>File Name:</b> '+(null==(__t=fileName)?"":__t)+"</div><br>\r\n              <div><b>File Type:</b> "+(null==(__t=type)?"":__t)+"</div><br>\r\n              <div><b>Upload Date:</b> "+(null==(__t=uploadDate)?"":__t)+'</div><br>\r\n              <div class="wrap-text"><b>Link URL:</b> <span id="f-url">'+(null==(__t=url)?"":__t)+'</span></div><br>\r\n              <div><b>Dimensions:</b> <span id="f-dimensions">'+(null==(__t=dimensions)?"":__t)+'</span></div><br>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <label for="f-title">Title</label>\r\n          <input type="text" id="f-title" name="f-title" value="'+(null==(__t=title)?"":__t)+'">\r\n        </div>\r\n      </div>\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <label for="f-altText">Alternate Text</label>\r\n          <input type="text" id="f-altText" name="f-altText" value="'+(null==(__t=altText)?"":__t)+'">\r\n        </div>\r\n      </div>\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <label for="f-description">Description</label>\r\n          <textarea class="size-2" id="f-description" name="f-description">'+(null==(__t=description)?"":__t)+"</textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>";return __p}}),define("components/image-modal/views/edit-image-modal-view",["backbone","../templates/edit-image-modal-tpl","global-events","jqueryui"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(){this.initModal($("#another-modal-container")),this.initAviary()},events:{"click .cancel-btn":"closeModal","click .save-btn":"saveChanges","click .edit-btn":"aviaryImage"},initModal:function(e){this.$el=e.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",sped:100},hide:{effect:"fade",speed:100}})},showModal:function(e){this.stopListening(this.model),this.model=e.model,this.listenTo(this.model,"change:url",function(){this.updateUrl()}.bind(this)),this.render()},updateUrl:function(){this.$image.attr("src",this.model.get("url")),this.$url.text(this.model.get("url")),this.$dimensions.text(this.model.get("dimensions"))},saveChanges:function(){this.model.set({title:this.$title.val().trim(),altText:this.$altText.val().trim(),description:this.$description.val().trim()}),n.trigger("form:save"),this.closeModal()},closeModal:function(){n.trigger("form:cancel",function(){this.$el.dialog("close")}.bind(this))},render:function(){this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.$el.dialog("open")},cacheElem:function(){this.$aviary=this.$el.find("#aviary"),this.$title=this.$el.find("#f-title"),this.$altText=this.$el.find("#f-altText"),this.$description=this.$el.find("#f-description"),this.$image=this.$el.find("#f-image"),this.$url=this.$el.find("#f-url"),this.$dimensions=this.$el.find("#f-dimensions")},initAviary:function(){this.featherEditor=new Aviary.Feather({appendTo:"aviary",apiKey:"88736f3311251f0f",apiVersion:3,theme:"light",maxSize:1400,tools:"all",displayImageSize:!0,onClose:function(){$("#aviary").hide()},onError:function(e){alert(e.message)}})},aviaryImage:function(){var e=this,t="f-image",n=this.model.get("url");this.$aviary.show(),this.featherEditor.launch({image:t,url:n,onSave:function(t,n){var i=new Image;i.onload=function(){e.model.set({dimensions:i.width+"x"+i.height,url:n}),e.featherEditor.close()},i.src=n}})}});return new i}),define("components/image-modal/templates/image-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="grid-item clickable'+(null==(__t=active?" active":"")?"":__t)+(null==(__t=global?" global":" custom")?"":__t)+" "+(null==(__t="image"!==type?type:"")?"":__t)+'">\r\n	',type.indexOf("image")>-1?(__p+='\r\n		<img id="img_'+(null==(__t=id)?"":__t)+'" class="fit-container" src="'+(null==(__t=url)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n		',global&&(__p+='<i title="This is a global image so it cannot be modified." class="icon icon-tool-tip icon-tool-tip-federated federated-bottom-right"></i>'),__p+="\r\n	"):__p+='\r\n		<div class="grid-label">'+(null==(__t=name)?"":__t)+"</div>\r\n	",__p+="\r\n</div>";
return __p}}),define("components/image-modal/views/image-view",["backbone","../templates/image-tpl"],function(e,t){var n=e.View.extend({tagName:"span",template:t,initialize:function(e){var t=this;t.parent=e.parent,t.listenTo(t.model,"remove",function(){t.remove()}),t.listenTo(t.model,"change",function(e){t.render(),e.get("active")&&t.parent.setActive(t.model)}),t.model.get("active")&&t.parent.setActive(t.model)},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),1==e.model.get("global")&&this.applyToolTips(),this},events:{click:"setActive"},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},setActive:function(){var e=this;this.model.set("active",!0),"folder"===this.model.get("type")?this.parent.goToFolder(e.model.get("name")):this.model.get("global")===!0?e.parent.showGlobalButtons():e.parent.showCustomButtons()}});return n}),define("components/image-modal/models/image-model",["backbone"],function(e){var t=e.Model.extend({defaults:function(){return{title:"",url:"",type:"",description:"",altText:"",fileName:"",global:!1,uploadDate:(new Date).toString(),dimensions:"N/A",active:!1}}});return t}),define("components/image-modal/collections/image-collection",["backbone","../models/image-model"],function(e,t){var n=e.Collection.extend({model:t,url:function(){return this.path},initialize:function(){var e=this;e.on("change:active",function(t){if(t.get("active"))for(var n=e.where({active:!0}),i=0,o=n.length;o>i;++i)n[i].get("id")!==t.get("id")&&n[i].set("active",!1)})},setActive:function(e){var t=this.where({url:e})[0];t?t.set("active",!0):this.clearActive()},clearActive:function(){this.where({active:!0}).forEach(function(e){e.set("active",!1)})},setPath:function(e){this.path=e}});return n}),define("components/image-modal/models/image-folder-model",["backbone","../collections/image-collection"],function(e,t){var n=e.Model.extend({defaults:function(){return{id:null,name:"",url:"",hash:"",global:!1,collection:new t,primary:!1,nested:!1}},initialize:function(){this.get("collection").setPath(this.get("url"))}});return n}),define("components/image-modal/collections/image-folder-collection",["backbone","../models/image-folder-model"],function(e,t){var n=e.Collection.extend({model:t,url:"/mock/user-image-folders.json",initialize:function(){var e=this;e.on("remove",function(t){var n=t.get("hash");e.filter(function(e){return 0===e.get("hash").indexOf(n)}).forEach(function(t){e.remove(t)})})}});return new n}),define("components/image-modal/views/image-modal-view",["backbone","../templates/image-modal-tpl","./edit-image-modal-view","./image-view","../collections/image-folder-collection","global-events","jqueryui"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,initialize:function(e){var t=this;t.initModal(e||$("#modal-container-fixed")),t.listenTo(r,"form:image-upload",function(e){t.showImageModal(e)})},setActive:function(e){var t=this;this.activeImage=e;var n=$('.global img[src*="'+t.activeImg+'"]');e?t.$imageGrid.find(n).is("*")?t.showGlobalButtons():t.showCustomButtons():t.hideAllButtons()},getActive:function(){return this.activeImage},render:function(e){var t=this;return t.cb=e.cb,t.$el.html(t.template()),t.delegateEvents(),t.cacheElem(),t.activeImg=e.active,imgEl=$('img[src*="'+t.activeImg+'"]'),o.fetchCustom().done(function(){t.setCollection(e.name),t.collection.fetchCustom().done(function(){t.addAllImages(t.collection),t.collection.setActive(t.activeImg),t.$el.dialog("open")})}),t},events:{"click #delete-btn":"deleteImage","click #select-btn":"selectImage","click #edit-btn":"editImage","click #cancel-btn":"closeModal","change #upload-btn":"uploadImage","click #back-btn":"goBack"},cacheElem:function(){this.$imageGrid=this.$el.find("#image-grid"),this.$editBtnPanel=this.$el.find("#edit-btn-panel"),this.$alertPanel=this.$el.find(".alert-panel"),this.$deleteBtn=this.$el.find("#delete-btn"),this.$selectBtn=this.$el.find("#select-btn"),this.$editBtn=this.$el.find("#edit-btn"),this.$backBtn=this.$el.find("#back-btn")},goToFolder:function(e){var t=this,n=t.collectionName;t.setCollection(e),t.collection.fetchCustom().done(function(){t.$imageGrid.empty(),t.hideAllButtons();var e=t.collectionParent.get("nested");1==e?t.$backBtn.removeClass("hidden").attr("data-folder",n):t.$backBtn.addClass("hidden"),t.addAllImages(t.collection);var i=$('img[src*="'+t.activeImg+'"]');t.$imageGrid.find(i).is("*")?t.collection.setActive(t.activeImg):t.hideAllButtons()})},showGlobalButtons:function(){var e=this;e.$editBtn.hide(),e.$deleteBtn.hide(),e.$selectBtn.show()},showCustomButtons:function(){var e=this;e.$editBtn.show(),e.$deleteBtn.show(),e.$selectBtn.show()},hideAllButtons:function(){var e=this;e.$editBtn.hide(),e.$deleteBtn.hide(),e.$selectBtn.hide()},goBack:function(e){var t=this,n=$(e.target),i=n.data("folder");t.goToFolder(i)},addImage:function(e){var t=new i({model:e,parent:this});this.$imageGrid.append(t.render().el)},addAllImages:function(e){this.$imageGrid.empty(),e.each(this.addImage,this)},setCollection:function(e){var t=this;t.stopListening(t.collection,"add remove"),t.collection=o.findWhere({name:e}).get("collection"),t.collectionName=o.findWhere({name:e}).get("name"),t.collectionParent=o.findWhere({name:e}),t.listenTo(t.collection,"remove",function(){t.setActive("")}),t.listenTo(t.collection,"add remove",t.addAllImages.bind(t,t.collection))},initModal:function(e){var t=this;t.$el=e.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",sped:100},hide:{effect:"fade",speed:100}})},closeModal:function(){this.$el.dialog("close")},selectImage:function(){r.trigger("form:editing"),this.cb(this.getActive()&&this.getActive().get("url")),this.closeModal()},deleteImage:function(){var e=this;e.getActive()&&r.trigger("form:delete",function(){e.collection.remove(e.getActive()),e.collection.models[0]||e.setActive(null)})},showImageModal:function(e){var t=this,n=e.cb;e.cb=function(e){n&&n(e),t.closeModal()},t.render(e)},editImage:function(){n.showModal({model:this.getActive()})},uploadImage:function(e){var t=this,n=e.target.files[0],i=n.name,o=n.type,r=new FileReader;r.onload=function(e){var n=e.target.result;if(t.isValidImageExtension(i)){var r=new Image;r.onload=function(){t.collection.add({id:Date.now(),url:n,type:o,fileName:i,dimensions:r.width+"x"+r.height})},r.src=n}else t.collection.add({id:Date.now(),url:n,type:o,fileName:i})},this.isValidImageExtension(i)?(this.hideAlertPanel(),r.readAsDataURL(n)):this.showAlertPanel()},isValidImageExtension:function(e){return new RegExp("(\\.gif|\\.jpg|\\.jpeg|\\.bmp|\\.png)$","i").test(e)},showAlertPanel:function(){this.$alertPanel.show()},hideAlertPanel:function(){this.$alertPanel.hide()}});return new a}),define("components/product-modal/templates/product-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="f-product-modal-form" novalidate="novalidate">\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="clearfix">\r\n      <div class="panel-title left-align">Edit Product '+(null==(__t=number)?"":__t)+' <div class="panel-subtitle">'+(null==(__t=type1)?"":__t)+" Product "+(null==(__t=pid)?"":__t)+"</div></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n  ",__p+="Teleflora"===type1?'\r\n    <div class="row row-spaced">\r\n      <div class="col-1"></div>\r\n      <div class="col-7 left-align form-section">\r\n        <label for="f-name">Name</label>\r\n        <input '+(null==(__t="Teleflora"===type1?"disabled":"")?"":__t)+' type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'">\r\n      </div>\r\n      <div class="col-2 form-section left-align">\r\n        <div class="label">Active</div>\r\n        <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n        <label for="f-active" class="on-off-switch-label left-align">\r\n            <div class="on-off-switch-state">on</div>\r\n        </label>\r\n      </div>  \r\n    </div>\r\n\r\n    <div class="row y-space-top-m">\r\n      <div class="col-1"></div>\r\n      <div class="col-4 left-align form-section">\r\n        <label for="f-label-1">Price Point Label</label>\r\n        <input '+(null==(__t="Teleflora"===type1?"disabled":"")?"":__t)+' type="text" class="f-label" id="f-label-1" name="f-label-1" value="'+(null==(__t=baseSkuLabel)?"":__t)+'">\r\n      </div>\r\n      <div class="col-2 left-align form-section">\r\n        <label for="f-sprice-1">Suggested Price</label>\r\n        <div class="dollar-container left-align">\r\n          <input disabled type="text" id="f-sprice-1" name="f-sprice-1" class="f-sprice" value="'+(null==(__t=baseSuggested)?"":__t)+'">\r\n        </div>\r\n      </div>        \r\n      <div class="col-2 left-align form-section">\r\n        <label for="f-price-1">'+(null==(__t="Teleflora"===type1?"My ":"")?"":__t)+'Price</label>\r\n        <div class="dollar-container left-align">\r\n          <input type="text" id="f-price-1" name="f-price-1" class="f-price" value="'+(null==(__t=baseSkuPrice)?"":__t)+'">\r\n        </div>\r\n      </div>\r\n      <div class="col-2 left-align form-section">\r\n        <label for="f-holiday-1">Holiday Upgrade</label>\r\n        <div class="dollar-container left-align">\r\n          <input type="text" id="f-holiday-1" name="f-holiday-1" class="f-holiday" value="'+(null==(__t=holidayPrice)?"":__t)+'">\r\n        </div>\r\n      </div>  \r\n    </div>\r\n\r\n      <div id="children"></div>\r\n  ':'\r\n    <div class="row row-spaced">\r\n      <div class="col-1"></div>\r\n      <div class="col-7 left-align form-section">\r\n        <label for="f-name">Name</label>\r\n        <input '+(null==(__t="Teleflora"===type1?"disabled":"")?"":__t)+' type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'">\r\n      </div>\r\n      <div class="col-2 form-section left-align">\r\n        <div class="label">Active</div>\r\n        <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n        <label for="f-active" class="on-off-switch-label left-align">\r\n            <div class="on-off-switch-state">on</div>\r\n        </label>\r\n      </div>  \r\n    </div>\r\n\r\n    <div class="row y-space-top-m">\r\n      <div class="col-1"></div>\r\n      <div class="col-4 left-align form-section">\r\n        <label for="f-label-1">Price Point Label</label>\r\n        <input '+(null==(__t="Teleflora"===type1?"disabled":"")?"":__t)+' type="text" class="f-label" id="f-label-1" name="f-label-1" value="'+(null==(__t=baseSkuLabel)?"":__t)+'">\r\n      </div>  \r\n      <div class="col-3 left-align form-section">\r\n        <label for="f-price-1">'+(null==(__t="Teleflora"===type1?"My ":"")?"":__t)+'Price</label>\r\n        <div class="dollar-container left-align">\r\n          <input type="text" id="f-price-1" name="f-price-1" class="f-price" value="'+(null==(__t=baseSkuPrice)?"":__t)+'">\r\n        </div>\r\n      </div>\r\n      <div class="col-3 left-align form-section">\r\n        <label for="f-holiday-1">Holiday Upgrade</label>\r\n        <div class="dollar-container left-align">\r\n          <input type="text" id="f-holiday-1" name="f-holiday-1" class="f-holiday" value="'+(null==(__t=holidayPrice)?"":__t)+'">\r\n        </div>\r\n      </div>  \r\n    </div>\r\n\r\n      <div id="children"></div>\r\n  ',__p+='\r\n\r\n\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12 y-space-top-m">\r\n    <div class="btn-container-space-s">\r\n      <button id="cancel-prod" type="button" class="btn btn-other">'+(null==(__t=cancelBtnText)?"":__t)+'</button>\r\n      <button id="confirm-prod" type="button" class="btn btn-submit">'+(null==(__t=confirmBtnText)?"":__t)+'</button>\r\n      <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</form>';return __p}}),define("components/product-modal/templates/product-modal-sku-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="Teleflora"===type1?'\r\n  <div class="row">\r\n    <div class="col-1"></div>\r\n    <div class="col-4 left-align form-section">\r\n      <input '+(null==(__t="Teleflora"===type1?"disabled":"")?"":__t)+' type="text" class="f-label" id="f-label-'+(null==(__t=i)?"":__t)+'" name="f-label-'+(null==(__t=i)?"":__t)+'" value="'+(null==(__t=label)?"":__t)+'">\r\n    </div>  \r\n    <div class="col-2 left-align form-section">\r\n      <div class="dollar-container left-align">\r\n        <input disabled type="text" id="f-sprice-'+(null==(__t=i)?"":__t)+'" name="f-sprice-'+(null==(__t=i)?"":__t)+'" class="f-sprice" value="'+(null==(__t=suggestedPrice)?"":__t)+'">\r\n      </div>\r\n    </div>    \r\n    <div class="col-2 left-align form-section">\r\n      <div class="dollar-container left-align">\r\n        <input type="text" id="f-price-'+(null==(__t=i)?"":__t)+'" name="f-price-'+(null==(__t=i)?"":__t)+'" class="f-price" value="'+(null==(__t=myPrice)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n    <div class="col-2 left-align form-section">\r\n      <div class="dollar-container left-align">\r\n        <input type="text" id="f-holiday-'+(null==(__t=i)?"":__t)+'" name="f-holiday-'+(null==(__t=i)?"":__t)+'" class="f-holiday" value="'+(null==(__t=holidayPrice)?"":__t)+'">\r\n      </div>\r\n    </div>    \r\n  </div>    \r\n':'\r\n  <div class="row">\r\n    <div class="col-1"></div>\r\n    <div class="col-4 left-align form-section">\r\n      <input '+(null==(__t="Teleflora"===type1?"disabled":"")?"":__t)+' type="text" class="f-label" id="f-label-'+(null==(__t=i)?"":__t)+'" name="f-label-'+(null==(__t=i)?"":__t)+'" value="'+(null==(__t=label)?"":__t)+'">\r\n    </div>  \r\n    <div class="col-3 left-align form-section">\r\n      <div class="dollar-container left-align">\r\n        <input type="text" id="f-price-'+(null==(__t=i)?"":__t)+'" name="f-price-'+(null==(__t=i)?"":__t)+'" class="f-price" value="'+(null==(__t=myPrice)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n    <div class="col-3 left-align form-section">\r\n      <div class="dollar-container left-align">\r\n        <input type="text" id="f-holiday-'+(null==(__t=i)?"":__t)+'" name="f-holiday-'+(null==(__t=i)?"":__t)+'" class="f-holiday" value="'+(null==(__t=holidayPrice)?"":__t)+'">\r\n      </div>\r\n    </div>    \r\n  </div>    \r\n';return __p}}),define("components/product-modal/views/sku-view",["underscore","backbone","../templates/product-modal-sku-tpl"],function(e,t,n){var i=t.View.extend({initialize:function(){},template:n,render:function(){var e=this;return e.$el.html(e.template({myPrice:e.model.get("myPrice"),type1:e.model.get("type"),holidayPrice:e.model.get("holidayPrice"),label:e.model.get("skuLabel"),suggestedPrice:e.model.get("suggestedPrice")})),this}});return i}),define("content/category-sections/merchandising/product-management/models/product-model",["backbone"],function(e){var t=e.Model.extend({defaults:{name:"",number:"",id:null,pricePoints:"Primary",type:"Custom",type2:"",type3:"Vase Arrangement",suggestedPrice:"Custom",myPrice:"",holidayPrice:"",taxFreeActive:"",active:!0,imgA1:!1,imgA2:!1,imgA3:!1,imgB1:!1,imgB2:!1,imgB3:!1,imgC1:!1,imgC2:!1,imgC3:!1,categories:[],isBaseSku:!0,baseSkuId:"",skuLabel:"Standard",skuList:[],subscription:!0,startDate:"",endDate:"",description:"",additionalInfo:"",legalInfo:"",metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:"",discountAmount:"",discountVariantsActive:!1,productDescriptionVariantsActive:!1,sizeDimensionVariantsActive:!1,discountStartDate:"",discountEndDate:"",localDeliveryActive:!0,noSameDayDeliveryActive:!0,inStorePickupActive:!0,taxFreeActive:!0,merchandisingHighlight:"",recipe:"",relatedProducts:[],dropshipMethods:[],addons:[],flowers:[{id:1,name:"Hydrangea",imgUrl:"http://www.fillmurray.com/400/400",active:!1},{id:2,name:"Asiatic Lily",imgUrl:"http://www.fillmurray.com/300/300",active:!1},{id:3,name:"Gerbera",imgUrl:"http://www.fillmurray.com/500/500",active:!1}],bouquetStyles:[{id:1,style:"Exotic",active:!1},{id:2,style:"Elegant",active:!1},{id:3,style:"Fun",active:!1},{id:4,style:"Traditional",active:!1},{id:5,style:"Modern",active:!1}],colors:[{id:1,color:"Red",active:!1},{id:2,color:"Yellow",active:!1},{id:3,color:"White",active:!1},{id:4,color:"Blue",active:!1},{id:5,color:"Pink",active:!1},{id:6,color:"Beige",active:!1}],width:0,height:0,productClassification:"Bouquet",productOrientation:"One Sided",categoriesVariantsActive:!0,attributesVariantsActive:!0},initialize:function(){this.set("imgUrl","http://s7d2.scene7.com/is/image/Teleflora/"+this.get("number")+"?wid=150&hei=215&fmt=jpeg&qlt=90,0&op_sharpen=0&resMode=bilin&op_usm=1.0,0.5,1.0,0&iccEmbed=0&layer=1&opac=0&layer=2&opac=55&layer=5&opac=0")}});return t}),define("content/category-sections/merchandising/product-management/collections/product-collection",["backbone","../models/product-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-products.json",model:t,comparator:function(e){return e.get("name")}});return new n}),function(e){"function"==typeof define&&define.amd?define("jqueryvalbase",["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(t){function i(){var i;return n.settings.submitHandler?(n.submitButton&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&i.remove(),!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var t,n;return e(this[0]).is("form")?t=this.validate().form():(t=!0,n=e(this[0].form).validate(),this.each(function(){t=n.element(this)&&t})),t},removeAttrs:function(t){var n={},i=this;return e.each(t.split(/\s/),function(e,t){n[t]=i.attr(t),i.removeAttr(t)}),n},rules:function(t,n){var i,o,r,a,s,l,c=this[0];if(t)switch(i=e.data(c.form,"validator").settings,o=i.rules,r=e.validator.staticRules(c),t){case"add":e.extend(r,e.validator.normalizeRule(n)),delete r.messages,o[c.name]=r,n.messages&&(i.messages[c.name]=e.extend(i.messages[c.name],n.messages));break;case"remove":return n?(l={},e.each(n.split(/\s/),function(t,n){l[n]=r[n],delete r[n],"required"===n&&e(c).removeAttr("aria-required")}),l):(delete o[c.name],r)}return a=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c),a.required&&(s=a.required,delete a.required,a=e.extend({required:s},a),e(c).attr("aria-required","true")),a.remote&&(s=a.remote,delete a.remote,a=e.extend(a,{remote:s})),a}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?(this.findByName(t.name).addClass(n).removeClass(i),e(t).closest(".form-section").addClass(n).removeClass(i)):(e(t).closest(".form-section").addClass(n).removeClass(i),e(t).addClass(n).removeClass(i))},unhighlight:function(t,n,i){"radio"===t.type?(this.findByName(t.name).removeClass(n).addClass(i),e(t).closest(".form-section").removeClass(n).addClass(i)):(e(t).closest(".form-section").removeClass(n).addClass(i),e(t).removeClass(n).addClass(i))}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,""),o=n.settings;o[i]&&!this.is(o.ignore)&&o[i].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})}),n=this.settings.rules,e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",t).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n=this.clean(t),i=this.validationTargetFor(n),o=!0;return this.lastElement=i,void 0===i?delete this.invalid[n.name]:(this.prepareElement(i),this.currentElements=e(i),o=this.check(i)!==!1,o?delete this.invalid[i.name]:this.invalid[i.name]=!0),e(t).attr("aria-invalid",!o),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),o},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,i=e(t),o=t.type;return"radio"===o||"checkbox"===o?e("input[name='"+t.name+"']:checked").val():"number"===o&&"undefined"!=typeof t.validity?t.validity.badInput?!1:i.val():(n=i.val(),"string"==typeof n?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i,o,r=e(t).rules(),a=e.map(r,function(e,t){return t}).length,s=!1,l=this.elementValue(t);for(i in r){o={method:i,parameters:r[i]};try{if(n=e.validator.methods[i].call(this,l,t,o.parameters),"dependency-mismatch"===n&&1===a){s=!0;continue}if(s=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,o),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+o.method+"' method.",c),c}}if(!s)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var i=this.defaultMessage(t,n.method),o=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,t):o.test(i)&&(i=e.validator.format(i.replace(o,"{$1}"),n.parameters)),this.errorList.push({message:i,element:t,method:n.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var i,o,r,a=this.errorsFor(t),s=this.idOrName(t),l=e(t).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(n)):(a=e("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(n||""),i=a,this.settings.wrapper&&(i=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t),a.is("label")?a.attr("for",s):0===a.parents("label[for='"+s+"']").length&&(r=a.attr("id"),l?l.match(new RegExp("\b"+r+"\b"))||(l+=" "+r):l=r,e(t).attr("aria-describedby",l),o=this.groups[t.name],o&&e.each(this.groups,function(t,n){n===o&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!n&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,t)),this.toShow=this.toShow.add(a)},errorsFor:function(t){var n=this.idOrName(t),i=e(t).attr("aria-describedby"),o="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(o=o+", #"+i.replace(/\s+/g,", #")),this.errors().filter(o)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)
},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n,i,o={},r=e(t),a=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(i=t.getAttribute(n),""===i&&(i=!0),i=!!i):i=r.attr(n),/min|max/.test(n)&&(null===a||/number|range|text/.test(a))&&(i=Number(i)),i||0===i?o[n]=i:a===n&&"range"!==a&&(o[n]=!0);return o.maxlength&&/-1|2147483647|524288/.test(o.maxlength)&&delete o.maxlength,o},dataRules:function(t){var n,i,o={},r=e(t);for(n in e.validator.methods)i=r.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),void 0!==i&&(o[n]=i);return o},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(i,o){if(o===!1)return void delete t[i];if(o.param||o.depends){var r=!0;switch(typeof o.depends){case"string":r=!!e(o.depends,n.form).length;break;case"function":r=o.depends.call(n,n)}r?t[i]=void 0!==o.param?o.param:!0:delete t[i]}}),e.each(t,function(i,o){t[i]=e.isFunction(o)?o(n):o}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var o=e(n).val();return o&&o.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n,i,o=0,r=0,a=!1;if(e=e.replace(/\D/g,""),e.length<13||e.length>19)return!1;for(n=e.length-1;n>=0;n--)i=e.charAt(n),r=parseInt(i,10),a&&(r*=2)>9&&(r-=9),o+=r,a=!a;return o%10===0},minlength:function(t,n,i){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||o>=i},maxlength:function(t,n,i){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=o},rangelength:function(t,n,i){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||o>=i[0]&&o<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(t,n,i){var o=e(i);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()}),t===o.val()},remote:function(t,n,i){if(this.optional(n))return"dependency-mismatch";var o,r,a=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),a.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=a.message,i="string"==typeof i&&{url:i}||i,a.old===t?a.valid:(a.old=t,o=this,this.startRequest(n),r={},r[n.name]=t,e.ajax(e.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:r,context:o.currentForm,success:function(i){var r,s,l,c=i===!0||"true"===i;o.settings.messages[n.name].remote=a.originalMessage,c?(l=o.formSubmitted,o.prepareElement(n),o.formSubmitted=l,o.successList.push(n),delete o.invalid[n.name],o.showErrors()):(r={},s=i||o.defaultMessage(n,"remote"),r[n.name]=a.message=e.isFunction(s)?s(t):s,o.invalid[n.name]=!0,o.showErrors(r)),a.valid=c,o.stopRequest(n,c)}},i)),"pending")}}}),e.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var t,n={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,i){var o=e.port;"abort"===e.mode&&(n[o]&&n[o].abort(),n[o]=i)}):(t=e.ajax,e.ajax=function(i){var o=("mode"in i?i:e.ajaxSettings).mode,r=("port"in i?i:e.ajaxSettings).port;return"abort"===o?(n[r]&&n[r].abort(),n[r]=t.apply(this,arguments),n[r]):t.apply(this,arguments)}),e.extend(e.fn,{validateDelegate:function(t,n,i){return this.bind(n,function(n){var o=e(n.target);return o.is(t)?i.apply(o,arguments):void 0})}})}),function(e){"function"==typeof define&&define.amd?define("jqueryval",["jquery","jqueryvalbase"],e):e(jQuery)}(function(e){!function(){function t(e){return e.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-“”’]*/g,"")}e.validator.addMethod("maxWords",function(e,n,i){return this.optional(n)||t(e).match(/\b\w+\b/g).length<=i},e.validator.format("Please enter {0} words or less.")),e.validator.addMethod("minWords",function(e,n,i){return this.optional(n)||t(e).match(/\b\w+\b/g).length>=i},e.validator.format("Please enter at least {0} words.")),e.validator.addMethod("rangeWords",function(e,n,i){var o=t(e),r=/\b\w+\b/g;return this.optional(n)||o.match(r).length>=i[0]&&o.match(r).length<=i[1]},e.validator.format("Please enter between {0} and {1} words."))}(),e.validator.addMethod("accept",function(t,n,i){var o,r,a="string"==typeof i?i.replace(/\s/g,"").replace(/,/g,"|"):"image/*",s=this.optional(n);if(s)return s;if("file"===e(n).attr("type")&&(a=a.replace(/\*/g,".*"),n.files&&n.files.length))for(o=0;o<n.files.length;o++)if(r=n.files[o],!r.type.match(new RegExp(".?("+a+")$","i")))return!1;return!0},e.validator.format("Please enter a value with a valid mimetype.")),e.validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||/^\w+$/i.test(e)},"Letters, numbers, and underscores only please"),e.validator.addMethod("bankaccountNL",function(e,t){if(this.optional(t))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(e))return!1;var n,i,o,r=e.replace(/ /g,""),a=0,s=r.length;for(n=0;s>n;n++)i=s-n,o=r.substring(n,n+1),a+=i*o;return a%11===0},"Please specify a valid bank account number"),e.validator.addMethod("bankorgiroaccountNL",function(t,n){return this.optional(n)||e.validator.methods.bankaccountNL.call(this,t,n)||e.validator.methods.giroaccountNL.call(this,t,n)},"Please specify a valid bank or giro account number"),e.validator.addMethod("bic",function(e,t){return this.optional(t)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(e)},"Please specify a valid BIC code"),e.validator.addMethod("cifES",function(e){var t,n,i,o,r,a,s=[];if(e=e.toUpperCase(),!e.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(i=0;9>i;i++)s[i]=parseInt(e.charAt(i),10);for(n=s[2]+s[4]+s[6],o=1;8>o;o+=2)r=(2*s[o]).toString(),a=r.charAt(1),n+=parseInt(r.charAt(0),10)+(""===a?0:parseInt(a,10));return/^[ABCDEFGHJNPQRSUVW]{1}/.test(e)?(n+="",t=10-parseInt(n.charAt(n.length-1),10),e+=t,s[8].toString()===String.fromCharCode(64+t)||s[8].toString()===e.charAt(e.length-1)):!1},"Please specify a valid CIF number."),e.validator.addMethod("creditcardtypes",function(e,t,n){if(/[^0-9\-]+/.test(e))return!1;e=e.replace(/\D/g,"");var i=0;return n.mastercard&&(i|=1),n.visa&&(i|=2),n.amex&&(i|=4),n.dinersclub&&(i|=8),n.enroute&&(i|=16),n.discover&&(i|=32),n.jcb&&(i|=64),n.unknown&&(i|=128),n.all&&(i=255),1&i&&/^(5[12345])/.test(e)?16===e.length:2&i&&/^(4)/.test(e)?16===e.length:4&i&&/^(3[47])/.test(e)?15===e.length:8&i&&/^(3(0[012345]|[68]))/.test(e)?14===e.length:16&i&&/^(2(014|149))/.test(e)?15===e.length:32&i&&/^(6011)/.test(e)?16===e.length:64&i&&/^(3)/.test(e)?16===e.length:64&i&&/^(2131|1800)/.test(e)?15===e.length:128&i?!0:!1},"Please enter a valid credit card number."),e.validator.addMethod("currency",function(e,t,n){var i,o="string"==typeof n,r=o?n:n[0],a=o?!0:n[1];return r=r.replace(/,/g,""),r=a?r+"]":r+"]?",i="^["+r+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",i=new RegExp(i),this.optional(t)||i.test(e)},"Please specify a valid currency"),e.validator.addMethod("dateFA",function(e,t){return this.optional(t)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(e)},"Please enter a correct date"),e.validator.addMethod("dateITA",function(e,t){var n,i,o,r,a,s=!1,l=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return l.test(e)?(n=e.split("/"),i=parseInt(n[0],10),o=parseInt(n[1],10),r=parseInt(n[2],10),a=new Date(r,o-1,i,12,0,0,0),s=a.getUTCFullYear()===r&&a.getUTCMonth()===o-1&&a.getUTCDate()===i?!0:!1):s=!1,this.optional(t)||s},"Please enter a correct date"),e.validator.addMethod("dateNL",function(e,t){return this.optional(t)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(e)},"Please enter a correct date"),e.validator.addMethod("extension",function(e,t,n){return n="string"==typeof n?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+n+")$","i"))},e.validator.format("Please enter a value with a valid extension.")),e.validator.addMethod("giroaccountNL",function(e,t){return this.optional(t)||/^[0-9]{1,7}$/.test(e)},"Please specify a valid giro account number"),e.validator.addMethod("iban",function(e,t){if(this.optional(t))return!0;var n,i,o,r,a,s,l,c,d,u=e.replace(/ /g,"").toUpperCase(),h="",p=!0,f="",v="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(u))return!1;if(n=u.substring(0,2),s={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},a=s[n],"undefined"!=typeof a&&(l=new RegExp("^[A-Z]{2}\\d{2}"+a+"$",""),!l.test(u)))return!1;for(i=u.substring(4,u.length)+u.substring(0,4),c=0;c<i.length;c++)o=i.charAt(c),"0"!==o&&(p=!1),p||(h+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(o));for(d=0;d<h.length;d++)r=h.charAt(d),v=""+f+r,f=v%97;return 1===f},"Please specify a valid IBAN"),e.validator.addMethod("integer",function(e,t){return this.optional(t)||/^-?\d+$/.test(e)},"A positive or negative non-decimal number please"),e.validator.addMethod("ipv4",function(e,t){return this.optional(t)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)},"Please enter a valid IP v4 address."),e.validator.addMethod("ipv6",function(e,t){return this.optional(t)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)},"Please enter a valid IP v6 address."),e.validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z]+$/i.test(e)},"Letters only please"),e.validator.addMethod("letterswithbasicpunc",function(e,t){return this.optional(t)||/^[a-z\-.,()'"\s]+$/i.test(e)},"Letters or punctuation only please"),e.validator.addMethod("mobileNL",function(e,t){return this.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(e)},"Please specify a valid mobile number"),e.validator.addMethod("mobileUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),e.validator.addMethod("nieES",function(e){return e=e.toUpperCase(),e.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[T]{1}/.test(e)?e[8]===/^[T]{1}[A-Z0-9]{8}$/.test(e):/^[XYZ]{1}/.test(e)?e[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(e.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23):!1:!1},"Please specify a valid NIE number."),e.validator.addMethod("nifES",function(e){return e=e.toUpperCase(),e.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[0-9]{8}[A-Z]{1}$/.test(e)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(e.substring(8,0)%23)===e.charAt(8):/^[KLM]{1}/.test(e)?e[8]===String.fromCharCode(64):!1:!1},"Please specify a valid NIF number."),e.validator.addMethod("nowhitespace",function(e,t){return this.optional(t)||/^\S+$/i.test(e)},"No white space please"),e.validator.addMethod("pattern",function(e,t,n){return this.optional(t)?!0:("string"==typeof n&&(n=new RegExp(n)),n.test(e))},"Invalid format."),e.validator.addMethod("phoneNL",function(e,t){return this.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(e)},"Please specify a valid phone number."),e.validator.addMethod("phoneUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),e.validator.addMethod("phoneUS",function(e,t){return e=e.replace(/\s+/g,""),this.optional(t)||e.length>9&&e.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number"),e.validator.addMethod("phonesUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),e.validator.addMethod("postalCodeCA",function(e,t){return this.optional(t)||/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] \d[A-Z]\d$/.test(e)},"Please specify a valid postal code"),e.validator.addMethod("postalcodeIT",function(e,t){return this.optional(t)||/^\d{5}$/.test(e)},"Please specify a valid postal code"),e.validator.addMethod("postalcodeNL",function(e,t){return this.optional(t)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(e)},"Please specify a valid postal code"),e.validator.addMethod("postcodeUK",function(e,t){return this.optional(t)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(e)},"Please specify a valid UK postcode"),e.validator.addMethod("require_from_group",function(t,n,i){var o=e(i[1],n.form),r=o.eq(0),a=r.data("valid_req_grp")?r.data("valid_req_grp"):e.extend({},this),s=o.filter(function(){return a.elementValue(this)}).length>=i[0];return r.data("valid_req_grp",a),e(n).data("being_validated")||(o.data("being_validated",!0),o.each(function(){a.element(this)}),o.data("being_validated",!1)),s},e.validator.format("Please fill at least {0} of these fields.")),e.validator.addMethod("skip_or_fill_minimum",function(t,n,i){var o=e(i[1],n.form),r=o.eq(0),a=r.data("valid_skip")?r.data("valid_skip"):e.extend({},this),s=o.filter(function(){return a.elementValue(this)}).length,l=0===s||s>=i[0];return r.data("valid_skip",a),e(n).data("being_validated")||(o.data("being_validated",!0),o.each(function(){a.element(this)}),o.data("being_validated",!1)),l},e.validator.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("stateUS",function(e,t,n){var i,o="undefined"==typeof n,r=o||"undefined"==typeof n.caseSensitive?!1:n.caseSensitive,a=o||"undefined"==typeof n.includeTerritories?!1:n.includeTerritories,s=o||"undefined"==typeof n.includeMilitary?!1:n.includeMilitary;return i=a||s?a&&s?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":a?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",i=r?new RegExp(i):new RegExp(i,"i"),this.optional(t)||i.test(e)},"Please specify a valid state"),e.validator.addMethod("strippedminlength",function(t,n,i){return e(t).text().length>=i},e.validator.format("Please enter at least {0} characters")),e.validator.addMethod("time",function(e,t){return this.optional(t)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(e)},"Please enter a valid time, between 00:00 and 23:59"),e.validator.addMethod("time12h",function(e,t){return this.optional(t)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(e)},"Please enter a valid time in 12-hour am/pm format"),e.validator.addMethod("url2",function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},e.validator.messages.url),e.validator.addMethod("vinUS",function(e){if(17!==e.length)return!1;var t,n,i,o,r,a,s=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],c=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],d=0;for(t=0;17>t;t++){if(o=c[t],i=e.slice(t,t+1),8===t&&(a=i),isNaN(i)){for(n=0;n<s.length;n++)if(i.toUpperCase()===s[n]){i=l[n],i*=o,isNaN(a)&&8===n&&(a=s[n]);break}}else i*=o;d+=i}return r=d%11,10===r&&(r="X"),r===a?!0:!1},"The specified vehicle identification number (VIN) is invalid."),e.validator.addMethod("zipcodeUS",function(e,t){return this.optional(t)||/^\d{5}(-\d{4})?$/.test(e)},"The specified US ZIP Code is invalid"),e.validator.addMethod("ziprange",function(e,t){return this.optional(t)||/^90[2-5]\d\{2\}-\d{4}$/.test(e)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx"),e.validator.addMethod("zipUSCA",function(e,t){return this.optional(t)||/\d{5}-\d{4}$|^\d{5}$|^[a-zA-Z][0-9][a-zA-Z](| )?[0-9][a-zA-Z][0-9]$/.test(e)},"Please enter a valid US zip or CA postal code"),e.validator.addMethod("dollars",function(e,t){return this.optional(t)||/^([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(.[0-9][0-9])?$/.test(e)},e.validator.format("Please enter a valid dollar ($) amount")),e.validator.addMethod("dateCustom",function(e,t){return this.optional(t)||/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d\d/.test(e)},e.validator.format("Please enter a valid date (MM/DD/YY)")),e.validator.addMethod("color",function(e,t){return this.optional(t)||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)},e.validator.format("Please enter a valid hexadecimal color code (ex: #FFFFFF)")),e.validator.addMethod("url3",function(e,t){return this.optional(t)||/^((https?|s?ftp):\/\/)?(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},e.validator.format("Please enter a valid URL")),e.validator.addMethod("youtube",function(e,t){return this.optional(t)||/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/.test(e)},e.validator.format("Please enter a valid YouTube URL")),e.validator.addMethod("zipUSCAwild",function(e,t){return this.optional(t)||/^\d{2,5}$|^[a-zA-Z][0-9][a-zA-Z]((\s?|\-?)(([0-9]?)|([0-9][a-zA-Z])|([0-9][a-zA-Z][0-9])))?$/.test(e)},e.validator.format("Please enter a valid US zip or CA postal code")),e.validator.addMethod("zipUS",function(e,t){return this.optional(t)||/^\d{5}$/.test(e)},"The specified US zip code is invalid"),e.validator.addMethod("zipCA",function(e,t){return this.optional(t)||/^\d{5}$|^[a-zA-Z][0-9][a-zA-Z](\s?|\-?)?[0-9][a-zA-Z][0-9]$/.test(e)},"The specified CA postal code is invalid"),e.validator.addMethod("noCarets",function(e,t){return this.optional(t)||!/(\<|\>)/.test(e)},"The < and > characters are not allowed here. eSAT creates these automatically for you.")}),define("components/product-modal/views/product-modal-view",["underscore","backbone","../templates/product-modal-tpl","./sku-view","content/category-sections/merchandising/product-management/models/product-model","content/category-sections/merchandising/product-management/collections/product-collection","global-events","jqueryui","jqueryval"],function(e,t,n,o,r,a,s){var l=t.View.extend({template:n,initialize:function(){var e=this;e.initModal($("#modal-container-form")),e.listenTo(s,"form:product-modal",function(t){e.render(t)})},render:function(e){var t=e.template||{},n=this;return this.cb=e.cb,a.fetchCustom().done(function(){var i=e.pid,o=a.find(function(e){return Number(e.get("id"))===i||e.get("id")===i});n.newmodel=o,baseSku=o.get("baseSkuId"),d=null,"Teleflora"==o.get("type")&&(baseSuggested=o.get("suggestedPrice")),thisSuggested1=null,thisSuggested2=null,""!=o.get("skuList")||0==o.get("isBaseSku")?(o.get("isBaseSku")?(d=o.get("skuList"),baseSkuLabel=o.get("skuLabel"),baseSkuPrice=o.get("myPrice"),baseSkuHoliday=o.get("holidayPrice")):(parentSku=a.get(baseSku),d=parentSku.get("skuList"),baseSkuPrice=parentSku.get("myPrice"),baseSkuLabel=parentSku.get("skuLabel"),baseSkuHoliday=parentSku.get("holidayPrice")),skuLength=d.length,thisSku1ID=d[0],thisSku1=a.get(thisSku1ID),s=thisSku1.get("myPrice"),u=thisSku1.get("holidayPrice"),"Teleflora"==o.get("type")&&(thisSuggested1=thisSku1.get("suggestedPrice")),c=null,h=null,r=thisSku1.get("skuLabel"),skuLength>0&&(thisSku2ID=d[1],thisSku2=a.get(thisSku2ID),c=thisSku2.get("myPrice"),h=thisSku2.get("holidayPrice"),l=thisSku2.get("skuLabel"),"Teleflora"==o.get("type")&&(thisSuggested2=thisSku2.get("suggestedPrice"))),n.skuLength=skuLength):(d=!1,baseSkuLabel=o.get("skuLabel"),baseSkuPrice=o.get("myPrice"),baseHolidayPrice=o.get("holidayPrice"));var r,s,l,c,d,u,h;n.$el.html(n.template({pid:e.pid,name:o.get("name"),type1:o.get("type"),type2:o.get("type2"),number:o.get("number"),suggestedPrice:o.get("suggestedPrice"),baseSku:o.get("isBaseSku"),myPrice:o.get("myPrice"),holidayPrice:o.get("holidayPrice"),active:o.get("active"),baseSkuLabel:baseSkuLabel,baseSuggested:baseSuggested,suggested1:thisSuggested1,suggested2:thisSuggested2,sku1Label:r,sku1Price:s,sku1Holiday:u,sku2Label:l,otherSku:d,sku2Price:c,sku2Holiday:h,confirmBtnText:t.confirmBtnText||"Save Changes",cancelBtnText:t.cancelBtnText||"Cancel"}))}),this.delegateEvents(),setTimeout(function(){n.$el.dialog({position:{my:"center",at:"center",of:window},open:function(){$(this).parent().promise().done(function(){n.cacheElem(),n.validateForm(),n.addSkus()})}}),n.$el.dialog("open")},10),this},events:{"click #confirm-prod":"confirmProd","click #cancel-prod":"closeModal","change input":"triggerChange"},triggerChange:function(){s.trigger("form:editing")},addSkus:function(){var e=this;for(i=0;i<e.skuLength;i++){otherSku=e.newmodel.get("skuList"),thisSkuID=otherSku[i],thisSku=a.get(thisSkuID);var t=new o({model:thisSku,parent:this});e.$children.append(t.render().el)}},cacheElem:function(){this.$form=this.$el.find("#f-product-modal-form"),this.$tip=this.$el.find(".tooltip-change"),this.$children=this.$el.find("#children")},validateForm:function(){this.$form.validate({ignore:[],rules:{"f-name":{required:!0}}}),jQuery.validator.addClassRules({"f-price":{required:!0,number:!0},"f-holiday":{number:!0},"f-label":{required:!0},"f-number":{required:!0}})},checkForm:function(){return this.$form.valid()},initModal:function(e){this.$el=e.dialog({autoOpen:!1,modal:!0,draggable:!1,width:700,show:{effect:"fade",speed:100},hide:{effect:"fade",speed:100}})},confirmProd:function(){this.closeModal()},cancel:function(){this.closeModal()},closeModal:function(){var e=this;s.trigger("form:cancel",function(){e.$el.dialog("close")}.bind(this))}});return new l}),define("app-view",["jquery","backbone","router","navigation/views/navigation-view","navigation/views/mobile-navigation-view","global-events","components/create-modal/views/create-modal-view","components/confirm-modal/views/confirm-modal-view","components/image-modal/views/image-modal-view","components/product-modal/views/product-modal-view"],function(e,t,n,i,o,r){var a=t.View.extend({el:e("#app"),initialize:function(){var e=this;e.cacheElem(),e.$mainNav.append(i.render().el),e.$mobileNav.append(o.render().el),e.checkBrowser(),o.parent=e,e.delegateEvents()},cacheElem:function(){this.$content=this.$el.find("#content"),this.$mainNav=this.$el.find("#main-nav"),this.$mobileNav=this.$el.find("#mobile-nav"),this.$navBtn=this.$el.find("#nav-btn"),this.$page=this.$el.find("#page")},regions:{content:null},events:{"click #nav-btn":"toggleNav","click #mobile-nav-overlay":"toggleNav","keydown input":"preventEnterSubmit","change form":"handleEdit","click a":"handleNav"},checkBrowser:function(){-1!=navigator.userAgent.indexOf("Mac OS X")&&this.$page.addClass("mac")},changeContent:function(e){null===this.regions.content?(this.regions.content=e,this.$content.html(e.render().el),this.$el.fadeIn()):e!==this.regions.content&&(this.regions.content=e,this.$content.html(e.render().$el.fadeIn()))},preventEnterSubmit:function(e){return 13==e.keyCode?(e.preventDefault(),!1):void 0},toggleNav:function(){var e=this,t="transitionend webkitTransitionEnd otransitionend MSTransitionEnd";e.$page.addClass("mobile-nav-animating"),e.$page.hasClass("mobile-nav-visible")?(e.$navBtn.removeClass("active"),e.$page.addClass("left")):(e.$navBtn.addClass("active"),e.$page.addClass("right")),e.$page.on(t,function(){e.$page.removeClass("mobile-nav-animating left right").toggleClass("mobile-nav-visible"),e.$el.toggleClass("lock-body"),e.$page.off(t)})},handleEdit:function(){r.trigger("form:editing")},handleNav:function(e){var i=e.currentTarget;!i.classList.contains("ui-tabs-anchor")&&i.hash&&i.hash!=="#"+t.history.fragment&&(e.preventDefault(),r.trigger("form:cancel",function(){n.get().navigate(i.hash,{trigger:!0})}))}});return new a}),define("content/home/templates/home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<div id="home">\r\n      <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel y-space-top-s">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n  <div class="row">\r\n    <!-- Body -->\r\n    <div class="col-d-8">\r\n\r\n    \r\n      <div class="row row-spaced panel form-section">\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <div class="panel-title">\r\n              Site Notes\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <textarea class="size-3" name="f-site-notes" id="f-site-notes"></textarea>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n\r\n\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="clearfix section-title">\r\n            <h2 class="pull-left">New Product Additions</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <p>\r\n            New Teleflora products are now in eSAT.  Click here to review new additions for Prom, Mother\'s Day, Father\'s Day, Grandparent\'s Day, New Baby and Everyday.  Edit prices and categories before they go live on your site!\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="clearfix section-title">\r\n        <h2 class="pull-left">Lady Antebellum Free Album Promotion</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel hidden">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n      You have reached the maximum number of add-ons allowed.<br>Please remove add-ons you have selected if you wish to add more.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <img class="fill-container-width" src="images/dashboard-ladya-banner.jpg" alt="">\r\n        <p>\r\n          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cum officiis perspiciatis dolor impedit dolore temporibus mollitia maxime. Ab placeat, temporibus aliquam laboriosam asperiores optio sit magni, rem corporis iure perferendis delectus. Ex quasi corrupti qui assumenda minima explicabo quidem, doloremque quibusdam iure culpa veritatis non facilis necessitatibus similique harum quae doloribus, placeat. Veniam eum qui in porro? Harum inventore optio mollitia, est eligendi iure explicabo eveniet. Nemo, nisi magnam. Laboriosam sequi, tempore quaerat. Nemo debitis, quisquam sunt perspiciatis voluptatum. Quisquam libero ea hic possimus repudiandae eum eius facere, quod voluptas fuga obcaecati exercitationem sequi, quaerat dolor mollitia, modi veritatis nostrum!\r\n        </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="clearfix section-title">\r\n            <h2 class="pull-left">New Product Additions</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <p>\r\n            New Teleflora products are now in eSAT.  Click here to review new additions for Prom, Mother\'s Day, Father\'s Day, Grandparent\'s Day, New Baby and Everyday.  Edit prices and categories before they go live on your site!\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="clearfix section-title">\r\n        <h2 class="pull-left">Lady Antebellum Free Album Promotion</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <img class="fill-container-width" src="images/dashboard-ladya-banner.jpg" alt="">\r\n        <p>\r\n          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cum officiis perspiciatis dolor impedit dolore temporibus mollitia maxime. Ab placeat, temporibus aliquam laboriosam asperiores optio sit magni, rem corporis iure perferendis delectus. Ex quasi corrupti qui assumenda minima explicabo quidem, doloremque quibusdam iure culpa veritatis non facilis necessitatibus similique harum quae doloribus, placeat. Veniam eum qui in porro? Harum inventore optio mollitia, est eligendi iure explicabo eveniet. Nemo, nisi magnam. Laboriosam sequi, tempore quaerat. Nemo debitis, quisquam sunt perspiciatis voluptatum. Quisquam libero ea hic possimus repudiandae eum eius facere, quod voluptas fuga obcaecati exercitationem sequi, quaerat dolor mollitia, modi veritatis nostrum!\r\n        </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="col-12 col-d-4">\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="clearfix section-title">\r\n        <h2 class="pull-left">Quick Links</h2><button id="open-modal-btn" class="icon icon-btn icon-cog pull-right icon-2x fill-container-height"></button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row row-spaced">\r\n        <div class="grid-2">\r\n          ';
for(var i=0;i<quickLinks.length;++i)quickLinks[i].active&&(__p+='\r\n              <a href="'+(null==(__t=quickLinks[i].url)?"":__t)+'"><button class="btn btn-quick-link grid-item">\r\n              <i class="icon '+(null==(__t=quickLinks[i].icon)?"":__t)+' icon-2x"></i> <div class="quick-link-text">'+(null==(__t=quickLinks[i].nickName)?"":__t)+"</div>\r\n              </button></a>\r\n          ");__p+='\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="clearfix section-title">\r\n        <h2 class="pull-left">Last 30 Days</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row row-spaced">\r\n        <div class="grid-2">\r\n          <div class="grid-item stats-panel"> \r\n            <div class="row">\r\n              <div class="col-12">\r\n                <i class="icon icon-group icon-2x"></i> Visitors\r\n              </div>\r\n            </div>\r\n            <hr>\r\n            <div class="row">\r\n              <div class="col-12">\r\n                <span class="fa-2x">33,597</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="grid-item stats-panel">\r\n            <div class="row">\r\n              <div class="col-12">\r\n                <i class="icon icon-shopping-cart icon-2x"></i> Orders\r\n              </div>\r\n            </div>\r\n            <hr>\r\n            <div class="row">\r\n              <div class="col-12">\r\n                <span class="fa-2x">2,492</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row">\r\n        <div class="col-12 no-mobile">\r\n          <article class="fill-container-width center-align">\r\n            <iframe src="https://www.google.com/calendar/embed?title=eFlorist%20Scheduled%20Updates&amp;showTitle=0&amp;showNav=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23ffffff&amp;src=jua1qn8l1ddreegp88r6dvbf08%40group.calendar.google.com&amp;color=%23333333&amp;src=7j2s39ipiqd058cl8sijfj67fk%40group.calendar.google.com&amp;color=%23875509&amp;src=jvgejecq27mpomoh726uah1gns%40group.calendar.google.com&amp;color=%23182C57&amp;src=eflorist%40teleflora.com&amp;color=%232952A3&amp;src=prkithvjko4s7mdshujd87krsc%40group.calendar.google.com&amp;color=%232952A3&amp;src=9cb7nutliqs2tht483shp9e23c%40group.calendar.google.com&amp;color=%23B1440E&amp;src=7s5s1v8vi1n256ka7rtvb6eans%40group.calendar.google.com&amp;color=%235229A3&amp;src=ib3ntnat24emcepdne6q0lq4pk%40group.calendar.google.com&amp;color=%232F6309&amp;src=5ir2p328sqbh35os97nssm8cec%40group.calendar.google.com&amp;color=%236B3304&amp;src=5hf78jfn09l1o4821vhd8g7u84%40group.calendar.google.com&amp;color=%231B887A&amp;src=nflal6dm2991lje07d78ojr904%40group.calendar.google.com&amp;color=%23B1365F&amp;ctz=America%2FChicago" style=" border-width:0 " width="300" height="300" frameborder="0" scrolling="no"></iframe>\r\n          </article>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id="quick-links-modal">\r\n    <div class="row row-spaced">\r\n      <div class="col-12">\r\n        <div class="clearfix section-title">\r\n          <h2 class="pull-left">Quick Links Configuration</h2>\r\n          <div class="btn-panel">\r\n            <button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n            <button id="save-btn" class="btn btn-submit">Save Changes</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row">\r\n      <div class="col-6">\r\n        <div class="row">\r\n          <div class="col-12"><strong>Selected Links</strong></div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <div id="active-quick-links" class="grid-2-closed clearfix"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="col-6">\r\n        <div class="row">\r\n          <div class="col-12"><strong>Quick Links</strong></div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <ul id="all-quick-links" class="listing"></ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}return __p}}),define("content/home/models/quick-links-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,name:"",nickName:"",icon:"",imgUrl:"",active:!1,url:""}});return t}),define("content/home/collections/quick-links-collection",["backbone","../models/quick-links-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-quick-links.json",model:t,initialize:function(){var e=this;e.listenTo(e,"change:active",function(t){var n;t.get("active")?(t.set("rank",-1),n=e.getSortedByRank(),t.set("rank",n[n.length-1].get("rank")+1)):e.setRank()})},getSortedByRank:function(){return this.where({active:!0}).sort(function(e,t){return e.get("rank")-t.get("rank")})},setRank:function(){var e=this.getSortedByRank().map(function(e,t){return e.set("rank",t+1),e});this.set(e,{remove:!1})},comparator:function(e){return e.get("rank")}});return new n}),define("content/home/templates/active-quick-link-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div data-id="'+(null==(__t=id)?"":__t)+'" class="grid-item">\r\n    <div class="center-align">\r\n      <div><img src="'+(null==(__t=imgUrl)?"":__t)+'" alt=""></div>\r\n      <strong>'+(null==(__t=name)?"":__t)+'</strong>\r\n    </div>\r\n    <button class="icon icon-btn icon-trash fa-lg"></button>\r\n</div>';return __p}}),define("content/home/views/active-quick-link-view",["underscore","backbone","../templates/active-quick-link-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.listenTo(this.model,"change:active",this.remove)},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){this.model.set("active",!1)}});return i}),define("content/home/templates/all-quick-link-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<li class="left-align clickable"><img src="'+(null==(__t=imgUrl)?"":__t)+'" class="icon-prefix">'+(null==(__t=nickName)?"":__t)+'<button class="icon icon-btn '+(null==(__t=active?"icon-added":"icon-add")?"":__t)+' pull-right"></button></li>';return __p}}),define("content/home/views/all-quick-link-view",["underscore","backbone","../templates/all-quick-link-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.setElement(this.template(this.model.toJSON())),this.listenTo(this.model,"change:active",this.handleChange)},render:function(){return this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$icon=this.$el.find(".icon")},events:{click:"toggleAdded"},toggleAdded:function(){this.model.set("active",!this.model.get("active"))},handleChange:function(e){var t=e.get("active");t?(this.$icon.removeClass("icon-add"),this.$icon.addClass("icon-added")):(this.$icon.removeClass("icon-added"),this.$icon.addClass("icon-add"))}});return i}),define("content/home/views/quick-links-modal-view",["backbone","../collections/quick-links-collection","./active-quick-link-view","./all-quick-link-view"],function(e,t,n,i){var o=e.View.extend({render:function(){return this.setElement($("#quick-links-modal")),this.cacheElem(),this.collection=t.deepClone(),this.listenTo(this.collection,"change:active",this.addAllActive),this.addAllQuickLinks(),this.addAllActive(),this.applySortable(this.$activeQuickLinks,this.collection),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$allQuickLinks=this.$el.find("#all-quick-links"),this.$activeQuickLinks=this.$el.find("#active-quick-links")},addQuickLink:function(e){var t=new i({model:e});this.$allQuickLinks.append(t.render().el)},addAllQuickLinks:function(){this.$allQuickLinks.empty(),this.collection.each(this.addQuickLink,this)},addActive:function(e){var t=new n({model:e});this.$activeQuickLinks.append(t.render().el)},addAllActive:function(){this.$activeQuickLinks.empty(),this.collection.getSortedByRank().forEach(this.addActive,this)},handleSaveBtnClick:function(){t.set(this.collection.toJSON()),this.closeModal(),this.parent.render()},closeModal:function(){this.$el.dialog("close")},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(e,t){var n=this;e.sortable({helper:n.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.children().each(function(e){var n=$(this).data("id");t.get(n).set("rank",e+1)}),t.sort(),n.addAllQuickLinks()}})}});return new o}),define("content/home/views/home-view",["jquery","backbone","../templates/home-tpl","../collections/quick-links-collection","./quick-links-modal-view","jqueryui"],function(e,t,n,i,o){var r=t.View.extend({tagName:"div",template:n,initialize:function(){o.parent=this},events:{"click #open-modal-btn":"openModal"},render:function(){var e=this;return i.fetchCustom().done(function(){var t={quickLinks:i.toJSON()};e.$el.html(e.template(t)),e.setModal(),e.cacheElem(),e.delegateEvents()}),e},cacheElem:function(){this.$modal=e("#quick-links-modal"),this.$saveBtn=this.$modal.find("#save-btn"),this.$cancelBtn=this.$modal.find("#cancel-btn")},setModal:function(){this.modal&&this.modal.dialog("instance")&&this.modal.dialog("destroy"),this.modal=this.$el.find("#quick-links-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100},resizable:!1})},openModal:function(){o.render(),this.modal.dialog("open")}});return new r}),define("content/404/templates/404-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="error-page">\r\n\r\n	<div id="error-title">We couldn\'t find that page.</div>\r\n	<div id="error-subtitle">Sorry about that. You can try going back to the dashboard<br> or calling eFlorist Support at (866)983-3932 for help.</div>\r\n	<div id="error-subwrap">\r\n		<button type="button" class="btn btn-submit" id="error-btn"><div class="icon icon-home"></div> eSAT Dashboard</button>\r\n	</div>\r\n	\r\n</div>';return __p}}),define("content/404/views/404-view",["jquery","backbone","../templates/404-tpl"],function(e,t,n){var i=t.View.extend({tagName:"div",template:n,initialize:function(){},events:{"click #error-btn":"goHome"},goHome:function(){window.location.href="/#"},render:function(){var e=this;return e.$el.html(e.template()),e.cacheElem(),e.delegateEvents(),e},cacheElem:function(){}});return new i}),define("content/category-sections/side-menus/menu-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<div id="side-menu-inner">\r\n	<ul id="side-nav">\r\n		';for(var i=0,j=subCategories.length;j>i;++i){__p+='\r\n			<li class="side-nav-title">\r\n				<i class="icon icon-prefix '+(null==(__t=subCategories[i].iconClass)?"":__t)+' icon-2x"></i>\r\n				'+(null==(__t=subCategories[i].name)?"":__t)+"\r\n			</li>\r\n\r\n			";for(var k=0,l=subCategories[i].sections.length;l>k;++k)__p+='\r\n				<a href="'+(null==(__t=baseUrl+subCategories[i].sections[k].url)?"":__t)+'">\r\n					<li>'+(null==(__t=subCategories[i].sections[k].name)?"":__t)+"</li>\r\n				</a>\r\n			";__p+="\r\n		"}__p+="\r\n	</ul>\r\n</div>"}return __p}}),define("content/category-sections/side-menus/menu-template-view",["underscore","backbone","./menu-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(e){this.setElement(this.template(e))}});return i}),define("content/category-sections/side-menus/views/merchandising-menu-view",["../menu-template-view","settings"],function(e,t){var n=new e(t.categories[t.categoryIndex.merchandising]);return n}),define("content/category-sections/side-menus/views/content-management-menu-view",["../menu-template-view","settings"],function(e,t){var n=new e(t.categories[t.categoryIndex.contentManagement]);return n}),define("content/category-sections/side-menus/views/marketing-promotions-menu-view",["../menu-template-view","settings"],function(e,t){var n=new e(t.categories[t.categoryIndex.marketingPromotions]);return n}),define("content/category-sections/side-menus/views/seo-menu-view",["../menu-template-view","settings"],function(e,t){var n=new e(t.categories[t.categoryIndex.seo]);return n}),define("content/category-sections/side-menus/views/reporting-menu-view",["../menu-template-view","settings"],function(e,t){var n=new e(t.categories[t.categoryIndex.reporting]);return n}),define("content/category-sections/side-menus/views/more-menu-view",["../menu-template-view","settings"],function(e,t){var n=new e(t.categories[t.categoryIndex.more]);return n}),define("content/content-view-map",["require","./home/views/home-view","./404/views/404-view","./category-sections/side-menus/views/merchandising-menu-view","./category-sections/side-menus/views/content-management-menu-view","./category-sections/side-menus/views/marketing-promotions-menu-view","./category-sections/side-menus/views/seo-menu-view","./category-sections/side-menus/views/merchandising-menu-view","./category-sections/side-menus/views/reporting-menu-view","./category-sections/side-menus/views/more-menu-view"],function(e){return function(t){switch(t){case null:case"home":case"dashboard":return e("./home/views/home-view");case"404":return e("./404/views/404-view");case"merchandising":return e("./category-sections/side-menus/views/merchandising-menu-view");case"content-management":return e("./category-sections/side-menus/views/content-management-menu-view");case"marketing-promotions":return e("./category-sections/side-menus/views/marketing-promotions-menu-view");case"seo":return e("./category-sections/side-menus/views/seo-menu-view");case"merchandising":return e("./category-sections/side-menus/views/merchandising-menu-view");case"reporting":return e("./category-sections/side-menus/views/reporting-menu-view");case"more":return e("./category-sections/side-menus/views/more-menu-view")}}}),define("text",["module"],function(e){var t,n,i,o,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,h=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,i,o=!1,r=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!a||r>1)?(t=e.substring(0,r),n=e.substring(r+1,e.length)):t=e,i=n||t,r=i.indexOf("!"),-1!==r&&(o="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:t=i),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,o){var r,a,s,l=t.xdRegExp.exec(e);return l?(r=l[2],a=l[3],a=a.split(":"),s=a[1],a=a[0],!(r&&r!==n||a&&a.toLowerCase()!==i.toLowerCase()||(s||a)&&s!==o)):!0},finishLoad:function(e,n,i,o){i=n?t.strip(i):i,f.isBuild&&(p[e]=i),o(i)},load:function(e,n,i,o){if(o&&o.isBuild&&!o.inlineText)return void i();f.isBuild=o&&o.isBuild;var r=t.parseName(e),a=r.moduleName+(r.ext?"."+r.ext:""),s=n.toUrl(a),l=f.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void i():void(!c||l(s,d,u,h)?t.get(s,function(n){t.finishLoad(e,r.strip,n,i)},function(e){i.error&&i.error(e)}):n([a],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,i)}))},write:function(e,n,i){if(p.hasOwnProperty(n)){var o=t.jsEscape(p[n]);i.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,i,o,r){var a=t.parseName(n),s=a.ext?"."+a.ext:"",l=a.moduleName+s,c=i.toUrl(a.moduleName+s)+".js";t.load(l,i,function(){var n=function(e){return o(c,e)};n.asModule=function(e,t){return o.asModule(e,c,t)},t.write(e,l,n,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var o=n.readFileSync(e,"utf8");0===o.indexOf("﻿")&&(o=o.substring(1)),t(o)}catch(r){i&&i(r)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,o){var r,a=t.createXhr();if(a.open("GET",e,!0),o)for(r in o)o.hasOwnProperty(r)&&a.setRequestHeader(r.toLowerCase(),o[r]);f.onXhr&&f.onXhr(a,e),a.onreadystatechange=function(){var t,o;4===a.readyState&&(t=a.status||0,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=a,i&&i(o)):n(a.responseText),f.onXhrComplete&&f.onXhrComplete(a,e))},a.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,o="utf-8",r=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),l="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(a),n.append(i);l=String(n.toString())}finally{s.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,s,l={};r&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(s,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),a.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),t(l.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!content/category-sections/common/products-messaging/templates/products-messaging-home-tpl.html",[],function(){return'<div id="products-messaging">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Homepage Products & Messaging</h2>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			This section will allow you to edit the products and text displayed on your homepage. It will also allow you to schedule these items to automatically display at a future date. You can see and edit previously created homepages in the list below or add a new homepage.\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<button id="add-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Homepage</button>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-4 left-align indented-l">Homepage Name <button data-attribute="name" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2">Start Date <button data-attribute="startDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2">End Date <button data-attribute="endDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2">Edit</th>\r\n						<th class="col-2">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="homepage-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>'}),define("content/category-sections/common/products-messaging/models/homepage-model",["backbone"],function(e){var t=e.Model.extend({defaults:function(){return{id:null,isDefault:!1,name:"",startDate:"",endDate:"",headline:"",headlineActive:!0,subhead:"",subheadActive:!1,buttonText:"",buttonTextActive:!0,buttonLink:"",featuredProducts:[]}}});return t}),define("components/featured-product/models/featured-product-model",["backbone"],function(e){var t=e.Model.extend({defaults:{name:"",number:"",featured:!1,id:null,pricePoints:"Primary",type:"Custom",type2:"",type3:"Vase Arrangement",suggestedPrice:"Custom",myPrice:"",holidayPrice:"",taxFreeActive:"",active:!0,imgA1:!1,imgA2:!1,imgA3:!1,imgB1:!1,imgB2:!1,imgB3:!1,imgC1:!1,imgC2:!1,imgC3:!1,categories:[],isBaseSku:!0,baseSkuId:"",skuLabel:"Standard",skuList:[],subscription:!0,startDate:"",endDate:"",description:"",additionalInfo:"",legalInfo:"",metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:"",discountAmount:"",discountVariantsActive:!0,discountStartDate:"",discountEndDate:"",localDeliveryActive:!0,noSameDayDeliveryActive:!0,inStorePickupActive:!0,taxFreeActive:!0,merchandisingHighlight:"",recipe:"",relatedProducts:[],dropshipMethods:[],addons:[],flowers:[{id:1,name:"Hydrangea",imgUrl:"http://www.fillmurray.com/400/400",active:!1},{id:2,name:"Asiatic Lily",imgUrl:"http://www.fillmurray.com/300/300",active:!1},{id:3,name:"Gerbera",imgUrl:"http://www.fillmurray.com/500/500",active:!1}],bouquetStyles:[{id:1,style:"Exotic",active:!1},{id:2,style:"Elegant",active:!1},{id:3,style:"Fun",active:!1},{id:4,style:"Traditional",active:!1},{id:5,style:"Modern",active:!1}],colors:[{id:1,color:"Red",active:!1},{id:2,color:"Yellow",active:!1},{id:3,color:"White",active:!1},{id:4,color:"Blue",active:!1},{id:5,color:"Pink",active:!1},{id:6,color:"Beige",active:!1}],width:0,height:0,productClassification:"Bouquet",categoriesVariantsActive:!0,attributesVariantsActive:!0},initialize:function(){this.set("imgUrl","http://s7d2.scene7.com/is/image/Teleflora/"+this.get("number")+"?wid=150&hei=215&fmt=jpeg&qlt=90,0&op_sharpen=0&resMode=bilin&op_usm=1.0,0.5,1.0,0&iccEmbed=0&layer=1&opac=0&layer=2&opac=55&layer=5&opac=0")}});return t}),define("components/featured-product/collections/featured-product-collection",["backbone","../models/featured-product-model"],function(e,t){var n=e.Collection.extend({model:t,url:function(){return this.path||"/mock/user-products.json"},initialize:function(){var e=this;e.listenTo(e,"change:featured",function(t){var n;t.get("featured")?(t.set("rank",0),n=e.getSortedByRank(),e.setRank()):(t.unset("rank"),e.setRank())})},getSortedByRank:function(){return this.where({featured:!0}).sort(function(e,t){return e.get("rank")-t.get("rank")})},setRank:function(){var e=this.getSortedByRank().map(function(e,t){return e.set("rank",t+1),e});this.set(e,{remove:!1})}});return n}),define("content/category-sections/common/products-messaging/collections/homepage-collection",["backbone","../models/homepage-model","components/featured-product/collections/featured-product-collection"],function(e,t){var n=e.Collection.extend({url:"/mock/user-homepages.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/common/products-messaging/templates/homepage-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr class="'+(null==(__t=isDefault?"active":"")?"":__t)+'">\r\n	<td class="left-align indented-l">\r\n    ',isDefault&&isFederated&&(__p+='\r\n    <i title="Some elements of the homepage come from a higher node in the federation." class="icon icon-federated icon-lg"></i>\r\n    '),__p+="\r\n    "+(null==(__t=name)?"":__t)+"\r\n  </td>\r\n	<td>"+(null==(__t=startDate)?"":__t)+"</td>\r\n	<td>"+(null==(__t=endDate)?"":__t)+'</td>\r\n	<td><button class="icon icon-btn icon-2x icon-edit"></button></td>\r\n	<td>',isDefault||(__p+='<button class="icon icon-btn icon-2x icon-trash"></button>'),__p+="</td>\r\n</tr>\r\n";return __p}}),define("content/category-sections/common/products-messaging/views/homepage-view",["underscore","backbone","../templates/homepage-tpl","../collections/homepage-collection","global-events"],function(e,t,n,i,o){var r=t.View.extend({template:n,initialize:function(e){this.parent=e.parent},render:function(){var e=this;return e.setElement(e.template(e.model.toJSON())),e.listenTo(i,"remove",function(t){t===e.model&&e.$el.fadeOut(200,function(){e.remove()})}),e},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){o.trigger("form:delete",i.remove.bind(i,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return r}),define("content/category-sections/common/products-messaging/views/products-messaging-home-view",["backbone","text!../templates/products-messaging-home-tpl.html","../models/homepage-model","../collections/homepage-collection","./homepage-view","jqueryui"],function(e,t,n,i,o){var r=e.View.extend({template:t,initialize:function(){this.setElement(this.template),this.listenTo(i,"sort",this.addAllHomepages)},render:function(){var e=this;return this.delegateEvents(),this.cacheElem(),i.fetchCustom().done(function(){e.addAllHomepages(),e.applyTooltips()}),this},events:{"click #add-btn":"handleNewBtn","click .sort-btn":"handleSort"},cacheElem:function(){this.$homepageList=this.$el.find("#homepage-list"),this.$sortButtons=this.$el.find(".sort-btn"),this.$tip=this.$el.find(".tooltip-change")},handleNewBtn:function(){this.parent.showCreateEdit(new n)},handleEdit:function(e){this.parent.showCreateEdit(e)},addHomepage:function(e){var t=new o({model:e,parent:this});this.$homepageList.append(t.render().el)},addAllHomepages:function(){this.$homepageList.empty(),i.each(this.addHomepage,this)},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()},applyTooltips:function(){this.$el.find(".icon-federated").tooltip()}});return new r}),define("content/category-sections/common/products-messaging/templates/create-homepage-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="f-hp-products-messaging" name="f-hp-products-messaging">\n	<div class="row row-spaced">\n		<div class="col-12">\n			<div class="clearfix section-title">\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'Homepage</h2>\n				<div class="btn-panel">\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">\n						',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+="Save\n					</button>\n					",id&&(__p+=' <button type="button" id="copy-btn" class="btn btn-other">\n					<i class="icon icon-add"></i> \n					Copy\n				</button>'),__p+='\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n<!-- Hidden Alert Message -->\n\n<div class="row panel alert-panel">\n  <div class="col-12">\n    <div class="row">\n      <div class="col-1">\n        <div class="icon icon-3x icon-warning"></div>\n      </div>\n      <div class="col-11 alert-text">\n                     This is a generic placeholder for error messages in eSAT. <br>\n                     In the live app, this will be a real message and will be hidden by default.\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Hidden Alert Message -->\n	<div class="row row-spaced">\n		<div class="col-12">\n			This page will allow you to '+(null==(__t=id?"edit ":"add a new ")?"":__t)+' the products and text displayed on your homepage. It will also allow you to schedule these items to automatically display at a future date.\n		</div>\n	</div>\n\n\n\n	<div class="row row-spaced panel form-section">\n		<div class="row">\n			<div class="col-d-6 col-12 form-section">\n			\n                <label for="name">Homepage Name</label><i title="This will not be shown to your customers. It is only a name for this particular set of text and product choices so that you can easily find it later." class="icon icon-tool-tip x-space-s"></i>\n                \n				<input type="text" id="name" name="name" value="'+(null==(__t=name)?"":__t)+'">\n			</div>\n            \n			',isDefault||(__p+='\n              \n                <!-- Code Tests Ends here -->\n                    \n                    \n			<div class="col-d-3 col-6 form-section">\n				<label for="start-date">Start Date</label><i title="This is the date you\'d like this set of products and text to start showing on your website." class="icon icon-tool-tip x-space-s"></i>\n				<div class="date-container">\n					<input type="text" id="start-date" name="start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\n				</div>\n			</div>\n			<div class="col-d-3 col-6 form-section">\n				<label for="end-date">End Date</label><i title="This is the date you\'d like this set of products and text to stop showing on your site." class="icon icon-tool-tip x-space-s"></i>\n				<div class="date-container">\n					<input type="text" id="end-date" name="end-date" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\n				</div>\n			</div>\n			'),__p+='\n		</div>\n	</div>\n\n	<div class="row row-spaced panel form-section">\n		<div class="row">\n			<div class="col-d-6 col-12 form-section">\n				<label for="headline">Headline</label><i title="This text will be the largest and most noticible text on your homepage. It should be short and attention grabbing." class="icon icon-tool-tip x-space-s"></i>\n				<div class="switch-input-container">\n					<input '+(null==(__t=headlineActive?"":"disabled")?"":__t)+' type="text" id="headline" name="headline" value="'+(null==(__t=headline)?"":__t)+'" class="switch-input-input">\n\n					<div class="switch-input-switch">\n						<input '+(null==(__t=headlineActive?"checked":"")?"":__t)+' type="checkbox" id="headline-active" name="headline-active" class="on-off-switch" />\n			            <label for="headline-active" class="on-off-switch-label">\n			                <div class="on-off-switch-state">on</div>\n			            </label>\n		        	</div>\n		        </div>\n			</div>\n                  <!-- Modifications Code Tests only, adding Start & End time-->\n                  \n                  <!-- Set Both Time Input Fields to on or Off Depending on Choice-->\n                  <div> \n\n\n\n                  </div>\n            \n                    \n			<div class="col-d-6 col-12 form-section">\n				<label for="subhead">Subhead</label><i title="This text is typically displayed beneath the headline text. It is smaller and usually gives more information related to the headline." class="icon icon-tool-tip x-space-s"></i>\n				<div class="switch-input-container">\n					<input '+(null==(__t=subheadActive?"":"disabled")?"":__t)+' type="text" id="subhead" name="subhead" value="'+(null==(__t=subhead)?"":__t)+'" class="switch-input-input">\n\n					<div class="switch-input-switch">\n						<input '+(null==(__t=subheadActive?"checked":"")?"":__t)+' type="checkbox" id="subhead-active" name="subhead-active" class="on-off-switch" />\n			            <label for="subhead-active" class="on-off-switch-label">\n			                <div class="on-off-switch-state">on</div>\n			            </label>\n		            </div>\n		        </div>\n			</div>\n		</div>\n\n		<div class="row">\n			<div class="col-d-6 col-12 form-section">\n				<label for="button-text">Button Text</label><i title="This text will show up as a button on your homepage. Customers can click this to navigate into the site." class="icon icon-tool-tip x-space-s"></i>\n				<div class="switch-input-container">\n					<input '+(null==(__t=buttonTextActive?"":"disabled")?"":__t)+' type="text" id="button-text" name="button-text" value="'+(null==(__t=buttonText)?"":__t)+'" class="switch-input-input">\n\n					<div class="switch-input-switch">\n						<input '+(null==(__t=buttonTextActive?"checked":"")?"":__t)+' type="checkbox" id="button-text-active" name="button-text-active" class="on-off-switch" />\n			            <label for="button-text-active" class="on-off-switch-label">\n			                <div class="on-off-switch-state">on</div>\n			            </label>\n		            </div>\n		        </div>\n			</div>\n			<div class="col-d-6 col-12 form-section">\n				<label for="button-link">Button Link</label><i title="Where would you like customers to go when they click the button? This is usually a category page, product page, or custom page." class="icon icon-tool-tip x-space-s"></i>\n\n				<input '+(null==(__t=buttonTextActive?"":"disabled")?"":__t)+' type="text" id="button-link" name="button-link" value="'+(null==(__t=buttonLink)?"":__t)+'">\n			</div>\n		</div>\n	</div>\n\n	<div id="featured-product"></div>\n</form>';
return __p}}),define("components/featured-product/templates/featured-product-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)if(bodyOnly){if(__p+='\r\n	<div class="row panel alert-panel hidden">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					You have reached the maximum number of products allowed.<br>Please remove products you have selected if you wish to add more.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="'+(null==(__t=disabled?"col-12":"col-7")?"":__t)+'">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<h4 class="title pull-left">'+(null==(__t=title)?"":__t)+'</h4>\r\n\r\n					<div id="view-control" class="pull-right">\r\n						<button type="button" id="list-view" class="icon icon-btn icon-colored icon-list fa-lg"></button>\r\n						<button type="button" id="grid-view" class="icon icon-btn icon-colored icon-category fa-lg active"></button>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div id="product-container" class="scroll-container">\r\n				<table id="product-table" class="table-list alternate hidden-alt">\r\n					<thead>\r\n						<tr>\r\n							<th class="col-2">Rank</th>\r\n							',__p+=disabled?'\r\n							<th class="col-4">Product</th>\r\n							<th class="col-6 left-align">Name</th>\r\n							':'\r\n							<th class="col-6">Product</th>\r\n							<th class="col-2">Edit</th>\r\n							<th class="col-2">Delete</th>\r\n							',__p+='\r\n						</tr>\r\n					</thead>\r\n\r\n					<!--  List active products -->\r\n					<tbody id="product-list"></tbody>\r\n\r\n					  <img id="loader-overlay" class="hidden" src="/images/loader-transparent-background.png" style="position: absolute; z-index: 900; left: 0px; top: 0px;">\r\n\r\n					  <img id="spinner-gif" class="hidden" src="/images/spinner.gif" style="position: absolute; z-index: 1000; left: 220px; top: 160px; bottom: 5px;">\r\n\r\n				</table>\r\n\r\n				<div id="product-grid" class="'+(null==(__t=disabled?"grid-6-closed":"grid-4-closed")?"":__t)+' hidden-alt clearfix"></div>\r\n			</div>\r\n		</div>\r\n\r\n\r\n\r\n		',!disabled){__p+='\r\n		<div class="col-5 form-section">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<h4 class="title pull-left">Product Search</h4>\r\n							<button type="button" id="filter-view" class="icon icon-btn icon-colored icon-filter icon-lg pull-right"></button>\r\n							<div id="product-search-checkboxes" class="search-filters">\r\n								<div class="row">\r\n									<div class="col-12">\r\n										<h3 class="pull-left no-margin product-filter-header">Filter by:</h3>\r\n										<button type="button" id="close-filter-view" class="icon icon-btn icon-x icon-lg pull-right"></button>\r\n									</div>\r\n								</div>\r\n\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Type</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n\r\n									<div class="row row-spaced">\r\n										<div class="col-6 center-align">\r\n											<label for="type-custom" class="filterButtonLabel">Custom</label>\r\n											<input class="fill-container-width" data-key="type" data-value="Custom" type="checkbox" id="type-custom" checked >\r\n										</div>\r\n\r\n										<div class="col-6 center-align">\r\n											<label for="type-Teleflora" class="filterButtonLabel">Teleflora</label>\r\n											<input class="fill-container-width filterButton" data-key="type" data-value="Teleflora" type="checkbox" id="type-Teleflora" checked>\r\n										</div>\r\n									</div>\r\n								</div>\r\n\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Status</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n\r\n									<div class="row row-spaced">\r\n										<div class="col-6 center-align">\r\n											<label for="status-active" class="filterButtonLabel">Active</label>\r\n											<input class="fill-container-width" data-key="featured" data-value="true" type="checkbox" id="status-active" checked>\r\n										</div>\r\n\r\n										<div class="col-6 center-align">\r\n											<label for="status-inactive" class="filterButtonLabel">Inactive</label>\r\n											<input class="fill-container-width" data-key="featured" data-value="false" type="checkbox" id="status-inactive" checked>\r\n										</div>\r\n									</div>\r\n								</div>\r\n								',primarySku&&(__p+='\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Price Points</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n\r\n									<div class="row row-spaced">\r\n										<div class="col-6 center-align">\r\n											<label for="price-point-primary" class="filterButtonLabel">>Primary</label>\r\n											<input class="fill-container-width" data-key="pricePoints" data-value="Primary" type="checkbox" id="price-point-primary" checked>\r\n										</div>\r\n\r\n										<div class="col-6 center-align">\r\n											<label for="price-point-all" class="filterButtonLabel">>All</label>\r\n											<input class="fill-container-width" data-key="pricePoints" data-value="All" type="checkbox" id="price-point-all" checked>\r\n										</div>\r\n									</div>\r\n								</div>\r\n								'),__p+='\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Category</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n									<div class="col-12 form-section">\r\n										<div class="select-container">\r\n											<select id="selectCategory" name="selectCategory">\r\n											<option selected hidden disabled value="">All Categories</option>\r\n											<option value="">All Categories</option>\r\n											';for(var i=0,j=allOccasions.length;j>i;++i)__p+='\r\n											<option value="'+(null==(__t=allOccasions[i].id)?"":__t)+'">'+(null==(__t=allOccasions[i].occasion+" | ID "+allOccasions[i].id)?"":__t)+"</option>\r\n											";__p+='\r\n											</select>\r\n										</div>\r\n									</div>\r\n								</div>\r\n\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="search-container no-margin">\r\n				<input id="product-search-input" type="text" placeholder="Product Search Terms">\r\n				<div class="scroll-container">\r\n					<table id="product-search-table" class="table-list hide-overflow">\r\n						<thead>\r\n							<tr>\r\n								<th data-attribute ="number" class="col-4 hidden">number</th>\r\n								<th data-attribute ="name" class="col-6 hidden">name</th>\r\n								<th data-attribute ="featured" class="col-2 hidden">active</th>\r\n							</tr>\r\n						</thead>\r\n					<!-- List all products -->\r\n					<tbody id="product-search-list" class="search-list"></tbody>\r\n					</table>\r\n				</div>\r\n				',selectAll&&(__p+='\r\n				<div class="row">\r\n					<div class="col-6 y-space-top-s pull-right right-align">\r\n					  \r\n						 <button type="button" class="btn-xs btn-submit" id="f-product-select-all"> Select All</button>\r\n					</div>					\r\n				</div>\r\n				'),__p+="				\r\n			</div>\r\n		</div>\r\n		"}__p+="\r\n	</div>\r\n"}else{if(__p+='\r\n<div class="row row-spaced panel">\r\n	<div class="row panel alert-panel hidden">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					You have reached the maximum number of products allowed.<br>Please remove products you have selected if you wish to add more.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Product Selection</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="'+(null==(__t=disabled?"col-12":"col-7")?"":__t)+'">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<h4 class="title pull-left">'+(null==(__t=title)?"":__t)+'</h4>\r\n\r\n					<div id="view-control" class="pull-right">\r\n						<button type="button" id="list-view" class="icon icon-btn icon-colored icon-list fa-lg"></button>\r\n						<button type="button" id="grid-view" class="icon icon-btn icon-colored icon-category fa-lg active"></button>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div id="product-container" class="scroll-container">\r\n				<table id="product-table" class="table-list alternate hidden-alt">\r\n					<thead>\r\n						<tr>\r\n							<th class="col-2">Rank</th>\r\n							',__p+=disabled?'\r\n							<th class="col-4">Product</th>\r\n							<th class="col-6 left-align">Name</th>\r\n							':'\r\n							<th class="col-6">Product</th>\r\n							<th class="col-2">Edit</th>\r\n							<th class="col-2">Delete</th>\r\n							',__p+='\r\n						</tr>\r\n					</thead>\r\n\r\n					<!--  List active products -->\r\n					<tbody id="product-list"></tbody>\r\n\r\n					  <img id="loader-overlay" class="hidden" src="/images/loader-transparent-background.png" style="position: absolute; z-index: 900; left: 0px; top: 0px;">\r\n\r\n					  <img id="spinner-gif" class="hidden" src="/images/spinner.gif" style="position: absolute; z-index: 1000; left: 220px; top: 160px; bottom: 5px;">\r\n\r\n				</table>\r\n\r\n				<div id="product-grid" class="'+(null==(__t=disabled?"grid-6-closed":"grid-4-closed")?"":__t)+' hidden-alt clearfix"></div>\r\n			</div>\r\n		</div>\r\n\r\n		',!disabled){__p+='\r\n		<div class="col-5 form-section">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<h4 class="title pull-left">Product Search</h4>\r\n							<button type="button" id="filter-view" class="icon icon-btn icon-colored icon-filter icon-lg pull-right"></button>\r\n							<div id="product-search-checkboxes" class="search-filters">\r\n								<div class="row">\r\n									<div class="col-12">\r\n										<h3 class="pull-left no-margin product-filter-header">Filter by:</h3>\r\n										<button type="button" id="close-filter-view" class="icon icon-btn icon-x icon-lg pull-right"></button>\r\n									</div>\r\n								</div>\r\n\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Type</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n\r\n									<div class="row row-spaced">\r\n										<div class="col-6 center-align">\r\n											<!-- When multiple featured Product Views are rendered within the same view, declare the filterButtonLabel class to fix filter button css -->\r\n											<label for="type-custom" class="filterButtonLabel">Custom</label>\r\n											<input class="fill-container-width" data-key="type" data-value="Custom" type="checkbox" id="type-custom" checked>\r\n										</div>\r\n\r\n										<div class="col-6 center-align">\r\n											<label for="type-Teleflora" class="filterButtonLabel">Teleflora</label>\r\n											<input class="fill-container-width" data-key="type" data-value="Teleflora" type="checkbox" id="type-Teleflora" checked>\r\n										</div>\r\n									</div>\r\n								</div>\r\n\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Status</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n\r\n									<div class="row row-spaced">\r\n										<div class="col-6 center-align">\r\n											<label for="status-active" class="filterButtonLabel">Active</label>\r\n											<input class="fill-container-width" data-key="featured" data-value="true" type="checkbox" id="status-active" checked>\r\n										</div>\r\n\r\n										<div class="col-6 center-align">\r\n											<label for="status-inactive" class="filterButtonLabel">Inactive</label>\r\n											<input class="fill-container-width" data-key="featured" data-value="false" type="checkbox" id="status-inactive" checked>\r\n										</div>\r\n									</div>\r\n								</div>\r\n\r\n								',primarySku&&(__p+='\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Price Points</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n\r\n									<div class="row row-spaced">\r\n										<div class="col-6 center-align">\r\n											<label for="price-point-primary" class="filterButtonLabel">Primary</label>\r\n											<input class="fill-container-width" data-key="pricePoints" data-value="Primary" type="checkbox" id="price-point-primary" checked>\r\n										</div>\r\n\r\n										<div class="col-6 center-align">\r\n											<label for="price-point-all" class="filterButtonLabel">All</label>\r\n											<input class="fill-container-width" data-key="pricePoints" data-value="All" type="checkbox" id="price-point-all" checked>\r\n										</div>\r\n									</div>\r\n								</div>\r\n								'),__p+='\r\n\r\n								<div class="row">\r\n									<div class="clearfix">\r\n										<div class="col-12">\r\n											<div class="row">\r\n												<div class="col-12">\r\n													<div class="panel-title product-filter-title">Category</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n									<div class="col-12 form-section">\r\n										<div class="select-container">\r\n											<select id="selectCategory" name="selectCategory">\r\n											<option selected hidden disabled value="">All Categories</option>\r\n											<option value="">All Categories</option>\r\n											';for(var i=0,j=allOccasions.length;j>i;++i)__p+='\r\n											<option value="'+(null==(__t=allOccasions[i].id)?"":__t)+'">'+(null==(__t=allOccasions[i].occasion+" | ID "+allOccasions[i].id)?"":__t)+"</option>\r\n											";__p+='\r\n											</select>\r\n										</div>\r\n									</div>\r\n								</div>\r\n\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="search-container no-margin">\r\n				<input id="product-search-input" type="text" placeholder="Product Search Terms">\r\n\r\n				<div class="scroll-container">\r\n					<table id="product-search-table" class="table-list hide-overflow">\r\n						<thead>\r\n							<tr>\r\n								<th data-attribute ="number" class="col-4 hidden">number</th>\r\n								<th data-attribute ="name" class="col-6 hidden">name</th>\r\n								<th data-attribute ="featured" class="col-2 hidden">active</th>\r\n							</tr>\r\n						</thead>\r\n					<!-- List all products -->\r\n					<tbody id="product-search-list" class="search-list"></tbody>\r\n					</table>\r\n				</div>\r\n				',selectAll&&(__p+='\r\n				<div class="row">\r\n					<div class="col-6 y-space-top-s pull-right right-align">\r\n					  \r\n						 <button type="button" class="btn-xs btn-submit" id="f-product-select-all"> Select All</button>\r\n					</div>					\r\n				</div>\r\n				'),__p+="				\r\n			</div>\r\n		</div>\r\n		"}__p+="\r\n	</div>\r\n</div>\r\n"}return __p}}),define("components/featured-product/templates/active-featured-product-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){var activeState;activeState=1==active?"list-item-active":"list-item-inactive",__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'" class="'+(null==(__t=activeState)?"":__t)+'">\r\n	<td>'+(null==(__t=rank)?"":__t)+"</td>\r\n	<td>"+(null==(__t=number)?"":__t)+"</td>\r\n	",__p+=disabled?'\r\n	<td class="left-align">'+(null==(__t=name)?"":__t)+"</td>\r\n	":'\r\n	<td>\r\n		<button type="button" class="icon icon-edit icon-btn icon-2x"></button>\r\n	</td>\r\n\r\n	<td>\r\n		<button type="button" class="icon icon-trash icon-btn icon-2x"></button>\r\n	</td>\r\n	',__p+="\r\n</tr>"}return __p}}),define("components/featured-product/templates/active-featured-product-grid-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){var activeState;activeState=1==active?"grid-item-active":"grid-item-inactive",__p+='<div data-id="'+(null==(__t=id)?"":__t)+'" class="grid-item hover-tip-overlay '+(null==(__t=activeState)?"":__t)+'">\r\n	<div class="hover-tip">\r\n		<div class="row row-spaced center-align">\r\n			'+(null==(__t=number)?"":__t)+'\r\n		</div>\r\n\r\n		<div class="row row-spaced center-align">\r\n			'+(null==(__t=name)?"":__t)+'\r\n		</div>\r\n	</div>\r\n	<img src="'+(null==(__t=imgA1)?"":__t)+'">\r\n\r\n	<div class="row bottom-overlay">\r\n		<div class="col-12">\r\n			<button type="button" class="icon icon-trash icon-btn fa-lg pull-left"></button>\r\n			<button type="button" class="icon icon-edit icon-btn fa-lg pull-right"></button>\r\n		</div>\r\n	</div>\r\n\r\n</div>'}return __p}}),define("components/featured-product/views/active-featured-product-view",["underscore","backbone","../templates/active-featured-product-list-tpl","../templates/active-featured-product-grid-tpl","global-events"],function(e,t,n,i,o){var r=t.View.extend({template:{list:n,grid:i},initialize:function(e){this.disabled=e.disabled,this.listenTo(this.model,"change:featured",this.remove),this.template=this.template[e.type],this.parent=e.parent},render:function(){var e=this.model.toJSON();return e.disabled=this.disabled,this.setElement(this.template(e)),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleEdit:function(){var e=this,t=e.$el.data("id");o.trigger("form:product-modal",{pid:t})},handleDelete:function(){if(!this.disabled){var e=this;e.$el.fadeOut(100,function(){e.model.set("featured",!1)}),this.parent.$productAlert.addClass("hidden")}}});return r}),define("components/featured-product/templates/all-featured-product-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="'+(null==(__t=disabled?"":"clickable")?"":__t)+" "+(null==(__t=featured?"added":"add-new")?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+' ">\r\n	<td class="left-align">'+(null==(__t=number)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=name)?"":__t)+'</td>\r\n	<td>\r\n		<button type="button" class="icon icon-btn '+(null==(__t=featured?"icon-added":"icon-add")?"":__t)+'"></button>\r\n	</td>\r\n</tr>';return __p}}),define("components/featured-product/views/all-featured-product-view",["underscore","backbone","../templates/all-featured-product-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(e){var t=this.model.toJSON();this.disabled=t.disabled=e.disabled,this.parent=e.parent,this.setElement(this.template(t)),this.$el.data("model",this.model),this.listenTo(this.model,"change:featured",this.handleChange),this.maxNumberProducts=this.parent.maxNumberProducts},render:function(){return this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$icon=this.$el.find(".icon")},events:{click:"handleAdd"},handleAdd:function(){var e=this;if(!this.disabled)if(this.model.get("featured"))this.model.set("featured",!1),this.parent.$productAlert.addClass("hidden");else{var t=this.parent.collection.where({featured:!0}).length;t<this.maxNumberProducts?this.model.set("featured",!0):(this.parent.$productAlert.removeClass("hidden"),setTimeout(function(){e.parent.$productAlert.fadeOut(0).addClass("hidden")},1e3))}},handleChange:function(e){var t=e.get("featured");t?(this.$icon.removeClass("icon-add"),this.$icon.addClass("icon-added")):(this.$icon.removeClass("icon-added"),this.$icon.addClass("icon-add"))}});return i}),define("components/featured-occasions/models/all-occasions-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,occasion:""}});return t}),define("components/featured-occasions/collections/all-occasions-collection",["backbone","../models/all-occasions-model"],function(e,t){var n=e.Collection.extend({url:"/mock/occasions.json",model:t});return new n}),define("custom/searchify",["jquery"],function(e){function t(t){var n,i,o;o=t.value.toLowerCase(),e(t).siblings(".search-list").children("li").each(function(){n=e(this),i=n.text().toLowerCase(),i.indexOf(o)>=0?e(this).removeClass("hidden"):e(this).addClass("hidden")})}return e.fn.searchify=function(){var e;this.on("keyup",function(n){e&&clearTimeout(e),e=setTimeout(t.bind(null,n.target),50)})},e}),define("components/featured-product/views/featured-product-view",["underscore","backbone","../templates/featured-product-tpl","./active-featured-product-view","./all-featured-product-view","components/featured-occasions/collections/all-occasions-collection","global-events","custom/searchify","jqueryui"],function(e,t,n,i,o,r,a){var s=t.View.extend({tagName:"div",template:n,initialize:function(e){var t=this;this.collection=e.collection,this.disabled=e.disabled===!0,this.maxNumberProducts=e.maxNumberProducts||999,this.selectAll=e.selectAll||!1,this.primarySku=e.primarySku||!1,obj={bodyOnly:e.bodyOnly===!0,title:e.title||"Category Products",disabled:this.disabled,selectAll:this.selectAll,primarySku:this.primarySku,allOccasions:[]},this.listenTo(this.collection,"change:featured change:rank",function(){this.addAllActive(),a.trigger("form:editing")}),t.id="undefined"==typeof e.id?"m-featured-products":e.id},id:self.id,render:function(){var e=this;return r.fetchCustom().done(function(){obj.allOccasions=r.toJSON(),e.$el.html(e.template(obj))}),this.collection.fetchCustom().done(function(){this.delegateEvents(),this.cacheElem(),this.showGridView(),this.addAllActive(),this.uiCheckBoxes(),this.disabled||(this.addAllListings(),this.sortListView(),this.sortGridView()),this.applyFilter()}.bind(this)),this},events:{"click #list-view":"showListView","click #grid-view":"showGridView","click #filter-view":"toggleFilterView","click #close-filter-view":"toggleFilterView",'change #product-search-checkboxes input[type="checkbox"]':"applyFilter","keyup #product-search-input":"handleSearchInput","change #selectCategory":"applyFilter","click #f-product-select-all":"toggleSelectAll"},cacheElem:function(){this.$allList=this.$el.find("#product-search-list"),this.$activeTable=this.$el.find("#product-table"),this.$activeList=this.$el.find("#product-list"),this.$activeGrid=this.$el.find("#product-grid"),this.$listBtn=this.$el.find("#list-view"),this.$gridBtn=this.$el.find("#grid-view"),this.$filterPanel=this.$el.find(".search-filters"),this.$filterBtn=this.$el.find("#filter-view"),this.$searchTable=this.$el.find("#product-search-table"),this.$prodBoxes=this.$el.find("#product-search-checkboxes"),this.$filterCheckBoxes=this.$el.find('#product-search-checkboxes input[type="checkbox"]'),this.$productAlert=this.$el.find(".alert-panel"),this.$activeContainer=this.$el.find("#product-container"),this.$catSearch=this.$el.find("#selectCategory"),this.$selectAll=this.$el.find("#f-product-select-all"),this.$icon=this.$el.find(".icon"),this.$LoaderImg=this.$el.find("#loader-overlay"),this.$Spinner=this.$el.find("#spinner-gif")},uiCheckBoxes:function(){this.$prodBoxes.buttonset()},inlineStyle:function(e,t){var n,i=e.attr("style");return i&&i.split(";").forEach(function(e){var i=e.split(":");$.trim(i[0])===t&&(n=i[1])}),n},handleUncheckSelectedProducts:function(){{var e=this;e.$searchTable.find("tbody > tr")}e.$searchTable.find("tbody > tr").each(function(){var e=$(this),t=e.data("model"),n=t.get("featured");n&&$(this).click()})},toggleSelectAll:function(){var e=this;e.$Spinner.removeClass("hidden"),e.$LoaderImg.removeClass("hidden");var t=e.$searchTable.find("tbody > tr");setTimeout(function(){e.handleUncheckSelectedProducts();for(var n=0;n<t.length;n++)"none"!==t[n].style.display&&t[n].click();e.$Spinner.addClass("hidden"),e.$LoaderImg.addClass("hidden")},50)},addListing:function(e){var t=new o({model:e,parent:this,disabled:this.disabled});t.parent=this,this.$allList.append(t.render().el)},addAllListings:function(){this.$allList.empty(),this.collection.each(this.addListing,this)},addActive:function(e){var t=new i({model:e,type:"list",disabled:this.disabled}),n=new i({model:e,type:"grid",disabled:this.disabled});this.$activeList.append(t.render().el),this.$activeGrid.append(n.render().el),n.parent=this,t.parent=this},addAllActive:function(){this.$activeList.empty(),this.$activeGrid.empty(),this.collection.getSortedByRank().forEach(this.addActive,this)},showListView:function(){this.$gridBtn.removeClass("active"),this.$listBtn.addClass("active"),this.$activeGrid.hide(),this.$activeTable.fadeIn(200)},showGridView:function(){this.$gridBtn.addClass("active"),this.$listBtn.removeClass("active"),this.$activeTable.hide(),this.$activeGrid.fadeIn(200)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},sortListView:function(){var e=this;e.$activeList.sortable({helper:e.helperFixRowWidth,containment:"parent",tolerance:"pointer",start:function(e,t){t.placeholder.height(t.item.height()),t.helper.addClass("active")},update:function(){e.$activeList.children().each(function(t){var n=$(this).data("id");e.collection.get(n).set("rank",t+1),e.addAllActive()})}})},sortGridView:function(){var e=this;e.$activeGrid.sortable({helper:e.helperFixRowWidth,containment:"parent",tolerance:"pointer",start:function(e,t){t.placeholder.height(t.item.height())},update:function(){e.$activeGrid.children().each(function(t){var n=$(this).data("id");e.collection.get(n).set("rank",t+1),e.addAllActive(),a.trigger("form:editing")})}})},toggleFilterView:function(){this.$filterPanel.fadeToggle(200),this.$filterBtn.toggleClass("active")},debounce:null,queryText:"",handleSearchInput:function(e){var t=this;t.debounce&&clearTimeout(t.debounce),t.debounce=setTimeout(function(){t.queryText=e.target.value.toLowerCase(),t.applyFilter()},100)},applyFilter:function(){var t,n,i=this;this.filterArray=[],0==i.primarySku&&(i.filterArray=i.filterArray.concat(i.collection.where({isBaseSku:!1}))),this.$filterCheckBoxes.each(function(){t=$(this),t.is(":checked")||(n={},n[t.data("key")]=t.data("value"),i.filterArray=i.filterArray.concat(i.collection.where(n)))}),this.$catSearch.val()&&""!==this.$catSearch.val&&(n={},n.categories=this.$catSearch.val(),catVal=this.$catSearch.val(),newQuery=i.collection.filter(function(t){return e.indexOf(t.get("categories"),catVal)>=0}),i.filterArray=i.filterArray.concat(newQuery)),this.$searchTable.find("tbody > tr").each(function(){var e=$(this),t=e.data("model");i.filterArray.indexOf(t)>-1||t.get("name").toLowerCase().indexOf(i.queryText)<0&&t.get("number").toLowerCase().indexOf(i.queryText)<0?e.hide():e.show()})}});return s}),define("content/category-sections/common/products-messaging/views/create-homepage-view",["backbone","../templates/create-homepage-tpl","components/featured-product/views/featured-product-view","../collections/homepage-collection","components/featured-product/collections/featured-product-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,render:function(){return this.featuredProductView&&this.featuredProductView.remove(),this.setElement(this.template(this.model.toJSON())),this.featuredProductView=new n({collection:new o(this.model.get("featuredProducts")),title:"Homepage Products",primarySku:!0,selectAll:!0}),this.delegateEvents(),this.cacheElem(),this.$featuredProduct.append(this.featuredProductView.render().el),this.valNewForm(),this.applySwitchInput(),this.applyDates(),this.applyToolTips(),this},cacheElem:function(){this.$featuredProduct=this.$el.find("#featured-product"),this.$name=this.$el.find("#name"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$headline=this.$el.find("#headline"),this.$headlineActive=this.$el.find("#headline-active"),this.$subhead=this.$el.find("#subhead"),this.$subheadActive=this.$el.find("#subhead-active"),this.$buttonText=this.$el.find("#button-text"),this.$buttonTextActive=this.$el.find("#button-text-active"),this.$buttonLink=this.$el.find("#button-link"),this.$form=this.$el,this.$tip=this.$el.find(".tooltip-change")},events:{"click #cancel-btn":"handleCancelClick","click #save-btn":"handleSaveClick","change .switch-input-switch .on-off-switch":"handleVal","change #button-text-active":"handleButtonSwitch","click #copy-btn":"handleCopy"},handleCancelClick:function(){r.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleCopy:function(){var e=this,t=e.model.deepClone();t.set({id:null,startDate:"",endDate:""}),e.parent.showCreateEdit(t)},handleSaveClick:function(){this.$form.valid()?(this.model.get("isDefault")||this.model.set({startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim()}),this.model.set({name:this.$name.val().trim(),headline:this.$headline.val().trim(),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),headlineActive:this.$headlineActive.is(":checked"),subhead:this.$subhead.val().trim(),subheadActive:this.$subheadActive.is(":checked"),buttonText:this.$buttonText.val().trim(),buttonTextActive:this.$buttonTextActive.is(":checked"),buttonLink:this.$buttonLink.val().trim(),featuredProducts:this.featuredProductView.collection.toJSON()}),i.get(this.model)||(this.model.set("id",new Date),i.add(this.model)),r.trigger("form:save",this.$tip),this.parent.showHome()):r.trigger("form:invalid",this.$tip)},valNewForm:function(){this.validator=this.$form.validate({rules:{name:"required","end-date":{required:"#start-date:filled"},headline:{required:"#headline-active:checked"},subhead:{required:"#subhead-active:checked"},"button-text":{required:"#button-text-active:checked"},"button-link":{required:"#button-text-active:checked",url:!0},"start-date":{required:!0},"end-date":{required:!0}}})},handleVal:function(e){var t=$(e.target),n=this.$form.validate(),i=t.parent().siblings(".switch-input-input");t.is(":checked")||n.element(i)},applySwitchInput:function(){this.$el.find(".switch-input-switch > .on-off-switch").on("change",function(e){var t=$(e.target),n=t.parent().siblings(".switch-input-input");t.is(":checked")?n.prop("disabled",!1):n.prop("disabled",!0)})},handleButtonSwitch:function(e){var t=$(e.target);t.is(":checked")?(this.$buttonLink.prop("disabled",!1),this.validator.element("#button-link")):(this.$buttonLink.prop("disabled",!0),this.$buttonLink.removeClass("error").parent().removeClass("error").find("#button-link-error").remove())},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new a}),define("content/category-sections/common/products-messaging/views/products-messaging-view",["backbone","./products-messaging-home-view","./create-homepage-view","jqueryui"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this
},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/merchandising/homepage-customization/templates/homepage-customization-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Homepage Customization</h2>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			This page will allow you to customize the homepage of your site. You can change the occasion shown on the homepage, the homepage tiles, and other items related to your chosen homepage layout. To choose your homepage layout you\'ll need to go to the "Homepage Settings" page.\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n	<!-- Add a place to put the featured occasion view -->\r\n	<div id="featured-occasion-container"></div>\r\n\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Shop Information\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<label for="f-shop-info">Shop Information</label><i title="You can enter any text you\'d like about your shop in this area. For example, a short description can help brand your shop as local, national, or family owned." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-3" name="f-shop-info" id="f-shop-info">'+(null==(__t=shopInfo)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Promotional Image or Video</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<label for="f-promo-title">Promotional Title </label><i title="This is the large title text for the section of your homepage containing this content." class="icon icon-tool-tip x-space-s"></i>\r\n				<input type="text" name="f-promo-title" id="f-promo-title" value="'+(null==(__t=promoTitle)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<label for="f-promo-text">Promotional Text </label><i title="This text allows you to describe your promotion in more detail." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-3" name="f-promo-text" id="f-promo-text">'+(null==(__t=promoText)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<label for="f-promo-element">Promotional Element</label><i title="You can choose if you\'d like to display and image or video next to your promotional text." class="icon icon-tool-tip x-space-s"></i>\r\n				<div class="select-container">\r\n					<select id="f-promo-element" name="f-promo-element">\r\n						<option selected disabled hidden value="'+(null==(__t=promoElement)?"":__t)+'">'+(null==(__t=promoElement)?"":__t)+'</option>\r\n						<option value="YouTube Video">YouTube Video</option>\r\n						<option value="Image">Image</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n\r\n			<div id="promo-youtube-input" class="form-section col-6 '+(null==(__t="YouTube Video"===promoElement?"":"hidden-alt")?"":__t)+'">\r\n				<label for="f-youtube-url">YouTube URL</label><i title="This is the web address to the youtube video you\'d like to display." class="icon icon-tool-tip x-space-s"></i>\r\n				<input id="f-youtube-url" name="f-youtube-url" type="text" value="'+(null==(__t=youtubeUrl)?"":__t)+'">\r\n			</div>\r\n\r\n			<div id="promo-image-input" class="col-6 '+(null==(__t="YouTube Video"===promoElement?"hidden-alt":"")?"":__t)+'">\r\n				<div class="label">Promotional Image<i title="This allows you to upload an image that will be displayed next to your promotional text." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<button id="f-promo-image-upload" type="button" class="btn btn-other">Select</button>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div id="promo-display" class="col-12 center-align">\r\n				<iframe class="'+(null==(__t="YouTube Video"===promoElement?"":"hidden-alt")?"":__t)+'" id="ytplayer" type="text/html" width="600" height="400"\r\n				  src="'+(null==(__t=youtubeUrl)?"":__t)+'"\r\n				  frameborder="0"></iframe>\r\n				<img id="promo-image" class="fit-container '+(null==(__t="YouTube Video"===promoElement?"hidden-alt":"")?"":__t)+'" src="'+(null==(__t=promoImageUrl)?"":__t)+'" alt="">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-6">\r\n				<label for="f-button-text">Button Text</label><i title="This text will appear as a button that users can click to navigate through your site." class="icon icon-tool-tip x-space-s"></i>\r\n				<div class="switch-input-container">\r\n					<input '+(null==(__t=buttonTextActive?"":"disabled")?"":__t)+' type="text" id="f-button-text" name="f-button-text" value="'+(null==(__t=buttonText)?"":__t)+'" class="switch-input-input">\r\n\r\n					<div class="switch-input-switch">\r\n						<input '+(null==(__t=buttonTextActive?"checked":"")?"":__t)+' type="checkbox" id="f-button-text-active" name="f-button-text-active" class="on-off-switch" />\r\n			            <label for="f-button-text-active" class="on-off-switch-label">\r\n			                <div class="on-off-switch-state">on</div>\r\n			            </label>\r\n		            </div>\r\n		        </div>\r\n			</div>\r\n\r\n			<div class="col-6 form-section">\r\n				<label for="f-button-link">Button Link</label><i title="Where would you like the customer to go when they click the button?" class="icon icon-tool-tip x-space-s"></i>\r\n				<input '+(null==(__t=buttonTextActive?"":"disabled")?"":__t)+' type="text" id="f-button-link" name="f-button-link" value="'+(null==(__t=buttonLink)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Shop Value Icons</div>\r\n			</div>\r\n		</div>\r\n\r\n	    <div id="shop-value-icon-container" class="row"></div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Homepage Tile</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-tile-link">Tile Link</label><i class="icon icon-tool-tip x-space-s" title="This is the location a customers will be directed to when they click this tile."></i>\r\n				<input type="text" id="f-tile-link" name="f-tile-link" value="'+(null==(__t=tileLink)?"":__t)+'">\r\n			</div>\r\n			<div class="col-6">\r\n				<label for="f-tile-title">Title</label><i class="icon icon-tool-tip x-space-s" title="This will be the large text displayed on the tile itself. Category or product names are common for this area."></i>\r\n				<input type="text" id="f-tile-title" name="f-tile-title" value="'+(null==(__t=tileTitle)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<label for="f-shop-now-text">Shop Now Text</label><i class="icon icon-tool-tip x-space-s" title="This is the small text displayed below the title text. Usually it is something simple, for example, shop now."></i>\r\n				<input type="text" id="f-shop-now-text" name="f-shop-now-text" value="'+(null==(__t=shopNowText)?"":__t)+'">\r\n			</div>\r\n			<div class="col-6">\r\n				<div class="label">Tile Image<i title="This allows you to upload the image to use for this tile." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<button id="f-tile-image-upload" type="button" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-sr"></button>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- <div id="tile-display" class="row row-spaced">\r\n			<div class="col-12 center-align">\r\n				<img class="fit-container" id="tile-image" src="'+(null==(__t=tileImageUrl)?"":__t)+'" alt="">\r\n			</div>\r\n		</div> -->\r\n	</div>';return __p}}),define("content/category-sections/merchandising/homepage-customization/models/homepage-customization-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-homepage-customization.json",defaults:{shopInfo:"",promoText:"",promoElement:"YouTube Video",youtubeUrl:"",promoTitle:"",promoImageUrl:"",buttonText:"",buttonTextActive:!0,buttonLink:"",tileLink:"",tileTitle:"",shopNowText:"",tileImageUrl:""}});return new t}),define("components/featured-occasions/templates/featured-occasion-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">'+(null==(__t=title)?"":__t)+'</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<button type="button" id="add-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Occasion</button>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr id="sort-header">\r\n						<th class="col-4 left-align indented-l">Occasion <button type="button" data-attribute="occasion" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2">Start Date <button type="button" data-attribute="startDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n                        \r\n						<th class="col-2">End Date <button type="button" data-attribute="endDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n                    <!-- RE-EDIT   <th class="col-2">Start Time <button type="button" data-attribute="startTime" class="icon icon-btn icon-sort sort-btn"></button> </th>\r\n                        <th class="col-2">End Time <button type="button" data-attribute="endTime" class="icon icon-btn icon-sort sort-btn"></button> </th>\r\n-->\r\n						<th class="col-2">Edit</th>\r\n						<th class="col-2">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="occasion-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>';return __p}}),define("components/featured-occasions/models/occasion-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,isDefault:!1,occasion:"",type:"custom",label:"",text:"",viewAllText:"",startDate:"",endDate:"",sequence:1/0}});return t}),define("components/featured-occasions/templates/occasion-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr class="'+(null==(__t=isDefault?"active":"")?"":__t)+'" data-sequence="'+(null==(__t=sequence)?"":__t)+'">\r\n	<td class="left-align indented-l">'+(null==(__t=isDefault?"Default ("+occasion+")":occasion)?"":__t)+"</td>\r\n	<td>"+(null==(__t=startDate)?"":__t)+"</td>\r\n	<td>"+(null==(__t=endDate)?"":__t)+'</td>\r\n	<td><button type="button" class="icon icon-btn icon-2x icon-edit"></button></td>\r\n	<td>\r\n		',isDefault||(__p+=' \r\n			<button type="button" class="icon icon-btn icon-2x icon-trash"></button> \r\n		'),__p+="\r\n	</td>\r\n</tr>\r\n";return __p}}),define("components/featured-occasions/views/occasion-view",["underscore","backbone","../templates/occasion-tpl","global-events"],function(e,t,n,i){var o=t.View.extend({template:n,initialize:function(e){var t=this;t.parent=e.parent,t.collection=t.parent.collection,t.listenTo(t.collection,"remove",function(e){e===t.model&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){i.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return o}),define("components/featured-occasions/views/featured-occasion-view",["backbone","../templates/featured-occasion-tpl","../models/occasion-model","./occasion-view"],function(e,t,n,i){var o=e.View.extend({tagName:"div",id:"m-featured-occasions",template:t,initialize:function(e){var t=this;t.options=e},render:function(){var e=this;return e.$el.html(e.template(e.options)),this.delegateEvents(),this.cacheElem(),e.noText=e.options.noText||!1,e.title=e.options.title||"",this.collection=this.parent.occasionCollection,this.stopListening(),this.listenTo(this.collection,"sort",this.addAllOccasions),this.collection.fetchCustom().done(this.addAllOccasions.bind(this)),this},cacheElem:function(){this.$occasionList=this.$el.find("#occasion-list"),this.$sortButtons=this.$el.find(".sort-btn")},events:{"click #add-btn":"handleNewBtn","click .sort-btn":"handleSort"},addOccasion:function(e){var t=new i({model:e,parent:this});this.$occasionList.append(t.render().el)},addAllOccasions:function(){this.$occasionList.empty(),this.collection.each(this.addOccasion,this)},handleNewBtn:function(){this.handleEdit(new n)},handleEdit:function(e){this.parent.showCreateEdit(e)},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),this.collection.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),this.collection.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),this.collection.changeSort(n,"ascending")),this.collection.sort()}});return new o}),define("text!content/category-sections/merchandising/homepage-customization/templates/shop-value-icons-tpl.html",[],function(){return'<div id="shop-value-icons">\r\n	<div class="col-6">\r\n		<div class="row row-spaced">\r\n			<div class="col-12"><strong>Featured Icons</strong></div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div id="active-items" class="grid-2-closed clearfix"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="col-6">\r\n		<div class="row row-spaced">\r\n	  		<div class="col-12"><strong>Value Icons</strong></div>\r\n		</div>\r\n	    <div class="row row-spaced">\r\n	    	<div class="col-12">\r\n	        	<ul id="all-items" class="listing"></ul>\r\n	      	</div>\r\n	    </div>\r\n	</div>\r\n</div>'}),define("content/category-sections/merchandising/homepage-customization/models/shop-value-icons-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,name:"",imgUrl:"",active:!1}});return t}),define("content/category-sections/merchandising/homepage-customization/collections/shop-value-icons-collection",["backbone","../models/shop-value-icons-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-shop-value-icons.json",model:t,initialize:function(){var e=this;e.listenTo(e,"change:active",function(t){var n;t.get("active")?(t.set("rank",-1),n=e.getSortedByRank(),t.set("rank",n[n.length-1].get("rank")+1)):e.setRank()})},getSortedByRank:function(){return this.where({active:!0}).sort(function(e,t){return e.get("rank")-t.get("rank")})},setRank:function(){var e=this.getSortedByRank().map(function(e,t){return e.set("rank",t+1),e});this.set(e,{remove:!1})},comparator:function(e){return e.get("rank")}});return new n}),define("content/category-sections/merchandising/homepage-customization/templates/active-item-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div data-id="'+(null==(__t=id)?"":__t)+'" class="grid-item">\r\n	<div class="center-align">\r\n		<div><img src="'+(null==(__t=imgUrl)?"":__t)+'" alt=""></div>\r\n		<strong>'+(null==(__t=name)?"":__t)+'</strong>\r\n	</div>\r\n	\r\n	<button type="button" class="icon icon-btn icon-trash icon-lg"></button>\r\n</div>';return __p}}),define("content/category-sections/merchandising/homepage-customization/views/active-item-view",["underscore","backbone","../templates/active-item-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.listenTo(this.model,"change:active",this.remove)},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){this.model.set("active",!1)}});return i}),define("content/category-sections/merchandising/homepage-customization/templates/all-item-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<li class="clickable">'+(null==(__t=name)?"":__t)+' <button type="button" class="icon icon-btn '+(null==(__t=active?"icon-added":"icon-add")?"":__t)+' pull-right"></button></li>\r\n';return __p}}),define("content/category-sections/merchandising/homepage-customization/views/all-item-view",["underscore","backbone","../templates/all-item-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.setElement(this.template(this.model.toJSON())),this.listenTo(this.model,"change:active",this.handleChange)},render:function(){return this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$icon=this.$el.find(".icon")},events:{click:"toggleAdded"},toggleAdded:function(){this.model.set("active",!this.model.get("active"))},handleChange:function(e){var t=e.get("active");t?(this.$icon.removeClass("icon-add"),this.$icon.addClass("icon-added")):(this.$icon.removeClass("icon-added"),this.$icon.addClass("icon-add"))}});return i}),define("content/category-sections/merchandising/homepage-customization/views/shop-value-icons-view",["backbone","text!../templates/shop-value-icons-tpl.html","../collections/shop-value-icons-collection","./active-item-view","./all-item-view","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,initialize:function(){this.setElement(this.template)},render:function(){var e=this;return n.fetchCustom().done(function(){e.collection=n.deepClone(),e.stopListening(),e.listenTo(e.collection,"change:active",function(){r.trigger("form:editing"),e.addAllActive()}),e.cacheElem(),e.addAllItems(),e.addAllActive(),e.applyTooltips(),e.applySortable(e.$activeItems,this.collection)}.bind(e)),e},cacheElem:function(){this.$allItems=this.$el.find("#all-items"),this.$activeItems=this.$el.find("#active-items"),this.$tip=this.$el.find(".tooltip-change")},addItem:function(e){var t=new o({model:e});this.$allItems.append(t.render().el)},addAllItems:function(){this.$allItems.empty(),this.collection.each(this.addItem,this)},addActive:function(e){var t=new i({model:e});this.$activeItems.append(t.render().el)},addAllActive:function(){this.$activeItems.empty(),this.collection.getSortedByRank().forEach(this.addActive,this)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(e,t){var n=this;e.sortable({helper:n.helperFixRowWidth,delay:100,tolerance:"pointer",items:"> .grid-item",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.children().each(function(e){var n=$(this).data("id");t.get(n).set("rank",e+1)}),t.sort(),n.addAllActive(),r.trigger("form:editing")}})},save:function(){n.set(this.collection.toJSON())},applyTooltips:function(){this.$el.find(".icon-federated").tooltip()}});return new a}),define("content/category-sections/merchandising/homepage-customization/views/homepage-customization-home-view",["backbone","../templates/homepage-customization-home-tpl","../models/homepage-customization-model","components/featured-occasions/views/featured-occasion-view","./shop-value-icons-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"form",id:"p-homepage-customization",template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.$featuredOccasionContainer.append(i.render().el),e.$shopValueIconContainer.append(o.render().el),e.applySwitchInput(),e.listenYoutubeTyping(),e.applyToolTips(),e.validateForm()}),e},cacheElem:function(){this.$featuredOccasionContainer=this.$el.find("#featured-occasion-container"),this.$shopValueIconContainer=this.$el.find("#shop-value-icon-container"),this.$shopInfo=this.$el.find("#f-shop-info"),this.$promoText=this.$el.find("#f-promo-text"),this.$promoElement=this.$el.find("#f-promo-element"),this.$promoImageUrl=this.$el.find("#f-promo-image-upload"),this.$youtubeUrlInput=this.$el.find("#f-youtube-url"),this.$youtubeUrl=this.$el.find("#youtube-url"),this.$buttonText=this.$el.find("#f-button-text"),this.$buttonTextActive=this.$el.find("#f-button-text-active"),this.$buttonLink=this.$el.find("#f-button-link"),this.$tileLink=this.$el.find("#f-tile-link"),this.$tileTitle=this.$el.find("#f-tile-title"),this.$tileImage=this.$el.find("#tile-image"),this.$shopNowText=this.$el.find("#f-shop-now-text"),this.$promoImage=this.$el.find("#promo-image"),this.$promoYoutube=this.$el.find("#ytplayer"),this.$promoImageInput=this.$el.find("#promo-image-input"),this.$promoYoutubeInput=this.$el.find("#promo-youtube-input"),this.$tip=this.$el.find(".tooltip-change")},events:{"change #f-button-text-active":"handleButtonSwitch","change #f-promo-element":"handlePromoElementChange","click #f-promo-image-upload":"handlePromoImageUpload","click #f-tile-image-upload":"handleTileImageUpload","blur #f-youtube-url":"handleYoutubeUrlChange","keyup #f-youtube-url":"listenYoutubeTyping","click #save-btn":"handleSave"},handleSave:function(){this.editForm.valid()&&(n.set({shopInfo:this.$shopInfo.val().trim(),promoText:this.$promoText.val().trim(),promoElement:this.$promoElement.find("option:selected").val(),youtubeUrl:this.$youtubeUrlInput.val().trim(),promoImageUrl:this.$promoImage.prop("src"),buttonText:this.$buttonText.val().trim(),buttonTextActive:this.$buttonTextActive.is(":checked"),buttonLink:this.$buttonLink.val().trim(),tileLink:this.$tileLink.val().trim(),tileTitle:this.$tileTitle.val().trim(),shopNowText:this.$shopNowText.val().trim(),tileImageUrl:this.$tileImage.prop("src")}),r.trigger("form:save",this.$tip),o.save())},handlePromoElementChange:function(){var e=this;"YouTube Video"!==this.$promoElement.find("option:selected").val()?(e.$promoYoutubeInput.hide(0,function(){e.$promoImageInput.fadeIn(200)}),e.$promoYoutube.hide(0,function(){e.$promoImage.fadeIn(200)})):(e.$promoImageInput.hide(0,function(){e.$promoYoutubeInput.fadeIn(200)}),e.$promoImage.hide(0,function(){e.$promoYoutube.fadeIn(200)}))},urlExists:function(e,t){$.ajax({type:"HEAD",url:e,success:function(){t(!0)},error:function(){t(!1)}})},handleYoutubeUrlChange:function(){var e=this,t=this.$youtubeUrlInput.val(),n=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,i=t.match(n);i&&11==i[7].length&&(yt_id=i[7],e.urlExists("http://gdata.youtube.com/feeds/api/videos/"+yt_id,function(t){t&&(e.$promoYoutube.prop("src","http://www.youtube.com/embed/"+yt_id),e.$youtubeUrlInput.val("http://www.youtube.com/embed/"+yt_id))}))},debounce:null,listenYoutubeTyping:function(e){var t=this;t.debounce&&clearTimeout(t.debounce),t.debounce=setTimeout(function(){t.handleYoutubeUrlChange(e)},1e3)},handleButtonSwitch:function(e){var t=$(e.target);t.is(":checked")?this.$buttonLink.prop("disabled",!1):this.$buttonLink.prop("disabled",!0)},handlePromoImageUpload:function(){var e=this;r.trigger("form:image-upload",{cb:function(t){e.$promoImage.prop("src",t)},active:e.$promoImage.prop("src"),name:"Promotional"})},handleTileImageUpload:function(){var e=this;r.trigger("form:image-upload",{cb:function(t){e.$tileImage.prop("src",t)},active:e.$tileImage.prop("src"),name:"Tile"})},applySwitchInput:function(){this.$el.find(".switch-input-switch > .on-off-switch").on("change",function(e){var t=$(e.target);t.is(":checked")?t.parent().siblings(".switch-input-input").prop("disabled",!1):t.parent().siblings(".switch-input-input").prop("disabled",!0)})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.editForm=this.$el.validate({rules:{"f-youtube-url":{youtube:!0},"f-button-link":{url3:!0},"f-tile-link":{url3:!0}}})}});return new a}),define("components/featured-occasions/templates/create-edit-occasion-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<form id="create-edit-form" class="row row-spaced panel form-section">\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Featured Occasion</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="pull-right">\r\n				<button type="button" id="cancel-btn" type="button" class="btn btn-other x-space-s">Cancel</button>\r\n				<button type="button" id="save-btn" type="button" class="btn btn-submit pull-right">\r\n					',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n				</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-occasion">Occasion</label><i title="Use the dropdown to select which occasion you would like featured." class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="select-container">\r\n			    <select id="f-occasion" name="f-occasion">\r\n			        ';for(var i=0,j=allOccasions.length;j>i;++i)__p+='\r\n			        	<option value="'+(null==(__t=allOccasions[i].id)?"":__t)+'" '+(null==(__t=allOccasions[i].occasion===occasion?"selected":"")?"":__t)+">"+(null==(__t=allOccasions[i].occasion+"&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;ID "+allOccasions[i].id+"&#160;&#160;&#160;&#160;|&#160;&#160;&#160;"+allOccasions[i].type)?"":__t)+"</option>\r\n			        ";__p+='\r\n			    </select>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-occasion-label">Occasion Label</label><i title="What should this occasion say? This is what the online customer will see." class="icon icon-tool-tip x-space-s"></i>\r\n			<input type="text" id="f-occasion-label" name="f-occasion-label" value="'+(null==(__t=label)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n	',noText||(__p+='\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-occasion-text">Occasion Text</label><i title="Use this to give the online customers an idea of what this category is all about." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea class="size-2" name="f-occasion-text" id="f-occasion-text">'+(null==(__t=text)?"":__t)+"</textarea>\r\n		</div>\r\n	</div>\r\n	"),__p+='\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-view-all-text">View All Text</label><i title="What would you like the link to the category to say?" class="icon icon-tool-tip x-space-s"></i>\r\n			<input type="text" id="f-view-all-text" name="f-view-all-text" value="'+(null==(__t=viewAllText)?"":__t)+'">\r\n		</div>\r\n		',isDefault||(__p+='\r\n		<div class="col-3 form-section">\r\n			<label for="f-start-date">Start Date</label><i title="When you want to start featuring this category?" class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n				<input type="text" id="f-start-date" name="f-start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<label for="f-end-date">End Date</label><i title="When do you want to stop featuring this category?" class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n				<input type="text" id="f-end-date" name="f-end-date" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		'),__p+="\r\n	</div>\r\n</form>"}return __p}}),define("components/featured-occasions/views/create-edit-occasion-view",["backbone","../templates/create-edit-occasion-tpl","../collections/all-occasions-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=e.View.extend({tagName:"div",template:t,initialize:function(e){var t=this;t.options=e},render:function(){var e=this;return this.collection=this.parent.occasionCollection,e.noText=e.options.noText||!1,n.fetchCustom().done(function(){this.$el.html(this.template(_.extend(this.model.toJSON(),{allOccasions:n.toJSON()},this.templateData={noText:e.options.noText}))),this.delegateEvents(),this.cacheElem(),this.applyDates(),this.applyToolTips(),this.validateForm()}.bind(this)),this},cacheElem:function(){this.$occasion=this.$el.find("#f-occasion"),this.$label=this.$el.find("#f-occasion-label"),this.$text=this.$el.find("#f-occasion-text"),this.$viewAllText=this.$el.find("#f-view-all-text"),this.$startDate=this.$el.find("#f-start-date"),this.$endDate=this.$el.find("#f-end-date"),this.$createEditForm=this.$el.find("#create-edit-form")},events:{"click #cancel-btn":"handleCancelClick","click #save-btn":"handleSaveClick"},handleCancelClick:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveClick:function(){var e;this.$createEditForm.valid()&&(e=this.$occasion.find("option:selected").val().trim(),this.model.get("isDefault")||this.model.set({startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim()}),this.model.set({occasion:n.get(e).get("occasion"),occasionId:e,label:this.$label.val().trim(),text:this.$text.val().trim(),viewAllText:this.$viewAllText.val().trim()}),this.collection.get(this.model)||(this.model.set("id",(new Date).getTime()),this.collection.add(this.model)),i.trigger("form:save"),this.parent.showHome())},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){var e=this;e.$createEditForm.validate({rules:{"f-occasion":{required:function(){return!e.$occasion.find("option:selected").val().trim()}},"f-start-date":{dateCustom:!0,required:!0},"f-end-date":{dateCustom:!0,required:!0},"f-occasion-label":"required","f-occasion-text":"required","f-view-all-text":"required"}})}});return new o}),define("components/featured-occasions/collections/occasion-collection",["backbone","../models/occasion-model"],function(e,t){var n=e.Collection.extend({model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1
}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)},initialize:function(e){this.url=e&&e.url||"/mock/user-occasions.json"}});return n}),define("content/category-sections/merchandising/homepage-customization/views/homepage-customization-view",["backbone","./homepage-customization-home-view","components/featured-occasions/views/featured-occasion-view","components/featured-occasions/views/create-edit-occasion-view","components/featured-occasions/collections/occasion-collection","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",initialize:function(){t.parent=this,this.occasionCollection=new o},regions:{visible:null},render:function(){return n.options={title:"Featured Occasion"},n.parent=this,i.parent=this,i.options={noText:!1},this.replaceVisible(t.render()),this},replaceVisible:function(e){e&&this.regions.visible!==e&&(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){r.trigger("form:cancel",function(){i.model=e,this.replaceVisible(i)}.bind(this))}});return new a}),define("content/category-sections/common/homepage-settings/templates/homepage-settings-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Homepage Settings</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage the settings of your homepage. Select the layout you want to use, choose how many products you want to feature, and more!\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Homepage Layout</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div id="homepage-layout-container" class="row row-spaced"></div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="panel-title">Homepage Featured Items</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-4 form-section">\r\n					<label for="f-featured-item-count">Featured Item Count</label><i class="icon icon-tool-tip x-space-s" title="Select how many items you\'d like to feature on your homepage."></i>\r\n					<div class="select-container">\r\n				    <select id="f-featured-item-count" name="f-featured-item-count">\r\n				        <option selected disabled hidden value="'+(null==(__t=featuredItemCount)?"":__t)+'">'+(null==(__t=featuredItemCount)?"":__t)+"</option>\r\n				        ";for(var i=0,j=activeLayout.suggestedNumber;j>i;++i)__p+='\r\n				        <option value="'+(null==(__t=i+1)?"":__t)+'">'+(null==(__t=i+1)?"":__t)+"</option>\r\n				        ";__p+='\r\n				    </select>\r\n					</div>\r\n				</div>\r\n				<div class="col-4">\r\n					<div class="label">Suggested Number of Items<i class="icon icon-tool-tip x-space-s" title="We think the homepage looks best with '+(null==(__t=activeLayout.suggestedNumber)?"":__t)+' featured products."></i></div>\r\n					<div id="suggested-count-display" class="y-space-s btn btn-other text-2x center-align">'+(null==(__t=activeLayout.suggestedNumber)?"":__t)+'</div>\r\n				</div>\r\n				<div class="col-4">\r\n					<div class="label">Maximum Number of Items<i class="icon icon-tool-tip x-space-s" title="This is the maximum number of items you can feature on your homepage with the layout you selected."></i></div>\r\n					<div id="max-count-display" class="y-space-s btn btn-other text-2x center-align">'+(null==(__t=activeLayout.maxNumber)?"":__t)+'</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Homepage Footer Text<i class="icon icon-tool-tip x-space-s" title="Not sure about our default homepage footer? You can write your own footer here!" class="icon icon-tool-tip x-space-s"></i></div>\r\n		</div>\r\n	</div>\r\n	<div class="row">\r\n		<div class="col-12 form-section">\r\n			<textarea class="size-2" name="f-homepage-footer-text" id="f-homepage-footer-text">'+(null==(__t=homepageFooterText)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<div class="label">Display Default SEO Text</div>\r\n			<input '+(null==(__t=defaultFooter?"checked":"")?"":__t)+' type="checkbox" id="f-defaultFooter" name="f-defaultFooter" class="on-off-switch" />\r\n			<label for="f-defaultFooter" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</div>	\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Homepage Personalization</div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<div class="label">Enable Personalization <i class="icon icon-tool-tip x-space-s" title="Enable Homepage Personalization to personalize your homepage for your registered shoppers." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=personalization?"checked":"")?"":__t)+' type="checkbox" id="f-personalization" name="f-personalization" class="on-off-switch" />\r\n			<label for="f-personalization" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</div>	\r\n</div>'}return __p}}),define("content/category-sections/common/homepage-settings/models/homepage-settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-homepage-settings.json",defaults:function(){return{homepageFooterText:"",featuredItemCount:0,defaultFooter:!0,personalization:!0,featuredLayout:{}}}});return new t}),define("components/current-layout/templates/current-layout-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-5">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<h3 class="title pull-left">Current '+(null==(__t=type)?"":__t)+' Layout</h3>\r\n			<i title="\r\n				'+(null==(__t="Email"===type?"This is the way your emails look when they are sent out. If you aren't sure about this layout, you can select a different on the right.":"")?"":__t)+"\r\n				"+(null==(__t="Homepage"===type?"Use this to choose which layout you want to use. You can see the different options below.":"")?"":__t)+'\r\n				" class="icon icon-tool-tip x-space-s">\r\n			</i>\r\n		</div>\r\n	</div>\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="display-container"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="col-7">\r\n	<h3 class="title">Layout Options</h3>\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div id="layout-container" class="grid-3-closed scroll-container"></div>\r\n		</div>\r\n	</div>\r\n</div>';return __p}}),define("components/current-layout/templates/layout-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="grid-item '+(null==(__t=active?"active":"")?"":__t)+'">\r\n	<h4 class="no-margin wrap-text">'+(null==(__t=name)?"":__t)+'</h4>\r\n	<img class="fit-container-width" src="'+(null==(__t=imgUrl)?"":__t)+'" alt="">	\r\n</div>\r\n';return __p}}),define("components/current-layout/views/layout-view",["underscore","backbone","../templates/layout-tpl","global-events"],function(e,t,n,i){var o=t.View.extend({template:n,initialize:function(e){this.parent=e.parent,this.listenTo(this.model,"change:active",this.changeActive)},render:function(){return this.setElement(this.template(this.model.toJSON())),this},events:{click:"displayActive"},displayActive:function(){this.parent.cb&&this.parent.cb(this.model),this.parent.setAllInactive(),this.parent.displayActive(this.model.get("imgUrl")),this.model.set("active",!0),i.trigger("form:editing")},changeActive:function(){this.model.get("active")?this.$el.addClass("active"):this.$el.removeClass("active")}});return o}),define("components/current-layout/views/current-layout-view",["backbone","../templates/current-layout-tpl","./layout-view","jqueryui"],function(e,t,n){var i=e.View.extend({tagName:"div",template:t,initialize:function(e){this.type=e.type,this.collection=e.collection,this.cb=e.cb},render:function(){var e=this;return e.collection.fetchCustom().done(function(){var t=e.collection.getActive()[0];e.$el.html(e.template({type:e.type})),e.delegateEvents(),e.cacheElem(),e.addAllLayouts(),e.displayActive(t&&t.get("imgUrl")),e.applyToolTips()}),e},cacheElem:function(){this.$layoutContainer=this.$el.find("#layout-container"),this.$displayContainer=this.$el.find(".display-container")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},addLayout:function(e){var t=new n({model:e,parent:this});this.$layoutContainer.append(t.render().el)},addAllLayouts:function(){this.$layoutContainer.empty(),this.collection.each(this.addLayout,this)},setAllInactive:function(){this.collection.setAllInactive()},displayActive:function(e){this.$displayContainer.empty(),e&&this.$displayContainer.append('<img class="fit-container" src="'+e+'">')}});return i}),define("components/current-layout/models/layout-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:"",name:"",imgUrl:"",active:!1}});return t}),define("content/category-sections/common/homepage-settings/collections/homepage-layout-collection",["backbone","components/current-layout/models/layout-model"],function(e,t){var n=e.Collection.extend({url:"/mock/homepage-layouts.json",model:t,getActive:function(){return this.where({active:!0})},setAllInactive:function(){this.getActive().forEach(function(e){e.set("active",!1)})}});return n}),define("content/category-sections/common/homepage-settings/views/homepage-settings-view",["underscore","backbone","../templates/homepage-settings-tpl","../models/homepage-settings-model","components/current-layout/views/current-layout-view","../collections/homepage-layout-collection","global-events","jqueryval"],function(e,t,n,i,o,r,a){var s=t.View.extend({tagName:"form",id:"m-hompeage-settings",template:n,render:function(){var e=this;return i.fetchCustom().done(function(){e.currentLayoutView=new o({type:"Homepage",collection:new r(i.get("featuredLayout")),cb:e.updateFeaturedCounts.bind(e)});var t=i.toJSON();t.activeLayout=i.get("featuredLayout"),e.$el.html(e.template(t)),e.cacheElem(),e.delegateEvents(),e.$homepageLayoutContainer.append(e.currentLayoutView.render().el)}),e},events:{"click #save-btn":"handleSave"},cacheElem:function(){this.$homepageLayoutContainer=this.$el.find("#homepage-layout-container"),this.$featuredItemCount=this.$el.find("#f-featured-item-count"),this.$homepageFooterText=this.$el.find("#f-homepage-footer-text"),this.$maxCountDisplay=this.$el.find("#max-count-display"),this.$suggestedCountDisplay=this.$el.find("#suggested-count-display"),this.$tip=this.$el.find(".tooltip-change")},handleSave:function(){i.set({homepageFooterText:this.$homepageFooterText.val().trim(),featuredItemCount:this.$featuredItemCount.find("option:selected").val(),featuredLayout:this.currentLayoutView.collection.where({active:!0})[0].toJSON()}),a.trigger("form:save",this.$tip)},updateFeaturedItemSelect:function(e){this.$featuredItemCount.empty();for(var t,n=document.createDocumentFragment(),i=0;e>i;++i)t=document.createElement("option"),t.value=i+1,t.text=i+1,n.appendChild(t);this.$featuredItemCount.append(n),this.$featuredItemCount.val(e)},updateFeaturedCounts:function(e){this.activeLayout=e;var t=e.get("maxNumber"),n=e.get("suggestedNumber");this.updateFeaturedItemSelect(n),this.$maxCountDisplay.text(t),this.$suggestedCountDisplay.text(e.get("suggestedNumber"))}});return new s}),define("text!content/category-sections/merchandising/manage-categories/templates/manage-categories-tpl.html",[],function(){return'<div id="manage-categories">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Manage Categories</h2>\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Here you can create and edit categories for your website. You can change the products shown in your categories, as well as change the active dates and other options. Your existing categories are shown in the list below.\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n	<div class="row row-spaced">\r\n		<div class="col-5 form-section">\r\n			<label for="catSearch">Category Search</label>\r\n			<div class="search-container">\r\n				<input type="text" id="catSearch" name="catSearch" placeholder="Enter a category name">\r\n			</div>\r\n		</div>		\r\n		<div class="col-4 pull-right">\r\n			<button type="button" id="new-category-btn" class="btn btn-submit pull-right y-space-top-btn">\r\n				<i class="icon icon-add icon-lg"></i>New Category\r\n			</button>\r\n		</div>\r\n	</div>\r\n\r\n<!-- 	<table id="category-table" class="table alternate">\r\n		<thead>\r\n			<tr>\r\n				<th class="left-align indented-m col-6">Category</th>\r\n				<th>Category Type</th>\r\n				<th>Page Type</th>\r\n				<th>Start Date</th>\r\n				<th>End Date</th>\r\n				<th>Status</th>\r\n				<th>Edit</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody id="category-list"></tbody>\r\n	</table> -->\r\n\r\n	<div id="category-table" class="div-table">\r\n		<div class="div-table-head">\r\n		    <div class="row">\r\n			    <div class="col-4 left-align td-category">Category</div>\r\n			    <div class="col-2 td-category-type">Category Type</div>\r\n			    <div class="col-1 td-page-type">Page Type</div>\r\n			    <div class="col-1 td-start-date">Start Date</div>\r\n			    <div class="col-1 td-end-date">End Date</div>\r\n			    <div class="col-2 td-status">Status</div>\r\n			    <div class="col-1 td-edit">Edit</div>\r\n		    </div>\r\n	    </div>\r\n\r\n	    <div class="div-table-body" id="category-list"></div>\r\n	</div>\r\n</div>'}),define("content/category-sections/merchandising/manage-categories/models/category-model",["backbone","components/featured-product/collections/featured-product-collection","../collections/category-collection"],function(e){var t=e.Model.extend({defaults:function(){return{id:null,pageType:"",name:"",active:!0,featured:!1,featuredRank:0,showApp:!1,subtype:"Default",allowAddons:!0,allowUpdates:!0,categoryType:"Custom",categoryShortDesc:"",categoryLongDesc:"",groupLevelActive:!1,startDate:"",endDate:"",seoCategoryName:"",metaTitle:"",metaKeywords:"",metaDesc:"",metaTags:"",parent:null,resetform:!1,children:[],featuredProducts:[],visibility:"Visible Everywhere"}}});return t}),define("content/category-sections/merchandising/manage-categories/collections/category-collection",["backbone","../models/category-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-categories.json",model:t,getLevel:function(e){return this.get(e).get("parent")?this.getLevel(this.get(e.get("parent")))+1:1},isDescendent:function(e,t){for(var n=this.get(t.get("parent"));n;){if(n===e)return!0;n=this.get(n.get("parent"))}return!1},getMaxLevel:function(e){var t=e.get("children");if(0===t.length)return 1;for(var n=0,i=0,o=t.length;o>i;++i){var r=this.getMaxLevel(this.get(t[i]));r>n&&(n=r)}return n+1},getTopLevelModel:function(e){for(var t=this.get(e.get("parent"));t&&t.get("parent");)t=this.get(t.get("parent"));return t||e},comparator:function(e,t){var n=this.getLevel(e),i=this.getLevel(t);return i>n?-1:n>i?1:e.get("id")<t.get("id")?-1:e.get("name")<t.get("name")?-1:1}});return new n}),define("content/category-sections/merchandising/manage-categories/templates/category-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row" data-id="'+(null==(__t=id)?"":__t)+'">\r\n    <div class="clearfix">\r\n        <div class="left-align level-'+(null==(__t=level)?"":__t)+' col-4 td-category">\r\n            ',children.length&&(__p+='\r\n                <button type="button" id="outer" class="toggle-btn icon icon-btn icon-opened icon-2x"></button>\r\n            '),__p+="\r\n            "+(null==(__t=name)?"":__t)+'\r\n        </div>\r\n        <div class="col-2 td-category-type">\r\n            '+(null==(__t=categoryType)?"":__t)+'\r\n        </div>\r\n        <div class="col-1 td-page-type">\r\n            <i title="'+(null==(__t="category"===pageType?"Subcategory":"Landing Page")?"":__t)+'" class="icon-page-tip icon '+(null==(__t="category"===pageType?"icon-category":"icon-landing")?"":__t)+' icon-2x"></i>\r\n        </div>\r\n        <div class="col-1 td-start-date">'+(null==(__t=startDate)?"":__t)+'</div>\r\n        <div class="col-1 td-end-date">'+(null==(__t=endDate)?"":__t)+'</div>\r\n        <div class="col-2 td-status">\r\n            <div class="centered-content-container">\r\n                <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" class="on-off-switch" id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n                <label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n        </div>\r\n        <div class="col-1 td-edit">\r\n            <button type="button" class="icon icon-edit icon-btn icon-2x"></button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="nested-rows"></div>\r\n</div>';return __p}}),define("content/category-sections/merchandising/manage-categories/views/category-view",["underscore","backbone","../templates/category-tpl","../collections/category-collection","global-events","jqueryui"],function(e,t,n,i,o){var r=t.View.extend({template:n,initialize:function(e){this.parent=e.parent,this.level=e.level},render:function(){var e=this.model.toJSON();return e.level=this.level,this.setElement(this.template(e)),this.applyToolTips(),this},events:{"click .icon-edit":"handleEdit","change .on-off-switch":"handleSwitch"},handleEdit:function(){this.parent.handleEdit(this.model)},handleSwitch:function(e){var t=this.model.get("children");this.model.set("active",e.target.checked),t.length,o.trigger("form:editing")},applyToolTips:function(){this.$el.find(".icon-page-tip").tooltip()}});return r}),define("content/category-sections/merchandising/manage-categories/views/manage-categories-home-view",["jquery","underscore","backbone","text!../templates/manage-categories-tpl.html","../collections/category-collection","./category-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=n.View.extend({template:i,initialize:function(){this.setElement(this.template)},cacheElem:function(){this.$catList=this.$el.find("#category-list"),this.$tip=this.$el.find(".tooltip-change"),this.$search=this.$el.find("#catSearch")},render:function(){return this.cacheElem(),this.delegateEvents(),o.fetchCustom().done(this.addAllCategories.bind(this)),this},events:{"click #new-category-btn":"handleNewBtn","click .toggle-btn":"handleToggle","click #save-btn":"handleSave","keydown #catSearch":"handleSearch"},handleSearch:function(){var t=this,n=t.$catList.find(".clearfix");t.debounce&&clearTimeout(t.debounce),t.debounce=setTimeout(function(){for(var i=0;i<n.length;i++){var o=n[i],r=e(o).find(".td-category"),a=t.$search.val().toLowerCase();e(r).text().toLowerCase().indexOf(a)>-1?e(o).removeClass("hidden"):e(o).addClass("hidden")}},100)},handleSave:function(){a.trigger("form:save",this.$tip)},handleNewBtn:function(){this.parent.showCreate()},handleEdit:function(e){this.parent.showCreateEdit(e)},handleToggle:function(t){var n=e(t.target);n.closest(".row").children(".nested-rows").stop().slideToggle(200),n.hasClass("icon-opened")?n.switchClass("icon-opened","icon-closed"):n.switchClass("icon-closed","icon-opened")},addCategory:function(e){var t=new r({model:e,parent:this,level:o.getLevel(e)});e.get("parent")?this.$catList.find('[data-id="'+e.get("parent")+'"] > .nested-rows').append(t.render().el):this.$catList.append(t.render().el)},addAllCategories:function(){this.$catList.empty(),o.sort(),o.each(this.addCategory,this)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new s}),define("text!content/category-sections/merchandising/manage-categories/templates/create-category-tpl.html",[],function(){return'<div id="create-category">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Create Category</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="continue-btn" class="btn btn-submit">Continue</button>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Select a layout for your new category from the dropdown below. This can either be a Category/Subcategory which features a large list of products, or a Landing Page to help direct your shoppers to the categories they are looking for.\r\n		</div>\r\n	</div>\r\n\r\n	<form id="create-form" class="row row-spaced panel">\r\n		<div class="col-12 form-section">\r\n			<div class="row">\r\n				<div class="col-6">\r\n					<div class="select-container">\r\n						<select name="f-layout-select" id="f-layout-select">\r\n							<option selected disabled hidden value="">Select Layout</option>\r\n							<option value="category">Category/Subcategory</option>\r\n							<option value="landing">Landing Page</option>\r\n						</select>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>'}),define("content/category-sections/merchandising/manage-categories/views/create-category-view",["backbone","../models/category-model","text!../templates/create-category-tpl.html","jqueryval"],function(e,t,n){var i=e.View.extend({template:n,initialize:function(){this.setElement(n)},cacheElem:function(){this.$layout=this.$el.find("#f-layout-select"),this.$createForm=this.$el.find("#create-form")},render:function(){return this.delegateEvents(),this.cacheElem(),this.validateForm(),this},events:{"click #cancel-btn":"handleCancelClick","click #continue-btn":"handleContinueClick"},handleCancelClick:function(){this.parent.showHome()},handleContinueClick:function(){this.$createForm.valid()&&this.parent.showCreateEdit(new t({pageType:this.$layout.val()}))},validateForm:function(){this.$createForm.validate({rules:{"f-layout-select":{required:function(e){return""===$(e).find("option:selected").val()}}}})}});return new i}),define("content/category-sections/merchandising/manage-categories/templates/create-edit-page-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">'+(null==(__t=id?"Edit":"Create")?"":__t)+" Category "+(null==(__t="category"===pageType?"":"Landing Page")?"":__t)+'</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				',"Teleflora"===categoryType&&id?__p+='\r\n				<button type="button" id="copy-btn" class="btn btn-other">\r\n					<i class="icon icon-add"></i>\r\n					Copy\r\n				</button>\r\n				':id&&(__p+='\r\n				<button type="button" id="delete-btn" class="btn btn-cancel">\r\n					Delete\r\n				</button>\r\n				'),__p+='\r\n				<button type="button" id="save-btn" class="btn btn-submit">',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel hidden-alt" id="min-products-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n      	This category must have at least 1 product featured in it. <br>\r\n      	Please select at least 1 product below before saving.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Here you can '+(null==(__t=id?"edit":"create")?"":__t)+' a category for your website. You can change the products shown in this category, as well as the active dates and other options.\r\n	</div>\r\n</div>\r\n\r\n\r\n<div id="create-edit-form" class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		\r\n		<div class="col-12">\r\n			<div class="panel-title">Category Details <div class="panel-subtitle">'+(null==(__t=categoryType)?"":__t)+" Category  |  ID "+(null==(__t=id)?"":__t)+'</div></div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-name">Name</label><i title="This is the name of the category. Ex: Anniversary." class="icon icon-tool-tip x-space-s"></i>\r\n			<input type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'" autofocus>\r\n		</div>\r\n\r\n		<div class="col-3">\r\n			<div class="label">\r\n				Status\r\n			</div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="status" name="status" class="on-off-switch" />\r\n		    <label for="status" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n		    </label>\r\n		</div>\r\n\r\n		<!-- Start of button  - confirmation modal -->\r\n		',"Teleflora"===categoryType&&(__p+='\r\n			<div class="col-2">\r\n				<div class="label left-align">Reset<i title="Click here to reset the category to the default values, whether they come from Teleflora or a group level." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<button type="button" id="reset-btn" class="btn btn-submit">Reset</button>\r\n			</div>\r\n		'),__p+='	\r\n		<!-- end of Button - confirmation modal -->\r\n\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n\r\n		<div class="col-6">\r\n			<div class="row">\r\n				<div class="col-6 form-section">\r\n					<label for="f-start-date">Start Date</label><i title="This is the date that you\'d like this category to become active and show on your site." class="icon icon-tool-tip x-space-s"></i>\r\n					<div class="date-container">\r\n						<input type="text" id="f-start-date" name="f-start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n\r\n				<div class="col-6 form-section">\r\n					<label for="f-end-date">End Date</label><i title="This is the date you\'d like this category to become inactive and be removed from your site." class="icon icon-tool-tip x-space-s"></i>\r\n					<div class="date-container">\r\n						<input type="text" id="f-end-date" name="f-end-date" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		',"Teleflora"===categoryType&&"category"===pageType&&(__p+='\r\n			<div class="'+(null==(__t="category"===pageType?"col-3":"col-6")?"":__t)+'">\r\n				<div class="label">Lock Merchandising</div>\r\n				<input '+(null==(__t=allowUpdates?"":"checked")?"":__t)+' type="checkbox" id="allow-updates" name="allow-updates" class="on-off-switch" />\r\n		        <label for="allow-updates" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n		'),__p+="\r\n\r\n		","landing"===pageType&&(__p+='\r\n			<div class="col-6 form-section">\r\n				<label for="category-subtype">Landing Page Type</label><i title="This allows you to identify whether this is a Sympathy or Wedding category so that it can be displayed in the proper landing pages of your site." class="icon icon-tool-tip x-space-s"></i>\r\n				<div class="select-container">\r\n					<select id="category-subtype" ',"Teleflora"===categoryType&&(__p+="disabled "),__p+='name="category-subtype">\r\n						<option selected disabled hidden value="'+(null==(__t=subtype)?"":__t)+'">'+(null==(__t=subtype)?"":__t)+'</option>\r\n						<option value="Default">Default</option>\r\n						<option value="Sympathy">Sympathy</option>\r\n						<option value="Wedding">Wedding</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n		'),__p+="\r\n\r\n		","category"===pageType&&(__p+='\r\n				<div class="'+(null==(__t="Teleflora"===categoryType?"col-3":"col-6")?"":__t)+'">\r\n				<div class="label">Show Add-Ons</div>\r\n				<input '+(null==(__t=allowAddons?"checked":"")?"":__t)+' type="checkbox" id="allow-addons" name="allow-addons" class="on-off-switch" />\r\n		        <label for="allow-addons" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n		'),__p+='\r\n\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="category-visibility">Visibility Setting</label><i title="This allows you to set where and how the category will be shown on your site. You can hide a category instead of removing it if it\'ll be used at a later time." class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="select-container">\r\n				<select id="category-visibility" name="category-visibility">\r\n					<option selected disabled hidden value="'+(null==(__t=visibility)?"":__t)+'">'+(null==(__t=visibility)?"":__t)+'</option>\r\n					<option value="Visible Everywhere">Visible Everywhere</option>\r\n					<option value="Hidden">Hidden</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n\r\n		',"category"===pageType&&(__p+='\r\n			<div class="col-3">\r\n				<div class="label">Show on Mobile App</div>\r\n				<input '+(null==(__t=showApp?"checked":"")?"":__t)+' type="checkbox" id="f-showApp" name="f-showApp" class="on-off-switch" />\r\n		        <label for="f-showApp" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>			\r\n		'),__p+='\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="short-desc">Short Description</label><i title="Here you can enter a short description of your category and the types of products selected." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea class="size-2" maxlength="500" name="short-desc" id="short-desc">'+(null==(__t=categoryShortDesc)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="long-desc">Long Description</label><i title="This area allows you to expand on your short description to describe the category in more detail." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea class="size-3" maxlength="1500" name="long-desc" id="long-desc">'+(null==(__t=categoryLongDesc)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div id="product-or-subcategory"></div>\r\n\r\n<div id="parent-select" class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Parent</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel alert-panel hidden-alt">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					You cannot choose a parent category that will result in a child category that is nested more than 4 levels deep.<br>Please choose another parent category.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<label for="f-parentName">Parent Category</label>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row">\r\n				<div class="col-10">\r\n					<input disabled type="text" id="f-parentName" name="f-parentName" value="'+(null==(__t=parent?parentName:"Set as top-level category")?"":__t)+'">\r\n				</div>\r\n				<div class="col-2">\r\n					<button type="button" id="edit-parent-btn" style="padding: 15px 0;" class="icon icon-btn icon-edit icon-2x"></button>\r\n				</div>\r\n			</div>\r\n\r\n			<div id="edit-parent-container" class="row row-spaced hidden-alt">\r\n				<div class="col-12">\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<label for="f-parent">Top Level Category</label>\r\n\r\n							<div class="select-container">\r\n						    <select id="f-parent" name="f-parent">\r\n					        <option selected disabled hidden value="'+(null==(__t=parent?parent:"")?"":__t)+'">'+(null==(__t=parent?topLevelModel.name:"Set as top-level category")?"":__t)+' (currently selected)</option>\r\n					       	<option value="">Set as top-level category'+(null==(__t=parent?"":" (currently selected)")?"":__t)+"</option>\r\n					        <option disabled></option>\r\n					        ";
for(var i=0,j=topLevelCategories.length;j>i;++i)__p+='\r\n										<option value="'+(null==(__t=topLevelCategories[i].id)?"":__t)+'">'+(null==(__t=topLevelCategories[i].name)?"":__t)+(null==(__t=topLevelCategories[i].id===(topLevelModel&&topLevelModel.id)?" (currently selected)":"")?"":__t)+"</option>\r\n					        ";__p+='\r\n						    </select>\r\n							</div>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="row row-spaced">\r\n						<div class="col-12">\r\n							<div id="parent-table" class="div-table '+(null==(__t=parent?"":"no-border")?"":__t)+'">\r\n							  <div class="div-table-body" id="parent-list"></div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n\r\n   <div id="category-seo-content" class="row row-spaced clearfix">\r\n\r\n		<div class="col-12">\r\n				<div class="panel-title"><i class="icon icon-closed x-space-s"></i>Category SEO Content</div>\r\n			</div>\r\n		</div>\r\n\r\n	 <div class="accordion">\r\n		<div class="row row-spaced panel form-section">\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="seo-name">SEO Name</label><i title="This is a short description of the category, such as Anniversary by Teleflora." class="icon icon-tool-tip x-space-s"></i>\r\n				<input type="text" id="seo-name" name="seo-name" value="'+(null==(__t=seoCategoryName)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<label for="f-meta-title">Page &#60;title&#62;</label><i title="This is the text displayed in the tab at the top of your browser window." class="icon icon-tool-tip x-space-s"></i>\r\n				<input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-meta-keywords">Meta Keywords</label><i title="This area allows you to enter a few comma separated keywords that describe your page." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-1" id="f-meta-keywords" name="f-meta-keywords">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n			</div>\r\n			<div class="col-6 form-section">\r\n				<label for="f-meta-desc">Meta Description</label><i title="This is the text shown on search engines for your category and should consist of short clear sentences." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-1" name="f-meta-desc" id="f-meta-desc">'+(null==(__t=metaDesc)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<label for="f-meta-tags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="This area is for any additional meta tags that may be used for tracking or other purposes."></i>\r\n				<textarea id="f-meta-tags" name="f-meta-tags">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n				<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n</div>\r\n\r\n<div id="modal-container"></div>'}return __p}}),define("text!content/category-sections/merchandising/manage-categories/templates/featured-sub-tpl.html",[],function(){return'<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Featured Subcategories</div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-6">\r\n			<h4 class="title pull-left">Selected Featured Subcategories</h4><i title="This allows you to organize your site by listing several groups of products under one main category." class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="scroll-container">\r\n				<table class="table-list alternate">\r\n					<thead>\r\n						<tr>\r\n							<th class="col-3">Rank</th>\r\n							<th class="col-6">Name</th>\r\n							<th class="col-3">Delete</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="featured-sub-list"></tbody>\r\n				</table>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<h4 class="title">Subcategory Search</h4>\r\n			<div class="search-container scroll-container">\r\n				<input class="no-margin search-input" type="text" placeholder="Search Terms">\r\n				<ul id="featured-sub-search-list" class="search-list"></ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("content/category-sections/merchandising/manage-categories/templates/active-featured-sub-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td>'+(null==(__t=featuredRank)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=name)?"":__t)+'</td>\r\n	<td>\r\n		<button type="button" class="icon icon-trash icon-btn icon-2x"></button>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/merchandising/manage-categories/views/active-featured-sub-view",["underscore","backbone","../templates/active-featured-sub-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.listenTo(this.model,"change:featured",this.remove)},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){this.model.set("featured",!1)}});return i}),define("content/category-sections/merchandising/manage-categories/templates/all-featured-sub-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<li class="clearfix hide-overflow clickable">\r\n	<div class="pull-left">\r\n		'+(null==(__t=name)?"":__t)+'\r\n	</div>\r\n	<div class="pull-right">\r\n		<button type="button" class="icon icon-btn '+(null==(__t=featured?"icon-added":"icon-add")?"":__t)+'"></button>\r\n	</div>\r\n</li>';return __p}}),define("content/category-sections/merchandising/manage-categories/views/all-featured-sub-view",["underscore","backbone","../templates/all-featured-sub-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.setElement(this.template(this.model.toJSON())),this.listenTo(this.model,"change:featured",this.handleChange)},render:function(){return this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$icon=this.$el.find(".icon")},events:{click:"toggleAdded"},toggleAdded:function(){this.model.set("featured",!this.model.get("featured"))},handleChange:function(e){var t=e.get("featured");t?(this.$icon.removeClass("icon-add"),this.$icon.addClass("icon-added")):(this.$icon.removeClass("icon-added"),this.$icon.addClass("icon-add"))}});return i}),define("content/category-sections/merchandising/manage-categories/views/featured-sub-view",["underscore","backbone","text!../templates/featured-sub-tpl.html","./active-featured-sub-view","./all-featured-sub-view","global-events","jqueryui"],function(e,t,n,i,o,r){var a=t.View.extend({template:n,initialize:function(e){var t=this;t.setElement(t.template),t.cacheElem(),t.collection=e.collection,t.listenTo(t.collection,"change:featured",function(){t.addAllActive(),r.trigger("form:editing")})},render:function(){return this.cacheElem(),this.addAllListings(),this.addAllActive(),this.sortListView(),this},cacheElem:function(){this.$allList=this.$el.find("#featured-sub-search-list"),this.$activeList=this.$el.find("#featured-sub-list")},addListing:function(e){var t=new o({model:e});this.$allList.append(t.render().el)},addAllListings:function(){this.$allList.empty(),this.collection.forEach(this.addListing,this)},addActive:function(e){var t=new i({model:e});this.$activeList.append(t.render().el)},addAllActive:function(){this.$activeList.empty(),this.collection.getSortedByRank().forEach(this.addActive,this)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},sortListView:function(){var e=this;e.$activeList.sortable({helper:e.helperFixRowWidth,containment:"parent",tolerance:"pointer",start:function(e,t){t.placeholder.height(t.item.height()),t.helper.addClass("active")},update:function(){e.$activeList.children().each(function(t){var n=$(this).data("id");e.collection.get(n).set("featuredRank",t+1),e.addAllActive(),r.trigger("form:editing")})}})}});return a}),define("content/category-sections/merchandising/manage-categories/collections/featured-sub-collection",["backbone","../models/category-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){var e=this;e.listenTo(e,"change:featured",function(t){var n;t.get("featured")?(t.set("featuredRank",0),n=e.getSortedByRank(),t.set("featuredRank",n[n.length-1].get("featuredRank")+1)):(e.setRank(),e.trigger("resequenced"))})},getSortedByRank:function(){return this.where({featured:!0}).sort(function(e,t){return e.get("featuredRank")-t.get("featuredRank")})},setRank:function(){var e=this.getSortedByRank().map(function(e,t){return e.set("featuredRank",t+1),e});this.set(e,{remove:!1})}});return n}),define("content/category-sections/merchandising/manage-categories/templates/edit-parent-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="'+(null==(__t=parent?"":"top-level-category")?"":__t)+" row "+(null==(__t=parent||visible?"":"hidden-alt")?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'">\r\n    <div class="parent-name '+(null==(__t=selected?"active":"clickable")?"":__t)+' clearfix">\r\n        <div class="left-align level-'+(null==(__t=level)?"":__t)+' col-12">\r\n            ',children.length&&(__p+='\r\n                <button type="button" id="outer" class="toggle-btn icon icon-btn icon-opened icon-2x"></button>\r\n            '),__p+="\r\n            "+(null==(__t=name)?"":__t)+'\r\n        </div>\r\n    </div>\r\n\r\n    <div class="nested-rows"></div>\r\n</div>';return __p}}),define("content/category-sections/merchandising/manage-categories/views/edit-parent-view",["backbone","../templates/edit-parent-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.level=e.level,this.selected=e.selected,this.visible=e.visible},render:function(){var e=this.model.toJSON();return e.level=this.level,e.selected=this.selected,e.visible=this.visible,this.setElement(this.template(e)),this.delegateEvents(),this},events:{"click .parent-name":"markAsActive"},markAsActive:function(e){e.stopPropagation(),this.parent.setActiveParent(this.model)?this.$el.children(".parent-name").addClass("active"):this.parent.showParentError()}});return n}),define("content/category-sections/merchandising/manage-categories/views/create-edit-page-view",["backbone","../collections/category-collection","../templates/create-edit-page-tpl","components/featured-product/views/featured-product-view","./featured-sub-view","components/featured-product/collections/featured-product-collection","../collections/featured-sub-collection","./edit-parent-view","global-events","jqueryui","custom/searchify","jqueryval"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({template:n,tagName:"form",id:"m-create-edit-category",render:function(){var e=this,n=e.model.toJSON(),s=t.filter(function(n){return e.model!==n&&!t.isDescendent(e.model,n)}),l=t.get(e.model.get("parent"));return n.parentName=l&&l.get("name"),n.topLevelModel=t.getTopLevelModel(e.model).toJSON(),n.topLevelCategories=t.filter(function(t){return!t.get("parent")&&e.model!==t}).map(function(e){return e.toJSON()}),e.setActiveParent(l),e.$el.html(e.template(n)),e.delegateEvents(),e.cacheElem(),e.addAllParents(s),"category"===e.model.get("pageType")?(e.featuredProductView=new i({collection:new r(e.model.get("featuredProducts")),primarySku:!0}),e.$productContainer.append(e.featuredProductView.render().$el)):(e.subCategories=[],e.model.get("children").forEach(function(n){var i=t.get(n);if("category"===i.get("pageType")){var o=i.deepClone();o.unset("featuredProducts"),e.subCategories.push(o)}}),e.featuredSubView=new o({collection:new a(e.subCategories),selectAll:!0}),e.$productContainer.append(e.featuredSubView.render().$el)),e.applySearch(),e.applyDate(),e.validateForm(),e.applyAccordians(),"Teleflora"===e.model.get("categoryType")&&e.renderFederation(),e.applyToolTips(),e},cacheElem:function(){this.$name=this.$el.find("#f-name"),this.$active=this.$el.find("#status"),this.$categoryShortDesc=this.$el.find("#short-desc"),this.$categoryLongDesc=this.$el.find("#long-desc"),this.$startDate=this.$el.find("#f-start-date"),this.$endDate=this.$el.find("#f-end-date"),this.$allowTeleflora=this.$el.find("#allow-updates"),this.$allowAddons=this.$el.find("#allow-addons"),this.$allowUpdates=this.$el.find("#allow-updates"),this.$seoCategoryName=this.$el.find("#seo-name"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDesc=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$visibility=this.$el.find("#category-visibility"),this.$showApp=this.$el.find("#f-showApp"),this.$groupLevelActive=this.$el.find("#f-groupLevelActive"),this.$allowTelefloraToolTip=this.$el.find("#allow-updates-tool-tip"),this.$productContainer=this.$el.find("#product-or-subcategory"),this.$createEditForm=this.$el,this.$parentSelect=this.$el.find("#f-parent"),this.$parentName=this.$el.find("#f-parentName"),this.$editParentContainer=this.$el.find("#edit-parent-container"),this.$parentTable=this.$el.find("#parent-table"),this.$parentList=this.$el.find("#parent-list"),this.$parentErrorPanel=this.$el.find(".alert-panel"),this.$accordion=this.$el.find("#accordion"),this.$minProdError=this.$el.find("#min-products-error"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #cancel-btn":"handleCancel","click #copy-btn":"handleCopy","click #delete-btn":"handleDelete","click #save-btn":"handleSave","click .toggle-btn":"handleToggle","click #edit-parent-btn":"handleParentEdit","change #f-parent":"handleParentChange","change #f-groupLevelActive":"handleGroupLevelToggle","click #allow-updates":"handleUpdateConfirm","click #reset-btn":"handleMerchChange"},handleGroupLevelToggle:function(){this.$groupLevelActive.is(":checked")?(this.$allowTeleflora.prop("disabled",!0),this.$allowTelefloraToolTip.fadeIn(200)):(this.$allowTeleflora.prop("disabled",!1),this.$allowTelefloraToolTip.fadeOut(200))},handleUpdateConfirm:function(e){var t=this,n=$(e.target);n.is(":checked")?(event.preventDefault(),l.trigger("modal:custom",{template:{title:"Automatic Price Updates",text:'Setting this to ON will allow Teleflora global pricing updates to take effect on your site. Turning this setting OFF will ensure that the products on your site do not get their prices changed by any updates.<br><br>Turning this ON will deactivate "Always Use Teleflora.com Pricing" as they cannot both be enabled at once',confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})):!t.$allowUpdates.is("checked")},handleMerchChange:function(e){var t=this;e.preventDefault(),l.trigger("modal:custom",{template:{title:"Reset Settings",text:"Are you sure? This will reset all applicable fields to their default Teleflora/group values."},confirmFn:function(){t.$name.val("").trigger("change"),t.$categoryShortDesc.val("").trigger("change"),t.$categoryLongDesc.val("").trigger("change")},cancelFn:function(){}})},showParentError:function(){this.$parentErrorPanel&&this.$parentErrorPanel.fadeIn(100)},hideParentError:function(){this.$parentErrorPanel&&this.$parentErrorPanel.fadeOut(100)},clearActiveParent:function(){this.$parentList&&this.$parentList.find(".active").removeClass("active")},setActiveParent:function(e){return!e||t.getLevel(e)+t.getMaxLevel(this.model)<5?(this.activeParent=e,e&&this.setParentName(e.get("name")),this.clearActiveParent(),this.hideParentError(),!0):(this.showParentError(),!1)},setParentName:function(e){this.$parentName&&this.$parentName.val(e)},handleToggle:function(e){var t=$(e.target);t.closest(".row").children(".nested-rows").stop().slideToggle(200),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened")},handleParentChange:function(){var e=this;e.$parentList.find(".top-level-category").fadeOut(0,function(){setTimeout(function(){e.$parentList.find('[data-id="'+e.$parentSelect.find("option:selected").val()+'"]').fadeIn(200)},0)}),e.$parentSelect.find("option:selected").val()?this.$parentTable.removeClass("no-border"):(this.setActiveParent(null),this.setParentName(e.$parentSelect.find("option:selected").text()),this.$parentTable.addClass("no-border"))},handleParentEdit:function(e){$(e.currentTarget).fadeOut(200),this.$editParentContainer.fadeIn(200)},handleCopy:function(){var e=this.model.deepClone();e.set({id:null,name:"",children:[],featured:!1,parent:null}),this.parent.showCreateEdit(e)},handleCancel:function(){l.trigger("form:cancel",this.parent.showHome.bind(this.parent))},showMinError:function(){var e=this;l.trigger("form:invalid",this.$tip),this.$minProdError.fadeIn(200),setTimeout(function(){e.$minProdError.fadeOut(200)},1e4)},minSelected:function(e){var t=this.featuredProductView.collection.where({featured:!0}).length;return t>=e?!0:!1},handleSave:function(){var e=this;if(!e.minSelected(1))return e.showMinError(),!1;if(this.$createEditForm.valid()){{var n=this.activeParent&&this.activeParent.get("id");n&&t.get(n).get("level")}if((n||null)!==this.model.get("parent")){{var i=t.get(this.model.get("parent")),o=t.get(n);this.model.get("id")}if(i){var r=i.get("children");r.splice(r.indexOf(this.model.get("id")),1)}if(o){{o.get("children")}o.get("children").push(this.model.get("id"))}this.model.set({featured:!1})}this.model.set({name:this.$name.val().trim(),active:this.$active.is(":checked"),showApp:this.$showApp.is(":checked"),categoryShortDesc:this.$categoryShortDesc.val().trim(),categoryLongDesc:this.$categoryLongDesc.val().trim(),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),metaTitle:this.$metaTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaDesc:this.$metaDesc.val().trim(),metaTags:this.$metaTags.val().trim(),visibility:this.$visibility.find("option:selected").val(),parent:n||null,groupLevelActive:this.$groupLevelActive.is(":checked")}),"category"===this.model.get("pageType")?this.model.set({allowAddons:this.$allowAddons.is(":checked"),seoCategoryName:this.$seoCategoryName.val().trim(),featuredProducts:this.featuredProductView.collection.toJSON()}):(this.model.set({seoCategoryName:this.$seoCategoryName.val().trim()}),t.set(this.subCategories,{remove:!1})),"Teleflora"===this.model.get("categoryType")&&this.model.set({allowUpdates:this.$allowUpdates.is(":checked")}),t.get(this.model)||(this.model.set("id",Date.now()),t.add(this.model)),this.parent.showHome(),l.trigger("form:save",this.$tip)}else l.trigger("form:invalid",this.$tip)},handleDelete:function(){var e=this;l.trigger("form:delete",function(){t.remove(e.model),e.parent.showHome()})},addParent:function(e){var n=new s({model:e,parent:this,level:t.getLevel(e),selected:e===t.get(this.model.get("parent")),visible:e===t.getTopLevelModel(this.model)});e.get("parent")?this.$parentList.find('[data-id="'+e.get("parent")+'"] > .nested-rows').append(n.render().el):this.$parentList.append(n.render().el)},addAllParents:function(e){this.$parentList.empty(),e.forEach(this.addParent.bind(this))},applySearch:function(){this.$el.find(".search-input").searchify()},applyDate:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyAccordians:function(){this.$el.find(".accordian").accordion({heightStyle:"content"}),this.applyAccordians2()},applyAccordians2:function(){this.$el.find("#category-seo-content").click(function(){var e=$(this);return e.next().fadeToggle(200).toggleClass("active"),e.find(".icon").hasClass("icon-opened")?e.find(".icon").switchClass("icon-opened","icon-closed"):e.find(".icon").switchClass("icon-closed","icon-opened"),!1}).next().hide()},renderFederation:function(){var e=this;this.runFederation(e.$name,"Anniversary"),this.runFederation(e.$categoryShortDesc,"Need anniversary gift ideas? Michael's Flower Shop can help!"),this.runFederation(e.$categoryLongDesc,"We've got all types of flowers for an anniversary. Select classic roses, a modern bouquet or even a plant. Nothing says love and romance like surprising your loved one with a stunning bouquet on your special day! Michael's Flower Shop delivers to Los Angeles, CA and nationwide, for a real surprise they won't soon forget!")},runFederation:function(e,t){var n,i=e.closest(".form-section");n=i.find(i.find("div.label").is("*")?"div.label":"label:first"),i.addClass("f-federation"),n.after('<i title="Because this field was left blank, it reverted to the default Teleflora/group value." class="icon icon-tool-tip icon-tool-tip-federated"></i>'),""==e.val()||null==e.val()?(i.addClass("f-federated"),e.is("select")?e.find('option[value="'+i+'"]').prop("selected",!0):e.val(t)):i.addClass("f-custom"),e.on("change",function(){""==e.val()||null==e.val()?(i.addClass("f-federated").removeClass("f-custom"),e.is("select")?e.find('option[value="'+i+'"]').prop("selected",!0):e.val(t)):i.addClass("f-custom").removeClass("f-federated")})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){var e=this;this.$createEditForm.validate({rules:{"f-start-date":{dateCustom:!0},"f-end-date":{dateCustom:!0},"long-desc":{maxlength:1500},"short-desc":{maxlength:500},"f-meta-title":"noCarets","f-meta-keywords":"noCarets","f-meta-desc":"noCarets"}}),"Custom"===e.model.get("categoryType")&&e.$name.rules("add",{required:!0})}});return new c}),define("content/category-sections/merchandising/manage-categories/views/manage-categories-view",["backbone","./manage-categories-home-view","./create-category-view","./create-edit-page-view"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this,i.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreate:function(){this.replaceVisible(n)},showCreateEdit:function(e){i.model=e,this.replaceVisible(i)}});return new o}),define("content/category-sections/merchandising/manage-collections/templates/manage-collections-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Collections</h2>\r\n			<button id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Collections offer a unique way to show off a group of products unique to you and your shop. This page will help you manage all of your collections. \r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<button id="new-collection-btn" class="btn btn-submit pull-right">\r\n			<i class="icon icon-add icon-lg"></i>New Collection\r\n		</button>\r\n	</div>\r\n</div>\r\n\r\n<div id="collection-table" class="div-table">\r\n	<div class="div-table-head">\r\n	    <div class="row">\r\n		    <div class="col-4 left-align td-collection">Collection</div>\r\n		    <div class="col-2 td-collection-type">Collection Type</div>\r\n		    <div class="col-1 td-page-type">Page Type</div>\r\n		    <div class="col-1 td-start-date">Start Date</div>\r\n		    <div class="col-1 td-end-date">End Date</div>\r\n		    <div class="col-2 td-status">Status</div>\r\n		    <div class="col-1 td-edit">Edit</div>\r\n	    </div>\r\n    </div>\r\n\r\n    <div class="div-table-body" id="collection-list"></div>\r\n</div>\r\n\r\n\r\n<form class="row row-spaced form-section panel" id="f-manage-collections">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Main Collections Page Settings</div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-meta-title">Middle Section Title</label>\r\n			<input type="text" id="f-middle-section-title" name="f-middle-section-title" value="'+(null==(__t=middleSectionTitle)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-meta-title">Middle Section Subtitle</label>\r\n			<textarea type="text" id="f-middle-section-sub-title" name="f-middle-section-sub-title">'+(null==(__t=middleSectionSubTitle)?"":__t)+' </textarea>\r\n		</div>\r\n	</div>\r\n\r\n		<div class="row">\r\n		    <div class="col-12">\r\n		      <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional"></i>SEO Information</div>\r\n		    </div>\r\n		</div>\r\n\r\n	<div id="accordion">\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<label for="f-meta-title">Page &lt;title&gt;</label><i class="icon icon-tool-tip x-space-s" title="This will let you adjust the text displayed in the tabs at the top of the browser window."></i>\r\n				<input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-meta-keywords">Meta Keywords</label><i title="Here you can list a few comma separated keywords that describe your collection." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-1" id="f-meta-keywords" name="f-meta-keywords">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n			</div>\r\n			<div class="col-6 form-section">\r\n				<label for="f-meta-desc">Meta Description</label><i title="This is the text displayed on search engines. It should consist of a few short and simple sentences that describe your collection." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-1" name="f-meta-desc" id="f-meta-desc">'+(null==(__t=metaDescription)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<label for="f-additional-tags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="Here you can enter a few additional meta tags for use in tracking or other purposes. This area is optional."></i>\r\n				<textarea name="f-additional-tags" id="f-additional-tags" class="size-2">'+(null==(__t=additionalTags)?"":__t)+'</textarea>\r\n				<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n			</div>\r\n		</div>\r\n\r\n	</div>\r\n\r\n</form>\r\n';return __p}}),define("content/category-sections/merchandising/manage-collections/models/manage-collections-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-collections-settings.json",defaults:{middleSectionTitle:"",middleSectionSubTitle:"",metaTitle:"",metaKeywords:"",metaDescription:"",additionalTags:""}});return new t}),define("content/category-sections/merchandising/manage-collections/models/collection-model",["backbone","components/featured-product/collections/featured-product-collection"],function(e){var t=e.Model.extend({defaults:function(){return{id:null,name:"",active:!0,sharingActive:!0,subHeaderActive:!0,collectionType:"Custom",subTitle:"",startDate:"",order:null,endDate:"",promoDesc:"",metaDesc:"",metaTags:"",metaTitle:"",metaKeywords:"",imgUrl1:"",imgUrl2:"",imgUrl3:"",imgUrl4:"",imgUrl5:"",featuredProducts:[],parent:0,children:[],metaTitle:"",metaKeywords:"",metaDesc:"",metaTags:""}}});return t}),define("content/category-sections/merchandising/manage-collections/collections/collection-collection",["backbone","../models/collection-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-collections.json",model:t,comparator:function(e,t){return e.get("parent")-t.get("parent")!==0?e.get("parent")-t.get("parent"):e.get("id")-t.get("id")}});return new n}),define("content/category-sections/merchandising/manage-collections/templates/collection-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div data-pid="'+(null==(__t=id)?"":__t)+'" class="tr clearfix">\n    <div class="left-align '+(null==(__t=parent>0?"level-2":"level-1")?"":__t)+' col-4 td-collection">\n        ',children.length&&(__p+='\n            <button id="outer" class="toggle-btn icon icon-btn icon-opened icon-2x"></button>\n        '),__p+="\n        "+(null==(__t=name)?"":__t)+'\n    </div>\n    <div class="col-2 td-collection-type">\n        '+(null==(__t=collectionType)?"":__t)+'\n    </div>\n    <div class="col-1 td-page-type">\n        <i class="icon '+(null==(__t=0===parent?"icon-landing":"icon-category")?"":__t)+' icon-2x"></i>\n    </div>\n    <div class="col-1 td-start-date">'+(null==(__t=startDate)?"":__t)+'</div>\n    <div class="col-1 td-end-date">'+(null==(__t=endDate)?"":__t)+'</div>\n    <div class="col-2 td-status">\n        <div class="centered-content-container">\n            <input '+(null==(__t=parentActive&&active?"checked":"")?"":__t)+' type="checkbox" class="on-off-switch" id="'+(null==(__t="switch-"+id)?"":__t)+'" name="'+(null==(__t="switch-"+id)?"":__t)+'" class="on-off-switch" />\n            <label for="'+(null==(__t="switch-"+id)?"":__t)+'" class="on-off-switch-label">\n                <div class="on-off-switch-state">on</div>\n            </label>\n        </div>\n    </div>\n    <div class="col-1 td-edit">\n        <button class="icon icon-edit icon-btn icon-2x"></button>\n    </div>\n</div>\n\n<div data-id="'+(null==(__t=id)?"":__t)+'" class="nested-rows"></div>';return __p}}),define("content/category-sections/merchandising/manage-collections/views/collection-view",["backbone","../collections/collection-collection","../templates/collection-tpl","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",className:"row",template:n,initialize:function(e){this.parent=e.parent,this.parentCollection=t.get(this.model.get("parent")),this.parentCollection&&this.listenTo(this.parentCollection,"change:active",function(){this.handleParentToggle()})},render:function(){var e=this.model.toJSON();return e.parentActive=!this.parentCollection||this.parentCollection.get("active"),this.$el.html(this.template(e)),this.delegateEvents(),this.$el.find("#switch-"+this.model.get("id")).on("click",this.handleSwitch.bind(this)),this},events:{"click .icon-edit":"handleEdit","change .on-off-switch":"handleSwitch"},handleEdit:function(){this.parent.handleEdit(this.model)},handleSwitch:function(e){this.model.set("active",e.target.checked),i.trigger("form:editing")},handleParentToggle:function(){this.parentCollection.get("active")?this.$el.find("#switch-"+this.model.get("id")).prop("checked",this.model.get("active")).prop("disabled",!1):this.$el.find("#switch-"+this.model.get("id")).prop("checked",!1).prop("disabled",!0)
}});return o}),define("content/category-sections/merchandising/manage-collections/views/manage-collections-home-view",["backbone","../templates/manage-collections-tpl","../models/manage-collections-model","../models/collection-model","../collections/collection-collection","./collection-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"div",id:"p-manage-collections",template:t,initialize:function(){this.$el.html(this.template(n.toJSON())),this.cacheElem()},cacheElem:function(){this.$collectionList=this.$el.find("#collection-list"),this.$accordion=this.$el.find("#accordion"),this.$optional=this.$el.find("#optional"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDescription=this.$el.find("#f-meta-description"),this.$additionalTags=this.$el.find("#f-additional-tags"),this.$createEditForm=this.$el.find("#f-manage-collections"),this.$filterList=this.$el.find("#collection-list"),this.$middleSectionTitle=this.$el.find("#f-middle-section-title"),this.$middleSectionSubTitle=this.$el.find("#f-middle-section-sub-title"),this.$tip=this.$el.find(".tooltip-change")},render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.cacheElem(),e.delegateEvents(),e.applyToolTips(),e.validateForm(),e.applyAccordion(),o.fetchCustom().done(function(){e.collectionCollection=o.deepClone(),e.addAllCollections(),e.applySortable(e.$filterList,e.collectionCollection)})}),e},events:{"click #new-collection-btn":"handleNewBtn","click .toggle-btn":"handleToggle","click #reset-btn":"handleReset","click #save-btn":"handleSave","keyup #f-meta-description":"handleCharacterCount"},handleCharacterCount:function(){var e=this.$metaDescription.val(),t=e.length,n=256-t;$("#character-count").html(n)},handleNewBtn:function(){var e=new i;this.handleEdit(e)},handleEdit:function(e){this.parent.showCreateEdit(e)},handleToggle:function(e){var t=$(e.target);t.closest(".row").children(".nested-rows").stop().slideToggle(200),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened")},handleReset:function(){a.trigger("form:reset",this.render.bind(this))},handleSave:function(){this.$createEditForm.valid()&&(n.set({middleSectionTitle:this.$middleSectionTitle.val().trim(),middleSectionSubTitle:this.$middleSectionSubTitle.val().trim(),metaTitle:this.$metaTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaDescription:this.$metaDescription.val().trim(),additionalTags:this.$additionalTags.val().trim()}),a.trigger("form:save",this.$tip))},applyAccordion:function(){var e=this;this.$optional.click(function(){var t=$(this);return e.$accordion.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()},addCollection:function(e){var t=new r({model:e,parent:this}),n=e.get("parent");0===n?this.$collectionList.append(t.render().el):this.$collectionList.find('[data-id="'+n+'"]').append(t.render().el)},addAllCollections:function(){this.$collectionList.empty(),o.sort(),o.each(this.addCollection,this)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(e,t){var n=this;e.sortable({helper:n.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.children().each(function(e){var n=$(this).data("pid");t.get(n).set("order",e+1)}),t.sort()}})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{"f-meta-title":"noCarets","f-meta-keywords":"noCarets","f-meta-description":"noCarets"}})}});return new s}),define("content/category-sections/merchandising/manage-collections/templates/create-edit-collection-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title">\r\n			<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add ")?"":__t)+(null==(__t=0===parent?"Collection":"Subcollection")?"":__t)+'</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				',"Teleflora"!==collectionType&&id&&(__p+='\r\n				<button type="button" id="delete-btn" class="btn btn-cancel">Delete</button>\r\n				'),__p+='\r\n				<button id="save-btn" class="btn btn-submit">',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Here you can '+(null==(__t=id?"edit a":"add a")?"":__t)+' collection. These are groups of products that can be used for marketing purposes across your site. \r\n	</div>\r\n</div>\r\n<form id="create-edit-form">\r\n<div class="row row-spaced form-section panel">\r\n	<div class="row row-spaced">\r\n		<div class="form-section col-5">\r\n			<label for="f-name">Name</label><i class="icon icon-tool-tip x-space-s" title="This is the name of the collection. This is not shown on your site and is for your reference only."></i>\r\n			',__p+="Teleflora"!==collectionType?'\r\n				<input type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'" required>\r\n			':'\r\n				<input type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'">\r\n			',__p+='\r\n		</div>\r\n\r\n		<div class="col-2">\r\n			<div class="label">Status</div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n			<label for="f-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n		',0!=parent&&(__p+='\r\n		<div class="col-3">\r\n			<div class="label">Sharing Buttons</div>\r\n			<input '+(null==(__t=sharingActive?"checked":"")?"":__t)+' type="checkbox" id="f-sharing-active" name="f-sharing-active" class="on-off-switch" />\r\n			<label for="f-sharing-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n		'),__p+='\r\n\r\n		<div class="col-3">\r\n			<label for="f-collection-type">Collection Type</label>\r\n			<input disabled type="text" id="f-collection-type" name="f-collection-type" value="'+(null==(__t=collectionType)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="form-section col-3 pull-left">\r\n\r\n			<label for="f-start-date">Start Date</label><i class="icon icon-tool-tip x-space-s" title="This is the first day that your collection will be active as of 12:01AM."></i>\r\n			<div class="date-container">\r\n			    <input type="text" id="f-start-date" name="f-start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n			</div>\r\n\r\n		</div>\r\n\r\n		<div class="form-section col-3 pull-left">\r\n\r\n			<label for="f-end-date">End Date</label><i class="icon icon-tool-tip x-space-s" title="Your collection will no longer be active after 11:59PM on this date."></i>\r\n			<div class="date-container">\r\n			    <input type="text" id="f-end-date" name="f-end-date" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n',0!=parent&&(__p+='\r\n\r\n\r\n\r\n    \r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n				\r\n	              <div class="panel-title">Subcollection Header</div>	\r\n\r\n		</div>\r\n	\r\n</div> \r\n\r\n<div class="row row-spaced">\r\n	<div class="col-4 form-section">\r\n		<div class="label">Active</div>\r\n			<input checked="" type="checkbox" id="f-subHeader-active" name="f-subHeader-active" class="on-off-switch">\r\n			\r\n			<label for="f-subHeader-active" class="on-off-switch-label">\r\n			  <div class="on-off-switch-state">on</div>\r\n			</label>		\r\n	</div>\r\n</div>\r\n '),__p+='\r\n\r\n\r\n\r\n<div id="hide-SubCollectionArea">\r\n\r\n  <div class="row row-spaced">\r\n   		<div class="col-6 pull-left">\r\n			<label for="f-sub-title">'+(null==(__t=0===parent?"Title":"Title")?"":__t)+'</label><i class="icon icon-tool-tip x-space-s" title="This is the title of the collection and is shown on your website."></i>\r\n			<input type="text" id="f-sub-title" name="f-sub-title" value="'+(null==(__t=subTitle)?"":__t)+'">\r\n		</div>\r\n  </div>\r\n\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<label for="f-promo-desc">Description</label><i class="icon icon-tool-tip x-space-s" title="This is a short description of the collection that is shown on the collections page."></i>\r\n			<textarea class="size-2" id="f-promo-desc" name="f-promo-desc">'+(null==(__t=promoDesc)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section image-form-section" id="f-image-1">\r\n			<div>\r\n				<div class="label">'+(null==(__t=0===parent?"Background Image":"Left Image")?"":__t)+'<i class="icon icon-tool-tip x-space-s" title="The collections background image is displayed on all promotional material for this collection on your site."></i></div>\r\n				\r\n					<button type="button" id="f-image-url-1" class="btn btn-other btn-file">\r\n						Select\r\n					</button>\r\n				\r\n			</div>\r\n			<div class="bordered"><img id="f-image-1-preview" class="fill-container-width" src="'+(null==(__t=imgUrl1)?"":__t)+'" alt="" required></div>\r\n		</div>\r\n		<div class="col-6 form-section image-form-section" id="f-image-2">\r\n			<div>\r\n				<div class="label">'+(null==(__t=0===parent?"Logo Image":"Right Image")?"":__t)+'<i class="icon icon-tool-tip x-space-s" title="The collections logo is displayed on all promotional material for this collection on your website."></i></div>\r\n				\r\n					<button type="button" id="f-image-url-2" class="btn btn-other btn-file">\r\n						Select\r\n					</button>\r\n				\r\n			</div>\r\n			<div class="bordered"><img id="f-image-2-preview" class="fill-container-width" src="'+(null==(__t=imgUrl2)?"":__t)+'" alt="" required></div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n\r\n\r\n\r\n	',0===parent&&(__p+='\r\n	<div class="row row-spaced">\r\n	 	<div class="col-6 form-section image-form-section" id="f-image-3">\r\n			<div class="label">Small Image<i class="icon icon-tool-tip x-space-s" title="???"></i></div>\r\n			<button type="button" id="f-image-url-3" class="btn btn-other btn-file">Select</button>	\r\n			<div class="bordered"><img id="f-image-3-preview" class="fill-container" src="'+(null==(__t=imgUrl3)?"":__t)+'" alt="" required></div> \r\n		</div>\r\n		<div class="col-6 form-section image-form-section" id="f-image-4">\r\n			<div class="label">Large Image<i class="icon icon-tool-tip x-space-s" title="???"></i></div>\r\n			<button type="button" id="f-image-url-4" class="btn btn-other btn-file" required>Select</button>	\r\n			<div class="bordered"><img id="f-image-4-preview" class="fill-container-width" src="'+(null==(__t=imgUrl4)?"":__t)+'" alt="" required></div>\r\n		</div> \r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section image-form-section" id="f-image-5">\r\n			<div class="label">Product Overlay Image<i class="icon icon-tool-tip x-space-s" title="???"></i></div>\r\n			<button type="button" id="f-image-url-5" class="btn btn-other btn-file">Select</button>	\r\n			<div class="bordered"><img id="f-image-5-preview" class="fill-container-width" src="'+(null==(__t=imgUrl5)?"":__t)+'" alt="" required></div>\r\n		</div> 	\r\n	</div>\r\n	'),__p+='\r\n\r\n\r\n</div>\r\n\r\n\r\n</div>\r\n\r\n<div id="featured-products"></div>\r\n',0===parent&&(__p+='\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">\r\n				Subcollections<i class="icon icon-tool-tip x-space-s" title="Subcollections let you organize your products into several groups whice can be listed under one main collection."></i>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<button type="button" id="new-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i>New Subcollection</button>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table id="sub-collection-table" class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class=\'col-4 left-align\'>Subcollection Name</th>\r\n						<th class=\'col-4\'>Type</th>\r\n						<th class=\'col-2\'>Status</th>\r\n						<th class=\'col-1\'>Edit</th>\r\n						<th class=\'col-1\'>Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="sub-collection-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>\r\n'),__p+="\r\n\r\n",0===parent&&(__p+=' \r\n <div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title"><i class="icon icon-closed x-space-s" id="optional"></i>Collection SEO Content</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div id="accordion">\r\n	\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-meta-title">Page Title</label><i title="This is the text displayed in the tabs at the top of your browser window." class="icon icon-tool-tip x-space-s"></i>\r\n			<input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-meta-keywords">Meta Keywords</label><i title="Here you can list a few comma separated keywords that describe your collection." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea class="size-1" id="f-meta-keywords" name="f-meta-keywords">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n		</div>\r\n		<div class="col-6 form-section">\r\n			<label for="f-meta-desc">Meta Description</label><i title="This is the text displayed on search engines. It should consist of a few short and simple sentences that describe your collection." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea class="size-1" name="f-meta-desc" id="f-meta-desc">'+(null==(__t=metaDesc)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-meta-tags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="This area allows you to insert any extra meta tags that may be used for tracking or other purposes."></i>\r\n			<textarea id="f-meta-tags" name="f-meta-tags">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n			<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n			</div>\r\n		</div>\r\n	</div> \r\n</div> '),__p+="\r\n\r\n\r\n\r\n</form>";return __p}}),define("content/category-sections/merchandising/manage-collections/templates/sub-collection-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n    <td class="left-align indented-s">'+(null==(__t=name)?"":__t)+'</td>\r\n    <td class="left-align">\r\n        '+(null==(__t=collectionType)?"":__t)+'\r\n    </td>\r\n    <td>\r\n        <div class="centered-content-container hide-overflow">\r\n            <input '+(null==(__t=parentActive&&active?"checked":"")?"":__t)+' type="checkbox" class="on-off-switch" id="'+(null==(__t="f-"+id)?"":__t)+'" name="'+(null==(__t="f-"+id)?"":__t)+'"/>\r\n            <label for="'+(null==(__t="f-"+id)?"":__t)+'" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n        </div>\r\n    </td>\r\n    <td>\r\n        <button class="icon icon-btn icon-2x icon-edit"></button>\r\n    </td>\r\n    <td>\r\n        <button class="icon icon-btn icon-2x icon-trash"></button>\r\n    </td>\r\n</tr>';return __p}}),define("content/category-sections/merchandising/manage-collections/views/sub-collection-view",["backbone","../templates/sub-collection-tpl","../collections/collection-collection"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){var t=this;this.parent=e.parent,this.parentCollection=n.get(this.model.get("parent")),this.listenTo(n,"remove",function(e){e===this.model&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){var e=this.model.toJSON();return e.parentActive=this.parentCollection.get("active"),this.setElement(this.template(e)),this.delegateEvents(),this},events:{"click .icon-edit":"handleEdit","click .icon-trash":"handleDelete","change .on-off-switch":"handleSwitch"},handleEdit:function(){this.parent.handleEdit(this.model)},handleDelete:function(){GlobalEvents.trigger("form:delete",function(){var e=n.get(this.model.get("parent")).get("children");e.splice(e.indexOf(this.model.get("id")),1),n.remove(this.model)}.bind(this))},handleSwitch:function(e){this.model.set("active",e.target.checked)}});return i}),define("content/shared/models/blank-model",["backbone"],function(e){var t=e.Model.extend({});return t}),define("content/shared/collections/blank-collection",["backbone","../models/blank-model"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("content/category-sections/merchandising/manage-collections/views/create-edit-collection-view",["backbone","../templates/create-edit-collection-tpl","components/featured-product/views/featured-product-view","../collections/collection-collection","../models/collection-model","./sub-collection-view","components/featured-product/collections/featured-product-collection","content/shared/collections/blank-collection","global-events","jqueryval","jqueryui"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({template:t,tagName:"div",id:"m-create-edit-collection",render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),e.delegateEvents(),e.cacheElem(),e.featuredProductView=new n({collection:new a(e.model.get("featuredProducts")),title:e.model.get("parent")?"Selected Subcollection Products":"Selected Collection Products",selectAll:!0}),e.$productContainer.append(e.featuredProductView.render().$el),e.subCollections=[],0===e.model.get("parent")&&e.model.get("children").forEach(function(t){e.subCollections.push(i.get(t))}),this.addAllSubCollections(),this.applyAccordion(),this.applyToolTips(),this.applyDates(),this.validateForm(),this},cacheElem:function(){this.$optional=this.$el.find("#optional"),this.$accordion=this.$el.find("#accordion"),this.$productContainer=this.$el.find("#featured-products"),this.$subCollectionList=this.$el.find("#sub-collection-list"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$image1Preview=this.$el.find("#f-image-1-preview"),this.$image2Preview=this.$el.find("#f-image-2-preview"),this.$image3Preview=this.$el.find("#f-image-3-preview"),this.$image4Preview=this.$el.find("#f-image-4-preview"),this.$image5Preview=this.$el.find("#f-image-5-preview"),this.$name=this.$el.find("#f-name"),this.$active=this.$el.find("#f-active"),this.$sharingActive=this.$el.find("#f-sharing-active"),this.$subHeaderActive=this.$el.find("#f-subHeader-active"),this.$subTitle=this.$el.find("#f-sub-title"),this.$startDate=this.$el.find("#f-start-date"),this.$endDate=this.$el.find("#f-end-date"),this.$promoDesc=this.$el.find("#f-promo-desc"),this.$imageUrl1=this.$el.find("#f-image-url-1"),this.$imageUrl2=this.$el.find("#f-image-url-2"),this.$imageUrl3=this.$el.find("#f-image-url-3"),this.$imageUrl4=this.$el.find("#f-image-url-4"),this.$imageUrl5=this.$el.find("#f-image-url-5"),this.$metaDesc=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$img1=this.$el.find("#f-image-1"),this.$img2=this.$el.find("#f-image-2"),this.$img3=this.$el.find("#f-image-3"),this.$img4=this.$el.find("#f-image-4"),this.$img5=this.$el.find("#f-image-5"),this.$tip=this.$el.find(".tooltip-change"),this.$hideSubCollectionArea=this.$el.find("#hide-SubCollectionArea"),this.$minProdError=this.$el.find("#min-products-error")},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #new-btn":"handleAdd","click #delete-btn":"handleDelete","click #f-image-url-1":"handleFileUpload","click #f-image-url-2":"handleFileUpload","click #f-image-url-3":"handleFileUpload","click #f-image-url-4":"handleFileUpload","click #f-image-url-5":"handleFileUpload","change #f-subHeader-active":"handlesubHeaderCollectionActiveToggle"},requireImg:function(e){var t=this,n=e.find("img");console.log(n.attr("src")),""!==n.attr("src")?t.hideImgError(e):t.showImgError(e)},showMinError:function(){var e=this;l.trigger("form:invalid",this.$tip),this.$minProdError.fadeIn(200),setTimeout(function(){e.$minProdError.fadeOut(200)},1e4)},minSelected:function(e){var t=this.featuredProductView.collection.where({featured:!0}).length;return t>=e?!0:!1},handleSave:function(){var e=this;if("Teleflora"!==this.model.get("collectionType")&&(0!==this.model.get("parent")?(e.requireImg(this.$img1),e.requireImg(this.$img2)):(e.requireImg(this.$img1),e.requireImg(this.$img2),e.requireImg(this.$img3),e.requireImg(this.$img4),e.requireImg(this.$img5)),this.$el.find(".image-form-section.error").is("*")))return l.trigger("form:invalid",this.$tip),!1;if(!e.minSelected(1))return e.showMinError(),!1;if(this.$createEditForm.valid()){this.model.set({name:this.$name.val().trim(),active:this.$active.is(":checked"),sharingActive:this.$sharingActive.is(":checked"),subHeaderActive:this.$subHeaderActive.is(":checked"),subTitle:this.$subTitle.val().trim(),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),promoDesc:this.$promoDesc.val().trim(),imgUrl1:this.$image1Preview.attr("src"),imgUrl2:this.$image2Preview.attr("src"),imgUrl3:this.$image3Preview.attr("src"),imgUrl4:this.$image4Preview.attr("src"),featuredProducts:this.featuredProductView.collection.toJSON()}),i.get(this.model)||(this.model.set("id",(new Date).getTime()),i.add(this.model),this.model.get("parent")&&i.get(this.model.get("parent")).get("children").push(this.model.get("id"))),0===this.model.get("parent")&&this.model.set({metaDesc:this.$metaDesc.val().trim(),metaTags:this.$metaTags.val().trim(),metaTitle:this.$metaTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim()}),l.trigger("form:save",this.$tip),this.showHome()}else l.trigger("form:invalid",this.$tip)},showImgError:function(e){$(e).addClass("error"),$(e).append('<label class="error">This image is required</label>')},hideImgError:function(e){$(e).removeClass("error"),$(e).find("label.error").remove()},handleDelete:function(){var e=this;l.trigger("form:delete",function(){i.remove(e.model),e.parent.showHome()})},handleCancel:function(){l.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handlesubHeaderCollectionActiveToggle:function(){var e=this.$subHeaderActive.is(":checked");e===!0?this.$hideSubCollectionArea.show():this.$hideSubCollectionArea.hide()},showHome:function(){this.parent.showHome()},addSubCollection:function(e){if(e){{var t=new r({model:e,parent:this});e.get("parent")}this.$subCollectionList.append(t.render().el)}},addAllSubCollections:function(){this.$subCollectionList.empty(),this.subCollections.forEach(this.addSubCollection,this)},handleEdit:function(e){this.parent.showCreateEdit(e)},handleAdd:function(){var e=new o;e.set("parent",this.model.get("id")),this.handleEdit(e)},handleFileUpload:function(e){var t,n,i,o=this,r=e.currentTarget.id;r===o.$imageUrl1[0].id?(n=o.$image1Preview,t=1,o.model.get("parent")||(i="Logo")):r===o.$imageUrl2[0].id?(n=o.$image2Preview,t=2):r===o.$imageUrl3[0].id?(n=o.$image3Preview,t=3):r===o.$imageUrl4[0].id?(n=o.$image4Preview,t=4):r===o.$imageUrl5[0].id&&(n=o.$image5Preview,t=5),i="Logo",l.trigger("form:image-upload",{cb:function(e){n.prop("src",e),o.hideImgError(o.$el.find("#f-image-"+t))},active:n.prop("src"),name:i})},applyAccordion:function(){var e=this;this.$optional.click(function(){var t=$(this);return e.$accordion.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t)},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t)},dateFormat:"mm/dd/y"})},validateForm:function(){this.$createEditForm.validate({rules:{"f-meta-title":"noCarets","f-start-date":"dateCustom","f-end-date":"dateCustom","f-meta-keywords":"noCarets","f-meta-desc":"noCarets","f-image-1-preview":{required:!0,accept:"image/jpg, image/jpeg, image/png"},"f-image-2-preview":{required:!0,accept:"image/*"},"f-image-3-preview":{required:!0,accept:"image/*"},"f-image-4-preview":{required:!0,accept:"image/*"},"f-image-5-preview":{required:!0,accept:"image/*"}}})}});return new c}),define("content/category-sections/merchandising/manage-collections/views/manage-collections-view",["backbone","./manage-collections-home-view","./create-edit-collection-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){i.trigger("form:cancel",function(){n.model=e,this.replaceVisible(n)}.bind(this))}});return new o}),define("content/category-sections/common/category-settings/templates/category-settings-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Category Settings</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Select the options you want to give your customers. Do you want them to be able to filter by price or by flower? Use this page to control your categories.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Category View Settings</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n\r\n		<div class="col-6">\r\n			<label for="f-page-layout">Category Page Layout</label>\r\n			<div class="select-container">\r\n			    <select id="f-page-layout" name="f-page-layout">\r\n			        <option selected disabled hidden value="'+(null==(__t=layout)?"":__t)+'">'+(null==(__t=layout)?"":__t)+'</option>\r\n			        <option value="Large Images" preview="catlayout-1">Large Images</option>\r\n			        <option value="Small Images" preview="catlayout-2">Small Images</option>\r\n			    </select>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="col-6">\r\n			<div class="label">Quick View in Products Grid<i title="The Quick View option allows your customers to easily add products to the basket directly from the category page." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=quickViewActive?"checked":"")?"":__t)+' type="checkbox" id="f-quick-view-active" name="f-quick-view-active" class="on-off-switch" />\r\n			<label for="f-quick-view-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-6">\r\n			<div class="label">Category Page Preview</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6">\r\n			<img ',__p+="Small Images"==layout?'src="/images/mock/catlayout-1.png"':'src="/images/mock/catlayout-2.png"',__p+=' class="categoryImage">\r\n		</div>\r\n	</div>\r\n\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Merchandising</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Disable Automatic Merchandising</div>\r\n			<input '+(null==(__t=disableTFMerchandising?"checked":"")?"":__t)+' type="checkbox" id="f-merchandising" name="f-merchandising" class="on-off-switch" />\r\n			<label for="f-merchandising" class="on-off-switch-label">\r\n				<div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<div class="label">Disable New Teleflora Categories<i title="This will automatically set any new non-custom categories to inactive so they will not appear on your site. This applies to Teleflora categories as well as group level categories." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=disableTFCategories?"checked":"")?"":__t)+' type="checkbox" id="f-tfcats" name="f-tfcats" class="on-off-switch" />\r\n			<label for="f-tfcats" class="on-off-switch-label">\r\n				<div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</div>	\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">\r\n				Attributes for Filtering Category Products\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-2">Order</th>\r\n						<th class="col-8">Attributes</th>\r\n						<th class="col-2">Status</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="filter-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div id="price-band-container" class="row row-spaced panel '+(null==(__t=showPriceBand?"":"hidden-alt")?"":__t)+'"></div>';return __p}}),define("content/category-sections/common/category-settings/models/category-settings-model",[],function(){var e=Backbone.Model.extend({url:"/mock/user-category-settings.json",defaults:{quickViewActive:!0,layout:"Small Images",showPriceBand:!1,disableTFMerchandising:!1,disableTFCategories:!1}});
return new e}),define("content/category-sections/common/category-settings/models/filter-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,order:null,attribute:"",active:!0}});return t}),define("content/category-sections/common/category-settings/collections/filter-collection",["backbone","../models/filter-model"],function(e,t){var n=e.Collection.extend({url:"/mock/filters.json",model:t,comparator:function(e){return e.get("order")}});return new n}),define("content/category-sections/common/category-settings/templates/filter-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td>'+(null==(__t=order)?"":__t)+"</td>\r\n	<td>"+(null==(__t=attribute)?"":__t)+'</td>\r\n	<td>\r\n		<div class="centered-content-container">\r\n		<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="filter-'+(null==(__t=id)?"":__t)+'" name="filter-'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n	    \r\n	    <label for="filter-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n	        <div class="on-off-switch-state">on</div>\r\n	    </label>\r\n	    </div>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/common/category-settings/views/filter-view",["backbone","../templates/filter-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))},render:function(){return this.delegateEvents(),this},events:{"click .on-off-switch":"handleToggle"},handleToggle:function(e){"Price"===this.model.get("attribute")&&this.parent.togglePriceBandContainer(e),this.model.set("active",e.currentTarget.checked)}});return n}),define("text!content/category-sections/common/category-settings/templates/price-band-container-tpl.html",[],function(){return'<div>\r\n	<div class="row panel alert-panel hidden">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					You have reached the maximum number of price ranges allowed.<br>Please remove price ranges you have selected if you wish to add more.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<!-- <div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div> -->\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">\r\n				Select Price Ranges\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6">\r\n			<h4 class="title">Selected Price Ranges</h4>\r\n			<table class="table-list alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-2">Rank</th>\r\n						<th class="col-8">Price Range</th>\r\n						<th class="col-2">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="price-band-active"></tbody>\r\n			</table>\r\n		</div>\r\n		<div class="col-6">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<h4 class="title pull-left">Price Ranges</h4><i title="Which price ranges would you like to offer? Turn off settings that are too high or too low, and set the order of your price range." class="icon icon-tool-tip x-space-s"></i>\r\n				</div>\r\n			</div>\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<ul id="price-band-all" class="listing"></ul>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("content/category-sections/common/category-settings/models/price-band-model",[],function(){var e=Backbone.Model.extend({defaults:{lower:0,upper:1/0,active:!1},initialize:function(){this.set("priceRangeString",this.toString())},toString:function(){var e=this.get("lower"),t=this.get("upper"),n="";return e&&(n+="$"),n+=e,null===t?n+=" +":(n+=" - $",n+=t),n}});return e}),define("content/category-sections/common/category-settings/collections/price-band-collection",["../models/price-band-model"],function(e){var t=Backbone.Collection.extend({url:"/mock/user-price-bands.json",model:e,initialize:function(){var e=this;e.on("add remove",e.sortAndSetOrder),e.listenTo(e,"change:active",function(){e.setOrder()})},getActiveSorted:function(){return this.getActive().sort(this.comparator)},getActive:function(){return this.where({active:!0})},setOrder:function(){var e=this.getActiveSorted().map(function(e,t){return e.set("order",t+1),e});this.set(e,{remove:!1})},comparator:function(e,t){var n=e.get("lower"),i=e.get("upper")||1/0,o=t.get("lower"),r=t.get("upper")||1/0;return o+r>n+i||o>n?-1:1}});return new t}),define("content/category-sections/common/category-settings/templates/active-price-band-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<tr>\r\n	<td>"+(null==(__t=order)?"":__t)+"</td>\r\n	<td>"+(null==(__t=priceRangeString)?"":__t)+'</td>\r\n	<td>\r\n		<button type="button" class="icon icon-btn icon-trash icon-2x"></button>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/common/category-settings/views/active-price-band-view",["../templates/active-price-band-tpl"],function(e){var t=Backbone.View.extend({template:e,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){this.model.set("active",!1),this.parent.$priceBandAlert.addClass("hidden")}});return t}),define("content/category-sections/common/category-settings/templates/all-price-band-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<li class="clickable">'+(null==(__t=priceRangeString)?"":__t)+' <button type="button" class="icon icon-btn '+(null==(__t=active?"icon-added":"icon-add")?"":__t)+' pull-right"></button></li>';return __p}}),define("content/category-sections/common/category-settings/views/all-price-band-view",["underscore","backbone","../templates/all-price-band-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(e){this.setElement(this.template(this.model.toJSON())),this.listenTo(this.model,"change:active",this.handleChange),this.collection=e.collection,this.parent=e.parent},render:function(){return this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$icon=this.$el.find(".icon")},events:{click:"toggleAdded"},toggleAdded:function(){this.model.get("active")?(this.model.set("active",!1),this.parent.$priceBandAlert.addClass("hidden")):this.collection.getActive().length<6?this.model.set("active",!0):this.parent.$priceBandAlert.removeClass("hidden")},handleChange:function(e){var t=e.get("active");t?(this.$icon.removeClass("icon-add"),this.$icon.addClass("icon-added")):(this.$icon.removeClass("icon-added"),this.$icon.addClass("icon-add"))}});return i}),define("content/category-sections/common/category-settings/views/price-band-container-view",["backbone","text!../templates/price-band-container-tpl.html","../collections/price-band-collection","./active-price-band-view","./all-price-band-view","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,render:function(){var e=this;return e.setElement(e.template),n.fetchCustom().done(function(){e.priceBandCollection=n.deepClone(),e.priceBandCollection.setOrder(),e.stopListening(),e.listenTo(e.priceBandCollection,"change:active",function(){r.trigger("form:editing"),e.addAllActive()}),e.cacheElem(),e.addAllListings(),e.addAllActive()}),e},cacheElem:function(){this.$activeList=this.$el.find("#price-band-active"),this.$allList=this.$el.find("#price-band-all"),this.$priceBandAlert=this.$el.find(".alert-panel")},addListing:function(e){var t=new o({model:e,collection:this.priceBandCollection,parent:this});this.$allList.append(t.render().el)},addAllListings:function(){this.$allList.empty(),this.priceBandCollection.each(this.addListing,this)},addActive:function(e){var t=new i({model:e,collection:this.priceBandCollection,parent:this});this.$activeList.append(t.render().el)},addAllActive:function(){this.$activeList.empty(),this.priceBandCollection.getActiveSorted().forEach(this.addActive,this)},save:function(){n.set(this.priceBandCollection.toJSON())}});return new a}),define("content/category-sections/common/category-settings/views/category-settings-view",["underscore","backbone","../templates/category-settings-tpl","../models/category-settings-model","../collections/filter-collection","./filter-view","../views/price-band-container-view","global-events","jqueryui"],function(e,t,n,i,o,r,a,s){var l=t.View.extend({tagName:"form",id:"f-category-settings",template:n,render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template(i.toJSON())),e.delegateEvents(),e.cacheElem(),o.fetchCustom().done(function(){e.filterCollection=o.deepClone(),e.listenTo(e.filterCollection,"sort",e.addAllFilters),e.addAllFilters(),e.applySortable(e.$filterList,e.filterCollection)}),e.$priceBandContainer.append(a.render().el),e.applyToolTips()}),e},cacheElem:function(){this.$priceBandContainer=this.$el.find("#price-band-container"),this.$filterList=this.$el.find("#filter-list"),this.$quickViewActive=this.$el.find("#f-quick-view-active"),this.$layout=this.$el.find("#f-page-layout"),this.$categoryImage=this.$el.find(".categoryImage"),this.$tip=this.$el.find(".tooltip-change"),this.$merch=this.$el.find("#f-merchandising"),this.$tfcats=this.$el.find("#f-tfcats")},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","change #f-page-layout":"changeLayout","click #f-merchandising":"handleMerchChange","click #f-tfcats":"handleCatsChange"},togglePriceBandContainer:function(e){e.target.checked?this.$priceBandContainer.fadeIn(200):this.$priceBandContainer.fadeOut(200)},handleMerchChange:function(e){var t=this.$merch;e.preventDefault(),s.trigger("modal:custom",{template:{title:"Disable Merchandising",text:"Are you sure you want to change this setting? If this setting is turned on, none of your current non-custom categories will receive any merchandising updates."},confirmFn:function(){t.prop("checked",!t.prop("checked"))},cancelFn:function(){}})},handleCatsChange:function(e){var t=this.$tfcats;e.preventDefault(),s.trigger("modal:custom",{template:{title:"Disable New Teleflora Categories",text:"Are you sure you want to change this setting? If this setting is turned on, this will automatically set any new non-custom categories to inactive so they will not appear on your site. This applies to Teleflora categories as well as group level categories."},confirmFn:function(){t.prop("checked",!t.prop("checked"))},cancelFn:function(){}})},handleSave:function(){o.set(this.filterCollection.toJSON()),i.set({quickViewActive:this.$quickViewActive.is(":checked"),layout:this.$layout.find("option:selected").val(),showPriceBand:!!o.where({attribute:"Price",active:!0}).length}),a.save(),s.trigger("form:save",this.$tip)},handleCancel:function(){s.trigger("form:reset",this.render.bind(this))},changeLayout:function(){this.$categoryImage.attr("src","/images/mock/"+$("option:selected",this.$layout).attr("preview")+".png")},addFilter:function(e){var t=new r({model:e,parent:this});this.$filterList.append(t.render().el)},addAllFilters:function(){this.$filterList.empty(),this.filterCollection.each(this.addFilter,this)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(e,t){var n=this;e.sortable({helper:n.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.children().each(function(e){var n=$(this).data("id");t.get(n).set("order",e+1)}),t.sort()}})}});return new l}),define("content/category-sections/merchandising/navigation/templates/site-nav-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Site Navigation Menu</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage your site\'s top navigation menu. You can create anything as simple as a small set of links to specific categories to a robust mega menu showcasing things like featured collections or products. \r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<button type="button" id="new-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> Add Menu</button> \r\n			<div class="panel-title y-space-top-m">Main Menus</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-1"></th>\r\n						<th class="col-7 left-align">Label </th>\r\n						<th class="col-2 left-align"> Type </th>\r\n						<th class="col-1">Status</th>\r\n						<th class="col-1">Edit</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="section-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n\r\n</div>';return __p}}),define("content/category-sections/merchandising/navigation/models/site-nav-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,title:"New Menu",sectionActive:!0,contentType:"",contentLabel:"",columns:"",dropdown:!0,showMore:!1,menuLink:"",html:"",type:"",entries:{columns:"1",dropdown:!0,showMore:!0,menuLink:"",contentType:"",contentLabel:"New Nav Item",navContent:'<div class="col-12">Nav content goes here</div>',html:"",content:[]}}});return t}),define("content/category-sections/merchandising/navigation/collections/site-nav-collection",["backbone","../models/site-nav-model"],function(e,t){var n,i=e.Collection.extend({url:"/mock/user-navigation.json",model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,i,o){for(n=o.index,j=i.length;j>n;++n)i.at(n).set("sequence",n+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("title")},descending:function(e,t){return e.get("title")>t.get("title")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return new i}),define("content/category-sections/merchandising/navigation/templates/site-nav-create-edit-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'Navigation Menu</h2>\r\n			<div class="btn-panel">\r\n				',"Custom"===type&&(__p+=' <button type="button" id="delete-btn" class="btn btn-cancel">Delete</button> '),__p+="\r\n				","Teleflora"===type&&(__p+=' <button type="button" id="reset-btn" class="btn btn-other">Reset</button> '),__p+='\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">\r\n					<i class="icon icon-add icon-lg"></i>Save\r\n				</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage your site\'s top navigation menu. You can create anything as simple as a small set of links to specific categories to a robust mega menu showcasing things like featured collections or products.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-4 form-section">\r\n		<div class="label">Menu Name<i title="Text should go here." class="icon icon-tool-tip x-space-s"></i></div>\r\n		<input type="text" id="f-nav-group-name" name="f-nav-group-name" value="'+(null==(__t=id?title:"")?"":__t)+'">\r\n	</div>\r\n	<div class="col-3 form-section">\r\n		<div class="label">Dropdown Menu<i title="If this setting is turned on, this menu will be a dropdown-style mega menu. If this is turned off, this will simply be a static link on your site." class="icon icon-tool-tip x-space-s"></i></div>\r\n		<input '+(null==(__t=dropdown?"checked":"")?"":__t)+' type="checkbox" id="f-dropdown" name="f-dropdown" class="switch on-off-switch">\r\n		<label for="f-dropdown" class="on-off-switch-label">\r\n		<div class="on-off-switch-state">on</div></label>\r\n	</div>	\r\n	<div class="col-4 form-section" id="f-menu-link-wrap">\r\n		<div class="label">Link URL<i title="If you have the dropdown setting turned off, use this field to give a URL for the link." class="icon icon-tool-tip x-space-s"></i></div>\r\n		<input type="text" id="f-menuLink" name="f-menuLink" value="'+(null==(__t=menuLink)?"":__t)+'">		\r\n	</div>\r\n</div>\r\n\r\n<div id="tabs" class="row row-spaced ui-tabs ui-widget ui-widget-content ui-corner-all">\r\n	<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">\r\n	    <li class="ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="site-activation" aria-labelledby="ui-id-6" aria-selected="true" aria-expanded="true">\r\n		    <a class="general-settings-tab ui-tabs-anchor" href="#site-activation" role="presentation" tabindex="-1" id="ui-id-6">\r\n			    <div id="nav-menu-group">'+(null==(__t=title)?"":__t)+'</div>\r\n		    </a>\r\n	    </li>\r\n	</ul>\r\n	<div id="Menu-items" class="ui-tabs-panel ui-widget-content ui-corner-bottom">\r\n		<ul id="f-item-list"></ul>\r\n		<div class="clear clearfix"></div>\r\n	</div>\r\n</div>\r\n<div class="row row-spaced y-space-top-l"></div>\r\n<div class="row row-spaced" id="f-item-edit-area"></div>';return __p}}),define("content/category-sections/merchandising/navigation/templates/nav-item-create-edit-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n\r\n	<div class="col-12 panel y-space-bottom-m">\r\n		<div class="row y-space-bottom-m">\r\n			<div class="col-12">\r\n				<div class="btn-panel" id="f-nav-item-btn-panel">\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n					<button type="button" id="cancel-btn" class="btn btn-other pull-right">Cancel</button>\r\n					<button type="button" id="delete-btn" class="btn btn-cancel pull-right">Delete</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>			\r\n				<div class="panel-title y-space-top-m">Menu Section</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row panel alert-panel hidden-alt" id="min-products-error">\r\n		  <div class="col-12">\r\n			<div class="row">\r\n			  <div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			  </div>\r\n			  <div class="col-11 alert-text">\r\n				Navigation menu product sections must have at least 1 product featured in them. <br>\r\n				Please select at least 1 product below before saving.\r\n			  </div>\r\n			</div>\r\n		  </div>\r\n		</div>\r\n\r\n		<div class="row panel alert-panel hidden-alt" id="min-cats-error">\r\n		  <div class="col-12">\r\n			<div class="row">\r\n			  <div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			  </div>\r\n			  <div class="col-11 alert-text">\r\n				Navigation menu category sections must have at least 1 category featured in them. <br>\r\n				Please select at least 1 category below before saving.\r\n			  </div>\r\n			</div>\r\n		  </div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section select-container">\r\n				<label for="f-content-type">Nav Item Type<i class="icon icon-tool-tip x-space-s" title=""></i></label>\r\n					<select id="f-content-type" name="f-content-type">\r\n				    	<option selected disabled hidden value="'+(null==(__t=contentType)?"":__t)+'">'+(null==(__t=contentType)?"":__t)+'</option>\r\n				    	<option value="Categories">Categories</option>\r\n				    	<option value="Collections">Collections</option>\r\n				    	<option value="Custom HTML">Custom HTML</option>\r\n				    	<option value="Custom List">Custom List</option>\r\n				    	<option value="Price Ranges">Price Ranges</option>\r\n				    	<option value="Products">Products</option>\r\n				    	<option value="Upcoming Occasions">Upcoming Occasions</option>\r\n					</select>\r\n			</div>\r\n		</div>\r\n		<form id="create-edit-form" name="create-edit-form">\r\n		<div class="row row-spaced y-space-top-m" id="f-content-type-area">\r\n			\r\n		</div>\r\n		</form>\r\n		\r\n	</div>\r\n';return __p}}),define("content/category-sections/merchandising/navigation/templates/item-custom-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-12">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Custom List Label<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<input type="text" name="f-custom-list-label" id="f-custom-list-label" value="'+(null==(__t=contentLabel)?"":__t)+'">\r\n		</div>\r\n		<div class="col-6 form-section select-container">\r\n			<div class="label">Column Width<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<select name="f-custom-list-columns" id="f-custom-list-columns">\r\n		    	<option selected disabled hidden value="'+(null==(__t=columns)?"":__t)+'">'+(null==(__t=columns)?"":__t)+'</option>\r\n		    	<option value="1">1 Column</option>\r\n		    	<option value="2">2 Columns</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-1">Sequence</th>\r\n						<th class="col-4 left-align">Label</th>\r\n						<th class="col-5 left-align">URL</th>\r\n						<th class="col-1">Open In New Window</th>\r\n						<th class="col-1">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="custom-list-list"></tbody>\r\n			</table>	\r\n		</div>	\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 y-space-top-s">\r\n			<button type="button" id="add-new-customLink-btn" class="btn btn-submit"><i class="icon icon-add icon-lg"></i> Add Link</button> \r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced y-space-top-m">\r\n		<div class="col-12">\r\n			<div class="panel-title">\r\n				"Show More" Link\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3 form-section">\r\n			<div class="label">Enable "Show More" Link</div>\r\n			<input '+(null==(__t=showMore?"checked":"")?"":__t)+' type="checkbox" id="f-showMore" name="f-showMore" class="switch on-off-switch">\r\n			<label for="f-showMore" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced row-show-more hidden-alt">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Link Label</div>\r\n			<input type="text" name="f-showMoreLabel" class="f-showMoreLabel" id="f-showMoreLabel" value="'+(null==(__t=showMoreLabel)?"":__t)+'">\r\n		</div>\r\n		<div class="col-6 form-section">\r\n			<div class="label">Link URL</div>\r\n			<input type="text" name="f-showMoreLink" class="f-showMoreLink" id="f-showMoreLink" value="'+(null==(__t=showMoreLink)?"":__t)+'">\r\n		</div>			\r\n	</div>\r\n	\r\n</div>';return __p}}),define("content/category-sections/merchandising/navigation/templates/item-custom-list-child-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td class="form-section">\r\n		<input type="text" name="f-custom-list-label-'+(null==(__t=sequence)?"":__t)+'" id="f-custom-list-label-'+(null==(__t=sequence)?"":__t)+'" class="f-custom-list-label" value="'+(null==(__t=label)?"":__t)+'">\r\n	</td>\r\n	<td class="form-section">\r\n		<input type="text" name="f-custom-list-url-'+(null==(__t=sequence)?"":__t)+'" id="f-custom-list-url-'+(null==(__t=sequence)?"":__t)+'" class="f-custom-list-url" value="'+(null==(__t=url)?"":__t)+'">\r\n	</td>\r\n	<td class="center-align form-section">\r\n		<input '+(null==(__t=newWindow?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="f-new-window-active-"+sequence)?"":__t)+'" name="'+(null==(__t="f-new-window-active-"+sequence)?"":__t)+'" class="on-off-switch" />\r\n        <label for="'+(null==(__t="f-new-window-active-"+sequence)?"":__t)+'" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>\r\n	</td>		\r\n	<td><button type="button" class="icon icon-btn icon-trash icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/merchandising/navigation/views/item-custom-list-child-view",["backbone","../templates/item-custom-list-child-tpl","global-events"],function(e,t){return e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$list=this.$el.find("#custom-list-list")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}})}),define("content/category-sections/merchandising/navigation/views/item-custom-list-view",["backbone","../templates/item-custom-list-tpl","./item-custom-list-child-view","content/shared/collections/blank-collection","global-events"],function(e,t,n,i,o){var r=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.collection=new i(this.model.get("content")),this.handleShowMoreToggle(),this.setCustomListCollection(),this.addAllListItems(),e.applySortable(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick","click #add-new-customLink-btn":"handleAddCustomLink","change #f-showMore":"handleShowMoreToggle"},handleShowMoreToggle:function(){var e=this;this.$toggle.is(":checked")?e.$toggleRow.fadeIn(200):e.$toggleRow.fadeOut(200)},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$list=this.$el.find("#custom-list-list"),this.$toggle=this.$el.find("#f-showMore"),this.$toggleRow=this.$el.find(".row-show-more")},setCustomListCollection:function(){this.collection&&this.stopListening(this.collection),this.collection=new i(this.model.get("content")),this.listenTo(this.collection,"add",this.addListItem)},handleAddCustomLink:function(){this.collection.add({id:null,sequence:null,label:"",url:"",newWindow:!0})},addListItem:function(e){var t=new n({model:e,collection:this.collection,parent:this});this.$list.append(t.render().el)},addAllListItems:function(){this.$list.empty(),this.collection.each(this.addListItem,this)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#custom-list-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionList.children().each(function(e){var t=$(this).data("id");SiteNavCollection.where({id:t})[0].set("sequence",e+1)}),SiteNavCollection.changeSort("sequence"),SiteNavCollection.sort(),SiteNavCollection.trigger("resequenced"),o.trigger("form:editing")}})},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}});return new r}),define("content/category-sections/merchandising/navigation/templates/item-custom-html-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-12">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Custom HTML Label</div>\r\n			<input type="text" name="f-custom-html-label" id="f-custom-html-label" value="'+(null==(__t=contentLabel)?"":__t)+'">\r\n		</div>\r\n		<div class="col-6 form-section select-container">\r\n			<div class="label">Column Width</div>\r\n			<select name="f-custom-html-columns" id="f-custom-html-columns">\r\n		    	<option selected disabled hidden value="'+(null==(__t=columns)?"":__t)+'">'+(null==(__t=columns)?"":__t)+'</option>\r\n		    	<option value="1">1 Column</option>\r\n		    	<option value="2">2 Columns</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced y-space-top-m">\r\n		<div class="col-12 form-section">\r\n			<div class="label">Custom HTML Block Content</div>\r\n			<textarea name="f-custom-html-content" id="f-custom-html-content" class="size-2">'+(null==(__t=html)?"":__t)+"</textarea>\r\n		</div>\r\n	</div>\r\n	\r\n</div>";return __p}}),define("content/category-sections/merchandising/navigation/views/item-custom-html-view",["backbone","../templates/item-custom-html-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.applyTinymce(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$list=this.$el.find("#custom-list-list")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()
},applyTinymce:function(){tinymce.remove(),setTimeout(function(){tinymce.init({setup:function(e){e.on("change",function(){n.trigger("form:editing")})},selector:"textarea#f-custom-html-content",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1})},0)},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}});return new i}),define("content/category-sections/merchandising/navigation/templates/item-price-range-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-12">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Price Ranges Label<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<input type="text" name="f-price-range-label" id="f-price-range-label" value="'+(null==(__t=contentLabel)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	\r\n</div>';return __p}}),define("content/category-sections/merchandising/navigation/views/item-price-range-view",["backbone","../templates/item-price-range-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),this.cacheElem(),this.delegateEvents(),this},events:{},cacheElem:function(){},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}});return new n}),define("content/category-sections/merchandising/navigation/templates/item-collections-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-12">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Collections Label</div>\r\n			<input type="text" name="f-collections-label" id="f-collections-label" value="'+(null==(__t=contentLabel)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	\r\n</div>';return __p}}),define("content/category-sections/merchandising/navigation/views/item-collections-view",["backbone","../templates/item-collections-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),this.cacheElem(),this.delegateEvents(),this},events:{},cacheElem:function(){},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}});return new n}),define("content/category-sections/merchandising/navigation/templates/item-products-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-12">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Products Label<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<input type="text" name="f-products-label" id="f-products-label" value="'+(null==(__t=contentLabel)?"":__t)+'">\r\n		</div>\r\n		<div class="col-6 form-section select-container">\r\n			<div class="label">Column Width<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<select name="f-products-columns" id="f-products-columns">\r\n		    	<option selected disabled hidden value="'+(null==(__t=columns)?"":__t)+'">'+(null==(__t=columns)?"":__t)+'</option>\r\n		    	<option value="1 Column">1 Column</option>\r\n		    	<option value="2 Columns">2 Columns</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n\r\n	<div id="featured-product"></div>\r\n</div>';return __p}}),define("content/category-sections/merchandising/navigation/views/item-products-view",["backbone","../templates/item-products-tpl","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),this.featuredProductView&&this.featuredProductView.remove(),this.featuredProductView=new n({collection:new i(this.model.get("content")),maxNumberProducts:2,selectAll:!0}),this.cacheElem(),this.handleColumnsChange(),this.$featuredProduct.append(this.featuredProductView.render().el),this.delegateEvents(),this},events:{"change #f-products-columns":"handleColumnsChange"},cacheElem:function(){this.$featuredProduct=this.$el.find("#featured-product"),this.$columns=this.$el.find("#f-products-columns")},minSelected:function(e){var t=this.featuredProductView.collection.where({featured:!0}).length;return t>=e?!0:!1},handleColumnsChange:function(){var e=this.$columns.find("option:selected").val();"2 Columns"==e?(this.featuredProductView.remove(),this.featuredProductView=new n({collection:new i(this.model.get("content")),maxNumberProducts:4,selectAll:!0}),this.$featuredProduct.append(this.featuredProductView.render().el)):"4 Columns"==e?(this.featuredProductView.remove(),this.featuredProductView=new n({collection:new i(this.model.get("content")),maxNumberProducts:8,selectAll:!0}),this.$featuredProduct.append(this.featuredProductView.render().el)):this.featuredProductView=new n({collection:new i(this.model.get("content")),maxNumberProducts:4,selectAll:!0})},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}});return new o}),define("content/category-sections/merchandising/navigation/templates/item-categories-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='\r\n<div class="col-12">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Products Label</div>\r\n			<input type="text" name="f-products-label" id="f-products-label" value="'+(null==(__t=contentLabel)?"":__t)+'">\r\n		</div>\r\n		<div class="col-6 form-section select-container">\r\n			<div class="label">Column Width</div>\r\n			<select name="f-products-columns" id="f-products-columns">\r\n				';var colnum;1===columns?colnum="1 Column":2===columns?colnum="2 Columns":3===columns?colnum="3 Columns":4===columns&&(colnum="4 Columns"),__p+='\r\n		    	<option selected disabled hidden value="'+(null==(__t=columns)?"":__t)+'">'+(null==(__t=colnum)?"":__t)+'</option>\r\n		    	<option value="1">1 Column</option>\r\n		    	<option value="2">2 Columns</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n\r\n	<div id="parent-select" class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div class="panel-title">Parent</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-6 form-section">\r\n					<div id="edit-parent-container" class="row row-spaced">\r\n						<div class="col-12">\r\n							<label for="f-parentName">Parent Category</label>\r\n						</div>					\r\n						<div class="col-12">\r\n							<div class="row">\r\n							</div>\r\n\r\n							<div class="row row-spaced">\r\n								<div class="col-12">\r\n									<div id="parent-table" class="div-table '+(null==(__t=parent?"":"no-border")?"":__t)+'">\r\n									  <div class="div-table-body collapsed" id="parent-list"></div>\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>	\r\n			<div class="row">\r\n				<div class="col-12 form-section">\r\n					<div class="label">Selected Child Categories</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="featured-child-categories"></div>\r\n				</div>\r\n			</div>		\r\n		</div>\r\n	\r\n	</div>\r\n\r\n	<div class="row row-spaced y-space-top-m">\r\n		<div class="col-12">\r\n			<div class="panel-title">\r\n				"Show More" Link\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-4 form-section">\r\n			<div class="label">Enable "Show More" Link</div>\r\n			<input '+(null==(__t=showMore?"checked":"")?"":__t)+' type="checkbox" id="f-showMore" name="f-showMore" class="switch on-off-switch">\r\n			<label for="f-showMore" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n		</div>\r\n\r\n		<div class="col-8 form-section show-more-section">\r\n			<div class="label">Link Label</div>\r\n			<input type="text" name="f-showMoreLabel" id="f-showMoreLabel" value="'+(null==(__t=showMoreLabel)?"":__t)+'">\r\n		</div>\r\n		\r\n	</div>\r\n\r\n</div>'}return __p}}),define("content/category-sections/merchandising/navigation/templates/item-categories-child-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="'+(null==(__t=parent?"":"top-level-category")?"":__t)+" row "+(null==(__t=parent||visible?"":"hidden-alt")?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'">\r\n    <div class="parent-name '+(null==(__t=selected?"active":"clickable")?"":__t)+' clearfix">\r\n        <div class="left-align level-'+(null==(__t=level)?"":__t)+' col-12">\r\n            ',children.length&&(__p+='\r\n                <button type="button" id="outer" class="toggle-btn icon icon-btn icon-opened icon-2x"></button>\r\n            '),__p+="\r\n            "+(null==(__t=name)?"":__t)+'\r\n        </div>\r\n    </div>\r\n\r\n    <div class="nested-rows"></div>\r\n</div>';return __p}}),define("content/category-sections/merchandising/navigation/views/item-categories-child-view",["backbone","../templates/item-categories-child-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.level=e.level,this.selected=e.selected,this.visible=e.visible},render:function(){var e=this.model.toJSON();return e.level=this.level,e.selected=this.selected,e.visible=this.visible,this.setElement(this.template(e)),this.delegateEvents(),this},events:{"click .parent-name.clickable":"markAsActive","click .parent-name.active":"expandList"},expandList:function(){this.parent.expandList()},markAsActive:function(e){e.stopPropagation(),this.parent.setInactive(),this.$el.children(".parent-name").addClass("active").removeClass("clickable")}});return n}),define("components/general-product/templates/general-product-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced panel">\r\n	<div class="row panel alert-panel hidden">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					You have reached the maximum number of items allowed.<br>Please remove items you have selected if you wish to add more.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="'+(null==(__t=disabled?"col-12":"col-7")?"":__t)+'">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<h4 class="title pull-left">'+(null==(__t=activeTitle)?"":__t)+"</h4>\r\n\r\n					",hideGrids||hideLists||(__p+='\r\n					<div id="view-control" class="pull-right">\r\n						<button type="button" id="list-view" class="icon icon-btn icon-colored icon-list fa-lg"></button>\r\n						<button type="button" id="grid-view" class="icon icon-btn icon-colored icon-category fa-lg active"></button>\r\n					</div>\r\n					'),__p+='\r\n				</div>\r\n			</div>\r\n\r\n			<div id="product-container" class="scroll-container">\r\n				',hideLists||(__p+='\r\n				<table id="product-table" class="table-list alternate hidden-alt">\r\n					<thead>\r\n						<tr>\r\n							',disabled?__p+='\r\n							<th class="col-12 left-align">'+(null==(__t=activeTableTitle)?"":__t)+"</th>\r\n							":(__p+="\r\n								",images?(__p+="\r\n								<!-- statusactive used to create wedding-products tablehead -->\r\n									",statusactive?(__p+='\r\n										<th class="col-1 left-align">Sequence</th>\r\n										<th class="col-6 left-align">'+(null==(__t=activeTableTitle)?"":__t)+'</th>\r\n										<th class="col-3 left-align">Image</th>\r\n										',showCategoryID&&(__p+='\r\n										<th class="col-1">ID</th>\r\n										'),__p+='\r\n										<th class="col-1 center-align">Status</th>\r\n										<th class="col-1 right-align">Delete</th>\r\n									'):(__p+='\r\n									<th class="col-7 left-align">'+(null==(__t=activeTableTitle)?"":__t)+'</th>\r\n									<th class="col-2 left-align"></th>\r\n									',showCategoryID&&(__p+='\r\n										<th class="col-2">ID</th>\r\n									'),__p+='\r\n									<th class="col-2 right-align">Delete</th>\r\n									'),__p+="\r\n								"):(__p+='\r\n									<th class="col-10 left-align">'+(null==(__t=activeTableTitle)?"":__t)+"</th>\r\n									",showCategoryID&&(__p+='\r\n										<th class="col-2">ID</th>\r\n									'),__p+='\r\n									<th class="col-2 right-align">Delete</th>\r\n								'),__p+="\r\n							"),__p+='\r\n						</tr>\r\n					</thead>\r\n\r\n					<!--  List active products -->\r\n					<tbody id="product-list"></tbody>\r\n\r\n					 <img id="loader-overlay" class="hidden" src="/images/loader-transparent-background.png" style="position: absolute; z-index: 900; left: 0px; top: 0px;">\r\n\r\n					  <img id="spinner-gif" class="hidden" src="/images/spinner.gif" style="position: absolute; z-index: 1000; left: 220px; top: 160px; bottom: 5px;">\r\n				</table>\r\n				'),__p+="\r\n				",hideGrids||(__p+='\r\n				<div id="product-grid" class="'+(null==(__t=disabled?"grid-6-closed":"grid-4-closed")?"":__t)+' hidden-alt clearfix"></div>\r\n				'),__p+="\r\n			</div>\r\n		</div>\r\n\r\n	",disabled||(__p+='\r\n		<div class="col-5 form-section">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<h4 class="title pull-left">'+(null==(__t=allTitle)?"":__t)+"</h4>\r\n							\r\n							",nofilter||(__p+='\r\n								<button type="button" id="filter-view" class="icon icon-btn icon-colored icon-filter icon-lg pull-right"></button>\r\n\r\n								<div id="product-search-checkboxes" class="search-filters">\r\n									<div class="row row-spaced">\r\n										<div class="col-12">\r\n											<h3 class="pull-left no-margin">Filter by:</h3>\r\n											<button type="button" id="close-filter-view" class="icon icon-btn icon-x icon-lg pull-right"></button>\r\n										</div>\r\n									</div>\r\n\r\n\r\n\r\n									',typeFilter&&(__p+='\r\n									<div class="row">\r\n										<div class="clearfix">\r\n											<div class="col-12">\r\n												<div class="row">\r\n													<div class="col-12">\r\n														<div class="panel-title product-filter-title">Type</div>\r\n													</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n\r\n										<div class="row row-spaced">\r\n											<div class="col-6 center-align">\r\n												<label for="type-custom">Custom</label>\r\n												<input class="fill-container-width" data-key="type" data-value="Custom" type="checkbox" id="type-custom" checked >\r\n											</div>\r\n\r\n											<div class="col-6 center-align">\r\n												<label for="type-Teleflora">Teleflora</label>\r\n												<input class="fill-container-width" data-key="type" data-value="Teleflora" type="checkbox" id="type-Teleflora" checked>\r\n											</div>\r\n										</div>\r\n									</div>\r\n									'),__p+="\r\n									",statusFilter&&(__p+='\r\n									<div class="row">\r\n										<div class="clearfix">\r\n											<div class="col-12">\r\n												<div class="row">\r\n													<div class="col-12">\r\n														<div class="panel-title product-filter-title">Status</div>\r\n													</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n\r\n										<div class="row row-spaced">\r\n											<div class="col-6 center-align">\r\n												<label for="status-active">Active</label>\r\n												<input class="fill-container-width" data-key="active" data-value="true" type="checkbox" id="status-active" checked>\r\n											</div>\r\n\r\n											<div class="col-6 center-align">\r\n												<label for="status-inactive">Inactive</label>\r\n												<input class="fill-container-width" data-key="active" data-value="false" type="checkbox" id="status-inactive" checked>\r\n											</div>\r\n										</div>\r\n									</div>\r\n									'),__p+="\r\n\r\n								</div>\r\n							"),__p+='\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="'+(null==(__t=nosearch?"no-margin":"search-container no-margin")?"":__t)+'">\r\n				',nosearch||(__p+='<input id="product-search-input" type="text" placeholder="'+(null==(__t=allSearchPlaceholder)?"":__t)+'">'),__p+='\r\n				<div class="scroll-container">\r\n					<table id="product-search-table" class="table table-list hide-overflow">\r\n						<thead>\r\n							<tr>\r\n								<th data-attribute ="name" class="col-8 hidden">name</th>\r\n								<th data-attribute ="id" class="col-2 hidden">id</th>\r\n								<!-- <th data-attribute ="'+(null==(__t=activeAttribute)?"":__t)+'" class="col-2 hidden">'+(null==(__t=activeAttribute)?"":__t)+'</th> -->\r\n							</tr>\r\n						</thead>\r\n					<!-- List all products -->\r\n					<tbody id="product-search-list" class="search-list"></tbody>\r\n					</table>\r\n				</div>\r\n				',selectAll&&(__p+='\r\n				<div class="row">\r\n					<div class="col-6 y-space-top-s pull-right right-align">\r\n					  \r\n						 <button type="button" class="btn-xs btn-submit" id="f-select-all"> Select All</button>\r\n					</div>					\r\n				</div>\r\n				'),__p+="						\r\n			</div>\r\n		</div>\r\n	"),__p+="\r\n	</div>\r\n</div>";return __p}}),define("components/general-product/templates/active-featured-product-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'">\r\n	',statusactive&&(__p+='\r\n			<td class="center-align"><i class="icon icon-arrows icon-2x"></i></td>	\r\n	'),__p+='\r\n	\r\n	<td class="left-align textOverflow">'+(null==(__t=name)?"":__t)+"</td>\r\n\r\n	",images&&(__p+='\r\n		<td class="left-align">\r\n			',__p+=img?'\r\n				<img class="y-space-top-xs image-upload-sub" src="'+(null==(__t=img)?"":__t)+'" id="f-image-url-'+(null==(__t=id)?"":__t)+'">\r\n			':'\r\n				<button type="button" id="f-image-url-'+(null==(__t=id)?"":__t)+'" class="icon icon-btn icon-image icon-2x image-upload-sub"></button>\r\n			',__p+="\r\n		</td>\r\n	"),__p+="\r\n\r\n	<!-- for category ID, set to true as default. -->\r\n	",showCategoryID&&(__p+="\r\n		<td>"+(null==(__t=id)?"":__t)+"</td>\r\n	"),__p+="\r\n	<!-- End of category ID -->\r\n\r\n	<!-- for status button -->\r\n	",statusactive&&(__p+='\r\n		<td class="center-align">\r\n			<input '+(null==(__t=statusactive?"checked":"")?"":__t)+' type="checkbox"  id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch"/>\r\n			<label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n				<div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</td>\r\n	'),__p+="\r\n	<!-- end of status button -->\r\n\r\n  ",disabled||(__p+='\r\n	<td class="right-align">\r\n		<button type="button" class="icon icon-trash icon-btn icon-2x"></button>\r\n	</td>\r\n  '),__p+="\r\n</tr>";return __p}}),define("components/general-product/templates/active-featured-product-grid-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div data-id="'+(null==(__t=id)?"":__t)+'" class="grid-item hover-tip-overlay">\n  ',hoverTitle&&(__p+='\n  <div class="hover-tip">\n    <div class="row row-spaced center-align">\n      '+(null==(__t=name)?"":__t)+"\n    </div>\n  </div>\n  "),__p+='\n	<img src="'+(null==(__t=imgUrl)?"":__t)+'">\n\n  ',hoverTitle||(__p+='\n    <div class="row row-spaced center-align">\n      '+(null==(__t=name)?"":__t)+"\n    </div>\n  "),__p+="\n  ",disabled||(__p+='\n	<div class="row bottom-overlay">\n		<div class="col-12">\n			<button type="button" class="icon icon-trash icon-btn fa-lg pull-left"></button>\n		</div>\n	</div>\n  '),__p+="\n</div>";return __p}}),define("components/general-product/views/active-general-product-view",["underscore","backbone","../templates/active-featured-product-list-tpl","../templates/active-featured-product-grid-tpl","global-events"],function(e,t,n,i,o){var r=t.View.extend({template:{list:n,grid:i},initialize:function(e){this.disabled=e.disabled,this.parent=e.parent,this.listenTo(this.model,"change:"+this.parent.activeAttribute,this.remove),this.template=this.template[e.type]},render:function(){return viewModel=this.model.toJSON(),viewModel.active=this.model.get(this.parent.activeAttribute),viewModel.name=this.model.get(this.parent.nameAttribute),viewModel.hoverTitle=this.parent.options.hoverTitle,viewModel.images=this.parent.options.images,viewModel.statusactive=this.parent.options.statusactive,viewModel.statusTitle=this.parent.options.statusTitle,viewModel.img=this.model.get(this.parent.imgAttribute),viewModel.imgGroup=this.parent.options.imgGroup,viewModel.disabled=this.disabled,viewModel.showCategoryID=this.parent.options.showCategoryID,this.setElement(this.template(viewModel)),this.delegateEvents(),this.cacheElem(),this},events:{"click .icon-trash":"handleDelete","click .image-upload-sub":"handleImage"},cacheElem:function(){this.$imageIcon=this.$el.find(".image-upload-sub"),this.$imageThumb=this.$el.find("img.image-upload-sub")},handleImage:function(){var e=this,t=this.parent.options.imgGroup;o.trigger("form:image-upload",{cb:function(t){var n=e.$el.find(".image-upload-sub").parent();n.html('<img class="y-space-top-xs image-upload-sub">'),n.find(".image-upload-sub").prop("src",t)},active:e.$imageThumb.prop("src"),name:t})},handleDelete:function(){if(!this.disabled){var e=this;e.$el.fadeOut(100,function(){e.model.set(e.parent.activeAttribute,!1)}),this.parent.$productAlert.addClass("hidden")}}});return r}),define("components/general-product/templates/all-featured-product-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr class="clickable catRowInfo '+(null==(__t=active?"added":"add-new")?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td class="left-align wrap-text">'+(null==(__t=name)?"":__t)+"</td>\r\n	",showCategoryID&&(__p+='\r\n		<td class="left-align">'+(null==(__t=id)?"":__t)+"</td>\r\n	"),__p+='\r\n	<td class="right-align">\r\n		<button type="button" class="icon icon-btn '+(null==(__t=active?"icon-added":"icon-add")?"":__t)+'"></button>\r\n	</td>\r\n</tr>';return __p}}),define("components/general-product/views/all-general-product-view",["underscore","backbone","../templates/all-featured-product-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(e){var t=this.model.toJSON();this.parent=e.parent,t.active=this.model.get(this.parent.activeAttribute),t.name=this.model.get(this.parent.nameAttribute),t.showCategoryID=this.parent.options.showCategoryID,this.setElement(this.template(t)),this.$el.data("model",t),this.listenTo(this.model,"change:"+this.parent.activeAttribute,this.handleChange),this.maxNumberProducts=this.parent.maxNumberProducts},render:function(){return this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$icon=this.$el.find(".icon")},events:{click:"handleAdd"},handleAdd:function(){var e=this;if(this.model.get(this.parent.activeAttribute))this.model.set(this.parent.activeAttribute,!1),this.parent.$productAlert.addClass("hidden");else{var t={};t[this.parent.activeAttribute]=!0;var n=this.parent.collection.where(t).length;n<this.maxNumberProducts?this.model.set(this.parent.activeAttribute,!0):(this.parent.$productAlert.removeClass("hidden"),setTimeout(function(){e.parent.$productAlert.fadeOut(0).addClass("hidden")},100))}},handleChange:function(e){var t=e.get(this.parent.activeAttribute);t?(this.$icon.removeClass("icon-add"),this.$icon.addClass("icon-added")):(this.$icon.removeClass("icon-added"),this.$icon.addClass("icon-add"))}});return i}),define("components/general-product/views/general-product-view",["underscore","backbone","../templates/general-product-tpl","./active-general-product-view","./all-general-product-view","global-events","custom/searchify","jqueryui"],function(e,t,n,i,o,r){var a=t.View.extend({tagName:"div",id:"m-general-products",className:"general-product",template:n,initialize:function(e){var t;t=this,t.options=e,void 0===e.hideGrids&&(e.hideGrids=!1),void 0===e.hideLists&&(e.hideLists=!1),void 0===e.statusFilter&&(e.statusFilter=!0),void 0===e.typeFilter&&(e.typeFilter=!0),void 0===e.nosearch&&(e.nosearch=!1),void 0===e.nofilter&&(e.nofilter=!0),void 0===e.images&&(e.images=!1),void 0===e.imgGroup&&(e.imgGroup=!1),void 0===e.selectAll&&(e.selectAll=!1),void 0===e.showCategoryID&&(e.showCategoryID=!1),t.selectAll=e.selectAll||!1,t.showCategoryID=e.showCategoryID||!1,t.disabled=e.disabled=e.disabled===!0,t.collection=e.collection,t.maxNumberProducts=e.maxNumberProducts||999,t.nameAttribute=e.nameAttribute||"name",t.activeAttribute=e.activeAttribute||"active",t.imgAttribute=e.imgAttribute||"img",t.images=e.images||!1,t.statusactive=e.statusactive||"statusactive",t.imgGroup=e.imgGroup||!1,t.sequence=e.sequence||!1,t.$el.html(t.template(e)),t.listenTo(t.collection,"change:"+e.activeAttribute,function(){t.addAllActive(),r.trigger("form:editing")})},render:function(){return this.async?this.collection.fetchCustom().done(function(){this.renderView()}.bind(this)):this.renderView(),this},renderView:function(){var e=this;this.delegateEvents(),this.cacheElem(),this.options.hideGrids?this.showListView():this.showGridView(),e.options.nofilter||e.uiCheckBoxes(),this.addAllActive(),this.disabled||this.addAllListings(),this.options.sequence&&setTimeout(function(){e.sortGridView(),e.sortListView()},500)},events:{"click #list-view":"showListView","click #grid-view":"showGridView","click #filter-view":"toggleFilterView","click #close-filter-view":"toggleFilterView",'change #product-search-checkboxes input[type="checkbox"]':"applyFilter","keyup #product-search-input":"handleSearchInput","click #f-select-all":"toggleSelectAll"},cacheElem:function(){this.$allList=this.$el.find("#product-search-list"),this.$activeTable=this.$el.find("#product-table"),this.$activeList=this.$el.find("#product-list"),this.$activeGrid=this.$el.find("#product-grid"),this.$listBtn=this.$el.find("#list-view"),this.$gridBtn=this.$el.find("#grid-view"),this.$filterPanel=this.$el.find(".search-filters"),this.$filterBtn=this.$el.find("#filter-view"),this.$searchTable=this.$el.find("#product-search-table"),this.$filterCheckBoxes=this.$el.find('#product-search-checkboxes input[type="checkbox"]'),this.$prodBoxes=this.$el.find("#product-search-checkboxes"),this.$productAlert=this.$el.find(".alert-panel"),this.$activeContainer=this.$el.find("#product-container"),this.$selectAll=this.$el.find("#f-select-all"),this.$LoaderImg=this.$el.find("#loader-overlay"),this.$Spinner=this.$el.find("#spinner-gif"),this.$checkRow=this.$el.find(".catRowInfo")},handleUncheckSelectedProducts:function(){{var e=this;e.$searchTable.find("tbody > tr")}e.$searchTable.find("tbody > tr").each(function(){var e=$(this),t=e.data("model"),n=t.active;n&&$(this).click()})},toggleSelectAll:function(){var e=this;e.$Spinner.removeClass("hidden"),e.$LoaderImg.removeClass("hidden");var t=e.$searchTable.find("tbody > tr");setTimeout(function(){e.handleUncheckSelectedProducts();for(var n=0;n<t.length;n++);e.$Spinner.addClass("hidden"),e.$LoaderImg.addClass("hidden")},50)},addListing:function(e){var t=new o({model:e,parent:this});t.parent=this,this.$allList.append(t.render().el)},addAllListings:function(){this.$allList.empty(),this.collection.each(this.addListing,this)},uiCheckBoxes:function(){this.$prodBoxes.buttonset()},addActive:function(e){if(!this.options.hideLists){var t=new i({model:e,type:"list",parent:this,disabled:this.disabled});this.$activeList.append(t.render().el),t.parent=this}if(!this.options.hideGrids){var n=new i({model:e,type:"grid",parent:this,disabled:this.disabled});this.$activeGrid.append(n.render().el),n.parent=this}},addAllActive:function(){var e={};this.options.hideLists||this.$activeList.empty(),this.options.hideGrids||this.$activeGrid.empty(),e[this.activeAttribute]=!0,this.collection.where(e).forEach(this.addActive,this)},inlineStyle:function(e,t){var n,i=e.attr("style");return i&&i.split(";").forEach(function(e){var i=e.split(":");$.trim(i[0])===t&&(n=i[1])}),n},showListView:function(){this.$gridBtn.removeClass("active"),this.$listBtn.addClass("active"),this.$activeGrid.hide(),this.$activeTable.fadeIn(200)},showGridView:function(){this.$gridBtn.addClass("active"),this.$listBtn.removeClass("active"),this.$activeTable.hide(),this.$activeGrid.fadeIn(200)},toggleFilterView:function(){this.$filterPanel.fadeToggle(200),this.$filterBtn.toggleClass("active")},debounce:null,queryText:"",handleSearchInput:function(e){var t=this;t.debounce&&clearTimeout(t.debounce),t.debounce=setTimeout(function(){t.queryText=e.target.value.toLowerCase(),t.applyFilter()},100)},applyFilter:function(){var e=this;e.filterArray=[],this.$searchTable.find("tbody > tr").each(function(){var t=$(this),n=t.data("model").name;n.toLowerCase().indexOf(e.queryText)<0?t.hide():t.show()})},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},sortListView:function(){var e=this;e.$activeList.sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.placeholder.height(t.item.height()),t.helper.addClass("active")},update:function(){e.$activeList.children().each(function(t){var n=$(this).data("id");e.collection.get(n).set("sequence",t+1)})}}).disableSelection()},sortGridView:function(){var e=this;e.$activeGrid.sortable({helper:e.helperFixRowWidth,containment:"parent",tolerance:"pointer",start:function(e,t){t.placeholder.height(t.item.height()),t.helper.addClass("active")},update:function(){e.$activeGrid.children().each(function(t){var n=$(this).data("id");e.collection.get(n).set("sequence",t+1)}),e.addAllActive()}})},getSortedByRank:function(){return this.collection.where({active:!0}).sort(function(e,t){return e.get("sequence")-t.get("sequence")})}});return a}),define("content/category-sections/merchandising/navigation/views/item-categories-view",["backbone","../templates/item-categories-tpl","content/category-sections/merchandising/manage-categories/collections/category-collection","./item-categories-child-view","components/featured-occasions/collections/all-occasions-collection","components/general-product/views/general-product-view","global-events","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,initialize:function(){},render:function(){var e=this,t=e.model.toJSON();return n.fetchCustom().done(function(){validParents=n,parentCategory=n.get(e.model.get("parent")),t.parentName=parentCategory&&parentCategory.get("name"),e.setActiveParent(parentCategory),e.$el.html(e.template(t)),e.cacheElem(),e.delegateEvents(),e.addAllParents(validParents),e.collapseList(),o.fetchCustom().done(function(){catsCollection=o.deepClone(),e.categoryNavView=new r({activeTitle:"Show These Categories in the Nav Group",activeTableTitle:"Selected Categories",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,maxNumberProducts:20,sequence:!0,collection:catsCollection,hideGrids:!0}),e.$featuredCategories.html(e.categoryNavView.render().el)}.bind(e))}),this},events:{"click #edit-parent-btn":"handleParentEdit","change #f-parent":"handleParentChange","click #parent-list.collapsed":"expandList","click #parent-list.collapsed div":"expandList","change #f-showMore":"handleShowMoreToggle"},cacheElem:function(){this.$featuredOccasion=this.$el.find("#featured-occasion"),this.$parentSelect=this.$el.find("#f-parent"),this.$parentName=this.$el.find("#f-parentName"),this.$editParentContainer=this.$el.find("#edit-parent-container"),this.$parentTable=this.$el.find("#parent-table"),this.$parentList=this.$el.find("#parent-list"),this.$parentErrorPanel=this.$el.find(".alert-panel"),this.$featuredCategories=this.$el.find("#featured-child-categories"),this.$enableShowMoreActive=this.$el.find("#f-showMore"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$toggle=this.$el.find("#f-showMore"),this.$toggleRow=this.$el.find(".show-more-section")
},handleShowMoreToggle:function(){var e=this;this.$toggle.is(":checked")?e.$toggleRow.fadeIn(200):e.$toggleRow.fadeOut(200)},showParentError:function(){this.$parentErrorPanel&&this.$parentErrorPanel.fadeIn(100)},hideParentError:function(){this.$parentErrorPanel&&this.$parentErrorPanel.fadeOut(100)},clearActiveParent:function(){this.$parentList&&this.$parentList.find(".active").removeClass("active")},expandList:function(){this.$parentList.find(".parent-name.clickable").slideDown(),this.$parentList.removeClass("collapsed")},collapseList:function(){this.$parentList.find(".parent-name.clickable").slideUp(),this.$parentList.addClass("collapsed")},setActiveParent:function(e){return e?(this.showParentError(),!1):(this.activeParent=e,e&&this.setParentName(e.get("name")),this.clearActiveParent(),this.hideParentError(),!0)},handleParentChange:function(){var e=this;e.$parentList.find(".top-level-category").fadeOut(0,function(){setTimeout(function(){e.$parentList.find('[data-id="'+e.$parentSelect.find("option:selected").val()+'"]').fadeIn(200)},0)}),e.$parentSelect.find("option:selected").val()?this.$parentTable.removeClass("no-border"):(this.setActiveParent(null),this.setParentName(e.$parentSelect.find("option:selected").text()),this.$parentTable.addClass("no-border"))},setInactive:function(){var e=this;this.$parentList.find(".parent-name").removeClass("active").addClass("clickable"),setTimeout(function(){e.collapseList()},200)},handleParentEdit:function(e){$(e.currentTarget).fadeOut(200),this.$editParentContainer.fadeIn(200)},minSelected:function(e){var t,n=this,i={};return i[n.categoryNavView.activeAttribute]=!0,t=n.categoryNavView.collection.where(i).length,t>=e?!0:!1},addParent:function(e){var t,o=this,r=o.model.get("parent"),a=n.get(e.id);a=a.get("id"),t=r==a?!0:!1;var s=new i({model:e,parent:this,level:n.getLevel(e),selected:t,visible:!0});e.get("parent")?this.$parentList.find('[data-id="'+e.get("parent")+'"] > .nested-rows').append(s.render().el):this.$parentList.append(s.render().el)},addAllParents:function(e){this.$parentList.empty(),n.sort(),e.each(this.addParent,this)}});return new a}),define("content/category-sections/merchandising/navigation/templates/item-upcoming-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-12">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Upcoming Occasions Label <i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<input type="text" name="f-price-range-label" id="f-price-range-label" value="'+(null==(__t=contentLabel)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-7 label y-space-top-l">Upcoming Occasions for the Next 3 Months</div>\r\n		<div class="col-5">\r\n			<button type="button" class="pull-right btn btn-submit btn-add" id="add-occasion-btn">\r\n				<div class="icon icon-add icon-lg"></div>Add Occasion\r\n			</button>\r\n		</div>\r\n	</div>\r\n\r\n\r\n      	<div class="row row-spaced"> \r\n		  <div class="col-12 y-space-top-l">\r\n				<table class="table alternate">\r\n					<thead>\r\n						<tr>\r\n							<th class="col-3 left-align">Occasion Name</th>\r\n							<th class="col-4 left-align">Link Path</th>\r\n							<th class="col-2 center-align">Date</th>\r\n							<th class="col-2 center-align">Status</th>\r\n							<th class="col-1 center-align">Edit</th>\r\n						</tr>\r\n					</thead>\r\n				\r\n					<tbody id="upcomingOccasionsList" class="ui-sortable">\r\n					\r\n\r\n					\r\n					</tbody>\r\n				\r\n				</table>\r\n\r\n		  </div>\r\n\r\n		</div>	\r\n	\r\n</div>\r\n\r\n\r\n	<div id="upcoming-modal" style="width: 50%!important;">\r\n\r\n		\r\n	</div>\r\n\r\n\r\n';return __p}}),define("content/category-sections/merchandising/navigation/models/site-nav-upcomingOccasions-Model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,occasionName:"",linkPath:"",occasionDate:"",upcomingOccasionsActive:!0,linkUrl:""}});return t}),define("content/category-sections/merchandising/navigation/collections/site-nav-upcomingOccasions-Collections",["backbone","../models/site-nav-upcomingOccasions-Model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-site-nav-UpcomingOccasions.json",model:t});return new n}),define("content/category-sections/merchandising/navigation/templates/item-upcoming-TABLE-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n  	<td class="left-align">'+(null==(__t=occasionName)?"":__t)+'</td>\r\n\r\n    <td class="left-align">'+(null==(__t=linkPath)?"":__t)+'</td>\r\n    \r\n    <td class="center-align"> '+(null==(__t=occasionDate)?"":__t)+'</td>\r\n  	\r\n\r\n    <td class="center-align hide-overflow">  \r\n  	\r\n     <div class="centered-content-container">\r\n\r\n        <input '+(null==(__t=upcomingOccasionsActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="upcoming-occasion-active-"+id)?"":__t)+'" name="'+(null==(__t="upcoming-occasion-active-"+id)?"":__t)+'" class="on-off-switch upcomingOccasionActive-switch" />\r\n\r\n            <label for="'+(null==(__t="upcoming-occasion-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n\r\n                  <div class="on-off-switch-state">on</div>\r\n            </label>\r\n\r\n      </div>\r\n\r\n    </td> \r\n   \r\n   <td class="center-align"> <button type="button" class="icon icon-btn icon-2x icon-edit"></button> </td> \r\n\r\n</tr>';return __p}}),define("content/category-sections/merchandising/navigation/templates/create-edit-item-upcoming-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+=' <div class="row row-spaced x-space-s left-align">\r\n	<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="clearfix section-title">\r\n					<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+' Upcoming Occasion</h2>\r\n					<div class="btn-panel">\r\n						<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n						',id&&(__p+=' <button type="button" id="delete-btn" class="btn btn-cancel">Delete</button> '),__p+='\r\n						<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n					</div>\r\n				</div>\r\n			</div>\r\n	</div>\r\n\r\n	<div class="row panel row-spaced alert-panel hidden-alt" id="min-error">\r\n	  <div class="col-12">\r\n	    <div class="row">\r\n	      <div class="col-1">\r\n	        <div class="icon icon-3x icon-warning"></div>\r\n	      </div>\r\n	      <div class="col-11 alert-text">\r\n	      	If you wish to link this Upcoming Occasion to a category you must select 1 category. <br>\r\n	      	Please select 1 category below to link this Upcoming Occasion to before saving.\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n	</div>\r\n\r\n\r\n	<div class="row row-spaced">\r\n\r\n\r\n		<div class="col-6 form-section">\r\n			<div class="label">Upcoming Occasion Name<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<input name="f-occasion-name" type="text" value="'+(null==(__t=occasionName)?"":__t)+'">\r\n		</div>\r\n\r\n\r\n		<div class="col-4 form-section date-container">\r\n			<div class="label">Occasion Date</div>\r\n			<input type="text" class="date" id="upcoming-date" value="'+(null==(__t=occasionDate)?"":__t)+'">\r\n		</div>\r\n\r\n\r\n		<div class="col-2 form-section">\r\n			<div class="label">Status</div>\r\n\r\n\r\n			 <input '+(null==(__t=upcomingOccasionsActive?"checked":"")?"":__t)+' type="checkbox" id="upcoming-occasion-active" name="upcoming-occasion-active" class="on-off-switch upcomingOccasionActive-switch" />\r\n\r\n            <label for="upcoming-occasion-active" class="on-off-switch-label">\r\n\r\n                  <div class="on-off-switch-state">on</div>\r\n            </label>\r\n\r\n\r\n		</div>\r\n\r\n	</div>\r\n\r\n\r\n	<div class="row row-spaced">\r\n\r\n	<div class="col-6 form-section select-container">\r\n		<div class="label">Associated Link<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n			<select id="upcoming-link-type">\r\n				<option value="Link to Category">Link to Category</option>\r\n				<option value="Static Link">Static Link</option>\r\n				<option value="No Link">No Link</option>\r\n			</select>\r\n	</div>\r\n\r\n	\r\n\r\n    <div id="static-url-link" class="col-6 form-section hidden">\r\n                <label for="f-url-link"> Link URL</label><i title="???" class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="f-url-link" name="f-url-link" value="'+(null==(__t=linkUrl)?"":__t)+'"/>\r\n            </div>\r\n\r\n	</div>\r\n\r\n\r\n\r\n\r\n	<div class="row row-spaced">\r\n				<div id="categories-container" class="col-12 form-section">\r\n						\r\n				\r\n				</div>\r\n\r\n	</div>\r\n\r\n\r\n  </div>  <!-- End First Main Row -->';return __p}}),define("content/category-sections/merchandising/navigation/views/create-edit-item-upcoming-view",["backbone","../collections/site-nav-upcomingOccasions-Collections","../templates/create-edit-item-upcoming-tpl","../models/site-nav-upcomingOccasions-Model","components/general-product/views/general-product-view","components/featured-occasions/collections/all-occasions-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"UpcomingOccasionsPageModal",template:n,initialize:function(){},render:function(){var e=this;return this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.delegateEvents(),this.cacheElem(),this.applyDates(),r.fetchCustom().done(function(){e.cacheElem(),e.occasionsCollection=r.deepClone(),e.occasionsCollection.each(function(e){e.set("active",!1)}),e.$categoriesContainer.append(e.getCategoriesComponent(e.occasionsCollection).render().el)}.bind(e)),e.validateForm(),e},events:{"click #cancel-btn":"closeModal","click #delete-btn":"handleDeleteBtn","click #save-btn":"handleSave","change #upcoming-link-type":"handleAssociatedLinkChange"},cacheElem:function(){this.$upcomingDate=this.$el.find("#upcoming-date"),this.$upcomingLinkType=this.$el.find("#upcoming-link-type"),this.$AssociatedLinkCategory=this.$el.find("#link-category"),this.$tip=this.$el.find(".tooltip-change"),this.$editForm=this.$el.find("#create-edit-upcoming-Occasions"),this.$categoriesContainer=this.$el.find("#categories-container"),this.$minError=this.$el.find("#min-error")},handleDeleteBtn:function(){var e=this;a.trigger("form:delete",t.remove.bind(t,e.model)),e.$el.parent().dialog("close"),setTimeout(function(){e.parent.handleUpcomingOccasionsTableUpdate()},1500)},handleAssociatedLinkChange:function(){var e=$("#static-url-link");"No Link"===this.$upcomingLinkType.val()?($("#categories-container").addClass("hidden"),e.addClass("hidden")):"Static Link"===this.$upcomingLinkType.val()?($("#categories-container").addClass("hidden"),e.hasClass("hidden")&&e.removeClass("hidden")):($("#categories-container").removeClass("hidden"),e.hasClass("hidden")||e.addClass("hidden"))},showMinError:function(){var e=this;this.$minError.fadeIn(200),setTimeout(function(){e.$minError.fadeOut(200)},15e3)},handleSave:function(){var e=this,t=e.$upcomingLinkType.find("option:selected").val();return"Link to Category"!=t||e.minSelected(1)?void(this.$el.valid()&&e.closeModal()):(e.showMinError(),!1)},applyDates:function(){var e=this;e.$upcomingDate.datepicker({dateFormat:"mm/dd"})},minSelected:function(e){var t,n=this,i={};return i[n.catSelectView.activeAttribute]=!0,t=n.catSelectView.collection.where(i).length,t>=e?!0:!1},closeModal:function(){this.parent.handleUpcomingOccasionsTableUpdate(),this.$el.parent().dialog("close")},validateForm:function(){var e=this;this.$el.validate({rules:{"f-url-link":{required:{depends:function(){return"Static Link"==e.$upcomingLinkType.find("option:selected").val()?!0:void 0}},url3:!0}}})},getCategoriesComponent:function(e){return this.catSelectView=new o({activeTitle:"Selected Categories",maxNumberProducts:1,activeTableTitle:"Category",allTitle:"Category Search",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,collection:e,hideGrids:!0,showCategoryID:!0}),this.catSelectView}});return new s}),define("content/category-sections/merchandising/navigation/views/site-nav-Upcoming-occasionsRend-view",["backbone","../collections/site-nav-upcomingOccasions-Collections","../models/site-nav-upcomingOccasions-Model","../templates/item-upcoming-TABLE-tpl","./create-edit-item-upcoming-view","global-events","jquery","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:i,initialize:function(e){this.parent=e.parent,o.parent=this},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-edit":"handleEdit"},handleEdit:function(){this.parent.handleUpcomingOccasionsEdit(this.model)},handleUpcomingOccasionsTableUpdate:function(){this.parent.handleUpcomingOccasionsTableResequence()}});return r}),define("content/category-sections/merchandising/navigation/views/item-upcoming-view",["backbone","../templates/item-upcoming-tpl","../collections/site-nav-upcomingOccasions-Collections","./site-nav-Upcoming-occasionsRend-view","./create-edit-item-upcoming-view","../models/site-nav-upcomingOccasions-Model","global-events","jqueryui"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),this.cacheElem(),this.delegateEvents(),n.fetchCustom().done(function(){e.addAllUpComingOccasions(),e.initModal()}),this},events:{"click #add-occasion-btn":"handleCreateNewUpcomingOccasionsPage"},cacheElem:function(){this.$UpcomingOccasionsList=this.$el.find("#upcomingOccasionsList"),this.$addoccasion=this.$el.find("#add-occasion-btn"),this.$modal=this.$el.find("#upcoming-modal")},addEachUpcomingOccasion:function(e){var t=new i({model:e,parent:this});this.$UpcomingOccasionsList.append(t.render().el)},addAllUpComingOccasions:function(){this.$UpcomingOccasionsList.empty(),n.each(this.addEachUpcomingOccasion,this)},handleCreateNewUpcomingOccasionsPage:function(){this.showModalUpcomingOccasionsPage(o,new r)},initModal:function(){this.$modal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModalUpcomingOccasionsPage:function(e,t){e.model=t,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},handleUpcomingOccasionsEdit:function(e){this.showModalUpcomingOccasionsPage(o,e)},handleUpcomingOccasionsTableResequence:function(){this.addAllUpComingOccasions()},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}});return new a}),!function(e,t){function n(e,t){for(var n,i=[],r=0;r<e.length;++r){if(n=a[e[r]]||o(e[r]),!n)throw"module definition dependecy not found: "+e[r];i.push(n)}t.apply(null,i)}function i(e,i,o){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";n(i,function(){a[e]=o.apply(null,arguments)})}function o(t){for(var n=e,i=t.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}function r(n){for(var i=0;i<n.length;i++){for(var o=e,r=n[i],s=r.split(/[.\/]/),l=0;l<s.length-1;++l)o[s[l]]===t&&(o[s[l]]={}),o=o[s[l]];o[s[s.length-1]]=a[r]}}var a={},s="tinymce/dom/Sizzle",l="tinymce/dom/EventUtils",c="tinymce/util/Tools",d="tinymce/Env",u="tinymce/dom/DomQuery",h="tinymce/html/Styles",p="tinymce/dom/TreeWalker",f="tinymce/dom/Range",v="tinymce/html/Entities",m="tinymce/dom/StyleSheetLoader",g="tinymce/dom/DOMUtils",b="tinymce/dom/ScriptLoader",y="tinymce/AddOnManager",_="tinymce/dom/RangeUtils",w="tinymce/NodeChange",x="tinymce/html/Node",$="tinymce/html/Schema",k="tinymce/html/SaxParser",C="tinymce/html/DomParser",T="tinymce/html/Writer",S="tinymce/html/Serializer",A="tinymce/dom/Serializer",D="tinymce/dom/TridentSelection",P="tinymce/util/VK",E="tinymce/dom/ControlSelection",M="tinymce/dom/BookmarkManager",I="tinymce/dom/Selection",N="tinymce/dom/ElementUtils",F="tinymce/fmt/Preview",L="tinymce/Formatter",j="tinymce/UndoManager",O="tinymce/EnterKey",R="tinymce/ForceBlocks",H="tinymce/EditorCommands",B="tinymce/util/URI",q="tinymce/util/Class",U="tinymce/util/EventDispatcher",z="tinymce/ui/Selector",V="tinymce/ui/Collection",W="tinymce/ui/DomUtils",Y="tinymce/ui/Control",J="tinymce/ui/Factory",G="tinymce/ui/KeyboardNavigation",K="tinymce/ui/Container",X="tinymce/ui/DragHelper",Z="tinymce/ui/Scrollable",Q="tinymce/ui/Panel",et="tinymce/ui/Movable",tt="tinymce/ui/Resizable",nt="tinymce/ui/FloatPanel",it="tinymce/ui/Window",ot="tinymce/ui/MessageBox",rt="tinymce/WindowManager",at="tinymce/util/Quirks",st="tinymce/util/Observable",lt="tinymce/EditorObservable",ct="tinymce/Shortcuts",dt="tinymce/Editor",ut="tinymce/util/I18n",ht="tinymce/FocusManager",pt="tinymce/EditorManager",ft="tinymce/LegacyInput",vt="tinymce/util/XHR",mt="tinymce/util/JSON",gt="tinymce/util/JSONRequest",bt="tinymce/util/JSONP",yt="tinymce/util/LocalStorage",_t="tinymce/Compat",wt="tinymce/ui/Layout",xt="tinymce/ui/AbsoluteLayout",$t="tinymce/ui/Tooltip",kt="tinymce/ui/Widget",Ct="tinymce/ui/Button",Tt="tinymce/ui/ButtonGroup",St="tinymce/ui/Checkbox",At="tinymce/ui/ComboBox",Dt="tinymce/ui/ColorBox",Pt="tinymce/ui/PanelButton",Et="tinymce/ui/ColorButton",Mt="tinymce/util/Color",It="tinymce/ui/ColorPicker",Nt="tinymce/ui/Path",Ft="tinymce/ui/ElementPath",Lt="tinymce/ui/FormItem",jt="tinymce/ui/Form",Ot="tinymce/ui/FieldSet",Rt="tinymce/ui/FilePicker",Ht="tinymce/ui/FitLayout",Bt="tinymce/ui/FlexLayout",qt="tinymce/ui/FlowLayout",Ut="tinymce/ui/FormatControls",zt="tinymce/ui/GridLayout",Vt="tinymce/ui/Iframe",Wt="tinymce/ui/Label",Yt="tinymce/ui/Toolbar",Jt="tinymce/ui/MenuBar",Gt="tinymce/ui/MenuButton",Kt="tinymce/ui/ListBox",Xt="tinymce/ui/MenuItem",Zt="tinymce/ui/Menu",Qt="tinymce/ui/Radio",en="tinymce/ui/ResizeHandle",tn="tinymce/ui/Spacer",nn="tinymce/ui/SplitButton",on="tinymce/ui/StackLayout",rn="tinymce/ui/TabPanel",an="tinymce/ui/TextBox",sn="tinymce/ui/Throbber";i(s,[],function(){if(!window.jQuery)throw new Error("Load jQuery first");return jQuery.find}),i(l,[],function(){function e(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function i(){return!0}var o,r,l=t||{};for(o in e)s[o]||(l[o]=e[o]);if(l.target||(l.target=l.srcElement||document),e&&a.test(e.type)&&e.pageX===r&&e.clientX!==r){var c=l.target.ownerDocument||document,d=c.documentElement,u=c.body;l.pageX=e.clientX+(d&&d.scrollLeft||u&&u.scrollLeft||0)-(d&&d.clientLeft||u&&u.clientLeft||0),l.pageY=e.clientY+(d&&d.scrollTop||u&&u.scrollTop||0)-(d&&d.clientTop||u&&u.clientTop||0)}return l.preventDefault=function(){l.isDefaultPrevented=i,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=i,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=i,l.stopPropagation()},l.isDefaultPrevented||(l.isDefaultPrevented=n,l.isPropagationStopped=n,l.isImmediatePropagationStopped=n),l}function i(n,i,o){function r(){o.domLoaded||(o.domLoaded=!0,i(c))}function a(){("complete"===l.readyState||"interactive"===l.readyState&&l.body)&&(t(l,"readystatechange",a),r())}function s(){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(s,0)}r()}var l=n.document,c={type:"ready"};return o.domLoaded?void i(c):(l.addEventListener?"complete"===l.readyState?r():e(n,"DOMContentLoaded",r):(e(l,"readystatechange",a),l.documentElement.doScroll&&n.self===n.top&&s()),void e(n,"load",r))}function o(){function o(e,t){var n,i,o,r,a=h[t];if(n=a&&a[e.type])for(i=0,o=n.length;o>i;i++)if(r=n[i],r&&r.func.call(r.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var a,s,l,c,d,u=this,h={};s=r+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,u.domLoaded=!1,u.events=h,u.bind=function(t,r,p,f){function v(e){o(n(e||$.event),m)}var m,g,b,y,_,w,x,$=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[s]?m=t[s]:(m=a++,t[s]=m,h[m]={}),f=f||t,r=r.split(" "),b=r.length;b--;)y=r[b],w=v,_=x=!1,"DOMContentLoaded"===y&&(y="ready"),u.domLoaded&&"ready"===y&&"complete"==t.readyState?p.call(f,n({type:y})):(c||(_=d[y],_&&(w=function(e){var t,i;if(t=e.currentTarget,i=e.relatedTarget,i&&t.contains)i=t.contains(i);else for(;i&&i!==t;)i=i.parentNode;i||(e=n(e||$.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,o(e,m))})),l||"focusin"!==y&&"focusout"!==y||(x=!0,_="focusin"===y?"focus":"blur",w=function(e){e=n(e||$.event),e.type="focus"===e.type?"focusin":"focusout",o(e,m)}),g=h[m][y],g?"ready"===y&&u.domLoaded?p({type:y}):g.push({func:p,scope:f}):(h[m][y]=g=[{func:p,scope:f}],g.fakeName=_,g.capture=x,g.nativeHandler=w,"ready"===y?i(t,w,u):e(t,_||y,w,x)));return t=g=0,p}},u.unbind=function(e,n,i){var o,r,a,l,c,d;if(!e||3===e.nodeType||8===e.nodeType)return u;if(o=e[s]){if(d=h[o],n){for(n=n.split(" "),a=n.length;a--;)if(c=n[a],r=d[c]){if(i)for(l=r.length;l--;)if(r[l].func===i){var p=r.nativeHandler,f=r.fakeName,v=r.capture;r=r.slice(0,l).concat(r.slice(l+1)),r.nativeHandler=p,r.fakeName=f,r.capture=v,d[c]=r}i&&0!==r.length||(delete d[c],t(e,r.fakeName||c,r.nativeHandler,r.capture))}}else{for(c in d)r=d[c],t(e,r.fakeName||c,r.nativeHandler,r.capture);d={}}for(c in d)return u;delete h[o];try{delete e[s]}catch(m){e[s]=null}}return u},u.fire=function(e,t,i){var r;if(!e||3===e.nodeType||8===e.nodeType)return u;i=n(null,i),i.type=t,i.target=e;do r=e[s],r&&o(i,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!i.isPropagationStopped());return u},u.clean=function(e){var t,n,i=u.unbind;if(!e||3===e.nodeType||8===e.nodeType)return u;if(e[s]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[s]&&i(e);return u},u.destroy=function(){h={}},u.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var r="mce-data-",a=/^(?:mouse|contextmenu)|click/,s={keyLocation:1,layerX:1,layerY:1,returnValue:1};return o.Event=new o,o.Event.bind(window,"ready",function(){}),o}),i(c,[],function(){function e(e){return null===e||e===t?"":(""+e).replace(v,"")}function n(e,n){return n?"array"==n&&m(e)?!0:typeof e==n:e!==t}function i(e){var t,n,i=e;if(!m(e))for(i=[],t=0,n=e.length;n>t;t++)i[t]=e[t];return i}function o(e,t,n){var i;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n}function r(e,n,i){var o,r;if(!e)return 0;if(i=i||e,e.length!==t){for(o=0,r=e.length;r>o;o++)if(n.call(i,e[o],o,e)===!1)return 0}else for(o in e)if(e.hasOwnProperty(o)&&n.call(i,e[o],o,e)===!1)return 0;return 1}function a(e,t){var n=[];return r(e,function(e){n.push(t(e))}),n}function s(e,t){var n=[];return r(e,function(e){(!t||t(e))&&n.push(e)}),n}function l(e,t,n){var i,o,r,a,s,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],o=l.createNS(e[3].replace(/\.\w+$/,""),n),!o[r]){if("static"==e[2])return o[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[r]));t[r]||(t[r]=function(){},c=1),o[r]=t[r],l.extend(o[r].prototype,t),e[5]&&(i=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[r],o[r]=c?function(){return i[a].apply(this,arguments)}:function(){return this.parent=i[a],s.apply(this,arguments)},o[r].prototype[r]=o[r],l.each(i,function(e,t){o[r].prototype[t]=i[t]}),l.each(t,function(e,t){i[t]?o[r].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=r&&(o[r].prototype[t]=e)})),l.each(t["static"],function(e,t){o[r][t]=e})}}function c(e,t){var n,i;if(e)for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function d(e,n){var i,o,r,a,s=arguments;for(i=1,o=s.length;o>i;i++){n=s[i];for(r in n)n.hasOwnProperty(r)&&(a=n[r],a!==t&&(e[r]=a))}return e}function u(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),r(e,function(e,o){return t.call(i,e,o,n)===!1?!1:void u(e,t,n,i)}))}function h(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)i=e[n],t[i]||(t[i]={}),t=t[i];return t}function p(e,t){var n,i;for(t=t||window,e=e.split("."),n=0,i=e.length;i>n&&(t=t[e[n]]);n++);return t}function f(t,i){return!t||n(t,"array")?t:a(t.split(i||","),e)}var v=/^\s*|\s*$/g,m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:e,isArray:m,is:n,toArray:i,makeMap:o,each:r,map:a,grep:s,inArray:c,extend:d,create:l,walk:u,createNS:h,resolve:p,explode:f}}),i(d,[],function(){var e,t,n,i,o,r,a,s=navigator,l=s.userAgent;e=window.opera&&window.opera.buildNumber,t=/WebKit/.test(l),n=!t&&!e&&/MSIE/gi.test(l)&&/Explorer/gi.test(s.appName),n=n&&/MSIE (\w+)\./.exec(l)[1],i=-1==l.indexOf("Trident/")||-1==l.indexOf("rv:")&&-1==s.appName.indexOf("Netscape")?!1:11,n=n||i,o=!t&&!i&&/Gecko/.test(l),r=-1!=l.indexOf("Mac"),a=/(iPad|iPhone)/.test(l);var c=!a||l.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:e,webkit:t,ie:n,gecko:o,mac:r,iOS:a,contentEditable:c,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:window.getSelection&&"Range"in window,documentMode:n?document.documentMode||7:10}}),i(u,[l,s,c,d],function(e,n,i,o){function r(e){return"undefined"!=typeof e}function a(e){return"string"==typeof e}function s(e,t){var n,i,o;for(t=t||x,o=t.createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;i=o.firstChild;)n.appendChild(i);return n}function l(e,t,n,i){var o;if(a(t))t=s(t,m(e[0]));else if(t.length&&!t.nodeType){if(t=u.makeArray(t),i)for(o=t.length-1;o>=0;o--)l(e,t[o],n,i);else for(o=0;o<t.length;o++)l(e,t[o],n,i);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e}function c(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function d(e,t,n){var i,o;return t=u(t)[0],e.each(function(){var e=this;n&&i==e.parentNode?o.appendChild(e):(i=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e),o.appendChild(e))}),e}function u(e,t){return new u.fn.init(e,t)}function h(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e){return null===e||e===w?"":(""+e).replace(I,"")}function f(e,t){var n,i,o,r,a;if(e)if(n=e.length,n===r){for(i in e)if(e.hasOwnProperty(i)&&(a=e[i],t.call(a,i,a)===!1))break}else for(o=0;n>o&&(a=e[o],t.call(a,o,a)!==!1);o++);return e}function v(e,t){var n=[];return f(e,function(e,i){t(i,e)&&n.push(i)}),n}function m(e){return e?9==e.nodeType?e:e.ownerDocument:x}function g(e,n,i){var o=[],r=e[n];for("string"!=typeof i&&i instanceof u&&(i=i[0]);r&&9!==r.nodeType;){if(i!==t){if(r===i)break;if("string"==typeof i&&u(r).is(i))break}1===r.nodeType&&o.push(r),r=r[n]}return o}function b(e,n,i,o){var r=[];for(o instanceof u&&(o=o[0]);e;e=e[n])if(!i||e.nodeType===i){if(o!==t){if(e===o)break;if("string"==typeof o&&u(e).is(o))break}r.push(e)}return r}function y(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function _(e,t,n){f(n,function(n,i){e[n]=e[n]||{},e[n][t]=i})}var w,x=document,$=Array.prototype.push,k=Array.prototype.slice,C=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,T=e.Event,S=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),A=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),D={"for":"htmlFor","class":"className",readonly:"readOnly"},P={"float":"cssFloat"},E={},M={},I=/^\s*|\s*$/g;return u.fn=u.prototype={constructor:u,selector:"",context:null,length:0,init:function(e,t){var n,i,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return u(e).attr(t);o.context=t=document}if(a(e)){if(o.selector=e,n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:C.exec(e),!n)return u(t).find(e);if(n[1])for(i=s(e,m(t)).firstChild;i;)$.call(o,i),i=i.nextSibling;else{if(i=m(t).getElementById(n[2]),!i)return o;if(i.id!==n[2])return o.find(e);o.length=1,o[0]=i}}else this.add(e,!1);return o},toArray:function(){return i.toArray(this)},add:function(e,t){var n,i,o=this;if(a(e))return o.add(u(e));if(e.nodeType)return o.add([e]);if(t!==!1)for(n=u.unique(o.toArray().concat(u.makeArray(e))),o.length=n.length,i=0;i<n.length;i++)o[i]=n[i];else $.apply(o,u.makeArray(e));return o},attr:function(e,t){var n,i=this;if("object"==typeof e)f(e,function(e,t){i.attr(e,t)});else{if(!r(t)){if(i[0]&&1===i[0].nodeType){if(n=E[e],n&&n.get)return n.get(i[0],e);if(A[e])return i.prop(e)?e:w;t=i[0].getAttribute(e,2),null===t&&(t=w)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=E[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return i},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=D[e]||e,"object"==typeof e)f(e,function(e,t){n.prop(e,t)});else{if(!r(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function i(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var o,a,s=this;if("object"==typeof e)f(e,function(e,t){s.css(e,t)});else if(r(t))e=n(e),"number"!=typeof t||S[e]||(t+="px"),s.each(function(){var n=this.style;if(a=M[e],a&&a.set)return void a.set(this,t);try{this.style[P[e]||e]=t}catch(o){}(null===t||""===t)&&(n.removeProperty?n.removeProperty(i(e)):n.removeAttribute(e))});else{if(o=s[0],a=M[e],a&&a.get)return a.get(o);if(o.ownerDocument.defaultView)try{return o.ownerDocument.defaultView.getComputedStyle(o,null).getPropertyValue(i(e))}catch(l){return w}else if(o.currentStyle)return o.currentStyle[n(e)]}return s},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],T.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(r(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(i){u(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(r(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return l(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return u(e).append(this),this},prependTo:function(e){return u(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return d(this,e)},wrapAll:function(e){return d(this,e,!0)},wrapInner:function(e){return this.each(function(){u(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){u(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),u(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?f(e.split(" "),function(){n.toggleClass(this,t)
}):n.each(function(n,i){var o,r;r=c(i,e),r!==t&&(o=i.className,r?i.className=p((" "+o+" ").replace(" "+e+" "," ")):i.className+=o?" "+e:e)}),n)},hasClass:function(e){return c(this[0],e)},each:function(e){return f(this,e)},on:function(e,t){return this.each(function(){T.bind(this,e,t)})},off:function(e,t){return this.each(function(){T.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?T.fire(this,e.type,e):T.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new u(k.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;n>t;t++)u.find(e,this[t],i);return u(i)},filter:function(e){return u("function"==typeof e?v(this.toArray(),function(t,n){return e(n,t)}):u.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof u&&(e=e[0]),this.each(function(n,i){for(;i;){if("string"==typeof e&&u(i).is(e)){t.push(i);break}if(i==e){t.push(i);break}i=i.parentNode}}),u(t)},offset:function(e){var t,n,i,o,r=0,a=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,i=n.documentElement,t.getBoundingClientRect&&(o=t.getBoundingClientRect(),r=o.left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=o.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:r,top:a})},push:$,sort:[].sort,splice:[].splice},i.extend(u,{extend:i.extend,makeArray:i.toArray,inArray:h,isArray:i.isArray,each:f,trim:p,grep:v,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!=t[i].nodeType&&t.splice(i,1);return t=1===t.length?u.find.matchesSelector(t[0],e)?[t[0]]:[]:u.find.matches(e,t)}}),f({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return g(e,"parentNode")},next:function(e){return y(e,"nextSibling",1)},prev:function(e){return y(e,"previousSibling",1)},children:function(e){return b(e.firstChild,"nextSibling",1)},contents:function(e){return i.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){u.fn[e]=function(n){var i=this,o=[];return i.each(function(){var e=t.call(o,this,n,o);e&&(u.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=u.unique(o),0===e.indexOf("parents")&&(o=o.reverse())),o=u(o),n?o.filter(n):o}}),f({parentsUntil:function(e,t){return g(e,"parentNode",t)},nextUntil:function(e,t){return b(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return b(e,"previousSibling",1,t).slice(1)}},function(e,t){u.fn[e]=function(n,i){var o=this,r=[];return o.each(function(){var e=t.call(r,this,n,r);e&&(u.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(r=u.unique(r),(0===e.indexOf("parents")||"prevUntil"===e)&&(r=r.reverse())),r=u(r),i?r.filter(i):r}}),u.fn.is=function(e){return!!e&&this.filter(e).length>0},u.fn.init.prototype=u.fn,u.overrideDefaults=function(e){function t(i,o){return n=n||e(),0===arguments.length&&(i=n.element),o||(o=n.context),new t.fn.init(i,o)}var n;return u.extend(t,this),t},o.ie&&o.ie<8&&(_(E,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?w:t},size:function(e){var t=e.size;return 20===t?w:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?w:t}}),_(E,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),o.ie&&o.ie<9&&(P["float"]="styleFloat",_(M,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),u.attrHooks=E,u.cssHooks=M,u}),i(h,[],function(){return function(e,t){function n(e,t,n,i){function o(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+o(t)+o(n)+o(i)}var i,o,r,a,s,l=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,h={},p="﻿";for(e=e||{},t&&(a=t.getValidStyles(),s=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+p).split(" "),o=0;o<r.length;o++)h[r[o]]=p+o,h[p+o]=r[o];return{toHex:function(e){return e.replace(l,n)},parse:function(t){function i(e,t,n){var i,r,a,s;if(i=y[e+"-top"+t],i&&(r=y[e+"-right"+t],r&&(a=y[e+"-bottom"+t],a&&(s=y[e+"-left"+t])))){var l=[i,r,a,s];for(o=l.length-1;o--&&l[o]===l[o+1];);o>-1&&n||(y[e+t]=-1==o?l[0]:l.join(" "),delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t])}}function r(e){var t,n=y[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return y[e]=n[0],!0}}function a(e,t,n,i){r(t)&&r(n)&&r(i)&&(y[e]=y[t]+" "+y[n]+" "+y[i],delete y[t],delete y[n],delete y[i])}function s(e){return b=!0,h[e]}function p(e,t){return b&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return h[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function f(t,n,i,o,r,a){if(r=r||a)return r=p(r),"'"+r.replace(/\'/g,"\\'")+"'";if(n=p(n||i||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return _&&(n=_.call(w,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var v,m,g,b,y={},_=e.url_converter,w=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,s)});v=d.exec(t);){if(m=v[1].replace(u,"").toLowerCase(),g=v[2].replace(u,""),g=g.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),m&&g.length>0){if(!e.allow_script_urls&&("behavior"==m||/expression\s*\(|\/\*|\*\//.test(g)))continue;"font-weight"===m&&"700"===g?g="bold":("color"===m||"background-color"===m)&&(g=g.toLowerCase()),g=g.replace(l,n),g=g.replace(c,f),y[m]=b?p(g,!0):g}d.lastIndex=v.index+v[0].length}i("border","",!0),i("border","-width"),i("border","-color"),i("border","-style"),i("padding",""),i("margin",""),a("border","border-width","border-style","border-color"),"medium none"===y.border&&delete y.border,"none"===y["border-image"]&&delete y["border-image"]}return y},serialize:function(e,t){function n(t){var n,o,r,s;if(n=a[t])for(o=0,r=n.length;r>o;o++)t=n[o],s=e[t],s!==i&&s.length>0&&(c+=(c.length>0?" ":"")+t+": "+s+";")}function o(e,t){var n;return n=s["*"],n&&n[e]?!1:(n=s[t],n&&n[e]?!1:!0)}var r,l,c="";if(t&&a)n("*"),n(t);else for(r in e)l=e[r],l!==i&&l.length>0&&(!s||o(r,t))&&(c+=(c.length>0?" ":"")+r+": "+l+";");return c}}}}),i(p,[],function(){return function(e,t){function n(e,n,i,o){var r,a;if(e){if(!o&&e[n])return e[n];if(e!=t){if(r=e[i])return r;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(r=a[i])return r}}}var i=e;this.current=function(){return i},this.next=function(e){return i=n(i,"firstChild","nextSibling",e)},this.prev=function(e){return i=n(i,"lastChild","previousSibling",e)}}}),i(f,[c],function(e){function t(n){function i(){return F.createDocumentFragment()}function o(e,t){$(R,e,t)}function r(e,t){$(H,e,t)}function a(e){o(e.parentNode,W(e))}function s(e){o(e.parentNode,W(e)+1)}function l(e){r(e.parentNode,W(e))}function c(e){r(e.parentNode,W(e)+1)}function d(e){e?(N[U]=N[q],N[z]=N[B]):(N[q]=N[U],N[B]=N[z]),N.collapsed=R}function u(e){a(e),c(e)}function h(e){o(e,0),r(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function p(e,t){var n=N[q],i=N[B],o=N[U],r=N[z],a=t.startContainer,s=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?x(n,i,a,s):1===e?x(o,r,a,s):2===e?x(o,r,l,c):3===e?x(n,i,l,c):void 0}function f(){k(O)}function v(){return k(L)}function m(){return k(j)}function g(e){var t,i,o=this[q],r=this[B];3!==o.nodeType&&4!==o.nodeType||!o.nodeValue?(o.childNodes.length>0&&(i=o.childNodes[r]),i?o.insertBefore(e,i):3==o.nodeType?n.insertAfter(e,o):o.appendChild(e)):r?r>=o.nodeValue.length?n.insertAfter(e,o):(t=o.splitText(r),o.parentNode.insertBefore(e,t)):o.parentNode.insertBefore(e,o)}function b(e){var t=N.extractContents();N.insertNode(e),e.appendChild(t),N.selectNode(e)}function y(){return V(new t(n),{startContainer:N[q],startOffset:N[B],endContainer:N[U],endOffset:N[z],collapsed:N.collapsed,commonAncestorContainer:N.commonAncestorContainer})}function _(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function w(){return N[q]==N[U]&&N[B]==N[z]}function x(e,t,i,o){var r,a,s,l,c,d;if(e==i)return t==o?0:o>t?-1:1;for(r=i;r&&r.parentNode!=e;)r=r.parentNode;if(r){for(a=0,s=e.firstChild;s!=r&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(r=e;r&&r.parentNode!=i;)r=r.parentNode;if(r){for(a=0,s=i.firstChild;s!=r&&o>a;)a++,s=s.nextSibling;return o>a?-1:1}for(l=n.findCommonAncestor(e,i),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),d=i;d&&d.parentNode!=l;)d=d.parentNode;if(d||(d=l),c==d)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==d)return 1;s=s.nextSibling}}function $(e,t,i){var o,r;for(e?(N[q]=t,N[B]=i):(N[U]=t,N[z]=i),o=N[U];o.parentNode;)o=o.parentNode;for(r=N[q];r.parentNode;)r=r.parentNode;r==o?x(N[q],N[B],N[U],N[z])>0&&N.collapse(e):N.collapse(e),N.collapsed=w(),N.commonAncestorContainer=n.findCommonAncestor(N[q],N[U])}function k(e){var t,n,i,o,r,a,s,l=0,c=0;if(N[q]==N[U])return C(e);for(t=N[U],n=t.parentNode;n;t=n,n=n.parentNode){if(n==N[q])return T(t,e);++l}for(t=N[q],n=t.parentNode;n;t=n,n=n.parentNode){if(n==N[U])return S(t,e);++c}for(i=c-l,o=N[q];i>0;)o=o.parentNode,i--;for(r=N[U];0>i;)r=r.parentNode,i++;for(a=o.parentNode,s=r.parentNode;a!=s;a=a.parentNode,s=s.parentNode)o=a,r=s;return A(o,r,e)}function C(e){var t,n,o,r,a,s,l,c,d;if(e!=O&&(t=i()),N[B]==N[z])return t;if(3==N[q].nodeType){if(n=N[q].nodeValue,o=n.substring(N[B],N[z]),e!=j&&(r=N[q],c=N[B],d=N[z]-N[B],0===c&&d>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(c,d),N.collapse(R)),e==O)return;return o.length>0&&t.appendChild(F.createTextNode(o)),t}for(r=_(N[q],N[B]),a=N[z]-N[B];r&&a>0;)s=r.nextSibling,l=M(r,e),t&&t.appendChild(l),--a,r=s;return e!=j&&N.collapse(R),t}function T(e,t){var n,o,r,a,s,l;if(t!=O&&(n=i()),o=D(e,t),n&&n.appendChild(o),r=W(e),a=r-N[B],0>=a)return t!=j&&(N.setEndBefore(e),N.collapse(H)),n;for(o=e.previousSibling;a>0;)s=o.previousSibling,l=M(o,t),n&&n.insertBefore(l,n.firstChild),--a,o=s;return t!=j&&(N.setEndBefore(e),N.collapse(H)),n}function S(e,t){var n,o,r,a,s,l;for(t!=O&&(n=i()),r=P(e,t),n&&n.appendChild(r),o=W(e),++o,a=N[z]-o,r=e.nextSibling;r&&a>0;)s=r.nextSibling,l=M(r,t),n&&n.appendChild(l),--a,r=s;return t!=j&&(N.setStartAfter(e),N.collapse(R)),n}function A(e,t,n){var o,r,a,s,l,c,d;for(n!=O&&(r=i()),o=P(e,n),r&&r.appendChild(o),a=W(e),s=W(t),++a,l=s-a,c=e.nextSibling;l>0;)d=c.nextSibling,o=M(c,n),r&&r.appendChild(o),c=d,--l;return o=D(t,n),r&&r.appendChild(o),n!=j&&(N.setStartAfter(e),N.collapse(R)),r}function D(e,t){var n,i,o,r,a,s=_(N[U],N[z]-1),l=s!=N[U];if(s==e)return E(s,l,H,t);for(n=s.parentNode,i=E(n,H,H,t);n;){for(;s;)o=s.previousSibling,r=E(s,l,H,t),t!=O&&i.insertBefore(r,i.firstChild),l=R,s=o;if(n==e)return i;s=n.previousSibling,n=n.parentNode,a=E(n,H,H,t),t!=O&&a.appendChild(i),i=a}}function P(e,t){var n,i,o,r,a,s=_(N[q],N[B]),l=s!=N[q];if(s==e)return E(s,l,R,t);for(n=s.parentNode,i=E(n,H,R,t);n;){for(;s;)o=s.nextSibling,r=E(s,l,R,t),t!=O&&i.appendChild(r),l=R,s=o;if(n==e)return i;s=n.nextSibling,n=n.parentNode,a=E(n,H,R,t),t!=O&&a.appendChild(i),i=a}}function E(e,t,i,o){var r,a,s,l,c;if(t)return M(e,o);if(3==e.nodeType){if(r=e.nodeValue,i?(l=N[B],a=r.substring(l),s=r.substring(0,l)):(l=N[z],a=r.substring(0,l),s=r.substring(l)),o!=j&&(e.nodeValue=s),o==O)return;return c=n.clone(e,H),c.nodeValue=a,c}return o!=O?n.clone(e,H):void 0}function M(e,t){return t!=O?t==j?n.clone(e,R):e:void e.parentNode.removeChild(e)}function I(){return n.create("body",null,m()).outerText}var N=this,F=n.doc,L=0,j=1,O=2,R=!0,H=!1,B="startOffset",q="startContainer",U="endContainer",z="endOffset",V=e.extend,W=n.nodeIndex;return V(N,{startContainer:F,startOffset:0,endContainer:F,endOffset:0,collapsed:R,commonAncestorContainer:F,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:r,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:c,collapse:d,selectNode:u,selectNodeContents:h,compareBoundaryPoints:p,deleteContents:f,extractContents:v,cloneContents:m,insertNode:g,surroundContents:b,cloneRange:y,toStringIE:I}),N}return t.prototype.toString=function(){return this.toStringIE()},t}),i(v,[c],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,i,r,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),o[i]||(r="&"+e[n+1]+";",a[i]=r,a[r]=i);return a}}var i,o,r,a=e.makeMap,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,d=/&(#x|#)?([\w]+);/g,u={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};o={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return o[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return o[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":o[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?s:l,function(e){return o[e]||n[e]||e})},getEncodeFunc:function(e,t){function r(e,n){return e.replace(n?s:l,function(e){return o[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,n){return h.encodeNamed(e,n,t)}return t=n(t)||i,e=a(e.replace(/\+/g,",")),e.named&&e.numeric?r:e.named?t?c:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(d,function(e,n,o){return n?(o=parseInt(o,2===n.length?16:10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(1023&o))):u[o]||String.fromCharCode(o)):r[e]||i[e]||t(e)})}};return h}),i(m,[],function(){return function(e,t){function n(t){e.getElementsByTagName("head")[0].appendChild(t)}function i(t,i,s){function l(){for(var e=g.passed,t=e.length;t--;)e[t]();g.status=2,g.passed=[],g.failed=[]}function c(){for(var e=g.failed,t=e.length;t--;)e[t]();g.status=3,g.passed=[],g.failed=[]}function d(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function u(e,t){e()||((new Date).getTime()-m<o?window.setTimeout(t,0):c())}function h(){u(function(){for(var t,n,i=e.styleSheets,o=i.length;o--;)if(t=i[o],n=t.ownerNode?t.ownerNode:t.owningElement,n&&n.id===f.id)return l(),!0},h)}function p(){u(function(){try{var e=v.sheet.cssRules;return l(),!!e}catch(t){}},p)}var f,v,m,g;if(a[t]?g=a[t]:(g={passed:[],failed:[]},a[t]=g),i&&g.passed.push(i),s&&g.failed.push(s),1!=g.status){if(2==g.status)return void l();if(3==g.status)return void c();if(g.status=1,f=e.createElement("link"),f.rel="stylesheet",f.type="text/css",f.id="u"+r++,f.async=!1,f.defer=!1,m=(new Date).getTime(),"onload"in f&&!d())f.onload=h,f.onerror=c;else{if(navigator.userAgent.indexOf("Firefox")>0)return v=e.createElement("style"),v.textContent='@import "'+t+'"',p(),void n(v);h()}n(f),f.href=t}}var o,r=0,a={};t=t||{},o=t.maxLoadTime||5e3,this.load=i}}),i(g,[s,u,h,l,p,f,v,d,c,m],function(e,n,i,o,r,a,s,l,c,d){function u(e,t){var n,i={},o=t.keep_values;return n={set:function(n,i,o){t.url_converter&&(i=t.url_converter.call(t.url_converter_scope||e,i,o,n[0])),n.attr("data-mce-"+o,i).attr(o,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},i={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(o&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},o&&(i.href=i.src=n),i}function h(e,t){var r,a=this;a.doc=e,a.win=window,a.files={},a.counter=0,a.stdMode=!g||e.documentMode>=8,a.boxModel=!g||"CSS1Compat"==e.compatMode||a.stdMode,a.styleSheetLoader=new d(e),a.boundEvents=[],a.settings=t=t||{},a.schema=t.schema,a.styles=new i({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),a.fixDoc(e),a.events=t.ownEvents?new o(t.proxy):o.Event,a.attrHooks=u(a,t),r=t.schema?t.schema.getBlockElements():{},a.$=n.overrideDefaults(function(){return{context:e,element:a.getRoot()}}),a.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!r[e.nodeName]):!!r[e]}}var p=c.each,f=c.is,v=c.grep,m=c.trim,g=l.ie,b=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/;return h.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(g&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,i,o=this;return!g||1!==e.nodeType||t?e.cloneNode(t):(i=o.doc,t?n.firstChild:(n=i.createElement(e.nodeName),p(o.getAttribs(e),function(t){o.setAttrib(n,t.nodeName,o.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;return e=i.get(e),t=i.getPos(e),n=i.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;return e=i.get(e),t=i.getStyle(e,"width"),n=i.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,i,o){var r,a=this,s=[];for(e=a.get(e),o=o===t,i=i||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),f(n,"string")&&(r=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return a.is(e,r)});e&&e!=i&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!o)return e;s.push(e)}e=e.parentNode}return o?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var i=this;return e(t,i.get(n)||i.settings.root_element||i.doc,[])},is:function(n,i){var o;if(n.length===t){if("*"===i)return 1==n.nodeType;if(b.test(i)){for(i=i.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),o=i.length-1;o>=0;o--)if(i[o]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var r=n.nodeType?[n]:n;return e(i,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,i,o){var r=this;return this.run(e,function(e){var a;return a=f(t,"string")?r.doc.createElement(t):t,r.setAttribs(a,n),i&&(i.nodeType?a.appendChild(i):r.setHTML(a,i)),o?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,o="";o+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&"undefined"!=typeof t[i]&&(o+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n,i,o=this.doc;for(i=o.createElement("div"),t=o.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&e.attr("data-mce-style",null)},getStyle:function(e,n,i){return e=this.$$(e),i?e.css(n):(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=g?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[n]:t)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&e.attr("data-mce-style",null)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var i,o,r=this,a=r.settings;""===n&&(n=null),e=r.$$(e),i=e.attr(t),e.length&&(o=r.attrHooks[t],o&&o.set?o.set(e,n,t):e.attr(t,n),i!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,i){p(t,function(e,t){n.setAttrib(i,t,e)})})},getAttrib:function(e,t,n){var i,o,r=this;return e=r.$$(e),e.length&&(i=r.attrHooks[t],o=i&&i.get?i.get(e,t):e.attr(t)),"undefined"==typeof o&&(o=n||""),o},getPos:function(e,t){var i,o,r=this,a=0,s=0,l=r.doc,c=l.body;if(e=r.get(e),t=t||c,e){if(t===c&&e.getBoundingClientRect&&"static"===n(c).css("position"))return o=e.getBoundingClientRect(),t=r.boxModel?l.documentElement:c,a=o.left+(l.documentElement.scrollLeft||c.scrollLeft)-t.clientLeft,s=o.top+(l.documentElement.scrollTop||c.scrollTop)-t.clientTop,{x:a,y:s};for(i=e;i&&i!=t&&i.nodeType;)a+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)a-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode}return{x:a,y:s}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,i=this,o=i.doc;if(i!==h.DOM&&o===document){var r=h.DOM.addedStyles;if(r=r||[],r[e])return;r[e]=!0,h.DOM.addedStyles=r}n=o.getElementById("mceDefaultStyles"),n||(n=o.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=o.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(o.createTextNode(e))},loadCSS:function(e){var t,n=this,i=n.doc;return n!==h.DOM&&i===document?void h.DOM.loadCSS(e):(e||(e=""),t=i.getElementsByTagName("head")[0],void p(e.split(","),function(e){var o;n.files[e]||(n.files[e]=!0,o=n.create("link",{rel:"stylesheet",href:e}),g&&i.documentMode&&i.recalc&&(o.onload=function(){i.recalc&&i.recalc(),o.onload=null}),t.appendChild(o))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,i){this.$$(e).toggleClass(t,i).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),g?e.each(function(e,i){if(i.canHaveHTML!==!1){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t,i.removeChild(i.firstChild)}catch(o){n("<div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType?e.outerHTML:n("<div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var i=this;i.$$(e).each(function(){try{this.outerHTML=t}catch(e){i.remove(n(this).html(t),!0)}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},replace:function(e,t,n){var i=this;return i.run(t,function(t){return f(t,"array")&&(e=e.cloneNode(!0)),n&&p(v(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,i=this;return e.nodeName!=t.toUpperCase()&&(n=i.create(t),p(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),i.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return this.styles.toHex(c.trim(e))},run:function(e,t,n){var i,o=this;return"string"==typeof e&&(e=o.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],p(e,function(e,r){e&&("string"==typeof e&&(e=o.get(e)),i.push(t.call(n,e,r)))}),i)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(g){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,i,o,a,s,l=this,c=0;if(e=e.firstChild){a=new r(e,e.parentNode),t=t||(l.schema?l.schema.getNonEmptyElements():null);do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){c++;continue}return!1}for(i=l.getAttribs(e),n=i.length;n--;)if(s=i[n].nodeName,"name"===s||"data-mce-bookmark"===s)return!1}if(8==o)return!1;if(3===o&&!y.test(e.nodeValue))return!1}while(e=a.next())}return 1>=c},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:function(e,t){var n,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=n&&e.nodeValue.length)&&(o++,n=i);return o},split:function(e,t,n){function i(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,o=e.childNodes,r=e.nodeType;if(1!=r||"bookmark"!=e.getAttribute("data-mce-type")){for(n=o.length-1;n>=0;n--)i(o[n]);if(9!=r){if(3==r&&e.nodeValue.length>0){var a=m(e.nodeValue).length;if(!s.isBlock(e.parentNode)||a>0||0===a&&t(e))return}else if(1==r&&(o=e.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var o,r,a,s=this,l=s.createRng();return e&&t?(l.setStart(e.parentNode,s.nodeIndex(e)),l.setEnd(t.parentNode,s.nodeIndex(t)),o=l.extractContents(),l=s.createRng(),l.setStart(t.parentNode,s.nodeIndex(t)+1),l.setEnd(e.parentNode,s.nodeIndex(e)+1),r=l.extractContents(),a=e.parentNode,a.insertBefore(i(o),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(i(r),e),s.remove(e),n||t):void 0},bind:function(e,t,n,i){var o=this;if(c.isArray(e)){for(var r=e.length;r--;)e[r]=o.bind(e[r],t,n,i);return e}return!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,n,i]),o.events.bind(e,t,n,i||o)},unbind:function(e,t,n){var i,o=this;if(c.isArray(e)){for(i=e.length;i--;)e[i]=o.unbind(e[i],t,n);return e}if(o.boundEvents&&(e===o.doc||e===o.win))for(i=o.boundEvents.length;i--;){var r=o.boundEvents[i];e!=r[0]||t&&t!=r[1]||n&&n!=r[2]||this.events.unbind(r[0],r[1],r[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var i=t.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var i=this,o=t;if(e)for("string"==typeof o&&(o=function(e){return i.is(e,t)}),e=e[n];e;e=e[n])if(o(e))return e;return null}},h.DOM=new h(document),h}),i(b,[g,c],function(e,t){function n(){function e(e,t){function n(){s.remove(a),r&&(r.onreadystatechange=r.onload=r=null),t()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var r,a,s=i;a=s.uniqueId(),r=document.createElement("script"),r.id=a,r.type="text/javascript",r.src=e,"onreadystatechange"in r?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&n()}:r.onload=n,r.onerror=o,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}var t,n=0,a=1,s=2,l={},c=[],d={},u=[],h=0;this.isDone=function(e){return l[e]==s},this.markDone=function(e){l[e]=s},this.add=this.load=function(e,i,o){var r=l[e];r==t&&(c.push(e),l[e]=n),i&&(d[e]||(d[e]=[]),d[e].push({func:i,scope:o||this}))},this.loadQueue=function(e,t){this.loadScripts(c,e,t)},this.loadScripts=function(n,i,c){function p(e){o(d[e],function(e){e.func.call(e.scope)}),d[e]=t}var f;u.push({func:i,scope:c||this}),(f=function(){var t=r(n);n.length=0,o(t,function(t){return l[t]==s?void p(t):void(l[t]!=a&&(l[t]=a,h++,e(t,function(){l[t]=s,h--,p(t),f()})))}),h||(o(u,function(e){e.func.call(e.scope)}),u.length=0)})()}}var i=e.DOM,o=t.each,r=t.grep;return n.ScriptLoader=new n,n}),i(y,[b,c],function(e,n){function i(){var e=this;e.items=[],e.urls={},e.lookup={}
}var o=n.each;return i.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var o=i.language;if(o&&i.languageLoad!==!1){if(n)if(n=","+n+",",-1!=n.indexOf(","+o.substr(0,2)+","))o=o.substr(0,2);else if(-1==n.indexOf(","+o+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+o+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var i=this.urls[t];o(n,function(t){e.ScriptLoader.add(i+"/"+t)})},load:function(n,r,a,s){function l(){var i=c.dependencies(n);o(i,function(e){var n=c.createUrl(r,e);c.load(n.resource,n,t,t)}),a&&a.call(s?s:e)}var c=this,d=r;c.urls[n]||("object"==typeof r&&(d=r.prefix+r.resource+r.suffix),0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=i.baseURL+"/"+d),c.urls[n]=d.substring(0,d.lastIndexOf("/")),c.lookup[n]?l():e.ScriptLoader.add(d,l,s))}},i.PluginManager=new i,i.ThemeManager=new i,i}),i(_,[c,p],function(e,t){function n(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:0>t&&(t=0),n[t]||e}function i(e){this.walk=function(t,i){function r(e){var t;return t=e[0],3===t.nodeType&&t===m&&g>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===y&&e.length>0&&t===b&&3===t.nodeType&&e.splice(e.length-1,1),e}function a(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function s(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,n){var o=n?"nextSibling":"previousSibling";for(h=e,p=h.parentNode;h&&h!=t;h=p)p=h.parentNode,f=a(h==e?h:h[o],o),f.length&&(n||f.reverse(),i(r(f)))}var c,d,u,h,p,f,v,m=t.startContainer,g=t.startOffset,b=t.endContainer,y=t.endOffset;if(v=e.select("td.mce-item-selected,th.mce-item-selected"),v.length>0)return void o(v,function(e){i([e])});if(1==m.nodeType&&m.hasChildNodes()&&(m=m.childNodes[g]),1==b.nodeType&&b.hasChildNodes()&&(b=n(b,y)),m==b)return i(r([m]));for(c=e.findCommonAncestor(m,b),h=m;h;h=h.parentNode){if(h===b)return l(m,c,!0);if(h===c)break}for(h=b;h;h=h.parentNode){if(h===m)return l(b,c);if(h===c)break}d=s(m,c)||m,u=s(b,c)||b,l(m,d,!0),f=a(d==m?d:d.nextSibling,"nextSibling",u==b?u.nextSibling:u),f.length&&i(r(f)),l(b,u)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,i=e.startOffset,o=e.endContainer,r=e.endOffset;return n==o&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(o=t(n,i),n=o.previousSibling,r>i?(r-=i,n=o=t(o,r).previousSibling,r=o.nodeValue.length,i=0):r=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=t(n,i),i=0),3==o.nodeType&&r>0&&r<o.nodeValue.length&&(o=t(o,r).previousSibling,r=o.nodeValue.length)),{startContainer:n,startOffset:i,endContainer:o,endOffset:r}},this.normalize=function(n){function i(i){function a(n,i){for(var o=new t(n,e.getParent(n.parentNode,e.isBlock)||m);n=o[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function s(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function l(n,i){var a,s,l;if(i=i||c,l=e.getParent(i.parentNode,e.isBlock)||m,n&&"BR"==i.nodeName&&v&&e.isEmpty(l))return c=i.parentNode,d=e.nodeIndex(i),void(o=!0);for(a=new t(i,l);h=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(h))return;if(3===h.nodeType&&h.nodeValue.length>0)return c=h,d=n?h.nodeValue.length:0,void(o=!0);if(e.isBlock(h)||p[h.nodeName.toLowerCase()])return;s=h}r&&s&&(c=s,o=!0,d=0)}var c,d,u,h,p,f,v,m=e.getRoot();if(c=n[(i?"start":"end")+"Container"],d=n[(i?"start":"end")+"Offset"],v=1==c.nodeType&&d===c.childNodes.length,p=e.schema.getNonEmptyElements(),f=i,1==c.nodeType&&d>c.childNodes.length-1&&(f=!1),9===c.nodeType&&(c=e.getRoot(),d=0),c===m){if(f&&(h=c.childNodes[d>0?d-1:0],h&&(p[h.nodeName]||"TABLE"==h.nodeName)))return;if(c.hasChildNodes()&&(d=Math.min(!f&&d>0?d-1:d,c.childNodes.length-1),c=c.childNodes[d],d=0,c.hasChildNodes()&&!/TABLE/.test(c.nodeName))){h=c,u=new t(c,m);do{if(3===h.nodeType&&h.nodeValue.length>0){d=f?0:h.nodeValue.length,c=h,o=!0;break}if(p[h.nodeName.toLowerCase()]){d=e.nodeIndex(h),c=h.parentNode,"IMG"!=h.nodeName||f||d++,o=!0;break}}while(h=f?u.next():u.prev())}}r&&(3===c.nodeType&&0===d&&l(!0),1===c.nodeType&&(h=c.childNodes[d],h||(h=c.childNodes[d-1]),!h||"BR"!==h.nodeName||s(h,"A")||a(h)||a(h,!0)||l(!0,h))),f&&!r&&3===c.nodeType&&d===c.nodeValue.length&&l(!1),o&&n["set"+(i?"Start":"End")](c,d)}var o,r;return r=n.collapsed,i(!0),r||i(),o&&r&&n.collapse(!0),o}}var o=e.each;return i.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},i}),i(w,[_],function(e){return function(t){function n(e){var n,i;if(i=t.$(e).parentsUntil(t.getBody()).add(e),i.length===o.length){for(n=i.length;n>=0&&i[n]===o[n];n--);if(-1===n)return o=i,!0}return o=i,!1}var i,o=[];"onselectionchange"in t.getDoc()||t.on("NodeChange Click MouseUp KeyUp Focus",function(n){var o,r;o=t.selection.getRng(),r={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset},"nodechange"!=n.type&&e.compareRanges(r,i)||t.fire("SelectionChange"),i=r}),t.on("contextmenu",function(){t.fire("SelectionChange")}),t.on("SelectionChange",function(){var e=t.selection.getStart(!0);t.selection.isCollapsed()||n(e)||!t.dom.isChildOf(e,t.getBody())||t.nodeChanged({selectionChange:!0})}),t.on("MouseUp",function(e){e.isDefaultPrevented()||setTimeout(function(){t.nodeChanged()},0)}),this.nodeChanged=function(e){var n,i,o,r=t.selection;t.initialized&&r&&!t.settings.disable_nodechange&&!t.settings.readonly&&(o=t.getBody(),n=r.getStart()||o,n=n.ownerDocument!=t.getDoc()?t.getBody():n,"IMG"==n.nodeName&&r.isCollapsed()&&(n=n.parentNode),i=[],t.dom.getParent(n,function(e){return e===o?!0:void i.push(e)}),e=e||{},e.element=n,e.parents=i,t.fire("NodeChange",e))}}}),i(x,[],function(){function e(e,t,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(i=e[a])return i;for(o=e.parent;o&&o!==t;o=o.parent)if(i=o[a])return i}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,i,o,r=this;if("string"!=typeof e){for(i in e)r.attr(i,e[i]);return r}if(n=r.attributes){if(t!==o){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),r;return r}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}},clone:function(){var e,n,i,o,r,a=this,s=new t(a.name,a.type);if(i=a.attributes){for(r=[],r.map={},e=0,n=i.length;n>e;e++)o=i[e],"id"!==o.name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);s.attributes=r}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i.next=n,t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n.prev=i,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=i,e},getAll:function(t){var n,i=this,o=[];for(n=i.firstChild;n;n=e(n,i))n.name===t&&o.push(n);return o},empty:function(){var t,n,i,o=this;if(o.firstChild){for(t=[],i=o.firstChild;i;i=e(i,o))t.push(i);for(n=t.length;n--;)i=t[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return o.firstChild=o.lastChild=null,o},isEmpty:function(t){var i,o,r=this,a=r.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(i=a.attributes.length;i--;)if(o=a.attributes[i].name,"name"===o||0===o.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1}while(a=e(a,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var o,r;if(o=new t(e,i[e]||1),n)for(r in n)o.attr(r,n[r]);return o},t}),i($,[c],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,i){function o(e,t){var n,i,o={};for(n=0,i=e.length;i>n;n++)o[e[n]]=t||{};return o}var s,l,c,d=arguments;for(i=i||[],n=n||"","string"==typeof i&&(i=t(i)),l=3;l<d.length;l++)"string"==typeof d[l]&&(d[l]=t(d[l])),i.push.apply(i,d[l]);for(e=t(e),s=e.length;s--;)c=[].concat(a,t(n)),p[e[s]]={attributes:o(c),attributesOrder:c,children:o(i,r)}}function i(e,n){var i,o,r,a;for(e=t(e),i=e.length,n=t(n);i--;)for(o=p[e[i]],r=0,a=n.length;a>r;r++)o.attributes[n[r]]={},o.attributesOrder.push(n[r])}var a,l,c,d,u,h,p={};return o[e]?o[e]:(a=t("id accesskey class dir lang style tabindex title"),l=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),c=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(a.push.apply(a,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),l.push.apply(l,t("article aside details dialog figure header footer hgroup section nav")),c.push.apply(c,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(a.push("xml:lang"),h=t("acronym applet basefont big font strike tt"),c.push.apply(c,h),s(h,function(e){n(e,"",c)}),u=t("center dir isindex noframes"),l.push.apply(l,u),d=[].concat(l,c),s(u,function(e){n(e,"",d)})),d=d||[].concat(l,c),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",d),n("address dt dd div caption","",d),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),n("blockquote","cite",d),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",d),n("dl","","dt dd"),n("a","href target rel media hreflang type",c),n("q","cite",c),n("ins del","cite datetime",d),n("img","src alt usemap ismap width height"),n("iframe","src name width height",d),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",d,"param"),n("param","name value"),n("map","name",d,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",d),n("th","colspan rowspan headers scope abbr",d),n("form","accept-charset action autocomplete enctype method name novalidate target",d),n("fieldset","disabled form name",d,"legend"),n("label","form for",c),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?d:c),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",d,"li"),n("noscript","",d),"html4"!=e&&(n("wbr"),n("ruby","",c,"rt rp"),n("figcaption","",d),n("mark rt rp summary bdi","",c),n("canvas","width height",d),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",d,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",d,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",c,"option"),n("article section nav aside header footer","",d),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",d,"figcaption"),n("time","datetime",c),n("dialog","open",d),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",c),n("progress","value max",c),n("meter","value min max low high optimum",c),n("details","open",d,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){p[e]&&delete p[e].children[e]}),delete p.caption.children.table,o[e]=p,p)}function i(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),s(e,function(e,i){n[i]="map"==t?a(e,/[, ]/):c(e,/[, ]/)})),n}var o={},r={},a=e.makeMap,s=e.each,l=e.extend,c=e.explode,d=e.inArray;return function(e){function r(t,n,i){var r=e[t];return r?r=a(r,/[, ]/,a(r.toUpperCase(),/[, ]/)):(r=o[t],r||(r=a(n," ",a(n.toUpperCase()," ")),r=l(r,i),o[t]=r)),r}function u(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function h(e){var n,i,o,r,s,l,c,h,p,f,v,m,g,b,y,_,w,x,$,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,C=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e)for(e=t(e,","),P["@"]&&(_=P["@"].attributes,w=P["@"].attributesOrder),n=0,i=e.length;i>n;n++)if(s=k.exec(e[n])){if(b=s[1],p=s[2],y=s[3],h=s[5],m={},g=[],l={attributes:m,attributesOrder:g},"#"===b&&(l.paddEmpty=!0),"-"===b&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),_){for(x in _)m[x]=_[x];g.push.apply(g,w)}if(h)for(h=t(h,"|"),o=0,r=h.length;r>o;o++)if(s=C.exec(h[o])){if(c={},v=s[1],f=s[2].replace(/::/g,":"),b=s[3],$=s[4],"!"===v&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(f),c.required=!0),"-"===v){delete m[f],g.splice(d(g,f),1);continue}b&&("="===b&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:f,value:$}),c.defaultValue=$),":"===b&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:f,value:$}),c.forcedValue=$),"<"===b&&(c.validValues=a($,"?"))),T.test(f)?(l.attributePatterns=l.attributePatterns||[],c.pattern=u(f),l.attributePatterns.push(c)):(m[f]||g.push(f),m[f]=c)}_||"@"!=p||(_=m,w=g),y&&(l.outputName=p,P[y]=l),T.test(p)?(l.pattern=u(p),M.push(l)):P[p]=l}}function p(e){P={},M=[],h(e),s(y,function(e,t){E[t]=e.children})}function f(e){var n=/^(~)?(.+)$/;e&&(o.text_block_elements=o.block_elements=null,s(t(e,","),function(e){var t=n.exec(e),i="~"===t[1],o=i?"span":"div",r=t[2];if(E[r]=E[o],I[r]=o,i||(C[r.toUpperCase()]={},C[r]={}),!P[r]){var a=P[o];a=l({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,P[r]=a}s(E,function(e,t){e[o]&&(E[t]=e=l({},E[t]),e[r]=e[o])})}))}function v(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e,","),function(e){var i,o,r=n.exec(e);r&&(o=r[1],i=o?E[r[2]]:E[r[2]]={"#comment":{}},i=E[r[2]],s(t(r[3],"|"),function(e){"-"===o?(E[r[2]]=i=l({},E[r[2]]),delete i[e]):i[e]={}}))})}function m(e){var t,n=P[e];if(n)return n;for(t=M.length;t--;)if(n=M[t],n.pattern.test(e))return n}var g,b,y,_,w,x,$,k,C,T,S,A,D=this,P={},E={},M=[],I={},N={};e=e||{},y=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),g=i(e.valid_styles),b=i(e.invalid_styles,"map"),k=i(e.valid_classes,"map"),_=r("whitespace_elements","pre script noscript style textarea video audio iframe object"),w=r("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),x=r("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),$=r("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),T=r("non_empty_elements","td th iframe video audio object script",x),S=r("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),C=r("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",S),A=r("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),s((e.special||"script noscript style textarea").split(" "),function(e){N[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?p(e.valid_elements):(s(y,function(e,t){P[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},E[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),P[e[1]].outputName=e[0]}),P.img.attributesDefault=[{name:"alt",value:""}],s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){P[e]&&(P[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){P[e].paddEmpty=!0}),s(t("span"),function(e){P[e].removeEmptyAttrs=!0})),f(e.custom_elements),v(e.valid_children),h(e.extended_valid_elements),v("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&s(c(e.invalid_elements),function(e){P[e]&&delete P[e]}),m("span")||h("span[!data-mce-type|*]"),D.children=E,D.getValidStyles=function(){return g},D.getInvalidStyles=function(){return b},D.getValidClasses=function(){return k},D.getBoolAttrs=function(){return $},D.getBlockElements=function(){return C},D.getTextBlockElements=function(){return S},D.getTextInlineElements=function(){return A},D.getShortEndedElements=function(){return x},D.getSelfClosingElements=function(){return w},D.getNonEmptyElements=function(){return T},D.getWhiteSpaceElements=function(){return _},D.getSpecialElements=function(){return N},D.isValidChild=function(e,t){var n=E[e];return!(!n||!n[t])},D.isValid=function(e,t){var n,i,o=m(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},D.getElementRule=m,D.getCustomElements=function(){return I},D.addValidElements=h,D.setValidElements=p,D.addCustomElements=f,D.addValidChildren=v,D.elements=P}}),i(k,[$,v,c],function(e,t,n){function i(e,t,n){var i,o,r,a,s=1;for(a=e.getShortEndedElements(),r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,r.lastIndex=i=n;o=r.exec(t);){if(i=r.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return i}function o(o,a){function s(){}var l=this;o=o||{},l.schema=a=a||new e,o.fix_self_closing!==!1&&(o.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=o[e]||s)}),l.parse=function(e){function r(e){var t,n;for(t=R.length;t--&&R[t].name!==e;);if(t>=0){for(n=R.length-1;n>=t;n--)e=R[n],e.valid&&j.end(e.name);R.length=t}}function s(e,t,n,i,r){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in b?t:B(n||i||r||""),_&&!v&&0!==t.indexOf("data-")){if(a=C[t],!a&&T){for(s=T.length;s--&&(a=T[s],!a.pattern.test(t)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(q[t]&&!o.allow_script_urls){var c=n.replace(l,"");try{c=decodeURIComponent(c)}catch(d){c=unescape(c)}if(U.test(c))return;if(!o.allow_html_data_urls&&z.test(c)&&!/^data:image\//i.test(c))return}u.map[t]=n,u.push({name:t,value:n})}var l,c,d,u,h,p,f,v,m,g,b,y,_,w,x,$,k,C,T,S,A,D,P,E,M,I,N,F,L,j=this,O=0,R=[],H=0,B=t.decode,q=n.makeMap("src,href,data,background,formaction,poster"),U=/((java|vb)script|mhtml):/i,z=/^data:/i;for(M=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),I=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,g=a.getShortEndedElements(),E=o.self_closing_elements||a.getSelfClosingElements(),b=a.getBoolAttrs(),_=o.validate,m=o.remove_internals,L=o.fix_self_closing,N=a.getSpecialElements();l=M.exec(e);){if(O<l.index&&j.text(B(e.substr(O,l.index-O))),c=l[6])c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),r(c);else if(c=l[7]){if(c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),y=c in g,L&&E[c]&&R.length>0&&R[R.length-1].name===c&&r(c),!_||(w=a.getElementRule(c))){if(x=!0,_&&(C=w.attributes,T=w.attributePatterns),(k=l[8])?(v=-1!==k.indexOf("data-mce-type"),v&&m&&(x=!1),u=[],u.map={},k.replace(I,s)):(u=[],u.map={}),_&&!v){if(S=w.attributesRequired,A=w.attributesDefault,D=w.attributesForced,P=w.removeEmptyAttrs,P&&!u.length&&(x=!1),D)for(h=D.length;h--;)$=D[h],f=$.name,F=$.value,"{$uid}"===F&&(F="mce_"+H++),u.map[f]=F,u.push({name:f,value:F});if(A)for(h=A.length;h--;)$=A[h],f=$.name,f in u.map||(F=$.value,"{$uid}"===F&&(F="mce_"+H++),u.map[f]=F,u.push({name:f,value:F}));if(S){for(h=S.length;h--&&!(S[h]in u.map););-1===h&&(x=!1)}if($=u.map["data-mce-bogus"]){if("all"===$){O=i(a,e,M.lastIndex),M.lastIndex=O;continue}x=!1}}x&&j.start(c,u,y)}else x=!1;if(d=N[c]){d.lastIndex=O=l.index+l[0].length,(l=d.exec(e))?(x&&(p=e.substr(O,l.index-O)),O=l.index+l[0].length):(p=e.substr(O),O=e.length),x&&(p.length>0&&j.text(p,!0),j.end(c)),M.lastIndex=O;continue}y||(k&&k.indexOf("/")==k.length-1?x&&j.end(c):R.push({name:c,valid:x}))}else(c=l[1])?(">"===c.charAt(0)&&(c=" "+c),o.allow_conditional_comments||"[if"!==c.substr(0,3)||(c=" "+c),j.comment(c)):(c=l[2])?j.cdata(c):(c=l[3])?j.doctype(c):(c=l[4])&&j.pi(c,l[5]);O=l.index+l[0].length}for(O<e.length&&j.text(B(e.substr(O))),h=R.length-1;h>=0;h--)c=R[h],c.valid&&j.end(c.name)}}var r=n.each;return o.findEndTag=i,o}),i(C,[x,$,k,c],function(e,t,n,i){var o=i.makeMap,r=i.each,a=i.explode,s=i.extend;return function(i,l){function c(t){var n,i,r,a,s,c,u,h,p,f,v,m,g,b;for(v=o("tr,td,th,tbody,thead,tfoot,table"),f=l.getNonEmptyElements(),m=l.getTextBlockElements(),n=0;n<t.length;n++)if(i=t[n],i.parent&&!i.fixed)if(m[i.name]&&"li"==i.parent.name){for(g=i.next;g&&m[g.name];)g.name="li",g.fixed=!0,i.parent.insert(g,i.parent),g=g.next;i.unwrap(i)}else{for(a=[i],r=i.parent;r&&!l.isValidChild(r.name,i.name)&&!v[r.name];r=r.parent)a.push(r);if(r&&a.length>1){for(a.reverse(),s=c=d.filterNode(a[0].clone()),p=0;p<a.length-1;p++){for(l.isValidChild(c.name,a[p].name)?(u=d.filterNode(a[p].clone()),c.append(u)):u=c,h=a[p].firstChild;h&&h!=a[p+1];)b=h.next,u.append(h),h=b;c=u}s.isEmpty(f)?r.insert(i,a[0],!0):(r.insert(s,a[0],!0),r.insert(i,s)),r=a[0],(r.isEmpty(f)||r.firstChild===r.lastChild&&"br"===r.firstChild.name)&&r.empty().remove()}else if(i.parent){if("li"===i.name){if(g=i.prev,g&&("ul"===g.name||"ul"===g.name)){g.append(i);continue}if(g=i.next,g&&("ul"===g.name||"ul"===g.name)){g.insert(i,g.firstChild,!0);continue}i.wrap(d.filterNode(new e("ul",1)));continue}l.isValidChild(i.parent.name,"div")&&l.isValidChild("div",i.name)?i.wrap(d.filterNode(new e("div",1))):"style"===i.name||"script"===i.name?i.empty().remove():i.unwrap()}}}var d=this,u={},h=[],p={},f={};i=i||{},i.validate="validate"in i?i.validate:!0,i.root_name=i.root_name||"body",d.schema=l=l||new t,d.filterNode=function(e){var t,n,i;n in u&&(i=p[n],i?i.push(e):p[n]=[e]),t=h.length;for(;t--;)n=h[t].name,n in e.attributes.map&&(i=f[n],i?i.push(e):f[n]=[e]);return e},d.addNodeFilter=function(e,t){r(a(e),function(e){var n=u[e];n||(u[e]=n=[]),n.push(t)})},d.addAttributeFilter=function(e,t){r(a(e),function(e){var n;for(n=0;n<h.length;n++)if(h[n].name===e)return void h[n].callbacks.push(t);h.push({name:e,callbacks:[t]})})},d.parse=function(t,r){function a(){function e(e){e&&(o=e.firstChild,o&&3==o.type&&(o.value=o.value.replace(D,"")),o=e.lastChild,o&&3==o.type&&(o.value=o.value.replace(E,"")))}var t,n,o=b.firstChild;if(l.isValidChild(b.name,j.toLowerCase())){for(;o;)t=o.next,3==o.type||1==o.type&&"p"!==o.name&&!A[o.name]&&!o.attr("data-mce-type")?n?n.append(o):(n=d(j,1),n.attr(i.forced_root_block_attrs),b.insert(n,o),n.append(o)):(e(n),n=null),o=t;e(n)}}function d(t,n){var i,o=new e(t,n);return t in u&&(i=p[t],i?i.push(o):p[t]=[o]),o}function v(e){var t,n,i;for(t=e.prev;t&&3===t.type;)n=t.value.replace(E,""),n.length>0?(t.value=n,t=t.prev):(i=t.prev,t.remove(),t=i)}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var g,b,y,_,w,x,$,k,C,T,S,A,D,P,E,M,I,N,F,L,j,O=[];if(r=r||{},p={},f={},A=s(o("script,style,head,html,body,title,meta,param"),l.getBlockElements()),L=l.getNonEmptyElements(),F=l.children,S=i.validate,j="forced_root_block"in r?r.forced_root_block:i.forced_root_block,N=l.getWhiteSpaceElements(),D=/^[ \t\r\n]+/,E=/[ \t\r\n]+$/,M=/[ \t\r\n]+/g,I=/^[ \t\r\n]+$/,g=new n({validate:S,allow_script_urls:i.allow_script_urls,allow_conditional_comments:i.allow_conditional_comments,self_closing_elements:m(l.getSelfClosingElements()),cdata:function(e){y.append(d("#cdata",4)).value=e},text:function(e,t){var n;P||(e=e.replace(M," "),y.lastChild&&A[y.lastChild.name]&&(e=e.replace(D,""))),0!==e.length&&(n=d("#text",3),n.raw=!!t,y.append(n).value=e)},comment:function(e){y.append(d("#comment",8)).value=e},pi:function(e,t){y.append(d(e,7)).value=t,v(y)},doctype:function(e){var t;t=y.append(d("#doctype",10)),t.value=e,v(y)},start:function(e,t,n){var i,o,r,a,s;if(r=S?l.getElementRule(e):{}){for(i=d(r.outputName||e,1),i.attributes=t,i.shortEnded=n,y.append(i),s=F[y.name],s&&F[i.name]&&!s[i.name]&&O.push(i),o=h.length;o--;)a=h[o].name,a in t.map&&(C=f[a],C?C.push(i):f[a]=[i]);A[e]&&v(i),n||(y=i),!P&&N[e]&&(P=!0)}},end:function(t){var n,i,o,r,a;if(i=S?l.getElementRule(t):{}){if(A[t]&&!P){if(n=y.firstChild,n&&3===n.type)if(o=n.value.replace(D,""),o.length>0)n.value=o,n=n.next;else for(r=n.next,n.remove(),n=r;n&&3===n.type;)o=n.value,r=n.next,(0===o.length||I.test(o))&&(n.remove(),n=r),n=r;if(n=y.lastChild,n&&3===n.type)if(o=n.value.replace(E,""),o.length>0)n.value=o,n=n.prev;else for(r=n.prev,n.remove(),n=r;n&&3===n.type;)o=n.value,r=n.prev,(0===o.length||I.test(o))&&(n.remove(),n=r),n=r}if(P&&N[t]&&(P=!1),(i.removeEmpty||i.paddEmpty)&&y.isEmpty(L))if(i.paddEmpty)y.empty().append(new e("#text","3")).value=" ";else if(!y.attributes.map.name&&!y.attributes.map.id)return a=y.parent,A[y.name]?y.empty().remove():y.unwrap(),void(y=a);y=y.parent}}},l),b=y=new e(r.context||i.root_name,11),g.parse(t),S&&O.length&&(r.context?r.invalid=!0:c(O)),j&&("body"==b.name||r.isRootContent)&&a(),!r.invalid){for(T in p){for(C=u[T],_=p[T],$=_.length;$--;)_[$].parent||_.splice($,1);for(w=0,x=C.length;x>w;w++)C[w](_,T,r)}for(w=0,x=h.length;x>w;w++)if(C=h[w],C.name in f){for(_=f[C.name],$=_.length;$--;)_[$].parent||_.splice($,1);for($=0,k=C.callbacks.length;k>$;$++)C.callbacks[$](_,C.name,r)}}return b},i.remove_trailing_brs&&d.addNodeFilter("br",function(t){var n,i,o,r,a,c,d,u,h=t.length,p=s({},l.getBlockElements()),f=l.getNonEmptyElements();for(p.body=1,n=0;h>n;n++)if(i=t[n],o=i.parent,p[i.parent.name]&&i===o.lastChild){for(a=i.prev;a;){if(c=a.name,"span"!==c||"bookmark"!==a.attr("data-mce-type")){if("br"!==c)break;if("br"===c){i=null;break}}a=a.prev}i&&(i.remove(),o.isEmpty(f)&&(d=l.getElementRule(o.name),d&&(d.removeEmpty?o.remove():d.paddEmpty&&(o.empty().append(new e("#text",3)).value=" "))))}else{for(r=i;o&&o.firstChild===r&&o.lastChild===r&&(r=o,!p[o.name]);)o=o.parent;r===o&&(u=new e("#text",3),u.value=" ",i.replace(u))}}),i.allow_html_in_named_anchor||d.addAttributeFilter("id,name",function(e){for(var t,n,i,o,r=e.length;r--;)if(o=e[r],"a"===o.name&&o.firstChild&&!o.attr("href")){i=o.parent,t=o.lastChild;do n=t.prev,i.insert(t,o),t=n;while(t)}}),i.validate&&l.getValidClasses()&&d.addAttributeFilter("class",function(e){for(var t,n,i,o,r,a,s,c=e.length,d=l.getValidClasses();c--;){for(t=e[c],n=t.attr("class").split(" "),r="",i=0;i<n.length;i++)o=n[i],s=!1,a=d["*"],a&&a[o]&&(s=!0),a=d[t.name],s||!a||a[o]||(s=!0),s&&(r&&(r+=" "),r+=o);r.length||(r=null),t.attr("class",r)}})}}),i(T,[v,c],function(e,t){var n=t.makeMap;return function(t){var i,o,r,a,s,l=[];return t=t||{},i=t.indent,o=n(t.indent_before||""),r=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var c,d,u,h;if(i&&o[e]&&l.length>0&&(h=l[l.length-1],h.length>0&&"\n"!==h&&l.push("\n")),l.push("<",e),t)for(c=0,d=t.length;d>c;c++)u=t[c],l.push(" ",u.name,'="',a(u.value,!0),'"');l[l.length]=!n||s?">":" />",n&&i&&r[e]&&l.length>0&&(h=l[l.length-1],h.length>0&&"\n"!==h&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),i&&r[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>"),i&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),i(S,[T,$],function(e,t){return function(n,i){var o=this,r=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,o.schema=i=i||new t,o.writer=r,o.serialize=function(e){function t(e){var n,s,l,c,d,u,h,p,f,v=o[e.type];if(v)v(e);else{if(n=e.name,s=e.shortEnded,l=e.attributes,a&&l&&l.length>1){for(u=[],u.map={},f=i.getElementRule(e.name),h=0,p=f.attributesOrder.length;p>h;h++)c=f.attributesOrder[h],c in l.map&&(d=l.map[c],u.map[c]=d,u.push({name:c,value:d}));for(h=0,p=l.length;p>h;h++)c=l[h].name,c in u.map||(d=l.map[c],u.map[c]=d,u.push({name:c,value:d}));l=u}if(r.start(e.name,l,s),!s){if(e=e.firstChild)do t(e);while(e=e.next);r.end(n)}}}var o,a;return a=n.validate,o={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)
},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},r.reset(),1!=e.type||n.inner?o[11](e):t(e),r.getContent()}}}),i(A,[g,C,v,S,x,$,d,c],function(e,t,n,i,o,r,a,s){var l=s.each,c=s.trim,d=e.DOM;return function(e,o){var s,u,h;return o&&(s=o.dom,u=o.schema),s=s||d,u=u||new r(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,h=new t(e,u),h.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,i=e.length;i--;)n=e[i],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),h.addAttributeFilter("src,href,style",function(t,n){for(var i,o,r,a=t.length,l="data-mce-"+n,c=e.url_converter,d=e.url_converter_scope;a--;)i=t[a],o=i.attributes.map[l],o!==r?(i.attr(n,o.length>0?o:null),i.attr(l,null)):(o=i.attributes.map[n],"style"===n?o=s.serializeStyle(s.parseStyle(o),i.name):c&&(o=c.call(d,o,n,i.name)),i.attr(n,o.length>0?o:null))}),h.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("class"),n&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),h.addAttributeFilter("data-mce-type",function(e,t,n){for(var i,o=e.length;o--;)i=e[o],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),h.addNodeFilter("noscript",function(e){for(var t,i=e.length;i--;)t=e[i].firstChild,t&&(t.value=n.decode(t.value))}),h.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,o,r,a=e.length;a--;)i=e[a],o=i.firstChild?i.firstChild.value:"","script"===t?(r=i.attr("type"),r&&i.attr("type","mce-no/type"==r?null:r.replace(/^mce\-/,"")),o.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(o)+"\n// ]]>")):o.length>0&&(i.firstChild.value="<!--\n"+n(o)+"\n-->")}),h.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)n=e[i],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&h.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:u,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(t,n){var o,r,d,p,f,v=this;return a.ie&&s.select("script,style,select,map").length>0?(f=t.innerHTML,t=t.cloneNode(!1),s.setHTML(t,f)):t=t.cloneNode(!0),o=t.ownerDocument.implementation,o.createHTMLDocument&&(r=o.createHTMLDocument(""),l("BODY"==t.nodeName?t.childNodes:[t],function(e){r.body.appendChild(r.importNode(e,!0))}),t="BODY"!=t.nodeName?r.body.firstChild:r.body,d=s.doc,s.doc=r),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,v.onPreProcess(n)),p=new i(e,u),n.content=p.serialize(h.parse(c(n.getInner?t.innerHTML:s.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||v.onPostProcess(n),d&&(s.doc=d),n.node=null,n.content},addRules:function(e){u.addValidElements(e)},setRules:function(e){u.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)}}}}),i(D,[],function(){function e(e){function t(t,n){var i,o,r,a,s,l,c,d,u=0,h=-1;if(i=t.duplicate(),i.collapse(n),d=i.parentElement(),d.ownerDocument===e.dom.doc){for(;"false"===d.contentEditable;)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};for(a=d.children,o=a.length-1;o>=u;)if(c=Math.floor((u+o)/2),s=a[c],i.moveToElementText(s),h=i.compareEndPoints(n?"StartToStart":"EndToEnd",t),h>0)o=c-1;else{if(!(0>h))return{node:s};u=c+1}if(0>h)for(s?i.collapse(!1):(i.moveToElementText(d),i.collapse(!0),s=d,r=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",1)&&d==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",-1)&&d==i.parentElement();)l++;return{node:s,position:h,offset:l,inside:r}}}function n(){function n(e){var n,i,o,r,a,s=t(d,e),l=0;if(n=s.node,i=s.offset,s.inside&&!n.hasChildNodes())return void u[e?"setStart":"setEnd"](n,0);if(i===r)return void u[e?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(o=s.inside?n.firstChild:n.nextSibling,!o)return void u[e?"setStartAfter":"setEndAfter"](n);if(!i)return void(3==o.nodeType?u[e?"setStart":"setEnd"](o,0):u[e?"setStartBefore":"setEndBefore"](o));for(;o;){if(3==o.nodeType&&(a=o.nodeValue,l+=a.length,l>=i)){n=o,l-=i,l=a.length-l;break}o=o.nextSibling}}else{if(o=n.previousSibling,!o)return u[e?"setStartBefore":"setEndBefore"](n);if(!i)return void(3==n.nodeType?u[e?"setStart":"setEnd"](o,n.nodeValue.length):u[e?"setStartAfter":"setEndAfter"](o));for(;o;){if(3==o.nodeType&&(l+=o.nodeValue.length,l>=i)){n=o,l-=i;break}o=o.previousSibling}}u[e?"setStart":"setEnd"](n,l)}var r,a,s,l,c,d=e.getRng(),u=o.createRng();if(r=d.item?d.item(0):d.parentElement(),r.ownerDocument!=o.doc)return u;if(a=e.isCollapsed(),d.item)return u.setStart(r.parentNode,o.nodeIndex(r)),u.setEnd(u.startContainer,u.startOffset+1),u;try{n(!0),a||n()}catch(h){if(-2147024809!=h.number)throw h;c=i.getBookmark(2),s=d.duplicate(),s.collapse(!0),r=s.parentElement(),a||(s=d.duplicate(),s.collapse(!1),l=s.parentElement(),l.innerHTML=l.innerHTML),r.innerHTML=r.innerHTML,i.moveToBookmark(c),d=e.getRng(),n(!0),a||n()}return u}var i=this,o=e.dom,r=!1;this.getBookmark=function(n){function i(e){var t,n,i,r,a=[];for(t=e.parentNode,n=o.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(i=t.children,r=i.length;r--;)if(e===i[r]){a.push(r);break}e=t,t=t.parentNode}return a}function r(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:i(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:i(a.item(0))}:(s.start=r(!0),e.isCollapsed()||(s.end=r()))),s},this.moveToBookmark=function(e){function t(e){var t,n,i,r;for(t=o.getRoot(),n=e.length-1;n>=0;n--)r=t.children,i=e[n],i<=r.length-1&&(t=r[i]);return t}function n(n){var o,a,s,l,c=e[n?"start":"end"];c&&(o=c.position>0,a=r.createTextRange(),a.moveToElementText(t(c.indexes)),l=c.offset,l!==s?(a.collapse(c.inside||o),a.moveStart("character",o?-l:l)):a.collapse(n),i.setEndPoint(n?"StartToStart":"EndToStart",a),n&&i.collapse(!0))}var i,r=o.doc.body;e.start&&(e.start.ctrl?(i=r.createControlRange(),i.addElement(t(e.start.indexes)),i.select()):(i=r.createTextRange(),n(!0),n(),i.select()))},this.addRange=function(t){function n(e){var t,n,a,u,h;a=o.create("a"),t=e?s:c,n=e?l:d,u=i.duplicate(),(t==f||t==f.documentElement)&&(t=v,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),u.moveToElementText(a),u.moveStart("character",n),o.remove(a),i.setEndPoint(e?"StartToStart":"EndToEnd",u)):(h=t.childNodes,h.length?(n>=h.length?o.insertAfter(a,h[h.length-1]):t.insertBefore(a,h[n]),u.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,u.moveToElementText(a),u.collapse(r)),i.setEndPoint(e?"StartToStart":"EndToEnd",u),o.remove(a))}var i,a,s,l,c,d,u,h,p,f=e.dom.doc,v=f.body;if(s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset,i=v.createTextRange(),s==c&&1==s.nodeType){if(l==d&&!s.hasChildNodes()){if(s.canHaveHTML)return u=s.previousSibling,u&&!u.hasChildNodes()&&o.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(s.lastChild),i.select(),o.doc.selection.clear(),s.innerHTML="",void(u&&(u.innerHTML=""));l=o.nodeIndex(s),s=s.parentNode}if(l==d-1)try{if(p=s.childNodes[l],a=v.createControlRange(),a.addElement(p),a.select(),h=e.getRng(),h.item&&p===h.item(0))return}catch(m){}}n(!0),n(),i.select()},this.getRangeAt=n}return e}),i(P,[d],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),i(E,[P,c,d],function(e,t,n){return function(i,o){function r(e){var t=o.settings.object_resizing;return t===!1||n.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===e.getAttribute("data-mce-resize")?!1:o.dom.is(e,t))}function a(t){var n,i,r,a,s;n=t.screenX-T,i=t.screenY-S,N=n*k[2]+P,F=i*k[3]+E,N=5>N?5:N,F=5>F?5:F,r="IMG"==_.nodeName&&o.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==_.nodeName&&k[2]*k[3]!==0,r&&(U(n)>U(i)?(F=z(N*M),N=z(F/M)):(N=z(F/M),F=z(N*M))),O.setStyles(w,{width:N,height:F}),a=k.startPos.x+n,s=k.startPos.y+i,a=a>0?a:0,s=s>0?s:0,O.setStyles(x,{left:a,top:s,display:"block"}),x.innerHTML=N+" &times; "+F,k[2]<0&&w.clientWidth<=N&&O.setStyle(w,"left",A+(P-N)),k[3]<0&&w.clientHeight<=F&&O.setStyle(w,"top",D+(E-F)),n=V.scrollWidth-L,i=V.scrollHeight-j,n+i!==0&&O.setStyles(x,{left:a-n,top:s-i}),I||(o.fire("ObjectResizeStart",{target:_,width:P,height:E}),I=!0)}function s(){function e(e,t){t&&(_.style[e]||!o.schema.isValid(_.nodeName.toLowerCase(),e)?O.setStyle(_,e,t):O.setAttrib(_,e,t))}I=!1,e("width",N),e("height",F),O.unbind(H,"mousemove",a),O.unbind(H,"mouseup",s),B!=H&&(O.unbind(B,"mousemove",a),O.unbind(B,"mouseup",s)),O.remove(w),O.remove(x),q&&"TABLE"!=_.nodeName||l(_),o.fire("ObjectResized",{target:_,width:N,height:F}),O.setAttrib(_,"style",O.getAttrib(_,"style")),o.nodeChanged()}function l(e,t,i){var l,d,u,h,p;m(),l=O.getPos(e,V),A=l.x,D=l.y,p=e.getBoundingClientRect(),d=p.width||p.right-p.left,u=p.height||p.bottom-p.top,_!=e&&(v(),_=e,N=F=0),h=o.fire("ObjectSelected",{target:e}),r(e)&&!h.isDefaultPrevented()?R($,function(e,o){function r(t){T=t.screenX,S=t.screenY,P=_.clientWidth,E=_.clientHeight,M=E/P,k=e,e.startPos={x:d*e[0]+A,y:u*e[1]+D},L=V.scrollWidth,j=V.scrollHeight,w=_.cloneNode(!0),O.addClass(w,"mce-clonedresizable"),O.setAttrib(w,"data-mce-bogus","all"),w.contentEditable=!1,w.unSelectabe=!0,O.setStyles(w,{left:A,top:D,margin:0}),w.removeAttribute("data-mce-selected"),V.appendChild(w),O.bind(H,"mousemove",a),O.bind(H,"mouseup",s),B!=H&&(O.bind(B,"mousemove",a),O.bind(B,"mouseup",s)),x=O.add(V,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},P+" &times; "+E)}var l,c;return t?void(o==t&&r(i)):(l=O.get("mceResizeHandle"+o),l?O.show(l):(c=V,l=O.add(c,"div",{id:"mceResizeHandle"+o,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+o+"-resize; margin:0; padding:0"}),n.ie&&(l.contentEditable=!1)),e.elm||(O.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),r(e)}),e.elm=l),void O.setStyles(l,{left:d*e[0]+A-l.offsetWidth/2,top:u*e[1]+D-l.offsetHeight/2}))}):c(),_.setAttribute("data-mce-selected","1")}function c(){var e,t;m(),_&&_.removeAttribute("data-mce-selected");for(e in $)t=O.get("mceResizeHandle"+e),t&&(O.unbind(t),O.remove(t))}function d(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n,o;return I?void 0:(R(O.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),o="mousedown"==e.type?e.target:i.getNode(),o=O.$(o).closest(q?"table":"table,img,hr")[0],t(o,V)&&(g(),n=i.getStart(!0),t(n,o)&&t(i.getEnd(!0),o)&&(!q||o!=n&&"IMG"!==n.nodeName))?void l(o):void c())}function u(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function h(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function p(e){var t,n,i,r,a,s,c,d=e.srcElement;t=d.getBoundingClientRect(),s=C.clientX-t.left,c=C.clientY-t.top;for(n in $)if(i=$[n],r=d.offsetWidth*i[0],a=d.offsetHeight*i[1],U(r-s)<8&&U(a-c)<8){k=i;break}I=!0,o.fire("ObjectResizeStart",{target:_,width:_.clientWidth,height:_.clientHeight}),o.getDoc().selection.empty(),l(d,n,C)}function f(e){var t=e.srcElement;if(t!=_){if(o.fire("ObjectSelected",{target:t}),v(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(c(),_=t,u(t,"resizestart",p))}}function v(){h(_,"resizestart",p)}function m(){for(var e in $){var t=$[e];t.elm&&(O.unbind(t.elm),delete t.elm)}}function g(){try{o.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function b(e){var t;if(q){t=H.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function y(){_=w=null,q&&(v(),h(V,"controlselect",f))}var _,w,x,$,k,C,T,S,A,D,P,E,M,I,N,F,L,j,O=o.dom,R=t.each,H=o.getDoc(),B=document,q=n.ie&&n.ie<11,U=Math.abs,z=Math.round,V=o.getBody();$={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var W=".mce-content-body";return o.contentStyles.push(W+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+W+" .mce-resizehandle:hover {background: #000}"+W+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+W+" .mce-clonedresizable {position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+W+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),o.on("init",function(){q?(o.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(c(),b(e.target))}),u(V,"controlselect",f),o.on("mousedown",function(e){C=e})):(g(),n.ie>=11&&(o.on("mouseup",function(e){var t=e.target.nodeName;!I&&/^(TABLE|IMG|HR)$/.test(t)&&(o.selection.select(e.target,"TABLE"==t),o.nodeChanged())}),o.dom.bind(V,"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&window.setTimeout(function(){o.selection.select(e.target)},0))}))),o.on("nodechange ResizeEditor",d),o.on("keydown keyup",function(e){_&&"TABLE"==_.nodeName&&d(e)}),o.on("hide",c)}),o.on("remove",m),{isResizable:r,showResizeRect:l,hideResizeRect:c,updateResizeRect:d,controlSelect:b,destroy:y}}}),i(M,[d,c],function(e,t){function n(n){var i=n.dom;this.getBookmark=function(e,o){function r(e,n){var o=0;return t.each(i.select(e),function(e,t){e==n&&(o=t)}),o}function a(e){function t(t){var n,i,o,r=t?"start":"end";n=e[r+"Container"],i=e[r+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(o=n.childNodes,n=o[Math.min(t?i:i-1,o.length-1)],n&&(i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i)))}return t(!0),t(),e}function s(){function e(e,t){var n,a,s=e[t?"startContainer":"endContainer"],l=e[t?"startOffset":"endOffset"],c=[],d=0;if(3==s.nodeType){if(o)for(n=s.previousSibling;n&&3==n.nodeType;n=n.previousSibling)l+=n.nodeValue.length;c.push(l)}else a=s.childNodes,l>=a.length&&a.length&&(d=1,l=Math.max(0,a.length-1)),c.push(i.nodeIndex(a[l],o)+d);for(;s&&s!=r;s=s.parentNode)c.push(i.nodeIndex(s,o));return c}var t=n.getRng(!0),r=i.getRoot(),a={};return a.start=e(t,!0),n.isCollapsed()||(a.end=e(t)),a}var l,c,d,u,h,p,f,v="&#xFEFF;";if(2==e)return p=n.getNode(),h=p?p.nodeName:null,"IMG"==h?{name:h,index:r(h,p)}:n.tridentSel?n.tridentSel.getBookmark(e):s();if(e)return{rng:n.getRng()};if(l=n.getRng(),d=i.uniqueId(),u=n.isCollapsed(),f="overflow:hidden;line-height:0px",l.duplicate||l.item){if(l.item)return p=l.item(0),h=p.nodeName,{name:h,index:r(h,p)};c=l.duplicate();try{l.collapse(),l.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_start" style="'+f+'">'+v+"</span>"),u||(c.collapse(!1),l.moveToElementText(c.parentElement()),0===l.compareEndPoints("StartToEnd",c)&&c.move("character",-1),c.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_end" style="'+f+'">'+v+"</span>"))}catch(m){return null}}else{if(p=n.getNode(),h=p.nodeName,"IMG"==h)return{name:h,index:r(h,p)};c=a(l.cloneRange()),u||(c.collapse(!1),c.insertNode(i.create("span",{"data-mce-type":"bookmark",id:d+"_end",style:f},v))),l=a(l),l.collapse(!0),l.insertNode(i.create("span",{"data-mce-type":"bookmark",id:d+"_start",style:f},v))}return n.moveToBookmark({id:d,keep:1}),{id:d}},this.moveToBookmark=function(o){function r(e){var t,n,i,r,a=o[e?"start":"end"];if(a){for(i=a[0],n=c,t=a.length-1;t>=1;t--){if(r=n.childNodes,a[t]>r.length-1)return;n=r[a[t]]}3===n.nodeType&&(i=Math.min(a[0],n.nodeValue.length)),1===n.nodeType&&(i=Math.min(a[0],n.childNodes.length)),e?l.setStart(n,i):l.setEnd(n,i)}return!0}function a(n){var r,a,s,l,c=i.get(o.id+"_"+n),f=o.keep;if(c&&(r=c.parentNode,"start"==n?(f?(r=c.firstChild,a=1):a=i.nodeIndex(c),d=u=r,h=p=a):(f?(r=c.firstChild,a=1):a=i.nodeIndex(c),u=r,p=a),!f)){for(l=c.previousSibling,s=c.nextSibling,t.each(t.grep(c.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=i.get(o.id+"_"+n);)i.remove(c,1);l&&s&&l.nodeType==s.nodeType&&3==l.nodeType&&!e.opera&&(a=l.nodeValue.length,l.appendData(s.nodeValue),i.remove(s),"start"==n?(d=u=l,h=p=a):(u=l,p=a))}}function s(t){return!i.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var l,c,d,u,h,p;if(o)if(o.start){if(l=i.createRng(),c=i.getRoot(),n.tridentSel)return n.tridentSel.moveToBookmark(o);r(!0)&&r()&&n.setRng(l)}else o.id?(a("start"),a("end"),d&&(l=i.createRng(),l.setStart(s(d),h),l.setEnd(s(u),p),n.setRng(l))):o.name?n.select(i.select(o.name)[o.index]):o.rng&&n.setRng(o.rng)}}return n.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},n}),i(I,[p,D,E,_,M,d,c],function(e,n,i,o,r,a,s){function l(e,t,o,a){var s=this;s.dom=e,s.win=t,s.serializer=o,s.editor=a,s.bookmarkManager=new r(s),s.controlSelection=new i(s,a),s.win.getSelection||(s.tridentSel=new n(s))}var c=s.each,d=s.trim,u=a.ie;return l.prototype={setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();e?(i.setStart(e,t),i.setEnd(e,t),n.setRng(i),n.collapse(!1)):(n._moveEndPoint(i,n.editor.getBody(),!0),n.setRng(i))},getContent:function(e){var n,i,o,r=this,a=r.getRng(),s=r.dom.create("body"),l=r.getSel();return e=e||{},n=i="",e.get=!0,e.format=e.format||"html",e.selection=!0,r.editor.fire("BeforeGetContent",e),"text"==e.format?r.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(o=a.cloneContents(),o&&s.appendChild(o)):a.item!==t||a.htmlText!==t?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(i=" "),e.getInner=!0,e.content=r.isCollapsed()?"":n+r.serializer.serialize(s,e)+i,r.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,i,o,r=this,a=r.getRng(),s=r.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||r.editor.fire("BeforeSetContent",t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=e,a.insertNode(i))),n=r.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),r.setRng(a),r.dom.remove("__caret");try{r.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=r.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),r.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||r.editor.fire("SetContent",t)},getStart:function(e){var t,n,i,o,r=this,a=r.getRng();if(a.duplicate||a.item){if(a.item)return a.item(0);for(i=a.duplicate(),i.collapse(1),t=i.parentElement(),t.ownerDocument!==r.dom.doc&&(t=r.dom.getRoot()),n=o=a.parentElement();o=o.parentNode;)if(o==t){t=n;break}return t}return t=a.startContainer,1==t.nodeType&&t.hasChildNodes()&&(e&&a.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,a.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,i=this,o=i.getRng();return o.duplicate||o.item?o.item?o.item(0):(o=o.duplicate(),o.collapse(0),t=o.parentElement(),t.ownerDocument!==i.dom.doc&&(t=i.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=o.endContainer,n=o.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&o.collapsed||(t=t.childNodes[n>0?n-1:n])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,i=this,o=i.dom,r=o.createRng();if(i.lastFocusBookmark=null,e){if(!t&&i.controlSelection.controlSelect(e))return;n=o.nodeIndex(e),r.setStart(e.parentNode,n),r.setEnd(e.parentNode,n+1),t&&(i._moveEndPoint(r,e,!0),i._moveEndPoint(r,e)),i.setRng(r)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t,n=this,i=n.getRng();i.item&&(t=i.item(0),i=n.win.document.body.createTextRange(),i.moveToElementText(t)),i.collapse(!!e),n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(i){return-1}}var n,i,o,r,a=this,s=a.win.document;if(!e&&a.lastFocusBookmark){var l=a.lastFocusBookmark;return l.startContainer?(i=s.createRange(),i.setStart(l.startContainer,l.startOffset),i.setEnd(l.endContainer,l.endOffset)):i=l,i}if(e&&a.tridentSel)return a.tridentSel.getRangeAt(0);try{(n=a.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(c){}if(u&&i&&i.setStart&&s.selection){try{r=s.selection.createRange()}catch(c){}r&&r.item&&(o=r.item(0),i=s.createRange(),i.setStartBefore(o),i.setEndAfter(o))}return i||(i=s.createRange?s.createRange():s.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=a.dom.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a.selectedRange&&a.explicitRange&&(0===t(i.START_TO_START,i,a.selectedRange)&&0===t(i.END_TO_END,i,a.selectedRange)?i=a.explicitRange:(a.selectedRange=null,a.explicitRange=null)),i},setRng:function(e,t){var n,i=this;if(e.select)try{e.select()}catch(o){}else if(i.tridentSel){if(e.cloneRange)try{return void i.tridentSel.addRange(e)}catch(o){}}else if(n=i.getSel()){i.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(o){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,i=n.getRng(),o=i.startContainer,r=i.endContainer,a=i.startOffset,s=i.endOffset,l=n.dom.getRoot();return i?i.setStart?(t=i.commonAncestorContainer,!i.collapsed&&(o==r&&2>s-a&&o.hasChildNodes()&&(t=o.childNodes[a]),3===o.nodeType&&3===r.nodeType&&(o=o.length===a?e(o.nextSibling,!0):o.parentNode,r=0===s?e(r.previousSibling,!1):r.parentNode,o&&o===r))?o:t&&3==t.nodeType?t.parentNode:t):(t=i.item?i.item(0):i.parentElement(),t.ownerDocument!==n.win.document&&(t=l),t):l},getSelectedBlocks:function(t,n){var i,o,r=this,a=r.dom,s=[];if(o=a.getRoot(),t=a.getParent(t||r.getStart(),a.isBlock),n=a.getParent(n||r.getEnd(),a.isBlock),t&&t!=o&&s.push(t),t&&n&&t!=n){i=t;for(var l=new e(t,o);(i=l.next())&&i!=n;)a.isBlock(i)&&s.push(i)}return n&&t!=n&&n!=o&&s.push(n),s},isForward:function(){var e,t,n=this.dom,i=this.getSel();return i&&i.anchorNode&&i.focusNode?(e=n.createRng(),e.setStart(i.anchorNode,i.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(i.focusNode,i.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0):!0},normalize:function(){var e=this,t=e.getRng();return!u&&new o(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.on("NodeChange",function(e){var t=e.element,o=i.dom,r=o.getParents(t,null,o.getRoot()),a={};c(i.selectorChangedData,function(e,t){c(r,function(i){return o.is(i,t)?(n[t]||(c(e,function(e){e(!0,{node:i,selector:t,parents:r})}),n[t]=e),a[t]=e,!1):void 0})}),c(n,function(e,i){a[i]||(delete n[i],c(e,function(e){e(!1,{node:t,selector:i,parents:r})}))})})),i.selectorChangedData[e]||(i.selectorChangedData[e]=[]),i.selectorChangedData[e].push(t),i},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function t(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}}var n,i,o,r,a=this,s=a.dom,l=s.getRoot();if("BODY"!=l.nodeName){var c=a.getScrollContainer();if(c)return n=t(e).y-t(c).y,r=c.clientHeight,o=c.scrollTop,void((o>n||n+25>o+r)&&(c.scrollTop=o>n?n:n-r+25))}i=s.getViewPort(a.editor.getWin()),n=s.getPos(e).y,o=i.y,r=i.h,(n<i.y||n+25>o+r)&&a.editor.getWin().scrollTo(0,o>n?n:n-r+25)},placeCaretAt:function(e,t){var n,i,o=this.editor.getDoc();if(o.caretPositionFromPoint)i=o.caretPositionFromPoint(e,t),n=o.createRange(),n.setStart(i.offsetNode,i.offset),n.collapse(!0);else if(o.caretRangeFromPoint)n=o.caretRangeFromPoint(e,t);else if(o.body.createTextRange){n=o.body.createTextRange();try{n.moveToPoint(e,t),n.collapse(!0)}catch(r){n.collapse(t<o.body.clientHeight)}}this.setRng(n)},_moveEndPoint:function(t,n,i){var o=n,r=new e(n,o),s=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==d(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(s[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(a.ie&&a.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?r.next():r.prev());"BODY"==o.nodeName&&(i?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},l}),i(N,[M,c],function(e,t){function n(t){this.compare=function(n,o){function r(e){var n={};return i(t.getAttribs(e),function(i){var o=i.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&"data-mce-style"!==o&&(n[o]=t.getAttrib(e,o))}),n}function a(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(n=t[i],"undefined"==typeof n)return!1;if(e[i]!=n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}return n.nodeName!=o.nodeName?!1:a(r(n),r(o))&&a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(o,"style")))?!e.isBookmarkNode(n)&&!e.isBookmarkNode(o):!1}}var i=t.each;return n}),i(F,[c],function(e){function t(e,t){function i(e){return e.replace(/%(\w+)/g,"")}var o,r,a,s,l=e.dom,c="";if(s=e.settings.preview_styles,s===!1)return"";if(s||(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return o=t.block||t.inline||"span",r=l.create(o),n(t.styles,function(e,t){e=i(e),e&&l.setStyle(r,t,e)}),n(t.attributes,function(e,t){e=i(e),e&&l.setAttrib(r,t,e)}),n(t.classes,function(e){e=i(e),l.hasClass(r,e)||l.addClass(r,e)}),e.fire("PreviewFormats"),l.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=l.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,n(s.split(" "),function(t){var n=l.getStyle(r,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=l.getStyle(e.getBody(),t,!0),"#ffffff"==l.toHex(n).toLowerCase())||"color"==t&&"#000000"==l.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*a+"px"}"border"==t&&n&&(c+="padding:0 2px;"),c+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),l.remove(r),c}var n=e.each;return{getCssText:t}}),i(L,[p,_,M,N,c,F],function(e,t,n,i,o,r){return function(a){function s(e){return e.nodeType&&(e=e.nodeName),!!a.schema.getTextBlockElements()[e.toLowerCase()]}function l(e,t){return Y.getParents(e,t,Y.getRoot())}function c(e){return 1===e.nodeType&&"_mce_caret"===e.id}function d(){p({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){at(n,function(t,n){Y.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),at("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){p(e,{block:e,remove:"all"})}),p(a.settings.formats)}function u(){a.addShortcut("ctrl+b","bold_desc","Bold"),a.addShortcut("ctrl+i","italic_desc","Italic"),a.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)a.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);a.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),a.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),a.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function h(e){return e?W[e]:W}function p(e,t){e&&("string"!=typeof e?at(e,function(e,t){p(t,e)}):(t=t.length?t:[t],at(t,function(e){e.deep===U&&(e.deep=!e.selector),e.split===U&&(e.split=!e.selector||e.inline),e.remove===U&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))
}),W[e]=t))}function f(e){return e&&W[e]&&delete W[e],W}function v(e){var t;return a.dom.getParent(e,function(e){return t=a.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function m(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=v(e.parentNode),a.dom.getStyle(e,"color")&&t?a.dom.setStyle(e,"text-decoration",t):a.dom.getStyle(e,"textdecoration")===t&&a.dom.setStyle(e,"text-decoration",null))}function g(t,n,i){function o(e,t){if(t=t||f,e){if(t.onformat&&t.onformat(e,t,n,i),at(t.styles,function(t,i){Y.setStyle(e,i,P(t,n))}),t.styles){var o=Y.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}at(t.attributes,function(t,i){Y.setAttrib(e,i,P(t,n))}),at(t.classes,function(t){t=P(t,n),Y.hasClass(e,t)||Y.addClass(e,t)})}}function r(){function t(t,n){var o=new e(n);for(i=o.current();i;i=o.prev())if(i.childNodes.length>1||i==t||"BR"==i.tagName)return i}var n=a.selection.getRng(),o=n.startContainer,r=n.endContainer;if(o!=r&&0===n.endOffset){var s=t(o,r),l=3==s.nodeType?s.length:s.childNodes.length;n.setEnd(s,l)}return n}function l(e,i,r){var a,l,d=[],u=!0;a=f.inline||f.block,l=Y.create(a),o(l),G.walk(e,function(e){function i(e){var m,g,b,y,w;return w=u,m=e.nodeName.toLowerCase(),g=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&ot(e)&&(w=u,u="true"===ot(e),y=!0),S(m,"br")?(h=0,void(f.block&&Y.remove(e))):f.wrapper&&_(e,t,n)?void(h=0):u&&!y&&f.block&&!f.wrapper&&s(m)&&K(g,a)?(e=Y.rename(e,a),o(e),d.push(e),void(h=0)):f.selector&&(at(p,function(t){"collapsed"in t&&t.collapsed!==v||Y.is(e,t.selector)&&!c(e)&&(o(e,t),b=!0)}),!f.inline||b)?void(h=0):void(!u||y||!K(a,m)||!K(g,a)||!r&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||c(e)||f.inline&&X(e)?(h=0,at(st(e.childNodes),i),y&&(u=w),h=0):(h||(h=Y.clone(l,nt),e.parentNode.insertBefore(h,e),d.push(h)),h.appendChild(e)))}var h;at(e,i)}),f.links===!0&&at(d,function(e){function t(e){"A"===e.nodeName&&o(e,f),at(st(e.childNodes),t)}t(e)}),at(d,function(e){function i(e){var t=0;return at(e.childNodes,function(e){E(e)||rt(e)||t++}),t}function r(e){var t,n;return at(e.childNodes,function(e){return 1!=e.nodeType||rt(e)||c(e)?void 0:(t=e,nt)}),t&&!rt(t)&&T(t,f)&&(n=Y.clone(t,nt),o(n),Y.replace(n,e,it),Y.remove(t,1)),n||e}var a;if(a=i(e),(d.length>1||!X(e))&&0===a)return void Y.remove(e,1);if(f.inline||f.wrapper){if(f.exact||1!==a||(e=r(e)),at(p,function(t){at(Y.select(t.inline,e),function(e){rt(e)||F(t,n,e,t.exact?e:null)})}),_(e.parentNode,t,n))return Y.remove(e,1),e=0,it;f.merge_with_parents&&Y.getParent(e.parentNode,function(i){return _(i,t,n)?(Y.remove(e,1),e=0,it):void 0}),e&&f.merge_siblings!==!1&&(e=O(j(e),e),e=O(e,j(e,it)))}})}var d,u,p=h(t),f=p[0],v=!i&&J.isCollapsed();if(f)if(i)i.nodeType?(u=Y.createRng(),u.setStartBefore(i),u.setEndAfter(i),l(I(u,p),null,!0)):l(i,null,!0);else if(v&&f.inline&&!Y.select("td.mce-item-selected,th.mce-item-selected").length)H("apply",t,n);else{var b=a.selection.getNode();Z||!p[0].defaultBlock||Y.getParent(b,Y.isBlock)||g(p[0].defaultBlock),a.selection.setRng(r()),d=J.getBookmark(),l(I(J.getRng(it),p),d),f.styles&&(f.styles.color||f.styles.textDecoration)&&(lt(b,m,"childNodes"),m(b)),J.moveToBookmark(d),B(J.getRng(it)),a.nodeChanged()}}function b(e,t,n,i){function o(e){var n,i,r,a,s;if(1===e.nodeType&&ot(e)&&(a=b,b="true"===ot(e),s=!0),n=st(e.childNodes),b&&!s)for(i=0,r=m.length;r>i&&!F(m[i],t,e,e);i++);if(g.deep&&n.length){for(i=0,r=n.length;r>i;i++)o(n[i]);s&&(b=a)}}function r(n){var o;return at(l(n.parentNode).reverse(),function(n){var r;o||"_start"==n.id||"_end"==n.id||(r=_(n,e,t,i),r&&r.split!==!1&&(o=n))}),o}function s(e,n,i,o){var r,a,s,l,c,d;if(e){for(d=e.parentNode,r=n.parentNode;r&&r!=d;r=r.parentNode){for(a=Y.clone(r,nt),c=0;c<m.length;c++)if(F(m[c],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!o||g.mixed&&X(e)||(n=Y.split(e,n)),s&&(i.parentNode.insertBefore(s,i),l.appendChild(i))}return n}function c(e){return s(r(e),e,e,!0)}function d(e){var t=Y.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return rt(n)&&(n=n[e?"firstChild":"lastChild"]),Y.remove(t,!0),n}function u(e){var t,n,i=e.commonAncestorContainer;e=I(e,m,it),g.split&&(t=R(e,it),n=R(e),t!=n?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n),t=M(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=M(n,"span",{id:"_end","data-mce-type":"bookmark"}),c(t),c(n),t=d(it),n=d()):t=n=c(t),e.startContainer=t.parentNode,e.startOffset=Q(t),e.endContainer=n.parentNode,e.endOffset=Q(n)+1),G.walk(e,function(e){at(e,function(e){o(e),1===e.nodeType&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===v(e.parentNode)&&F({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var p,f,m=h(e),g=m[0],b=!0;return n?void(n.nodeType?(f=Y.createRng(),f.setStartBefore(n),f.setEndAfter(n),u(f)):u(n)):void(J.isCollapsed()&&g.inline&&!Y.select("td.mce-item-selected,th.mce-item-selected").length?H("remove",e,t,i):(p=J.getBookmark(),u(J.getRng(it)),J.moveToBookmark(p),g.inline&&w(e,t,J.getStart())&&B(J.getRng(!0)),a.nodeChanged()))}function y(e,t,n){var i=h(e);!w(e,t,n)||"toggle"in i[0]&&!i[0].toggle?g(e,t,n):b(e,t,n)}function _(e,t,n,i){function o(e,t,o){var r,a,s,l=t[o];if(t.onmatch)return t.onmatch(e,t,o);if(l)if(l.length===U){for(r in l)if(l.hasOwnProperty(r)){if(a="attributes"===o?Y.getAttrib(e,r):A(e,r),i&&!a&&!t.exact)return;if((!i||t.exact)&&!S(a,D(P(l[r],n),r)))return}}else for(s=0;s<l.length;s++)if("attributes"===o?Y.getAttrib(e,l[s]):A(e,l[s]))return t;return t}var r,a,s,l=h(t);if(l&&e)for(a=0;a<l.length;a++)if(r=l[a],T(e,r)&&o(e,r,"attributes")&&o(e,r,"styles")){if(s=r.classes)for(a=0;a<s.length;a++)if(!Y.hasClass(e,s[a]))return;return r}}function w(e,t,n){function i(n){var i=Y.getRoot();return n===i?!1:(n=Y.getParent(n,function(n){return n.parentNode===i||!!_(n,e,t,!0)}),_(n,e,t))}var o;return n?i(n):(n=J.getNode(),i(n)?it:(o=J.getStart(),o!=n&&i(o)?it:nt))}function x(e,t){var n,i=[],o={};return n=J.getStart(),Y.getParent(n,function(n){var r,a;for(r=0;r<e.length;r++)a=e[r],!o[a]&&_(n,a,t)&&(o[a]=!0,i.push(a))},Y.getRoot()),i}function $(e){var t,n,i,o,r,a=h(e);if(a)for(t=J.getStart(),n=l(t),o=a.length-1;o>=0;o--){if(r=a[o].selector,!r||a[o].defaultBlock)return it;for(i=n.length-1;i>=0;i--)if(Y.is(n[i],r))return it}return nt}function k(e,t,n){var i;return q||(q={},i={},a.on("NodeChange",function(e){var t=l(e.element),n={};t=o.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),at(q,function(e,o){at(t,function(r){return _(r,o,{},e.similar)?(i[o]||(at(e,function(e){e(!0,{node:r,format:o,parents:t})}),i[o]=e),n[o]=e,!1):void 0})}),at(i,function(o,r){n[r]||(delete i[r],at(o,function(n){n(!1,{node:e.element,format:r,parents:t})}))})})),at(e.split(","),function(e){q[e]||(q[e]=[],q[e].similar=n),q[e].push(t)}),this}function C(e){return r.getCssText(a,e)}function T(e,t){return S(e,t.inline)?it:S(e,t.block)?it:t.selector?1==e.nodeType&&Y.is(e,t.selector):void 0}function S(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function A(e,t){return D(Y.getStyle(e,t),t)}function D(e,t){return("color"==t||"backgroundColor"==t)&&(e=Y.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function P(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function E(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function M(e,t,n){var i=Y.create(t,n);return e.parentNode.insertBefore(i,e),i.appendChild(e),i}function I(t,n,i){function o(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var i,o,r,a,s;if(i=o=e?m:b,a=e?"previousSibling":"nextSibling",s=Y.getRoot(),3==i.nodeType&&!E(i)&&(e?g>0:y<i.nodeValue.length))return i;for(;;){if(!n[0].block_expand&&X(o))return o;for(r=o[a];r;r=r[a])if(!rt(r)&&!E(r)&&!t(r))return o;if(o.parentNode==s){i=o;break}o=o.parentNode}return i}function r(e,t){for(t===U&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function c(e){for(var t=e;t;){if(1===t.nodeType&&ot(t))return"false"===ot(t)?t:e;t=t.parentNode}return e}function d(t,n,o){function r(e,t){var n,r,a=e.nodeValue;return"undefined"==typeof t&&(t=o?a.length:0),o?(n=a.lastIndexOf(" ",t),r=a.lastIndexOf(" ",t),n=n>r?n:r,-1===n||i||n++):(n=a.indexOf(" ",t),r=a.indexOf(" ",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var s,l,c,d;if(3===t.nodeType){if(c=r(t,n),-1!==c)return{container:t,offset:c};d=t}for(s=new e(t,Y.getParent(t,X)||a.getBody());l=s[o?"prev":"next"]();)if(3===l.nodeType){if(d=l,c=r(l),-1!==c)return{container:l,offset:c}}else if(X(l))break;return d?(n=o?0:d.length,{container:d,offset:n}):void 0}function u(e,i){var o,r,a,s;for(3==e.nodeType&&0===e.nodeValue.length&&e[i]&&(e=e[i]),o=l(e),r=0;r<o.length;r++)for(a=0;a<n.length;a++)if(s=n[a],!("collapsed"in s&&s.collapsed!==t.collapsed)&&Y.is(o[r],s.selector))return o[r];return e}function h(e,t){var i,o=Y.getRoot();if(n[0].wrapper||(i=Y.getParent(e,n[0].block,o)),i||(i=Y.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=o&&s(e)})),i&&n[0].wrapper&&(i=l(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[t]&&!X(i[t])&&(i=i[t],!S(i,"br")););return i||e}var p,f,v,m=t.startContainer,g=t.startOffset,b=t.endContainer,y=t.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&(p=m.childNodes.length-1,m=m.childNodes[g>p?p:g],3==m.nodeType&&(g=0)),1==b.nodeType&&b.hasChildNodes()&&(p=b.childNodes.length-1,b=b.childNodes[y>p?p:y-1],3==b.nodeType&&(y=b.nodeValue.length)),m=c(m),b=c(b),(rt(m.parentNode)||rt(m))&&(m=rt(m)?m:m.parentNode,m=m.nextSibling||m,3==m.nodeType&&(g=0)),(rt(b.parentNode)||rt(b))&&(b=rt(b)?b:b.parentNode,b=b.previousSibling||b,3==b.nodeType&&(y=b.length)),n[0].inline&&(t.collapsed&&(v=d(m,g,!0),v&&(m=v.container,g=v.offset),v=d(b,y),v&&(b=v.container,y=v.offset)),f=r(b,y),f.node)){for(;f.node&&0===f.offset&&f.node.previousSibling;)f=r(f.node.previousSibling);f.node&&f.offset>0&&3===f.node.nodeType&&" "===f.node.nodeValue.charAt(f.offset-1)&&f.offset>1&&(b=f.node,b.splitText(f.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==m.nodeType&&0!==g||(m=o(!0)),n[0].inline&&3==b.nodeType&&y!==b.nodeValue.length||(b=o())),n[0].selector&&n[0].expand!==nt&&!n[0].inline&&(m=u(m,"previousSibling"),b=u(b,"nextSibling")),(n[0].block||n[0].selector)&&(m=h(m,"previousSibling"),b=h(b,"nextSibling"),n[0].block&&(X(m)||(m=o(!0)),X(b)||(b=o()))),1==m.nodeType&&(g=Q(m),m=m.parentNode),1==b.nodeType&&(y=Q(b)+1,b=b.parentNode),{startContainer:m,startOffset:g,endContainer:b,endOffset:y}}function N(e,t){return t.links&&"A"==e.tagName}function F(e,t,n,i){var o,r,a;if(!T(n,e)&&!N(n,e))return nt;if("all"!=e.remove)for(at(e.styles,function(o,r){o=D(P(o,t),r),"number"==typeof r&&(r=o,i=0),(e.remove_similar||!i||S(A(i,r),o))&&Y.setStyle(n,r,""),a=1}),a&&""===Y.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),at(e.attributes,function(e,o){var r;if(e=P(e,t),"number"==typeof o&&(o=e,i=0),!i||S(Y.getAttrib(i,o),e)){if("class"==o&&(e=Y.getAttrib(n,o),e&&(r="",at(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(r+=(r?" ":"")+e)}),r)))return void Y.setAttrib(n,o,r);"class"==o&&n.removeAttribute("className"),tt.test(o)&&n.removeAttribute("data-mce-"+o),n.removeAttribute(o)}}),at(e.classes,function(e){e=P(e,t),(!i||Y.hasClass(i,e))&&Y.removeClass(n,e)}),r=Y.getAttribs(n),o=0;o<r.length;o++)if(0!==r[o].nodeName.indexOf("_"))return nt;return"none"!=e.remove?(L(n,e),it):void 0}function L(e,t){function n(e,t,n){return e=j(e,t,n),!e||"BR"==e.nodeName||X(e)}var i,o=e.parentNode;t.block&&(Z?o==Y.getRoot()&&(t.list_block&&S(e,t.list_block)||at(st(e.childNodes),function(e){K(Z,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=M(e,Z),Y.setAttribs(i,a.settings.forced_root_block_attrs)):i=0})):X(e)&&!X(o)&&(n(e,nt)||n(e.firstChild,it,1)||e.insertBefore(Y.create("br"),e.firstChild),n(e,it)||n(e.lastChild,nt,1)||e.appendChild(Y.create("br")))),t.selector&&t.inline&&!S(t.inline,e)||Y.remove(e,1)}function j(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!E(e))return e}function O(e,t){function n(e,t){for(o=e;o;o=o[t]){if(3==o.nodeType&&0!==o.nodeValue.length)return e;if(1==o.nodeType&&!rt(o))return o}return e}var o,r,a=new i(Y);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(o=e.nextSibling;o&&o!=t;)r=o,o=o.nextSibling,e.appendChild(r);return Y.remove(t),at(st(t.childNodes),function(t){e.appendChild(t)}),e}return t}function R(t,n){var i,o,r;return i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1==i.nodeType&&(r=i.childNodes.length-1,!n&&o&&o--,i=i.childNodes[o>r?r:o]),3===i.nodeType&&n&&o>=i.nodeValue.length&&(i=new e(i,a.getBody()).next()||i),3!==i.nodeType||n||0!==o||(i=new e(i,a.getBody()).prev()||i),i}function H(t,n,i,o){function r(e){var t=Y.create("span",{id:m,"data-mce-bogus":!0,style:y?"color:red":""});return e&&t.appendChild(a.getDoc().createTextNode(et)),t}function l(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==et||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function c(e){for(;e;){if(e.id===m)return e;e=e.parentNode}}function d(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function u(e,t){var n,i;if(e)i=J.getRng(!0),l(e)?(t!==!1&&(i.setStartBefore(e),i.setEndBefore(e)),Y.remove(e)):(n=d(e),n.nodeValue.charAt(0)===et&&(n.deleteData(0,1),i.startContainer==n&&i.startOffset>0&&i.setStart(n,i.startOffset-1),i.endContainer==n&&i.endOffset>0&&i.setEnd(n,i.endOffset-1)),Y.remove(e,1)),J.setRng(i);else if(e=c(J.getStart()),!e)for(;e=Y.get(m);)u(e,!1)}function p(){var e,t,o,a,s,l,u;e=J.getRng(!0),a=e.startOffset,l=e.startContainer,u=l.nodeValue,t=c(J.getStart()),t&&(o=d(t)),u&&a>0&&a<u.length&&/\w/.test(u.charAt(a))&&/\w/.test(u.charAt(a-1))?(s=J.getBookmark(),e.collapse(!0),e=I(e,h(n)),e=G.split(e),g(n,i,e),J.moveToBookmark(s)):(t&&o.nodeValue===et?g(n,i,t):(t=r(!0),o=t.firstChild,e.insertNode(t),a=1,g(n,i,t)),J.setCursorLocation(o,a))}function f(){var e,t,a,l,c,d,u,p,f=J.getRng(!0),v=[];for(e=f.startContainer,t=f.startOffset,c=e,3==e.nodeType&&(t!=e.nodeValue.length&&(l=!0),c=c.parentNode);c;){if(_(c,n,i,o)){d=c;break}c.nextSibling&&(l=!0),v.push(c),c=c.parentNode}if(d)if(l)a=J.getBookmark(),f.collapse(!0),f=I(f,h(n),!0),f=G.split(f),b(n,i,f),J.moveToBookmark(a);else{for(p=r(),c=p,u=v.length-1;u>=0;u--)c.appendChild(Y.clone(v[u],!1)),c=c.firstChild;c.appendChild(Y.doc.createTextNode(et)),c=c.firstChild;var m=Y.getParent(d,s);m&&Y.isEmpty(m)?d.parentNode.replaceChild(p,d):Y.insertAfter(p,d),J.setCursorLocation(c,1),Y.isEmpty(d)&&Y.remove(d)}}function v(){var e;e=c(J.getStart()),e&&!Y.isEmpty(e)&&lt(e,function(e){1!=e.nodeType||e.id===m||Y.isEmpty(e)||Y.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var m="_mce_caret",y=a.settings.caret_debug;a._hasCaretEvents||(V=function(){var e,t=[];if(l(c(J.getStart()),t))for(e=t.length;e--;)Y.setAttrib(t[e],"data-mce-bogus","1")},z=function(e){var t=e.keyCode;u(),(8==t||37==t||39==t)&&u(c(J.getStart())),v()},a.on("SetContent",function(e){e.selection&&v()}),a._hasCaretEvents=!0),"apply"==t?p():f()}function B(t){var n,i,o,r,a,s=t.startContainer,l=t.startOffset;if(3==s.nodeType&&l>=s.nodeValue.length&&(l=Q(s),s=s.parentNode,n=!0),1==s.nodeType)for(r=s.childNodes,s=r[Math.min(l,r.length-1)],i=new e(s,Y.getParent(s,Y.isBlock)),(l>r.length-1||n)&&i.next(),o=i.current();o;o=i.next())if(3==o.nodeType&&!E(o))return a=Y.create("a",{"data-mce-bogus":"all"},et),o.parentNode.insertBefore(a,o),t.setStart(o,0),J.setRng(t),void Y.remove(a)}var q,U,z,V,W={},Y=a.dom,J=a.selection,G=new t(Y),K=a.schema.isValidChild,X=Y.isBlock,Z=a.settings.forced_root_block,Q=Y.nodeIndex,et="﻿",tt=/^(src|href|style)$/,nt=!1,it=!0,ot=Y.getContentEditable,rt=n.isBookmarkNode,at=o.each,st=o.grep,lt=o.walk,ct=o.extend;ct(this,{get:h,register:p,unregister:f,apply:g,remove:b,toggle:y,match:w,matchAll:x,matchNode:_,canApply:$,formatChanged:k,getCssText:C}),d(),u(),a.on("BeforeGetContent",function(e){V&&"raw"!=e.format&&V()}),a.on("mouseup keydown",function(e){z&&z(e)})}}),i(j,[d,c,k],function(e,t,n){var i,o=t.trim;return i=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function r(){var e,r,a,s,l,c=t.getContent({format:"raw",no_events:1}),d=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=t.schema;for(c=c.replace(i,""),l=u.getShortEndedElements();s=d.exec(c);)r=d.lastIndex,a=s[0].length,e=l[s[1]]?r:n.findEndTag(u,c,r),c=c.substring(0,r-a)+c.substring(e),d.lastIndex=r-a;return o(c)}function a(e){c.typing=!1,c.add({},e)}var s,l,c=this,d=0,u=[],h=0;return t.on("init",function(){c.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&c.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&a(e)}),t.on("ObjectResizeStart",function(){c.beforeChange()}),t.on("SaveContent ObjectResized blur",a),t.on("DragEnd",a),t.on("KeyUp",function(n){var i=n.keyCode;(i>=33&&36>=i||i>=37&&40>=i||45==i||13==i||n.ctrlKey)&&(a(),t.nodeChanged()),(46==i||8==i||e.mac&&(91==i||93==i))&&t.nodeChanged(),l&&c.typing&&(t.isDirty()||(t.isNotDirty=!u[0]||r()==u[0].content,t.isNotDirty||t.fire("change",{level:u[0],lastLevel:null})),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void(c.typing&&a(e)):void((16>t||t>20)&&224!=t&&91!=t&&!c.typing&&(c.beforeChange(),c.typing=!0,c.add({},e),l=!0))}),t.on("MouseDown",function(e){c.typing&&a(e)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()}),c={data:u,typing:!1,beforeChange:function(){h||(s=t.selection.getBookmark(2,!0))},add:function(e,n){var i,o,a=t.settings;if(e=e||{},e.content=r(),h||t.removed)return null;if(o=u[d],t.fire("BeforeAddUndo",{level:e,lastLevel:o,originalEvent:n}).isDefaultPrevented())return null;if(o&&o.content==e.content)return null;if(u[d]&&(u[d].beforeBookmark=s),a.custom_undo_redo_levels&&u.length>a.custom_undo_redo_levels){for(i=0;i<u.length-1;i++)u[i]=u[i+1];u.length--,d=u.length}e.bookmark=t.selection.getBookmark(2,!0),d<u.length-1&&(u.length=d+1),u.push(e),d=u.length-1;var l={level:e,lastLevel:o,originalEvent:n};return t.fire("AddUndo",l),d>0&&(t.isNotDirty=!1,t.fire("change",l)),e},undo:function(){var e;return c.typing&&(c.add(),c.typing=!1),d>0&&(e=u[--d],0===d&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return d<u.length-1&&(e=u[++d],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){u=[],d=0,c.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return d>0||c.typing&&u[0]&&r()!=u[0].content},hasRedo:function(){return d<u.length-1&&!this.typing},transact:function(e){c.beforeChange();try{h++,e()}finally{h--}c.add()}}}}),i(O,[p,_,d],function(e,t,n){var i=n.ie&&n.ie<11;return function(o){function r(r){function h(e){return e&&a.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==a.getContentEditable(e)}function p(e){var t;a.isBlock(e)&&(t=s.getRng(),e.appendChild(a.create("span",null," ")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function f(e){var t,n=e,i=[];if(n){for(;n=n.firstChild;){if(a.isBlock(n))return;1!=n.nodeType||u[n.nodeName.toLowerCase()]||i.push(n)}for(t=i.length;t--;)n=i[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?a.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&a.remove(n)}}function v(t){function i(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var o,r,l,c,d=t;if(t){if(n.ie&&n.ie<9&&P&&P.firstChild&&P.firstChild==P.lastChild&&"BR"==P.firstChild.tagName&&a.remove(P.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var h=i(t.firstChild);h&&/^(UL|OL|DL)$/.test(h.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(l=a.createRng(),n.ie||t.normalize(),t.hasChildNodes()){for(o=new e(t,t);r=o.current();){if(3==r.nodeType){l.setStart(r,0),l.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){l.setStartBefore(r),l.setEndBefore(r);break}d=r,r=o.next()}r||(l.setStart(d,0),l.setEnd(d,0))}else"BR"==t.nodeName?t.nextSibling&&a.isBlock(t.nextSibling)?((!E||9>E)&&(c=a.create("br"),t.parentNode.insertBefore(c,t)),l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));s.setRng(l),a.remove(c),s.scrollIntoView(t)}}function m(e){var t=l.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&a.setAttribs(e,l.forced_root_block_attrs)}function g(e){var t,n,o,r=A,s=d.getTextInlineElements();if(e||"TABLE"==L?(t=a.create(e||O),m(t)):t=P.cloneNode(!1),o=t,l.keep_styles!==!1)do if(s[r.nodeName]){if("_mce_caret"==r.id)continue;n=r.cloneNode(!1),a.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(o=n,t.appendChild(n))}while(r=r.parentNode);return i||(o.innerHTML='<br data-mce-bogus="1">'),t}function b(t){var n,i,o;if(3==A.nodeType&&(t?D>0:D<A.nodeValue.length))return!1;if(A.parentNode==P&&R&&!t)return!0;if(t&&1==A.nodeType&&A==P.firstChild)return!0;if("TABLE"===A.nodeName||A.previousSibling&&"TABLE"==A.previousSibling.nodeName)return R&&!t||!R&&t;for(n=new e(A,P),3==A.nodeType&&(t&&0===D?n.prev():t||D!=A.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(o=i.nodeName.toLowerCase(),u[o]&&"br"!==o))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;t?n.prev():n.next()}return!0}function y(e,t){var n,i,r,s,l,c,u=O||"P";if(i=a.getParent(e,a.isBlock),c=o.getBody().nodeName.toLowerCase(),!i||!h(i)){if(i=i||S,!i.hasChildNodes())return n=a.create(u),m(n),i.appendChild(n),C.setStart(n,0),C.setEnd(n,0),n;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!a.isBlock(s);)r=s,s=s.previousSibling;if(r&&d.isValidChild(c,u.toLowerCase())){for(n=a.create(u),m(n),r.parentNode.insertBefore(n,r),s=r;s&&!a.isBlock(s);)l=s.nextSibling,n.appendChild(s),s=l;C.setStart(e,t),C.setEnd(e,t)}}return e}function _(){function e(e){for(var t=F[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===P}function t(){var e=F.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:F}var n=F.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(O="LI"),I=O?g(O):a.create("BR"),e(!0)&&e()?"LI"==n?a.insertAfter(I,t()):a.replace(I,F):e(!0)?"LI"==n?(a.insertAfter(I,t()),I.appendChild(a.doc.createTextNode(" ")),I.appendChild(F)):F.parentNode.insertBefore(I,F):e()?(a.insertAfter(I,t()),p(I)):(F=t(),T=C.cloneRange(),T.setStartAfter(P),T.setEndAfter(F),N=T.extractContents(),"LI"==O&&"LI"==N.firstChild.nodeName?(I=N.firstChild,a.insertAfter(N,F)):(a.insertAfter(N,F),a.insertAfter(I,F))),a.remove(P),v(I),c.add()}function w(){o.execCommand("InsertLineBreak",!1,r)}function x(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function $(e){var t,n,i=a.getRoot();for(t=e;t!==i&&"false"!==a.getContentEditable(t);)"true"===a.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==i?n:i}function k(e){var t;i||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(a.getStyle(t,"float",!0)))&&a.add(e,"br"))}var C,T,S,A,D,P,E,M,I,N,F,L,j,O,R;if(C=s.getRng(!0),!r.isDefaultPrevented()){if(!C.collapsed)return void o.execCommand("Delete");if(new t(a).normalize(C),A=C.startContainer,D=C.startOffset,O=(l.force_p_newlines?"p":"")||l.forced_root_block,O=O?O.toUpperCase():"",E=a.doc.documentMode,M=r.shiftKey,1==A.nodeType&&A.hasChildNodes()&&(R=D>A.childNodes.length-1,A=A.childNodes[Math.min(D,A.childNodes.length-1)]||A,D=R&&3==A.nodeType?A.nodeValue.length:0),S=$(A)){if(c.beforeChange(),!a.isBlock(S)&&S!=a.getRoot())return void((!O||M)&&w());if((O&&!M||!O&&M)&&(A=y(A,D)),P=a.getParent(A,a.isBlock),F=P?a.getParent(P.parentNode,a.isBlock):null,L=P?P.nodeName.toUpperCase():"",j=F?F.nodeName.toUpperCase():"","LI"!=j||r.ctrlKey||(P=F,L=j),/^(LI|DT|DD)$/.test(L)){if(!O&&M)return void w();if(a.isEmpty(P))return void _()}if("PRE"==L&&l.br_in_pre!==!1){if(!M)return void w()}else if(!O&&!M&&"LI"!=L||O&&M)return void w();O&&P===o.getBody()||(O=O||"P",b()?(I=/^(H[1-6]|PRE|FIGURE)$/.test(L)&&"HGROUP"!=j?g(O):g(),l.end_container_on_empty_block&&h(F)&&a.isEmpty(P)?I=a.split(F,P):a.insertAfter(I,P),v(I)):b(!0)?(I=P.parentNode.insertBefore(g(),P),p(I),v(P)):(T=C.cloneRange(),T.setEndAfter(P),N=T.extractContents(),x(N),I=N.firstChild,a.insertAfter(N,P),f(I),k(P),v(I)),a.setAttrib(I,"id",""),o.fire("NewBlock",{newBlock:I}),c.add())}}}var a=o.dom,s=o.selection,l=o.settings,c=o.undoManager,d=o.schema,u=d.getNonEmptyElements();o.on("keydown",function(e){13==e.keyCode&&r(e)!==!1&&e.preventDefault()})}}),i(R,[],function(){return function(e){function t(){var t,s,l,c,d,u,h,p,f,v,m,g,b=o.getStart(),y=e.getBody(),_=-16777215;if(g=n.forced_root_block,b&&1===b.nodeType&&g){for(;b&&b!=y;){if(a[b.nodeName])return;b=b.parentNode}if(t=o.getRng(),t.setStart){s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset;try{f=e.getDoc().activeElement===y}catch(w){}}else t.item&&(b=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(b)),f=t.parentElement().ownerDocument===e.getDoc(),v=t.duplicate(),v.collapse(!0),l=-1*v.move("character",_),v.collapsed||(v=t.duplicate(),v.collapse(!1),d=-1*v.move("character",_)-l);for(b=y.firstChild,m=y.nodeName.toLowerCase();b;)if((3===b.nodeType||1==b.nodeType&&!a[b.nodeName])&&r.isValidChild(m,g.toLowerCase())){if(3===b.nodeType&&0===b.nodeValue.length){h=b,b=b.nextSibling,i.remove(h);continue}u||(u=i.create(g,e.settings.forced_root_block_attrs),b.parentNode.insertBefore(u,b),p=!0),h=b,b=b.nextSibling,u.appendChild(h)}else u=null,b=b.nextSibling;if(p&&f){if(t.setStart)t.setStart(s,l),t.setEnd(c,d),o.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(y),t.collapse(!0),t.moveStart("character",l),d>0&&t.moveEnd("character",d),t.select()}catch(w){}e.nodeChanged()}}}var n=e.settings,i=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),i(H,[S,d,c,N,_,p],function(e,n,i,o,r,a){var s=i.each,l=i.extend,c=i.map,d=i.inArray,u=i.explode,h=n.gecko,p=n.ie,f=n.ie&&n.ie<11,v=!0,m=!1;return function(i){function g(e,t,n){var i;return e=e.toLowerCase(),(i=D.exec[e])?(i(e,t,n),v):m}function b(e){var t;return e=e.toLowerCase(),(t=D.state[e])?t(e):-1}function y(e){var t;return e=e.toLowerCase(),(t=D.value[e])?t(e):m}function _(e,t){t=t||"exec",s(e,function(e,n){s(n.toLowerCase().split(","),function(n){D[t][n]=e})})}function w(e,n,o){return n===t&&(n=m),o===t&&(o=null),i.getDoc().execCommand(e,n,o)}function x(e){return E.match(e)}function $(e,n){E.toggle(e,n?{value:n}:t),i.nodeChanged()}function k(e){T=A.getBookmark(e)}function C(){A.moveToBookmark(T)}var T,S=i.dom,A=i.selection,D={state:{},exec:{},value:{}},P=i.settings,E=i.formatter;l(this,{execCommand:g,queryCommandState:b,queryCommandValue:y,addCommands:_}),_({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},"Cut,Copy,Paste":function(e){var t,o=i.getDoc();try{w(e)}catch(r){t=v}if(t||!o.queryCommandSupported(e)){var a=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(a=a.replace(/Ctrl\+/g,"⌘+")),i.windowManager.alert(a)}},unlink:function(){if(A.isCollapsed()){var e=A.getNode();return void("A"==e.tagName&&i.dom.remove(e,!0))}E.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),s("left,center,right,justify".split(","),function(e){t!=e&&E.remove("align"+e)}),$("align"+t),g("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;w(e),t=S.getParent(A.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(k(),S.split(n,t),C()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){$(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){$(e,n)},FontSize:function(e,t,n){var i,o;n>=1&&7>=n&&(o=u(P.font_size_style_values),i=u(P.font_size_classes),n=i?i[n-1]||n:o[n-1]||n),$(e,n)},RemoveFormat:function(e){E.remove(e)},mceBlockQuote:function(){$("blockquote")},FormatBlock:function(e,t,n){return $(n||"p")},mceCleanup:function(){var e=A.getBookmark();i.setContent(i.getContent({cleanup:v}),{cleanup:v}),A.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var o=n||A.getNode();o!=i.getBody()&&(k(),i.dom.remove(o,v),C())},mceSelectNodeDepth:function(e,t,n){var o=0;S.getParent(A.getNode(),function(e){return 1==e.nodeType&&o++==n?(A.select(e),m):void 0},i.getBody())},mceSelectNode:function(e,t,n){A.select(n)},mceInsertContent:function(t,n,r){function a(e){function t(e){return i[e]&&3==i[e].nodeType}var n,i,o;return n=A.getRng(!0),i=n.startContainer,o=n.startOffset,3==i.nodeType&&(o>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),o<i.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function l(e){if(x)for(y=e.firstChild;y;y=y.walk(!0))$[y.name]&&y.attr("data-mce-new","true")}function c(){if(x){var e=i.getBody(),t=new o(S);s(S.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var i=n.parentNode;i&&i!=e;i=i.parentNode)t.compare(i,n)&&S.remove(n,!0)})}}var d,u,h,f,v,m,g,b,y,_,w,x,$=i.schema.getTextInlineElements();"string"!=typeof r&&(x=r.merge,r=r.content),/^ | $/.test(r)&&(r=a(r)),d=i.parser,u=new e({},i.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',m={content:r,format:"html",selection:!0},i.fire("BeforeSetContent",m),r=m.content,-1==r.indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,w),b=A.getRng();var k=b.startContainer||(b.parentElement?b.parentElement():null),C=i.getBody();k===C&&A.isCollapsed()&&S.isBlock(C.firstChild)&&S.isEmpty(C.firstChild)&&(b=S.createRng(),b.setStart(C.firstChild,0),b.setEnd(C.firstChild,0),A.setRng(b)),A.isCollapsed()||i.getDoc().execCommand("Delete",!1,null),h=A.getNode();var T={context:h.nodeName.toLowerCase()};if(v=d.parse(r,T),l(v),y=v.lastChild,"mce_marker"==y.attr("id"))for(g=y,y=y.prev;y;y=y.walk(!0))if(3==y.type||!S.isBlock(y.name)){i.schema.isValidChild(y.parent.name,"span")&&y.parent.insert(g,y,"br"===y.name);break}if(T.invalid){for(A.setContent(w),h=A.getNode(),f=i.getBody(),9==h.nodeType?h=y=f:y=h;y!==f;)h=y,y=y.parentNode;r=h==f?f.innerHTML:S.getOuterHTML(h),r=u.serialize(d.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return u.serialize(v)}))),h==f?S.setHTML(f,r):S.setOuterHTML(h,r)}else r=u.serialize(v),y=h.firstChild,_=h.lastChild,!y||y===_&&"BR"===y.nodeName?S.setHTML(h,r):A.setContent(r);c(),g=S.get("mce_marker"),A.scrollIntoView(g),b=S.createRng(),y=g.previousSibling,y&&3==y.nodeType?(b.setStart(y,y.nodeValue.length),p||(_=g.nextSibling,_&&3==_.nodeType&&(y.appendData(_.data),_.parentNode.removeChild(_)))):(b.setStartBefore(g),b.setEndBefore(g)),S.remove(g),A.setRng(b),i.fire("SetContent",m),i.addVisual()},mceInsertRawHTML:function(e,t,n){A.setContent("tiny_mce_marker"),i.setContent(i.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){$(n)},mceSetContent:function(e,t,n){i.setContent(n)},"Indent,Outdent":function(e){var t,n,o;t=P.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),b("InsertUnorderedList")||b("InsertOrderedList")?w(e):(P.forced_root_block||S.getParent(A.getNode(),S.isBlock)||E.apply("div"),s(A.getSelectedBlocks(),function(r){if("LI"!=r.nodeName){var a=i.getParam("indent_use_margin",!1)?"margin":"padding";
a+="rtl"==S.getStyle(r,"direction",!0)?"Right":"Left","outdent"==e?(o=Math.max(0,parseInt(r.style[a]||0,10)-t),S.setStyle(r,a,o?o+n:"")):(o=parseInt(r.style[a]||0,10)+t+n,S.setStyle(r,a,o))}}))},mceRepaint:function(){if(h)try{k(v),A.getSel()&&A.getSel().selectAllChildren(i.getBody()),A.collapse(v),C()}catch(e){}},InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual,i.addVisual()},mceReplaceContent:function(e,t,n){i.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,A.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;"string"==typeof n&&(n={href:n}),i=S.getParent(A.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||E.remove("link"),n.href&&E.apply("link",n,i)},selectAll:function(){var e,t=S.getRoot();A.getRng().setStart?(e=S.createRng(),e.setStart(t,0),e.setEnd(t,t.childNodes.length),A.setRng(e)):(e=A.getRng(),e.item||(e.moveToElementText(t),e.select()))},"delete":function(){w("Delete");var e=i.getBody();S.isEmpty(e)&&(i.setContent(""),e.firstChild&&S.isBlock(e.firstChild)?i.selection.setCursorLocation(e.firstChild,0):i.selection.setCursorLocation(e,0))},mceNewDocument:function(){i.setContent("")},InsertLineBreak:function(e,t,n){function o(){for(var e,t=new a(p,g),n=i.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0}var s,l,c,d=n,u=A.getRng(!0);new r(S).normalize(u);var h=u.startOffset,p=u.startContainer;if(1==p.nodeType&&p.hasChildNodes()){var m=h>p.childNodes.length-1;p=p.childNodes[Math.min(h,p.childNodes.length-1)]||p,h=m&&3==p.nodeType?p.nodeValue.length:0}var g=S.getParent(p,S.isBlock),b=g?g.nodeName.toUpperCase():"",y=g?S.getParent(g.parentNode,S.isBlock):null,_=y?y.nodeName.toUpperCase():"",w=d&&d.ctrlKey;"LI"!=_||w||(g=y,b=_),p&&3==p.nodeType&&h>=p.nodeValue.length&&(f||o()||(s=S.create("br"),u.insertNode(s),u.setStartAfter(s),u.setEndAfter(s),l=!0)),s=S.create("br"),u.insertNode(s);var x=S.doc.documentMode;return f&&"PRE"==b&&(!x||8>x)&&s.parentNode.insertBefore(S.doc.createTextNode("\r"),s),c=S.create("span",{},"&nbsp;"),s.parentNode.insertBefore(c,s),A.scrollIntoView(c),S.remove(c),l?(u.setStartBefore(s),u.setEndBefore(s)):(u.setStartAfter(s),u.setEndAfter(s)),A.setRng(u),i.undoManager.add(),v}}),_({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=A.isCollapsed()?[S.getParent(A.getNode(),S.isBlock)]:A.getSelectedBlocks(),i=c(n,function(e){return!!E.matchNode(e,t)});return-1!==d(i,v)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return x(e)},mceBlockQuote:function(){return x("blockquote")},Outdent:function(){var e;if(P.inline_styles){if((e=S.getParent(A.getStart(),S.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v;if((e=S.getParent(A.getEnd(),S.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v}return b("InsertUnorderedList")||b("InsertOrderedList")||!P.inline_styles&&!!S.getParent(A.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=S.getParent(A.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),_({"FontSize,FontName":function(e){var t,n=0;return(t=S.getParent(A.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),_({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}})}}),i(B,[c],function(e){function t(e,r){var a,s,l=this;if(e=i(e),r=l.settings=r||{},a=r.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(l.source=e);var c=0===e.indexOf("//");0!==e.indexOf("/")||c||(e=(a?a.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(s=r.base_uri?r.base_uri.path:new t(location.href).directory,""===r.base_uri.protocol?e="//mce_host"+l.toAbsPath(s,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(a&&a.protocol||"http")+"://mce_host"+l.toAbsPath(s,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(o,function(t,n){var i=e[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),l[t]=i}),a&&(l.protocol||(l.protocol=a.protocol),l.userInfo||(l.userInfo=a.userInfo),l.port||"mce_host"!==l.host||(l.port=a.port),l.host&&"mce_host"!==l.host||(l.host=a.host),l.source=""),c&&(l.protocol="")}var n=e.each,i=e.trim,o="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),r={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n,i=this;if("./"===e)return e;if(e=new t(e,{base_uri:i}),"mce_host"!=e.host&&i.host!=e.host&&e.host||i.port!=e.port||i.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var o=i.getURI(),r=e.getURI();return o==r||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==r?o:(n=i.toRelPath(i.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=r[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,o,r=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;o>i;i++)if(i>=n.length||e[i]!=n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;o>i;i++)if(i>=e.length||e[i]!=n[i]){r=i+1;break}if(1===r)return t;for(i=0,o=e.length-(r-1);o>i;i++)a+="../";for(i=r-1,o=n.length;o>i;i++)a+=i!=r-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,t){var i,o,r,a=0,s=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,i=t.length-1,s=[];i>=0;i--)0!==t[i].length&&"."!==t[i]&&(".."!==t[i]?a>0?a--:s.push(t[i]):a++);return i=e.length-a,r=0>=i?s.reverse().join("/"):e.slice(0,i).join("/")+"/"+s.reverse().join("/"),0!==r.indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),i(q,[c],function(e){function t(){}var n,i,o=e.each,r=e.extend;return t.extend=n=function(e){function t(){var e,t,n,o=this;if(!i&&(o.init&&o.init.apply(o,arguments),t=o.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(o,arguments)}function a(){return this}function s(e,t){return function(){var n,i=this,o=i._super;return i._super=h[e],n=t.apply(i,arguments),i._super=o,n}}var l,c,d,u=this,h=u.prototype;i=!0,l=new u,i=!1,e.Mixins&&(o(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),h.Mixins&&(e.Mixins=h.Mixins.concat(e.Mixins))),e.Methods&&o(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&o(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,i=this;return e!==t?(i[n]=e,i):i[n]}}),e.Statics&&o(e.Statics,function(e,n){t[n]=e}),e.Defaults&&h.Defaults&&(e.Defaults=r({},h.Defaults,e.Defaults));for(c in e)d=e[c],l[c]="function"==typeof d&&h[c]?s(c,d):d;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),i(U,[c],function(e){function t(e){function t(){return!1}function n(){return!0}function i(i,o){var a,s,c,d;if(i=i.toLowerCase(),o=o||{},o.type=i,o.target||(o.target=l),o.preventDefault||(o.preventDefault=function(){o.isDefaultPrevented=n},o.stopPropagation=function(){o.isPropagationStopped=n},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=n},o.isDefaultPrevented=t,o.isPropagationStopped=t,o.isImmediatePropagationStopped=t),e.beforeFire&&e.beforeFire(o),a=u[i])for(s=0,c=a.length;c>s;s++){if(a[s]=d=a[s],d.once&&r(i,d),o.isImmediatePropagationStopped())return o.stopPropagation(),o;if(d.call(l,o)===!1)return o.preventDefault(),o}return o}function o(e,n,i){var o,r,a;if(n===!1&&(n=t),n)for(r=e.toLowerCase().split(" "),a=r.length;a--;)e=r[a],o=u[e],o||(o=u[e]=[],c(e,!0)),i?o.unshift(n):o.push(n);return d}function r(e,t){var n,i,o,r,a;if(e)for(r=e.toLowerCase().split(" "),n=r.length;n--;){if(e=r[n],i=u[e],!e){for(o in u)c(o,!1),delete u[o];return d}if(i){if(t)for(a=i.length;a--;)i[a]===t&&(i=i.slice(0,a).concat(i.slice(a+1)),u[e]=i);else i.length=0;i.length||(c(e,!1),delete u[e])}}else{for(e in u)c(e,!1);u={}}return d}function a(e,t,n){return t.once=!0,o(e,t,n)}function s(e){return e=e.toLowerCase(),!(!u[e]||0===u[e].length)}var l,c,d=this,u={};e=e||{},l=e.scope||d,c=e.toggleEvent||t,d.fire=i,d.on=o,d.off=r,d.once=a,d.has=s}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),i(z,[q],function(e){function t(e){for(var t,n=[],i=e.length;i--;)t=e[i],t.__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}var n,i=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,o=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,a=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function n(e){return e?function(t){return t._name===e}:void 0}function a(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function s(e,t,n){return e?function(i){var o=i[e]?i[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!=n:"^="===t?0===o.indexOf(n):"$="===t?o.substr(o.length-n.length)===n:!1:!!n}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=d(e[1],[]),function(e){return!u(e,t)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2===0:"odd"===e?n%2===1:t[e]?t[e]():!1})):void 0}function c(e,o,c){function d(e){e&&o.push(e)}var u;return u=i.exec(e.replace(r,"")),d(t(u[1])),d(n(u[2])),d(a(u[3])),d(s(u[4],u[5],u[6])),d(l(u[7])),o.psuedo=!!u[7],o.direct=c,o}function d(e,t){var n,i,r,a=[];do if(o.exec(""),i=o.exec(e),i&&(e=i[3],a.push(i[1]),i[2])){n=i[3];break}while(i);for(n&&d(n,t),e=[],r=0;r<a.length;r++)">"!=a[r]&&e.push(c(a[r],[],">"===a[r-1]));return t.push(e),t}var u=this.match;this._selectors=d(e,[])},match:function(e,t){var n,i,o,r,a,s,l,c,d,u,h,p,f;for(t=t||this._selectors,n=0,i=t.length;i>n;n++){for(a=t[n],r=a.length,f=e,p=0,o=r-1;o>=0;o--)for(c=a[o];f;){if(c.psuedo)for(h=f.parent().items(),d=u=h.length;d--&&h[d]!==f;);for(s=0,l=c.length;l>s;s++)if(!c[s](f,d,u)){s=l+1;break}if(s===l){p++;break}if(o===r-1)break;f=f.parent()}if(p===r)return!0}return!1},find:function(e){function i(e,t,n){var o,r,a,l,c,d=t[n];for(o=0,r=e.length;r>o;o++){for(c=e[o],a=0,l=d.length;l>a;a++)if(!d[a](c,o,r)){a=l+1;break}if(a===l)n==t.length-1?s.push(c):c.items&&i(c.items(),t,n+1);else if(d.direct)return;c.items&&i(c.items(),t,n)}}var o,r,s=[],l=this._selectors;if(e.items){for(o=0,r=l.length;r>o;o++)i(e.items(),l[o],0);r>1&&(s=t(s))}return n||(n=a.Collection),new n(s)}});return a}),i(V,[c,z,q],function(e,t,n){var i,o,r=Array.prototype.push,a=Array.prototype.slice;return o={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?r.apply(n,t):t instanceof i?n.add(t.toArray()):r.call(n,t),n},set:function(e){var t,n=this,i=n.length;for(n.length=0,n.add(e),t=n.length;i>t;t++)delete n[t];return n},filter:function(e){var n,o,r,a,s=this,l=[];for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,n=0,o=s.length;o>n;n++)r=s[n],a(r)&&l.push(r);return new i(l)},slice:function(){return new i(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var n,i,o=this;return t!==n?(o.each(function(n){n[e]&&n[e](t)}),o):(i=o[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,i=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,i)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){o[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){o[e]=function(t){return this.prop(e,t)}}),i=n.extend(o),t.Collection=i,i}),i(W,[c,g],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,i){return t.DOM.toggleClass(e,n,i)},css:function(e,n,i){return t.DOM.setStyle(e,n,i)},getRuntimeStyle:function(e,n){return t.DOM.getStyle(e,n,!0)},on:function(e,n,i,o){return t.DOM.bind(e,n,i,o)},off:function(e,n,i){return t.DOM.unbind(e,n,i)},fire:function(e,n,i){return t.DOM.fire(e,n,i)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),i(Y,[q,c,U,V,W],function(e,t,n,i,o){function r(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,i){i&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e._rendered&&e.bindPendingEvents())}})),e._eventDispatcher}var a="onmousewheel"in document,s=!1,l="mce-",c=e.extend({Statics:{classPrefix:l},isRtl:function(){return c.rtl},classPrefix:l,init:function(e){var n,i,r=this;if(r.settings=e=t.extend({},r.Defaults,e),r._id=e.id||o.id(),r._text=r._name="",r._width=r._height=0,r._aria={role:e.role},this._elmCache={},n=e.classes)for(n=n.split(" "),n.map={},i=n.length;i--;)n.map[n[i]]=!0;r._classes=n||[],r.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var n,i=e[t];i!==n?r[t](i):r["_"+t]===n&&(r["_"+t]=!1)}),r.on("click",function(){return r.disabled()?!1:void 0}),e.classes&&t.each(e.classes.split(" "),function(e){r.addClass(e)}),r.settings=e,r._borderBox=r.parseBox(e.border),r._paddingBox=r.parseBox(e.padding),r._marginBox=r.parseBox(e.margin),e.hidden&&r.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;return e?"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0}):void 0},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function i(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},initLayoutRect:function(){var e,t,n,i,r,a,s,l,c,d,u=this,h=u.settings,p=u.getEl();e=u._borderBox=u._borderBox||u.measureBox(p,"border"),u._paddingBox=u._paddingBox||u.measureBox(p,"padding"),u._marginBox=u._marginBox||u.measureBox(p,"margin"),d=o.getSize(p),l=h.minWidth,c=h.minHeight,r=l||d.width,a=c||d.height,n=h.width,i=h.height,s=h.autoResize,s="undefined"!=typeof s?s:!n&&!i,n=n||r,i=i||a;var f=e.left+e.right,v=e.top+e.bottom,m=h.maxWidth||65535,g=h.maxHeight||65535;return u._layoutRect=t={x:h.x||0,y:h.y||0,w:n,h:i,deltaW:f,deltaH:v,contentW:n-f,contentH:i-v,innerW:n-f,innerH:i-v,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(r,m),minH:Math.min(a,g),maxW:m,maxH:g,autoResize:s,scrollW:0},u._lastLayoutRect={},t},layoutRect:function(e){var t,n,i,o,r,a,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),e?(i=l.deltaW,o=l.deltaH,e.x!==r&&(l.x=e.x),e.y!==r&&(l.y=e.y),e.minW!==r&&(l.minW=e.minW),e.minH!==r&&(l.minH=e.minH),n=e.w,n!==r&&(n=n<l.minW?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-i),n=e.h,n!==r&&(n=n<l.minH?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-o),n=e.innerW,n!==r&&(n=n<l.minW-i?l.minW-i:n,n=n>l.maxW-i?l.maxW-i:n,l.innerW=n,l.w=n+i),n=e.innerH,n!==r&&(n=n<l.minH-o?l.minH-o:n,n=n>l.maxH-o?l.maxH-o:n,l.innerH=n,l.h=n+o),e.contentW!==r&&(l.contentW=e.contentW),e.contentH!==r&&(l.contentH=e.contentH),t=s._lastLayoutRect,(t.x!==l.x||t.y!==l.y||t.w!==l.w||t.h!==l.h)&&(a=c.repaintControls,a&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),s):l},repaint:function(){var e,t,n,i,o,r,a=this,s=0,l=0;r=document.createRange?function(e){return e}:Math.round,e=a.getEl().style,n=a._layoutRect,o=a._lastRepaintRect||{},i=a._borderBox,s=i.left+i.right,l=i.top+i.bottom,n.x!==o.x&&(e.left=r(n.x)+"px",o.x=n.x),n.y!==o.y&&(e.top=r(n.y)+"px",o.y=n.y),n.w!==o.w&&(e.width=r(n.w-s)+"px",o.w=n.w),n.h!==o.h&&(e.height=r(n.h-l)+"px",o.h=n.h),a._hasBody&&n.innerW!==o.innerW&&(t=a.getEl("body").style,t.width=r(n.innerW)+"px",o.innerW=n.innerW),a._hasBody&&n.innerH!==o.innerH&&(t=t||a.getEl("body").style,t.height=r(n.innerH)+"px",o.innerH=n.innerH),a._lastRepaintRect=o,a.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(o){return t||i.parentsAndSelf().each(function(i){var o=i.settings.callbacks;return o&&(t=o[e])?(n=i,!1):void 0}),t.call(n,o)}}var i=this;return r(i).on(e,n(t)),i},off:function(e,t){return r(this).off(e,t),this},fire:function(e,t,n){var i=this;if(t=t||{},t.control||(t.control=i),t=r(i).fire(e,t),n!==!1&&i.parent)for(var o=i.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return r(this).has(e)},parents:function(e){var t,n=this,o=new i;for(t=n.parent();t;t=t.parent())o.add(t);return e&&(o=o.filter(e)),o},parentsAndSelf:function(e){return new i(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n,i,o=this;return e=this.classPrefix+e,n=o._classes[t||"control"],n||(n=[],n.map={},o._classes[t||"control"]=n),n.map[e]||(n.map[e]=e,n.push(e),o._rendered&&(i=o.getEl(t),i&&(i.className=n.join(" ")))),o},removeClass:function(e,t){var n,i,o,r=this;if(e=this.classPrefix+e,n=r._classes[t||"control"],n&&n.map[e])for(delete n.map[e],i=n.length;i--;)n[i]===e&&n.splice(i,1);return r._rendered&&(o=r.getEl(t),o&&(o.className=n.join(" "))),r},toggleClass:function(e,t,n){var i=this;return t?i.addClass(e,n):i.removeClass(e,n),i},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return o.innerHtml(this.getEl(),e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=o.get(t)),this._elmCache[t]},visible:function(e){var t,n=this;return"undefined"!=typeof e?(n._visible!==e&&(n._rendered&&(n.getEl().style.display=e?"":"none"),n._visible=e,t=n.parent(),t&&(t._lastRect=null),n.fire(e?"show":"hide")),n):n._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n._rendered&&i.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return c.translate?c.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,i=n.getEl(),r=n.parent();if(n.items){var a=n.items().toArray();for(t=a.length;t--;)a[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&o.off(i);var s=n.getRoot().controlIdLookup;return s&&delete s[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n._rendered=!1,n},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(o.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(o.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e,t,n,i,r,a=this,s=a.settings;for(i in s)0===i.indexOf("on")&&a.on(i.substr(2),s[i]);if(a._eventsRoot){for(n=a.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)a._nativeEvents[i]=!0}a.bindPendingEvents(),s.style&&(e=a.getEl(),e&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),a._visible||o.css(a.getEl(),"display","none"),a.settings.border&&(t=a.borderBox(),o.css(a.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=a.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[a._id]=a;for(var c in a._aria)a.aria(c,a._aria[c]);a.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,i,o=e;for(n=i=0;o&&o!=t&&o.nodeType;)n+=o.offsetLeft||0,i+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:i}}var n,i,o,r,a,s,l=this.getEl(),c=l.parentNode,d=t(l,c);return n=d.x,i=d.y,o=l.offsetWidth,r=l.offsetHeight,a=c.clientWidth,s=c.clientHeight,"end"==e?(n-=a-o,i-=s-r):"center"==e&&(n-=a/2-o/2,i-=s/2-r/2),c.scrollLeft=n,c.scrollTop=i,this},bindPendingEvents:function(){function e(e){var t=p.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=d._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),d._lastHoverCtrl=null)}function n(e){var t,n,i,o=p.getParentCtrl(e.target),r=d._lastHoverCtrl,a=0;if(o!==r){if(d._lastHoverCtrl=o,n=o.parents().toArray().reverse(),n.push(o),r){for(i=r.parents().toArray().reverse(),i.push(r),a=0;a<i.length&&n[a]===i[a];a++);for(t=i.length-1;t>=a;t--)r=i[t],r.fire("mouseleave",{target:r.getEl()})}for(t=a;t<n.length;t++)o=n[t],o.fire("mouseenter",{target:o.getEl()})}}function i(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=p.fire("wheel",e)}var r,l,c,d,u,h,p=this;if(p._rendered=!0,u=p._nativeEvents){for(c=p.parents().toArray(),c.unshift(p),r=0,l=c.length;!d&&l>r;r++)d=c[r]._eventsRoot;for(d||(d=c[c.length-1]||p),p._eventsRoot=d,l=r,r=0;l>r;r++)c[r]._eventsRoot=d;var f=d._delegates;f||(f=d._delegates={});for(h in u){if(!u)return!1;"wheel"!==h||s?("mouseenter"===h||"mouseleave"===h?d._hasMouseEnter||(o.on(d.getEl(),"mouseleave",t),o.on(d.getEl(),"mouseover",n),d._hasMouseEnter=1):f[h]||(o.on(d.getEl(),h,e),f[h]=!0),u[h]=!1):a?o.on(p.getEl(),"mousewheel",i):o.on(p.getEl(),"DOMMouseScroll",i)}}},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){return this.repaint(),this}});return c}),i(J,[],function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,i){var o,r,a;if(!e){a=tinymce.ui;for(r in a)t[r.toLowerCase()]=a[r];e=!0}if("string"==typeof n?(i=i||{},i.type=n):(i=n,n=i.type),n=n.toLowerCase(),o=t[n],!o)throw new Error("Could not find control by type: "+n);return o=new o(i),o.type=n,o}}}),i(G,[],function(){return function(e){function t(e){return e=e||b,e&&e.getAttribute("role")}function n(e){for(var n,i=e||b;i=i.parentNode;)if(n=t(i))return n}function i(e){var t=b;return t?t.getAttribute("aria-"+e):void 0}function o(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function r(e){return o(e)&&!e.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(t(e))?!0:!1}function a(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){r(e)&&n.push(e);for(var i=0;i<e.childNodes.length;i++)t(e.childNodes[i])}}var n=[];return t(e||_.getEl()),n}function s(e){var t,n;e=e||y,n=e.parents().toArray(),n.unshift(e);for(var i=0;i<n.length&&(t=n[i],!t.settings.ariaRoot);i++);return t}function l(e){var t=s(e),n=a(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,i=s();t=t||a(i.getEl());for(var o=0;o<t.length;o++)t[o]===b&&(n=o);n+=e,i.lastAriaIndex=c(n,t)}function u(){var e=n();"tablist"==e?d(-1,a(b.parentNode)):y.parent().submenu?m():d(-1)}function h(){var e=t(),o=n();"tablist"==o?d(1,a(b.parentNode)):"menuitem"==e&&"menu"==o&&i("haspopup")?g():d(1)}function p(){d(-1)}function f(){var e=t(),o=n();"menuitem"==e&&"menubar"==o?g():"button"==e&&i("haspopup")?g({key:"down"}):d(1)}function v(e){var t=n();if("tablist"==t){var i=a(y.getEl("body"))[0];i&&i.focus()}else d(e.shiftKey?-1:1)}function m(){y.fire("cancel")}function g(e){e=e||{},y.fire("click",{target:b,aria:e})}var b,y,_=e.root;try{b=document.activeElement}catch(w){b=document.body}return y=_.getParentCtrl(b),_.on("keydown",function(e){function t(e,t){o(b)||t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,u);break;case 39:t(e,h);break;case 38:t(e,p);break;case 40:t(e,f);break;case 27:m();break;case 14:case 13:case 32:t(e,g);break;case 9:v(e)!==!1&&e.preventDefault()}}),_.on("focusin",function(e){b=e.target,y=e.control}),{focusFirst:l}}}),i(K,[Y,V,z,J,G,c,W],function(e,t,n,i,o,r,a){var s={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.isRtl()&&n.addClass("rtl"),n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=i.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=s[e]=s[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,i,o=this;return e&&(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(o):(i=o.find("*"),o.statusbar&&i.add(o.statusbar.items()),i.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),o)},replace:function(e,t){for(var n,i=this.items(),o=i.length;o--;)if(i[o]===e){i[o]=t;break}o>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,o=this,a=[];return r.isArray(t)||(t=[t]),r.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=r.extend({},o.settings.defaults,t),t.type=n.type=n.type||t.type||o.settings.defaultType||(n.defaults?n.defaults.type:null),t=i.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var i,o;t.parent(e),t._rendered||(i=e.getEl("body"),o=a.createFragment(t.renderHtml()),i.hasChildNodes()&&n<=i.childNodes.length-1?i.insertBefore(o,i.childNodes[n]):i.appendChild(o),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var i,o,r,a=this;return e=a.create(e),i=a.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(o=i.slice(0,t).toArray(),r=i.slice(t).toArray(),i.set(o.concat(e,r))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),i=e.value();n&&"undefined"!=typeof i&&(t[n]=i)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t._rendered=!0,t.settings.style&&a.css(t.getEl(),t.settings.style),t.settings.border&&(e=t.borderBox(),a.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new o({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),i(X,[W],function(e){function t(){var e,t,n,i,o,r,a,s,l=document,c=Math.max;return e=l.documentElement,t=l.body,n=c(e.scrollWidth,t.scrollWidth),i=c(e.clientWidth,t.clientWidth),o=c(e.offsetWidth,t.offsetWidth),r=c(e.scrollHeight,t.scrollHeight),a=c(e.clientHeight,t.clientHeight),s=c(e.offsetHeight,t.offsetHeight),{width:o>n?i:n,height:s>r?a:r}}return function(n,i){function o(){return h.getElementById(i.handle||n)}var r,a,s,l,c,d,u,h=document;i=i||{},s=function(n){var s,p,f=t();n.preventDefault(),a=n.button,s=o(),d=n.screenX,u=n.screenY,p=window.getComputedStyle?window.getComputedStyle(s,null).getPropertyValue("cursor"):s.runtimeStyle.cursor,r=h.createElement("div"),e.css(r,{position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:p}),h.body.appendChild(r),e.on(h,"mousemove",c),e.on(h,"mouseup",l),i.start(n)},c=function(e){return e.button!==a?l(e):(e.deltaX=e.screenX-d,e.deltaY=e.screenY-u,e.preventDefault(),void i.drag(e))},l=function(t){e.off(h,"mousemove",c),e.off(h,"mouseup",l),r.parentNode.removeChild(r),i.stop&&i.stop(t)
},this.destroy=function(){e.off(o())},e.on(o(),"mousedown",s)}}),i(Z,[W,X],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,c,d){var u,h,p,f,v,m,g,b,y;if(h=o.getEl("scroll"+t)){if(b=a.toLowerCase(),y=s.toLowerCase(),o.getEl("absend")&&e.css(o.getEl("absend"),b,o.layoutRect()[l]-1),!c)return void e.css(h,"display","none");e.css(h,"display","block"),u=o.getEl("body"),p=o.getEl("scroll"+t+"t"),f=u["client"+s]-2*r,f-=n&&i?h["client"+d]:0,v=u["scroll"+s],m=f/v,g={},g[b]=u["offset"+a]+r,g[y]=f,e.css(h,g),g={},g[b]=u["scroll"+a]*m,g[y]=f*m,e.css(p,g)}}var n,i,a;a=o.getEl("body"),n=a.scrollWidth>a.clientWidth,i=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",i,"Width")}function i(){function n(n,i,a,s,l){var c,d=o._id+"-scroll"+n,u=o.classPrefix;o.getEl().appendChild(e.createFragment('<div id="'+d+'" class="'+u+"scrollbar "+u+"scrollbar-"+n+'"><div id="'+d+'t" class="'+u+'scrollbar-thumb"></div></div>')),o.draghelper=new t(d+"t",{start:function(){c=o.getEl("body")["scroll"+i],e.addClass(e.get(d),u+"active")},drag:function(e){var t,d,u,h,p=o.layoutRect();d=p.contentW>p.innerW,u=p.contentH>p.innerH,h=o.getEl("body")["client"+a]-2*r,h-=d&&u?o.getEl("scroll"+n)["client"+l]:0,t=h/o.getEl("body")["scroll"+a],o.getEl("body")["scroll"+i]=c+e["delta"+s]/t},stop:function(){e.removeClass(e.get(d),u+"active")}})}o.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var o=this,r=2;o.settings.autoScroll&&(o._hasScroll||(o._hasScroll=!0,i(),o.on("wheel",function(e){var t=o.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(o.getEl("body"),"scroll",n)),n())}}}),i(Q,[K,Z],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),i(et,[W],function(e){function t(t,n,i){var o,r,a,s,l,c,d,u,h,p;return h=e.getViewPort(),r=e.getPos(n),a=r.x,s=r.y,t._fixed&&"static"==e.getRuntimeStyle(document.body,"position")&&(a-=h.x,s-=h.y),o=t.getEl(),p=e.getSize(o),l=p.width,c=p.height,p=e.getSize(n),d=p.width,u=p.height,i=(i||"").split(""),"b"===i[0]&&(s+=u),"r"===i[1]&&(a+=d),"c"===i[0]&&(s+=Math.round(u/2)),"c"===i[1]&&(a+=Math.round(d/2)),"b"===i[3]&&(s-=c),"r"===i[4]&&(a-=l),"c"===i[3]&&(s-=Math.round(c/2)),"c"===i[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:c}}return{testMoveRel:function(n,i){for(var o=e.getViewPort(),r=0;r<i.length;r++){var a=t(this,n,i[r]);if(this._fixed){if(a.x>0&&a.x+a.w<o.w&&a.y>0&&a.y+a.h<o.h)return i[r]}else if(a.x>o.x&&a.x+a.w<o.w+o.x&&a.y>o.y&&a.y+a.h<o.h+o.y)return i[r]}return i[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var i=t(this,e,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();return n.moveTo(i.x+e,i.y+t),n},moveTo:function(t,n){function i(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var o=this;if(o.settings.constrainToViewport){var r=e.getViewPort(window),a=o.layoutRect();t=i(t,r.w+r.x,a.w),n=i(n,r.h+r.y,a.h)}return o._rendered?o.layoutRect({x:t,y:n}).repaint():(o.settings.x=t,o.settings.y=n),o.fire("move",{x:t,y:n}),o}}}),i(tt,[W],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var i=e.getWindowSize();t=1>=t?t*i.w:t,n=1>=n?n*i.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,i=n.layoutRect();return n.resizeTo(i.w+e,i.h+t)}}}),i(nt,[Q,et,tt,W],function(e,t,n,i){function o(){function e(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}d||(d=function(t){if(2!=t.button)for(var n=f.length;n--;){var i=f[n],o=i.getParentCtrl(t.target);if(i.settings.autohide){if(o&&(e(o,i)||i.parent()===o))continue;t=i.fire("autohide",{target:t.target}),t.isDefaultPrevented()||i.hide()}}},i.on(document,"click",d))}function r(){u||(u=function(){var e;for(e=f.length;e--;)s(f[e])},i.on(window,"scroll",u))}function a(){if(!h){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;h=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,m.hideAll())},i.on(window,"resize",h)}}function s(e){function t(t,n){for(var i,o=0;o<f.length;o++)if(f[o]!=e)for(i=f[o].parent();i&&(i=i.parent());)i==e&&f[o].fixed(t).moveBy(0,n).repaint()}var n=i.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function l(e,t){var n,o,r=m.zIndex||65535;if(e)v.push(t);else for(n=v.length;n--;)v[n]===t&&v.splice(n,1);if(v.length)for(n=0;n<v.length;n++)v[n].modal&&(r++,o=v[n]),v[n].getEl().style.zIndex=r,v[n].zIndex=r,r++;var a=document.getElementById(t.classPrefix+"modal-block");o?i.css(a,"z-index",o.zIndex-1):a&&(a.parentNode.removeChild(a),p=!1),m.currentZIndex=r}function c(e){var t;for(t=f.length;t--;)f[t]===e&&f.splice(t,1);for(t=v.length;t--;)v[t]===e&&v.splice(t,1)}var d,u,h,p,f=[],v=[],m=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.addClass("floatpanel"),e.autohide&&(o(),a(),f.push(t)),e.autofix&&(r(),t.on("move",function(){s(this)})),t.on("postrender show",function(e){if(e.control==t){var n,o=t.classPrefix;t.modal&&!p&&(n=i.createFragment('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>'),n=n.firstChild,t.getContainerElm().appendChild(n),setTimeout(function(){i.addClass(n,o+"in"),i.addClass(t.getEl(),o+"in")},0),p=!0),l(!0,t)}}),t.on("show",function(){t.parents().each(function(e){return e._fixed?(t.fixed(!0),!1):void 0})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.addClass("popover").addClass("bottom").addClass(t.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=i.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e,t=this,n=t._super();for(e=f.length;e--&&f[e]!==t;);return-1===e&&f.push(t),n},hide:function(){return c(this),l(!1,this),this._super()},hideAll:function(){m.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),l(!1,e)),e},remove:function(){c(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return m.hideAll=function(){for(var e=f.length;e--;){var t=f[e];t&&t.settings.autohide&&(t.hide(),f.splice(e,1))}},m}),i(it,[nt,Q,W,X],function(e,t,n,i){var o=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.addClass("rtl"),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,i,o,r=this,a=r.statusbar;r._fullscreen&&(r.layoutRect(n.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),e=r.layoutRect(),r.settings.title&&!r._fullscreen&&(t=e.headerW,t>e.w&&(i=e.x-Math.max(0,t/2),r.layoutRect({w:t,x:i}),o=!0)),a&&(a.layoutRect({w:r.layoutRect().innerW}).recalc(),t=a.layoutRect().minW+e.deltaW,t>e.w&&(i=e.x-Math.max(0,t-e.w),r.layoutRect({w:t,x:i}),o=!0)),o&&r.recalc()},initLayoutRect:function(){var e,t=this,i=t._super(),o=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var r=n.getSize(e);i.headerW=r.width,i.headerH=r.height,o+=i.headerH}t.statusbar&&(o+=t.statusbar.layoutRect().h),i.deltaH+=o,i.minH+=o,i.h+=o;var a=n.getWindowSize();return i.x=Math.max(0,a.w/2-i.w/2),i.y=Math.max(0,a.h/2-i.h/2),i},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,o=e.settings,r="",a="",s=o.html;return e.preRender(),t.preRender(e),o.title&&(r='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(o.title)+'</div><button type="button" class="'+i+'close" aria-hidden="true">×</button><div id="'+n+'-dragh" class="'+i+'dragh"></div></div>'),o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+r+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,i,o=this,r=document.documentElement,a=o.classPrefix;if(e!=o._fullscreen)if(n.on(window,"resize",function(){var e;if(o._fullscreen)if(t)o._timer||(o._timer=setTimeout(function(){var e=n.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0},50));else{e=(new Date).getTime();var i=n.getWindowSize();o.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-e>50&&(t=!0)}}),i=o.layoutRect(),o._fullscreen=e,e){o._initial={x:i.x,y:i.y,w:i.w,h:i.h},o._borderBox=o.parseBox("0"),o.getEl("head").style.display="none",i.deltaH-=i.headerH+2,n.addClass(r,a+"fullscreen"),n.addClass(document.body,a+"fullscreen"),o.addClass("fullscreen");var s=n.getWindowSize();o.moveTo(0,0).resizeTo(s.w,s.h)}else o._borderBox=o.parseBox(o.settings.border),o.getEl("head").style.display="",i.deltaH+=i.headerH,n.removeClass(r,a+"fullscreen"),n.removeClass(document.body,a+"fullscreen"),o.removeClass("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.addClass("in")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new i(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(n.removeClass(document.documentElement,t+"fullscreen"),n.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return o}),i(ot,[it],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function i(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}var o,r=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:o=[i("Ok",!0,!0),i("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:o=[i("Yes",1,!0),i("No",0)],n.buttons==t.YES_NO_CANCEL&&o.push(i("Cancel",-1));break;default:o=[i("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:o,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),i(rt,[it,ot],function(e,t){return function(n){function i(){return r.length?r[r.length-1]:void 0}var o=this,r=[];o.windows=r,n.on("remove",function(){for(var e=r.length;e--;)r[e].close()}),o.open=function(t,i){var o;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),o=new e(t),r.push(o),o.on("close",function(){for(var e=r.length;e--;)r[e]===o&&r.splice(e,1);r.length||n.focus()}),t.data&&o.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),o.features=t||{},o.params=i||{},1===r.length&&n.nodeChanged(),o.renderTo().reflow()},o.alert=function(e,i,o){t.alert(e,function(){i?i.call(o||this):n.focus()})},o.confirm=function(e,n,i){t.confirm(e,function(e){n.call(i||this,e)})},o.close=function(){i()&&i().close()},o.getParams=function(){return i()?i().params:null},o.setParams=function(e){i()&&(i().params=e)},o.getWindows=function(){return r}}}),i(at,[P,_,x,v,d,c],function(e,t,n,i,o,r){return function(a){function s(e,t){try{a.getDoc().execCommand(e,!1,t)}catch(n){}}function l(){var e=a.getDoc().documentMode;return e?e:6}function c(e){return e.isDefaultPrevented()}function d(){function t(e){var t=new l(function(){});r.each(a.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&a.dom.setAttrib(e,"style",a.dom.getAttrib(e,"style"))}),t.observe(a.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),a.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var n=a.selection.getRng(),i=n.startContainer.parentNode;r.each(t.takeRecords(),function(e){if(V.isChildOf(e.target,a.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}r.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,o;e==i&&(t=n.startOffset,o=e.firstChild),V.remove(e,!0),o&&(n.setStart(o,t),n.setEnd(o,t),a.selection.setRng(n))}})}}),t.disconnect(),r.each(a.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var n,i,o=a.getDoc(),s="data:text/mce-internal,",l=window.MutationObserver;l||(n=!0,l=function(){function e(e){var t=e.relatedNode||e.target;i.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;i.push({target:t,attributeName:e.attrName})}var n,i=[];this.observe=function(i){n=i,n.addEventListener("DOMSubtreeModified",e,!1),n.addEventListener("DOMNodeInsertedIntoDocument",e,!1),n.addEventListener("DOMNodeInserted",e,!1),n.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",e,!1),n.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),n.removeEventListener("DOMNodeInserted",e,!1),n.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return i}}),a.on("keydown",function(n){var i=n.keyCode==z,o=e.metaKeyPressed(n);if(!c(n)&&(i||n.keyCode==U)){var r=a.selection.getRng(),s=r.startContainer,l=r.startOffset;if(!o&&r.collapsed&&3==s.nodeType&&(i?l<s.data.length:l>0))return;n.preventDefault(),o&&a.selection.getSel().modify("extend",i?"forward":"backward","word"),t(i)}}),a.on("keypress",function(n){c(n)||W.isCollapsed()||!n.charCode||e.metaKeyPressed(n)||(n.preventDefault(),t(!0),a.selection.setContent(String.fromCharCode(n.charCode)))}),a.addCommand("Delete",function(){t()}),a.addCommand("ForwardDelete",function(){t(!0)}),n||(a.on("dragstart",function(e){var t;a.selection.isCollapsed()&&"IMG"==e.target.tagName&&W.select(e.target),i=W.getRng(),t=a.selection.getContent(),t.length>0&&e.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),a.on("drop",function(e){if(!c(e)){var n=e.dataTransfer.getData("URL");if(!n||-1==n.indexOf(s)||!o.caretRangeFromPoint)return;n=unescape(n.substr(s.length)),o.caretRangeFromPoint&&(e.preventDefault(),window.setTimeout(function(){var r=o.caretRangeFromPoint(e.x,e.y);i&&(W.setRng(i),i=null),t(),W.setRng(r),a.insertContent(n)},0))}}),a.on("cut",function(e){!c(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",a.selection.getContent()),e.clipboardData.setData("text/plain",a.selection.getContent({format:"text"})),t(!0))}))}function u(){function e(e){var t=V.create("body"),n=e.cloneContents();return t.appendChild(n),W.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();return i.moveToElementText(a.getBody()),t.compareRanges(n,i)}var o=e(n),r=V.createRng();r.selectNode(a.getBody());var s=e(r);return o===s}a.on("keydown",function(e){var t,i,o=e.keyCode;if(!c(e)&&(o==z||o==U)){if(t=a.selection.isCollapsed(),i=a.getBody(),t&&!V.isEmpty(i))return;if(!t&&!n(a.selection.getRng()))return;e.preventDefault(),a.setContent(""),i.firstChild&&V.isBlock(i.firstChild)?a.selection.setCursorLocation(i.firstChild,0):a.selection.setCursorLocation(i,0),a.nodeChanged()}})}function h(){a.on("keydown",function(t){!c(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),a.execCommand("SelectAll"))})}function p(){a.settings.content_editable||(V.bind(a.getDoc(),"focusin",function(){W.setRng(W.getRng())}),V.bind(a.getDoc(),"mousedown mouseup",function(e){e.target==a.getDoc().documentElement&&(a.getBody().focus(),"mousedown"==e.type?W.placeCaretAt(e.clientX,e.clientY):W.setRng(W.getRng()))}))}function f(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===U){if(!a.getBody().getElementsByTagName("hr").length)return;if(W.isCollapsed()&&0===W.getRng(!0).startOffset){var t=W.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return V.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(V.remove(n),e.preventDefault())}}})}function v(){window.Range.prototype.getClientRects||a.on("mousedown",function(e){if(!c(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function m(){a.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&(e.preventDefault(),W.getSel().setBaseAndExtent(t,0,t,1),a.nodeChanged()),"A"==t.nodeName&&V.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),W.select(t))})}function g(){function e(){var e=V.getAttribs(W.getStart().cloneNode(!1));return function(){var t=W.getStart();t!==a.getBody()&&(V.setAttrib(t,"style",null),q(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!W.isCollapsed()&&V.getParent(W.getStart(),V.isBlock)!=V.getParent(W.getEnd(),V.isBlock)}a.on("keypress",function(n){var i;return c(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(i=e(),a.getDoc().execCommand("delete",!1,null),i(),n.preventDefault(),!1)}),V.bind(a.getDoc(),"cut",function(n){var i;!c(n)&&t()&&(i=e(),setTimeout(function(){i()},0))})}function b(){document.body.setAttribute("role","application")}function y(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===U&&W.isCollapsed()&&0===W.getRng(!0).startOffset){var t=W.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function _(){l()>7||(s("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),V.addClass(a.getBody(),"mceHideBrInPre"),J.addNodeFilter("pre",function(e){for(var t,i,o,r,a=e.length;a--;)for(t=e[a].getAll("br"),i=t.length;i--;)o=t[i],r=o.prev,r&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":o.parent.insert(new n("#text",3),o,!0).value="\n"}),G.addNodeFilter("pre",function(e){for(var t,n,i,o,r=e.length;r--;)for(t=e[r].getAll("br"),n=t.length;n--;)i=t[n],o=i.prev,o&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}))}function w(){V.bind(a.getBody(),"mouseup",function(){var e,t=W.getNode();"IMG"==t.nodeName&&((e=V.getStyle(t,"width"))&&(V.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),V.setStyle(t,"width","")),(e=V.getStyle(t,"height"))&&(V.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),V.setStyle(t,"height","")))})}function x(){a.on("keydown",function(t){var n,i,o,r,s;if(!c(t)&&t.keyCode==e.BACKSPACE&&(n=W.getRng(),i=n.startContainer,o=n.startOffset,r=V.getRoot(),s=i,n.collapsed&&0===o)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=r;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(a.formatter.toggle("blockquote",null,s),n=V.createRng(),n.setStart(i,0),n.setEnd(i,0),W.setRng(n))}})}function $(){function e(){a._refreshContentEditable(),s("StyleWithCSS",!1),s("enableInlineTableEditing",!1),Y.object_resizing||s("enableObjectResizing",!1)}Y.readonly||a.on("BeforeExecCommand MouseDown",e)}function k(){function e(){q(V.select("a"),function(e){var t=e.parentNode,n=V.getRoot();if(t.lastChild===e){for(;t&&!V.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}V.add(t,"br",{"data-mce-bogus":1})}})}a.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function C(){Y.forced_root_block&&a.on("init",function(){s("DefaultParagraphSeparator",Y.forced_root_block)})}function T(){a.on("Undo Redo SetContent",function(e){e.initial||a.execCommand("mceRepaint")})}function S(){a.on("keydown",function(e){var t;c(e)||e.keyCode!=U||(t=a.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),a.undoManager.beforeChange(),V.remove(t.item(0)),a.undoManager.add()))})}function A(){var e;l()>=10&&(e="",q("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),a.contentStyles.push(e+"{padding-right: 1px !important}"))}function D(){l()<9&&(J.addNodeFilter("noscript",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),G.addNodeFilter("noscript",function(e){for(var t,o,r,a=e.length;a--;)t=e[a],o=e[a].firstChild,o?o.value=i.decode(o.value):(r=t.attributes.map["data-mce-innertext"],r&&(t.attr("data-mce-innertext",null),o=new n("#text",3),o.value=r,o.raw=!0,t.append(o)))}))}function P(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(i){n=null}return n}function t(t){var i;t.button?(i=e(t.x,t.y),i&&(i.compareEndPoints("StartToStart",o)>0?i.setEndPoint("StartToStart",o):i.setEndPoint("EndToEnd",o),i.select())):n()}function n(){var e=a.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),V.unbind(a,"mouseup",n),V.unbind(a,"mousemove",t),o=i=0}var i,o,r,a=V.doc,s=a.body;a.documentElement.unselectable=!0,V.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(i&&n(),r=a.documentElement,r.scrollHeight>r.clientHeight)return;i=1,o=e(s.x,s.y),o&&(V.bind(a,"mouseup",n),V.bind(a,"mousemove",t),V.getRoot().focus(),o.select())}})}function E(){a.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||W.normalize()},!0)}function M(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function I(){a.inline||a.on("keydown",function(){document.activeElement==document.body&&a.getWin().focus()})}function N(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){"HTML"==e.target.nodeName&&(a.getBody().focus(),a.selection.normalize(),a.nodeChanged())}))}function F(){o.mac&&a.on("keydown",function(t){!e.metaKeyPressed(t)||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),a.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}function L(){s("AutoUrlDetect",!1)}function j(){a.inline||a.on("focus blur beforegetcontent",function(){var e=a.dom.create("br");a.getBody().appendChild(e),e.parentNode.removeChild(e)},!0)}function O(){a.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function R(){a.on("touchstart",function(e){var t,n,i,o;t=e.target,n=(new Date).getTime(),o=e.changedTouches,!o||o.length>1||(i=o[0],a.once("touchend",function(e){var o,r=e.changedTouches[0];(new Date).getTime()-n>500||Math.abs(i.clientX-r.clientX)>5||Math.abs(i.clientY-r.clientY)>5||(o={target:t},q("pageX pageY clientX clientY screenX screenY".split(" "),function(e){o[e]=r[e]}),o=a.fire("click",o),o.isDefaultPrevented()||(a.selection.placeCaretAt(r.clientX,r.clientY),a.nodeChanged()))}))})}function H(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(e){e.preventDefault()})})}function B(){J.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}var q=r.each,U=e.BACKSPACE,z=e.DELETE,V=a.dom,W=a.selection,Y=a.settings,J=a.parser,G=a.serializer,K=o.gecko,X=o.ie,Z=o.webkit;x(),u(),E(),Z&&(d(),p(),m(),C(),H(),y(),B(),R(),o.iOS?(I(),N(),O()):h()),X&&o.ie<11&&(f(),b(),_(),w(),S(),A(),D(),P()),o.ie>=11&&(N(),j(),y()),o.ie&&(h(),L()),K&&(f(),v(),g(),$(),k(),T(),M(),F(),y())}}),i(st,[U],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,i){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,i)}})),t._eventDispatcher}return{fire:function(e,n,i){var o=this;if(o.removed&&"remove"!==e)return n;if(n=t(o).fire(e,n,i),i!==!1&&o.parent)for(var r=o.parent();r&&!n.isPropagationStopped();)r.fire(e,n,!1),r=r.parent();return n},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),i(lt,[st,g,c],function(e,t,n){function i(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=a.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function o(e,t){var n,o=i(e,t);if(e.delegates||(e.delegates={}),!e.delegates[t])if(e.settings.event_root){if(r||(r={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&r){for(t in r)e.dom.unbind(i(e,t));r=null}})),r[t])return;n=function(n){for(var i=n.target,o=e.editorManager.editors,r=o.length;r--;){var s=o[r].getBody();(s===i||a.isChildOf(i,s))&&(o[r].hidden||o[r].fire(t,n))}},r[t]=n,a.bind(o,t,n)}else n=function(n){e.hidden||e.fire(t,n)},a.bind(o,t,n),e.delegates[t]=n}var r,a=t.DOM,s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){o(e,t)})},toggleNativeEvent:function(e,t){var n=this;n.settings.readonly||"focus"!=e&&"blur"!=e&&(t?n.initialized?o(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(i(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(i(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return s=n.extend({},e,s)}),i(ct,[c,d],function(e,t){var n=e.each,i=e.explode,o={f9:120,f10:121,f11:122};return function(r){var a=this,s={};r.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&n(s,function(n){var i=t.mac?e.metaKey:e.ctrlKey;return n.ctrl==i&&n.alt==e.altKey&&n.shift==e.shiftKey&&(e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode)?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),a.add=function(t,a,l,c){var d;return d=l,"string"==typeof l?l=function(){r.execCommand(d,!1,null)}:e.isArray(d)&&(l=function(){r.execCommand(d[0],d[1],d[2])}),n(i(t.toLowerCase()),function(e){var t={func:l,scope:c||r,desc:r.translate(a),alt:!1,ctrl:!1,shift:!1};n(i(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=o[e]||e.toUpperCase().charCodeAt(0))}}),s[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),i(dt,[g,u,y,w,x,A,S,I,L,j,O,R,H,B,b,l,rt,$,C,at,d,c,lt,ct],function(e,n,i,o,r,a,s,l,c,d,u,h,p,f,v,m,g,b,y,_,w,x,$,k){function C(e,t,o){var r,a,s=this;r=s.documentBaseUrl=o.documentBaseURL,a=o.baseURI,s.settings=t=D({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:r,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s,ie7_compat:!0},t),i.language=t.language||"en",i.languageLoad=t.language_load,i.baseURL=o.baseURL,s.id=t.id=e,s.isNotDirty=!0,s.plugins={},s.documentBaseURI=new f(t.document_base_url||r,{base_uri:a}),s.baseURI=a,s.contentCSS=[],s.contentStyles=[],s.shortcuts=new k(s),s.execCommands={},s.queryStateCommands={},s.queryValueCommands={},s.loadedCSS={},t.target&&(s.targetElm=t.target),s.suffix=o.suffix,s.editorManager=o,s.inline=t.inline,o.fire("SetupEditor",s),s.execCallback("setup",s),s.$=n.overrideDefaults(function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}})}var T=e.DOM,S=i.ThemeManager,A=i.PluginManager,D=x.extend,P=x.each,E=x.explode,M=x.inArray,I=x.trim,N=x.resolve,F=m.Event,L=w.gecko,j=w.ie;return C.prototype={render:function(){function e(){T.unbind(window,"ready",e),n.render()}function t(){var e=v.ScriptLoader;if(i.language&&"en"!=i.language&&!i.language_url&&(i.language_url=n.editorManager.baseURL+"/langs/"+i.language+".js"),i.language_url&&e.add(i.language_url),i.theme&&"function"!=typeof i.theme&&"-"!=i.theme.charAt(0)&&!S.urls[i.theme]){var t=i.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+i.theme+"/theme"+r+".js",S.load(i.theme,t)}x.isArray(i.plugins)&&(i.plugins=i.plugins.join(" ")),P(i.external_plugins,function(e,t){A.load(t,e),i.plugins+=" "+t}),P(i.plugins.split(/[ ,]/),function(e){if(e=I(e),e&&!A.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=A.dependencies(e);P(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=A.createUrl(t,e),A.load(e.resource,e)})}else A.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,i=n.settings,o=n.id,r=n.suffix;if(!F.domLoaded)return void T.bind(window,"ready",e);if(n.getElement()&&w.contentEditable){i.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||T.getParent(o,"form");a&&(n.formElement=a,i.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(T.insertAfter(T.create("input",{type:"hidden",name:o}),o),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)
},T.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!i.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,a._mceOldSubmit(a)})),n.windowManager=new g(n),"xml"==i.encoding&&n.on("GetContent",function(e){e.save&&(e.content=T.encode(e.content))}),i.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),i.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}},init:function(){function e(t){var n,i,o=A.get(t);n=A.urls[t]||h.documentBaseUrl.replace(/\/$/,""),t=I(t),o&&-1===M(v,t)&&(P(A.dependencies(t),function(t){e(t)}),i=new o(h,n,h.$),h.plugins[t]=i,i.init&&(i.init(h,n),v.push(t)))}var t,n,i,o,r,a,s,l,c,d,u,h=this,p=h.settings,f=h.getElement(),v=[];if(h.rtl=this.editorManager.i18n.rtl,h.editorManager.add(h),p.aria_label=p.aria_label||T.getAttrib(f,"aria-label",h.getLang("aria.rich_text_area")),p.theme&&("function"!=typeof p.theme?(p.theme=p.theme.replace(/-/,""),a=S.get(p.theme),h.theme=new a(h,S.urls[p.theme]),h.theme.init&&h.theme.init(h,S.urls[p.theme]||h.documentBaseUrl.replace(/\/$/,""),h.$)):h.theme=p.theme),P(p.plugins.replace(/\-/g,"").split(/[ ,]/),e),p.render_ui&&h.theme&&(h.orgDisplay=f.style.display,"function"!=typeof p.theme?(t=p.width||f.style.width||f.offsetWidth,n=p.height||f.style.height||f.offsetHeight,i=p.min_height||100,d=/^[0-9\.]+(|px)$/i,d.test(""+t)&&(t=Math.max(parseInt(t,10),100)),d.test(""+n)&&(n=Math.max(parseInt(n,10),i)),r=h.theme.renderUI({targetNode:f,width:t,height:n,deltaWidth:p.delta_width,deltaHeight:p.delta_height}),p.content_editable||(n=(r.iframeHeight||n)+("number"==typeof n?r.deltaHeight||0:""),i>n&&(n=i))):(r=p.theme(h,f),r.editorContainer.nodeType&&(r.editorContainer=r.editorContainer.id=r.editorContainer.id||h.id+"_parent"),r.iframeContainer.nodeType&&(r.iframeContainer=r.iframeContainer.id=r.iframeContainer.id||h.id+"_iframecontainer"),n=r.iframeHeight||f.offsetHeight),h.editorContainer=r.editorContainer),p.content_css&&P(E(p.content_css),function(e){h.contentCSS.push(h.documentBaseURI.toAbsolute(e))}),p.content_style&&h.contentStyles.push(p.content_style),p.content_editable)return f=o=r=null,h.initContentBody();for(h.iframeHTML=p.doctype+"<html><head>",p.document_base_url!=h.documentBaseUrl&&(h.iframeHTML+='<base href="'+h.documentBaseURI.getURI()+'" />'),!w.caretAfter&&p.ie7_compat&&(h.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),h.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',u=0;u<h.contentCSS.length;u++){var m=h.contentCSS[u];h.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+m+'" />',h.loadedCSS[m]=!0}l=p.body_id||"tinymce",-1!=l.indexOf("=")&&(l=h.getParam("body_id","","hash"),l=l[h.id]||l),c=p.body_class||"",-1!=c.indexOf("=")&&(c=h.getParam("body_class","","hash"),c=c[h.id]||""),p.content_security_policy&&(h.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+p.content_security_policy+'" />'),h.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" data-id="'+h.id+'"><br></body></html>';var g='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+h.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&(s=g);var b=T.create("iframe",{id:h.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:h.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:n,display:"block"}});if(b.onload=function(){b.onload=null,h.fire("load")},T.setAttrib(b,"src",s||'javascript:""'),h.contentAreaContainer=r.iframeContainer,h.iframeElement=b,o=T.add(r.iframeContainer,b),j)try{h.getDoc()}catch(y){o.src=s=g}r.editorContainer&&(T.get(r.editorContainer).style.display=h.orgDisplay,h.hidden=T.isHidden(r.editorContainer)),h.getElement().style.display="none",T.setAttrib(h.id,"aria-hidden",!0),s||h.initContentBody(),f=o=r=null},initContentBody:function(t){var n,i,s=this,f=s.settings,v=s.getElement(),m=s.getDoc();f.inline||(s.getElement().style.visibility=s.orgVisibility),t||f.content_editable||(m.open(),m.write(s.iframeHTML),m.close()),f.content_editable&&(s.on("remove",function(){var e=this.getBody();T.removeClass(e,"mce-content-body"),T.removeClass(e,"mce-edit-focus"),T.setAttrib(e,"contentEditable",null)}),T.addClass(v,"mce-content-body"),s.contentDocument=m=f.content_document||document,s.contentWindow=f.content_window||window,s.bodyElement=v,f.content_document=f.content_window=null,f.root_name=v.nodeName.toLowerCase()),n=s.getBody(),n.disabled=!0,f.readonly||(s.inline&&"static"==T.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=s.getParam("content_editable_state",!0)),n.disabled=!1,s.schema=new b(f),s.dom=new e(m,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:!0,root_element:s.inline?s.getBody():null,collect:f.content_editable,schema:s.schema,onSetAttrib:function(e){s.fire("SetAttrib",e)}}),s.parser=new y(f,s.schema),s.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,i,o,r=e.length,a=s.dom;r--;)n=e[r],i=n.attr(t),o="data-mce-"+t,n.attributes.map[o]||("style"===t?(i=a.serializeStyle(a.parseStyle(i),n.name),i.length||(i=null),n.attr(o,i),n.attr(t,i)):"tabindex"===t?(n.attr(o,i),n.attr(t,null)):n.attr(o,s.convertURL(i,t,n.name)))}),s.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"no/type"))}),s.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,i=s.schema.getNonEmptyElements();n--;)t=e[n],t.isEmpty(i)&&(t.append(new r("br",1)).shortEnded=!0)}),s.serializer=new a(f,s),s.selection=new l(s.dom,s.getWin(),s.serializer,s),s.formatter=new c(s),s.undoManager=new d(s),s.forceBlocks=new h(s),s.enterKey=new u(s),s.editorCommands=new p(s),s._nodeChangeDispatcher=new o(s),s.fire("PreInit"),f.browser_spellcheck||f.gecko_spellcheck||(m.body.spellcheck=!1,T.setAttrib(n,"spellcheck","false")),s.fire("PostRender"),s.quirks=new _(s),f.directionality&&(n.dir=f.directionality),f.nowrap&&(n.style.whiteSpace="nowrap"),f.protect&&s.on("BeforeSetContent",function(e){P(f.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),s.on("SetContent",function(){s.addVisual(s.getBody())}),f.padd_empty_editor&&s.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.bindPendingEventDelegates(),s.fire("init"),s.focus(!0),s.nodeChanged({initial:!0}),s.execCallback("init_instance_callback",s),s.contentStyles.length>0&&(i="",P(s.contentStyles,function(e){i+=e+"\r\n"}),s.dom.addStyle(i)),P(s.contentCSS,function(e){s.loadedCSS[e]||(s.dom.loadCSS(e),s.loadedCSS[e]=!0)}),f.auto_focus&&setTimeout(function(){var e;e=f.auto_focus===!0?s:s.editorManager.get(f.auto_focus),e.focus()},100),v=m=n=null},focus:function(e){var t,n,i,o=this,r=o.selection,a=o.settings.content_editable,s=o.getDoc();if(!e){if(t=r.getRng(),t.item&&(n=t.item(0)),o._refreshContentEditable(),a||(w.opera||o.getBody().focus(),o.getWin().focus()),L||a){if(i=o.getBody(),i.setActive)try{i.setActive()}catch(l){i.focus()}else i.focus();a&&r.normalize()}n&&n.ownerDocument==s&&(t=s.body.createControlRange(),t.addElement(n),t.select())}o.editorManager.setActive(o)},execCallback:function(e){var t,n=this,i=n.settings[e];return i?(n.callbackLookup&&(t=n.callbackLookup[e])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=i.replace(/\.\w+$/,""),t=t?N(t):0,i=N(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:i,scope:t}),i.apply(t||n,Array.prototype.slice.call(arguments,1))):void 0},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var i,o=e in this.settings?this.settings[e]:t;return"hash"===n?(i={},"string"==typeof o?P(o.split(o.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),i[I(e[0])]=I(e.length>1?e[1]:e)}):i=o,i):o},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){var o,r=this,a=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus||r.focus(),i=D({},i),i=r.fire("BeforeExecCommand",{command:e,ui:t,value:n}),i.isDefaultPrevented())return!1;if((o=r.execCommands[e])&&o.func.call(o.scope,t,n)!==!0)return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(P(r.plugins,function(i){return i.execCommand&&i.execCommand(e,t,n)?(r.fire("ExecCommand",{command:e,ui:t,value:n}),a=!0,!1):void 0}),a)return a;if(r.theme&&r.theme.execCommand&&r.theme.execCommand(e,t,n))return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(r.editorCommands.execCommand(e,t,n))return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{a=r.getDoc().execCommand(e,t,n)}catch(s){}return a?(r.fire("ExecCommand",{command:e,ui:t,value:n}),!0):!1},queryCommandState:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryStateCommands[e])&&(n=t.func.call(t.scope),n===!0||n===!1))return n;if(n=i.editorCommands.queryCommandState(e),-1!==n)return n;try{return i.getDoc().queryCommandState(e)}catch(o){}}},queryCommandValue:function(e){var n,i,o=this;if(!o._isHidden()){if((n=o.queryValueCommands[e])&&(i=n.func.call(n.scope),i!==!0))return i;if(i=o.editorCommands.queryCommandValue(e),i!==t)return i;try{return o.getDoc().queryCommandValue(e)}catch(r){}}},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(T.show(e.getContainer()),T.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(j&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(T.hide(e.getContainer()),T.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n,i=this,o=i.getElement();return o?(e=e||{},e.load=!0,n=i.setContent(o.value!==t?o.value:o.innerHTML,e),e.element=o,e.no_events||i.fire("LoadContent",e),e.element=o=null,n):void 0},save:function(e){var t,n,i=this,o=i.getElement();return o&&i.initialized?(e=e||{},e.save=!0,e.element=o,t=e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(i.inline||(o.innerHTML=t),(n=T.getParent(i.id,"form"))&&P(n.elements,function(e){return e.name==i.id?(e.value=t,!1):void 0})),e.element=o=null,e.set_dirty!==!1&&(i.isNotDirty=!0),t):void 0},setContent:function(e,t){var n,i=this,o=i.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||i.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(n=i.settings.forced_root_block,n&&i.schema.isValidChild(o.nodeName.toLowerCase(),n.toLowerCase())?(e=j&&11>j?"":'<br data-mce-bogus="1">',e=i.dom.createHTML(n,i.settings.forced_root_block_attrs,e)):j||(e='<br data-mce-bogus="1">'),i.dom.setHTML(o,e),i.fire("SetContent",t)):("raw"!==t.format&&(e=new s({},i.schema).serialize(i.parser.parse(e,{isRootContent:!0}))),t.content=I(e),i.dom.setHTML(o,t.content),t.no_events||i.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,i=n.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?i.innerHTML:"text"==e.format?i.innerText||i.textContent:n.serializer.serialize(i,e),e.content="text"!=e.format?I(t):t,e.no_events||n.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=D({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=T.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=T.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement,e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,o=i.settings;return o.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var n,i=this,o=i.settings,r=i.dom;e=e||i.getBody(),i.hasVisual===t&&(i.hasVisual=o.visual),P(r.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=o.visual_table_class||"mce-item-table",t=r.getAttrib(e,"border"),void(t&&"0"!=t||!i.hasVisual?r.removeClass(e,n):r.addClass(e,n));case"A":return void(r.getAttrib(e,"href",!1)||(t=r.getAttrib(e,"name")||e.id,n=o.visual_anchor_class||"mce-item-anchor",t&&i.hasVisual?r.addClass(e,n):r.removeClass(e,n)))}}),i.fire("VisualAid",{element:e,hasVisual:i.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&T.remove(e.getElement().nextSibling),e.inline||(j&&10>j&&e.getDoc().execCommand("SelectAll",!1,null),T.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),T.remove(e.getContainer()),e.destroy())},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),T.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return L?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},D(C.prototype,$),C}),i(ut,[],function(){var e={};return{rtl:!1,add:function(t,n){for(var i in n)e[i]=n[i];this.rtl=this.rtl||"rtl"===e._dir},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),i(ht,[g,d],function(e,t){function n(e){function s(){try{return document.activeElement}catch(e){return document.body}}function l(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function d(e){return!!a.getParent(e,n.isEditorUIElement)}function u(n){var u=n.editor;u.on("init",function(){(u.inline||t.ie)&&("onbeforedeactivate"in document&&t.ie<9?u.dom.bind(u.getBody(),"beforedeactivate",function(e){if(e.target==u.getBody())try{u.lastRng=u.selection.getRng()}catch(t){}}):u.on("nodechange mouseup keyup",function(e){var t=s();"nodechange"==e.type&&e.selectionChange||(t&&t.id==u.id+"_ifr"&&(t=u.getBody()),u.dom.isChildOf(t,u.getBody())&&(u.lastRng=u.selection.getRng()))}),t.webkit&&!i&&(i=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(u.lastRng=n)}},a.bind(document,"selectionchange",i)))}),u.on("setcontent",function(){u.lastRng=null}),u.on("mousedown",function(){u.selection.lastFocusBookmark=null}),u.on("focusin",function(){var t=e.focusedEditor;u.selection.lastFocusBookmark&&(u.selection.setRng(c(u,u.selection.lastFocusBookmark)),u.selection.lastFocusBookmark=null),t!=u&&(t&&t.fire("blur",{focusedEditor:u}),e.setActive(u),e.focusedEditor=u,u.fire("focus",{blurredEditor:t}),u.focus(!0)),u.lastRng=null}),u.on("focusout",function(){window.setTimeout(function(){var t=e.focusedEditor;d(s())||t!=u||(u.fire("blur",{focusedEditor:null}),e.focusedEditor=null,u.selection&&(u.selection.lastFocusBookmark=null))},0)}),o||(o=function(t){var n=e.activeEditor;n&&t.target.ownerDocument==document&&(n.selection&&t.target!=n.getBody()&&(n.selection.lastFocusBookmark=l(n.dom,n.lastRng)),t.target==document.body||d(t.target)||e.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},a.bind(document,"focusin",o)),u.inline&&!r&&(r=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var i=n.selection.getRng();i.collapsed||(n.lastRng=i)}},a.bind(document,"mouseup",r))}function h(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(a.unbind(document,"selectionchange",i),a.unbind(document,"focusin",o),a.unbind(document,"mouseup",r),i=o=r=null)}e.on("AddEditor",u),e.on("RemoveEditor",h)}var i,o,r,a=e.DOM;return n.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},n}),i(pt,[dt,u,g,B,d,c,st,ut,ht],function(e,t,n,i,o,r,a,s,l){function c(e){var t,n=h.editors;delete n[e.id];for(var i=0;i<n.length;i++)if(n[i]==e){n.splice(i,1),t=!0;break}return h.activeEditor==e&&(h.activeEditor=n[0]),h.focusedEditor==e&&(h.focusedEditor=null),t}function d(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(c(e),e.unbindAllNativeEvents(),e.destroy(!0),e=null),e}var u,h,p=n.DOM,f=r.explode,v=r.each,m=r.extend,g=0;return h={$:t,majorVersion:"4",minorVersion:"1.5",releaseDate:"2014-09-09",editors:[],i18n:s,activeEditor:null,setup:function(){var e,t,n,o,r=this,a="";if(t=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,a=n.suffix;else{for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++)if(o=s[c].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!=o.indexOf(".min")&&(a=".min"),e=o.substring(0,o.lastIndexOf("/"));break}!e&&document.currentScript&&(o=document.currentScript.src,-1!=o.indexOf(".min")&&(a=".min"),e=o.substring(0,o.lastIndexOf("/")))}r.baseURL=new i(t).toAbsolute(e),r.documentBaseURL=t,r.baseURI=new i(r.baseURL),r.suffix=a,r.focusManager=new l(r)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!p.get(t)?e.name:p.uniqueId(),e.setAttribute("id",t)),t}function i(t,n,i){if(!d(s.get(t))){var o=new e(t,n,s);o.targetElm=o.targetElm||i,l.push(o),o.render()}}function o(e){var n=t[e];return n?n.apply(s,Array.prototype.slice.call(arguments,2)):void 0}function r(e,t){return t.constructor===RegExp?t.test(e.className):p.hasClass(e,t)}function a(){var e,s;if(p.unbind(window,"ready",a),o("onpageload"),t.types)return void v(t.types,function(e){v(p.select(e.selector),function(o){i(n(o),m({},t,e),o)})});if(t.selector)return void v(p.select(t.selector),function(e){i(n(e),t,e)});switch(t.target&&i(n(t.target),t),t.mode){case"exact":e=t.elements||"",e.length>0&&v(f(e),function(e){var n;(n=p.get(e))?i(e,t,n):v(document.forms,function(n){v(n.elements,function(n){n.name===e&&(e="mce_editor_"+g++,p.setAttrib(n,"id",e),i(e,t,n))})})});break;case"textareas":case"specific_textareas":v(p.select("textarea"),function(e){t.editor_deselector&&r(e,t.editor_deselector)||(!t.editor_selector||r(e,t.editor_selector))&&i(n(e),t,e)})}t.oninit&&(e=s=0,v(l,function(t){s++,t.initialized?e++:t.on("init",function(){e++,e==s&&o("oninit")}),e==s&&o("oninit")}))}var s=this,l=[];s.settings=t,p.bind(window,"ready",a)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),u||(u=function(){t.fire("BeforeUnload")},p.bind(window,"beforeunload",u)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t,n,i=this,o=i.editors;if(e)return"string"==typeof e?(e=e.selector||e,void v(p.select(e),function(e){n=o[e.id],n&&i.remove(n)})):(n=e,o[n.id]?(c(n)&&i.fire("RemoveEditor",{editor:n}),o.length||p.unbind(window,"beforeunload",u),n.remove(),n):null);for(t=o.length-1;t>=0;t--)i.remove(o[t])},execCommand:function(t,n,i){var o=this,r=o.get(i);switch(t){case"mceAddEditor":return o.get(i)||new e(i,o.settings,o).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(o.execCommand("mceAddEditor",0,i),!0)}return o.activeEditor?o.activeEditor.execCommand(t,n,i):!1},triggerSave:function(){v(this.editors,function(e){e.save()})},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},m(h,a),h.setup(),window.tinymce=window.tinyMCE=h,h}),i(ft,[pt,c],function(e,t){var n=t.each,i=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function o(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){r[e.nodeName.toLowerCase()](s,e)})}var r,a,s,l=t.settings;l.inline_styles&&(a=i(l.font_size_legacy_values),r={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",o))})})}),i(vt,[st,c],function(e,t){var n={send:function(e){function t(){!e.async||4==i.readyState||o++>1e4?(e.success&&1e4>o&&200==i.status?e.success.call(e.success_scope,""+i.responseText,i,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",i,e),i=null):setTimeout(t,10)}var i,o=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",i=new XMLHttpRequest){if(i.overrideMimeType&&i.overrideMimeType(e.content_type),i.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(i.withCredentials=!0),e.content_type&&i.setRequestHeader("Content-Type",e.content_type),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i=n.fire("beforeSend",{xhr:i,settings:e}).xhr,i.send(e.data),!e.async)return t();setTimeout(t,10)}}};return t.extend(n,e),n}),i(mt,[],function(){function e(t,n){var i,o,r,a;if(n=n||'"',null===t)return"null";if(r=typeof t,"string"==r)return o="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(i=o.indexOf(t),i+1?"\\"+o.charAt(i+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==r){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(i=0,o="[";i<t.length;i++)o+=(i>0?",":"")+e(t[i],n);return o+"]"}o="{";for(a in t)t.hasOwnProperty(a)&&(o+="function"!=typeof t[a]?(o.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return o+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),i(gt,[mt,vt,c],function(e,t,n){function i(e){this.settings=o({},e),this.count=0}var o=n.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(n){var i=n.error,r=n.success;n=o(this.settings,n),n.success=function(t,o){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?i.call(n.error_scope||n.scope,t.error,o):r.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){i&&i.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},i}),i(bt,[g],function(e){return{callbacks:{},count:0,send:function(n){var i=this,o=e.DOM,r=n.count!==t?n.count:i.count,a="tinymce_jsonp_"+r;i.callbacks[r]=function(e){o.remove(a),delete i.callbacks[r],n.callback(e)},o.add(o.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),i.count++}}}),i(yt,[],function(){function e(){s=[];for(var e in a)s.push(e);o.length=s.length}function n(){function n(e){var n,i;return i=e!==t?d+e:o.indexOf(",",d),-1===i||i>o.length?null:(n=o.substring(d,i),d=i+1,n)}var i,o,s,d=0;if(a={},c){r.load(l),o=r.getAttribute(l)||"";do{var u=n();if(null===u)break;if(i=n(parseInt(u,32)||0),null!==i){if(u=n(),null===u)break;s=n(parseInt(u,32)||0),i&&(a[i]=s)}}while(null!==i);e()}}function i(){var t,n="";if(c){for(var i in a)t=a[i],n+=(n?",":"")+i.length.toString(32)+","+i+","+t.length.toString(32)+","+t;r.setAttribute(l,n);try{r.save(l)}catch(o){}e()}}var o,r,a,s,l,c;try{if(window.localStorage)return localStorage}catch(d){}return l="tinymce",r=document.documentElement,c=!!r.addBehavior,c&&r.addBehavior("#default#userData"),o={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,i()},removeItem:function(e){delete a[e],i()},clear:function(){a={},i()}},n(),o}),i(_t,[g,l,b,y,c,d],function(e,t,n,i,o,r){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=i.PluginManager,a.ThemeManager=i.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,o.each(o,function(e,t){a[t]=e}),o.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=r[e.substr(2).toLowerCase()]}),{}}),i(wt,[q,c],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,n,i,o=this,r=o.settings;t=e.items().filter(":visible"),n=r.firstControlClass,i=r.lastControlClass,t.each(function(e){e.removeClass(n).removeClass(i),r.controlClass&&e.addClass(r.controlClass)}),t.eq(0).addClass(n),t.eq(-1).addClass(i)},renderHtml:function(e){var t,n=this,i=n.settings,o="";return t=e.items(),t.eq(0).addClass(i.firstControlClass),t.eq(-1).addClass(i.lastControlClass),t.each(function(e){i.controlClass&&e.addClass(i.controlClass),o+=e.renderHtml()}),o},recalc:function(){},postRender:function(){}})}),i(xt,[wt],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),i($t,[Y,et],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),i(kt,[Y,$t],function(e,t){var n,i=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&i.tooltips!==!1&&(t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control==t){var o=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.toggleClass("tooltip-n","bc-tc"==o),i.toggleClass("tooltip-nw","bc-tl"==o),i.toggleClass("tooltip-ne","bc-tr"==o),i.moveRel(t.getEl(),o)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},active:function(e){var t,n=this;return e!==t&&(n.aria("pressed",e),n.toggleClass("active",e)),n._super(e)},disabled:function(e){var t,n=this;return e!==t&&(n.aria("disabled",e),n.toggleClass("disabled",e)),n._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i}),i(Ct,[kt],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n.on("click mousedown",function(e){e.preventDefault()}),n._super(e),t=e.size,e.subtype&&n.addClass(e.subtype),t&&n.addClass("btn-"+t)},icon:function(e){var t=this,n=t.classPrefix;if("undefined"==typeof e)return t.settings.icon;if(t.settings.icon=e,e=e?n+"ico "+n+"i-"+t.settings.icon:"",t._rendered){var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];e?(o&&o==i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=e):o&&i.removeChild(o),t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},text:function(e){var t=this;if(t._rendered){var n=t.getEl().lastChild.lastChild;n&&(n.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o=t.settings.icon;return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=t.settings.icon?i+"ico "+i+"i-"+o:"",'<div id="'+n+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?" ":"")+t.encode(t._text):"")+"</button></div>"}})}),i(Tt,[K],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),i(St,[kt],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()
}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span></div>"}})}),i(At,[kt,J,W],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("combobox"),t.subinput=!0,t.ariaTarget="inp",e=t.settings,e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){for(var i=n.target,o=t.getEl();i&&i!=o;)i.id&&-1!=i.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),i=i.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(n){return e.preventDefault(),t.fire("change"),n.hasEventListeners("submit")&&n.toJSON?(n.fire("submit",{data:n.toJSON()}),!1):void 0})}),e.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(n.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0),t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=e.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var e,n=this,i=n.settings;n.menu||(e=i.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==n.value())})}).fire("show"),n.menu.on("select",function(e){n.value(e.control.value())}),n.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,i=this,o=i.getEl(),r=i.getEl("open"),a=i.layoutRect();e=r?a.w-n.getSize(r).width-10:a.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(t=i.layoutRect().h-2+"px"),n.css(o.firstChild,{width:e,lineHeight:t}),i._super(),i},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){n.off(this.getEl("inp")),this._super()},renderHtml:function(){var e,t,n=this,i=n._id,o=n.settings,r=n.classPrefix,a=o.value||o.placeholder||"",s="",l="";return"spellcheck"in o&&(l+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(l+=' maxlength="'+o.maxLength+'"'),o.size&&(l+=' size="'+o.size+'"'),o.subtype&&(l+=' type="'+o.subtype+'"'),n.disabled()&&(l+=' disabled="disabled"'),e=o.icon,e&&"caret"!=e&&(e=r+"ico "+r+"i-"+o.icon),t=n._text,(e||t)&&(s='<div id="'+i+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+r+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.addClass("has-open")),'<div id="'+i+'" class="'+n.classes()+'"><input id="'+i+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+a+'" hidefocus="1"'+l+" />"+s+"</div>"}})}),i(Dt,[At],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.addClass("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(n){}},value:function(e){var t=this;return"undefined"!=typeof e&&t._rendered&&t.repaintColor(e),t._super(e)}})}),i(Pt,[Ct,nt],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,e.panel=new t(i).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),i(Et,[Pt,g],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(i?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(i){i.aria&&"down"==i.aria.key||i.control!=e||n.getParent(i.target,"."+e.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(e,i))}),delete e.settings.onclick,e._super()}})}),i(Mt,[],function(){function e(e){function o(e,o,r){var a,s,l,c,d,u;return a=0,s=0,l=0,e/=255,o/=255,r/=255,d=t(e,t(o,r)),u=n(e,n(o,r)),d==u?(l=d,{h:0,s:0,v:100*l}):(c=e==d?o-r:r==d?e-o:r-e,a=e==d?3:r==d?1:5,a=60*(a-c/(u-d)),s=(u-d)/u,l=u,{h:i(a),s:i(100*s),v:i(100*l)})}function r(e,o,r){var a,s,l,c;if(e=(parseInt(e,10)||0)%360,o=parseInt(o,10)/100,r=parseInt(r,10)/100,o=n(0,t(o,1)),r=n(0,t(r,1)),0===o)return void(u=h=p=i(255*r));switch(a=e/60,s=r*o,l=s*(1-Math.abs(a%2-1)),c=r-s,Math.floor(a)){case 0:u=s,h=l,p=0;break;case 1:u=l,h=s,p=0;break;case 2:u=0,h=s,p=l;break;case 3:u=0,h=l,p=s;break;case 4:u=l,h=0,p=s;break;case 5:u=s,h=0,p=l;break;default:u=h=p=0}u=i(255*(u+c)),h=i(255*(h+c)),p=i(255*(p+c))}function a(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(u)+e(h)+e(p)}function s(){return{r:u,g:h,b:p}}function l(){return o(u,h,p)}function c(e){var t;return"object"==typeof e?"r"in e?(u=e.r,h=e.g,p=e.b):"v"in e&&r(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(u=parseInt(t[1],10),h=parseInt(t[2],10),p=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(u=parseInt(t[1],16),h=parseInt(t[2],16),p=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(u=parseInt(t[1]+t[1],16),h=parseInt(t[2]+t[2],16),p=parseInt(t[3]+t[3],16)),u=0>u?0:u>255?255:u,h=0>h?0:h>255?255:h,p=0>p?0:p>255?255:p,d}var d=this,u=0,h=0,p=0;e&&c(e),d.toRgb=s,d.toHsv=l,d.toHex=a,d.parse=c}var t=Math.min,n=Math.max,i=Math.round;return e}),i(It,[kt,X,W,Mt],function(e,t,n,i){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var i,o,r=n.getPos(e);return i=t.pageX-r.x,o=t.pageY-r.y,i=Math.max(0,Math.min(i/e.clientWidth,1)),o=Math.max(0,Math.min(o/e.clientHeight,1)),{x:i,y:o}}function o(e,t){var o=(360-e.h)/360;n.css(c,{top:100*o+"%"}),t||n.css(u,{left:e.s+"%",top:100-e.v+"%"}),d.style.background=new i({s:100,v:100,h:e.h}).toHex(),h.color().parse({s:e.s,v:e.v,h:e.h})}function r(t){var n;n=e(d,t),s.s=100*n.x,s.v=100*(1-n.y),o(s),h.fire("change")}function a(t){var n;n=e(l,t),s=p.toHsv(),s.h=360*(1-n.y),o(s,!0),h.fire("change")}var s,l,c,d,u,h=this,p=h.color();l=h.getEl("h"),c=h.getEl("hp"),d=h.getEl("sv"),u=h.getEl("svp"),h._repaint=function(){s=p.toHsv(),o(s)},h._super(),h._svdraghelper=new t(h._id+"-sv",{start:r,drag:r}),h._hdraghelper=new t(h._id+"-h",{start:a,drag:a}),h._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new i),this._color},renderHtml:function(){function e(){var e,t,n,i,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=r.split(","),e=0,t=i.length-1;t>e;e++)a+='<div class="'+o+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+i[e]+",endColorstr="+i[e+1]+");-ms-"+n+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}var t,n=this,i=n._id,o=n.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",a="background: -ms-linear-gradient(top,"+r+");background: linear-gradient(to bottom,"+r+");";return t='<div id="'+i+'-h" class="'+o+'colorpicker-h" style="'+a+'">'+e()+'<div id="'+i+'-hp" class="'+o+'colorpicker-h-marker"></div></div>','<div id="'+i+'" class="'+n.classes()+'"><div id="'+i+'-sv" class="'+o+'colorpicker-sv"><div class="'+o+'colorpicker-overlay1"><div class="'+o+'colorpicker-overlay2"><div id="'+i+'-svp" class="'+o+'colorpicker-selector1"><div class="'+o+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),i(Nt,[kt],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,i=e.target;(n=i.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,n=this,i=n._data||[],o="",r=n.classPrefix;for(e=0,t=i.length;t>e;e++)o+=(e>0?'<div class="'+r+'divider" aria-hidden="true"> '+n.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(e==t-1?" "+r+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+n._id+"-"+e+'" aria-level="'+e+'">'+i[e].name+"</div>";return o||(o='<div class="'+r+'path-item"> </div>'),o}})}),i(Ft,[Nt,pt],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,i=t.activeEditor;return n.on("select",function(e){i.focus(),i.selection.select(this.data()[e.index].element),i.nodeChanged()}),i.on("nodeChange",function(t){for(var o=[],r=t.parents,a=r.length;a--;)if(1==r[a].nodeType&&!e(r[a])){var s=i.fire("ResolveName",{name:r[a].nodeName.toLowerCase(),target:r[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:r[a]}),s.isPropagationStopped())break}n.data(o)}),n._super()}})}),i(Lt,[K],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),i(jt,[K,Lt,c],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,i=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),i.each(function(i){var o,r=i.settings.label;r&&(o=new t(n.extend({items:{type:"label",id:i._id+"-l",text:r,flex:0,forId:i._id,disabled:i.disabled()}},e.settings.formItemDefaults)),o.type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex&&(i.settings.flex=1),e.replace(i,o),o.add(i))})},recalcLabels:function(){var e,t,n,i=this,o=0,r=[];if(i.settings.labelGapCalc!==!1)for(n="children"==i.settings.labelGapCalc?i.find("formitem"):i.items(),n.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;o=n>o?n:o,r.push(t)}),t=i.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=o+t},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),i(Ot,[jt],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),i(Rt,[At,c],function(e,t){return e.extend({init:function(e){var n,i,o,r=this,a=tinymce.activeEditor,s=a.settings;e.spellcheck=!1,o=s.file_picker_types||s.file_browser_callback_types,o&&(o=t.makeMap(o,/[, ]/)),(!o||o[e.filetype])&&(i=s.file_picker_callback,!i||o&&!o[e.filetype]?(i=s.file_browser_callback,!i||o&&!o[e.filetype]||(n=function(){i(r.getEl("inp").id,r.value(),e.filetype,window)})):n=function(){var n=r.fire("beforecall").meta;n=t.extend({filetype:e.filetype},n),i.call(a,function(e,t){r.value(e).fire("change",{meta:t})},r.value(),n)}),n&&(e.icon="browse",e.onaction=n),r._super(e)}})}),i(Ht,[xt],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),i(Bt,[xt],function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,c,d,u,h,p,f,v,m,g,b,y,_,w,x,$,k,C,T,S,A,D,P,E,M,I,N,F,L,j,O,R=[],H=Math.max,B=Math.min;for(i=e.items().filter(":visible"),o=e.layoutRect(),r=e._paddingBox,a=e.settings,h=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,("row-reversed"==h||"column-reverse"==h)&&(i=i.set(i.toArray().reverse()),h=h.split("-")[0]),"column"==h?(C="y",$="h",k="minH",T="maxH",A="innerH",S="top",D="deltaH",P="contentH",F="left",I="w",E="x",M="innerW",N="minW",L="right",j="deltaW",O="contentW"):(C="x",$="w",k="minW",T="maxW",A="innerW",S="left",D="deltaW",P="contentW",F="top",I="h",E="y",M="innerH",N="minH",L="bottom",j="deltaH",O="contentH"),u=o[A]-r[S]-r[S],x=d=0,t=0,n=i.length;n>t;t++)p=i[t],f=p.layoutRect(),v=p.settings,m=v.flex,u-=n-1>t?c:0,m>0&&(d+=m,f[T]&&R.push(p),f.flex=m),u-=f[k],g=r[F]+f[N]+r[L],g>x&&(x=g);if(_={},_[k]=0>u?o[k]-u+o[D]:o[A]-u+o[D],_[N]=x+o[j],_[P]=o[A]-u,_[O]=x,_.minW=B(_.minW,o.maxW),_.minH=B(_.minH,o.maxH),_.minW=H(_.minW,o.startMinWidth),_.minH=H(_.minH,o.startMinHeight),!o.autoResize||_.minW==o.minW&&_.minH==o.minH){for(y=u/d,t=0,n=R.length;n>t;t++)p=R[t],f=p.layoutRect(),b=f[T],g=f[k]+f.flex*y,g>b?(u-=f[T]-f[k],d-=f.flex,f.flex=0,f.maxFlexSize=b):f.maxFlexSize=0;for(y=u/d,w=r[S],_={},0===d&&("end"==l?w=u+r[S]:"center"==l?(w=Math.round(o[A]/2-(o[A]-u)/2)+r[S],0>w&&(w=r[S])):"justify"==l&&(w=r[S],c=Math.floor(u/(i.length-1)))),_[E]=r[F],t=0,n=i.length;n>t;t++)p=i[t],f=p.layoutRect(),g=f.maxFlexSize||f[k],"center"===s?_[E]=Math.round(o[M]/2-f[I]/2):"stretch"===s?(_[I]=H(f[N]||0,o[M]-r[F]-r[L]),_[E]=r[F]):"end"===s&&(_[E]=o[M]-f[I]-r.top),f.flex>0&&(g+=f.flex*y),_[$]=g,_[C]=w,p.layoutRect(_),p.recalc&&p.recalc(),w+=g+c}else if(_.w=_.minW,_.h=_.minH,e.layoutRect(_),this.recalc(e),null===e._lastRect){var q=e.parent();q&&(q._lastRect=null,q.recalc())}}})}),i(qt,[wt],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),i(Ut,[Y,kt,nt,c,pt,d],function(e,t,n,i,o,r){function a(e){function t(t,n){return function(){var i=this;e.on("nodeChange",function(o){var r=e.formatter,a=null;s(o.parents,function(e){return s(t,function(t){return n?r.matchNode(e,n,{value:t.value})&&(a=t.value):r.matchNode(e,t.value)&&(a=t.value),a?!1:void 0}),a?!1:void 0}),i.value(a)})}}function i(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function o(){function t(e){var n=[];return e?(s(e,function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=t(e.items);else{var a=e.format||"custom"+i++;e.format||(e.name=a,o.push(e)),r.format=a,r.cmd=e.cmd}n.push(r)}),n):void 0}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?r.concat(e.settings.style_formats):r:e.settings.style_formats||r)}var i=0,o=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){s(o,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),i=t.settings.cmd,i&&t.active(e.queryCommandState(i))})},onclick:function(){this.settings.format&&l(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function r(t){return function(){function n(){return e.undoManager?e.undoManager[t]():!1}var i=this;t="redo"==t?"hasRedo":"hasUndo",i.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){i.disabled(!n())})}}function a(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function l(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var c;c=o(),s({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})},onclick:function(){l(n)}})}),s({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),s({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:r("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:r("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:a,cmd:"mceToggleVisualAid"}),s({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:c}),e.addButton("formatselect",function(){var n=[],o=i(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return s(o,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:o[0][0],values:n,fixedWidth:!0,onselect:l,onPostRender:t(n)}}),e.addButton("fontselect",function(){var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",o=[],r=i(e.settings.font_formats||n);return s(r,function(e){o.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:o,fixedWidth:!0,onPostRender:t(o,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var n=[],i="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=e.settings.fontsize_formats||i;return s(o.split(" "),function(e){var t=e,i=e,o=e.split("=");o.length>1&&(t=o[0],i=o[1]),n.push({text:t,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:t(n,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:c})}var s=i.each;o.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),a(t.editor)}),e.translate=function(e){return o.translate(e)},t.tooltips=!r.iOS}),i(zt,[xt],function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,c,d,u,h,p,f,v,m,g,b,y,_,w,x,$,k,C,T,S,A,D=e.settings,P=[],E=[];D=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),n=D.columns||Math.ceil(Math.sqrt(i.length)),t=Math.ceil(i.length/n),g=D.spacingH||D.spacing||0,b=D.spacingV||D.spacing||0,y=D.alignH||D.align,_=D.alignV||D.align,v=e._paddingBox,S="reverseRows"in D?D.reverseRows:e.isRtl(),y&&"string"==typeof y&&(y=[y]),_&&"string"==typeof _&&(_=[_]);for(d=0;n>d;d++)P.push(0);for(u=0;t>u;u++)E.push(0);for(u=0;t>u;u++)for(d=0;n>d&&(c=i[u*n+d]);d++)l=c.layoutRect(),$=l.minW,k=l.minH,P[d]=$>P[d]?$:P[d],E[u]=k>E[u]?k:E[u];for(C=o.innerW-v.left-v.right,w=0,d=0;n>d;d++)w+=P[d]+(d>0?g:0),C-=(d>0?g:0)+P[d];for(T=o.innerH-v.top-v.bottom,x=0,u=0;t>u;u++)x+=E[u]+(u>0?b:0),T-=(u>0?b:0)+E[u];if(w+=v.left+v.right,x+=v.top+v.bottom,s={},s.minW=w+(o.w-o.innerW),s.minH=x+(o.h-o.innerH),s.contentW=s.minW-o.deltaW,s.contentH=s.minH-o.deltaH,s.minW=Math.min(s.minW,o.maxW),s.minH=Math.min(s.minH,o.maxH),s.minW=Math.max(s.minW,o.startMinWidth),s.minH=Math.max(s.minH,o.startMinHeight),!o.autoResize||s.minW==o.minW&&s.minH==o.minH){o.autoResize&&(s=e.layoutRect(s),s.contentW=s.minW-o.deltaW,s.contentH=s.minH-o.deltaH);var M;M="start"==D.packV?0:T>0?Math.floor(T/t):0;var I=0,N=D.flexWidths;if(N)for(d=0;d<N.length;d++)I+=N[d];else I=n;var F=C/I;for(d=0;n>d;d++)P[d]+=N?N[d]*F:F;for(p=v.top,u=0;t>u;u++){for(h=v.left,a=E[u]+M,d=0;n>d&&(A=S?u*n+n-1-d:u*n+d,c=i[A]);d++)f=c.settings,l=c.layoutRect(),r=Math.max(P[d],l.startMinWidth),l.x=h,l.y=p,m=f.alignH||(y?y[d]||y[0]:null),"center"==m?l.x=h+r/2-l.w/2:"right"==m?l.x=h+r-l.w:"stretch"==m&&(l.w=r),m=f.alignV||(_?_[d]||_[0]:null),"center"==m?l.y=p+a/2-l.h/2:"bottom"==m?l.y=p+a-l.h:"stretch"==m&&(l.h=a),c.layoutRect(l),h+=r+g,c.recalc&&c.recalc();p+=a+b}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var L=e.parent();L&&(L._lastRect=null,L.recalc())}}})}),i(Vt,[kt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,t&&t()):setTimeout(function(){n.html(e)},0),this}})}),i(Wt,[kt,W],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var i=t.getSize(e.getEl());i.width>n.maxW&&(n.minW=n.maxW,e.addClass("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}),i(Yt,[K],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e._super()}})}),i(Jt,[Yt],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),i(Gt,[Ct,J,Jt],function(e,t,n){function i(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var o=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e,n=this,i=n.settings;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||(e=i.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type),n.aria("expanded","show"==e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e,t=this,i=t._id,o=t.classPrefix,r=t.settings.icon;return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",r=t.settings.icon?o+"ico "+o+"i-"+r:"",t.aria("role",t.parent()instanceof n?"menuitem":"button"),'<div id="'+i+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+i+'"><button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+"<span>"+(t._text?(r?" ":"")+t.encode(t._text):"")+'</span> <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&i(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n,i=t.control,r=e.parent();i&&r&&i instanceof o&&i.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=i&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(i.focus(),i.showMenu()))}),e._super()},text:function(e){var t,n,i=this;if(i._rendered)for(n=i.getEl("open").getElementsByTagName("span"),t=0;t<n.length;t++)n[t].innerHTML=(i.settings.icon&&e?" ":"")+i.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return o}),i(Kt,[Gt],function(e){return e.extend({init:function(e){function t(n){for(var r=0;r<n.length;r++){if(i=n[r].selected||e.value===n[r].value){o=o||n[r].text,a._value=n[r].value;break}n[r].menu&&t(n[r].menu)}}var n,i,o,r,a=this;a._values=n=e.values,n&&("undefined"!=typeof e.value&&t(n),!i&&n.length>0&&(o=n[0].text,a._value=n[0].value),e.menu=n),e.text=e.text||o||n[0].text,a._super(e),a.addClass("listbox"),a.on("select",function(t){var n=t.control;r&&(t.lastControl=r),e.multiple?n.active(!n.active()):a.value(t.control.settings.value),r=n})},value:function(e){function t(e,n){e.items().each(function(e){i=e.value()===n,i&&(o=o||e.text()),e.active(i),e.menu&&t(e.menu,n)})}function n(t){for(var r=0;r<t.length;r++)i=t[r].value==e,i&&(o=o||t[r].text),t[r].active=i,t[r].menu&&n(t[r].menu)}var i,o,r,a=this;return"undefined"!=typeof e&&(a.menu?t(a.menu,e):(r=a.settings.menu,n(r)),a.text(o||this.settings.text)),a._super(e)}})}),i(Xt,[kt,J,d],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()
}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,i=n.settings,o=n.parent();if(o.items().each(function(e){e!==n&&e.hideMenu()}),i.menu){e=n.menu,e?e.show():(e=i.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",o.settings.itemDefaults&&(e.itemDefaults=o.settings.itemDefaults),e=n.menu=t.create(e).parent(n).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.removeClass("selected")}),e.submenu=!0),e._parentMenu=o,e.addClass("menu-sub");var r=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),r),e.rel=r,r="menu-sub-"+r,e.removeClass(e._lastRel),e.addClass(r),e._lastRel=r,n.addClass("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,i=e.settings,o=e.classPrefix,r=e.encode(e._text),a=e.settings.icon,s="",l=i.shortcut;return a&&e.parent().addClass("menu-has-icons"),i.image&&(a="none",s=" style=\"background-image: url('"+i.image+"')\""),l&&n.mac&&(l=l.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),l=l.replace(/ctrl\+/i,"&#x2318;"),l=l.replace(/alt\+/i,"&#x2325;"),l=l.replace(/shift\+/i,"&#x21E7;")),a=o+"ico "+o+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==r?'<i class="'+a+'"'+s+"></i> ":"")+("-"!==r?'<span id="'+t+'-text" class="'+o+'text">'+r+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+o+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+o+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&i.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),e.parent().hideAll()))}),e._super(),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),i(Zt,[nt,Xt,c],function(e,t,n){var i=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var i=e.items,o=i.length;o--;)i[o]=n.extend({},e.itemDefaults,i[o]);t._super(e),t.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return i}),i(Qt,[St],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),i(en,[kt,X],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),i(tn,[kt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),i(nn,[Gt,W],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,n,i=this,o=i.getEl(),r=i.layoutRect();return i._super(),e=o.firstChild,n=o.lastChild,t.css(e,{width:r.w-t.getSize(n).width,height:r.h-2}),t.css(n,{height:r.h-2}),i},activeMenu:function(e){var n=this;t.toggleClass(n.getEl().lastChild,n.classPrefix+"active",e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o=t.settings.icon;return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=t.settings.icon?i+"ico "+i+"i-"+o:"",'<div id="'+n+'" class="'+t.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?" ":"")+t._text:"")+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(o?" ":"")+t._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void t.call(this,e);n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),i(on,[qt],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),i(rn,[Q,W],function(e,t){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t.removeClass(n,this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t.addClass(n,this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var r=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",r),n+='<div id="'+r+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==t.target&&e.activateTab(i)})},initLayoutRect:function(){var e,n,i,o=this;n=t.getSize(o.getEl("head")).width,n=0>n?0:n,i=0,o.items().each(function(e){n=Math.max(n,e.layoutRect().minW),i=Math.max(i,e.layoutRect().minH)}),o.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=i,e.layoutRect({x:0,y:0,w:n,h:i})});var r=t.getSize(o.getEl("head")).height;return o.settings.minWidth=n,o.settings.minHeight=i+r,e=o._super(),e.deltaH+=r,e.innerH=e.h-e.deltaH,e}})}),i(an,[kt,W],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e,t,n,i,o=this,r=0,a=0;e=o.getEl().style,t=o._layoutRect,i=o._lastRepaintRect||{};var s=document;return!o.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=o._borderBox,r=n.left+n.right+8,a=n.top+n.bottom+(o.settings.multiline?8:0),t.x!==i.x&&(e.left=t.x+"px",i.x=t.x),t.y!==i.y&&(e.top=t.y+"px",i.y=t.y),t.w!==i.w&&(e.width=t.w-r+"px",i.w=t.w),t.h!==i.h&&(e.height=t.h-a+"px",i.h=t.h),o._lastRepaintRect=i,o.fire("repaint",{},!1),o},renderHtml:function(){var e=this,t=e._id,n=e.settings,i=e.encode(e._value,!1),o="";return"spellcheck"in n&&(o+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(o+=' maxlength="'+n.maxLength+'"'),n.size&&(o+=' size="'+n.size+'"'),n.subtype&&(o+=' type="'+n.subtype+'"'),e.disabled()&&(o+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+o+">"+i+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+i+'" hidefocus="1"'+o+" />"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),i(sn,[W,Y],function(e,t){return function(n,i){var o,r=this,a=t.classPrefix;r.show=function(t){return r.hide(),o=!0,window.setTimeout(function(){o&&n.appendChild(e.createFragment('<div class="'+a+"throbber"+(i?" "+a+"throbber-inline":"")+'"></div>'))},t||0),r},r.hide=function(){var e=n.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),o=!1,r}}}),r([s,l,c,d,u,h,p,f,v,g,b,y,x,$,k,C,T,S,A,D,P,E,M,I,N,L,j,O,R,H,B,q,U,z,V,W,Y,J,G,K,X,Z,Q,et,tt,nt,it,ot,rt,at,st,lt,ct,dt,ut,ht,pt,ft,vt,mt,gt,bt,yt,_t,wt,xt,$t,kt,Ct,Tt,St,At,Dt,Pt,Et,Mt,It,Nt,Ft,Lt,jt,Ot,Rt,Ht,Bt,qt,Ut,zt,Vt,Wt,Yt,Jt,Gt,Kt,Xt,Zt,Qt,en,tn,nn,on,rn,an,sn])}(this),define("tinymce",function(e){return function(){var t;return t||e.tinymce}}(this)),define("content/category-sections/merchandising/navigation/views/nav-item-create-edit-view",["backbone","../templates/nav-item-create-edit-tpl","./item-custom-list-view","./item-custom-html-view","./item-price-range-view","./item-collections-view","./item-products-view","./item-categories-view","./item-upcoming-view","tinymce","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c,d){var u=e.View.extend({template:t,initialize:function(){n.parent=this,i.parent=this,o.parent=this,r.parent=this,a.parent=this,s.parent=this,l.parent=this},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.applyTinymce(),this.handleContentTypeChange(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick","click #delete-btn":"handleDeleteBtnClick","change #f-content-type":"handleContentTypeChange"},cacheElem:function(){this.$title=this.$el.find("#title"),this.$sectionActive=this.$el.find("#section-active"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change"),this.$navBtns=this.$el.find("#f-nav-item-btn-panel"),this.$navType=this.$el.find("#f-content-type"),this.$typeArea=this.$el.find("#f-content-type-area"),this.$secCategories=this.$el.find("#f-item-section-categories"),this.$secProducts=this.$el.find("#f-item-section-products"),this.$secList=this.$el.find("#f-item-section-customlist"),this.$secCollections=this.$el.find("#f-item-section-collections"),this.$secPrices=this.$el.find("#f-item-section-prices"),this.$secHTML=this.$el.find("#f-item-section-html"),this.$secUpcoming=this.$el.find("#f-item-section-upcoming"),this.$minProdError=this.$el.find("#min-products-error"),this.$minCatError=this.$el.find("#min-cats-error")},handleCancelBtnClick:function(){d.trigger("form:cancel",this.parent.hideCreateEdit())},handleDeleteBtnClick:function(){d.trigger("form:delete",this.collection.remove.bind(this.collection,this.model)),d.trigger("form:cancel",this.parent.showHome.bind(self.parent))},handleDelete:function(){d.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},showMinProdError:function(){var e=this;this.$minProdError.fadeIn(200),setTimeout(function(){e.$minProdError.fadeOut(200)},1e4)},showMinCatError:function(){var e=this;this.$minCatError.fadeIn(200),setTimeout(function(){e.$minCatError.fadeOut(200)},1e4)},handleSaveBtnClick:function(){var e=this,t=e.$navType.find("option:selected").val();return"Products"!=t||a.minSelected(1)?"Categories"!=t||s.minSelected(1)?void(this.$createEditForm.valid()?(this.model.set({title:this.$title.val().trim(),sectionActive:this.$sectionActive.is(":checked"),imgActive:this.$imgActive.is(":checked"),imgUrl:this.$promotionalImg.prop("src"),sectionDescription:c.activeEditor.getContent()}),SiteNavCollection.get(this.model)||(this.model.set("id",-1),SiteNavCollection.add(this.model)),d.trigger("form:save",this.$tip),this.parent.hideCreateEdit()):d.trigger("form:invalid",this.$tip)):(e.showMinCatError(),!1):(e.showMinProdError(),!1)},handleContentTypeChange:function(){var e,t=this,c=this.$navType.find("option:selected").val();switch(this.$typeArea.empty(),c){case"Categories":e=s;break;case"Collections":e=r;break;case"Custom HTML":e=i;break;case"Custom List":e=n;break;case"Price Ranges":e=o;break;case"Products":e=a;break;case"Upcoming Occasions":e=l}0==e||(e.model=t.model,e.parent=this,this.$typeArea.append(e.render().el),this.validateForm())},handleFileUpload:function(){var e=this;d.trigger("form:image-upload",{cb:function(t){e.$promotionalImg.prop("src",t),e.$previewImg.is(":hidden")&&e.$previewImg.fadeIn(200)},active:e.$promotionalImg.prop("src"),name:"Promotional"})},applyTinymce:function(){c.remove(),setTimeout(function(){c.init({setup:function(e){e.on("change",function(){d.trigger("form:editing")})},selector:"textarea#section-description",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{title:"required","f-showMoreLabel":"required","f-showMoreLink":"required"}}),jQuery.validator.addClassRules({"f-showMoreLabel":{required:!0},"f-showMoreLink":{required:!0}})},togglePreviewImg:function(){this.$imgActive.is(":checked")?(this.$previewImg.fadeIn(200),this.$previewImgBtn.fadeIn(200)):(this.$previewImg.fadeOut(200),this.$previewImgBtn.fadeOut(200))}});return new u}),define("content/category-sections/merchandising/navigation/templates/nav-item-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<li class="f-nav-item f-nav-col-'+(null==(__t=columns)?"":__t)+'">\r\n	<div class="f-nav-header">'+(null==(__t=contentLabel)?"":__t)+'</div>\r\n\r\n	<div class="f-nav-content">'+(null==(__t=navContent)?"":__t)+'</div>\r\n	\r\n	<div style="clear:both;"></div>\r\n	   \r\n</li>\r\n\r\n';return __p}}),define("content/category-sections/merchandising/navigation/views/nav-item-view",["backbone","../templates/nav-item-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){var t=this;t.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this},cacheElem:function(){this.$edit=this.$el.find(".icon-edit")},events:{click:"handleEdit","click .icon-trash":"handleDelete"},handleEdit:function(){this.parent.handleEdit(this.model)}});return n}),define("content/category-sections/merchandising/navigation/views/nav-item-add-view",["backbone","../templates/nav-item-create-edit-tpl","./item-custom-list-view","./item-custom-html-view","./item-price-range-view","./item-collections-view","./item-products-view","./item-categories-view","./item-upcoming-view","tinymce","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c,d){var u=e.View.extend({template:t,initialize:function(){n.parent=this,i.parent=this,o.parent=this,r.parent=this,a.parent=this,s.parent=this,l.parent=this},render:function(){return this.setElement(this.template({contentType:""})),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.validateForm(),this.applyTinymce(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$title=this.$el.find("#title"),this.$sectionActive=this.$el.find("#section-active"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change"),this.$navType=this.$el.find("#f-content-type"),this.$typeArea=this.$el.find("#f-content-type-area"),this.$secCategories=this.$el.find("#f-item-section-categories"),this.$secProducts=this.$el.find("#f-item-section-products"),this.$secList=this.$el.find("#f-item-section-customlist"),this.$secCollections=this.$el.find("#f-item-section-collections"),this.$secPrices=this.$el.find("#f-item-section-prices"),this.$secHTML=this.$el.find("#f-item-section-html"),this.$secUpcoming=this.$el.find("#f-item-section-upcoming")},handleCancelBtnClick:function(){d.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveBtnClick:function(){this.$createEditForm.valid()?(this.model.set({title:this.$title.val().trim(),sectionActive:this.$sectionActive.is(":checked"),imgActive:this.$imgActive.is(":checked"),imgUrl:this.$promotionalImg.prop("src"),sectionDescription:c.activeEditor.getContent()}),SiteNavCollection.get(this.model)||(this.model.set("id",-1),SiteNavCollection.add(this.model)),d.trigger("form:save",this.$tip),this.parent.showHome()):d.trigger("form:invalid",this.$tip)},handleFileUpload:function(){var e=this;d.trigger("form:image-upload",{cb:function(t){e.$promotionalImg.prop("src",t),e.$previewImg.is(":hidden")&&e.$previewImg.fadeIn(200)},active:e.$promotionalImg.prop("src"),name:"Promotional"})},applyTinymce:function(){c.remove(),setTimeout(function(){c.init({setup:function(e){e.on("change",function(){d.trigger("form:editing")})},selector:"textarea#section-description",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})},togglePreviewImg:function(){this.$imgActive.is(":checked")?(this.$previewImg.fadeIn(200),this.$previewImgBtn.fadeIn(200)):(this.$previewImg.fadeOut(200),this.$previewImgBtn.fadeOut(200))}});return new u}),define("content/category-sections/merchandising/navigation/views/site-nav-create-edit-view",["backbone","../templates/site-nav-create-edit-tpl","components/featured-occasions/collections/all-occasions-collection","components/featured-product/collections/featured-product-collection","./nav-item-create-edit-view","./nav-item-view","./nav-item-add-view","content/shared/collections/blank-collection","tinymce","global-events","jquery","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c){var d=e.View.extend({template:t,tagName:"div",id:"f-new-create-edit-id",initialize:function(){o.parent=this},render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.validateForm(),this.collection=new s(this.model.get("entries")),this.addAllItems(),this.sortNavItems(),this.toggleDropdown(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick","change #f-content-type":"handleContentTypeChange","change #f-dropdown":"toggleDropdown","click .f-add-nav-item button":"handleAdd","click #reset-btn":"handleReset","change input":"triggerChange","change select":"triggerChange"},triggerChange:function(){c.trigger("form:editing")},cacheElem:function(){this.$list=this.$el.find("#f-item-list"),this.$title=this.$el.find("#title"),this.$sectionActive=this.$el.find("#section-active"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change"),this.$tabs=this.$el.find("#tabs"),this.$editArea=this.$el.find("#f-item-edit-area"),this.$dropdown=this.$el.find("#f-dropdown"),this.$menuLink=this.$el.find("#f-menuLink"),this.$menuLinkWrap=this.$el.find("#f-menu-link-wrap")},handleCancelBtnClick:function(){c.trigger("form:cancel",this.parent.showHome.bind(this.parent))},addItem:function(e){var t=new r({model:e,parent:this});this.$list.append(t.render().el)},addAllItems:function(){var e=this,t=(this.collection.length,0);if(this.$list.empty(),this.collection.each(function(n){e.addItem(n),t+=n.get("columns")}),4>t)for(var n=4-t,i=0;n>i;i++)e.addBlankItem()},toggleDropdown:function(){this.$dropdown.is(":checked")?(this.$tabs.removeClass("hidden"),this.$editArea.removeClass("hidden"),this.$menuLinkWrap.addClass("hidden")):(this.$tabs.addClass("hidden"),this.$editArea.addClass("hidden"),this.$menuLinkWrap.removeClass("hidden"))},addBlankItem:function(){this.$list.append('<div class="f-nav-item f-nav-col-1 f-add-nav-item"><button type="button" class="btn btn-other"><div class="icon icon-add"></div>Add</button></div>'),this.handleDividerInsert()},handleDividerInsert:function(){setTimeout(function(){$("#Menu-items").height()},50)},sortNavItems:function(){this.$list.sortable()},sortNavItems:function(){var e=this;e.$list.sortable({})},handleSaveBtnClick:function(){this.$createEditForm.valid()?(this.model.set({title:this.$title.val().trim(),type:"Custom",sectionActive:this.$sectionActive.is(":checked"),imgActive:this.$imgActive.is(":checked"),imgUrl:this.$promotionalImg.prop("src"),sectionDescription:l.activeEditor.getContent()}),SiteNavCollection.get(this.model)||(this.model.set("id",-1),SiteNavCollection.add(this.model)),c.trigger("form:save",this.$tip),this.parent.showHome()):c.trigger("form:invalid",this.$tip)},handleReset:function(){c.trigger("modal:custom",{template:{title:"Reset Settings",text:"Are you sure? This will reset all applicable fields to their default values."},confirmFn:function(){}})},handleAdd:function(){var e=this;e.$editArea.is(":empty")&&e.$editArea.append(a.render().el)},handleEdit:function(e){var t=this;t.$editArea.empty(),e?(o.model=e,o.parent=t,t.$editArea.append(o.render().el)):(o.model=newNav({columns:"1",showMore:!1}),o.parent=t,t.$editArea.append(o.render().el))},hideCreateEdit:function(){this.$editArea.empty()},newNav:function(e){return this.collection.add(e)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})}});return new d}),define("content/category-sections/merchandising/navigation/templates/section-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td class="left-align f-federation f-federated">'+(null==(__t=title)?"":__t)+" ","Teleflora"===type&&(__p+=' <i class="icon icon-tool-tip icon-tool-tip-federated" title="Some elements of this menu come from a Teleflora/group level."></i> '),__p+=' </td> \r\n	<td class="left-align">'+(null==(__t=type)?"":__t)+'</td>\r\n	<td class="center-align">\r\n		<input '+(null==(__t=sectionActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="section-active-"+sequence)?"":__t)+'" name="'+(null==(__t="section-active-"+sequence)?"":__t)+'" class="on-off-switch" />\r\n        <label for="'+(null==(__t="section-active-"+sequence)?"":__t)+'" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>\r\n	</td>	\r\n	<td class="left-align"><button type="button" class="icon icon-btn icon-edit icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/merchandising/navigation/views/section-view",["backbone","../templates/section-tpl","../collections/site-nav-collection","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){var t=this;t.parent=e.parent,t.listenTo(n,"remove",function(e){e===t.model&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this},events:{"click .icon-edit":"handleEdit","click .icon-trash":"handleDelete"},handleEdit:function(){this.parent.handleEdit(this.model)}});return i}),define("content/category-sections/merchandising/navigation/views/site-nav-home-view",["backbone","../templates/site-nav-home-tpl","../models/site-nav-model","../collections/site-nav-collection","./site-nav-create-edit-view","./section-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"p-site-nav",template:t,initialize:function(){this.listenTo(i,"resequenced",this.addAllSections)},render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template(i.toJSON())),e.delegateEvents(),e.cacheElem(),i.resequence(),e.applySortable(),e.applyToolTips()}),this},cacheElem:function(){this.$displayedContent=this.$el.find("#f-displayed-content"),this.$sectionList=this.$el.find("#section-list"),this.$displayedContentContainer=this.$el.find("#displayed-content-container"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #new-btn":"handleNewBtnClick","click #save-btn":"handleSave"},addSection:function(e){var t=new r({model:e,parent:this});this.$sectionList.append(t.render().el)},addAllSections:function(){this.$sectionList.empty(),i.each(this.addSection,this)},handleNewBtnClick:function(){var e=new n;e.set("entries",""),this.parent.showCreateEdit(e)},handleEdit:function(e){this.parent.showCreateEdit(e)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#section-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionList.children().each(function(e){var t=$(this).data("id");i.where({id:t})[0].set("sequence",e+1)}),i.changeSort("sequence"),i.sort(),i.trigger("resequenced"),a.trigger("form:editing")}})},handleSave:function(){a.trigger("form:save",this.$tip)},applyToolTips:function(){var e=this;e.$el.find(".icon-tool-tip").tooltip()}});return new s}),define("content/category-sections/merchandising/navigation/views/site-nav-view",["backbone","./site-nav-home-view","./site-nav-create-edit-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;i.trigger("form:cancel",function(){n.model=e,t.replaceVisible(n)})}});return new o}),define("content/category-sections/merchandising/product-management/templates/products-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Products</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				<button type="button" id="import-btn" class="btn btn-submit"><i class="icon icon-add icon-lg"></i>Import</button>\r\n				<a id="new-btn" href="'+(null==(__t=baseUrl)?"":__t)+'create"><button type="button" class="btn btn-submit"><i class="icon icon-add icon-lg"></i>New Product</button></a>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		From this section you can manage all of the products on your site. You can modify existing products from the list below or create new products using the "new product" button above.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<div class="col-3">\r\n		<label for="selectCategory">Select Category</label>\r\n		<div class="select-container">\r\n      <select id="selectCategory" name="selectCategory">\r\n      	<option selected hidden disabled value="">All Categories</option>\r\n      	<option value="">All Categories</option>\r\n        ';for(var i=0,j=allOccasions.length;j>i;++i)__p+='\r\n        	<option value="'+(null==(__t=allOccasions[i].id)?"":__t)+'">'+(null==(__t=allOccasions[i].occasion+" | ID "+allOccasions[i].id)?"":__t)+"</option>\r\n        ";__p+='\r\n	    </select>\r\n		</div>\r\n	</div>\r\n	<div class="col-5">\r\n		<label for="productSearch">Product Search</label>\r\n		<div class="search-container">\r\n			<input type="text" id="productSearch" name="productSearch" placeholder="Enter the Product Name or Number">\r\n		</div>\r\n	</div>\r\n	<div class="col-4 form-section pull-right">\r\n		<button type="button" id="filter-view" class="icon icon-btn icon-colored icon-filter icon-lg pull-right y-space-top-xl icon-3x"></button>\r\n		<div id="product-search-checkboxes" class="search-filters">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<h3 class="pull-left no-margin product-filter-header">Filter by:</h3>\r\n					<button type="button" id="close-filter-view" class="icon icon-btn icon-x icon-lg pull-right"></button>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row">\r\n				<div class="clearfix">\r\n					<div class="col-12">\r\n						<div class="row">\r\n							<div class="col-12">\r\n								<div class="panel-title product-filter-title">Type</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-6 center-align">\r\n						<label for="productCheckbox-Custom">Custom</label>\r\n						<input class="fill-container-width" data-key="type" data-value="Custom" type="checkbox" checked id="productCheckbox-Custom">\r\n					</div>\r\n					<div class="col-6 center-align">\r\n						<label for="productCheckbox-Teleflora">Teleflora</label>\r\n						<input class="fill-container-width" data-key="type" data-value="Teleflora" type="checkbox" checked id="productCheckbox-Teleflora">\r\n					</div>\r\n				</div>\r\n			</div>	\r\n			<div class="row">\r\n				<div class="clearfix">\r\n					<div class="col-12">\r\n						<div class="row">\r\n							<div class="col-12">\r\n								<div class="panel-title product-filter-title">Status</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-6 center-align">\r\n						<label for="productCheckbox-Active">Active</label>\r\n						<input class="fill-container-width" data-key="type" data-value="Active" type="checkbox" checked id="productCheckbox-Active">\r\n					</div>\r\n					<div class="col-6 center-align">\r\n						<label for="productCheckbox-Inactive">Inactive</label>\r\n						<input class="fill-container-width" data-key="type" data-value="Inactive" type="checkbox" checked id="productCheckbox-Inactive">\r\n					</div>\r\n				</div>\r\n			</div>	\r\n\r\n			<div class="row">\r\n				<div class="clearfix">\r\n					<div class="col-12">\r\n						<div class="row">\r\n							<div class="col-12">\r\n								<div class="panel-title product-filter-title">Subscription Products</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-6 center-align">\r\n						<label for="productCheckbox-Subscription">Sub</label>\r\n						<input class="fill-container-width" data-key="type" data-value="Subscription" type="checkbox" checked id="productCheckbox-Subscription">\r\n					</div>\r\n					<div class="col-6 center-align">\r\n						<label for="productCheckbox-Nonsubscription">Non-Sub</label>\r\n						<input class="fill-container-width" data-key="type" data-value="Nonsubscription" type="checkbox" checked id="productCheckbox-Nonsubscription">\r\n					</div>\r\n				</div>\r\n			</div>	\r\n\r\n		</div>		\r\n	</div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<table id="product-table" class="table alternate">\r\n			<thead>\r\n				<tr>\r\n					<th class="clickable th-3-20 left-align">Name <i class="icon left-offset-xs"></i></th>\r\n					<th class="th-2-20">Image</th>\r\n					<th class="clickable th-2-20">Number <i class="icon left-offset-xs"></i></th>\r\n					<th class="clickable th-3-20">Product Type <i class="icon left-offset-xs"></i></th>\r\n					<th class="clickable th-2-20">My Price <i class="icon left-offset-xs"></i></th>\r\n					<th class="clickable th-2-20">Holiday Price <i class="icon left-offset-xs"></i></th>\r\n					<th class=\'clickable th-2-20\'>Active <i class="icon left-offset-xs"></i></th>\r\n					<th class="th-1-20">Edit</th>\r\n				</tr>\r\n			</thead>\r\n			<tbody id="product-list"></tbody>\r\n		</table>\r\n	</div>\r\n</div>'
}return __p}}),define("content/category-sections/merchandising/product-management/templates/product-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\n	<td class="left-align">'+(null==(__t=name)?"":__t)+'</td>\n  <td>\n    <img class="fit-container" src="'+(null==(__t=imgA1)?"":__t)+'">\n  </td>\n	<td>'+(null==(__t=number)?"":__t)+"</td>\n  <td>"+(null==(__t=type)?"":__t)+'</td>\n  <td>\n    <div class="dollar-container form-section">\n      <input type="text" id="f-myPrice-'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t="Teleflora"===type?"f-myPrice-Teleflora":"f-myPrice")?"":__t)+'" class="'+(null==(__t="Teleflora"===type?"f-myPrice-Teleflora":"f-myPrice")?"":__t)+'" value="'+(null==(__t=myPrice)?"":__t)+'">\n    </div>\n  </td>\n  <td>\n    <div class="dollar-container form-section">\n      <input type="text" id="f-holidayPrice-'+(null==(__t=id)?"":__t)+'" name="f-holidayPrice" class="f-holidayPrice" value="'+(null==(__t=holidayPrice)?"":__t)+'">\n    </div>\n  </td>\n  <td>\n    <div class="v-center">\n      <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="active-'+(null==(__t=id)?"":__t)+'" name="active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\n      <label for="active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\n        <div class="on-off-switch-state">on</div>\n      </label>\n    </div>\n  </td>\n  <td>\n    <a class="edit-link" href="'+(null==(__t=baseUrl+"edit/"+id)?"":__t)+'">\n      <button class="icon icon-edit icon-btn icon-2x"></button>\n    </a>\n  </td>\n</tr>\n';return __p}}),define("content/category-sections/merchandising/product-management/views/product-view",["backbone","../templates/product-tpl","settings","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){var e=this.model.toJSON();return e.baseUrl=n.productManagementBaseUrl,this.setElement(this.template(e)),this.cacheElem(),this.delegateEvents(),this},events:{"click .edit-link":"handleEdit","change input.on-off-switch":"toggleActive",'change input[name="f-myPrice"]':"changeMyPrice",'change input[name="f-holidayPrice"]':"changeHolidayPrice"},cacheElem:function(){this.$active=this.$el.find("active-"+this.model.get("id")),this.$myPrice=this.$el.find('input[name="f-myPrice"]'),this.$holidayPrice=this.$el.find('input[name="f-holidayPrice"]'),this.$myPriceForm=this.$el.find("myPrice-form-"+this.model.get("id")),this.$holidayPriceForm=this.$el.find("holidayPrice-form-"+this.model.get("id"))},handleEdit:function(e){e.preventDefault(),e.stopPropagation(),i.trigger("form:cancel:url",e.currentTarget.href)},toggleActive:function(){i.trigger("form:editing"),this.model.set("active",this.$active.is("checked"))},changeMyPrice:function(){i.trigger("form:editing"),this.model.set("myPrice",this.$myPrice.val().trim())},changeHolidayPrice:function(){i.trigger("form:editing"),this.model.set("holidayPrice",this.$holidayPrice.val().trim())}});return o}),function(e,t,n){!function(e){"function"==typeof define&&define.amd?define("datatables",["jquery"],e):"object"==typeof exports?e(require("jquery")):jQuery&&!jQuery.fn.dataTable&&e(jQuery)}(function(i){function o(e){var t,n,r="a aa ai ao as b fn i m o s ",a={};i.each(e,function(i){t=i.match(/^([^A-Z]+?)([A-Z])/),t&&-1!==r.indexOf(t[1]+" ")&&(n=i.replace(t[0],t[2].toLowerCase()),a[n]=i,"o"===t[1]&&o(e[i]))}),e._hungarianMap=a}function r(e,t,a){e._hungarianMap||o(e);var s;i.each(t,function(o){s=e._hungarianMap[o],s===n||!a&&t[s]!==n||("o"===s.charAt(0)?(t[s]||(t[s]={}),i.extend(!0,t[s],t[o]),r(e[s],t[s],a)):t[s]=t[o])})}function a(e){var t=Jt.defaults.oLanguage,n=e.sZeroRecords;!e.sEmptyTable&&n&&"No data available in table"===t.sEmptyTable&&jt(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&n&&"Loading..."===t.sLoadingRecords&&jt(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands);var i=e.sDecimal;i&&Wt(i)}function s(e){bn(e,"ordering","bSort"),bn(e,"orderMulti","bSortMulti"),bn(e,"orderClasses","bSortClasses"),bn(e,"orderCellsTop","bSortCellsTop"),bn(e,"order","aaSorting"),bn(e,"orderFixed","aaSortingFixed"),bn(e,"paging","bPaginate"),bn(e,"pagingType","sPaginationType"),bn(e,"pageLength","iDisplayLength"),bn(e,"searching","bFilter");var t=e.aoSearchCols;if(t)for(var n=0,i=t.length;i>n;n++)t[n]&&r(Jt.models.oSearch,t[n])}function l(e){bn(e,"orderable","bSortable"),bn(e,"orderData","aDataSort"),bn(e,"orderSequence","asSorting"),bn(e,"orderDataType","sortDataType")}function c(e){var t=e.oBrowser,n=i("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(i("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(i('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),o=n.find(".test");t.bScrollOversize=100===o[0].offsetWidth,t.bScrollbarLeft=1!==o.offset().left,n.remove()}function d(e,t,i,o,r,a){var s,l=o,c=!1;for(i!==n&&(s=i,c=!0);l!==r;)e.hasOwnProperty(l)&&(s=c?t(s,e[l],l,e):e[l],c=!0,l+=a);return s}function u(e,n){var o=Jt.defaults.column,r=e.aoColumns.length,a=i.extend({},Jt.models.oColumn,o,{nTh:n?n:t.createElement("th"),sTitle:o.sTitle?o.sTitle:n?n.innerHTML:"",aDataSort:o.aDataSort?o.aDataSort:[r],mData:o.mData?o.mData:r,idx:r});e.aoColumns.push(a);var s=e.aoPreSearchCols;s[r]=i.extend({},Jt.models.oSearch,s[r]),h(e,r,null)}function h(e,t,o){var a=e.aoColumns[t],s=e.oClasses,c=i(a.nTh);if(!a.sWidthOrig){a.sWidthOrig=c.attr("width")||null;var d=(c.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);d&&(a.sWidthOrig=d[1])}o!==n&&null!==o&&(l(o),r(Jt.defaults.column,o),o.mDataProp===n||o.mData||(o.mData=o.mDataProp),o.sType&&(a._sManualType=o.sType),o.className&&!o.sClass&&(o.sClass=o.className),i.extend(a,o),jt(a,o,"sWidth","sWidthOrig"),"number"==typeof o.iDataSort&&(a.aDataSort=[o.iDataSort]),jt(a,o,"aDataSort"));var u=a.mData,h=S(u),p=a.mRender?S(a.mRender):null,f=function(e){return"string"==typeof e&&-1!==e.indexOf("@")};a._bAttrSrc=i.isPlainObject(u)&&(f(u.sort)||f(u.type)||f(u.filter)),a.fnGetData=function(e,t,i){var o=h(e,t,n,i);return p&&t?p(o,t,e,i):o},a.fnSetData=function(e,t,n){return A(u)(e,t,n)},e.oFeatures.bSort||(a.bSortable=!1,c.addClass(s.sSortableNone));var v=-1!==i.inArray("asc",a.asSorting),m=-1!==i.inArray("desc",a.asSorting);a.bSortable&&(v||m)?v&&!m?(a.sSortingClass=s.sSortableAsc,a.sSortingClassJUI=s.sSortJUIAscAllowed):!v&&m?(a.sSortingClass=s.sSortableDesc,a.sSortingClassJUI=s.sSortJUIDescAllowed):(a.sSortingClass=s.sSortable,a.sSortingClassJUI=s.sSortJUI):(a.sSortingClass=s.sSortableNone,a.sSortingClassJUI="")}function p(e){if(e.oFeatures.bAutoWidth!==!1){var t=e.aoColumns;bt(e);for(var n=0,i=t.length;i>n;n++)t[n].nTh.style.width=t[n].sWidth}var o=e.oScroll;(""!==o.sY||""!==o.sX)&&mt(e),Bt(e,null,"column-sizing",[e])}function f(e,t){var n=g(e,"bVisible");return"number"==typeof n[t]?n[t]:null}function v(e,t){var n=g(e,"bVisible"),o=i.inArray(t,n);return-1!==o?o:null}function m(e){return g(e,"bVisible").length}function g(e,t){var n=[];return i.map(e.aoColumns,function(e,i){e[t]&&n.push(i)}),n}function b(e){var t,i,o,r,a,s,l,c,d,u=e.aoColumns,h=e.aoData,p=Jt.ext.type.detect;for(t=0,i=u.length;i>t;t++)if(l=u[t],d=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(o=0,r=p.length;r>o;o++){for(a=0,s=h.length;s>a&&(d[a]===n&&(d[a]=k(e,a,t,"type")),c=p[o](d[a],e),c&&"html"!==c);a++);if(c){l.sType=c;break}}l.sType||(l.sType="string")}}function y(e,t,o,r){var a,s,l,c,d,h,p,f=e.aoColumns;if(t)for(a=t.length-1;a>=0;a--){p=t[a];var v=p.targets!==n?p.targets:p.aTargets;for(i.isArray(v)||(v=[v]),l=0,c=v.length;c>l;l++)if("number"==typeof v[l]&&v[l]>=0){for(;f.length<=v[l];)u(e);r(v[l],p)}else if("number"==typeof v[l]&&v[l]<0)r(f.length+v[l],p);else if("string"==typeof v[l])for(d=0,h=f.length;h>d;d++)("_all"==v[l]||i(f[d].nTh).hasClass(v[l]))&&r(d,p)}if(o)for(a=0,s=o.length;s>a;a++)r(a,o[a])}function _(e,t,n,o){var r=e.aoData.length,a=i.extend(!0,{},Jt.models.oRow,{src:n?"dom":"data"});a._aData=t,e.aoData.push(a);for(var s=e.aoColumns,l=0,c=s.length;c>l;l++)n&&C(e,r,l,k(e,r,l)),s[l].sType=null;return e.aiDisplayMaster.push(r),(n||!e.oFeatures.bDeferRender)&&N(e,r,n,o),r}function w(e,t){var n;return t instanceof i||(t=i(t)),t.map(function(t,i){return n=I(e,i),_(e,n.data,i,n.cells)})}function x(e,t){return t._DT_RowIndex!==n?t._DT_RowIndex:null}function $(e,t,n){return i.inArray(n,e.aoData[t].anCells)}function k(e,t,i,o){var r=e.iDraw,a=e.aoColumns[i],s=e.aoData[t]._aData,l=a.sDefaultContent,c=a.fnGetData(s,o,{settings:e,row:t,col:i});if(c===n)return e.iDrawError!=r&&null===l&&(Lt(e,0,"Requested unknown parameter "+("function"==typeof a.mData?"{function}":"'"+a.mData+"'")+" for row "+t,4),e.iDrawError=r),l;if(c!==s&&null!==c||null===l){if("function"==typeof c)return c.call(s)}else c=l;return null===c&&"display"==o?"":c}function C(e,t,n,i){var o=e.aoColumns[n],r=e.aoData[t]._aData;o.fnSetData(r,i,{settings:e,row:t,col:n})}function T(e){return i.map(e.match(/(\\.|[^\.])+/g),function(e){return e.replace(/\\./g,".")})}function S(e){if(i.isPlainObject(e)){var t={};return i.each(e,function(e,n){n&&(t[e]=S(n))}),function(e,i,o,r){var a=t[i]||t._;return a!==n?a(e,i,o,r):e}}if(null===e)return function(e){return e};if("function"==typeof e)return function(t,n,i,o){return e(t,n,i,o)};if("string"!=typeof e||-1===e.indexOf(".")&&-1===e.indexOf("[")&&-1===e.indexOf("("))return function(t){return t[e]};var o=function(e,t,i){var r,a,s,l;if(""!==i)for(var c=T(i),d=0,u=c.length;u>d;d++){if(r=c[d].match(yn),a=c[d].match(_n),r){c[d]=c[d].replace(yn,""),""!==c[d]&&(e=e[c[d]]),s=[],c.splice(0,d+1),l=c.join(".");for(var h=0,p=e.length;p>h;h++)s.push(o(e[h],t,l));var f=r[0].substring(1,r[0].length-1);e=""===f?s:s.join(f);break}if(a)c[d]=c[d].replace(_n,""),e=e[c[d]]();else{if(null===e||e[c[d]]===n)return n;e=e[c[d]]}}return e};return function(t,n){return o(t,n,e)}}function A(e){if(i.isPlainObject(e))return A(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,n,i){e(t,"set",n,i)};if("string"!=typeof e||-1===e.indexOf(".")&&-1===e.indexOf("[")&&-1===e.indexOf("("))return function(t,n){t[e]=n};var t=function(e,i,o){for(var r,a,s,l,c,d=T(o),u=d[d.length-1],h=0,p=d.length-1;p>h;h++){if(a=d[h].match(yn),s=d[h].match(_n),a){d[h]=d[h].replace(yn,""),e[d[h]]=[],r=d.slice(),r.splice(0,h+1),c=r.join(".");for(var f=0,v=i.length;v>f;f++)l={},t(l,i[f],c),e[d[h]].push(l);return}s&&(d[h]=d[h].replace(_n,""),e=e[d[h]](i)),(null===e[d[h]]||e[d[h]]===n)&&(e[d[h]]={}),e=e[d[h]]}u.match(_n)?e=e[u.replace(_n,"")](i):e[u.replace(yn,"")]=i};return function(n,i){return t(n,i,e)}}function D(e){return pn(e.aoData,"_aData")}function P(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0}function E(e,t,i){for(var o=-1,r=0,a=e.length;a>r;r++)e[r]==t?o=r:e[r]>t&&e[r]--;-1!=o&&i===n&&e.splice(o,1)}function M(e,t,i,o){var r,a,s=e.aoData[t];if("dom"!==i&&(i&&"auto"!==i||"dom"!==s.src)){var l,c=s.anCells;if(c)for(r=0,a=c.length;a>r;r++){for(l=c[r];l.childNodes.length;)l.removeChild(l.firstChild);c[r].innerHTML=k(e,t,r,"display")}}else s._aData=I(e,s).data;s._aSortData=null,s._aFilterData=null;var d=e.aoColumns;if(o!==n)d[o].sType=null;else for(r=0,a=d.length;a>r;r++)d[r].sType=null;F(s)}function I(e,t){var n,o,r,a,s=[],l=[],c=t.firstChild,d=0,u=e.aoColumns,h=function(e,t,n){if("string"==typeof e){var i=e.indexOf("@");if(-1!==i){var o=e.substring(i+1);r["@"+o]=n.getAttribute(o)}}},p=function(e){o=u[d],a=i.trim(e.innerHTML),o&&o._bAttrSrc?(r={display:a},h(o.mData.sort,r,e),h(o.mData.type,r,e),h(o.mData.filter,r,e),s.push(r)):s.push(a),d++};if(c)for(;c;)n=c.nodeName.toUpperCase(),("TD"==n||"TH"==n)&&(p(c),l.push(c)),c=c.nextSibling;else{l=t.anCells;for(var f=0,v=l.length;v>f;f++)p(l[f])}return{data:s,cells:l}}function N(e,n,i,o){var r,a,s,l,c,d=e.aoData[n],u=d._aData,h=[];if(null===d.nTr){for(r=i||t.createElement("tr"),d.nTr=r,d.anCells=h,r._DT_RowIndex=n,F(d),l=0,c=e.aoColumns.length;c>l;l++)s=e.aoColumns[l],a=i?o[l]:t.createElement(s.sCellType),h.push(a),(!i||s.mRender||s.mData!==l)&&(a.innerHTML=k(e,n,l,"display")),s.sClass&&(a.className+=" "+s.sClass),s.bVisible&&!i?r.appendChild(a):!s.bVisible&&i&&a.parentNode.removeChild(a),s.fnCreatedCell&&s.fnCreatedCell.call(e.oInstance,a,k(e,n,l),u,n,l);Bt(e,"aoRowCreatedCallback",null,[r,u,n])}d.nTr.setAttribute("role","row")}function F(e){var t=e.nTr,n=e._aData;if(t){if(n.DT_RowId&&(t.id=n.DT_RowId),n.DT_RowClass){var o=n.DT_RowClass.split(" ");e.__rowc=e.__rowc?gn(e.__rowc.concat(o)):o,i(t).removeClass(e.__rowc.join(" ")).addClass(n.DT_RowClass)}n.DT_RowData&&i(t).data(n.DT_RowData)}}function L(e){var t,n,o,r,a,s=e.nTHead,l=e.nTFoot,c=0===i("th, td",s).length,d=e.oClasses,u=e.aoColumns;for(c&&(r=i("<tr/>").appendTo(s)),t=0,n=u.length;n>t;t++)a=u[t],o=i(a.nTh).addClass(a.sClass),c&&o.appendTo(r),e.oFeatures.bSort&&(o.addClass(a.sSortingClass),a.bSortable!==!1&&(o.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),Pt(e,a.nTh,t))),a.sTitle!=o.html()&&o.html(a.sTitle),Ut(e,"header")(e,o,a,d);if(c&&B(e.aoHeader,s),i(s).find(">tr").attr("role","row"),i(s).find(">tr>th, >tr>td").addClass(d.sHeaderTH),i(l).find(">tr>th, >tr>td").addClass(d.sFooterTH),null!==l){var h=e.aoFooter[0];for(t=0,n=h.length;n>t;t++)a=u[t],a.nTf=h[t].cell,a.sClass&&i(a.nTf).addClass(a.sClass)}}function j(e,t,o){var r,a,s,l,c,d,u,h,p,f=[],v=[],m=e.aoColumns.length;if(t){for(o===n&&(o=!1),r=0,a=t.length;a>r;r++){for(f[r]=t[r].slice(),f[r].nTr=t[r].nTr,s=m-1;s>=0;s--)e.aoColumns[s].bVisible||o||f[r].splice(s,1);v.push([])}for(r=0,a=f.length;a>r;r++){if(u=f[r].nTr)for(;d=u.firstChild;)u.removeChild(d);for(s=0,l=f[r].length;l>s;s++)if(h=1,p=1,v[r][s]===n){for(u.appendChild(f[r][s].cell),v[r][s]=1;f[r+h]!==n&&f[r][s].cell==f[r+h][s].cell;)v[r+h][s]=1,h++;for(;f[r][s+p]!==n&&f[r][s].cell==f[r][s+p].cell;){for(c=0;h>c;c++)v[r+c][s+p]=1;p++}i(f[r][s].cell).attr("rowspan",h).attr("colspan",p)}}}}function O(e){var t=Bt(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==i.inArray(!1,t))return void ft(e,!1);var o=[],r=0,a=e.asStripeClasses,s=a.length,l=(e.aoOpenRows.length,e.oLanguage),c=e.iInitDisplayStart,d="ssp"==zt(e),u=e.aiDisplay;e.bDrawing=!0,c!==n&&-1!==c&&(e._iDisplayStart=d?c:c>=e.fnRecordsDisplay()?0:c,e.iInitDisplayStart=-1);var h=e._iDisplayStart,p=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,ft(e,!1);else if(d){if(!e.bDestroying&&!z(e))return}else e.iDraw++;if(0!==u.length)for(var f=d?0:h,v=d?e.aoData.length:p,g=f;v>g;g++){var b=u[g],y=e.aoData[b];null===y.nTr&&N(e,b);var _=y.nTr;if(0!==s){var w=a[r%s];y._sRowStripe!=w&&(i(_).removeClass(y._sRowStripe).addClass(w),y._sRowStripe=w)}Bt(e,"aoRowCallback",null,[_,y._aData,r,g]),o.push(_),r++}else{var x=l.sZeroRecords;1==e.iDraw&&"ajax"==zt(e)?x=l.sLoadingRecords:l.sEmptyTable&&0===e.fnRecordsTotal()&&(x=l.sEmptyTable),o[0]=i("<tr/>",{"class":s?a[0]:""}).append(i("<td />",{valign:"top",colSpan:m(e),"class":e.oClasses.sRowEmpty}).html(x))[0]}Bt(e,"aoHeaderCallback","header",[i(e.nTHead).children("tr")[0],D(e),h,p,u]),Bt(e,"aoFooterCallback","footer",[i(e.nTFoot).children("tr")[0],D(e),h,p,u]);var $=i(e.nTBody);$.children().detach(),$.append(i(o)),Bt(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}function R(e,t){var n=e.oFeatures,i=n.bSort,o=n.bFilter;i&&St(e),o?G(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),t!==!0&&(e._iDisplayStart=0),e._drawHold=t,O(e),e._drawHold=!1}function H(e){var t=e.oClasses,n=i(e.nTable),o=i("<div/>").insertBefore(n),r=e.oFeatures,a=i("<div/>",{id:e.sTableId+"_wrapper","class":t.sWrapper+(e.nTFoot?"":" "+t.sNoFooter)});e.nHolding=o[0],e.nTableWrapper=a[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var s,l,c,d,u,h,p=e.sDom.split(""),f=0;f<p.length;f++){if(s=null,l=p[f],"<"==l){if(c=i("<div/>")[0],d=p[f+1],"'"==d||'"'==d){for(u="",h=2;p[f+h]!=d;)u+=p[f+h],h++;if("H"==u?u=t.sJUIHeader:"F"==u&&(u=t.sJUIFooter),-1!=u.indexOf(".")){var v=u.split(".");c.id=v[0].substr(1,v[0].length-1),c.className=v[1]}else"#"==u.charAt(0)?c.id=u.substr(1,u.length-1):c.className=u;f+=h}a.append(c),a=i(c)}else if(">"==l)a=a.parent();else if("l"==l&&r.bPaginate&&r.bLengthChange)s=dt(e);else if("f"==l&&r.bFilter)s=J(e);else if("r"==l&&r.bProcessing)s=pt(e);else if("t"==l)s=vt(e);else if("i"==l&&r.bInfo)s=ot(e);else if("p"==l&&r.bPaginate)s=ut(e);else if(0!==Jt.ext.feature.length)for(var m=Jt.ext.feature,g=0,b=m.length;b>g;g++)if(l==m[g].cFeature){s=m[g].fnInit(e);break}if(s){var y=e.aanFeatures;y[l]||(y[l]=[]),y[l].push(s),a.append(s)}}o.replaceWith(a)}function B(e,t){var n,o,r,a,s,l,c,d,u,h,p,f=i(t).children("tr"),v=function(e,t,n){for(var i=e[t];i[n];)n++;return n};for(e.splice(0,e.length),r=0,l=f.length;l>r;r++)e.push([]);for(r=0,l=f.length;l>r;r++)for(n=f[r],d=0,o=n.firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase())for(u=1*o.getAttribute("colspan"),h=1*o.getAttribute("rowspan"),u=u&&0!==u&&1!==u?u:1,h=h&&0!==h&&1!==h?h:1,c=v(e,r,d),p=1===u?!0:!1,s=0;u>s;s++)for(a=0;h>a;a++)e[r+a][c+s]={cell:o,unique:p},e[r+a].nTr=n;o=o.nextSibling}}function q(e,t,n){var i=[];n||(n=e.aoHeader,t&&(n=[],B(n,t)));for(var o=0,r=n.length;r>o;o++)for(var a=0,s=n[o].length;s>a;a++)!n[o][a].unique||i[a]&&e.bSortCellsTop||(i[a]=n[o][a].cell);return i}function U(e,t,n){if(Bt(e,"aoServerParams","serverParams",[t]),t&&i.isArray(t)){var o={},r=/(.*?)\[\]$/;i.each(t,function(e,t){var n=t.name.match(r);if(n){var i=n[0];o[i]||(o[i]=[]),o[i].push(t.value)}else o[t.name]=t.value}),t=o}var a,s=e.ajax,l=e.oInstance;if(i.isPlainObject(s)&&s.data){a=s.data;var c=i.isFunction(a)?a(t):a;t=i.isFunction(a)&&c?c:i.extend(!0,t,c),delete s.data}var d={data:t,success:function(t){var i=t.error||t.sError;i&&e.oApi._fnLog(e,0,i),e.json=t,Bt(e,null,"xhr",[e,t]),n(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(t,n){var i=e.oApi._fnLog;"parsererror"==n?i(e,0,"Invalid JSON response",1):4===t.readyState&&i(e,0,"Ajax error",7),ft(e,!1)}};e.oAjaxData=t,Bt(e,null,"preXhr",[e,t]),e.fnServerData?e.fnServerData.call(l,e.sAjaxSource,i.map(t,function(e,t){return{name:t,value:e}}),n,e):e.sAjaxSource||"string"==typeof s?e.jqXHR=i.ajax(i.extend(d,{url:s||e.sAjaxSource})):i.isFunction(s)?e.jqXHR=s.call(l,t,n,e):(e.jqXHR=i.ajax(i.extend(d,s)),s.data=a)}function z(e){return e.bAjaxDataGet?(e.iDraw++,ft(e,!0),U(e,V(e),function(t){W(e,t)}),!1):!0}function V(e){var t,n,o,r,a=e.aoColumns,s=a.length,l=e.oFeatures,c=e.oPreviousSearch,d=e.aoPreSearchCols,u=[],h=Tt(e),p=e._iDisplayStart,f=l.bPaginate!==!1?e._iDisplayLength:-1,v=function(e,t){u.push({name:e,value:t})};v("sEcho",e.iDraw),v("iColumns",s),v("sColumns",pn(a,"sName").join(",")),v("iDisplayStart",p),v("iDisplayLength",f);var m={draw:e.iDraw,columns:[],order:[],start:p,length:f,search:{value:c.sSearch,regex:c.bRegex}};for(t=0;s>t;t++)o=a[t],r=d[t],n="function"==typeof o.mData?"function":o.mData,m.columns.push({data:n,name:o.sName,searchable:o.bSearchable,orderable:o.bSortable,search:{value:r.sSearch,regex:r.bRegex}}),v("mDataProp_"+t,n),l.bFilter&&(v("sSearch_"+t,r.sSearch),v("bRegex_"+t,r.bRegex),v("bSearchable_"+t,o.bSearchable)),l.bSort&&v("bSortable_"+t,o.bSortable);l.bFilter&&(v("sSearch",c.sSearch),v("bRegex",c.bRegex)),l.bSort&&(i.each(h,function(e,t){m.order.push({column:t.col,dir:t.dir}),v("iSortCol_"+e,t.col),v("sSortDir_"+e,t.dir)}),v("iSortingCols",h.length));var g=Jt.ext.legacy.ajax;return null===g?e.sAjaxSource?u:m:g?u:m}function W(e,t){var i=function(e,i){return t[e]!==n?t[e]:t[i]},o=i("sEcho","draw"),r=i("iTotalRecords","recordsTotal"),a=i("iTotalDisplayRecords","recordsFiltered");if(o){if(1*o<e.iDraw)return;e.iDraw=1*o}P(e),e._iRecordsTotal=parseInt(r,10),e._iRecordsDisplay=parseInt(a,10);for(var s=Y(e,t),l=0,c=s.length;c>l;l++)_(e,s[l]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,O(e),e._bInitComplete||lt(e,t),e.bAjaxDataGet=!0,ft(e,!1)}function Y(e,t){var o=i.isPlainObject(e.ajax)&&e.ajax.dataSrc!==n?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===o?t.aaData||t[o]:""!==o?S(o)(t):t}function J(e){var n=e.oClasses,o=e.sTableId,r=e.oLanguage,a=e.oPreviousSearch,s=e.aanFeatures,l='<input type="search" class="'+n.sFilterInput+'"/>',c=r.sSearch;c=c.match(/_INPUT_/)?c.replace("_INPUT_",l):c+l;var d=i("<div/>",{id:s.f?null:o+"_filter","class":n.sFilter}).append(i("<label/>").append(c)),u=function(){var t=(s.f,this.value?this.value:"");t!=a.sSearch&&(G(e,{sSearch:t,bRegex:a.bRegex,bSmart:a.bSmart,bCaseInsensitive:a.bCaseInsensitive}),e._iDisplayStart=0,O(e))},h=i("input",d).val(a.sSearch).attr("placeholder",r.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT","ssp"===zt(e)?yt(u,400):u).bind("keypress.DT",function(e){return 13==e.keyCode?!1:void 0}).attr("aria-controls",o);return i(e.nTable).on("search.dt.DT",function(n,i){if(e===i)try{h[0]!==t.activeElement&&h.val(a.sSearch)}catch(o){}}),d[0]}function G(e,t,i){var o=e.oPreviousSearch,r=e.aoPreSearchCols,a=function(e){o.sSearch=e.sSearch,o.bRegex=e.bRegex,o.bSmart=e.bSmart,o.bCaseInsensitive=e.bCaseInsensitive},s=function(e){return e.bEscapeRegex!==n?!e.bEscapeRegex:e.bRegex};if(b(e),"ssp"!=zt(e)){Z(e,t.sSearch,i,s(t),t.bSmart,t.bCaseInsensitive),a(t);for(var l=0;l<r.length;l++)X(e,r[l].sSearch,l,s(r[l]),r[l].bSmart,r[l].bCaseInsensitive);K(e)}else a(t);e.bFiltered=!0,Bt(e,null,"search",[e])}function K(e){for(var t,n,i=Jt.ext.search,o=e.aiDisplay,r=0,a=i.length;a>r;r++){for(var s=[],l=0,c=o.length;c>l;l++)n=o[l],t=e.aoData[n],i[r](e,t._aFilterData,n,t._aData,l)&&s.push(n);o.length=0,o.push.apply(o,s)}}function X(e,t,n,i,o,r){if(""!==t)for(var a,s=e.aiDisplay,l=Q(t,i,o,r),c=s.length-1;c>=0;c--)a=e.aoData[s[c]]._aFilterData[n],l.test(a)||s.splice(c,1)}function Z(e,t,n,i,o,r){var a,s,l,c=Q(t,i,o,r),d=e.oPreviousSearch.sSearch,u=e.aiDisplayMaster;if(0!==Jt.ext.search.length&&(n=!0),s=tt(e),t.length<=0)e.aiDisplay=u.slice();else for((s||n||d.length>t.length||0!==t.indexOf(d)||e.bSorted)&&(e.aiDisplay=u.slice()),a=e.aiDisplay,l=a.length-1;l>=0;l--)c.test(e.aoData[a[l]]._sFilterRow)||a.splice(l,1)}function Q(e,t,n,o){if(e=t?e:et(e),n){var r=i.map(e.match(/"[^"]+"|[^ ]+/g)||"",function(e){return'"'===e.charAt(0)?e.match(/^"(.*)"$/)[1]:e});e="^(?=.*?"+r.join(")(?=.*?")+").*$"}return new RegExp(e,o?"i":"")}function et(e){return e.replace(rn,"\\$1")}function tt(e){var t,n,i,o,r,a,s,l,c=e.aoColumns,d=Jt.ext.type.search,u=!1;for(n=0,o=e.aoData.length;o>n;n++)if(l=e.aoData[n],!l._aFilterData){for(a=[],i=0,r=c.length;r>i;i++)t=c[i],t.bSearchable?(s=k(e,n,i,"filter"),d[t.sType]&&(s=d[t.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(wn.innerHTML=s,s=xn?wn.textContent:wn.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),a.push(s);l._aFilterData=a,l._sFilterRow=a.join("  "),u=!0}return u}function nt(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function it(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function ot(e){var t=e.sTableId,n=e.aanFeatures.i,o=i("<div/>",{"class":e.oClasses.sInfo,id:n?null:t+"_info"});return n||(e.aoDrawCallback.push({fn:rt,sName:"information"}),o.attr("role","status").attr("aria-live","polite"),i(e.nTable).attr("aria-describedby",t+"_info")),o[0]}function rt(e){var t=e.aanFeatures.i;if(0!==t.length){var n=e.oLanguage,o=e._iDisplayStart+1,r=e.fnDisplayEnd(),a=e.fnRecordsTotal(),s=e.fnRecordsDisplay(),l=s?n.sInfo:n.sInfoEmpty;s!==a&&(l+=" "+n.sInfoFiltered),l+=n.sInfoPostFix,l=at(e,l);var c=n.fnInfoCallback;null!==c&&(l=c.call(e.oInstance,e,o,r,a,s,l)),i(t).html(l)}}function at(e,t){var n=e.fnFormatNumber,i=e._iDisplayStart+1,o=e._iDisplayLength,r=e.fnRecordsDisplay(),a=-1===o;return t.replace(/_START_/g,n.call(e,i)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,r)).replace(/_PAGE_/g,n.call(e,a?1:Math.ceil(i/o))).replace(/_PAGES_/g,n.call(e,a?1:Math.ceil(r/o)))}function st(e){var t,n,i,o=e.iInitDisplayStart,r=e.aoColumns,a=e.oFeatures;if(!e.bInitialised)return void setTimeout(function(){st(e)},200);for(H(e),L(e),j(e,e.aoHeader),j(e,e.aoFooter),ft(e,!0),a.bAutoWidth&&bt(e),t=0,n=r.length;n>t;t++)i=r[t],i.sWidth&&(i.nTh.style.width=kt(i.sWidth));R(e);var s=zt(e);"ssp"!=s&&("ajax"==s?U(e,[],function(n){var i=Y(e,n);for(t=0;t<i.length;t++)_(e,i[t]);e.iInitDisplayStart=o,R(e),ft(e,!1),lt(e,n)},e):(ft(e,!1),lt(e)))}function lt(e,t){e._bInitComplete=!0,t&&p(e),Bt(e,"aoInitComplete","init",[e,t])}function ct(e,t){var n=parseInt(t,10);e._iDisplayLength=n,qt(e),Bt(e,null,"length",[e,n])}function dt(e){for(var t=e.oClasses,n=e.sTableId,o=e.aLengthMenu,r=i.isArray(o[0]),a=r?o[0]:o,s=r?o[1]:o,l=i("<select/>",{name:n+"_length","aria-controls":n,"class":t.sLengthSelect}),c=0,d=a.length;d>c;c++)l[0][c]=new Option(s[c],a[c]);var u=i("<div><label/></div>").addClass(t.sLength);return e.aanFeatures.l||(u[0].id=n+"_length"),u.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",l[0].outerHTML)),i("select",u).val(e._iDisplayLength).bind("change.DT",function(){ct(e,i(this).val()),O(e)}),i(e.nTable).bind("length.dt.DT",function(t,n,o){e===n&&i("select",u).val(o)}),u[0]}function ut(e){var t=e.sPaginationType,n=Jt.ext.pager[t],o="function"==typeof n,r=function(e){O(e)},a=i("<div/>").addClass(e.oClasses.sPaging+t)[0],s=e.aanFeatures;return o||n.fnInit(e,a,r),s.p||(a.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(e){if(o){var t,i,a=e._iDisplayStart,l=e._iDisplayLength,c=e.fnRecordsDisplay(),d=-1===l,u=d?0:Math.ceil(a/l),h=d?1:Math.ceil(c/l),p=n(u,h);for(t=0,i=s.p.length;i>t;t++)Ut(e,"pageButton")(e,s.p[t],t,p,u,h)}else n.fnUpdate(e,r)},sName:"pagination"})),a}function ht(e,t,n){var i=e._iDisplayStart,o=e._iDisplayLength,r=e.fnRecordsDisplay();0===r||-1===o?i=0:"number"==typeof t?(i=t*o,i>r&&(i=0)):"first"==t?i=0:"previous"==t?(i=o>=0?i-o:0,0>i&&(i=0)):"next"==t?r>i+o&&(i+=o):"last"==t?i=Math.floor((r-1)/o)*o:Lt(e,0,"Unknown paging action: "+t,5);var a=e._iDisplayStart!==i;return e._iDisplayStart=i,a&&(Bt(e,null,"page",[e]),n&&O(e)),a}function pt(e){return i("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing","class":e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function ft(e,t){e.oFeatures.bProcessing&&i(e.aanFeatures.r).css("display",t?"block":"none"),Bt(e,null,"processing",[e,t])}function vt(e){var t=i(e.nTable);t.attr("role","grid");var n=e.oScroll;if(""===n.sX&&""===n.sY)return e.nTable;var o=n.sX,r=n.sY,a=e.oClasses,s=t.children("caption"),l=s.length?s[0]._captionSide:null,c=i(t[0].cloneNode(!1)),d=i(t[0].cloneNode(!1)),u=t.children("tfoot"),h="<div/>",p=function(e){return e?kt(e):null};n.sX&&"100%"===t.attr("width")&&t.removeAttr("width"),u.length||(u=null);var f=i(h,{"class":a.sScrollWrapper}).append(i(h,{"class":a.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:o?p(o):"100%"}).append(i(h,{"class":a.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append(t.children("thead")))).append("top"===l?s:null)).append(i(h,{"class":a.sScrollBody}).css({overflow:"auto",height:p(r),width:p(o)}).append(t));u&&f.append(i(h,{"class":a.sScrollFoot}).css({overflow:"hidden",border:0,width:o?p(o):"100%"}).append(i(h,{"class":a.sScrollFootInner}).append(d.removeAttr("id").css("margin-left",0).append(t.children("tfoot")))).append("bottom"===l?s:null));var v=f.children(),m=v[0],g=v[1],b=u?v[2]:null;return o&&i(g).scroll(function(){var e=this.scrollLeft;m.scrollLeft=e,u&&(b.scrollLeft=e)}),e.nScrollHead=m,e.nScrollBody=g,e.nScrollFoot=b,e.aoDrawCallback.push({fn:mt,sName:"scrolling"}),f[0]}function mt(e){var t,n,o,r,a,s,l,c,d,u=e.oScroll,h=u.sX,p=u.sXInner,v=u.sY,m=u.iBarWidth,g=i(e.nScrollHead),b=g[0].style,y=g.children("div"),_=y[0].style,w=y.children("table"),x=e.nScrollBody,$=i(x),k=x.style,C=i(e.nScrollFoot),T=C.children("div"),S=T.children("table"),A=i(e.nTHead),D=i(e.nTable),P=D[0],E=P.style,M=e.nTFoot?i(e.nTFoot):null,I=e.oBrowser,N=I.bScrollOversize,F=[],L=[],j=[],O=function(e){var t=e.style;t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};if(D.children("thead, tfoot").remove(),a=A.clone().prependTo(D),t=A.find("tr"),o=a.find("tr"),a.find("th, td").removeAttr("tabindex"),M&&(s=M.clone().prependTo(D),n=M.find("tr"),r=s.find("tr")),h||(k.width="100%",g[0].style.width="100%"),i.each(q(e,a),function(t,n){l=f(e,t),n.style.width=e.aoColumns[l].sWidth}),M&&gt(function(e){e.style.width=""},r),u.bCollapse&&""!==v&&(k.height=$[0].offsetHeight+A[0].offsetHeight+"px"),d=D.outerWidth(),""===h?(E.width="100%",N&&(D.find("tbody").height()>x.offsetHeight||"scroll"==$.css("overflow-y"))&&(E.width=kt(D.outerWidth()-m))):""!==p?E.width=kt(p):d==$.width()&&$.height()<D.height()?(E.width=kt(d-m),D.outerWidth()>d-m&&(E.width=kt(d))):E.width=kt(d),d=D.outerWidth(),gt(O,o),gt(function(e){j.push(e.innerHTML),F.push(kt(i(e).css("width")))},o),gt(function(e,t){e.style.width=F[t]},t),i(o).height(0),M&&(gt(O,r),gt(function(e){L.push(kt(i(e).css("width")))},r),gt(function(e,t){e.style.width=L[t]},n),i(r).height(0)),gt(function(e,t){e.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+j[t]+"</div>",e.style.width=F[t]},o),M&&gt(function(e,t){e.innerHTML="",e.style.width=L[t]},r),D.outerWidth()<d?(c=x.scrollHeight>x.offsetHeight||"scroll"==$.css("overflow-y")?d+m:d,N&&(x.scrollHeight>x.offsetHeight||"scroll"==$.css("overflow-y"))&&(E.width=kt(c-m)),(""===h||""!==p)&&Lt(e,1,"Possible column misalignment",6)):c="100%",k.width=kt(c),b.width=kt(c),M&&(e.nScrollFoot.style.width=kt(c)),v||N&&(k.height=kt(P.offsetHeight+m)),v&&u.bCollapse){k.height=kt(v);var R=h&&P.offsetWidth>x.offsetWidth?m:0;P.offsetHeight<x.offsetHeight&&(k.height=kt(P.offsetHeight+R))}var H=D.outerWidth();w[0].style.width=kt(H),_.width=kt(H);var B=D.height()>x.clientHeight||"scroll"==$.css("overflow-y"),U="padding"+(I.bScrollbarLeft?"Left":"Right");_[U]=B?m+"px":"0px",M&&(S[0].style.width=kt(H),T[0].style.width=kt(H),T[0].style[U]=B?m+"px":"0px"),$.scroll(),!e.bSorted&&!e.bFiltered||e._drawHold||(x.scrollTop=0)}function gt(e,t,n){for(var i,o,r=0,a=0,s=t.length;s>a;){for(i=t[a].firstChild,o=n?n[a].firstChild:null;i;)1===i.nodeType&&(n?e(i,o,r):e(i,r),r++),i=i.nextSibling,o=n?o.nextSibling:null;a++}}function bt(t){var n,o,r,a,s,l=t.nTable,c=t.aoColumns,d=t.oScroll,u=d.sY,h=d.sX,f=d.sXInner,v=c.length,b=g(t,"bVisible"),y=i("th",t.nTHead),_=l.getAttribute("width"),w=l.parentNode,x=!1;for(n=0;n<b.length;n++)o=c[b[n]],null!==o.sWidth&&(o.sWidth=_t(o.sWidthOrig,w),x=!0);if(x||h||u||v!=m(t)||v!=y.length){var $=i(l).clone().empty().css("visibility","hidden").removeAttr("id").append(i(t.nTHead).clone(!1)).append(i(t.nTFoot).clone(!1)).append(i("<tbody><tr/></tbody>"));$.find("tfoot th, tfoot td").css("width","");var k=$.find("tbody tr");for(y=q(t,$.find("thead")[0]),n=0;n<b.length;n++)o=c[b[n]],y[n].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?kt(o.sWidthOrig):"";if(t.aoData.length)for(n=0;n<b.length;n++)r=b[n],o=c[r],i(xt(t,r)).clone(!1).append(o.sContentPadding).appendTo(k);if($.appendTo(w),h&&f?$.width(f):h?($.css("width","auto"),$.width()<w.offsetWidth&&$.width(w.offsetWidth)):u?$.width(w.offsetWidth):_&&$.width(_),wt(t,$[0]),h){var C=0;for(n=0;n<b.length;n++)o=c[b[n]],s=i(y[n]).outerWidth(),C+=null===o.sWidthOrig?s:parseInt(o.sWidth,10)+s-i(y[n]).width();$.width(kt(C)),l.style.width=kt(C)}for(n=0;n<b.length;n++)o=c[b[n]],a=i(y[n]).width(),a&&(o.sWidth=kt(a));l.style.width=kt($.css("width")),$.remove()}else for(n=0;v>n;n++)c[n].sWidth=kt(y.eq(n).width());_&&(l.style.width=kt(_)),!_&&!h||t._reszEvt||(i(e).bind("resize.DT-"+t.sInstance,yt(function(){p(t)})),t._reszEvt=!0)}function yt(e,t){var i,o,r=t||200;return function(){var t=this,a=+new Date,s=arguments;i&&i+r>a?(clearTimeout(o),o=setTimeout(function(){i=n,e.apply(t,s)},r)):i?(i=a,e.apply(t,s)):i=a}}function _t(e,n){if(!e)return 0;var o=i("<div/>").css("width",kt(e)).appendTo(n||t.body),r=o[0].offsetWidth;
return o.remove(),r}function wt(e,t){var n=e.oScroll;if(n.sX||n.sY){var o=n.sX?0:n.iBarWidth;t.style.width=kt(i(t).outerWidth()-o)}}function xt(e,t){var n=$t(e,t);if(0>n)return null;var o=e.aoData[n];return o.nTr?o.anCells[t]:i("<td/>").html(k(e,n,t,"display"))[0]}function $t(e,t){for(var n,i=-1,o=-1,r=0,a=e.aoData.length;a>r;r++)n=k(e,r,t,"display")+"",n=n.replace($n,""),n.length>i&&(i=n.length,o=r);return o}function kt(e){return null===e?"0px":"number"==typeof e?0>e?"0px":e+"px":e.match(/\d$/)?e+"px":e}function Ct(){if(!Jt.__scrollbarWidth){var e=i("<p/>").css({width:"100%",height:200,padding:0})[0],t=i("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(e).appendTo("body"),n=e.offsetWidth;t.css("overflow","scroll");var o=e.offsetWidth;n===o&&(o=t[0].clientWidth),t.remove(),Jt.__scrollbarWidth=n-o}return Jt.__scrollbarWidth}function Tt(e){var t,n,o,r,a,s,l,c=[],d=e.aoColumns,u=e.aaSortingFixed,h=i.isPlainObject(u),p=[],f=function(e){e.length&&!i.isArray(e[0])?p.push(e):p.push.apply(p,e)};for(i.isArray(u)&&f(u),h&&u.pre&&f(u.pre),f(e.aaSorting),h&&u.post&&f(u.post),t=0;t<p.length;t++)for(l=p[t][0],r=d[l].aDataSort,n=0,o=r.length;o>n;n++)a=r[n],s=d[a].sType||"string",c.push({src:l,col:a,dir:p[t][1],index:p[t][2],type:s,formatter:Jt.ext.type.order[s+"-pre"]});return c}function St(e){var t,n,i,o,r,a=[],s=Jt.ext.type.order,l=e.aoData,c=(e.aoColumns,0),d=e.aiDisplayMaster;for(b(e),r=Tt(e),t=0,n=r.length;n>t;t++)o=r[t],o.formatter&&c++,Mt(e,o.col);if("ssp"!=zt(e)&&0!==r.length){for(t=0,i=d.length;i>t;t++)a[d[t]]=t;d.sort(c===r.length?function(e,t){var n,i,o,s,c,d=r.length,u=l[e]._aSortData,h=l[t]._aSortData;for(o=0;d>o;o++)if(c=r[o],n=u[c.col],i=h[c.col],s=i>n?-1:n>i?1:0,0!==s)return"asc"===c.dir?s:-s;return n=a[e],i=a[t],i>n?-1:n>i?1:0}:function(e,t){var n,i,o,c,d,u,h=r.length,p=l[e]._aSortData,f=l[t]._aSortData;for(o=0;h>o;o++)if(d=r[o],n=p[d.col],i=f[d.col],u=s[d.type+"-"+d.dir]||s["string-"+d.dir],c=u(n,i),0!==c)return c;return n=a[e],i=a[t],i>n?-1:n>i?1:0})}e.bSorted=!0}function At(e){for(var t,n,i=e.aoColumns,o=Tt(e),r=e.oLanguage.oAria,a=0,s=i.length;s>a;a++){var l=i[a],c=l.asSorting,d=l.sTitle.replace(/<.*?>/g,""),u=l.nTh;u.removeAttribute("aria-sort"),l.bSortable?(o.length>0&&o[0].col==a?(u.setAttribute("aria-sort","asc"==o[0].dir?"ascending":"descending"),n=c[o[0].index+1]||c[0]):n=c[0],t=d+("asc"===n?r.sSortAscending:r.sSortDescending)):t=d,u.setAttribute("aria-label",t)}}function Dt(e,t,o,r){var a,s=e.aoColumns[t],l=e.aaSorting,c=s.asSorting,d=function(e){var t=e._idx;return t===n&&(t=i.inArray(e[1],c)),t+1>=c.length?0:t+1};if("number"==typeof l[0]&&(l=e.aaSorting=[l]),o&&e.oFeatures.bSortMulti){var u=i.inArray(t,pn(l,"0"));-1!==u?(a=d(l[u]),l[u][1]=c[a],l[u]._idx=a):(l.push([t,c[0],0]),l[l.length-1]._idx=0)}else l.length&&l[0][0]==t?(a=d(l[0]),l.length=1,l[0][1]=c[a],l[0]._idx=a):(l.length=0,l.push([t,c[0]]),l[0]._idx=0);R(e),"function"==typeof r&&r(e)}function Pt(e,t,n,i){var o=e.aoColumns[n];Rt(t,{},function(t){o.bSortable!==!1&&(e.oFeatures.bProcessing?(ft(e,!0),setTimeout(function(){Dt(e,n,t.shiftKey,i),"ssp"!==zt(e)&&ft(e,!1)},0)):Dt(e,n,t.shiftKey,i))})}function Et(e){var t,n,o,r=e.aLastSort,a=e.oClasses.sSortColumn,s=Tt(e),l=e.oFeatures;if(l.bSort&&l.bSortClasses){for(t=0,n=r.length;n>t;t++)o=r[t].src,i(pn(e.aoData,"anCells",o)).removeClass(a+(2>t?t+1:3));for(t=0,n=s.length;n>t;t++)o=s[t].src,i(pn(e.aoData,"anCells",o)).addClass(a+(2>t?t+1:3))}e.aLastSort=s}function Mt(e,t){var n,i=e.aoColumns[t],o=Jt.ext.order[i.sSortDataType];o&&(n=o.call(e.oInstance,e,t,v(e,t)));for(var r,a,s=Jt.ext.type.order[i.sType+"-pre"],l=0,c=e.aoData.length;c>l;l++)r=e.aoData[l],r._aSortData||(r._aSortData=[]),(!r._aSortData[t]||o)&&(a=o?n[l]:k(e,l,t,"sort"),r._aSortData[t]=s?s(a):a)}function It(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var t={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:i.extend(!0,[],e.aaSorting),search:nt(e.oPreviousSearch),columns:i.map(e.aoColumns,function(t,n){return{visible:t.bVisible,search:nt(e.aoPreSearchCols[n])}})};Bt(e,"aoStateSaveParams","stateSaveParams",[e,t]),e.oSavedState=t,e.fnStateSaveCallback.call(e.oInstance,e,t)}}function Nt(e){var t,n,o=e.aoColumns;if(e.oFeatures.bStateSave){var r=e.fnStateLoadCallback.call(e.oInstance,e);if(r&&r.time){var a=Bt(e,"aoStateLoadParams","stateLoadParams",[e,r]);if(-1===i.inArray(!1,a)){var s=e.iStateDuration;if(!(s>0&&r.time<+new Date-1e3*s)&&o.length===r.columns.length){for(e.oLoadedState=i.extend(!0,{},r),e._iDisplayStart=r.start,e.iInitDisplayStart=r.start,e._iDisplayLength=r.length,e.aaSorting=[],i.each(r.order,function(t,n){e.aaSorting.push(n[0]>=o.length?[0,n[1]]:n)}),i.extend(e.oPreviousSearch,it(r.search)),t=0,n=r.columns.length;n>t;t++){var l=r.columns[t];o[t].bVisible=l.visible,i.extend(e.aoPreSearchCols[t],it(l.search))}Bt(e,"aoStateLoaded","stateLoaded",[e,r])}}}}}function Ft(e){var t=Jt.settings,n=i.inArray(e,pn(t,"nTable"));return-1!==n?t[n]:null}function Lt(t,n,i,o){if(i="DataTables warning: "+(null!==t?"table id="+t.sTableId+" - ":"")+i,o&&(i+=". For more information about this error, please see http://datatables.net/tn/"+o),n)e.console&&console.log&&console.log(i);else{var r=Jt.ext,a=r.sErrMode||r.errMode;if("alert"!=a)throw new Error(i);alert(i)}}function jt(e,t,o,r){return i.isArray(o)?void i.each(o,function(n,o){i.isArray(o)?jt(e,t,o[0],o[1]):jt(e,t,o)}):(r===n&&(r=o),void(t[o]!==n&&(e[r]=t[o])))}function Ot(e,t,n){var o;for(var r in t)t.hasOwnProperty(r)&&(o=t[r],i.isPlainObject(o)?(i.isPlainObject(e[r])||(e[r]={}),i.extend(!0,e[r],o)):e[r]=n&&"data"!==r&&"aaData"!==r&&i.isArray(o)?o.slice():o);return e}function Rt(e,t,n){i(e).bind("click.DT",t,function(t){e.blur(),n(t)}).bind("keypress.DT",t,function(e){13===e.which&&(e.preventDefault(),n(e))}).bind("selectstart.DT",function(){return!1})}function Ht(e,t,n,i){n&&e[t].push({fn:n,sName:i})}function Bt(e,t,n,o){var r=[];return t&&(r=i.map(e[t].slice().reverse(),function(t){return t.fn.apply(e.oInstance,o)})),null!==n&&i(e.nTable).trigger(n+".dt",o),r}function qt(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),i=e._iDisplayLength;n===e.fnRecordsDisplay()&&(t=n-i),(-1===i||0>t)&&(t=0),e._iDisplayStart=t}function Ut(e,t){var n=e.renderer,o=Jt.ext.renderer[t];return i.isPlainObject(n)&&n[t]?o[n[t]]||o._:"string"==typeof n?o[n]||o._:o._}function zt(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function Vt(e,t){var n=[],i=Vn.numbers_length,o=Math.floor(i/2);return i>=t?n=vn(0,t):o>=e?(n=vn(0,i-2),n.push("ellipsis"),n.push(t-1)):e>=t-1-o?(n=vn(t-(i-2),t),n.splice(0,0,"ellipsis"),n.splice(0,0,0)):(n=vn(e-1,e+2),n.push("ellipsis"),n.push(t-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Wt(e){i.each({num:function(t){return Wn(t,e)},"num-fmt":function(t){return Wn(t,e,an)},"html-num":function(t){return Wn(t,e,tn)},"html-num-fmt":function(t){return Wn(t,e,tn,an)}},function(t,n){Gt.type.order[t+e+"-pre"]=n})}function Yt(e){return function(){var t=[Ft(this[Jt.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Jt.ext.internal[e].apply(this,t)}}var Jt,Gt,Kt,Xt,Zt,Qt={},en=/[\r\n]/g,tn=/<.*?>/g,nn=/^[\w\+\-]/,on=/[\w\+\-]$/,rn=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),an=/[',$£€¥%\u2009\u202F]/g,sn=function(e){return e&&e!==!0&&"-"!==e?!1:!0},ln=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},cn=function(e,t){return Qt[t]||(Qt[t]=new RegExp(et(t),"g")),"string"==typeof e?e.replace(/\./g,"").replace(Qt[t],"."):e},dn=function(e,t,n){var i="string"==typeof e;return t&&i&&(e=cn(e,t)),n&&i&&(e=e.replace(an,"")),sn(e)||!isNaN(parseFloat(e))&&isFinite(e)},un=function(e){return sn(e)||"string"==typeof e},hn=function(e,t,n){if(sn(e))return!0;var i=un(e);return i&&dn(mn(e),t,n)?!0:null},pn=function(e,t,i){var o=[],r=0,a=e.length;if(i!==n)for(;a>r;r++)e[r]&&e[r][t]&&o.push(e[r][t][i]);else for(;a>r;r++)e[r]&&o.push(e[r][t]);return o},fn=function(e,t,i,o){var r=[],a=0,s=t.length;if(o!==n)for(;s>a;a++)r.push(e[t[a]][i][o]);else for(;s>a;a++)r.push(e[t[a]][i]);return r},vn=function(e,t){var i,o=[];t===n?(t=0,i=e):(i=t,t=e);for(var r=t;i>r;r++)o.push(r);return o},mn=function(e){return e.replace(tn,"")},gn=function(e){var t,n,i,o=[],r=e.length,a=0;e:for(n=0;r>n;n++){for(t=e[n],i=0;a>i;i++)if(o[i]===t)continue e;o.push(t),a++}return o},bn=function(e,t,i){e[t]!==n&&(e[i]=e[t])},yn=/\[.*?\]$/,_n=/\(\)$/,wn=i("<div>")[0],xn=wn.textContent!==n,$n=/<.*?>/g;Jt=function(e){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new Kt(e?Ft(this[Gt.iApiIndex]):this)},this.fnAddData=function(e,t){var o=this.api(!0),r=i.isArray(e)&&(i.isArray(e[0])||i.isPlainObject(e[0]))?o.rows.add(e):o.row.add(e);return(t===n||t)&&o.draw(),r.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),i=t.settings()[0],o=i.oScroll;e===n||e?t.draw(!1):(""!==o.sX||""!==o.sY)&&mt(i)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===n||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,i){var o=this.api(!0),r=o.rows(e),a=r.settings()[0],s=a.aoData[r[0][0]];return r.remove(),t&&t.call(this,a,s),(i===n||i)&&o.draw(),s},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(!e)},this.fnFilter=function(e,t,i,o,r,a){var s=this.api(!0);null===t||t===n?s.search(e,i,o,a):s.column(t).search(e,i,o,a),s.draw()},this.fnGetData=function(e,t){var i=this.api(!0);if(e!==n){var o=e.nodeName?e.nodeName.toLowerCase():"";return t!==n||"td"==o||"th"==o?i.cell(e,t).data():i.row(e).data()||null}return i.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==n?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();if("TR"==n)return t.row(e).index();if("TD"==n||"TH"==n){var i=t.cell(e).index();return[i.row,i.columnVisible,i.column]}return null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){var i=this.api(!0).page(e);(t===n||t)&&i.draw(!1)},this.fnSetColumnVis=function(e,t,i){var o=this.api(!0).column(e).visible(t);(i===n||i)&&o.columns.adjust().draw()},this.fnSettings=function(){return Ft(this[Gt.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,i,o,r){var a=this.api(!0);return i===n||null===i?a.row(t).data(e):a.cell(t,i).data(e),(r===n||r)&&a.columns.adjust(),(o===n||o)&&a.draw(),0},this.fnVersionCheck=Gt.fnVersionCheck;var t=this,o=e===n,d=this.length;o&&(e={}),this.oApi=this.internal=Gt.internal;for(var p in Jt.ext.internal)p&&(this[p]=Yt(p));return this.each(function(){var p,f={},v=d>1?Ot(f,e,!0):e,m=0,g=this.getAttribute("id"),b=!1,x=Jt.defaults;if("table"!=this.nodeName.toLowerCase())return void Lt(null,0,"Non-table node initialisation ("+this.nodeName+")",2);s(x),l(x.column),r(x,x,!0),r(x.column,x.column,!0),r(x,v);var $=Jt.settings;for(m=0,p=$.length;p>m;m++){if($[m].nTable==this){var k=v.bRetrieve!==n?v.bRetrieve:x.bRetrieve,C=v.bDestroy!==n?v.bDestroy:x.bDestroy;if(o||k)return $[m].oInstance;if(C){$[m].oInstance.fnDestroy();break}return void Lt($[m],0,"Cannot reinitialise DataTable",3)}if($[m].sTableId==this.id){$.splice(m,1);break}}(null===g||""===g)&&(g="DataTables_Table_"+Jt.ext._unique++,this.id=g);var T=i.extend(!0,{},Jt.models.oSettings,{nTable:this,oApi:t.internal,oInit:v,sDestroyWidth:i(this)[0].style.width,sInstance:g,sTableId:g});$.push(T),T.oInstance=1===t.length?t:i(this).dataTable(),s(v),v.oLanguage&&a(v.oLanguage),v.aLengthMenu&&!v.iDisplayLength&&(v.iDisplayLength=i.isArray(v.aLengthMenu[0])?v.aLengthMenu[0][0]:v.aLengthMenu[0]),v=Ot(i.extend(!0,{},x),v),jt(T.oFeatures,v,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),jt(T,v,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),jt(T.oScroll,v,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),jt(T.oLanguage,v,"fnInfoCallback"),Ht(T,"aoDrawCallback",v.fnDrawCallback,"user"),Ht(T,"aoServerParams",v.fnServerParams,"user"),Ht(T,"aoStateSaveParams",v.fnStateSaveParams,"user"),Ht(T,"aoStateLoadParams",v.fnStateLoadParams,"user"),Ht(T,"aoStateLoaded",v.fnStateLoaded,"user"),Ht(T,"aoRowCallback",v.fnRowCallback,"user"),Ht(T,"aoRowCreatedCallback",v.fnCreatedRow,"user"),Ht(T,"aoHeaderCallback",v.fnHeaderCallback,"user"),Ht(T,"aoFooterCallback",v.fnFooterCallback,"user"),Ht(T,"aoInitComplete",v.fnInitComplete,"user"),Ht(T,"aoPreDrawCallback",v.fnPreDrawCallback,"user");var S=T.oClasses;if(v.bJQueryUI?(i.extend(S,Jt.ext.oJUIClasses,v.oClasses),v.sDom===x.sDom&&"lfrtip"===x.sDom&&(T.sDom='<"H"lfr>t<"F"ip>'),T.renderer?i.isPlainObject(T.renderer)&&!T.renderer.header&&(T.renderer.header="jqueryui"):T.renderer="jqueryui"):i.extend(S,Jt.ext.classes,v.oClasses),i(this).addClass(S.sTable),(""!==T.oScroll.sX||""!==T.oScroll.sY)&&(T.oScroll.iBarWidth=Ct()),T.oScroll.sX===!0&&(T.oScroll.sX="100%"),T.iInitDisplayStart===n&&(T.iInitDisplayStart=v.iDisplayStart,T._iDisplayStart=v.iDisplayStart),null!==v.iDeferLoading){T.bDeferLoading=!0;var A=i.isArray(v.iDeferLoading);T._iRecordsDisplay=A?v.iDeferLoading[0]:v.iDeferLoading,T._iRecordsTotal=A?v.iDeferLoading[1]:v.iDeferLoading}""!==v.oLanguage.sUrl?(T.oLanguage.sUrl=v.oLanguage.sUrl,i.getJSON(T.oLanguage.sUrl,null,function(e){a(e),r(x.oLanguage,e),i.extend(!0,T.oLanguage,v.oLanguage,e),st(T)}),b=!0):i.extend(!0,T.oLanguage,v.oLanguage),null===v.asStripeClasses&&(T.asStripeClasses=[S.sStripeOdd,S.sStripeEven]);var D=T.asStripeClasses,P=i("tbody tr:eq(0)",this);-1!==i.inArray(!0,i.map(D,function(e){return P.hasClass(e)}))&&(i("tbody tr",this).removeClass(D.join(" ")),T.asDestroyStripes=D.slice());var E,M=[],N=this.getElementsByTagName("thead");if(0!==N.length&&(B(T.aoHeader,N[0]),M=q(T)),null===v.aoColumns)for(E=[],m=0,p=M.length;p>m;m++)E.push(null);else E=v.aoColumns;for(m=0,p=E.length;p>m;m++)u(T,M?M[m]:null);if(y(T,v.aoColumnDefs,E,function(e,t){h(T,e,t)}),P.length){var F=function(e,t){return e.getAttribute("data-"+t)?t:null};i.each(I(T,P[0]).cells,function(e,t){var i=T.aoColumns[e];if(i.mData===e){var o=F(t,"sort")||F(t,"order"),r=F(t,"filter")||F(t,"search");(null!==o||null!==r)&&(i.mData={_:e+".display",sort:null!==o?e+".@data-"+o:n,type:null!==o?e+".@data-"+o:n,filter:null!==r?e+".@data-"+r:n},h(T,e))}})}var L=T.oFeatures;if(v.bStateSave&&(L.bStateSave=!0,Nt(T,v),Ht(T,"aoDrawCallback",It,"state_save")),v.aaSorting===n){var j=T.aaSorting;for(m=0,p=j.length;p>m;m++)j[m][1]=T.aoColumns[m].asSorting[0]}Et(T),L.bSort&&Ht(T,"aoDrawCallback",function(){if(T.bSorted){var e=Tt(T),t={};i.each(e,function(e,n){t[n.src]=n.dir}),Bt(T,null,"order",[T,e,t]),At(T)}}),Ht(T,"aoDrawCallback",function(){(T.bSorted||"ssp"===zt(T)||L.bDeferRender)&&Et(T)},"sc"),c(T);var O=i(this).children("caption").each(function(){this._captionSide=i(this).css("caption-side")}),R=i(this).children("thead");0===R.length&&(R=i("<thead/>").appendTo(this)),T.nTHead=R[0];var H=i(this).children("tbody");0===H.length&&(H=i("<tbody/>").appendTo(this)),T.nTBody=H[0];var U=i(this).children("tfoot");if(0===U.length&&O.length>0&&(""!==T.oScroll.sX||""!==T.oScroll.sY)&&(U=i("<tfoot/>").appendTo(this)),0===U.length||0===U.children().length?i(this).addClass(S.sNoFooter):U.length>0&&(T.nTFoot=U[0],B(T.aoFooter,T.nTFoot)),v.aaData)for(m=0;m<v.aaData.length;m++)_(T,v.aaData[m]);else(T.bDeferLoading||"dom"==zt(T))&&w(T,i(T.nTBody).children("tr"));T.aiDisplay=T.aiDisplayMaster.slice(),T.bInitialised=!0,b===!1&&st(T)}),t=null,this};var kn=[],Cn=Array.prototype,Tn=function(e){var t,n,o=Jt.settings,r=i.map(o,function(e){return e.nTable});return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?(t=i.inArray(e,r),-1!==t?[o[t]]:null):e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?n=i(e):e instanceof i&&(n=e),n?n.map(function(){return t=i.inArray(this,r),-1!==t?o[t]:null}).toArray():void 0):[]};Kt=function(e,t){if(!this instanceof Kt)throw"DT API must be constructed as a new object";var n=[],o=function(e){var t=Tn(e);t&&n.push.apply(n,t)};if(i.isArray(e))for(var r=0,a=e.length;a>r;r++)o(e[r]);else o(e);this.context=gn(n),t&&this.push.apply(this,t.toArray?t.toArray():t),this.selector={rows:null,cols:null,opts:null},Kt.extend(this,this,kn)},Jt.Api=Kt,Kt.prototype={concat:Cn.concat,context:[],each:function(e){for(var t=0,n=this.length;n>t;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new Kt(t[e],this[e]):null},filter:function(e){var t=[];if(Cn.filter)t=Cn.filter.call(this,e,this);else for(var n=0,i=this.length;i>n;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new Kt(this.context,t)},flatten:function(){var e=[];return new Kt(this.context,e.concat.apply(e,this.toArray()))},join:Cn.join,indexOf:Cn.indexOf||function(e,t){for(var n=t||0,i=this.length;i>n;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,i){var o,r,a,s,l,c,d,u,h=[],p=this.context,f=this.selector;for("string"==typeof e&&(i=t,t=e,e=!1),r=0,a=p.length;a>r;r++)if("table"===t)o=i(p[r],r),o!==n&&h.push(o);else if("columns"===t||"rows"===t)o=i(p[r],this[r],r),o!==n&&h.push(o);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(d=this[r],"column-rows"===t&&(c=Mn(p[r],f.opts)),s=0,l=d.length;l>s;s++)u=d[s],o="cell"===t?i(p[r],u.row,u.column,r,s):i(p[r],u,r,s,c),o!==n&&h.push(o);if(h.length){var v=new Kt(p,e?h.concat.apply([],h):h),m=v.selector;return m.rows=f.rows,m.cols=f.cols,m.opts=f.opts,v}return this},lastIndexOf:Cn.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(Cn.map)t=Cn.map.call(this,e,this);else for(var n=0,i=this.length;i>n;n++)t.push(e.call(this,this[n],n));return new Kt(this.context,t)},pluck:function(e){return this.map(function(t){return t[e]})},pop:Cn.pop,push:Cn.push,reduce:Cn.reduce||function(e,t){return d(this,e,t,0,this.length,1)},reduceRight:Cn.reduceRight||function(e,t){return d(this,e,t,this.length-1,-1,-1)},reverse:Cn.reverse,selector:null,shift:Cn.shift,sort:Cn.sort,splice:Cn.splice,toArray:function(){return Cn.slice.call(this)},to$:function(){return i(this)},toJQuery:function(){return i(this)},unique:function(){return new Kt(this.context,gn(this))},unshift:Cn.unshift},Kt.extend=function(e,t,n){if(t&&(t instanceof Kt||t.__dt_wrapper)){var o,r,a,s=function(e,t,n){return function(){var i=t.apply(e,arguments);return Kt.extend(i,i,n.methodExt),i}};for(o=0,r=n.length;r>o;o++)a=n[o],t[a.name]="function"==typeof a.val?s(e,a.val,a):i.isPlainObject(a.val)?{}:a.val,t[a.name].__dt_wrapper=!0,Kt.extend(e,t[a.name],a.propExt)}},Kt.register=Xt=function(e,t){if(i.isArray(e))for(var n=0,o=e.length;o>n;n++)Kt.register(e[n],t);else{var r,a,s,l,c=e.split("."),d=kn,u=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n].name===t)return e[n];return null};for(r=0,a=c.length;a>r;r++){l=-1!==c[r].indexOf("()"),s=l?c[r].replace("()",""):c[r];var h=u(d,s);h||(h={name:s,val:{},methodExt:[],propExt:[]},d.push(h)),r===a-1?h.val=t:d=l?h.methodExt:h.propExt}}},Kt.registerPlural=Zt=function(e,t,o){Kt.register(e,o),Kt.register(t,function(){var e=o.apply(this,arguments);return e===this?this:e instanceof Kt?e.length?i.isArray(e[0])?new Kt(e.context,e[0]):e[0]:n:e})};var Sn=function(e,t){if("number"==typeof e)return[t[e]];var n=i.map(t,function(e){return e.nTable});return i(n).filter(e).map(function(){var e=i.inArray(this,n);return t[e]}).toArray()};Xt("tables()",function(e){return e?new Kt(Sn(e,this.context)):this}),Xt("table()",function(e){var t=this.tables(e),n=t.context;return n.length?new Kt(n[0]):t}),Zt("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable})}),Zt("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody})}),Zt("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead})}),Zt("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot})}),Zt("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper})}),Xt("draw()",function(e){return this.iterator("table",function(t){R(t,e===!1)})}),Xt("page()",function(e){return e===n?this.page.info().page:this.iterator("table",function(t){ht(t,e)})}),Xt("page.info()",function(){if(0===this.context.length)return n;var e=this.context[0],t=e._iDisplayStart,i=e._iDisplayLength,o=e.fnRecordsDisplay(),r=-1===i;return{page:r?0:Math.floor(t/i),pages:r?1:Math.ceil(o/i),start:t,end:e.fnDisplayEnd(),length:i,recordsTotal:e.fnRecordsTotal(),recordsDisplay:o}}),Xt("page.len()",function(e){return e===n?0!==this.context.length?this.context[0]._iDisplayLength:n:this.iterator("table",function(t){ct(t,e)})});var An=function(e,t,n){if("ssp"==zt(e)?R(e,t):(ft(e,!0),U(e,[],function(n){P(e);for(var i=Y(e,n),o=0,r=i.length;r>o;o++)_(e,i[o]);R(e,t),ft(e,!1)})),n){var i=new Kt(e);i.one("draw",function(){n(i.ajax.json())})}};Xt("ajax.json()",function(){var e=this.context;return e.length>0?e[0].json:void 0}),Xt("ajax.params()",function(){var e=this.context;return e.length>0?e[0].oAjaxData:void 0}),Xt("ajax.reload()",function(e,t){return this.iterator("table",function(n){An(n,t===!1,e)})}),Xt("ajax.url()",function(e){var t=this.context;return e===n?0===t.length?n:(t=t[0],t.ajax?i.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource):this.iterator("table",function(t){i.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),Xt("ajax.url().load()",function(e,t){return this.iterator("table",function(n){An(n,t===!1,e)})});var Dn=function(e,t){var o,r,a,s,l,c,d=[];for(e&&"string"!=typeof e&&e.length!==n||(e=[e]),a=0,s=e.length;s>a;a++)for(r=e[a]&&e[a].split?e[a].split(","):[e[a]],l=0,c=r.length;c>l;l++)o=t("string"==typeof r[l]?i.trim(r[l]):r[l]),o&&o.length&&d.push.apply(d,o);return d},Pn=function(e){return e||(e={}),e.filter&&!e.search&&(e.search=e.filter),{search:e.search||"none",order:e.order||"current",page:e.page||"all"}},En=function(e){for(var t=0,n=e.length;n>t;t++)if(e[t].length>0)return e[0]=e[t],e.length=1,e.context=[e.context[t]],e;return e.length=0,e},Mn=function(e,t){var n,o,r,a=[],s=e.aiDisplay,l=e.aiDisplayMaster,c=t.search,d=t.order,u=t.page;if("ssp"==zt(e))return"removed"===c?[]:vn(0,l.length);if("current"==u)for(n=e._iDisplayStart,o=e.fnDisplayEnd();o>n;n++)a.push(s[n]);else if("current"==d||"applied"==d)a="none"==c?l.slice():"applied"==c?s.slice():i.map(l,function(e){return-1===i.inArray(e,s)?e:null});else if("index"==d||"original"==d)for(n=0,o=e.aoData.length;o>n;n++)"none"==c?a.push(n):(r=i.inArray(n,s),(-1===r&&"removed"==c||r>=0&&"applied"==c)&&a.push(n));return a},In=function(e,t,n){return Dn(t,function(t){var o=ln(t);if(null!==o&&!n)return[o];var r=Mn(e,n);if(null!==o&&-1!==i.inArray(o,r))return[o];if(!t)return r;for(var a=[],s=0,l=r.length;l>s;s++)a.push(e.aoData[r[s]].nTr);return t.nodeName&&-1!==i.inArray(t,a)?[t._DT_RowIndex]:i(a).filter(t).map(function(){return this._DT_RowIndex}).toArray()})};Xt("rows()",function(e,t){e===n?e="":i.isPlainObject(e)&&(t=e,e=""),t=Pn(t);var o=this.iterator("table",function(n){return In(n,e,t)});return o.selector.rows=e,o.selector.opts=t,o}),Xt("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||n})}),Xt("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return fn(e.aoData,t,"_aData")})}),Zt("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){var i=t.aoData[n];return"search"===e?i._aFilterData:i._aSortData})}),Zt("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){M(t,n,e)})}),Zt("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t})}),Zt("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,o){var r=t.aoData;r.splice(n,1);for(var a=0,s=r.length;s>a;a++)null!==r[a].nTr&&(r[a].nTr._DT_RowIndex=a);i.inArray(n,t.aiDisplay);E(t.aiDisplayMaster,n),E(t.aiDisplay,n),E(e[o],n,!1),qt(t)})}),Xt("rows.add()",function(e){var t=this.iterator("table",function(t){var n,i,o,r=[];for(i=0,o=e.length;o>i;i++)n=e[i],r.push(n.nodeName&&"TR"===n.nodeName.toUpperCase()?w(t,n)[0]:_(t,n));return r}),n=this.rows(-1);return n.pop(),n.push.apply(n,t.toArray()),n}),Xt("row()",function(e,t){return En(this.rows(e,t))}),Xt("row().data()",function(e){var t=this.context;return e===n?t.length&&this.length?t[0].aoData[this[0]]._aData:n:(t[0].aoData[this[0]]._aData=e,M(t[0],this[0],"data"),this)}),Xt("row().node()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]].nTr||null:null}),Xt("row.add()",function(e){e instanceof i&&e.length&&(e=e[0]);var t=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?w(t,e)[0]:_(t,e)});return this.row(t[0])});var Nn=function(e,t,n,o){var r=[],a=function(t,n){if(t.nodeName&&"tr"===t.nodeName.toLowerCase())r.push(t);else{var o=i("<tr><td/></tr>").addClass(n);i("td",o).addClass(n).html(t)[0].colSpan=m(e),r.push(o[0])}};if(i.isArray(n)||n instanceof i)for(var s=0,l=n.length;l>s;s++)a(n[s],o);else a(n,o);t._details&&t._details.remove(),t._details=i(r),t._detailsShow&&t._details.insertAfter(t.nTr)},Fn=function(e){var t=e.context;if(t.length&&e.length){var i=t[0].aoData[e[0]];i._details&&(i._details.remove(),i._detailsShow=n,i._details=n)}},Ln=function(e,t){var n=e.context;if(n.length&&e.length){var i=n[0].aoData[e[0]];i._details&&(i._detailsShow=t,t?i._details.insertAfter(i.nTr):i._details.detach(),jn(n[0]))}},jn=function(e){var t=new Kt(e),n=".dt.DT_details",i="draw"+n,o="column-visibility"+n,r="destroy"+n,a=e.aoData;t.off(i+" "+o+" "+r),pn(a,"_details").length>0&&(t.on(i,function(n,i){e===i&&t.rows({page:"current"}).eq(0).each(function(e){var t=a[e];t._detailsShow&&t._details.insertAfter(t.nTr)})}),t.on(o,function(t,n){if(e===n)for(var i,o=m(n),r=0,s=a.length;s>r;r++)i=a[r],i._details&&i._details.children("td[colspan]").attr("colspan",o)}),t.on(r,function(t,n){if(e===n)for(var i=0,o=a.length;o>i;i++)a[i]._details&&Fn(a[i])}))},On="",Rn=On+"row().child",Hn=Rn+"()";Xt(Hn,function(e,t){var i=this.context;return e===n?i.length&&this.length?i[0].aoData[this[0]]._details:n:(e===!0?this.child.show():e===!1?Fn(this):i.length&&this.length&&Nn(i[0],i[0].aoData[this[0]],e,t),this)}),Xt([Rn+".show()",Hn+".show()"],function(){return Ln(this,!0),this}),Xt([Rn+".hide()",Hn+".hide()"],function(){return Ln(this,!1),this}),Xt([Rn+".remove()",Hn+".remove()"],function(){return Fn(this),this}),Xt(Rn+".isShown()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]]._detailsShow||!1:!1});var Bn=/^(.+):(name|visIdx|visible)$/,qn=function(e,t){var n=e.aoColumns,o=pn(n,"sName"),r=pn(n,"nTh");return Dn(t,function(t){var a=ln(t);if(""===t)return vn(n.length);if(null!==a)return[a>=0?a:n.length+a];var s="string"==typeof t?t.match(Bn):"";if(!s)return i(r).filter(t).map(function(){return i.inArray(this,r)}).toArray();switch(s[2]){case"visIdx":case"visible":var l=parseInt(s[1],10);if(0>l){var c=i.map(n,function(e,t){return e.bVisible?t:null});return[c[c.length+l]]}return[f(e,l)];case"name":return i.map(o,function(e,t){return e===s[1]?t:null})}})},Un=function(e,t,o,r){var a,s,l,c,d=e.aoColumns,u=d[t],h=e.aoData;if(o===n)return u.bVisible;if(u.bVisible!==o){if(o){var f=i.inArray(!0,pn(d,"bVisible"),t+1);for(s=0,l=h.length;l>s;s++)c=h[s].nTr,a=h[s].anCells,c&&c.insertBefore(a[t],a[f]||null)}else i(pn(e.aoData,"anCells",t)).detach();u.bVisible=o,j(e,e.aoHeader),j(e,e.aoFooter),(r===n||r)&&(p(e),(e.oScroll.sX||e.oScroll.sY)&&mt(e)),Bt(e,null,"column-visibility",[e,t,o]),It(e)}};Xt("columns()",function(e,t){e===n?e="":i.isPlainObject(e)&&(t=e,e=""),t=Pn(t);var o=this.iterator("table",function(n){return qn(n,e,t)});return o.selector.cols=e,o.selector.opts=t,o}),Zt("columns().header()","column().header()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh})}),Zt("columns().footer()","column().footer()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf})}),Zt("columns().data()","column().data()",function(){return this.iterator("column-rows",function(e,t,n,i,o){for(var r=[],a=0,s=o.length;s>a;a++)r.push(k(e,o[a],t,""));return r})}),Zt("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,i,o,r){return fn(t.aoData,r,"search"===e?"_aFilterData":"_aSortData",n)})}),Zt("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,i,o){return fn(e.aoData,o,"anCells",t)})}),Zt("columns().visible()","column().visible()",function(e,t){return this.iterator("column",function(i,o){return e===n?i.aoColumns[o].bVisible:Un(i,o,e,t)})}),Zt("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return"visible"===e?v(t,n):n})}),Xt("columns.adjust()",function(){return this.iterator("table",function(e){p(e)})}),Xt("column.index()",function(e,t){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===e||"toData"===e)return f(n,t);if("fromData"===e||"toVisible"===e)return v(n,t)}}),Xt("column()",function(e,t){return En(this.columns(e,t))});var zn=function(e,t,o){var r,a,s,l,c,d=e.aoData,u=Mn(e,o),h=fn(d,u,"anCells"),p=i([].concat.apply([],h)),f=e.aoColumns.length;return Dn(t,function(e){if(null===e||e===n){for(a=[],s=0,l=u.length;l>s;s++)for(r=u[s],c=0;f>c;c++)a.push({row:r,column:c});return a}return i.isPlainObject(e)?[e]:p.filter(e).map(function(e,t){return r=t.parentNode._DT_RowIndex,{row:r,column:i.inArray(t,d[r].anCells)}}).toArray()})};Xt("cells()",function(e,t,o){if(i.isPlainObject(e)&&(typeof e.row!==n?(o=t,t=null):(o=e,e=null)),i.isPlainObject(t)&&(o=t,t=null),null===t||t===n)return this.iterator("table",function(t){return zn(t,e,Pn(o))});var r,a,s,l,c,d=this.columns(t,o),u=this.rows(e,o),h=this.iterator("table",function(e,t){for(r=[],a=0,s=u[t].length;s>a;a++)for(l=0,c=d[t].length;c>l;l++)r.push({row:u[t][a],column:d[t][l]});return r});return i.extend(h.selector,{cols:t,rows:e,opts:o}),h}),Zt("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,n){return e.aoData[t].anCells[n]})}),Xt("cells().data()",function(){return this.iterator("cell",function(e,t,n){return k(e,t,n)})}),Zt("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,i){return t.aoData[n][e][i]})}),Zt("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:v(e,n)}})}),Xt(["cells().invalidate()","cell().invalidate()"],function(e){var t=this.selector;return this.rows(t.rows,t.opts).invalidate(e),this}),Xt("cell()",function(e,t,n){return En(this.cells(e,t,n))}),Xt("cell().data()",function(e){var t=this.context,i=this[0];return e===n?t.length&&i.length?k(t[0],i[0].row,i[0].column):n:(C(t[0],i[0].row,i[0].column,e),M(t[0],i[0].row,"data",i[0].column),this)}),Xt("order()",function(e,t){var o=this.context;return e===n?0!==o.length?o[0].aaSorting:n:("number"==typeof e?e=[[e,t]]:i.isArray(e[0])||(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()
}))}),Xt("order.listener()",function(e,t,n){return this.iterator("table",function(i){Pt(i,e,t,n)})}),Xt(["columns().order()","column().order()"],function(e){var t=this;return this.iterator("table",function(n,o){var r=[];i.each(t[o],function(t,n){r.push([n,e])}),n.aaSorting=r})}),Xt("search()",function(e,t,o,r){var a=this.context;return e===n?0!==a.length?a[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){n.oFeatures.bFilter&&G(n,i.extend({},n.oPreviousSearch,{sSearch:e+"",bRegex:null===t?!1:t,bSmart:null===o?!0:o,bCaseInsensitive:null===r?!0:r}),1)})}),Zt("columns().search()","column().search()",function(e,t,o,r){return this.iterator("column",function(a,s){var l=a.aoPreSearchCols;return e===n?l[s].sSearch:void(a.oFeatures.bFilter&&(i.extend(l[s],{sSearch:e+"",bRegex:null===t?!1:t,bSmart:null===o?!0:o,bCaseInsensitive:null===r?!0:r}),G(a,a.oPreviousSearch,1)))})}),Xt("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Xt("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),Xt("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Xt("state.save()",function(){return this.iterator("table",function(e){It(e)})}),Jt.versionCheck=Jt.fnVersionCheck=function(e){for(var t,n,i=Jt.version.split("."),o=e.split("."),r=0,a=o.length;a>r;r++)if(t=parseInt(i[r],10)||0,n=parseInt(o[r],10)||0,t!==n)return t>n;return!0},Jt.isDataTable=Jt.fnIsDataTable=function(e){var t=i(e).get(0),n=!1;return i.each(Jt.settings,function(e,i){(i.nTable===t||i.nScrollHead===t||i.nScrollFoot===t)&&(n=!0)}),n},Jt.tables=Jt.fnTables=function(e){return jQuery.map(Jt.settings,function(t){return!e||e&&i(t.nTable).is(":visible")?t.nTable:void 0})},Jt.camelToHungarian=r,Xt("$()",function(e,t){var n=this.rows(t).nodes(),o=i(n);return i([].concat(o.filter(e).toArray(),o.find(e).toArray()))}),i.each(["on","one","off"],function(e,t){Xt(t+"()",function(){var e=Array.prototype.slice.call(arguments);e[0].match(/\.dt\b/)||(e[0]+=".dt");var n=i(this.tables().nodes());return n[t].apply(n,e),this})}),Xt("clear()",function(){return this.iterator("table",function(e){P(e)})}),Xt("settings()",function(){return new Kt(this.context,this.context)}),Xt("data()",function(){return this.iterator("table",function(e){return pn(e.aoData,"_aData")}).flatten()}),Xt("destroy()",function(t){return t=t||!1,this.iterator("table",function(n){var o,r=n.nTableWrapper.parentNode,a=n.oClasses,s=n.nTable,l=n.nTBody,c=n.nTHead,d=n.nTFoot,u=i(s),h=i(l),p=i(n.nTableWrapper),f=i.map(n.aoData,function(e){return e.nTr});n.bDestroying=!0,Bt(n,"aoDestroyCallback","destroy",[n]),t||new Kt(n).columns().visible(!0),p.unbind(".DT").find(":not(tbody *)").unbind(".DT"),i(e).unbind(".DT-"+n.sInstance),s!=c.parentNode&&(u.children("thead").detach(),u.append(c)),d&&s!=d.parentNode&&(u.children("tfoot").detach(),u.append(d)),u.detach(),p.detach(),n.aaSorting=[],n.aaSortingFixed=[],Et(n),i(f).removeClass(n.asStripeClasses.join(" ")),i("th, td",c).removeClass(a.sSortable+" "+a.sSortableAsc+" "+a.sSortableDesc+" "+a.sSortableNone),n.bJUI&&(i("th span."+a.sSortIcon+", td span."+a.sSortIcon,c).detach(),i("th, td",c).each(function(){var e=i("div."+a.sSortJUIWrapper,this);i(this).append(e.contents()),e.detach()})),!t&&r&&r.insertBefore(s,n.nTableReinsertBefore),h.children().detach(),h.append(f),u.css("width",n.sDestroyWidth).removeClass(a.sTable),o=n.asDestroyStripes.length,o&&h.children().each(function(e){i(this).addClass(n.asDestroyStripes[e%o])});var v=i.inArray(n,Jt.settings);-1!==v&&Jt.settings.splice(v,1)})}),Jt.version="1.10.2",Jt.settings=[],Jt.models={},Jt.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Jt.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},Jt.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Jt.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:i.extend({},Jt.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},o(Jt.defaults),Jt.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},o(Jt.defaults.column),Jt.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:n,oAjaxData:n,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==zt(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==zt(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,i=this.aiDisplay.length,o=this.oFeatures,r=o.bPaginate;return o.bServerSide?r===!1||-1===e?t+i:Math.min(t+e,this._iRecordsDisplay):!r||n>i||-1===e?i:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},Jt.ext=Gt={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Jt.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Jt.version},i.extend(Gt,{afnFiltering:Gt.search,aTypes:Gt.type.detect,ofnSearch:Gt.type.search,oSort:Gt.type.order,afnSortData:Gt.order,aoFeatures:Gt.feature,oApi:Gt.internal,oStdClasses:Gt.classes,oPagination:Gt.pager}),i.extend(Jt.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),function(){var e="";e="";var t=e+"ui-state-default",n=e+"css_right ui-icon ui-icon-",o=e+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";i.extend(Jt.ext.oJUIClasses,Jt.ext.classes,{sPageButton:"fg-button ui-button "+t,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:t+" sorting_asc",sSortDesc:t+" sorting_desc",sSortable:t+" sorting",sSortableAsc:t+" sorting_asc_disabled",sSortableDesc:t+" sorting_desc_disabled",sSortableNone:t+" sorting_disabled",sSortJUIAsc:n+"triangle-1-n",sSortJUIDesc:n+"triangle-1-s",sSortJUI:n+"carat-2-n-s",sSortJUIAscAllowed:n+"carat-1-n",sSortJUIDescAllowed:n+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+t,sScrollFoot:"dataTables_scrollFoot "+t,sHeaderTH:t,sFooterTH:t,sJUIHeader:o+" ui-corner-tl ui-corner-tr",sJUIFooter:o+" ui-corner-bl ui-corner-br"})}();var Vn=Jt.ext.pager;i.extend(Vn,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(e,t){return["previous",Vt(e,t),"next"]},full_numbers:function(e,t){return["first","previous",Vt(e,t),"next","last"]},_numbers:Vt,numbers_length:7}),i.extend(!0,Jt.ext.renderer,{pageButton:{_:function(e,n,o,r,a,s){var l,c,d=e.oClasses,u=e.oLanguage.oPaginate,h=0,p=function(t,n){var r,f,v,m,g=function(t){ht(e,t.data.action,!0)};for(r=0,f=n.length;f>r;r++)if(m=n[r],i.isArray(m)){var b=i("<"+(m.DT_el||"div")+"/>").appendTo(t);p(b,m)}else{switch(l="",c="",m){case"ellipsis":t.append("<span>&hellip;</span>");break;case"first":l=u.sFirst,c=m+(a>0?"":" "+d.sPageButtonDisabled);break;case"previous":l=u.sPrevious,c=m+(a>0?"":" "+d.sPageButtonDisabled);break;case"next":l=u.sNext,c=m+(s-1>a?"":" "+d.sPageButtonDisabled);break;case"last":l=u.sLast,c=m+(s-1>a?"":" "+d.sPageButtonDisabled);break;default:l=m+1,c=a===m?d.sPageButtonActive:""}l&&(v=i("<a>",{"class":d.sPageButton+" "+c,"aria-controls":e.sTableId,"data-dt-idx":h,tabindex:e.iTabIndex,id:0===o&&"string"==typeof m?e.sTableId+"_"+m:null}).html(l).appendTo(t),Rt(v,{action:m},g),h++)}};try{var f=i(t.activeElement).data("dt-idx");p(i(n).empty(),r),null!==f&&i(n).find("[data-dt-idx="+f+"]").focus()}catch(v){}}}});var Wn=function(e,t,n,i){return e&&"-"!==e?(t&&(e=cn(e,t)),e.replace&&(n&&(e=e.replace(n,"")),i&&(e=e.replace(i,""))),1*e):-1/0};return i.extend(Gt.type.order,{"date-pre":function(e){return Date.parse(e)||0},"html-pre":function(e){return sn(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return sn(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return t>e?-1:e>t?1:0},"string-desc":function(e,t){return t>e?1:e>t?-1:0}}),Wt(""),i.extend(Jt.ext.type.detect,[function(e,t){var n=t.oLanguage.sDecimal;return dn(e,n)?"num"+n:null},function(e){if(e&&(!nn.test(e)||!on.test(e)))return null;var t=Date.parse(e);return null!==t&&!isNaN(t)||sn(e)?"date":null},function(e,t){var n=t.oLanguage.sDecimal;return dn(e,n,!0)?"num-fmt"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return hn(e,n)?"html-num"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return hn(e,n,!0)?"html-num-fmt"+n:null},function(e){return sn(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),i.extend(Jt.ext.type.search,{html:function(e){return sn(e)?e:"string"==typeof e?e.replace(en," ").replace(tn,""):""},string:function(e){return sn(e)?e:"string"==typeof e?e.replace(en," "):e}}),i.extend(!0,Jt.ext.renderer,{header:{_:function(e,t,n,o){i(e.nTable).on("order.dt.DT",function(i,r,a,s){if(e===r){var l=n.idx;t.removeClass(n.sSortingClass+" "+o.sSortAsc+" "+o.sSortDesc).addClass("asc"==s[l]?o.sSortAsc:"desc"==s[l]?o.sSortDesc:n.sSortingClass)}})},jqueryui:function(e,t,n,o){var r=n.idx;i("<div/>").addClass(o.sSortJUIWrapper).append(t.contents()).append(i("<span/>").addClass(o.sSortIcon+" "+n.sSortingClassJUI)).appendTo(t),i(e.nTable).on("order.dt.DT",function(i,a,s,l){e===a&&(t.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==l[r]?o.sSortAsc:"desc"==l[r]?o.sSortDesc:n.sSortingClass),t.find("span."+o.sSortIcon).removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed).addClass("asc"==l[r]?o.sSortJUIAsc:"desc"==l[r]?o.sSortJUIDesc:n.sSortingClassJUI))})}}}),Jt.render={number:function(e,t,n,i){return{display:function(o){var r=0>o?"-":"";o=Math.abs(parseFloat(o));var a=parseInt(o,10),s=n?t+(o-a).toFixed(n).substring(2):"";return r+(i||"")+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+s}}}},i.extend(Jt.ext.internal,{_fnExternApiFunc:Yt,_fnBuildAjax:U,_fnAjaxUpdate:z,_fnAjaxParameters:V,_fnAjaxUpdateDraw:W,_fnAjaxDataSrc:Y,_fnAddColumn:u,_fnColumnOptions:h,_fnAdjustColumnSizing:p,_fnVisibleToColumnIndex:f,_fnColumnIndexToVisible:v,_fnVisbleColumns:m,_fnGetColumns:g,_fnColumnTypes:b,_fnApplyColumnDefs:y,_fnHungarianMap:o,_fnCamelToHungarian:r,_fnLanguageCompat:a,_fnBrowserDetect:c,_fnAddData:_,_fnAddTr:w,_fnNodeToDataIndex:x,_fnNodeToColumnIndex:$,_fnGetCellData:k,_fnSetCellData:C,_fnSplitObjNotation:T,_fnGetObjectDataFn:S,_fnSetObjectDataFn:A,_fnGetDataMaster:D,_fnClearTable:P,_fnDeleteIndex:E,_fnInvalidateRow:M,_fnGetRowElements:I,_fnCreateTr:N,_fnBuildHead:L,_fnDrawHead:j,_fnDraw:O,_fnReDraw:R,_fnAddOptionsHtml:H,_fnDetectHeader:B,_fnGetUniqueThs:q,_fnFeatureHtmlFilter:J,_fnFilterComplete:G,_fnFilterCustom:K,_fnFilterColumn:X,_fnFilter:Z,_fnFilterCreateSearch:Q,_fnEscapeRegex:et,_fnFilterData:tt,_fnFeatureHtmlInfo:ot,_fnUpdateInfo:rt,_fnInfoMacros:at,_fnInitialise:st,_fnInitComplete:lt,_fnLengthChange:ct,_fnFeatureHtmlLength:dt,_fnFeatureHtmlPaginate:ut,_fnPageChange:ht,_fnFeatureHtmlProcessing:pt,_fnProcessingDisplay:ft,_fnFeatureHtmlTable:vt,_fnScrollDraw:mt,_fnApplyToChildren:gt,_fnCalculateColumnWidths:bt,_fnThrottle:yt,_fnConvertToWidth:_t,_fnScrollingWidthAdjust:wt,_fnGetWidestNode:xt,_fnGetMaxLenString:$t,_fnStringToCss:kt,_fnScrollBarWidth:Ct,_fnSortFlatten:Tt,_fnSort:St,_fnSortAria:At,_fnSortListener:Dt,_fnSortAttachListener:Pt,_fnSortingClasses:Et,_fnSortData:Mt,_fnSaveState:It,_fnLoadState:Nt,_fnSettingsFromNode:Ft,_fnLog:Lt,_fnMap:jt,_fnBindAction:Rt,_fnCallbackReg:Ht,_fnCallbackFire:Bt,_fnLengthOverflow:qt,_fnRenderer:Ut,_fnDataSource:zt,_fnRowAttributes:F,_fnCalculateEnd:function(){}}),i.fn.dataTable=Jt,i.fn.dataTableSettings=Jt.settings,i.fn.dataTableExt=Jt.ext,i.fn.DataTable=function(e){return i(this).dataTable(e).api()},i.each(Jt,function(e,t){i.fn.DataTable[e]=t}),i.fn.dataTable})}(window,document),define("content/category-sections/merchandising/product-management/views/product-management-home-view",["backbone","../templates/products-home-tpl","../models/product-model","../collections/product-collection","components/featured-occasions/collections/all-occasions-collection","./product-view","global-events","settings","datatables","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s){var l=e.View.extend({tagName:"form",id:"m-product-management",template:t,initialize:function(){var e=this;$.fn.dataTable.ext.search.push(function(t,n,i){if("product-table"!==t.nTable.id)return!0;if(!e.collection)return!0;var n=e.collection.toJSON()[i],o=e.$telefloraCheckbox.is(":checked"),r=e.$customCheckbox.is(":checked"),a=e.$activeCheckbox.is(":checked"),s=e.$inactiveCheckbox.is(":checked"),l=e.$subscriptionCheckbox.is(":checked"),c=e.$nonsubscriptionCheckbox.is(":checked"),d=e.$skusCheckbox.is(":checked"),u=e.$selectCategory.find("option:selected").val().trim(),h=e.$productSearch.val().trim(),p=new RegExp(h,"gi");return!(!p.test(n.name)&&!p.test(n.number)||!o&&"Custom"!==n.type||!r&&"Teleflora"!==n.type||!a&&n.active!==!1||!s&&n.active!==!0||!d&&n.isBaseSku!==!0||!l&&n.subscription!==!1||!c&&n.subscription!==!0||u&&!(n.categories.indexOf(u)>-1))}),$.fn.dataTable.ext.order["dom-text-dollars"]=function(e,t){return this.api().column(t,{order:"index"}).nodes().map(function(e){return parseFloat($("input",e).val().replace("$",""))})}},render:function(){var e=this;return o.fetchCustom().done(function(){e.$el.html(e.template({baseUrl:s.productManagementBaseUrl,allOccasions:o.toJSON()})),e.cacheElem(),e.delegateEvents()}),$.when(i.fetchCustom(),o.fetchCustom()).done(function(){e.dataTable&&e.dataTable.destroy(),e.collection=i.deepClone(),e.addAllProducts(e.collection),e.applyDataTables(),e.applyToolTips(),e.validate(),e.uiCheckBoxes()}),e},events:{"click #new-btn":"handleCreate","click #save-btn":"handleSave","keydown #productSearch":"handleSearch","change #productCheckbox-Teleflora":"handleSearch","change #productCheckbox-Custom":"handleSearch","change #productCheckbox-Active":"handleSearch","change #productCheckbox-Inactive":"handleSearch","change #productCheckbox-Subscription":"handleSearch","change #productCheckbox-Nonsubscription":"handleSearch","change #productCheckbox-Skus":"handleSearch","click #filter-view":"toggleFilterView","click #close-filter-view":"toggleFilterView","change #selectCategory":"handleSearch"},cacheElem:function(){this.$productList=this.$el.find("#product-list"),this.$productTable=this.$el.find("#product-table"),this.$telefloraCheckbox=this.$el.find("#productCheckbox-Teleflora"),this.$customCheckbox=this.$el.find("#productCheckbox-Custom"),this.$activeCheckbox=this.$el.find("#productCheckbox-Active"),this.$inactiveCheckbox=this.$el.find("#productCheckbox-Inactive"),this.$subscriptionCheckbox=this.$el.find("#productCheckbox-Subscription"),this.$nonsubscriptionCheckbox=this.$el.find("#productCheckbox-Nonsubscription"),this.$skusCheckbox=this.$el.find("#productCheckbox-Skus"),this.$skusCheckbox=this.$el.find("#productCheckbox-Skus"),this.$selectCategory=this.$el.find("#selectCategory"),this.$filterPanel=this.$el.find(".search-filters"),this.$filterBtn=this.$el.find("#filter-view"),this.$tip=this.$el.find(".tooltip-change"),this.$productSearch=this.$el.find("#productSearch"),this.$filterChecks=this.$el.find("#product-search-checkboxes")},toggleFilterView:function(){this.$filterPanel.fadeToggle(200),this.$filterBtn.toggleClass("active")},handleCreate:function(e){e.preventDefault(),e.stopPropagation(),a.trigger("form:cancel:url",e.currentTarget.href)},handleSave:function(){i.set(this.collection.toJSON()),a.trigger("form:save",this.$tip)},addProduct:function(e){var t=new r({model:e,parent:this});this.$productList.append(t.render().el)},addAllProducts:function(e){this.$productList.empty(),e.each(this.addProduct,this)},applyDataTables:function(){this.dataTable=this.$productTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!0,processing:!1,searching:!0,serverSide:!1,stateSave:!1,bDestroy:!0,columns:[null,{orderable:!1},null,{orderable:!1},{orderDataType:"dom-text-dollars",type:"numeric"},{orderDataType:"dom-text-dollars",type:"numeric"},{orderable:!1},{orderable:!1}],order:[],columnDefs:[{orderable:!1,targets:0}],info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},uiCheckBoxes:function(){this.$filterChecks.buttonset()},debounce:null,handleSearch:function(){var e=this;e.debounce&&clearTimeout(e.debounce),e.debounce=setTimeout(function(){e.dataTable.draw()},100)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validate:function(){this.$el.validate({}),jQuery.validator.addClassRules({"f-myPrice":{required:!0,number:!0,dollars:!0},"f-holidayPrice":{number:!0,dollars:!0}})}});return new l}),define("content/category-sections/merchandising/product-management/templates/create-edit-product-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Create ")?"":__t)+'Product</h2>\r\n			<div class="btn-panel">\r\n					<!-- Start of button  - confirmation modal -->\r\n		',"Teleflora"===type&&(__p+='\r\n				<button type="button" id="reset-btn" class="btn btn-submit">Reset</button>\r\n		'),__p+='	\r\n		<!-- end of Button - confirmation modal -->\r\n				<button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" type="button" class="btn btn-submit">',id||(__p+='<i class="icon icon-add"></i>'),__p+='Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Here you can '+(null==(__t=id?"edit ":"create ")?"":__t)+' products for your site. This page will allow you to change all of the details for each individual product.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n\r\n		<div class="col-12">\r\n			<div class="panel-title">Product Details <div class="panel-subtitle">'+(null==(__t=type)?"":__t)+" Product  |  ID "+(null==(__t=id)?"":__t)+'</div></div>\r\n		</div>\r\n	</div>\r\n	<div class="row y-space-top-m">\r\n		<div class="col-4 form-section">\r\n			<label for="f-name">Name</label><i class="icon icon-tool-tip x-space-s" title="This is the name of the product that will be displayed across the website."></i>\r\n			<input  type="text" id="f-name" name="'+(null==(__t="Teleflora"===type?"f-name-teleflora":"f-name")?"":__t)+'" value="'+(null==(__t=name)?"":__t)+'">\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<label for="f-number">Item Number</label><i class="icon icon-tool-tip x-space-s" title="This is the product price point number that can be used to reference or search for the product."></i>\r\n			<input type="text" id="f-number" name="f-number" value="'+(null==(__t=number)?"":__t)+'" ',"Teleflora"===type&&(__p+="disabled"),__p+='>\r\n		</div>\r\n		<div class="col-3">\r\n			<label for="f-type2">Delivery Type</label>\r\n			<div class="select-container">\r\n			    <select id="f-type2" name="f-type2">\r\n			        <option selected disabled hidden value="'+(null==(__t=type2)?"":__t)+'">'+(null==(__t=type2)?"":__t)+'</option>\r\n			        <option value="Hand Delivered">Hand Delivered</option>\r\n			        ',"Teleflora"!==type&&(__p+='<option value="Drop Shipped">Drop Shipped</option>'),__p+='\r\n			        <option value="Browse Only">Browse Only</option>\r\n			    </select>\r\n			</div>\r\n		</div>\r\n		<div class="col-2">\r\n			<div class="label">Active<i title="This toggles is the product is active or inactive. If it is active it will be shown on your site. If it is inactive it will be removed." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n			<label for="f-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		',"Teleflora"!==type&&(__p+='\r\n		<div class="col-4">\r\n			<label for="f-type3">Product Type</label>\r\n			<div class="select-container">\r\n			    <select id="f-type3" name="f-type3">\r\n			        <option selected disabled hidden value="'+(null==(__t=type3)?"":__t)+'">'+(null==(__t=type3)?"":__t)+'</option>\r\n			        <option value="Basket Arrangement">Basket Arrangement</option>\r\n			        <option value="Boutonniere">Boutonniere</option>\r\n			        <option value="Container Arrangement">Container Arrangement</option>\r\n			        <option value="Corsage">Corsage</option>\r\n			        <option value="Gift Basket">Gift Basket</option>\r\n			        <option value="Plant">Plant</option>\r\n			        <option value="Specialty Arrangement">Specialty Arrangement</option>\r\n			        <option value="Sympathy">Sympathy (set piece)</option>\r\n			        <option value="Vase Arrangement">Vase Arrangement</option>\r\n			        <option value="Wedding Bouquet Holder">Wedding Bouquet (hand-tied or holder)</option>\r\n			        <option value="Wedding Bouquet Wired">Wedding Bouquet (wired and taped)</option>\r\n			        <option value="Wreaths">Wreaths/Swags</option>\r\n			        <option value="Other">Other</option>\r\n			    </select>\r\n			</div>\r\n		</div>\r\n		'),__p+="\r\n	</div>\r\n	","Drop Shipped"===type2&&(__p+='\r\n		<div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Drop Shipping Methods\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<table class="table alternate">\r\n					<thead>\r\n						<th>Drop Shipping Method</th>\r\n						<th>Default Fee</th>\r\n						<th>Override Fee</th>\r\n						<th>Status</th>\r\n					</thead>\r\n					<tbody id="dropship-list"></tbody>\r\n	  		</table>\r\n			</div>\r\n		</div>\r\n	'),__p+='\r\n\r\n\r\n</div>\r\n\r\n<div id="tabs">\r\n	<ul>\r\n		<li><a class="product-management-edit-tab" href="#product-info">Product Info & Image</a></li>\r\n		<li><a class="product-management-edit-tab" href="#addons">Add-Ons</a></li>\r\n		<li><a class="product-management-edit-tab" href="#categories">Categories</a></li>\r\n		<li><a class="product-management-edit-tab" href="#attributes">Attributes</a></li>\r\n		<li><a class="product-management-edit-tab" href="#related-products">Related Products</a></li>\r\n		<li><a class="product-management-edit-tab" href="#settings">Settings</a></li>\r\n		',"Teleflora"==type&&(__p+='<li><a class="product-management-edit-tab" href="#product-recipe">Recipe</a></li>'),__p+='\r\n	</ul>\r\n\r\n    <div id="product-info">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Price Points</div>\r\n					',"Teleflora"!==type&&(__p+='\r\n						<button id="add-sku-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-add"></i>Add Price Point</button>\r\n					'),__p+='\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced panel alert-panel hidden-alt" id="sku-alert">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-1">\r\n						<div class="icon icon-4x icon-warning"></div>\r\n					</div>\r\n					<div class="col-11 alert-text">\r\n						You are allowed a maximum of 12 Price Points per product\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div id="sku-list"></div>\r\n\r\n		<div class="panel">\r\n			<div class="row row-spaced">\r\n				<div class="col-12">\r\n					<div class="panel-title clearfix">Product Information</div>\r\n				</div>\r\n			</div> \r\n\r\n			',"Browse Only"!==type2&&(__p+='\r\n				<div class="row ">\r\n					<div class="col-12 form-section">\r\n						<label for="f-description">Product Description</label><i title="This is a block of text that will be shown on the product detail page for this product." class="icon icon-tool-tip x-space-s"></i>\r\n						<textarea  name="f-description" id="f-description" class="size-3">'+(null==(__t=description)?"":__t)+"</textarea>\r\n				  	</div>\r\n				</div>\r\n\r\n		    "),__p+='\r\n\r\n			<div class="row">\r\n			  	<div class="col-12">\r\n				  	<div class="form-section">\r\n						<label for="f-additionalInfo">Additional Product Info</label><i title="This is a smaller text area that is shown underneath the Product Description." class="icon icon-tool-tip x-space-s"></i>\r\n						<textarea  name="f-additionalInfo" id="f-additionalInfo" class="size-2">'+(null==(__t=additionalInfo)?"":__t)+'</textarea>\r\n						<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n				  	</div>\r\n			  	</div>\r\n			</div>\r\n		</div>\r\n\r\n			<div class="row row-spaced hidden-alt" id="applyToAllSkus">\r\n				<div class="col-12 form-section">\r\n				    <div class="label">Show Descriptions of All Price Points<i title="If this is turned ON, you can specify the description fields for each price point of this product. If it is OFF, the descriptions above will apply to all price points." class="icon icon-tool-tip x-space-s"></i></div>\r\n				    <input type="checkbox" id="f-productDescriptionVariants" name="f-productDescriptionVariants" class="on-off-switch" />						    \r\n				    <label for="f-productDescriptionVariants" class="on-off-switch-label">\r\n				        <div class="on-off-switch-state">on</div>\r\n				    </label>\r\n				</div>\r\n		    </div>\r\n\r\n			<div class="row form-section additionalProductInfo hidden-alt">\r\n				\r\n				<div class="col-12">\r\n					<div id="sku-product-description-list"></div>\r\n				</div>\r\n			</div>\r\n\r\n				<!-- <div class="row">\r\n				</div> -->\r\n<!-- \r\n			</div> -->\r\n\r\n	  <div id="additional-information" class="row row-spaced clearfix">\r\n	    <div class="col-12">\r\n	    	<div class="panel-title"><i class="icon icon-closed x-space-s"></i>Additional Information (optional)</div>\r\n	    </div>\r\n	  </div>\r\n\r\n	  <div class="accordion">\r\n\r\n	  	',"Browse Only"!==type2&&(__p+='\r\n	  		<div class="panel row row-spaced hideSection">\r\n		  		<div class="row">\r\n		  			<div class="col-12">\r\n						<div class="panel-title">Discount Price <i title="This is the discount price of the product." class="icon icon-tool-tip x-space-s"></i></div>\r\n					</div>\r\n			  	</div>\r\n			  	<div class="row form-section y-space-top-m">\r\n			  		<div class="col-12">\r\n			  			<div class="row form-section col-12">\r\n\r\n							  <div class="col-3 form-section">\r\n							    <label for="f-discountAmount">Discount Amount</label><i class="icon icon-tool-tip x-space-s" title="This is how much you would like to discount the product."></i>\r\n							    <div class="dollar-container">\r\n							    <input type="text" id="f-discountAmount" name="f-discountAmount" value="'+(null==(__t=discountAmount)?"":__t)+'">\r\n							  	</div>\r\n							  </div>\r\n\r\n							  <div class="col-3 form-section">\r\n							    <label for="f-discountStartDate">Start Date</label><i title="The discount will be offered starting on this date." class="icon icon-tool-tip x-space-s"></i>\r\n							    <div class="date-container">\r\n							        <input  type="text" id="f-discountStartDate" name="f-discountStartDate" class="date" value="'+(null==(__t=discountStartDate)?"":__t)+'">\r\n							    </div>\r\n							  </div>\r\n\r\n							  <div class="col-3 form-section">\r\n							    <label for="f-discountEndDate">End Date</label><i title="The discount will no longer be available on this date." class="icon icon-tool-tip x-space-s"></i>\r\n							    <div class="date-container">\r\n							        <input type="text" id="f-discountEndDate" name="f-discountEndDate" class="date" value="'+(null==(__t=discountEndDate)?"":__t)+'">\r\n							    </div>\r\n							  </div>\r\n\r\n							  <div class="col-3">\r\n							    <div class="label">Show All Price Points<i title="This toggles if the discount will be applied to all variants of this product." class="icon icon-tool-tip x-space-s"></i></div>\r\n							    <input type="checkbox" id="f-discountVariantsActive" name="f-discountVariantsActive" class="on-off-switch" />\r\n							    <label for="f-discountVariantsActive" class="on-off-switch-label">\r\n							        <div class="on-off-switch-state">on</div>\r\n							    </label>\r\n							  </div>\r\n						</div>\r\n			  		</div>\r\n                <div class="row x-space-s">\r\n			  		<div id="sku-discount-list" class="col-12 '+(null==(__t=discountVariantsActive?"hidden-alt":"")?"":__t)+'">\r\n\r\n\r\n			  		</div>\r\n			  	</div>\r\n\r\n			</div>\r\n		</div>\r\n		'),__p+='\r\n\r\n\r\n\r\n		\r\n  		 <div class="panel row row-spaced">\r\n	  		<div class="row">\r\n	  			<div class="col-12">\r\n					 <div class="panel-title">SEO Information <i title="This area will allow you to edit the search engine optimization information for this product." class="icon icon-tool-tip x-space-s"></i></div>\r\n				</div>\r\n		  	</div>\r\n		  	<div class="row form-section y-space-top-m">\r\n		  		<div class="col-12">\r\n		  			<div class="row form-section col-12">\r\n						<div class="col-12 form-section">\r\n			  				<label for="f-meta-title">Page Title</label><i class="icon icon-tool-tip x-space-s" title="This is the text that appears in the page tab at the top of your browser window while looking at the product."></i>\r\n			  				<input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n						</div>\r\n			  			<div class="col-6 form-section">\r\n			  				<label for="f-meta-desc">Meta Description</label><i class="icon icon-tool-tip x-space-s" title="This is the text that appears on search engines and should consist of a short simple paragraph describing the product."></i>\r\n			  				<textarea name="f-meta-desc" id="f-meta-desc" class="size-2">'+(null==(__t=metaDescription)?"":__t)+'</textarea>\r\n			  			</div>\r\n			  			<div class="col-6 form-section">\r\n			  				<label for="f-meta-keywords">Keywords</label><i class="icon icon-tool-tip x-space-s" title="Here you can list a few comma separated keywords that describe your product."></i>\r\n			  				<textarea id="f-meta-keywords" name="f-meta-keywords" class="size-2">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n			  			</div>\r\n			  			<div class="col-12 form-section">\r\n			  				<label for="f-meta-tags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="Here you can add any additional meta tags you need for tracking or other purposes. This area is optional."></i>\r\n			  				<textarea name="f-meta-tags" id="f-meta-tags" class="size-3">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n			  				<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n			  			</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n	  </div>\r\n\r\n  </div>\r\n  <!-- end product info -->\r\n\r\n  <!-- start add ons -->\r\n  <div id="addons">\r\n  	<div class="row row-spaced">\r\n  		<div class="col-12" id="addons-container">\r\n  		</div>\r\n  	</div>\r\n  </div>\r\n  <!-- end add ons -->\r\n\r\n  <!-- start categories -->\r\n  <div id="categories">\r\n  	<div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Product Categories\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n	  <div class="row row-spaced">\r\n	  	<div id="main-categories-container" class="col-12">\r\n\r\n	  	</div>\r\n	  </div>\r\n	  <div class="row row-spaced form-section">\r\n	  	<div class="col-12">\r\n	  		<div class="label">Show All Price Points<i title="This will toggle applying the option to all variants of this particular product." class="icon icon-tool-tip x-space-s"></i></div>\r\n	  		<input type="checkbox" id="f-categoriesVariantsActive" name="f-categoriesVariantsActive" class="on-off-switch" />\r\n	  		<label for="f-categoriesVariantsActive" class="on-off-switch-label">\r\n	  		    <div class="on-off-switch-state">on</div>\r\n	  		</label>\r\n	  	</div>\r\n	  </div>\r\n\r\n	  <div class="'+(null==(__t=categoriesVariantsActive?"hidden-alt":"")?"":__t)+'" id="sku-categories-container"></div>\r\n  </div>\r\n  <!-- end categories -->\r\n\r\n  <!-- start attributes -->\r\n  <div id="attributes">\r\n  	<div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Product Attributes\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n\r\n	  <div class="row row-spaced panel form-section">\r\n	  	<div class="col-6">\r\n	  		<label for="f-productClassification">Product Classification</label>\r\n	  		<div class="select-container">\r\n	  		    <select id="f-productClassification" name="f-productClassification">\r\n	  		        <option selected disabled hidden value="'+(null==(__t=productClassification)?"":__t)+'">'+(null==(__t=productClassification)?"":__t)+'</option>\r\n	  		        <option value="Bouquet">Bouquet</option>\r\n	  		        <option value="Plant">Plant</option>\r\n	  		        <option value="Gift Basket">Gift Basket</option>\r\n	  		        <option value="Vase">Vase</option>\r\n	  		    </select>\r\n	  		</div>\r\n	  	</div>\r\n	  	<div class="col-6">\r\n	  		<label for="f-productOrientation">Product Orientation</label>\r\n	  		<div class="select-container">\r\n	  		    <select id="f-productOrientation" name="f-productOrientation"',"Teleflora"===type&&(__p+=" disabled"),__p+='>\r\n	  		        <option selected disabled hidden value="'+(null==(__t=productOrientation)?"":__t)+'">'+(null==(__t=productOrientation)?"":__t)+'</option>\r\n	  		        <option value="One Sided">One Sided</option>\r\n	  		        <option value="All Around">All Around</option>\r\n	  		        <option value="N/A">N/A</option>\r\n	  		    </select>\r\n	  		</div>\r\n	  	</div>	  	\r\n	  </div>\r\n\r\n	  ',"Teleflora"!==type&&(__p+='\r\n	  <div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Flowers in This Bouquet\r\n	      </div>\r\n	    </div>\r\n	  </div>  \r\n	  <div class="row row-spaced">\r\n	  	<div id="main-flower-container" class="col-12">\r\n	  	</div>\r\n	  </div>\r\n	  '),__p+='\r\n\r\n	  <div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Bouquet Style\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n\r\n	  <div class="row row-spaced">\r\n	  	<div id="bouquet-style-container" class="col-12">\r\n\r\n	  	</div>\r\n	  </div>\r\n\r\n	  <div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Colors in This Bouquet\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n\r\n	  <div class="row row-spaced">\r\n	  	<div id="bouquet-color-container" class="col-12">\r\n\r\n	  	</div>\r\n	  </div>\r\n\r\n	  <div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Size (Dimensions)\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n\r\n	  <div class="row row-spaced panel form-section">\r\n		  <div class="col-3 form-section">\r\n		    <label for="f-width">'+(null==(__t=skuLabel)?"":__t)+' Width</label><i class="icon icon-tool-tip x-space-s" title="This is the approximate width of the product once it has been created."></i>\r\n		    <input type="text" id="f-width" name="f-width" value="'+(null==(__t=width)?"":__t)+'">\r\n		  </div>\r\n		  <div class="col-3 form-section">\r\n		    <label for="f-height">'+(null==(__t=skuLabel)?"":__t)+' Height</label><i class="icon icon-tool-tip x-space-s" title="This is the approximate height of the product once it has been created."></i>\r\n		    <input type="text" id="f-height" name="f-height" value="'+(null==(__t=height)?"":__t)+'">\r\n		  </div>\r\n		\r\n\r\n		        <div class="row">\r\n			  		<div id="sku-size-dimension-list" class="col-12 '+(null==(__t=sizeDimensionVariantsActive?"hidden-alt":"")?"":__t)+'">\r\n\r\n\r\n			  		</div>\r\n			  	</div>\r\n        </div>\r\n\r\n\r\n	  <div class="'+(null==(__t=attributesVariantsActive?"hidden-alt":"")?"":__t)+'" id="sku-flowers-container"></div>\r\n  </div>\r\n  <!-- end attributes -->\r\n\r\n  <!-- start related products -->\r\n  <div id="related-products">\r\n  	<div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Related Products\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n	  <div class="row row-spaced">\r\n	  	<div class="col-12">\r\n	  		Select up to 5 products to show in the "You May Also Like" section at the bottom of the product page.\r\n	  	</div>\r\n	  </div>\r\n\r\n	  <div id="related-products-container"></div>\r\n  </div>\r\n  <!-- end related products -->\r\n\r\n  <!-- start settings -->\r\n  <div id="settings">\r\n',"Hand Delivered"===type2&&(__p+='\r\n  	<div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        Delivery\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n\r\n	  <div class="row row-spaced form-section">\r\n	  	<div class="col-4">\r\n	  		<div class="label">Local Delivery Only<i title="This toggles if the product is available only in your area, or if anyone can purchase it." class="icon icon-tool-tip x-space-s"></i></div>\r\n	  		<input '+(null==(__t=localDeliveryActive?"checked":"")?"":__t)+' type="checkbox" id="f-localDeliveryActive" name="f-localDeliveryActive" class="on-off-switch" />\r\n	  		<label for="f-localDeliveryActive" class="on-off-switch-label">\r\n	  		    <div class="on-off-switch-state">on</div>\r\n	  		</label>\r\n	  	</div>\r\n	  	<div class="col-4">\r\n	  		<div class="label">No Same-Day Delivery<i title="This toggles if this product is available for same day delivery or not." class="icon icon-tool-tip x-space-s"></i></div>\r\n	  		<input '+(null==(__t=noSameDayDeliveryActive?"checked":"")?"":__t)+' type="checkbox" id="f-noSameDayDeliveryActive" name="f-noSameDayDeliveryActive" class="on-off-switch" />\r\n	  		<label for="f-noSameDayDeliveryActive" class="on-off-switch-label">\r\n	  		    <div class="on-off-switch-state">on</div>\r\n	  		</label>\r\n	  	</div>\r\n	  	<div class="col-4">\r\n	  		<div class="label">In-Store pickup only<i title="This toggles if this product is only available for in-store pickup or if it is deliverable." class="icon icon-tool-tip x-space-s"></i></div>\r\n	  		<input '+(null==(__t=inStorePickupActive?"checked":"")?"":__t)+' type="checkbox" id="f-inStorePickupActive" name="f-inStorePickupActive" class="on-off-switch" />\r\n	  		<label for="f-inStorePickupActive" class="on-off-switch-label">\r\n	  		    <div class="on-off-switch-state">on</div>\r\n	  		</label>\r\n	  	</div>\r\n  	</div>\r\n '),__p+="\r\n\r\n		","Browse Only"!==type2&&(__p+='\r\n	  <div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title">\r\n	        '+(null==(__t="Drop Shipped"===type2?"Product Settings":"Others")?"":__t)+"\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n		"),__p+='\r\n\r\n  	<div class="row row-spaced form-section">\r\n  		',"Browse Only"!==type2&&(__p+='\r\n  		<div class="col-4">\r\n  			<div class="label">Tax Free<i title="If this is turned ON, the price of this product will not be included when calculating sales tax at the end of an order." class="icon icon-tool-tip x-space-s"></i></div>\r\n  			<input '+(null==(__t=taxFreeActive?"checked":"")?"":__t)+' type="checkbox" id="f-taxFreeActive" name="f-taxFreeActive" class="on-off-switch" />\r\n  			<label for="f-taxFreeActive" class="on-off-switch-label">\r\n  			    <div class="on-off-switch-state">on</div>\r\n  			</label>\r\n  		</div>\r\n  		'),__p+='\r\n\r\n	  	<div class="col-4">\r\n	  		<label for="f-merchandisingHighlight">Merchandising Icon</label>\r\n	  		<div class="select-container">\r\n			    <select id="f-merchandisingHighlight" name="f-merchandisingHighlight">\r\n		        <option selected disabled hidden value="'+(null==(__t=merchandisingHighlight)?"":__t)+'">'+(null==(__t=merchandisingHighlight)?"":__t)+'</option>\r\n		        <option value="Sold Out">Sold Out</option>\r\n		        <option value="Hot">Hot</option>\r\n		        <option value="Best Seller">Best Seller</option>\r\n		        <option value="Promo">Promo</option>\r\n			    </select>\r\n	  		</div>\r\n	  	</div>\r\n  	</div>\r\n  </div>\r\n  <!-- end settings -->\r\n<div>\r\n  <!-- start recipe -->\r\n  ',"Teleflora"==type&&(__p+='\r\n  <div id="product-recipe">\r\n  	<div class="row row-spaced">\r\n	    <div class="col-12">\r\n	      <div class="panel-title clearfix">\r\n	      	<div class="y-space-top-m pull-left">Product Recipe</div>\r\n	        <button id="print-recipe-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-print"></i>Print Recipe</button>\r\n	      </div>\r\n	    </div> \r\n	  </div>\r\n  	<div class="row row-spaced form-section">\r\n  		<div class="col-12">\r\n  			  <textarea name="f-recipe" id="f-recipe" class="size-4" disabled>'+(null==(__t=recipe)?"":__t)+"</textarea>\r\n  		</div>\r\n  	</div>\r\n  </div> \r\n  "),__p+='\r\n  <!-- end recipe -->\r\n  		    <div id="print-recipe-modal"></div>\r\n\r\n  </div>\r\n</div>';
return __p}}),define("content/category-sections/merchandising/product-management/templates/sku-entry-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="col-12">\n',1==isBaseSku&&(__p+='\n  <div class="row form-section y-space-top-m">\n    <div class="col-6-20">\n      <label for="name-'+(null==(__t=id)?"":__t)+'">Price Point Label</label><i class="icon icon-tool-tip x-space-s" title="This is a name used to distinguish the different price points for this product. Ex: Standard, Deluxe, Premium"></i>\n    </div>\n',"Browse Only"!==type2&&(__p+="\n  ","Teleflora"===type&&(__p+='\n    <div class="col-4-20">\n      <label for="f-suggestedPrice-'+(null==(__t=id)?"":__t)+'">Suggested Price</label><i class="icon icon-tool-tip x-space-s" title="This is the Teleflora suggested price for this product."></i>\n    </div>\n  '),__p+='\n    <div class="col-4-20">\n      <label for="f-myPrice-'+(null==(__t=id)?"":__t)+'">'+(null==(__t="Teleflora"===type?"My":"")?"":__t)+' Price</label><i class="icon icon-tool-tip x-space-s" title="This is the current price for the product on your site."></i>\n\n    </div>\n    <div class="col-4-20">\n      <label for="f-holidayPrice-'+(null==(__t=id)?"":__t)+'">Holiday Upgrade</label><i class="icon icon-tool-tip x-space-s" title="During holidays, this is how much the product price will be increased."></i>\n\n    </div>\n'),__p+='\n    <div class="'+(null==(__t="Teleflora"===type?"col-2-20":"col-3-20")?"":__t)+'">\n      <label for="f-image">Image</label><i class="icon icon-tool-tip x-space-s" title="This allows you to upload product images for this product to be shown on your site."></i>\n    </div>\n',"Browse Only"!==type2&&(__p+="\n  ","Teleflora"!==type&&(__p+="\n  <!-- if(type !== 'Teleflora' && canDelete) { -->\n    <div class=\""+(null==(__t="Teleflora"===type?"col-2-20":"col-3-20")?"":__t)+'">\n      <label for="f-delete">Delete</label>\n    </div>\n  '),__p+="\n"),__p+="\n  </div>\n"),__p+='  \n  <div class="row form-section">\n    <div class="col-6-20">\n      <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="name-'+(null==(__t=id)?"":__t)+'" name="name-'+(null==(__t=id)?"":__t)+'" value="'+(null==(__t=skuLabel)?"":__t)+'">\n    </div>\n',"Browse Only"!==type2&&(__p+="\n  ","Teleflora"===type&&(__p+='\n    <div class="col-4-20 form-section">\n      <div class="dollar-container">\n      <input disabled type="text" id="f-suggestedPrice-'+(null==(__t=id)?"":__t)+'" name="f-suggestedPrice-'+(null==(__t=id)?"":__t)+'" class="f-suggestedPrice" value="'+(null==(__t=suggestedPrice)?"":__t)+'">\n      </div>\n    </div>\n  '),__p+='\n    <div class="col-4-20 form-section">\n      <div class="dollar-container">\n      <input type="text" id="f-myPrice-'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t="Teleflora"===type?"f-myPrice-teleflora":"f-myPrice")?"":__t)+'" class="'+(null==(__t="Teleflora"===type?"f-myPrice-teleflora":"f-myPrice")?"":__t)+'" value="'+(null==(__t=myPrice)?"":__t)+'">\n      </div>\n    </div>\n    <div class="col-4-20 form-section">\n      <div class="dollar-container">\n      <input type="text" id="f-holidayPrice-'+(null==(__t=id)?"":__t)+'" name="f-holidayPrice" class="f-holidayPrice" value="'+(null==(__t=holidayPrice)?"":__t)+'">\n      </div>\n    </div>\n'),__p+="\n\n","Teleflora"===type?__p+='\n    <div class="col-2-20">\n      <img class="y-space-top-xs" src="'+(null==(__t="http://s7d2.scene7.com/is/image/Teleflora/"+number+"?wid=40&fmt=jpeg&qlt=90,0&op_sharpen=0&resMode=bilin&op_usm=1.0,0.5,1.0,0&iccEmbed=0&layer=1&opac=0&layer=2&opac=55&layer=5&opac=0")?"":__t)+'">\n    </div>\n':(__p+='\n    <div class="col-3-20">\n      ',__p+=imgA1?'\n        <img class="y-space-top-xs image-upload" src="'+(null==(__t=imgA1)?"":__t)+'">\n      ':'\n        <button type="button" class="icon icon-btn icon-image icon-2x y-space-s image-upload"></button>\n      ',__p+="\n    </div>\n"),__p+="\n\n","Browse Only"!==type2&&(__p+="\n  ","Teleflora"!==type&&(__p+="\n  <!-- if(type !== 'Teleflora' && canDelete) { -->\n    <div class=\""+(null==(__t="Teleflora"===type?"col-2-20":"col-3-20")?"":__t)+'">\n      <button type="button" class="icon icon-btn icon-trash icon-2x y-space-s"></button>\n    </div>\n  '),__p+="\n"),__p+="\n  </div>\n\n",1==isBaseSku&&(__p+='\n  <div id="product-image-modal"></div>\n'),__p+="\n\n</div>";return __p}}),define("content/category-sections/merchandising/product-management/templates/product-image-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="image-modal" class="left-align">\r\n  <div id="aviary" class="hidden-alt"></div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">'+(null==(__t=name)?"":__t)+' Images</h2>\r\n        <button type="button" id="save-btn" class="btn btn-submit pull-right left-offset-m hidden">Save</button>        \r\n        <button type="button" id="cancel-btn" class="btn btn-other pull-right">Cancel</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n  <div class="row panel alert-panel hidden-alt">\r\n    <div class="col-12">\r\n      <div class="row">\r\n        <div class="col-1">\r\n          <div class="icon icon-3x icon-warning"></div>\r\n        </div>\r\n        <div class="col-11 alert-text left-align">\r\n          You have uploaded an invalid image file.  Please upload image files that have\r\n          extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12 left-align">\r\n      Shown below are the various images for the '+(null==(__t=name)?"":__t)+' product used on your site. You can click one of the below images to edit it or upload a new version. You can also change the editing mode to "advanced" if you would like to edit the different sizes of each image manually. Otherwise, eSAT will automatically size the product\'s images to fit your site.\r\n    </div>\r\n  </div>\r\n  <div class="row row-spaced">    \r\n    <div id="edit-btn-panel" class="col-6 left-align hidden-alt y-space-top-l form-section">\r\n      <button type="button" id="delete-btn" class="btn btn-cancel">Delete</button>\r\n      <button type="button" id="edit-btn" class="btn btn-other x-space-s">Edit</button>\r\n      <button type="button" id="upload-button" class="btn btn-submit btn-file x-space-s">\r\n        <input type="file" id="upload-btn" accept="image/*">\r\n        <i class="icon icon-add icon-lg"></i> Upload\r\n      </button>      \r\n    </div>  \r\n    <div class="col-4 form-section select-container pull-right">\r\n      <label for="f-editing-mode">Editing Mode</label>\r\n      <select id="f-editing-mode" name="f-editing-mode">\r\n        <option selected="selected" value="Basic">Basic</option>\r\n        <option value="Advanced">Advanced</option>\r\n      </select>\r\n    </div>\r\n  </div>\r\n\r\n  <canvas id="product-image-canvas" class="hidden"></canvas>\r\n  <img id="placeholder" class="hidden">\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="col-3 form-section">\r\n        <div class="label">White Background</div>\r\n        <div class="grid-item clickable" id="product-image-A1" data-img="A1">\r\n          <div class="product-image-dimensions padded-s left-align hidden">500x500px</div>\r\n          ',__p+=imgA1?'\r\n            <img id="img_imgA1" class="fit-container" src="'+(null==(__t=imgA1)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n          ':'\r\n            <div class="icon icon-question-circle icon-alt-color-1 icon-large-3x center-align padded-s"></div>\r\n          ',__p+='\r\n        </div>\r\n      </div>\r\n      <div class="col-1"></div>\r\n      <div class="col-3 form-section">\r\n        <div class="label">Transparent Background</div>\r\n        <div class="grid-item clickable" id="product-image-B1" data-img="B1">\r\n          <div class="product-image-dimensions padded-s left-align hidden">500x500px</div>\r\n          ',__p+=imgB1?'\r\n            <img id="img_imgB1" class="fit-container" src="'+(null==(__t=imgB1)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n          ':'\r\n            <div class="icon icon-question-circle icon-alt-color-1 icon-large-3x center-align padded-s"></div>\r\n          ',__p+='\r\n        </div>\r\n      </div>\r\n      <div class="col-1"></div>\r\n      <div class="col-3 form-section">\r\n        <div class="label">Environmental Background</div>\r\n        <div class="grid-item clickable" id="product-image-C1" data-img="C1">\r\n          <div class="product-image-dimensions padded-s left-align hidden">500x500px</div>\r\n          ',__p+=imgC1?'\r\n            <img id="img_imgC1" class="fit-container" src="'+(null==(__t=imgC1)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n          ':'\r\n            <div class="icon icon-question-circle icon-alt-color-1 icon-large-3x center-align padded-s"></div>\r\n          ',__p+='\r\n        </div>\r\n      </div>      \r\n    </div>\r\n  </div>\r\n\r\n  <div id="product-images-advanced" class="hidden">\r\n    <div class="row row-spaced">\r\n      <div class="col-12">\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-A2" data-img="A2">\r\n            <div class="product-image-dimensions left-align padded-s">300x300px</div>\r\n            ',__p+=imgA2?'\r\n              <img id="img_imgA2" class="fit-container" src="'+(null==(__t=imgA2)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-2x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-B2" data-img="B2">\r\n            <div class="product-image-dimensions left-align padded-s">300x300px</div>\r\n            ',__p+=imgB2?'\r\n              <img id="img_imgB2" class="fit-container" src="'+(null==(__t=imgB2)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-2x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-C2" data-img="C2">\r\n            <div class="product-image-dimensions left-align padded-s">300x300px</div>\r\n            ',__p+=imgC2?'\r\n              <img id="img_imgC2" class="fit-container" src="'+(null==(__t=imgC2)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-2x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div> \r\n        <div class="col-1"></div>             \r\n      </div>\r\n    </div>\r\n    <div class="row row-spaced">\r\n      <div class="col-12">\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-A3" data-img="A3">\r\n            <div class="product-image-dimensions left-align padded-s">100x100px</div>\r\n            ',__p+=imgA3?'\r\n              <img id="img_imgA3" class="fit-container" src="'+(null==(__t=imgA3)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-1x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-B3" data-img="B3">\r\n            <div class="product-image-dimensions left-align padded-s">100x100px</div>\r\n            ',__p+=imgB3?'\r\n              <img id="img_imgB3" class="fit-container" src="'+(null==(__t=imgB3)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-1x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-C3" data-img="C3">\r\n            <div class="product-image-dimensions left-align padded-s">100x100px</div>\r\n            ',__p+=imgC3?'\r\n              <img id="img_imgC3" class="fit-container" src="'+(null==(__t=imgC3)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-1x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>  \r\n        <div class="col-1"></div>            \r\n      </div>\r\n    </div>  \r\n  </div>\r\n\r\n</div>';return __p}}),define("content/category-sections/merchandising/product-management/templates/product-image-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="grid-item clickable '+(null==(__t=active?"active":"")?"":__t)+'">\r\n  <img id="img_'+(null==(__t=id)?"":__t)+'" class="fit-container" src="'+(null==(__t=url)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n</div>';return __p}}),define("content/category-sections/merchandising/product-management/views/product-image-view",["backbone","../templates/product-image-tpl"],function(e,t){var n=e.View.extend({tagName:"span",template:t,initialize:function(e){var t=this;t.parent=e.parent,t.listenTo(t.model,"remove",function(){t.remove()}),t.listenTo(t.model,"change",function(e){t.render(),e.get("active")&&t.parent.setActive(t.model)}),t.model.get("active")&&t.parent.setActive(t.model)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{click:"setActive"},setActive:function(){this.model.set("active",!0)}});return n}),define("content/category-sections/merchandising/product-management/models/product-image-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,name:"",url:"",active:!1,type:""}});return t}),define("content/category-sections/merchandising/product-management/collections/product-image-collection",["backbone","../models/product-image-model"],function(e,t){var n=e.Collection.extend({model:t,url:function(){return this.path},initialize:function(){var e=this;e.on("change:active",function(t){if(t.get("active"))for(var n=e.where({active:!0}),i=0,o=n.length;o>i;++i)n[i].get("id")!==t.get("id")&&n[i].set("active",!1)})},setActive:function(e){var t=this.where({url:e})[0];t?t.set("active",!0):this.clearActive()},clearActive:function(){this.where({active:!0}).forEach(function(e){e.set("active",!1)})},setPath:function(e){this.path=e}});return n}),define("content/category-sections/merchandising/product-management/models/product-image-folder-model",["backbone","../collections/product-image-collection"],function(e,t){var n=e.Model.extend({defaults:function(){return{id:null,name:"",url:"",hash:"",collection:new t,primary:!1,nested:!1}},initialize:function(){this.get("collection").setPath(this.get("url"))}});return n}),define("content/category-sections/merchandising/product-management/collections/product-image-folder-collection",["backbone","../models/product-image-folder-model"],function(e,t){var n=e.Collection.extend({model:t,url:"/mock/user-image-folders.json",initialize:function(){var e=this;e.on("remove",function(t){var n=t.get("hash");e.filter(function(e){return 0===e.get("hash").indexOf(n)}).forEach(function(t){e.remove(t)})})}});return new n}),define("content/category-sections/merchandising/product-management/views/product-image-modal-view",["backbone","../templates/product-image-modal-tpl","./product-image-view","../collections/product-image-folder-collection","global-events","jqueryui"],function(e,t,n,i,o){var r=e.View.extend({tagName:"form",id:"f-product-image-modal",template:t,initialize:function(){this.initAviary()},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),e.delegateEvents(),e.cacheElem(),i.fetchCustom().done(function(){e.setCollection("Products"),e.collection.fetchCustom().done(function(){})}),e},events:{"click #delete-btn":"deleteImage","click #select-btn":"selectImage","click #edit-btn":"editImage","click #cancel-btn":"closeModal","click #save-btn":"handleSave","change #upload-btn":"uploadImage","click #upload-button":"setNull","change #f-editing-mode":"handleMode","click .grid-item":"highlightImage","click button":"test"},cacheElem:function(){this.$advanced=this.$el.find("#product-images-advanced"),this.$dimensions=this.$el.find(".product-image-dimensions"),this.$mode=this.$el.find("#f-editing-mode"),this.$grids=this.$el.find(".grid-item"),this.$canvas=this.$el.find("#product-image-canvas"),this.$saveBtn=this.$el.find("#save-btn"),this.$editBtnPanel=this.$el.find("#edit-btn-panel"),this.$alertPanel=this.$el.find(".alert-panel"),this.$aviary=this.$el.find("#aviary"),this.$editBtn=this.$el.find("#edit-btn"),this.$uploadBtn=this.$el.find("#upload-btn"),this.$uploadEl=this.$el.find("#upload-button"),this.$placeholder=this.$el.find("#placeholder"),this.$imageGrid=this.$el.find("#image-grid"),this.$image1=this.$el.find("#image-1"),this.$image2=this.$el.find("#image-2"),this.$image3=this.$el.find("#image-3"),this.$image4=this.$el.find("#image-4"),this.$button1=this.$el.find("#button-1"),this.$button2=this.$el.find("#button-2"),this.$button3=this.$el.find("#button-3"),this.$button4=this.$el.find("#button-4"),this.$canvas1=this.$el.find("#canvas-1"),this.$canvas2=this.$el.find("#canvas-2"),this.$canvas3=this.$el.find("#canvas-3"),this.$canvas4=this.$el.find("#canvas-4"),this.$maincanvas=this.$el.find("#canvas-main")},handleSave:function(){this.closeModal()},setNull:function(){this.$uploadBtn.val("")},handleMode:function(){var e=this.$mode.val();"Advanced"==e?(this.$advanced.removeClass("hidden"),this.$dimensions.removeClass("hidden")):(this.$advanced.addClass("hidden"),this.$dimensions.addClass("hidden"))},setActive:function(e){this.activeImage=e,e?this.$editBtnPanel.fadeIn(200):this.$editBtnPanel.fadeOut(200)},highlightImage:function(e){var t,n=$(e.target),i=this;t=n.is(".grid-item")?n:n.closest(".grid-item"),this.$grids.removeClass("active"),t.addClass("active"),this.$editBtnPanel.removeClass("hidden-alt"),t.find("img").is("*")?(i.$editBtn.removeClass("hidden"),i.$uploadEl.addClass("hidden")):(i.$editBtn.addClass("hidden"),i.$uploadEl.removeClass("hidden"))},getActive:function(){return this.activeImage},addImage:function(e){var t=new n({model:e,parent:this});this.$imageGrid.append(t.render().el)},addAllImages:function(e){this.$imageGrid.empty(),e.each(this.addImage,this)},setCollection:function(e){var t=this;t.stopListening(t.collection,"add remove"),t.collection=i.findWhere({name:e}).get("collection"),t.listenTo(t.collection,"remove",function(){t.setActive("")})},closeModal:function(){this.parent.$modal.dialog("close")},selectImage:function(){this.cb(this.getActive()&&this.getActive().get("url")),this.closeModal()},deleteImage:function(){var e=this;e.getActive()&&o.trigger("form:delete",function(){e.collection.remove(e.getActive()),e.collection.models[0]||e.setActive(null)})},showImageModal:function(e){var t=this;t.render(e)},initAviary:function(){this.featherEditor=new Aviary.Feather({appendTo:"aviary",apiKey:"88736f3311251f0f",apiVersion:3,theme:"light",maxSize:1400,tools:"all",displayImageSize:!0,onClose:function(){$("#aviary").hide()},onError:function(e){alert(e.message)}})},editImage:function(){var e=this,t=this.$el.find(".grid-item.active").attr("data-img"),n=this.$el.find(".grid-item.active img").attr("src"),i="img"+t;this.$aviary.show(),this.featherEditor.launch({image:i,url:n,onSave:function(n,i){e.model.set(t,i),e.featherEditor.close(),e.$el.find(".grid-item.active img").attr("src",i)}})},uploadImage:function(e){var t,n,i,o,r,a=this;n=e.target.files[0],i=n.name,o=a.$el.find(".grid-item.active"),t=o.attr("data-img"),r="img"+t,a.readFile(n,function(e){url=e.target.result,a.isValidImageExtension(i)?(a.hideAlertPanel(),a.$placeholder.attr("src",url),img=a.$placeholder.get(0),a.model.set(r,url),id=t,size="A1"==id||"B1"==id||"C1"==id?194:"A2"==id||"B2"==id||"C2"==id?194:100,o.find(".icon").is("*")?(o.find(".icon").remove(),o.append('<img src="'+url+'" id="img'+t+'" width="'+size+'" height="'+size+'">')):(o.find("img").remove(),o.append('<img src="'+url+'" id="img'+t+'" width="'+size+'" height="'+size+'">')),a.showSaveBtn(),a.$uploadEl.addClass("hidden"),a.$editBtn.removeClass("hidden")):a.showAlertPanel()})},drawCanvas:function(e,t,n){var i,o,r=this,a=this.$canvas.get(0),s=n.width,l=n.height,c=0,d=0;"A1"==t||"B1"==t||"C1"==t?r.$canvas.width(500).height(500):"A2"==t||"B2"==t||"C2"==t?r.$canvas.width(300).height(300):r.$canvas.width(100).height(100),i=r.$canvas.width(),o=r.$canvas.height(),context=a.getContext("2d"),context.clearRect(0,0,500,500),rswidratio=s/i,rsheiratio=l/o,rswidratio>rsheiratio?(rswidth=s/rswidratio,rsheight=l/rswidratio):rsheiratio>rswidratio?(rswidth=s/rsheiratio,rsheight=l/rsheiratio):(rswidth=s/rswidratio,rsheight=l/rsheiratio),i>rswidth?(wdiff=i-rswidth,c=wdiff/2):o>rsheight?(hdiff=o-rsheight,d=hdiff/2):rswidth>i?(wdiff=rswidth-i,c=wdiff/2):rsheight>o&&(hdiff=rsheight-o,d=hdiff/2),context.drawImage(n,c,d,rswidth,rsheight),dataURL=a.toDataURL(),modelstr="img"+t,r.model.set(modelstr,dataURL),activeimg=r.$el.find(".grid-item.active"),imgslot=activeimg.attr("data-img"),activeimg.find(".icon").is("*")?(activeimg.find(".icon").remove(),activeimg.append('<img src="'+dataURL+'" id="img'+imgslot+'">')):(activeimg.find("img").remove(),activeimg.append('<img src="'+dataURL+'" id="img'+imgslot+'">'))},readFile:function(e,t){var n=new FileReader;n.onload=t,n.readAsDataURL(e)},isValidImageExtension:function(e){return new RegExp("(\\.gif|\\.jpg|\\.jpeg|\\.bmp|\\.png)$","i").test(e)},showAlertPanel:function(){this.$alertPanel.show()},showSaveBtn:function(){this.$saveBtn.removeClass("hidden").show()},hideAlertPanel:function(){}});return new r}),define("content/category-sections/merchandising/product-management/views/sku-entry-view",["backbone","../templates/sku-entry-tpl","./product-image-modal-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",className:"row",template:t,initialize:function(e){var t=this;t.collection=e.collection,t.browseOnly=e.browseOnly,n.parent=this,t.listenTo(t.collection,"add remove",function(e){t.model===e?t.remove():t.render()})},render:function(){var e=this.model.toJSON();return this.visibleModel=this.model,this.renderVisible(this.model),e.canDelete=this.collection.length>1,this.browseOnly&&(e.type2="Browse Only"),this},renderVisible:function(e){this.visibleModel=e,this.$el.html(this.template(e.toJSON())),this.delegateEvents(),this.setModal(),this.cacheElem()},events:{"click .icon-trash":"handleDelete","click .image-upload":"handleImage"},cacheElem:function(){this.$previewImage=this.$el.find(".image-upload"),this.$modal=$("#product-image-modal")},setModal:function(){this.$el.find("#product-image-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=this.visibleModel,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},handleDelete:function(){var e=this;i.trigger("form:delete",function(){e.collection.remove(e.model)})},handleImage:function(){this.showModal(n)}});return o}),define("content/category-sections/merchandising/product-management/templates/print-recipe-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div id="print-recipe-info" class="row row-spaced form-section">\r\n        <div class="clearfix section-title">\r\n            <h3 class="pull-left left-pad-xs">Print Preview</h3>\r\n            <div class="btn-panel">\r\n                <button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n                <button type="button" id="print-btn" class="btn btn-submit">Print</button>\r\n            </div>\r\n        </div>\r\n\r\n        </div>\r\n\r\n        <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n        \r\n<div id="print-recipe-section" >\r\n\r\n  <div class="row row-spaced x-space-s form-section">\r\n\r\n	  <div class="col-12 form-section y-space-s" >\r\n\r\n			 <label for="f-name">Product Name</label>\r\n					\r\n					<input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'">\r\n					  	\r\n					  	 </div>\r\n\r\n					  </div>\r\n   \r\n <div class="row row-spaced x-space-s form-section">\r\n               \r\n\r\n    <div class="col-12 form-section" >\r\n\r\n				   <div class="label y-space-bottom-s"> Image </div>\r\n\r\n\r\n      <img class="fit-container" src="'+(null==(__t="http://s7d2.scene7.com/is/image/Teleflora/"+number+"?wid=270&hei=250&fmt=jpeg&qlt=90,0&op_sharpen=0&resMode=bilin&op_usm=1.0,0.5,1.0,0&iccEmbed=0&layer=1&opac=0&layer=2&opac=55&layer=5&opac=0")?"":__t)+'">\r\n\r\n                   </div>\r\n          </div>\r\n\r\n<div class="row row-spaced x-space-s form-section">\r\n	<div class="col-12" > \r\n			<label for="f-description">Product Description</label><i class="icon icon-tool-tip x-space-s"></i>\r\n						<textarea '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' name="f-description" id="f-description" class="size-3">'+(null==(__t=description)?"":__t)+'</textarea>\r\n				  	</div>\r\n		</div>\r\n\r\n\r\n<div class="row row-spaced x-space-s form-section" >\r\n\r\n		<div class="col-12">\r\n					<label for="f-description">Product Recipe</label><i class="icon icon-tool-tip x-space-s"></i>\r\n\r\n\r\n              	<textarea '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' name="f-recipe" id="f-recipe" class="size-4">'+(null==(__t=recipe)?"":__t)+"</textarea>\r\n \r\n	          </div>\r\n\r\n	</div>\r\n</div>\r\n	 ";return __p}}),define("content/category-sections/merchandising/product-management/views/print-recipe-view",["backbone","../templates/print-recipe-tpl"],function(e,t){var n=e.View.extend({tagName:"form",id:"printRecipeModal",template:t,initialize:function(){},render:function(){this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.delegateEvents();return this},events:{"click #cancel-btn":"closeModal","click #print-btn":"handlePrint"},handlePrint:function(){var e=document.title,t=document.getElementById("print-recipe-section").innerHTML,n=window.open();n.document.open(),n.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),setTimeout(function(){n.print(),n.close()},300)},closeModal:function(){this.$el.parent().dialog("close")}});return new n}),define("content/category-sections/merchandising/product-management/templates/sku-discount-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced form-section">\r\n  <div class="col-3">\r\n    <label>Price Point Label</label>\r\n    <input type="text" disabled value="'+(null==(__t=skuLabel)?"":__t)+'">\r\n  </div>\r\n  <div class="col-3">\r\n    <label for="f-discountAmount-'+(null==(__t=id)?"":__t)+'">Discount Amount</label><i class="icon icon-tool-tip x-space-s" title="This is how much the product will be discounted."></i>\r\n    <div class="dollar-container">\r\n    <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="f-discountAmount-'+(null==(__t=id)?"":__t)+'" name="f-discountAmount-'+(null==(__t=id)?"":__t)+'" value="'+(null==(__t=discountAmount)?"":__t)+'">\r\n    </div>\r\n  </div>\r\n\r\n  <div class="col-3">\r\n    <label for="f-discountStartDate-'+(null==(__t=id)?"":__t)+'">Start Date</label><i title="This is the day that the discount will become active and will be available." class="icon icon-tool-tip x-space-s"></i>\r\n    <div class="date-container">\r\n        <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="f-discountStartDate-'+(null==(__t=id)?"":__t)+'" name="f-discountStartDate-'+(null==(__t=id)?"":__t)+'" class="date" value="'+(null==(__t=discountStartDate)?"":__t)+'">\r\n    </div>\r\n  </div>\r\n  <div class="col-3">\r\n    <label for="f-discountEndDate-'+(null==(__t=id)?"":__t)+'">End Date</label><i title="This is the day that the discount will become inactive and will no longer be available." class="icon icon-tool-tip x-space-s"></i>\r\n    <div class="date-container">\r\n        <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="f-discountEndDate-'+(null==(__t=id)?"":__t)+'" name="f-discountEndDate-'+(null==(__t=id)?"":__t)+'" class="date" value="'+(null==(__t=discountEndDate)?"":__t)+'">\r\n    </div>\r\n  </div>\r\n</div>';return __p}}),define("content/category-sections/merchandising/product-management/views/sku-discount-view",["backbone","../templates/sku-discount-tpl","jqueryui"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){var t=this;t.setElement(t.template(t.model.toJSON())),t.listenTo(e.collection,"remove",function(e){t.model===e&&t.remove()}),t.cacheElem(),t.applyDates()},cacheElem:function(){this.$startDate=this.$el.find("#f-discountStartDateCustom-"+this.model.get("id")),this.$endDate=this.$el.find("#f-discountEndDateCustom-"+this.model.get("id"))},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})}});return n}),define("content/category-sections/merchandising/product-management/templates/sku-product-description-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced panel ">\r\n\r\n	<div class="panel-title clearfix">Product Information</div>\r\n	<div class="col-12 y-space-top-m form-section">\r\n			<label for="f-description">Product Description - '+(null==(__t=skuLabel)?"":__t)+'</label><i class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea  name="f-description" id="f-description-'+(null==(__t=skuLabel)?"":__t)+'" class="size-3">'+(null==(__t=description)?"":__t)+'</textarea>\r\n  	</div>\r\n  	<div class="col-12 form-section">\r\n			<label for="f-adddescription">Additional Product Info - '+(null==(__t=skuLabel)?"":__t)+'</label><i class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea  name="f-adddescription" id="f-adddescription-'+(null==(__t=skuLabel)?"":__t)+'" class="size-3">'+(null==(__t=additionalInfo)?"":__t)+"</textarea>\r\n  	</div>\r\n</div>";
return __p}}),define("content/category-sections/merchandising/product-management/views/sku-product-description-view",["backbone","../templates/sku-product-description-tpl","jqueryui"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){var t=this;t.setElement(t.template(t.model.toJSON())),t.listenTo(e.collection,"remove",function(e){t.model===e&&t.remove()})},cacheElem:function(){}});return n}),define("content/category-sections/merchandising/product-management/templates/sku-product-adddescription-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row">\r\n	<div class="col-12 form-section">\r\n			<label for="f-adddescription">Additional Product Info - '+(null==(__t=skuLabel)?"":__t)+'</label><i class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea  name="f-adddescription" id="f-adddescription-'+(null==(__t=skuLabel)?"":__t)+'" class="size-3">'+(null==(__t=additionalInfo)?"":__t)+"</textarea>\r\n  	</div>\r\n</div>";return __p}}),define("content/category-sections/merchandising/product-management/views/sku-product-adddescription-view",["backbone","../templates/sku-product-adddescription-tpl","jqueryui"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){var t=this;t.setElement(t.template(t.model.toJSON())),t.listenTo(e.collection,"remove",function(e){t.model===e&&t.remove()})},cacheElem:function(){}});return n}),define("content/category-sections/merchandising/product-management/templates/sku-size-dimensions-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row">\r\n	<div class="col-12 form-section">\r\n		 \r\n		  <div class="col-3 form-section">\r\n		    <label for="f-width">'+(null==(__t=skuLabel)?"":__t)+' Width</label><i class="icon icon-tool-tip x-space-s" title="This is the approximate width of the product once it has been created."></i>\r\n		    <input type="text" id="f-width" name="f-width" value="'+(null==(__t=width)?"":__t)+'">\r\n		  </div>\r\n		 \r\n		  <div class="col-3 form-section">\r\n		    <label for="f-height">'+(null==(__t=skuLabel)?"":__t)+' Height</label><i class="icon icon-tool-tip x-space-s" title="This is the approximate height of the product once it has been created."></i>\r\n		    <input type="text" id="f-height" name="f-height" value="'+(null==(__t=height)?"":__t)+'">\r\n		  </div>\r\n		\r\n		</div>\r\n\r\n  </div>';return __p}}),define("content/category-sections/merchandising/product-management/views/sku-size-dimension-view",["backbone","../templates/sku-size-dimensions-tpl","jqueryui"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){var t=this;t.setElement(t.template(t.model.toJSON())),t.listenTo(e.collection,"remove",function(e){t.model===e&&t.remove()})},cacheElem:function(){}});return n}),define("content/category-sections/merchandising/product-management/collections/sku-entry-collection",["backbone","../models/product-model"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("content/category-sections/more/drop-shipping-setup/models/drop-ship-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,serviceType:"",minDaysDelivery:"",standardDeliveryFee:"",alaskaDeliveryActive:!0,hawaiiDeliveryActive:!0,checkoutText:"",comments:"",active:!0}});return t}),define("content/category-sections/more/drop-shipping-setup/collections/drop-ship-collection",["backbone","../models/drop-ship-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-drop-ships.json",model:t});return new n}),define("content/category-sections/merchandising/product-management/templates/dropship-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n  <td class="left-align indented-s">'+(null==(__t=serviceType)?"":__t)+"</td>\r\n  <td>"+(null==(__t=standardDeliveryFee)?"":__t)+'</td>\r\n  <td>\r\n    <input class="f-overrideFee" type="text" value="'+(null==(__t=overrideFee)?"":__t)+'">\r\n  </td>\r\n  <td class="hide-overflow">\r\n    <div class="centered-content-container">\r\n      <input '+(null==(__t=status?"checked":"")?"":__t)+' type="checkbox" class="on-off-switch f-status" id="'+(null==(__t=serviceType)?"":__t)+'" name="'+(null==(__t=serviceType)?"":__t)+'"/>\r\n          <label for="'+(null==(__t=serviceType)?"":__t)+'" class="on-off-switch-label">\r\n              <div class="on-off-switch-state">on</div>\r\n          </label>\r\n        </div>\r\n  </td>\r\n</tr>\r\n';return __p}}),define("content/category-sections/merchandising/product-management/views/dropship-view",["backbone","../templates/dropship-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(){this.setElement(this.template(this.model.toJSON())),this.cacheElem()},events:{"change .f-status":"handleActiveToggle","change .f-overrideFee":"handleInputChange"},cacheElem:function(){this.$status=this.$el.find(".f-status"),this.$overrideFee=this.$el.find(".f-overrideFee")},handleActiveToggle:function(){this.model.set({status:this.$status.is(":checked")})},handleInputChange:function(){this.model.set({overrideFee:this.$overrideFee.val().trim()})}});return n}),define("content/shared/models/addons-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,name:"",imgUrl:"",active:!1}});return t}),define("content/shared/collections/addons-collection",["backbone","../models/addons-model"],function(e,t){var n=e.Collection.extend({model:t,url:"/mock/add-ons.json"});return new n}),define("content/category-sections/merchandising/product-management/templates/categories-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+=" ",isBaseSku||(__p+='\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="panel-title">\r\n      Categories - '+(null==(__t=skuLabel)?"":__t)+"\r\n    </div>\r\n  </div>\r\n</div>\r\n"),__p+='\r\n\r\n<div id="categories-container"></div>';return __p}}),define("content/category-sections/merchandising/product-management/views/categories-view",["backbone","components/general-product/views/general-product-view","components/featured-occasions/collections/all-occasions-collection","../templates/categories-tpl"],function(e,t,n,i){var o=e.View.extend({tagName:"div",template:i,initialize:function(e){this.parent=e.parent,this.listenTo(this.model,"remove",function(){this.remove()})},render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),e.cacheElem(),n.fetchCustom().done(function(){this.collection=n.deepClone(),this.collection.set(e.model.get("categories").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$categoriesContainer.html(new t({activeTitle:"Selected Categories",activeTableTitle:"Category",allTitle:"Category Search",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,nosearch:!1,nofilter:!1,hoverTitle:!0,collection:this.collection,hideGrids:!0,showCategoryID:!0}).render().el)}.bind(e)),e},cacheElem:function(){this.$categoriesContainer=this.$el.find("#categories-container")},getCollection:function(){return this.collection}});return o}),define("content/category-sections/merchandising/product-management/views/create-edit-product-view",["backbone","../templates/create-edit-product-tpl","../models/product-model","../collections/product-collection","./sku-entry-view","./print-recipe-view","./sku-discount-view","./sku-product-description-view","./sku-product-adddescription-view","./sku-size-dimension-view","../collections/sku-entry-collection","global-events","settings","content/category-sections/more/drop-shipping-setup/collections/drop-ship-collection","./dropship-view","components/general-product/views/general-product-view","content/shared/collections/addons-collection","./categories-view","./product-management-view","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection","content/shared/collections/blank-collection","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c,d,u,h,p,f,v,m,g,b,y,_,w){var x=e.View.extend({tagName:"form",id:"m-product-management",template:t,initialize:function(){r.parent=this},skuList:null,dopshipCollection:null,addonsCollection:null,categoriesView:null,relatedProductsCollection:null,mainFlowerCollection:null,colorsCollection:null,bouquetStylesCollection:null,render:function(e){var t=this,o=e.id;return i.fetchCustom().done(function(){t.model=o?i.get(o):new n,t.model.get("isBaseSku")||(t.model=i.get(t.model.get("baseSkuId"))),viewModel=t.model.toJSON(),t.renderVisible(viewModel),e.type2&&(viewModel.type2=t.type2=e.type2),t.$el.html(t.template(viewModel)),t.cacheElem(),t.delegateEvents(),t.skuList=new d,t.skuList.add(t.model.toJSON()),t.skuList.add(t.model.get("skuList").map(function(e){return i.get(e).toJSON()})),p.fetchCustom().done(function(){t.dropshipCollection=p.deepClone(),t.dropshipCollection.set(t.model.get("dropshipMethods"),{merge:!0}),t.addAll(t.$dropshipList,t.dropshipCollection,t.addDropship.bind(t))}),m.fetchCustom().done(function(){t.addonsCollection=m.deepClone(),t.addonsCollection.set(t.model.get("addons"),{merge:!0,remove:!1}),t.$addonsContainer.append(t.getAddonsComponent(t.addonsCollection).render().el)}),t.categoriesView=new g({model:t.model}),t.$mainCategoriesContainer.append(t.categoriesView.render().el),t.addAllSkuCategories(),this.relatedProductsView&&this.relatedProductsView.remove(),this.relatedProductsView=new y({collection:new _(t.model.get("relatedProducts")),id:"m-related-products",selectAll:!0,primarySku:!1}),t.$relatedProductsContainer.append(this.relatedProductsView.render().el),t.mainFlowerCollection=new w(t.model.get("flowers")),t.colorsCollection=new w(t.model.get("colors")),t.bouquetStylesCollection=new w(t.model.get("bouquetStyles")),t.$bouquetStyleContainer.append(new v({activeTitle:"Selected Styles",activeTableTitle:"Style",allTitle:"Style Search",allSearchPlaceholder:"Style Search Terms",activeAttribute:"active",nameAttribute:"style",async:!1,collection:t.bouquetStylesCollection,imageSearch:!1,selectAll:!0,disabled:"Teleflora"===t.model.get("type"),hideGrids:!0}).render().el),t.$bouquetColorContainer.append(new v({activeTitle:"Selected Bouquet Colors",activeTableTitle:"Color",allTitle:"Bouquet Color Search",allSearchPlaceholder:"Color Search Terms",activeAttribute:"active",nameAttribute:"color",async:!1,collection:t.colorsCollection,imageSearch:!1,selectAll:!0,disabled:"Teleflora"===t.model.get("type"),hideGrids:!0}).render().el),t.$mainFlowerContainer.append(new v({activeTitle:"Selected Flowers",activeTableTitle:"Flower",allTitle:"Flower Search",allSearchPlaceholder:"Flower Search Terms",activeAttribute:"active",nameAttribute:"name",async:!1,collection:t.mainFlowerCollection,imageSearch:!1,selectAll:!0,disabled:"Teleflora"===t.model.get("type")}).render().el),t.stopListening(t.skuList),t.listenTo(t.skuList,"add",function(e){t.addSku(e),t.addSkuCategory(e),t.showSKUToggle(),t.handleProductDescriptionVariantToggle()}),t.listenTo(t.skuList,"remove",function(){t.showSKUToggle(),t.handleProductDescriptionVariantToggle()}),t.addAllSkus(),setTimeout(function(){t.applyToolTips()},500),t.applyDates(),t.applyTabs(),t.applyAccordians(),t.showSKUToggle(),t.handleProductDescriptionVariantToggle(),t.handleAddSku(),t.validate()}.bind(this)),t},renderVisible:function(e){this.visibleModel=e,this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.setModal()},addSkuCategory:function(e){var t=new g({model:e,parent:this});this.$skuCategoriesContainer.append(t.render().el)},addAllSkuCategories:function(){var e=this;e.$skuCategoriesContainer.empty(),e.skuList.each(function(t){e.model.get("id")!==t.get("id")&&e.addSkuCategory(t)})},cacheElem:function(){this.$modal=$("#print-recipe-modal"),this.$name=this.$el.find("#f-name"),this.$number=this.$el.find("#f-number"),this.$active=this.$el.find("#f-active"),this.$type2=this.$el.find("#f-type2"),this.$discountAmount=this.$el.find("#f-discountAmount"),this.$discountStartDate=this.$el.find("#f-discountStartDate"),this.$discountEndDate=this.$el.find("#f-discountEndDate"),this.$discountVariantsActive=this.$el.find("#f-discountVariantsActive"),this.$productDescriptionVariantsActive=this.$el.find("#f-productDescriptionVariants"),this.$description=this.$el.find("#f-description"),this.$additionalInfo=this.$el.find("#f-additionalInfo"),this.$legalInfo=this.$el.find("#f-legalInfo"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDescription=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$productClassification=this.$el.find("#f-productClassification"),this.$width=this.$el.find("#f-width"),this.$height=this.$el.find("#f-height"),this.$attributesVariantsActive=this.$el.find("#f-attributesVariantsActive"),this.$localDeliveryActive=this.$el.find("#f-localDeliveryActive"),this.$noSameDayDeliveryActive=this.$el.find("#f-noSameDayDeliveryActive"),this.$inStorePickupActive=this.$el.find("#f-inStorePickupActive"),this.$taxFreeActive=this.$el.find("#f-taxFreeActive"),this.$merchandisingHighlight=this.$el.find("#f-merchandisingHighlight"),this.$recipe=this.$el.find("#f-recipe"),this.$skuList=this.$el.find("#sku-list"),this.$skuDiscountList=this.$el.find("#sku-discount-list"),this.$skuSizeDimensionList=this.$el.find("#sku-size-dimension-list"),this.$additionalProductInfo=this.$el.find(".additionalProductInfo"),this.$skuProductDescriptionList=this.$el.find("#sku-product-description-list"),this.$skuProductAddDescriptionList=this.$el.find("#sku-product-adddescription-list"),this.$skuAlert=this.$el.find("#sku-alert"),this.$dropshipList=this.$el.find("#dropship-list"),this.$addonsContainer=this.$el.find("#addons-container"),this.$relatedProductsContainer=this.$el.find("#related-products-container"),this.$skuFlowersContainer=this.$el.find("#sku-flowers-container"),this.$skuCategoriesContainer=this.$el.find("#sku-categories-container"),this.$mainFlowerContainer=this.$el.find("#main-flower-container"),this.$mainCategoriesContainer=this.$el.find("#main-categories-container"),this.$bouquetStyleContainer=this.$el.find("#bouquet-style-container"),this.$bouquetColorContainer=this.$el.find("#bouquet-color-container"),this.$hideSection=this.$el.find(".hideSection"),this.$applyToAllSkus=this.$el.find("#applyToAllSkus"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #reset-btn":"handleReset","click #add-sku-btn":"handleAddSku","change #f-discountVariantsActive":"handleDiscountVariantToggle","change #f-productDescriptionVariants":"handleProductDescriptionVariantToggle","change #f-attributesVariantsActive":"handleAttributesVariantToggle","change #f-categoriesVariantsActive":"handleCategoriesVariantToggle","change #f-type2":"handleType2Change","change #allow-updates":"handleUpdateConfirm","click  #print-recipe-btn":"handleRecipePrint"},handleUpdateConfirm:function(){u.trigger("modal:custom",{template:{title:"Lock Merchandising",text:"Are you sure you want to change this setting? Turning on the merchandising lock will prevent this product from receiving any automatic updates."}})},handleReset:function(){var e=this;u.trigger("modal:custom",{template:{title:"Reset Settings",text:"Are you sure? This will reset all applicable fields to their default Teleflora/group values."},confirmFn:function(){e.$name.val(e.model.get("name")),e.$number.val(e.model.get("number")),e.$active.prop("checked",!0),e.$type2.val(e.model.get("type2")),e.$discountAmount.val(e.model.get("discountAmount")),e.$discountStartDate.val(e.model.get("discountStartDate")),e.$discountEndDate.val(e.model.get("discountEndDate")),e.$discountVariantsActive.prop("checked",!0),e.$description.val(e.model.get("description")),e.$additionalInfo.val(e.model.get("additionalInfo")),e.$legalInfo.val(e.model.get("legalInfo")),e.$metaTitle.val(e.model.get("metaTitle")),e.$metaKeywords.val(e.model.get("metaKeywords")),e.$metaDescription.val(e.model.get("metaDescription")),e.$metaTags.val(e.model.get("metaTags")),e.$productClassification.val(e.model.get("productClassification")),e.$width.val(e.model.get("width")),e.$height.val(e.model.get("height")),e.$attributesVariantsActive.prop("checked",!0),e.$localDeliveryActive.prop("checked",!0),e.$noSameDayDeliveryActive.prop("checked",!0),e.$inStorePickupActive.prop("checked",!0),e.$taxFreeActive.prop("checked",!0),e.$merchandisingHighlight.val(e.model.get("merchandisingHighlight")),e.$recipe.val(e.model.get("recipe"))},cancelFn:function(){}})},showError:function(){this.$skuAlert.fadeIn(200)},hideError:function(){this.$skuAlert.fadeOut(200)},showSKUToggle:function(){this.skuList.length>1?this.$applyToAllSkus.show():this.$applyToAllSkus.hide()},handleRecipePrint:function(){this.showModal(r)},setModal:function(){this.$el.find("#print-recipe-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=this.model,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},handleDiscountVariantToggle:function(){var e=this;e.$discountVariantsActive.is(":checked")?this.$skuDiscountList.fadeIn(200):this.$skuDiscountList.fadeOut(200)},handleProductDescriptionVariantToggle:function(){var e=this.$productDescriptionVariantsActive.is(":checked");e?this.$additionalProductInfo.show():this.$additionalProductInfo.hide()},handleAttributesVariantToggle:function(e){$(e.currentTarget).is(":checked")?this.$skuFlowersContainer.fadeOut(200):this.$skuFlowersContainer.fadeIn(200)},handleCategoriesVariantToggle:function(e){$(e.currentTarget).is(":checked")?this.$skuCategoriesContainer.fadeIn(200):this.$skuCategoriesContainer.fadeOut(200)},handleType2Change:function(){var e=this;e.render({id:e.model.get("id"),type2:e.$type2.find("option:selected").val()})},handleAddSku:function(){var e=this.model.deepClone(),t=this;skuNumber=1==this.skuList.length?"Deluxe":2==this.skuList.length?"Premium":"",e.set({id:e.get("id")+"-"+Date.now(),name:e.get("name"),skuLabel:skuNumber,myPrice:"0.00",holidayPrice:"0.00",isBaseSku:!1}),"Custom"===this.model.get("type")&&this.skuList.length<12?(this.hideError(),this.skuList.add(e)):"Custom"===this.model.get("type")&&(this.showError(),setTimeout(function(){t.hideError()},5e3))},addSku:function(e){var t="Browse Only"===this.type2,n=new o({model:e,collection:this.skuList,browseOnly:t});if(this.$skuList.append(n.render().el),e.get("id")!==this.model.get("id")){var i=new a({model:e,collection:this.skuList});this.$skuDiscountList.append(i.render().el)}if(e.get("id")!==this.model.get("id")){var r=new c({model:e,collection:this.skuList});this.$skuSizeDimensionList.append(r.render().el)}if(e.get("id")!==this.model.get("id")){var l=new s({model:e,collection:this.skuList});this.$skuProductDescriptionList.append(l.render().el)}},addAllSkus:function(){this.$skuList.empty(),this.$skuDiscountList.empty(),this.$skuProductAddDescriptionList.empty(),this.$skuSizeDimensionList.empty(),this.$skuProductDescriptionList.empty(),this.handleDiscountVariantToggle(),this.skuList.each(this.addSku,this)},addDropship:function(e){var t=new f({model:e});this.$dropshipList.append(t.render().$el)},addAll:function(e,t,n){e.empty(),t.each(n)},handleCancel:function(){u.trigger("form:cancel:url",h.productManagementBaseUrl)},handleSave:function(){if(this.$el.valid()){this.model.set({name:this.$name.val().trim(),number:this.$number.val().trim(),active:this.$active.is(":checked"),type2:this.$type2.find("option:selected").val(),discountAmount:this.$discountAmount.val().trim(),discountStartDate:this.$discountStartDate.val().trim(),discountEndDate:this.$discountEndDate.val().trim(),discountVariantsActive:this.$discountVariantsActive.is(":checked"),productDescriptionVariantsActive:this.$productDescriptionVariantsActive.is(":checked"),description:this.$description.val().trim(),additionalInfo:this.$additionalInfo.val().trim(),metaTitle:this.$metaTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaDescription:this.$metaDescription.val().trim(),metaTags:this.$metaTags.val().trim(),productClassification:this.$productClassification.find("option:selected").val(),width:this.$width.val().trim(),height:this.$height.val().trim(),attributesVariantsActive:this.$attributesVariantsActive.is(":checked"),merchandisingHighlight:this.$merchandisingHighlight.find("option:selected").val(),relatedProducts:this.relatedProductsView.collection.toJSON(),addons:this.addonsCollection.toJSON(),categories:this.categoriesView.getCollection().where({active:!0}).map(function(e){return e.get("id")})}),"Teleflora"===this.model.get("type")&&this.model.set({recipe:this.$recipe.val().trim()}),"Drop Shipped"===this.model.get("type2")&&this.model.set({taxFreeActive:this.$taxFreeActive.is(":checked"),dropshipMethods:this.dropshipCollection.toJSON()}),"Hand Delivered"===this.model.get("type2")&&this.model.set({localDeliveryActive:this.$localDeliveryActive.is(":checked"),noSameDayDeliveryActive:this.$noSameDayDeliveryActive.is(":checked"),inStorePickupActive:this.$inStorePickupActive.is(":checked"),taxFreeActive:this.$taxFreeActive.is(":checked")}),u.trigger("form:save",this.$tip),u.trigger("form:cancel:url",h.productManagementBaseUrl)}else u.trigger("form:invalid",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyDates:function(){var e=this;e.$discountStartDate.datepicker({onSelect:function(t){e.$discountEndDate.datepicker("option","minDate",t),e.$discountStartDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$discountEndDate.datepicker({onSelect:function(t){e.$discountStartDate.datepicker("option","maxDate",t),e.$discountEndDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyTabs:function(){this.$el.find("#tabs").tabs()},applyAccordians:function(){this.$el.find(".accordian").accordion({heightStyle:"content"}),this.applyAccordians2()},getAddonsComponent:function(e){return new v({activeTitle:"Selected Product Add-Ons",activeTableTitle:"Add-On",allTitle:"Add-On Search",allSearchPlaceholder:"Add-On Search Term",activeAttribute:"active",nameAttribute:"name",async:!1,collection:e,nofilter:!1,sequence:!0,imageSearch:!0})},applyAccordians2:function(){this.$el.find("#additional-information").click(function(){var e=$(this);return e.next().fadeToggle(200).toggleClass("active"),e.find(".icon").hasClass("icon-opened")?e.find(".icon").switchClass("icon-opened","icon-closed"):e.find(".icon").switchClass("icon-closed","icon-opened"),!1}).next().hide()},validate:function(){this.$el.validate({rules:{"f-name":{required:!0},"f-number":{required:!0},"f-discountAmount":{dollars:!0,min:1},"f-discountStartDate":{dateCustom:!0},"f-discountEndDate":{dateCustom:!0},"f-myPrice":{dollars:!0,required:!1},"f-holidayPrice":{dollars:!0},"f-meta-title":"noCarets","f-meta-keywords":"noCarets","f-meta-desc":"noCarets"}}),jQuery.validator.addClassRules({"f-name":{required:!0},"f-number":{required:!0},"f-discountAmount":{dollars:!0,min:1},"f-discountStartDate":{dateCustom:!0},"f-discountEndDate":{dateCustom:!0},"f-myPrice":{dollars:!0,required:!1},"f-myPrice-teleflora":{dollars:!0,required:!1},"f-holidayPrice":{dollars:!0}})}});return new x}),define("content/category-sections/merchandising/product-management/views/product-management-view",["backbone","./product-management-home-view","./create-edit-product-view","global-events","jqueryui"],function(e,t,n,i){var o="merchandising",r="product-management",a=e.View.extend({tagName:"div",initialize:function(){var e=this;i.on("route:argument",function(t,n,i){var a,s;i=i&&i.split("/"),t===o&&n===r&&(i&&i.length?(a=i[0],s=i[1],/edit/i.test(a)?e.showCreateEdit(s):/create/i.test(a)&&e.showCreateEdit()):e.showHome())})},replaceVisible:function(e,t){this.$el.empty(),this.$el.append(e.render(t).$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){this.replaceVisible(n,{id:e})}});return new a}),define("content/category-sections/merchandising/product-attributes/templates/product-attributes-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Product Attributes</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use the following section to designate products that are not purchasable from your site. These products can be available to purchase in store, or they could be used for gallery. Common Browse Only products are Wedding and Sympathy products.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<div class="col-5">\r\n		<label for="f-selectedAttribute">Select Attribute<i class="icon icon-tool-tip x-space-s" title="Choose an attribute from the list below and then you can associate products with that attribute."></i></label>\r\n		<div class="select-container">\r\n			<select id="f-selectedAttribute" name="f-selectedAttribute">\r\n				<option selected disabled hidden value="'+(null==(__t=selectedAttribute)?"":__t)+'">'+(null==(__t=selectedAttribute)?"":__t)+'</option>\r\n				<option id="browseValue" value="1">Browse Only</option>\r\n				<option id="instoreValue" value="2">In Store Pick-Up Only</option>\r\n				<option id="localDeliveryValue" value="3">Local Delivery Only</option>\r\n				<option id="noSameDayValue" value="4">No Same-Day Delivery</option>\r\n				<option id="taxFreeValue" value="5">Tax Free</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section panel" id="table-container-one" style="display:none;">\r\n	<div class="col-12">\r\n		<div id="browse-only-table"></div>\r\n	</div>\r\n</div>\r\n<div class="row row-spaced form-section panel" id="table-container-two" style="display:none;">\r\n	<div class="col-12">\r\n		<div id="instore-pickup-only-table"></div>\r\n	</div>\r\n</div>\r\n<div class="row row-spaced form-section panel" id="table-container-three" style="display:none;">\r\n	<div class="col-12">\r\n		<div id="local-delivery-only-table"></div>\r\n	</div>\r\n</div>\r\n<div class="row row-spaced form-section panel" id="table-container-four" style="display:none;">\r\n	<div class="col-12">\r\n		<div id="nosamedaydeliver-table"></div>\r\n	</div>\r\n</div>\r\n<div class="row row-spaced form-section panel" id="table-container-five" style="display:none;">\r\n	<div class="col-12">\r\n		<div id="tax-free-table"></div>\r\n	</div>\r\n</div>\r\n';return __p}}),define("content/category-sections/merchandising/product-attributes/models/attribute-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-products.json",defaults:{selectedAttribute:"",type2:"",localDeliveryActive:!0,noSameDayDeliveryActive:!0,inStorePickupActive:!0,taxFreeActive:!0,browseOnly:[],inStorePickupOnly:[],localDeliveryOnly:[],noSameDayDelivery:[],taxFree:[]}});return new t}),define("content/category-sections/merchandising/product-attributes/views/product-attributes-home-view",["backbone","../templates/product-attributes-home-view-tpl","../models/attribute-model","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection","global-events","jqueryui"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",id:"f-product-attributes",template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.showTables(),e.clearMenu(),e.applyToolTips()}.bind(this)),this},events:{"change #f-selectedAttribute":"handleSelectAttribute","click #save-btn":"handleSave"},cacheElem:function(){this.$selectedAttribute=this.$el.find("#f-selectedAttribute"),this.$browseOnlyTable=this.$el.find("#browse-only-table"),this.$inStorePickupOnlyTable=this.$el.find("#instore-pickup-only-table"),this.$localDeliverOnlyTable=this.$el.find("#local-delivery-only-table"),this.$noSameDayDeliveryTable=this.$el.find("#nosamedaydeliver-table"),this.$taxFreeTable=this.$el.find("#tax-free-table"),this.$tableContainerOne=this.$el.find("#table-container-one"),this.$tableContainerTwo=this.$el.find("#table-container-two"),this.$tableContainerThree=this.$el.find("#table-container-three"),this.$tableContainerFour=this.$el.find("#table-container-four"),this.$tableContainerFive=this.$el.find("#table-container-five"),this.$tip=this.$el.find(".tooltip-change")},showTables:function(){var e=this;this.showBrowseOnlyView&&this.showBrowseOnlyView.remove(),this.showBrowseOnlyView=new i({collection:new o(n.get("browseOnly")),bodyOnly:!0,title:"Browse Only Products",id:"m-featured-products-browseonly",selectAll:!0,primarySku:!1}),this.$browseOnlyTable.append(e.showBrowseOnlyView.render().el),this.instoreOnlyView&&this.instoreOnlyView.remove(),this.instoreOnlyView=new i({collection:new o(n.get("inStorePickupOnly")),bodyOnly:!0,title:"In Store Pickup Products",id:"m-featured-products-instore",selectAll:!0,primarySku:!1}),this.$inStorePickupOnlyTable.append(e.instoreOnlyView.render().el),this.localDeliveryOnlyView&&this.localDeliveryOnlyView.remove(),this.localDeliveryOnlyView=new i({collection:new o(n.get("localDeliveryOnly")),bodyOnly:!0,title:"Local Delivery Only Products",id:"m-featured-products-localdelivery",selectAll:!0,primarySku:!1}),this.$localDeliverOnlyTable.append(this.localDeliveryOnlyView.render().el),this.noSameDayDeliveryOnlyView&&this.noSameDayDeliveryOnlyView.remove(),this.noSameDayDeliveryOnlyView=new i({collection:new o(n.get("noSameDayDelivery")),bodyOnly:!0,title:"No Same Day Delivery Products",id:"m-featured-products-nosameday",selectAll:!0,primarySku:!1}),this.$noSameDayDeliveryTable.append(this.noSameDayDeliveryOnlyView.render().el),e.taxFreeView=new i({collection:new o(n.get("taxFree")),bodyOnly:!0,title:"Tax Free Products",id:"m-featured-products-taxfree",selectAll:!0,primarySku:!1}),e.$taxFreeTable.append(e.taxFreeView.render().el)},clearMenu:function(){this.$selectedAttribute.val("")},handleSave:function(){var e=this;n.set({browseOnly:e.showBrowseOnlyView.collection.toJSON(),inStorePickupOnly:e.instoreOnlyView.collection.toJSON(),localDeliveryOnly:e.localDeliveryOnlyView.collection.toJSON(),noSameDayDelivery:e.noSameDayDeliveryOnlyView.collection.toJSON(),taxFree:e.taxFreeView.collection.toJSON()}),r.trigger("form:save",this.$tip)},handleSelectAttribute:function(){var e=this;e.$tableContainerOne.css({display:"none"}),e.$tableContainerTwo.css({display:"none"}),e.$tableContainerThree.css({display:"none"}),e.$tableContainerFour.css({display:"none"}),e.$tableContainerFive.css({display:"none"}),selectedItem=this.$selectedAttribute.find("option:selected").val(),"1"===selectedItem?e.$tableContainerOne.css({display:"block"}):"2"===selectedItem?e.$tableContainerTwo.css({display:"block"}):"3"===selectedItem?e.$tableContainerThree.css({display:"block"}):"4"===selectedItem?e.$tableContainerFour.css({display:"block"}):"5"===selectedItem&&e.$tableContainerFive.css({display:"block"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new a}),define("content/category-sections/merchandising/product-attributes/views/product-attributes-view",["backbone","./product-attributes-home-view","global-events"],function(e,t){var n=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)
},showHome:function(){this.replaceVisible(t)}});return new n}),define("content/category-sections/merchandising/deal-of-the-day/templates/deal-of-the-day-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title">\r\n      <h2 class="pull-left">Edit Deal of the Day</h2>\r\n      <div class="btn-panel">\r\n		<button type="button" id="reset-btn" class="btn btn-other">Reset</button>\r\n        <button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n        <!-- <div class="togglePanel"> -->\r\n			\r\n		<!-- </div> -->\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage your Deal of the Day (florist choice) product. You can specify the images that will appear to adjust the look and feel of your Deal of the Day page as well as change other settings such as merchandised categories.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced panel form-section">\r\n	<div class="panel-title">\r\n		Product Details\r\n	</div> \r\n	<div class="row row-spaced">\r\n		<div class="col-4">\r\n			<label for="f-name">Name<i class="icon icon-tool-tip x-space-s" title="You can use this field to override the product name if you do not wish to use the default name of Deal of the Day."></i></label>\r\n			<input type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'">\r\n		</div>\r\n		<div class="col-4">\r\n			<label for="f-number">Item Number<i class="icon icon-tool-tip x-space-s" title="This is the product\'s unique ID number."></i></label>\r\n			<input type="text" id="f-number" number="f-number" value="'+(null==(__t=number)?"":__t)+'" disabled>\r\n		</div>\r\n		<div class="col-2">\r\n			<label for="f-status">Active<i class="icon icon-tool-tip x-space-s" title="Turning this OFF will disable the Deal of the Day product so that your customers will not be able to purchase it."></i></label>\r\n			<input '+(null==(__t=status?"checked":"")?"":__t)+' type="checkbox" id="f-status" name="f-status" class="on-off-switch" />\r\n			<label for="f-status" class="on-off-switch-label">\r\n			<div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div id="tabs">\r\n			<ul class="clearfix">\r\n				<li class="col-3"><a class="center-align fill-container-width" href="#productinfo">Product Info &amp; Images</a></li>\r\n				<li class="col-3"><a class="center-align fill-container-width" href="#add-ons">Add-Ons</a></li>\r\n				<li class="col-3"><a class="center-align fill-container-width" href="#categories">Categories</a></li>\r\n				<li class="col-3"><a class="center-align fill-container-width" href="#settings">Settings</a></li>\r\n			</ul>\r\n\r\n			<div id="productinfo">\r\n\r\n\r\n             <div class="row panel alert-panel hidden-alt">\r\n\r\n                <div class="col-12 y-space-bottom-xxl">\r\n\r\n                  <div class="row">\r\n                    <div class="col-1">\r\n                      <div class="icon icon-3x icon-warning"></div>\r\n\r\n                    </div>\r\n\r\n                <div class="col-11 alert-text left-align">\r\n                      You have uploaded an invalid image file.  Please upload image files that have\r\n                      extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n\r\n\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-12">\r\n						<div class="panel-title dotdpaneltitle">\r\n							Product Images\r\n						</div>\r\n					</div>\r\n				</div>	\r\n		\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-3">\r\n						<label for="f-background-image">Background Image<i class="icon icon-tool-tip x-space-s" title="Use the button below to change the page\'s Background Image."></i></label>\r\n						<button type="button" id="f-background-image-btn" class="image-upload icon icon-btn icon-image icon-3x y-space-s"></button>\r\n					</div>\r\n					<div class="col-3 Upload-Logo-Div">\r\n					     <label for="f-background-image">Background Preview<i class="icon icon-tool-tip x-space-s" title="This is the large background image which will appear at the top of your Deal of the Day product page."></i></label>\r\n                           <img id="f-background-image" class="y-space-top-s center-align small-dotd-image" src="'+(null==(__t=backgroundImage)?"":__t)+'" alt="">\r\n					</div>		\r\n				</div>\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-3 image-section">\r\n\r\n						<div class="label">Product Image<i class="icon icon-tool-tip x-space-s" title="Use the button below to change the page\'s Product Image."></i></div>\r\n\r\n						<button type="button" id="f-image-url-1" class="icon icon-btn icon-image btn-file icon-3x y-space-s">\r\n							<input id="upload-product-Image-logo" name="upload-product-Image-logo" type="file" accept="image/*"/>\r\n						</button>\r\n\r\n                        \r\n					</div>\r\n\r\n					<div class="col-3 Upload-Logo-Div">\r\n					     <label for="f-product-image">Product Image Preview<i class="icon icon-tool-tip x-space-s" title="This is the product image for your Deal of the Day product. It will be shown on the Deal of the Day page as well as any other pages where it is merchandised such as categories."></i></label>\r\n                           <img id="f-product-image" class="y-space-top-s center-align small-dotd-image" src="'+(null==(__t=productImage)?"":__t)+'" alt="">\r\n					</div>					\r\n				</div>\r\n\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="panel-title clearfix">\r\n							<div class="y-space-top-m pull-left">Price Points</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced panel alert-panel hidden-alt" id="sku-alert">\r\n					<div class="col-12">\r\n						<div class="row">\r\n							<div class="col-1">\r\n								<div class="icon icon-4x icon-warning"></div>\r\n							</div>\r\n							<div class="col-11 alert-text">\r\n							You are allowed a maximum of 6 Price Points per product\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced panel alert-panel hidden" id="pricepoint-alert">\r\n					<div class="col-12">\r\n						<div class="row">\r\n							<div class="col-1">\r\n								<div class="icon icon-3x icon-warning"></div>\r\n							</div>\r\n							<div class="col-11 alert-text">\r\n								You must have at least one price point\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>	\r\n\r\n				<div id="sku-list"></div>\r\n\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="panel-title clearfix">\r\n							<div class="y-space-top-m pull-left">Product Information</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n					  	<div class="form-section">\r\n							<label for="f-description">Product Description</label><i title="You can specify descriptive text here for your Deal of the Day product which will be shown on the Deal of the Day page." class="icon icon-tool-tip x-space-s"></i>\r\n							<textarea  name="f-description" id="f-description" class="size-3">'+(null==(__t=description)?"":__t)+'</textarea>\r\n					  	</div>\r\n				  	</div>\r\n			  	</div>\r\n\r\n				<!-- Start of SEO Information -->\r\n		        <div class="panel form-section row row-spaced">\r\n				  <div class="row">\r\n				    <div class="col-12">\r\n				      <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional"></i>SEO Information (optional)</div>\r\n				    </div>\r\n				  </div>\r\n\r\n				  <div id="accordion">\r\n\r\n				    <div class="row row-spaced">\r\n				      <div class="col-12 form-section">\r\n				        <label for="f-meta-title">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the text displayed in the tab at the top of your browser window."></i>\r\n				        <input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n				      </div>\r\n				    </div>\r\n\r\n				    <div class="row row-spaced">\r\n				      <div class="col-6 form-section">\r\n				        <label for="f-meta-keywords">Meta Keywords</label><i class="icon icon-tool-tip x-space-s" title="This area allows you to enter a few comma separated keywords that describe your page."></i>\r\n				        <textarea name="f-meta-keywords" id="f-meta-keywords" class="size-2 ">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n				      </div>\r\n\r\n				      <div class="col-6 form-section">\r\n				          <label for="f-meta-desc">Meta Description</label><i title="This is the text shown on search engines for your page and should consist of short clear sentences." class="icon icon-tool-tip x-space-s"></i>\r\n				          <textarea name="f-meta-desc" id="f-meta-desc" class="size-2 ">'+(null==(__t=metaDescription)?"":__t)+'</textarea>\r\n				      </div>\r\n				    </div>\r\n\r\n				    <div class="row row-spaced">\r\n				      <div class="col-12 form-section">\r\n				          <label for="f-meta-tags">Additional Tags</label><i title="This area is for any additional meta tags that may be used for tracking or other purposes that you would like in the page &lt;head&gt;." class="icon icon-tool-tip x-space-s"></i>\r\n				          <textarea name="f-meta-tags" id="f-meta-tags" class="size-2 ">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n				          <div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n				      </div>\r\n				    </div>\r\n				  \r\n				  </div>\r\n\r\n				</div>\r\n		        <!-- End of SEO Information -->  \r\n\r\n\r\n			</div><!-- End of productinfo -->\r\n\r\n\r\n			<!-- Start of Add-Ons Tab -->\r\n			<div id="add-ons">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div id="addons-container"></div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<!-- End of Addons Tab -->\r\n\r\n			<!-- Start of Categories Tab -->\r\n			<div id="categories">\r\n\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="panel-title">\r\n							Product Categories\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<div id="categories-container"></div>\r\n					</div>\r\n				</div>\r\n\r\n			</div>\r\n			<!-- End of Categories Tab -->\r\n			\r\n			<!-- Start of Settings Tab -->\r\n			<div id="settings">\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-12">\r\n						<div class="panel-title">\r\n							Delivery\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-4">\r\n						<div class="label">In Store Pickup Only<i title="If this setting is ON, your customers will not be able to specify a delivery address for the product and must pick it up in your store." class="icon icon-tool-tip x-space-s"></i></div>\r\n						<input '+(null==(__t=inStorePickupActive?"checked":"")?"":__t)+' type="checkbox" id="f-inStorePickup" name="f-inStorePickup" class="on-off-switch" />\r\n						<label for="f-inStorePickup" class="on-off-switch-label">\r\n						<div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-12">\r\n						<div class="panel-title">\r\n							Others\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-4">\r\n						<div class="label">Tax Free<i title="If this setting is turned ON, the price of this product will not be included in orders when calculating sales tax at the end of the order." class="icon icon-tool-tip x-space-s"></i></div>\r\n						<input '+(null==(__t=taxFreeActive?"checked":"")?"":__t)+' type="checkbox" id="f-taxFree" name="f-taxFree" class="on-off-switch" />\r\n						<label for="f-taxFree" class="on-off-switch-label">\r\n						<div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n					<div class="col-4 form-section select-container">\r\n						<div class="label">Merchandising Icon<i title="You may specify a Merchandising Icon here such as Bestseller or New to market this product further." class="icon icon-tool-tip x-space-s"></i></div>\r\n						<select name="f-merchandisingHighlights" id="f-merchandisingHighlights">\r\n					    	<option selected id="All" value="All">'+(null==(__t=merchandisingHighlight)?"":__t)+'</option>\r\n					    	<option id="one" value="One">One</option>\r\n					    	<option id="two" value="Two">Two</option>\r\n					    	<option id="three" value="Three">Three</option>\r\n					    	<option id="four" value="Four">Four</option>\r\n						</select>				\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<!-- End of Settings Tab -->\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n\r\n';return __p}}),define("content/category-sections/merchandising/deal-of-the-day/models/deal-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-products.json",defaults:{metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:"",name:"",number:"",id:null,sequence:1,pricePoints:"Primary",type:"Custom",type2:"",type3:"Vase Arrangement",suggestedPrice:"Custom",myPrice:"",holidayPrice:"",taxFreeActive:"",active:!0,backgroundImage:"",productImage:"",imgA1:!1,imgA2:!1,imgA3:!1,imgB1:!1,imgB2:!1,imgB3:!1,imgC1:!1,imgC2:!1,imgC3:!1,categories:[],isBaseSku:!0,baseSkuId:"",skuLabel:"Standard",skuList:[],subscription:!0,startDate:"",endDate:"",description:"",additionalInfo:"",legalInfo:"",discountAmount:"",discountVariantsActive:!1,discountStartDate:"",discountEndDate:"",localDeliveryActive:!0,noSameDayDeliveryActive:!0,inStorePickupActive:!1,taxFreeActive:!0,merchandisingHighlight:"",recipe:"",relatedProducts:[],dropshipMethods:[],addons:[],flowers:[],occasions:[],bouquetStyles:[],colors:[],width:0,height:0,productClassification:"Bouquet",categoriesVariantsActive:!0,attributesVariantsActive:!0}});return t}),define("content/category-sections/merchandising/deal-of-the-day/collections/deal-collection",["backbone","../models/deal-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-products.json",model:t});return new n}),define("content/category-sections/merchandising/deal-of-the-day/collections/sku-entry-collection",["backbone","../models/deal-model"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("content/category-sections/merchandising/deal-of-the-day/templates/sku-entry-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="col-12">\r\n',1==isBaseSku&&(__p+='\r\n  <div class="row form-section y-space-top-m">\r\n    <div class="col-6-20">\r\n      <label for="name-'+(null==(__t=id)?"":__t)+'">Label</label><i class="icon icon-tool-tip x-space-s" title="This is a name used to distinguish the different price points for this product. Ex: Standard, Deluxe, Premium"></i>\r\n    </div>\r\n',"Browse Only"!==type2&&(__p+='\r\n \r\n    <div class="col-4-20">\r\n      <label for="f-suggestedPrice-'+(null==(__t=id)?"":__t)+'">Suggested Price</label><i class="icon icon-tool-tip x-space-s" title="This is the Teleflora suggested price for this product."></i>\r\n    </div>\r\n\r\n    <div class="col-4-20">\r\n      <label for="f-myPrice-'+(null==(__t=id)?"":__t)+'">My Price</label><i class="icon icon-tool-tip x-space-s" title="This is the current price for the product on your site."></i>\r\n\r\n    </div>\r\n    <div class="col-4-20">\r\n      <label for="f-holidayPrice-'+(null==(__t=id)?"":__t)+'">Holiday Upgrade</label><i class="icon icon-tool-tip x-space-s" title="During holidays, this is how much the product price will be increased."></i>\r\n\r\n    </div>\r\n'),__p+="\r\n  </div>\r\n"),__p+='  \r\n  <div class="row form-section">\r\n    <div class="col-6-20">\r\n      <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="name-'+(null==(__t=id)?"":__t)+'" name="name-'+(null==(__t=id)?"":__t)+'" value="'+(null==(__t=skuLabel)?"":__t)+'" disabled>\r\n    </div>\r\n',"Browse Only"!==type2&&(__p+="\r\n  ","Teleflora"===type&&(__p+="\r\n  "),__p+='\r\n    <div class="col-4-20 form-section">\r\n      <div class="dollar-container">\r\n      <input type="text" id="f-suggestedPrice-'+(null==(__t=id)?"":__t)+'" disabled name="f-suggestedPrice" class="f-suggestedPrice" value="'+(null==(__t=suggestedPrice)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n    <div class="col-4-20 form-section">\r\n      <div class="dollar-container">\r\n      <input type="text" id="f-myPrice-'+(null==(__t=id)?"":__t)+'" name="f-myPrice" class="f-myPrice" value="'+(null==(__t=myPrice)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n    <div class="col-4-20 form-section">\r\n      <div class="dollar-container">\r\n      <input type="text" id="f-holidayPrice-'+(null==(__t=id)?"":__t)+'" name="f-holidayPrice" class="f-holidayPrice" value="'+(null==(__t=holidayPrice)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n'),__p+="\r\n\r\n  </div>\r\n\r\n",1==isBaseSku&&(__p+='\r\n  <div id="product-image-modal"></div>\r\n'),__p+="\r\n\r\n</div>";return __p}}),define("content/category-sections/merchandising/deal-of-the-day/templates/product-image-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="image-modal" class="left-align">\r\n  <div id="aviary" class="hidden-alt"></div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">'+(null==(__t=name)?"":__t)+' Images</h2>\r\n        <button type="button" id="save-btn" class="btn btn-submit pull-right left-offset-m hidden">Save</button>        \r\n        <button type="button" id="cancel-btn" class="btn btn-other pull-right">Cancel</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n  <div class="row panel alert-panel hidden-alt">\r\n    <div class="col-12">\r\n      <div class="row">\r\n        <div class="col-1">\r\n          <div class="icon icon-3x icon-warning"></div>\r\n        </div>\r\n        <div class="col-11 alert-text left-align">\r\n          You have uploaded an invalid image file.  Please upload image files that have\r\n          extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12 left-align">\r\n      Shown below are the various images for the '+(null==(__t=name)?"":__t)+' product used on your site. You can click one of the below images to edit it or upload a new version. You can also change the editing mode to "advanced" if you would like to edit the different sizes of each image manually. Otherwise, eSAT will automatically size the product\'s images to fit your site.\r\n    </div>\r\n  </div>\r\n  <div class="row row-spaced">    \r\n    <div id="edit-btn-panel" class="col-6 left-align hidden-alt y-space-top-l form-section">\r\n      <button type="button" id="delete-btn" class="btn btn-cancel">Delete</button>\r\n      <button type="button" id="edit-btn" class="btn btn-other x-space-s">Edit</button>\r\n      <button type="button" id="upload-button" class="btn btn-submit btn-file x-space-s">\r\n        <input type="file" id="upload-btn" accept="image/*">\r\n        <i class="icon icon-add icon-lg"></i> Upload\r\n      </button>      \r\n    </div>  \r\n    <div class="col-4 form-section select-container pull-right">\r\n      <label for="f-editing-mode">Editing Mode</label>\r\n      <select id="f-editing-mode" name="f-editing-mode">\r\n        <option selected="selected" value="Basic">Basic</option>\r\n        <option value="Advanced">Advanced</option>\r\n      </select>\r\n    </div>\r\n  </div>\r\n\r\n  <canvas id="product-image-canvas" class="hidden"></canvas>\r\n  <img id="placeholder" class="hidden">\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="col-3 form-section">\r\n        <div class="label">White Background</div>\r\n        <div class="grid-item clickable" id="product-image-A1" data-img="A1">\r\n          <div class="product-image-dimensions padded-s left-align hidden">500x500px</div>\r\n          ',__p+=imgA1?'\r\n            <img id="img_imgA1" class="fit-container" src="'+(null==(__t=imgA1)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n          ':'\r\n            <div class="icon icon-question-circle icon-alt-color-1 icon-large-3x center-align padded-s"></div>\r\n          ',__p+='\r\n        </div>\r\n      </div>\r\n      <div class="col-1"></div>\r\n      <div class="col-3 form-section">\r\n        <div class="label">Transparent Background</div>\r\n        <div class="grid-item clickable" id="product-image-B1" data-img="B1">\r\n          <div class="product-image-dimensions padded-s left-align hidden">500x500px</div>\r\n          ',__p+=imgB1?'\r\n            <img id="img_imgB1" class="fit-container" src="'+(null==(__t=imgB1)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n          ':'\r\n            <div class="icon icon-question-circle icon-alt-color-1 icon-large-3x center-align padded-s"></div>\r\n          ',__p+='\r\n        </div>\r\n      </div>\r\n      <div class="col-1"></div>\r\n      <div class="col-3 form-section">\r\n        <div class="label">Environmental Background</div>\r\n        <div class="grid-item clickable" id="product-image-C1" data-img="C1">\r\n          <div class="product-image-dimensions padded-s left-align hidden">500x500px</div>\r\n          ',__p+=imgC1?'\r\n            <img id="img_imgC1" class="fit-container" src="'+(null==(__t=imgC1)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n          ':'\r\n            <div class="icon icon-question-circle icon-alt-color-1 icon-large-3x center-align padded-s"></div>\r\n          ',__p+='\r\n        </div>\r\n      </div>      \r\n    </div>\r\n  </div>\r\n\r\n  <div id="product-images-advanced" class="hidden">\r\n    <div class="row row-spaced">\r\n      <div class="col-12">\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-A2" data-img="A2">\r\n            <div class="product-image-dimensions left-align padded-s">300x300px</div>\r\n            ',__p+=imgA2?'\r\n              <img id="img_imgA2" class="fit-container" src="'+(null==(__t=imgA2)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-2x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-B2" data-img="B2">\r\n            <div class="product-image-dimensions left-align padded-s">300x300px</div>\r\n            ',__p+=imgB2?'\r\n              <img id="img_imgB2" class="fit-container" src="'+(null==(__t=imgB2)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-2x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-C2" data-img="C2">\r\n            <div class="product-image-dimensions left-align padded-s">300x300px</div>\r\n            ',__p+=imgC2?'\r\n              <img id="img_imgC2" class="fit-container" src="'+(null==(__t=imgC2)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-2x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div> \r\n        <div class="col-1"></div>             \r\n      </div>\r\n    </div>\r\n    <div class="row row-spaced">\r\n      <div class="col-12">\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-A3" data-img="A3">\r\n            <div class="product-image-dimensions left-align padded-s">100x100px</div>\r\n            ',__p+=imgA3?'\r\n              <img id="img_imgA3" class="fit-container" src="'+(null==(__t=imgA3)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-1x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-B3" data-img="B3">\r\n            <div class="product-image-dimensions left-align padded-s">100x100px</div>\r\n            ',__p+=imgB3?'\r\n              <img id="img_imgB3" class="fit-container" src="'+(null==(__t=imgB3)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-1x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>\r\n        <div class="col-1"></div>\r\n        <div class="col-3 form-section">     \r\n          <div class="grid-item clickable" id="product-image-C3" data-img="C3">\r\n            <div class="product-image-dimensions left-align padded-s">100x100px</div>\r\n            ',__p+=imgC3?'\r\n              <img id="img_imgC3" class="fit-container" src="'+(null==(__t=imgC3)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n            ':'\r\n              <div class="icon icon-question-circle icon-alt-color-1 icon-large-1x center-align padded-s"></div>\r\n            ',__p+='\r\n          </div>\r\n        </div>  \r\n        <div class="col-1"></div>            \r\n      </div>\r\n    </div>  \r\n  </div>\r\n\r\n</div>';return __p}}),define("content/category-sections/merchandising/deal-of-the-day/templates/product-image-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="grid-item clickable '+(null==(__t=active?"active":"")?"":__t)+'">\r\n  <img id="img_'+(null==(__t=id)?"":__t)+'" class="fit-container" src="'+(null==(__t=url)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n</div>';return __p}}),define("content/category-sections/merchandising/deal-of-the-day/views/product-image-view",["backbone","../templates/product-image-tpl"],function(e,t){var n=e.View.extend({tagName:"span",template:t,initialize:function(e){var t=this;t.parent=e.parent,t.listenTo(t.model,"remove",function(){t.remove()}),t.listenTo(t.model,"change",function(e){t.render(),e.get("active")&&t.parent.setActive(t.model)}),t.model.get("active")&&t.parent.setActive(t.model)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{click:"setActive"},setActive:function(){this.model.set("active",!0)}});return n}),define("content/category-sections/merchandising/deal-of-the-day/models/product-image-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,name:"",url:"",active:!1,type:""}});return t}),define("content/category-sections/merchandising/deal-of-the-day/collections/product-image-collection",["backbone","../models/product-image-model"],function(e,t){var n=e.Collection.extend({model:t,url:function(){return this.path},initialize:function(){var e=this;e.on("change:active",function(t){if(t.get("active"))for(var n=e.where({active:!0}),i=0,o=n.length;o>i;++i)n[i].get("id")!==t.get("id")&&n[i].set("active",!1)})},setActive:function(e){var t=this.where({url:e})[0];t?t.set("active",!0):this.clearActive()},clearActive:function(){this.where({active:!0}).forEach(function(e){e.set("active",!1)})},setPath:function(e){this.path=e}});return n}),define("content/category-sections/merchandising/deal-of-the-day/models/product-image-folder-model",["backbone","../collections/product-image-collection"],function(e,t){var n=e.Model.extend({defaults:function(){return{id:null,name:"",url:"",hash:"",collection:new t,primary:!1,nested:!1}},initialize:function(){this.get("collection").setPath(this.get("url"))}});return n}),define("content/category-sections/merchandising/deal-of-the-day/collections/product-image-folder-collection",["backbone","../models/product-image-folder-model"],function(e,t){var n=e.Collection.extend({model:t,url:"/mock/user-image-folders.json",initialize:function(){var e=this;e.on("remove",function(t){var n=t.get("hash");e.filter(function(e){return 0===e.get("hash").indexOf(n)}).forEach(function(t){e.remove(t)})})}});return new n}),define("content/category-sections/merchandising/deal-of-the-day/views/product-image-modal-view",["backbone","../templates/product-image-modal-tpl","./product-image-view","../collections/product-image-folder-collection","global-events","jqueryui"],function(e,t,n,i,o){var r=e.View.extend({tagName:"form",id:"f-product-image-modal",template:t,initialize:function(){this.initAviary()},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),e.delegateEvents(),e.cacheElem(),i.fetchCustom().done(function(){e.setCollection("Products"),e.collection.fetchCustom().done(function(){})}),e},events:{"click #delete-btn":"deleteImage","click #select-btn":"selectImage","click #edit-btn":"editImage","click #cancel-btn":"closeModal","click #save-btn":"handleSave","change #upload-btn":"uploadImage","click #upload-button":"setNull","change #f-editing-mode":"handleMode","click .grid-item":"highlightImage","click button":"test"},cacheElem:function(){this.$advanced=this.$el.find("#product-images-advanced"),this.$dimensions=this.$el.find(".product-image-dimensions"),this.$mode=this.$el.find("#f-editing-mode"),this.$grids=this.$el.find(".grid-item"),this.$canvas=this.$el.find("#product-image-canvas"),this.$saveBtn=this.$el.find("#save-btn"),this.$editBtnPanel=this.$el.find("#edit-btn-panel"),this.$alertPanel=this.$el.find(".alert-panel"),this.$aviary=this.$el.find("#aviary"),this.$editBtn=this.$el.find("#edit-btn"),this.$uploadBtn=this.$el.find("#upload-btn"),this.$uploadEl=this.$el.find("#upload-button"),this.$placeholder=this.$el.find("#placeholder"),this.$imageGrid=this.$el.find("#image-grid"),this.$image1=this.$el.find("#image-1"),this.$image2=this.$el.find("#image-2"),this.$image3=this.$el.find("#image-3"),this.$image4=this.$el.find("#image-4"),this.$button1=this.$el.find("#button-1"),this.$button2=this.$el.find("#button-2"),this.$button3=this.$el.find("#button-3"),this.$button4=this.$el.find("#button-4"),this.$canvas1=this.$el.find("#canvas-1"),this.$canvas2=this.$el.find("#canvas-2"),this.$canvas3=this.$el.find("#canvas-3"),this.$canvas4=this.$el.find("#canvas-4"),this.$maincanvas=this.$el.find("#canvas-main")
},handleSave:function(){this.closeModal()},setNull:function(){this.$uploadBtn.val("")},handleMode:function(){var e=this.$mode.val();"Advanced"==e?(this.$advanced.removeClass("hidden"),this.$dimensions.removeClass("hidden")):(this.$advanced.addClass("hidden"),this.$dimensions.addClass("hidden"))},setActive:function(e){this.activeImage=e,e?this.$editBtnPanel.fadeIn(200):this.$editBtnPanel.fadeOut(200)},highlightImage:function(e){var t,n=$(e.target),i=this;t=n.is(".grid-item")?n:n.closest(".grid-item"),this.$grids.removeClass("active"),t.addClass("active"),this.$editBtnPanel.removeClass("hidden-alt"),t.find("img").is("*")?(i.$editBtn.removeClass("hidden"),i.$uploadEl.addClass("hidden")):(i.$editBtn.addClass("hidden"),i.$uploadEl.removeClass("hidden"))},getActive:function(){return this.activeImage},addImage:function(e){var t=new n({model:e,parent:this});this.$imageGrid.append(t.render().el)},addAllImages:function(e){this.$imageGrid.empty(),e.each(this.addImage,this)},setCollection:function(e){var t=this;t.stopListening(t.collection,"add remove"),t.collection=i.findWhere({name:e}).get("collection"),t.listenTo(t.collection,"remove",function(){t.setActive("")})},closeModal:function(){this.parent.$modal.dialog("close")},selectImage:function(){this.cb(this.getActive()&&this.getActive().get("url")),this.closeModal()},deleteImage:function(){var e=this;e.getActive()&&o.trigger("form:delete",function(){e.collection.remove(e.getActive()),e.collection.models[0]||e.setActive(null)})},showImageModal:function(e){var t=this;t.render(e)},initAviary:function(){this.featherEditor=new Aviary.Feather({appendTo:"aviary",apiKey:"88736f3311251f0f",apiVersion:3,theme:"light",maxSize:1400,tools:"all",displayImageSize:!0,onClose:function(){$("#aviary").hide()},onError:function(e){alert(e.message)}})},editImage:function(){var e=this,t=this.$el.find(".grid-item.active").attr("data-img"),n=this.$el.find(".grid-item.active img").attr("src"),i="img"+t;this.$aviary.show(),this.featherEditor.launch({image:i,url:n,onSave:function(n,i){e.model.set(t,i),e.featherEditor.close(),e.$el.find(".grid-item.active img").attr("src",i)}})},uploadImage:function(e){var t,n,i,o,r,a=this;n=e.target.files[0],i=n.name,o=a.$el.find(".grid-item.active"),t=o.attr("data-img"),r="img"+t,a.readFile(n,function(e){url=e.target.result,a.isValidImageExtension(i)?(a.hideAlertPanel(),a.$placeholder.attr("src",url),img=a.$placeholder.get(0),a.model.set(r,url),id=t,size="A1"==id||"B1"==id||"C1"==id?194:"A2"==id||"B2"==id||"C2"==id?194:100,o.find(".icon").is("*")?(o.find(".icon").remove(),o.append('<img src="'+url+'" id="img'+t+'" width="'+size+'" height="'+size+'">')):(o.find("img").remove(),o.append('<img src="'+url+'" id="img'+t+'" width="'+size+'" height="'+size+'">')),a.showSaveBtn(),a.$uploadEl.addClass("hidden"),a.$editBtn.removeClass("hidden")):a.showAlertPanel()})},drawCanvas:function(e,t,n){var i,o,r=this,a=this.$canvas.get(0),s=n.width,l=n.height,c=0,d=0;"A1"==t||"B1"==t||"C1"==t?r.$canvas.width(500).height(500):"A2"==t||"B2"==t||"C2"==t?r.$canvas.width(300).height(300):r.$canvas.width(100).height(100),i=r.$canvas.width(),o=r.$canvas.height(),context=a.getContext("2d"),context.clearRect(0,0,500,500),rswidratio=s/i,rsheiratio=l/o,rswidratio>rsheiratio?(rswidth=s/rswidratio,rsheight=l/rswidratio):rsheiratio>rswidratio?(rswidth=s/rsheiratio,rsheight=l/rsheiratio):(rswidth=s/rswidratio,rsheight=l/rsheiratio),i>rswidth?(wdiff=i-rswidth,c=wdiff/2):o>rsheight?(hdiff=o-rsheight,d=hdiff/2):rswidth>i?(wdiff=rswidth-i,c=wdiff/2):rsheight>o&&(hdiff=rsheight-o,d=hdiff/2),context.drawImage(n,c,d,rswidth,rsheight),dataURL=a.toDataURL(),modelstr="img"+t,r.model.set(modelstr,dataURL),activeimg=r.$el.find(".grid-item.active"),imgslot=activeimg.attr("data-img"),activeimg.find(".icon").is("*")?(activeimg.find(".icon").remove(),activeimg.append('<img src="'+dataURL+'" id="img'+imgslot+'">')):(activeimg.find("img").remove(),activeimg.append('<img src="'+dataURL+'" id="img'+imgslot+'">'))},readFile:function(e,t){var n=new FileReader;n.onload=t,n.readAsDataURL(e)},isValidImageExtension:function(e){return new RegExp("(\\.gif|\\.jpg|\\.jpeg|\\.bmp|\\.png)$","i").test(e)},showAlertPanel:function(){this.$alertPanel.show()},showSaveBtn:function(){this.$saveBtn.removeClass("hidden").show()},hideAlertPanel:function(){}});return new r}),define("content/category-sections/merchandising/deal-of-the-day/views/sku-entry-view",["backbone","../templates/sku-entry-tpl","./product-image-modal-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",className:"row",template:t,initialize:function(e){var t=this;t.collection=e.collection,t.browseOnly=e.browseOnly,n.parent=this,t.listenTo(t.collection,"add remove",function(e){t.model===e?t.remove():t.render()})},render:function(){var e=this,t=e.collection.indexOf(e.model);return viewModel=this.model.toJSON(),viewModel.showDelete=0==t?!1:!0,this.visibleModel=this.model,this.renderVisible(this.model),viewModel.canDelete=this.collection.length>1,this.browseOnly&&(viewModel.type2="Browse Only"),this},renderVisible:function(e){this.visibleModel=e,this.$el.html(this.template(viewModel)),this.delegateEvents(),this.cacheElem(),this.setModal()},events:{"click .icon-trash":"handleDelete","click .image-upload":"handleImage"},cacheElem:function(){this.$previewImage=this.$el.find(".image-upload"),this.$modal=$("#product-image-modal")},setModal:function(){this.$el.find("#product-image-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=this.visibleModel,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},handleDelete:function(){var e=this;e.collection.length>1?i.trigger("form:delete",function(){e.collection.remove(e.model)}):e.parent.handlePriceAlert()},handleImage:function(){this.showModal(n)}});return o}),define("content/category-sections/merchandising/deal-of-the-day/views/deal-of-the-day-home-view",["backbone","../templates/deal-of-the-day-home-view-tpl","../models/deal-model","components/general-product/views/general-product-view","../collections/deal-collection","../collections/sku-entry-collection","content/shared/collections/addons-collection","components/featured-occasions/collections/all-occasions-collection","content/shared/collections/blank-collection","./sku-entry-view","global-events","jqueryui"],function(e,t,n,i,o,r,a,s,l,c,d){var u=e.View.extend({tagName:"div",id:"d-deal-of-the-day",template:t,initialize:function(){c.parent=this},serviceTypeCollection:null,render:function(){var e=this;return o.fetchCustom().done(function(){e.collection=o,e.model=e.collection.where({dotd:!0})[0],e.$el.html(e.template(e.model.toJSON())),e.delegateEvents(),e.cacheElem(),a.fetchCustom().done(function(){e.addonsCollection=a.deepClone(),e.addonsCollection.set(e.model.get("addon"),{merge:!0,remove:!1}),e.$el.find("#addons-container #m-general-products").is("*")||e.$addonsContainer.append(e.getAddonsComponent(e.addonsCollection).render().el)}),s.fetchCustom().done(function(){e.allOccasionCollection=s.deepClone(),e.allOccasionCollection.set(e.model.get("occasions").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$categoriesContainer.html(new i({activeTitle:"Link-To Location",activeTableTitle:"Selected Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,collection:e.allOccasionCollection,hideGrids:!0,showCategoryID:!0}).render().el)}),e.skuList=new r,e.skuList.add(e.model.toJSON()),e.skuList.add(e.model.get("skuList").map(function(e){return o.get(e).toJSON()})),e.stopListening(e.skuList),e.listenTo(e.skuList,"add",function(t){e.addSku(t)}),e.applyTabs(),e.applyAccordion(),e.addAllSkus(),e.applyToolTips()}.bind(this)),e},events:{"click #add-sku-btn":"handleAddSku","click #save-btn":"handleSave","click #reset-btn":"handleReset","click .image-upload":"handleImageUpload","change .row":"handleChange","change #upload-product-Image-logo":"handleProductImageUpload"},cacheElem:function(){this.$accordion=this.$el.find("#accordion"),this.$optional=this.$el.find("#optional"),this.$addonsContainer=this.$el.find("#addons-container"),this.$categoriesContainer=this.$el.find("#categories-container"),this.$skuList=this.$el.find("#sku-list"),this.$skuAlert=this.$el.find("#sku-alert"),this.$pricePointAlert=this.$el.find("#pricepoint-alert"),this.$name=this.$el.find("#f-name"),this.$status=this.$el.find("#f-status"),this.$number=this.$el.find("#f-number"),this.$description=this.$el.find("#f-description"),this.$inStorePickup=this.$el.find("#f-inStorePickup"),this.$taxFree=this.$el.find("#f-taxFree"),this.$merchandisingHighlights=this.$el.find("#f-merchandisingHighlights"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDescription=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$tip=this.$el.find(".tooltip-change"),this.$backgroundImage=this.$el.find("#f-background-image"),this.$productImage=this.$el.find("#f-product-image"),this.$LogoDiv=this.$el.find(".Upload-Logo-Div"),this.$alertPanel=this.$el.find(".alert-panel")},handleChange:function(){d.trigger("form:editing")},handleImageUpload:function(){var e=this;d.trigger("form:image-upload",{cb:function(t){e.$backgroundImage.prop("src",t)},active:e.$backgroundImage.prop("src"),name:"Wedding Galleries"}),d.trigger("form:editing")},handleProductImageUpload:function(e){{var t=this,n=new FileReader,i=e.target.files[0],o=i.name;$("#f-product-image").remove()}n.onload=function(e){var n=e.target.result;t.$LogoDiv.append('<img id="f-product-image" class="y-space-top-s center-align small-dotd-image" src="'+n+'" alt="">'),t.$productImageLogo=n},t.hasValidImageExtension(o)?(t.hideAlertPanel(),n.readAsDataURL(e.target.files[0])):t.showAlertPanel()},hasValidImageExtension:function(e){return new RegExp("(\\.gif|\\.jpg|\\.jpeg|\\.bmp|\\.png)$","i").test(e)},showAlertPanel:function(){this.$alertPanel.show()},hideAlertPanel:function(){this.$alertPanel.hide()},handleReset:function(){var e=this;d.trigger("modal:custom",{template:{title:"Reset Settings",text:"Are you sure? This will reset all applicable fields to their default Teleflora/group values."},confirmFn:function(){e.$name.val(e.model.get("name")),e.$number.val(e.model.get("number")),e.$status.prop("checked",!1),e.$metaTitle.val(e.model.get("metaTitle")),e.$metaKeywords.val(e.model.get("metaKeywords")),e.$metaDescription.val(e.model.get("metaDescription")),e.$metaTags.val(e.model.get("metaTags")),e.$description.val(e.model.get("description")),e.$inStorePickup.prop("checked",!0),e.$taxFree.prop("checked",!0),e.$merchandisingHighlights.val(e.model.get(""))},cancelFn:function(){}})},handleSave:function(){this.model.set({name:this.$name.val().trim(),status:this.$status.is(":checked"),number:this.$number.val().trim(),description:this.$description.val().trim(),inStorePickupActive:this.$inStorePickup.is(":checked"),taxFreeActive:this.$taxFree.is(":checked"),metaTitle:this.$el.find("#f-meta-title").val(),metaKeywords:this.$metaKeywords.val().trim(),metaDescription:this.$metaDescription.val().trim(),metaTags:this.$metaTags.val().trim(),merchandisingHighlight:this.$merchandisingHighlights.find("option:selected").val(),metaTitle:this.$metaTitle.val().trim(),backgroundImage:this.$backgroundImage.prop("src"),productImage:this.$productImageLogo,addons:this.addonsCollection.toJSON(),occasions:this.allOccasionCollection.toJSON()}),d.trigger("form:save",this.$tip)},showError:function(){this.$skuAlert.fadeIn(200)},hideError:function(){this.$skuAlert.fadeOut(200)},showPriceError:function(){this.$pricePointAlert.fadeIn(200)},hidePriceError:function(){this.$pricePointAlert.fadeOut(200)},handlePriceAlert:function(){var e=this;this.skuList.length<1&&(e.showPriceError(),setTimeout(function(){e.hidePriceError()},5e3))},handleAddSku:function(){var e=this.model.deepClone(),t=this;skuNumber=1==this.skuList.length?"Deluxe":2==this.skuList.length?"Premium":"",e.set({id:e.get("id")+"-"+Date.now(),sequence:t.skuList.length+1,name:e.get("name"),skuLabel:skuNumber,myPrice:"0.00",holidayPrice:"0.00",isBaseSku:!1}),"Custom"===this.model.get("type")&&this.skuList.length<6?this.skuList.add(e):(this.showError(),setTimeout(function(){t.hideError()},5e3))},addSku:function(e){var t="Browse Only"===this.type2,n=new c({model:e,collection:this.skuList,parent:this,browseOnly:t});this.$skuList.append(n.render().el)},addAllSkus:function(){this.$skuList.empty(),this.skuList.each(this.addSku,this)},getAddonsComponent:function(e){return new i({activeTitle:"Selected Product Add-Ons",activeTableTitle:"Add-On",allTitle:"Add-On Search",allSearchPlaceholder:"Add-On Search Term",activeAttribute:"active",nameAttribute:"name",async:!1,collection:e,nofilter:!1,sequence:!0,selectAll:!0,imageSearch:!0})},applyTabs:function(){this.$el.find("#tabs").tabs()},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyAccordion:function(){var e=this;this.$optional.click(function(){var t=$(this);return e.$accordion.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()}});return new u}),define("content/category-sections/merchandising/deal-of-the-day/views/deal-of-the-day-view",["backbone","./deal-of-the-day-home-view","global-events"],function(e,t){var n=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(){}});return new n}),define("content/category-sections/more/product-page-settings/templates/product-page-settings-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Product Page Settings</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage how the product page is displayed.\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-4">\r\n				<label for="end-date">Product Page Layout Type<i title="This is a basic notification" class="icon icon-tool-tip x-space-s"></i></label>\r\n				<div class="select-container">\r\n					<select id="f-pageLayoutType" name="f-pageLayoutType">\r\n					<option selected disabled hidden value="'+(null==(__t=pageLayoutType)?"":__t)+'">'+(null==(__t=pageLayoutType)?"":__t)+'</option>\r\n					<option value="Standard Layout" preview="catlayout-1">Standard Layout</option>\r\n					<option value="Holiday Layout" preview="catlayout-2">Holiday Layout</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<img ',__p+="Standard Layout"==pageLayoutType?'src="/images/mock/catlayout-1.png"':'src="/images/mock/catlayout-2.png"',__p+=' class="categoryImage">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Teleflora Products Labels <i class="icon icon-tool-tip x-space-s" title="You can change the fields below in order to specify custom labels for the default price points for Teleflora products. For example, you could use Small, Medium, and Large instead of the defaults."></i>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-4">\r\n				<label for="f-customAsShown">Standard</label>\r\n				<input type="text" id="f-customAsShown" name="f-customAsShown" value="'+(null==(__t=customAsShown)?"":__t)+'">\r\n			</div>\r\n			<div class="col-4">\r\n				<label for="f-customDeluxe">Deluxe</label>\r\n				<input type="text" id="f-customDeluxe" name="f-customDeluxe" value="'+(null==(__t=customDeluxe)?"":__t)+'">\r\n			</div>\r\n			<div class="col-4">\r\n				<label for="f-customPremium">Premium</label>\r\n				<input type="text" id="f-customPremium" name="f-customPremium" value="'+(null==(__t=customPremium)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Zip Code\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-3">\r\n				<div class="label">Zip Code Input<i title="Leave this turned on to allow customers to input the zip code on the product page." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=zipInputActive?"checked":"")?"":__t)+' type="checkbox" id="f-zipInputActive" name="f-zipInputActive" class="on-off-switch" />\r\n				<label for="f-zipInputActive" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n\r\n			<div class="col-3">\r\n				<div class="label">Require Zip Code<i title="Leave this turned on to require customers to input the zip code on the product page." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=requireZipActive?"checked":"")?"":__t)+' type="checkbox" id="f-requireZipActive" name="f-requireZipActive" class="on-off-switch" />\r\n				<label for="f-requireZipActive" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Merchandising\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-3">\r\n				<div class="label">Bouquet Size<i title="Turning this setting on will display product dimensions on the product detail page (if they are specified for the product)." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=bouquetSize?"checked":"")?"":__t)+' type="checkbox" id="f-bouquetSize" name="f-bouquetSize" class="on-off-switch" />\r\n				<label for="f-bouquetSize" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n			<div class="col-3">\r\n				<div class="label">Add-ons<i title="Turning this setting on will display add-ons on the product page such as mylar balloons or stuffed animals." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=displayAddOns?"checked":"")?"":__t)+' type="checkbox" id="f-displayAddOns" name="f-displayAddOns" class="on-off-switch" />\r\n				<label for="f-displayAddOns" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n			<div class="col-5">\r\n				<div class="label">Cross-Selling Section<i title="This setting turns on the following extra merchandising sections on the page: <br>Flowers In This Bouquet<br>Collections<br>You May Also Like<br>Recently Viewed Products." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=displayCrossSelling?"checked":"")?"":__t)+' type="checkbox" id="f-displayCrossSelling" name="f-displayCrossSelling" class="on-off-switch" />\r\n				<label for="f-displayCrossSelling" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>			\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Social Media\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-3">\r\n				<div class="label">Display Share Buttons<i title="Leave this turned on to allow the customer to share the arrangement on social media." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=shareButtonsActive?"checked":"")?"":__t)+' type="checkbox" id="f-shareButtonsActive" name="f-shareButtonsActive" class="on-off-switch" />\r\n				<label for="f-shareButtonsActive" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>		\r\n		</div>\r\n\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-12">\r\n				<div class="panel-title">Custom Text Fields</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-inStorePickup">In-Store Pickup<i class="icon icon-tool-tip x-space-s" title="This is a small line of text which is displayed only on products set to In-Store Pickup Only."></i></label>\r\n				<input type="text" id="f-inStorePickup" name="f-inStorePickup" value="'+(null==(__t=inStorePickup)?"":__t)+'">\r\n			</div>\r\n			<div class="col-6 form-section">\r\n				<label for="f-localDelivery">Local Delivery<i class="icon icon-tool-tip x-space-s" title="This is a small line of text which is displayed only on products set to Local Delivery Only."></i></label>\r\n				<input type="text" id="f-localDelivery" name="f-localDelivery" value="'+(null==(__t=localDelivery)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-6">\r\n				<label for="f-dropshipProducts">Dropship Products<i class="icon icon-tool-tip x-space-s" title="This is a small line of text which is displayed only on dropship products."></i></label>\r\n				<input type="text" id="f-dropshipProducts" name="f-dropshipProducts" value="'+(null==(__t=dropshipProducts)?"":__t)+'">\r\n			</div>\r\n		\r\n			<div class="col-6 form-section">\r\n				<label for="f-browseOnly">Browse Only<i class="icon icon-tool-tip x-space-s" title="This is a small line of text which is displayed only on products set to Browse Only and cannot be purchased."></i></label>\r\n				<input type="text" id="f-browseOnly" name="f-browseOnly" value="'+(null==(__t=browseOnly)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div><!-- End of Main Row -->\r\n<div id"product-price-modal"></div>';return __p}}),define("content/category-sections/more/product-page-settings/models/product-page-settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-product-page-settings.json",defaults:{allowNewProducts:!0,allowAutomaticUpdates:!0,allowAutomaticGroupUpdates:!0,alwaysUsePricing:!1,allowHolidayPricing:!0,startDate:"",endDate:"",holidayType:"By Order Date",holidayText:"",keepsakes:"",everydayProducts:"",minPriceActive:"",newProductMinPrice:"",zipInputActive:!0,displayCrossSelling:!0,displayAddOns:!0,requireZipActive:!0,bouquetSize:!1,zipLookupActive:!0,shareButtonsActive:!0,displaySocialMedia:!0,inStorePickup:"",localDelivery:"",browseOnly:"",dropshipProducts:"",customAsShown:"",customDeluxe:"",customPremium:"",featuredProducts:[],customFeaturedProducts:null,pageLayoutType:"Small Images"}});return new t}),define("content/category-sections/more/product-page-settings/views/product-page-settings-view",["backbone","../templates/product-page-settings-tpl","../models/product-page-settings-model","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({tagName:"form",id:"p-product-page-settings",template:t,initialize:function(){},render:function(){var e=this;return n.fetchCustom().done(function(){this.$el.html(this.template(n.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips()}.bind(this)),e},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$categoryImage=this.$el.find(".categoryImage"),this.$zipSwitchGroup=this.$el.find("#zip-switch-group"),this.$zipInputActive=this.$el.find("#f-zipInputActive"),this.$requireZipActive=this.$el.find("#f-requireZipActive"),this.$zipLookupActive=this.$el.find("#f-zipLookupActive"),this.$shareButtonsActive=this.$el.find("#f-shareButtonsActive"),this.$inStorePickup=this.$el.find("#f-inStorePickup"),this.$localDelivery=this.$el.find("#f-localDelivery"),this.$browseOnly=this.$el.find("#f-browseOnly"),this.$dropshipProducts=this.$el.find("#f-dropshipProducts"),this.$pageLayoutType=this.$el.find("#f-pageLayoutType"),this.$customAsShown=this.$el.find("#f-customAsShown"),this.$customDeluxe=this.$el.find("#f-customDeluxe"),this.$customPremium=this.$el.find("#f-customPremium"),this.$displayCrossSelling=this.$el.find("#f-displayCrossSelling"),this.$displayAddOns=this.$el.find("#f-displayAddOns"),this.$displaySocialMedia=this.$el.find("#f-displaySocialMedia")},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","change #f-pageLayoutType":"changeLayout"},handleSave:function(){n.set({zipInputActive:this.$zipInputActive.is(":checked"),displayCrossSelling:this.$displayCrossSelling.is(":checked"),displayAddOns:this.$displayAddOns.is(":checked"),requireZipActive:this.$requireZipActive.is(":checked"),zipLookupActive:this.$zipLookupActive.is(":checked"),shareButtonsActive:this.$shareButtonsActive.is(":checked"),displaySocialMedia:this.$displaySocialMedia.is(":checked"),inStorePickup:this.$inStorePickup.val().trim(),localDelivery:this.$localDelivery.val().trim(),browseOnly:this.$browseOnly.val().trim(),dropshipProducts:this.$dropshipProducts.val().trim(),customAsShown:this.$customAsShown.val().trim(),customDeluxe:this.$customDeluxe.val().trim(),customPremium:this.$customPremium.val().trim(),pageLayoutType:this.$pageLayoutType.val()}),i.trigger("form:save",this.$tip)},handleCancel:function(){i.trigger("form:reset",this.render.bind(this))},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},changeLayout:function(){this.$categoryImage.attr("src","/images/mock/"+$("option:selected",this.$pageLayoutType).attr("preview")+".png")}});return new o}),define("content/category-sections/more/general-product-settings/templates/general-settings-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">General Product Settings</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage settings for all your site\'s products.\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		\r\n				\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-4">\r\n				<label for="f-keepsakes">Keepsakes</label>\r\n				<div class="select-container">\r\n					<select id="f-keepsakes" name="f-keepsakes">\r\n					<option selected disabled hidden value="'+(null==(__t=keepsakes)?"":__t)+'">'+(null==(__t=keepsakes)?"":__t)+'</option>\r\n					<option value="Add All Keepsakes">Add All Keepsakes</option>\r\n					<option value="Add Keepsakes I Purchased">Add Keepsakes I Purchased</option>\r\n					<option value="Never Add Keepsakes">Never Add Keepsakes</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-4">\r\n				<div class="label">Everday Products</div>\r\n				<div class="select-container">\r\n					<select id="f-everydayProducts" name="f-everydayProducts">\r\n					<option selected disabled hidden value="'+(null==(__t=everydayProducts)?"":__t)+'">'+(null==(__t=everydayProducts)?"":__t)+'</option>\r\n					<option value="Add All Everyday Products">Add All Everyday Products</option>\r\n					<option value="Add None">Add None</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-4">\r\n				<div class="label">Match Teleflora.com Pricing</div>\r\n				<input '+(null==(__t=alwaysUsePricing?"checked":"")?"":__t)+' type="checkbox" id="f-alwaysUsePricing" name="f-alwaysUsePricing" class="on-off-switch" />\r\n				<label for="f-alwaysUsePricing" class="on-off-switch-label">\r\n				<div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>					\r\n		</div>\r\n\r\n		<div class="row row-spaced panel">\r\n			<div class="col-12">\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<div class="panel-title">\r\n							Products Pricing\r\n						</div>\r\n					</div>\r\n				</div>				\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-3">\r\n						<div class="label">Allow Automatic eFlorist Pricing Updates</div>\r\n						<input '+(null==(__t=allowAutomaticUpdates?"checked":"")?"":__t)+' type="checkbox" id="f-allowAutomaticUpdates" name="f-allowAutomaticUpdates" class="on-off-switch" />\r\n						<label for="f-allowAutomaticUpdates" class="on-off-switch-label">\r\n						<div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n					<div class="col-3">\r\n						<div class="label">Allow Automatic Group Pricing Updates</div>\r\n						<input '+(null==(__t=allowAutomaticGroupUpdates?"checked":"")?"":__t)+' type="checkbox" id="f-allowAutomaticGroupUpdates" name="f-allowAutomaticGroupUpdates" class="on-off-switch" />\r\n						<label for="f-allowAutomaticGroupUpdates" class="on-off-switch-label">\r\n						<div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n					<div class="col-3">\r\n						<label for="f-minPriceActive">Minimum Price for Activation</label><i class="icon icon-tool-tip x-space-s" title="You can use this field to specify your bottom price line when making updates in bulk. Depending on the other settings you have chosen, this will either deactivate any products below this price or mark them all up to match this price."></i>\r\n					    <input type="text" id="f-minPriceActive" name="f-minPriceActive" value="'+(null==(__t=minPriceActive)?"":__t)+'">\r\n					</div>	\r\n					<div class="col-3">\r\n						<div class="label">Product Below Minimum Price</div>\r\n						<div class="select-container">\r\n							<select id="f-newProductMinPrice" name="f-newProductMinPrice">\r\n							<option selected disabled hidden value="'+(null==(__t=newProductMinPrice)?"":__t)+'">'+(null==(__t=newProductMinPrice)?"":__t)+'</option>\r\n							<option value="Deactivated">Deactivated</option>\r\n							<option value="Marked Up">Marked Up</option>\r\n							</select>\r\n						</div>\r\n					</div>		\r\n				</div>\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-6">\r\n						<button type="button" id="update-btn" class="btn btn-submit pull-left">UPDATE PRICES IN BULK</button>\r\n					</div>\r\n					<div class="col-6">\r\n						<button type="button" id="reset-btn" class="btn btn-other pull-left">RESET PRICES TO DEFAULT</button>\r\n					</div>		\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div id="product-price-modal"></div>\r\n\r\n		<div class="row row-spaced panel">\r\n			<div class="col-12">\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<div class="panel-title clearfix">\r\n							<div class="y-space-top-m pull-left">Holiday Pricing</div> \r\n								<button id="reset-holiday-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-add"></i>RESET HOLIDAY PRICE SETTINGS</button>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						Holiday Pricing\'s start and end dates are based on delivery date.\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="col-3 form-section">\r\n						<div class="label"> Holiday Pricing </div>\r\n						<input '+(null==(__t=enableHolidayPricing?"checked ":"")?"":__t)+'type="checkbox" id="f-enableHolidayPricing" name="f-enableHolidayPricing" class="on-off-switch" />\r\n						<label for="f-enableHolidayPricing" class="on-off-switch-label">\r\n							<div class="on-off-switch-state">on</div>\r\n						</label>				\r\n					</div>\r\n\r\n					<div class="col-3 date-container form-section f-holiday-price-field">\r\n					 <div class="label"> Holiday Start Date </div>\r\n					    <input type="text" id="f-startDate" name="f-startDate" class="f-startDate" value="'+(null==(__t=startDate)?"":__t)+'">\r\n					</div>\r\n					<div class="col-3 date-container form-section f-holiday-price-field">\r\n					<div class="label"> Holiday End Date</div>\r\n					    <input type="text" id="f-endDate" name="f-endDate" class="f-endDate" value="'+(null==(__t=endDate)?"":__t)+'">\r\n					</div>	\r\n					<div class="col-3 form-section select-container f-holiday-price-field">\r\n						<div class="label">Apply Price by:</div>\r\n						<select name="f-holiday-type" id="f-holiday-type">\r\n					    	<option selected disabled hidden value="'+(null==(__t=holidayType)?"":__t)+'">'+(null==(__t=holidayType)?"":__t)+'</option>\r\n					    	<option value="By Order Date">By Order Date</option>\r\n					    	<option value="By Delivery Date">By Delivery Date</option>\r\n						</select>				\r\n					</div>\r\n				</div>			\r\n				<div class="row row-spaced">\r\n					<div class="col-12 form-section f-holiday-price-field">\r\n						<div class="label">Holiday Price Text</div>\r\n						<textarea name="f-holiday-text" id="f-holiday-text" class="size-3">'+(null==(__t=holidayText)?"":__t)+"</textarea>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div><!-- End of Main Row -->\r\n";
return __p}}),define("content/category-sections/more/general-product-settings/models/settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-product-page-settings.json",defaults:{allowNewProducts:!0,allowAutomaticUpdates:!0,allowAutomaticGroupUpdates:!0,alwaysUsePricing:!1,allowHolidayPricing:!0,enableHolidayPricing:!0,startDate:"",endDate:"",holidayType:"By Order Date",holidayText:"",keepsakes:"",everydayProducts:"",minPriceActive:"",newProductMinPrice:"",featuredProducts:[],markupMarkdown:"",dollarPerc:"",markAmount:""}});return new t}),define("content/category-sections/more/general-product-settings/templates/product-page-modal-view-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="product-modal" class="left-align">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="section-title">\r\n				<h2 class="pull-left">Update Prices in Bulk</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Update Prices</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div><!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced form-section">\r\n			<div class="col-4">\r\n				<div class="label">Mark-Up/Down</div>\r\n				<div class="select-container">\r\n					<select id="f-markupMarkdown" name="f-markupMarkdown">\r\n					<option selected disabled hidden value="Mark Up"></option>\r\n					<option value="Mark Up">Mark Up</option>\r\n					<option value="Mark Down">Mark Down</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-4">\r\n				<div class="label">Dollar/Percentage</div>\r\n				<div class="select-container">\r\n					<select id="f-dollarPerc" name="f-dollarPerc">\r\n					<option selected disabled hidden value="Dollar"></option>\r\n					<option value="Dollar">Dollar</option>\r\n					<option value="Percentage">Percentage</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-4">\r\n				<label for="f-markAmount">Mark-Up/Down Amount</label><i class="icon icon-tool-tip x-space-s" title="This is the amount the selected products below will either be marked up or down based on your other selected settings."></i>\r\n			    <input type="text" id="f-markAmount" name="f-markAmount" value="">\r\n			</div>				\r\n		</div>\r\n\r\n	<div id="featured-product"></div>\r\n</div>';return __p}}),define("content/category-sections/more/general-product-settings/views/product-page-modal-view",["backbone","../templates/product-page-modal-view-tpl","components/featured-product/collections/featured-product-collection","components/featured-product/views/featured-product-view","global-events"],function(e,t){return e.View.extend({template:t,initialize:function(){},render:function(){var e=this;return e.$el.html(e.template()),console.log(e.parent),this.cacheElem(),this.$featuredProduct.append(e.parent.featuredProductView.render().$el),this.delegateEvents(),this},events:{"click #save-btn":"handleSave","click #cancel-btn":"closeModal"},cacheElem:function(){this.$featuredProduct=this.$el.find("#featured-product")},handleSave:function(){this.closeModal()},closeModal:function(){this.parent.closeModal()}})}),define("content/category-sections/more/general-product-settings/views/general-settings-view",["backbone","../templates/general-settings-view-tpl","../models/settings-model","components/featured-product/collections/featured-product-collection","components/featured-product/views/featured-product-view","./product-page-modal-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"g-general-page-settings",template:t,model:n,initialize:function(){r.parent=this},render:function(){var e=this;return n.fetchCustom().done(function(){this.$el.html(this.template(n.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyDates(),e.featuredProductView=new o({collection:new i(e.model.get("featuredProducts")),title:"Selected Products",selectAll:!0}),this.applyToolTips(),this.setModal(),this.toggleHolidayPricing(),this.renderFederation()}.bind(this)),e},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$categoryImage=this.$el.find(".categoryImage"),this.$featuredProduct=this.$el.find("#featured-product"),this.$modal=this.$el.find("#product-price-modal"),this.$zipSwitchGroup=this.$el.find("#zip-switch-group"),this.$allowNewProducts=this.$el.find("#f-allowNewProducts"),this.$keepsakes=this.$el.find("#f-keepsakes"),this.$everydayProducts=this.$el.find("#f-everydayProducts"),this.$allowAutomaticUpdates=this.$el.find("#f-allowAutomaticUpdates"),this.$alwaysUsePricing=this.$el.find("#f-alwaysUsePricing"),this.$allowAutomaticGroupUpdates=this.$el.find("#f-allowAutomaticGroupUpdates"),this.$minPriceActive=this.$el.find("#f-minPriceActive"),this.$newProductMinPrice=this.$el.find("#f-newProductMinPrice"),this.$markupMarkdown=this.$el.find("#f-markupMarkdown"),this.$dollarPerc=this.$el.find("#f-dollarPerc"),this.$markAmount=this.$el.find("#f-markAmount"),this.$allowHolidayPricing=this.$el.find("#f-allowHolidayPricing"),this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate"),this.$holidayText=this.$el.find("#f-holiday-text"),this.$enableHolidayPricing=this.$el.find("#f-enableHolidayPricing"),this.$holidayFields=this.$el.find(".f-holiday-price-field"),this.$holidayType=this.$el.find("#f-holiday-type")},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","change #f-pageLayoutType":"changeLayout","change #f-allowNewProducts":"handleToggle","click #reset-btn":"handleReset","click #reset-holiday-btn":"handleReset","click #update-btn":"showModal","click #f-allowAutomaticUpdates":"handleAutoToggle","click #f-allowAutomaticGroupUpdates":"handleAutoGroupToggle","click #f-alwaysUsePricing":"handleTFToggle","change #f-enableHolidayPricing":"toggleHolidayPricing"},handleAutoToggle:function(e){var t=this,n=$(e.target);n.is(":checked")?(e.preventDefault(),a.trigger("modal:custom",{template:{title:"Automatic Price Updates",text:'Setting this to ON will allow Teleflora global pricing updates to take effect on your site. Turning this setting OFF will ensure that the products on your site do not get their prices changed by any updates.<br><br>Turning this ON will deactivate "Always Use Teleflora.com Pricing" as they cannot both be enabled at once',confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})):!t.$allowAutomaticUpdates.is("checked")},handleAutoGroupToggle:function(e){var t=this,n=$(e.target);n.is(":checked")?(e.preventDefault(),a.trigger("modal:custom",{template:{title:"Automatic Price Updates",text:'Setting this to ON will allow group level pricing updates to take effect on your site. Turning this setting OFF will ensure that the products on your site do not get their prices changed by any updates.<br><br>Turning this ON will deactivate "Always Use Teleflora.com Pricing" as they cannot both be enabled at once',confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})):!t.$allowAutomaticGroupUpdates.is("checked")},handleTFToggle:function(e){var t=this,n=$(e.target);n.is(":checked")?(event.preventDefault(),a.trigger("modal:custom",{template:{title:"Use Teleflora.com Pricing",text:'Setting this to ON will force all of the Teleflora products on your site to use Teleflora.com pricing. This will follow any Teleflora.com price updates. Enabling this will turn off "Allow Automatic Pricing Updates" since your site will follow the Teleflora.com price updates instead.',confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})):!t.$allowAutomaticGroupUpdates.is("checked")},handleSave:function(){n.set({allowNewProducts:this.$allowNewProducts.is(":checked"),allowAutomaticUpdates:this.$allowAutomaticUpdates.is(":checked"),allowAutomaticGroupUpdates:this.$allowAutomaticGroupUpdates.is(":checked"),alwaysUsePricing:this.$alwaysUsePricing.is(":checked"),allowHolidayPricing:this.$allowHolidayPricing.is(":checked"),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),keepsakes:this.$keepsakes.val(),everydayProducts:this.$everydayProducts.val(),minPriceActive:this.$minPriceActive.val().trim(),newProductMinPrice:this.$newProductMinPrice.val(),holidayText:this.$holidayText.val().trim(),featuredProducts:[],customFeaturedProducts:null,markupMarkdown:this.$markupMarkdown.val(),dollarPerc:this.$dollarPerc.val(),markAmount:this.$markAmount.val(),holidayType:this.$holidayType.val().trim()}),a.trigger("form:save",this.$tip)},handleCancel:function(){a.trigger("form:reset",this.render.bind(this))},showModal:function(){var e=this,t=new r;t.model=e.model,t.parent=e,this.$modal.empty(),this.$modal.append(t.render().el),this.$modal.dialog("open")},toggleHolidayPricing:function(){var e=this.$enableHolidayPricing;$(e).is(":checked")?this.$holidayFields.removeClass("hidden"):this.$holidayFields.addClass("hidden")},handleReset:function(){var e=this;a.trigger("modal:custom",{template:{title:"Reset Holiday Price Settings",text:"Are you sure? This will change your holiday pricing settings to match the eFlorist default settings.<br><br>NOTE: This will NOT change your individual holiday prices.",confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){e.$allowHolidayPricing.prop("checked",!0),e.$startDate.val("05/10"),e.$endDate.val("05/11"),e.$holidayText.val("Its Mothers Day"),e.$enableHolidayPricing.prop("checked",!0),e.$holidayType.val("By Order Date")},cancelFn:function(){}})},handleToggle:function(){var e=this;a.trigger("form:editing"),e.$allowNewProducts.is(":checked")?a.trigger("form:reset",function(){e.$allowNewProducts.prop("checked",!0),e.$keepsakes.prop("disabled",!1).val(n.get("keepsakes")),e.$everydayProducts.prop("disabled",!1).val(n.get("everydayProducts"))}):(this.$keepsakes.prop("disabled",!0),this.$everydayProducts.prop("disabled",!0))},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},changeLayout:function(){this.$categoryImage.attr("src","/images/mock/"+$("option:selected",this.$pageLayoutType).attr("preview")+".png")},renderFederation:function(){var e=this;this.runFederation(e.$enableHolidayPricing,!0),this.runFederation(e.$startDate,"05/10"),this.runFederation(e.$endDate,"05/11"),this.runFederation(e.$holidayText,"Its Mothers Day"),this.runFederation(e.$holidayType,"By Order Date")},runFederation:function(e,t){var n=e.closest(".form-section");n.addClass("f-federation"),e.prev().append('<i title="Because this field was left blank, it reverted to the default Teleflora/group value." class="icon icon-tool-tip icon-tool-tip-federated"></i>'),(""==e.val()||null==e.val()||e.val()==t)&&(n.addClass("f-federated"),e.is("select")?e.find('option[value="'+n+'"]').prop("selected",!0):e.val(t)),e.on("change",function(){""==e.val()||null==e.val()?(n.addClass("f-federated").removeClass("f-custom"),e.is("select")?e.find('option[value="'+n+'"]').prop("selected",!0):e.val(t)):n.addClass("f-custom").removeClass("f-federated")})},applyDates:function(){var e=this;e.$startDate.datepicker({beforeShow:function(){$("#ui-datepicker-div").addClass("hide-year")},changeYear:!1,onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur"),$(this).change(),e.$endDate.change()},onClose:function(){$("#ui-datepicker-div").removeClass("hide-year")},dateFormat:"mm/dd"}),e.$endDate.datepicker({beforeShow:function(){$("#ui-datepicker-div").addClass("hide-year")},changeYear:!1,onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur"),$(this).change()},onClose:function(){$("#ui-datepicker-div").removeClass("hide-year")},dateFormat:"mm/dd"})},setModal:function(){this.$modal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},closeModal:function(){this.$modal.dialog("close")}});return new s}),define("content/category-sections/merchandising/sympathy-page/templates/sympathy-page-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title">\r\n      <h2 class="pull-left">Sympathy & Funeral Page</h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel row-spaced alert-panel hidden-alt" id="min-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        If you wish to use a section (such as For the Service or For the Home) you must select at least 1 category for that section. Please select at least 1 category for each active section.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    Here you can edit your Sympathy & Funeral landing page. If this page is enabled, it is the page your customers will see first when clicking on the Sympathy link on your site. From here you can specify which subcategories you would like featured, add links to landing pages, and change other page settings like the background image.\r\n  </div>\r\n</div>\r\n\r\n<div class="panel form-section">\r\n  <div class="row">\r\n    <div class="col-6 form-section">\r\n      <label for="f-pageHeaderTitle">Page Header Title</label><i class="icon icon-tool-tip x-space-s" title="This is the title that will be displayed at the top of the Sympathy page."></i>\r\n      <input type="text" id="f-pageHeaderTitle" name="f-pageHeaderTitle" value="'+(null==(__t=pageHeaderTitle)?"":__t)+'">\r\n    </div>\r\n\r\n    <div class="col-3">\r\n      <div class="pull-right">\r\n        <div class="label">Active<i title="If this is turned OFF, the Sympathy page will be disabled and will not appear on your site." class="icon icon-tool-tip x-space-s"></i></div>\r\n        <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n        <label for="f-active" class="on-off-switch-label">\r\n          <div class="on-off-switch-state">on</div>\r\n        </label>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <div class="row">\r\n    <div class="col-12 form-section">\r\n        <label for="f-pageHeaderDescription">Page Header Description</label><i title="This description will show up underneath the Page Header Title and can be used to describe your sympathy services." class="icon icon-tool-tip x-space-s"></i>\r\n        <textarea name="f-pageHeaderDescription" id="f-pageHeaderDescription" class="size-2">'+(null==(__t=pageHeaderDescription)?"":__t)+'</textarea>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-3 form-section image-section">\r\n      <div class="label">Background Image <i title="Use the button below to change the background image for the Sympathy page." class="icon icon-tool-tip"></i></div>\r\n      <button type="button" id="f-image-url-1" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s"></button>\r\n    </div>\r\n    <div class="col-3">\r\n      <div class="label">Background Preview <i title="This is the background image which will appear at the top of your Sympathy page." class="icon icon-tool-tip"></i></div>\r\n      <img id="f-image-1-preview" class="fill-container-width" src="'+(null==(__t=imgUrl1)?"":__t)+'" alt="">\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div id="tabs">\r\n      <ul class="clearfix">\r\n        <li class="col-6"><a class="center-align fill-container-width" href="#service">For the Service</a></li>\r\n        <li class="col-6"><a class="center-align fill-container-width" href="#home">For the Home</a></li>\r\n      </ul>\r\n\r\n      <div id="service">\r\n        <div class="row row-spaced form-section">\r\n          <div class="col-2">\r\n            <div class="label">Display<i title="Turning this OFF will disable the For the Service section of the page." class="icon icon-tool-tip x-space-s"></i></div>\r\n            <input '+(null==(__t=serviceDisplayActive?"checked":"")?"":__t)+' type="checkbox" id="f-serviceDisplayActive" name="f-serviceDisplayActive" class="on-off-switch" />\r\n            <label for="f-serviceDisplayActive" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n          </div>\r\n          <div class="col-4 form-section">\r\n            <label for="f-serviceNameOverride">Name Override</label><i class="icon icon-tool-tip x-space-s" title="You can change the name from For the Service to a custom name here."></i>\r\n            <input type="text" id="f-serviceNameOverride" name="f-serviceNameOverride" value="'+(null==(__t=serviceNameOverride)?"":__t)+'">\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <div class="panel-title">By Type</div>\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            Select the flower types categories you want to appear on the sympathy page under "For the Service" section\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <div id="service-type-container"></div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div id="home">\r\n        <div class="row row-spaced form-section">\r\n          <div class="col-2">\r\n            <div class="label">Display<i title="Turning this OFF will disable the For the Home section of the page." class="icon icon-tool-tip x-space-s"></i></div>\r\n            <input '+(null==(__t=homeDisplayActive?"checked":"")?"":__t)+' type="checkbox" id="f-homeDisplayActive" name="f-homeDisplayActive" class="on-off-switch" />\r\n            <label for="f-homeDisplayActive" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n          </div>\r\n          <div class="col-4">\r\n            <label for="f-homeNameOverride">Name Override</label><i class="icon icon-tool-tip x-space-s" title="You can change the name from For the Home to a custom name here."></i>\r\n            <input type="text" id="f-homeNameOverride" name="f-homeNameOverride" value="'+(null==(__t=homeNameOverride)?"":__t)+'">\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <div class="panel-title">By Type</div>\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            Select the flower types categories you want to appear on the sympathy page under "For the Home" section\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <div id="home-type-container"></div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <div class="panel form-section row row-spaced">\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="panel-title">Sympathy Giving Guides</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row row-spaced">\r\n        <div class="col-4">\r\n          <label for="f-mainTitle">Giving Guide Section Title</label><i class="icon icon-tool-tip x-space-s" title="This is the title of the Sympathy Giving Guides section of the page"></i>\r\n          <input type="text" id="f-mainTitle" name="f-mainTitle" value="'+(null==(__t=mainTitle)?"":__t)+'">\r\n        </div>\r\n\r\n        <div class="col-8 right-align">\r\n          <div class="label"> &nbsp </div>\r\n          <button type="button" id="add-section-btn" class="pull-right btn btn-submit"><i class="icon icon-add icon-lg"></i>New Section</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <table class="table alternate">\r\n            <thead>\r\n              <tr>\r\n                <th class="col-2">Sequence</th>\r\n                <th class="col-4 left-align">Section<button type="button" id="sort-btn" data-attribute="title" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n                <th class="col-2">Edit</th>\r\n                <th class="col-2">Display</th>\r\n                <th class="col-2">Delete</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody id="section-list"></tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="row row-spaced">\r\n        <div class="col-3 form-section image-section">\r\n          <div class="label">Image<i class="icon icon-tool-tip" title="Click the button below to change the image that appears in the Giving Guides section of the page."></i></div>\r\n          <button type="button" id="f-image-url-2" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s"></button>\r\n        </div>\r\n        <div class="col-3">\r\n          <div class="label">Image Preview </div>\r\n          <img id="f-image-2-preview" class="y-space-top-s fill-container-width" src="'+(null==(__t=imgUrl2)?"":__t)+'" alt="">\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="panel form-section row row-spaced">\r\n  <div class="row">\r\n    <div class="col-12">\r\n      <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional"></i>SEO Information (optional)</div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id="accordion">\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n        <label for="f-meta-title">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the text displayed in the tab at the top of your browser window."></i>\r\n        <input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="f-meta-keywords">Meta Keywords</label><i class="icon icon-tool-tip x-space-s" title="This area allows you to enter a few comma separated keywords that describe your page."></i>\r\n        <textarea name="f-meta-keywords" id="f-meta-keywords" class="size-2">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n      </div>\r\n\r\n      <div class="col-6 form-section">\r\n          <label for="f-meta-desc">Meta Description</label><i class="icon icon-tool-tip x-space-s" title="This is the text shown on search engines for your page and should consist of short clear sentences."></i>\r\n          <textarea name="f-meta-desc" id="f-meta-desc" class="size-2">'+(null==(__t=metaDescription)?"":__t)+'</textarea>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n          <label for="f-meta-tags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="This area is for any additional meta tags that may be used for tracking or other purposes that you would like in the page &lt;head&gt;."></i>\r\n          <textarea name="f-meta-tags" id="f-meta-tags" class="size-2">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n          <div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n      </div>\r\n    </div>\r\n  \r\n  </div>\r\n\r\n</div>\r\n';return __p}}),define("content/category-sections/merchandising/sympathy-page/models/sympathy-page-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-sympathy.json",defaults:{active:!0,pageHeaderTitle:"",pageHeaderDescription:"",serviceDisplayActive:!0,serviceNameOverride:"",serviceCategories:[],serviceColors:[],homeNameOverride:"",homeCategories:[],mainTitle:"",sections:[],imgUrl1:"",imgUrl2:"",metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:""}});return new t}),define("content/category-sections/merchandising/sympathy-page/templates/section-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n  <td>'+(null==(__t=sequence)?"":__t)+'</td>\r\n  <td class="left-align">\r\n    '+(null==(__t=title)?"":__t)+'\r\n  </td>\r\n  <td><button type="button" class="icon icon-btn icon-2x icon-edit"></button></td>\r\n  <td>\r\n    <div class="v-center">\r\n      <input '+(null==(__t=display?"checked":"")?"":__t)+' type="checkbox" id="f-display-'+(null==(__t=id)?"":__t)+'" name="f-display-'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n      <label for="f-display-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n          <div class="on-off-switch-state">on</div>\r\n      </label>\r\n    </div>\r\n  </td>\r\n  <td><button type="button" class="icon icon-btn icon-2x icon-trash"></button></td>\r\n</tr>\r\n';return __p}}),define("content/category-sections/merchandising/sympathy-page/views/section-view",["backbone","../templates/section-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent,this.listenTo(this.collection,"remove",function(e){this.model===e&&this.remove()}.bind(this)),this.setElement(this.template(this.model.toJSON()))},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){n.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return i}),define("content/category-sections/merchandising/sympathy-page/models/section-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,title:"",display:!0,description:""}});return t}),define("content/category-sections/merchandising/sympathy-page/collections/section-collection",["backbone","../models/section-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("title")},descending:function(e,t){return e.get("title")>t.get("title")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return n}),define("content/category-sections/merchandising/sympathy-page/views/sympathy-page-home-view",["backbone","../templates/sympathy-page-home-tpl","../models/sympathy-page-model","./section-view","../models/section-model","../collections/section-collection","components/general-product/views/general-product-view","content/shared/collections/blank-collection","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({tagName:"form",id:"f-sympathy-page",template:t,serviceColorsCollection:null,serviceTypeCollection:null,homeColorsCollection:null,homeTypeCollection:null,sectionCollection:null,render:function(){return n.fetchCustom().done(function(){this.$el.html(this.template(n.toJSON())),this.delegateEvents(),this.cacheElem(),this.applyTabs(),this.applyAccordion(),this.applyToolTips(),this.applyPreviews(),this.serviceTypeCollection=new s(n.get("serviceCategories")),this.serviceColorsCollection=new s(n.get("serviceColors")),this.homeTypeCollection=new s(n.get("homeCategories")),this.homeColorsCollection=new s(n.get("homeColors")),this.stopListening(this.sectionCollection,"resequenced"),n.stopListening(this.sectionCollection),this.sectionCollection=new r(n.get("sections")),n.listenTo(this.sectionCollection,"add remove change",function(){n.set("sections",this.sectionCollection.toJSON())}.bind(this)),this.listenTo(this.sectionCollection,"resequenced",this.addAllSections),this.serviceSelect=new a({activeTitle:"Selected Categories (Types)",activeTableTitle:"Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"name",nofilter:!1,images:!0,imgGroup:"Sympathy Types",imgAttribute:"img",nosearch:!1,statusFilter:!0,statusactive:!1,typeFilter:!0,async:!1,collection:this.serviceTypeCollection,imageSearch:!0,hideGrids:!0,sequence:!0,selectAll:!0}),this.$serviceTypeContainer.append(this.serviceSelect.render().el),this.homeSelect=new a({activeTitle:"Selected Categories (Types)",activeTableTitle:"Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"name",nofilter:!1,images:!0,imgGroup:"Sympathy Types",imgAttribute:"img",nosearch:!1,statusFilter:!0,statusactive:!1,typeFilter:!0,async:!1,collection:this.homeTypeCollection,imageSearch:!1,hideGrids:!0,sequence:!0,selectAll:!0}),this.$homeTypeContainer.append(this.homeSelect.render().el),this.addAllSections(),this.applySortable(),this.validateForm()}.bind(this)),this},events:{"click #add-section-btn":"handleAddSection","click #save-btn":"handleSave","click #sort-btn":"handleSort","click .image-upload":"handleImageUpload"},cacheElem:function(){this.$accordion=this.$el.find("#accordion"),this.$optional=this.$el.find("#optional"),this.$serviceColorContainer=this.$el.find("#service-colors-container"),this.$serviceTypeContainer=this.$el.find("#service-type-container"),this.$homeColorContainer=this.$el.find("#home-colors-container"),this.$homeTypeContainer=this.$el.find("#home-type-container"),this.$sectionList=this.$el.find("#section-list"),this.$imageUrl1=this.$el.find("#f-image-url-1"),this.$imageUrl2=this.$el.find("#f-image-url-2"),this.$image1Preview=this.$el.find("#f-image-1-preview"),this.$image2Preview=this.$el.find("#f-image-2-preview"),this.$imageButtons=this.$el.find(".image-upload"),this.$createEditForm=this.$el.find("#f-sympathy-page"),this.$active=this.$el.find("#f-active"),this.$pageHeaderTitle=this.$el.find("#f-pageHeaderTitle"),this.$pageHeaderDescription=this.$el.find("#f-pageHeaderDescription"),this.$backgroundImageUrl=this.$el.find("#f-backgroundImageUrl"),this.$serviceDisplayActive=this.$el.find("#f-serviceDisplayActive"),this.$serviceNameOverride=this.$el.find("#f-serviceNameOverride"),this.$homeDisplayActive=this.$el.find("#f-homeDisplayActive"),this.$homeNameOverride=this.$el.find("#f-homeNameOverride"),this.$mainTitle=this.$el.find("#f-mainTitle"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDescription=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$tip=this.$el.find(".tooltip-change"),this.$minError=this.$el.find("#min-error")
},showMinError:function(){var e=this;l.trigger("form:invalid",this.$tip),this.$minError.fadeIn(200),setTimeout(function(){e.$minError.fadeOut(200)},15e3)},minSelected:function(e,t){var n,i={};return i[t.activeAttribute]=!0,n=t.collection.where(i).length,n>=e?!0:!1},handleSave:function(){var e=this;return e.$serviceDisplayActive.prop("checked")&&!e.minSelected(1,e.homeSelect)?(e.showMinError(),!1):e.$homeDisplayActive.prop("checked")&&!e.minSelected(1,e.serviceSelect)?(e.showMinError(),!1):(n.set({active:this.$active.is(":checked"),pageHeaderTitle:this.$pageHeaderTitle.val().trim(),pageHeaderDescription:this.$pageHeaderDescription.val().trim(),serviceDisplayActive:this.$serviceDisplayActive.is(":checked"),serviceNameOverride:this.$serviceNameOverride.val().trim(),serviceCategories:this.serviceTypeCollection.toJSON(),serviceColors:this.serviceColorsCollection.toJSON(),homeDisplayActive:this.$homeDisplayActive.is(":checked"),homeNameOverride:this.$homeNameOverride.val().trim(),homeCategories:this.homeTypeCollection.toJSON(),homeColors:this.homeColorsCollection.toJSON(),mainTitle:this.$mainTitle.val().trim(),metaTitle:this.$metaTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaDescription:this.$metaDescription.val().trim(),metaTags:this.$metaTags.val().trim(),imgUrl1:this.$image1Preview.attr("src"),imgUrl2:this.$image2Preview.attr("src")}),void l.trigger("form:save",this.$tip))},applyPreviews:function(){this.$imageButtons.each(function(){var e=$(this).next("img");$(this).on("mouseover",function(){$(e).addClass("shown").removeClass("hidden")}).on("mouseleave",function(){$(e).removeClass("shown").addClass("hidden")})})},handleImageUpload:function(e){var t,n,i=this,o=e.currentTarget.id;o===i.$imageUrl1[0].id?t=i.$image1Preview:o===i.$imageUrl2[0].id&&(t=i.$image2Preview),n="Sympathy",l.trigger("form:image-upload",{cb:function(e){t.prop("src",e)},active:t.prop("src"),name:n})},handleSort:function(e){var t=$(e.target);t.hasClass("icon-sort")?(t.switchClass("icon-sort","icon-sort-asc"),this.sectionCollection.changeSort("ascending")):t.hasClass("icon-sort-asc")?(t.switchClass("icon-sort-asc","icon-sort-desc"),this.sectionCollection.changeSort("descending")):t.hasClass("icon-sort-desc")&&(t.switchClass("icon-sort-desc","icon-sort-asc"),this.sectionCollection.changeSort("ascending")),this.sectionCollection.sort(),this.sectionCollection.resequence()},handleAddSection:function(){this.handleEdit(new o)},handleEdit:function(e){this.parent.showCreateEdit(e,this.sectionCollection)},addSection:function(e){var t=new i({model:e,collection:this.sectionCollection,parent:this});this.$sectionList.append(t.render().el)},addAllSections:function(){this.$sectionList.empty(),this.sectionCollection.each(this.addSection,this)},applyTabs:function(){this.$el.find("#tabs").tabs()},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyAccordion:function(){var e=this;this.$optional.click(function(){var t=$(this);return e.$accordion.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#section-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionList.children().each(function(t){var n=$(this).data("id");e.sectionCollection.where({id:n})[0].set("sequence",t+1)}),e.sectionCollection.changeSort("sequence"),e.sectionCollection.sort(),e.sectionCollection.trigger("resequenced")}})},validateForm:function(){var e=this;e.editForm=e.$el.validate({rules:{"f-meta-title":"noCarets","f-meta-keywords":"noCarets","f-meta-desc":"noCarets"}})}});return new c}),define("content/category-sections/merchandising/sympathy-page/templates/edit-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="p-new-about-us">\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add ")?"":__t)+' Section</h2>\r\n        <div class="btn-panel">\r\n          <button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n          <button id="save-btn" class="btn btn-submit pull-right">\r\n            ',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n          </button>\r\n          <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      On this page you can '+(null==(__t=id?"edit ":"add ")?"":__t)+' a section of your sympathy page. This will allow you to customize your sympathy section as you see fit.\r\n    </div>\r\n  </div>\r\n\r\n <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n  <form id="create-edit-form" class="row row-spaced panel form-section">\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="title">Section Title</label>\r\n        <input type="text" id="title" name="title" value="'+(null==(__t=title)?"":__t)+'">\r\n      </div>\r\n      <div class="col-6">\r\n        <div class="label">Display Section<i title="This is the title of the section. It will be shown in larger font on the sympathy page." class="icon icon-tool-tip x-space-s"></i></div>\r\n        <input '+(null==(__t=display?"checked":"")?"":__t)+' type="checkbox" id="section-active" name="section-active" class="on-off-switch" />\r\n            <label for="section-active" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div id="tiny-mce-container" class="col-12 form-section">\r\n        <label for="section-description">Section Description</label><i title="This is the content for the section. You can put anything you\'d like in here to offer help or advice to your customers." class="icon icon-tool-tip x-space-s"></i>\r\n        <textarea name="section-description" id="section-description" class="tinymce">'+(null==(__t=description)?"":__t)+"</textarea>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>";return __p}}),define("content/category-sections/merchandising/sympathy-page/views/edit-view",["backbone","../templates/edit-tpl","tinymce","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.validateForm(),this.applyTinymce(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$title=this.$el.find("#title"),this.$sectionActive=this.$el.find("#section-active"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change")},handleCancelBtnClick:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveBtnClick:function(){$("#tiny-mce-container").removeClass("error"),this.$createEditForm.valid()&&this.validateTinymce()?(this.model.set({title:this.$title.val().trim(),display:this.$sectionActive.is(":checked"),description:n.activeEditor.getContent()}),this.collection.get(this.model)||(this.model.set("id",Date.now()),this.collection.add(this.model)),i.trigger("form:save",this.$tip),this.parent.showHome()):i.trigger("form:invalid",this.$tip)},applyTinymce:function(){n.remove(),setTimeout(function(){n.init({setup:function(e){e.on("change",function(){i.trigger("form:editing")})},selector:"textarea#section-description",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{title:"required",description:"required"}})},validateTinymce:function(){return n.activeEditor.getContent()?!0:($("#tiny-mce-container").addClass("error").append('<label id="f-page-main-content-error" class="error" for="f-page-main-content">This field is required.</label>'),!1)}});return new o}),define("content/category-sections/merchandising/sympathy-page/views/sympathy-page-view",["backbone","./sympathy-page-home-view","./edit-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e,t){var o=this;i.trigger("form:cancel",function(){n.model=e,n.collection=t,o.replaceVisible(n)})}});return new o}),define("content/category-sections/merchandising/add-ons/templates/add-ons-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="clearfix section-title">\r\n      <h2 class="pull-left">Manage Add-Ons</h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    From this section you can manage all of the add-on products on your site such as mylar balloons and stuffed animals. You can edit the add-ons from the list below, specify which products you would like the add-on associated with, and even add new custom add-ons.\r\n  </div>\r\n</div>\r\n\r\n<div class="row">\r\n  <div class="col-12">\r\n    <button id="add-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Add-On</button>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <table id="add-on-table" class="table alternate">\r\n      <thead>\r\n        <tr>\r\n          <th class="th-7-20 left-align">Name<i class="icon left-offset-xs"></i></th>\r\n          <th class="th-2-20">Image</th>\r\n          <th class="th-4-20">Add-On Type</th>\r\n          <th class=\'th-3-20\'>Active</th>\r\n          <th class="th-2-20">Edit</th>\r\n          <th class="th-2-20">Delete</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody id="add-on-list"></tbody>\r\n    </table>\r\n  </div>\r\n</div>';return __p}}),define("content/category-sections/merchandising/add-ons/models/add-on-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,name:"",imgUrl:"",type:"Custom",isDefault:!0,active:!0,pricePoints:[],products:[],applyAutoActive:!0,taxFreeActive:!0},getImgUrl:function(){return this.get("imgUrl")}});return t}),define("content/category-sections/merchandising/add-ons/collections/add-on-collection",["backbone","../models/add-on-model"],function(e,t){var n=e.Collection.extend({url:"/mock/add-ons.json",model:t});return new n}),define("content/category-sections/merchandising/add-ons/templates/add-on-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr>\r\n  <td class="left-align">'+(null==(__t=name)?"":__t)+'</td>\r\n  <td>\r\n    <img class="fit-container" src="'+(null==(__t=imgUrl)?"":__t)+'">\r\n  </td>\r\n  <td>'+(null==(__t=type)?"":__t)+'</td>\r\n  <td>\r\n    <div class="v-center">\r\n      <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="active-'+(null==(__t=id)?"":__t)+'" name="active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n      <label for="active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n        <div class="on-off-switch-state">on</div>\r\n      </label>\r\n    </div>\r\n  </td>\r\n  <td>\r\n    <button class="icon icon-edit icon-btn icon-2x"></button>\r\n  </td>\r\n  <td>\r\n    ',"Custom"==type&&(__p+='\r\n    <button id="delete-btn" class="icon icon-trash icon-btn icon-2x"></button>\r\n    '),__p+="\r\n  </td>\r\n</tr>\r\n";return __p}}),define("content/category-sections/merchandising/add-ons/views/add-on-view",["backbone","../templates/add-on-tpl","../collections/add-on-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.listenTo(n,"remove",function(e){e.get("id")===this.model.get("id")&&(this.parent.dataTable.row(this.$el).remove().draw(),this.remove())})},render:function(){return this.cacheElem(),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","change input.on-off-switch":"toggleActive"},cacheElem:function(){this.$active=this.$el.find("active-"+this.model.get("id"))},handleEdit:function(){i.trigger("form:cancel",function(){this.parent.handleEdit(this.model.get("id"))}.bind(this))},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model.get("id"))),i.trigger("form:save")},toggleActive:function(){i.trigger("form:editing"),this.model.set("active",this.$active.is("checked"))}});return o}),define("content/category-sections/merchandising/add-ons/views/add-ons-home-view",["backbone","../templates/add-ons-home-tpl","../models/add-on-model","../collections/add-on-collection","./add-on-view","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",id:"m-add-ons",template:t,initialize:function(){},render:function(){return i.fetchCustom().done(function(){this.$el.html(this.template()),this.delegateEvents(),this.cacheElem(),this.dataTable&&this.dataTable.destroy(),this.collection=i.deepClone(),this.addAllAddOns(this.collection),this.applyDataTables()}.bind(this)),this},events:{"click #save-btn":"handleSave","click #add-btn":"handleAdd"},cacheElem:function(){this.$addOnList=this.$el.find("#add-on-list"),this.$addOnTable=this.$el.find("#add-on-table"),this.$tip=this.$el.find(".tooltip-change")},handleEdit:function(e){var t=void 0!==e?i.get(e):new n;this.parent.showEdit(t)},handleAdd:function(){this.handleEdit()},handleSave:function(){i.set(this.collection.toJSON()),r.trigger("form:save",this.$tip)},addAddOn:function(e){var t=new o({model:e,parent:this});this.$addOnList.append(t.render().el)},addAllAddOns:function(e){this.$addOnList.empty(),e.each(this.addAddOn,this)},applyDataTables:function(){this.dataTable=this.$addOnTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,searching:!1,serverSide:!1,stateSave:!1,bDestroy:!0,info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new a}),define("content/category-sections/merchandising/add-ons/templates/edit-add-ons-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title clearfix">\r\n      <h2 class="pull-left">\r\n        '+(null==(__t=id?"Edit":"Create")?"":__t)+' Add-On\r\n      </h2>\r\n      <div class="btn-panel">\r\n        <button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n        <button id="save-btn" type="button" class="btn btn-submit">',id||(__p+='<i class="icon icon-add"></i>'),__p+='Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    Here you can '+(null==(__t=id?"edit ":"create ")?"":__t)+' add-ons for your site. This page will allow you to change all of the details for each individual add-on.\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n  <div class="row">\r\n    <div class="col-5 form-section">\r\n      <label for="f-name">Name</label><i title="This is the name of the add-on. An example would be Balloons." class="icon icon-tool-tip x-space-s"></i>\r\n      <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'" autofocus>\r\n    </div>  \r\n    <div class="col-2">\r\n      <div class="label">\r\n        Active\r\n      </div>\r\n      <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n      <label for="f-active" class="on-off-switch-label">\r\n        <div class="on-off-switch-state">on</div>\r\n      </label>\r\n    </div>\r\n  </div>\r\n  <div class="row row-spaced">\r\n    <div class="col-3">\r\n      <label for="f-type">Type</label>\r\n      <input type="text" id="f-type" name="f-type" value="'+(null==(__t=type)?"":__t)+'" disabled>\r\n    </div>  \r\n    <div class="col-2">\r\n      <div class="label">\r\n        Image\r\n      </div>\r\n      <div class="centered-content-container" id="img-upload">\r\n          <img class="y-space-top-xs image-upload '+(null==(__t=imgUrl?"":"hidden-alt")?"":__t)+'" src="'+(null==(__t=imgUrl)?"":__t)+'"',"Teleflora"==type&&(__p+=' style="cursor:auto;"'),__p+='>\r\n          <button type="button" class="'+(null==(__t=imgUrl?"hidden-alt":"")?"":__t)+' icon icon-btn icon-image icon-2x y-space-s image-upload"></button>\r\n      </div>\r\n    </div>\r\n    <div class="col-3">\r\n      <div class="label">\r\n        Tax Free <i title="With this setting turned ON, this add-on will not be included in total order prices when tax is calculated." class="icon icon-tool-tip x-space-s"></i>\r\n      </div>\r\n      <input '+(null==(__t=taxFreeActive?"checked":"")?"":__t)+' type="checkbox" id="f-taxFreeActive" name="f-taxFreeActive" class="on-off-switch" />\r\n      <label for="f-taxFreeActive" class="on-off-switch-label">\r\n        <div class="on-off-switch-state">on</div>\r\n      </label>\r\n    </div>    \r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n  <div class="row">\r\n    <div class="col-12">\r\n      <div class="panel-title clearfix">\r\n        <div class="y-space-top-m pull-left">Price Points</div>\r\n        ',"Teleflora"!==type&&(__p+='\r\n        <button id="add-price-point-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-add"></i>Add More Price Points</button>\r\n        '),__p+='\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id="price-point-alert" class="row row-spaced panel alert-panel hidden-alt">\r\n    <div class="col-12">\r\n      <div class="row">\r\n        <div class="col-1">\r\n          <div class="icon icon-4x icon-warning"></div>\r\n        </div>\r\n        <div class="col-11 alert-text">\r\n          You are allowed a maximum of 6 Price Points per add-on.\r\n        </div>\r\n      </div>\r\n    </div> \r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-5">\r\n      <label for="f-label">Label / Size</label>\r\n    </div>\r\n    <div class="col-2">\r\n      <label for="f-price">Price</label>\r\n    </div>\r\n    ',"Teleflora"!==type&&(__p+='\r\n    <div class="col-2">\r\n     <div class="label">Delete</div>\r\n    </div>\r\n    '),__p+='\r\n  </div>\r\n\r\n\r\n  <div id="price-point-list"></div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n  <div class="row">\r\n    <div class="col-12">\r\n      <div class="panel-title">Selected Products</div>\r\n    </div>\r\n  </div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      To apply the add-on to specific group of products, use the search feature below and look for products based on different filters available.\r\n    </div>\r\n  </div>\r\n  ',"Teleflora"!==type&&(__p+='\r\n  <div class="row row-spaced">\r\n    <div class="col-6">\r\n      <div class="label">\r\n        Apply to New Teleflora Products Automatically\r\n      </div>\r\n      <input '+(null==(__t=applyAutoActive?"checked":"")?"":__t)+' type="checkbox" id="f-applyAutoActive" name="f-applyAutoActive" class="on-off-switch" />\r\n      <label for="f-applyAutoActive" class="on-off-switch-label">\r\n        <div class="on-off-switch-state">on</div>\r\n      </label>\r\n    </div>\r\n  </div>\r\n  '),__p+='\r\n  <div id="featured-product"></div>\r\n</div>';return __p}}),define("content/category-sections/merchandising/add-ons/models/price-point-model",["backbone"],function(e){var t=e.Model.extend({defaults:{isDefault:!1,label:"",price:""}});return t}),define("content/category-sections/merchandising/add-ons/collections/price-point-collection",["backbone","../models/price-point-model"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("content/category-sections/merchandising/add-ons/templates/price-point-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){if(__p+='<div class="row">\r\n  <div class="col-5">\r\n    <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" class="f-label" name="f-label" value="'+(null==(__t=label)?"":__t)+'">\r\n  </div>\r\n  <div class="col-2">\r\n    <div class="dollar-container form-section">\r\n      ',1==index)var priceName="f-price-1";else priceName="f-price";__p+='\r\n      <input type="text" class="f-price" name="'+(null==(__t=priceName)?"":__t)+'" value="'+(null==(__t=price)?"":__t)+'" id="f-price-'+(null==(__t=index)?"":__t)+'">\r\n    </div>\r\n  </div>\r\n\r\n   ',"Teleflora"!==type&&isDefault===!1&&(__p+='\r\n  <div class="col-2">\r\n    <button type="button" class="y-space-top-m icon icon-trash icon-btn icon-2x"></button>\r\n  </div>\r\n  '),__p+="\r\n\r\n\r\n</div>\r\n"}return __p}}),define("content/category-sections/merchandising/add-ons/views/price-point-view",["backbone","../templates/price-point-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.collection=e.collection;var t=this.model.toJSON();t.type=e.type,t.index=this.collection.indexOf(this.model)+1,this.setElement(this.template(t)),this.listenTo(this.collection,"remove",function(e){e===this.model&&this.remove()}.bind(this))},render:function(){return this.cacheElem(),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete","blur .f-label":"handleBlurLabel","blur .f-price":"handleBlurPrice"},handleBlurLabel:function(){this.model.set("label",this.$label.val().trim())},handleBlurPrice:function(){this.model.set("price",this.$price.val().trim())},cacheElem:function(){this.$label=this.$el.find(".f-label"),this.$price=this.$el.find(".f-price")},handleDelete:function(){n.trigger("form:delete",function(){this.collection.remove(this.model),n.trigger("form:editing")}.bind(this))},toggleActive:function(){n.trigger("form:editing"),this.model.set("active",this.$active.is("checked"))}});return i}),define("content/category-sections/merchandising/add-ons/views/edit-add-ons-view",["backbone","../templates/edit-add-ons-tpl","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection","../collections/add-on-collection","../collections/price-point-collection","./price-point-view","../models/price-point-model","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({tagName:"form",id:"m-edit-add-ons",template:t,render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.featuredProductView&&this.featuredProductView.remove(),this.featuredProductView=new n({collection:new i(this.model.get("products")),bodyOnly:!0,title:"Selected Products",selectAll:!0}),this.$featuredProduct.append(this.featuredProductView.render().el),this.setPricePointCollection(),this.addAllPricePoints(),"Teleflora"===e.model.get("type")&&e.renderFederation(),this.applyToolTips(),setTimeout(function(){e.validateForm()},200),this},events:{"click #add-price-point-btn":"handleAddPricePoint","click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #img-upload":"handleImgUpload"},cacheElem:function(){this.$pricePointList=this.$el.find("#price-point-list"),this.$featuredProduct=this.$el.find("#featured-product"),this.$createEditForm=this.$el,this.$name=this.$el.find("#f-name"),this.$imgUpload=this.$el.find("#img-upload"),this.$active=this.$el.find("#f-active"),this.$taxFreeActive=this.$el.find("#f-taxFreeActive"),this.$tip=this.$el.find(".tooltip-change"),this.$imgElem=this.$imgUpload.find("img"),this.$imgBtnElem=this.$imgUpload.find("button"),this.$priceAlert=this.$el.find("#price-point-alert")},changeImage:function(e){this.$imgElem.attr("src",e),this.$imgElem.hasClass("hidden-alt")&&(this.$imgBtnElem.hide(),this.$imgElem.show())},handleImgUpload:function(){var e=this;"Teleflora"!==e.model.get("type")&&l.trigger("form:image-upload",{cb:function(t){e.changeImage(t)},active:e.$imgElem.attr("src"),name:"Add Ons"})},setPricePointCollection:function(){this.pricePointCollection&&this.stopListening(this.pricePointCollection),this.pricePointCollection=new r(this.model.get("pricePoints")),this.listenTo(this.pricePointCollection,"add",this.addPricePoint)},handleAddPricePoint:function(){var e=this,t=this.pricePointCollection.length;6==t?e.showError():this.pricePointCollection.add({})},showError:function(){var e=this;this.$priceAlert.fadeIn(200),setTimeout(function(){e.$priceAlert.fadeOut(200)},5e3)},addPricePoint:function(e){var t=new a({model:e,collection:this.pricePointCollection,type:this.model.get("type"),isDefault:e.get("isDefault")});this.$pricePointList.append(t.render().el)},addAllPricePoints:function(){var e=this,t=this.pricePointCollection.length;if(this.$pricePointList.empty(),1>t){var n=new s;n.set("isDefault",!0),e.addPricePoint(n)}else this.pricePointCollection.each(this.addPricePoint,this)},handleSave:function(){this.$createEditForm.valid()?(this.model.set({name:this.$name.val().trim(),active:this.$active.is(":checked"),taxFreeActive:this.$taxFreeActive.is(":checked"),products:this.featuredProductView.collection.toJSON(),pricePoints:this.pricePointCollection.toJSON(),imgUrl:this.$imgElem.attr("src")}),o.get(this.model)||(this.model.set("id",Date.now()),o.add(this.model)),l.trigger("form:save",this.$tip),this.parent.showHome()):l.trigger("form:invalid",this.$tip)},handleCancel:function(){l.trigger("form:cancel",function(){this.parent.showHome()}.bind(this))},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},renderFederation:function(){var e=this;e.$el.find("#f-price-1").is("*")&&this.runFederation(e.$el.find("#f-price-1"),"10.00"),e.$el.find("#f-price-2").is("*")&&this.runFederation(e.$el.find("#f-price-2"),"20.00"),e.$el.find("#f-price-3").is("*")&&this.runFederation(e.$el.find("#f-price-3"),"30.00")},runFederation:function(e,t){var n=e.closest(".form-section");n.addClass("f-federation"),e.before('<i title="Because this field was left blank, it reverted to the default Teleflora/group value." class="icon icon-tool-tip icon-tool-tip-federated federated-top-right"></i>'),""==e.val()||null==e.val()?(n.addClass("f-federated"),e.is("select")?e.find('option[value="'+n+'"]').prop("selected",!0):e.val(t)):n.addClass("f-custom"),e.on("change",function(){""==e.val()||null==e.val()?(n.addClass("f-federated").removeClass("f-custom"),e.is("select")?e.find('option[value="'+n+'"]').prop("selected",!0):e.val(t)):n.addClass("f-custom").removeClass("f-federated")})},validateForm:function(){this.$createEditForm.validate({rules:{"f-name":"required","f-price-1":"required","f-price":{dollars:!0}}}),jQuery.validator.addClassRules({"f-price":{dollars:!0}})}});return new c}),define("content/category-sections/merchandising/add-ons/views/add-ons-view",["backbone","./add-ons-home-view","./edit-add-ons-view"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.showHome(),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)},showEdit:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/merchandising/third-party-products-catalog/models/third-party-product-catalog-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,ProductCatalogName:"",SubscribeStatusActive:!0}});return t}),define("content/category-sections/merchandising/third-party-products-catalog/collections/third-party-catalogs-collections",["backbone","../models/third-party-product-catalog-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-third-party-product-catalog.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/merchandising/third-party-products-catalog/templates/third-party-product-catalogs-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<form id="3rdPartyProductsCatalogs" name="3rdPartyProductsCatalogs"> \r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Third Party Product Catalogs</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n			<div class="y-space-top-s"> You can use this page to manage your third party product subscriptions. You can opt in or out of any of the third party product catalogs listed below. Opting in to a catalog will allow you to merchandise those products on your site.   </div>\r\n		</div>\r\n	</div>\r\n	<!-- Hidden Alert Message -->\r\n	<div class="row panel alert-panel">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					This is a generic placeholder for error messages in eSAT. <br>\r\n					In the live app, this will be a real message and will be hidden by default.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced form-section"> \r\n		<div class="col-12 y-space-top-l">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-7 left-align indented-l">Third Party Product Catalog Name <button type="button" data-attribute="ProductCatalogName" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2 left-align">Subscribe</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="ThirdPartyProductCatalog-List"></tbody>\r\n			</table>\r\n		</div>		\r\n	</div>\r\n</form>';
return __p}}),define("content/category-sections/merchandising/third-party-products-catalog/templates/third-party-catalogs-table-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr> \r\n	<td class="left-align indented-l">\r\n\r\n	'+(null==(__t=ProductCatalogName)?"":__t)+'\r\n	  </td>\r\n\r\n	<td class="left-align hide-overflow">  \r\n	 <div class="centered-content-container">\r\n\r\n      <input '+(null==(__t=SubscribeStatusActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="subscribe-status-active-"+id)?"":__t)+'" name="'+(null==(__t="subscribe-status-active-"+id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'" class="on-off-switch subscribeActive-switch" />\r\n\r\n          <label for="'+(null==(__t="subscribe-status-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n\r\n              <div class="on-off-switch-state">on</div>\r\n        </label>\r\n\r\n        </div>\r\n\r\n        </td> \r\n\r\n</tr>\r\n';return __p}}),define("content/category-sections/merchandising/third-party-products-catalog/views/third-party-products-catalogs-table-view",["backbone","../models/third-party-product-catalog-model","../collections/third-party-catalogs-collections","../templates/third-party-catalogs-table-tpl","global-events"],function(e,t,n,i){var o=e.View.extend({template:i,render:function(){var e=this;return e.setElement(e.template(e.model.toJSON())),e.delegateEvents(),e.cacheElem(),e},cacheElem:function(){this.$SubscribeStatus=this.$el.find(".subscribeActive-switch")}});return o}),define("content/category-sections/merchandising/third-party-products-catalog/views/third-party-product-view",["backbone","../collections/third-party-catalogs-collections","../models/third-party-product-catalog-model","../templates/third-party-product-catalogs-tpl","./third-party-products-catalogs-table-view","global-events","jquery","jqueryui"],function(e,t,n,i,o,r){var a=e.View.extend({initialize:function(){o.parent=this,this.listenTo(t,"sort",this.addAllThirdPartyProductCatalogs)},template:i,render:function(){var e=this;return e.setElement(e.template()),e.delegateEvents(),e.cacheElem(),e.applyToolTips(),t.fetchCustom().done(function(){e.addAllThirdPartyProductCatalogs()}),e},events:{"click #save-btn":"handleActiveSave","click .sort-btn":"handleSort"},cacheElem:function(){this.$ThirdPartyProductCatalogList=this.$el.find("#ThirdPartyProductCatalog-List"),this.$tip=this.$el.find(".tooltip-change"),this.$sortButtons=this.$el.find(".sort-btn")},handleSaveEach:function(e){{var t=this,n=e.get("id"),i=t.$el.find('input[data-id="'+n+'"]');i.attr("data-id")}e.set({SubscribeStatusActive:i.is(":checked")})},handleActiveSave:function(){var e=this;t.each(e.handleSaveEach,this),r.trigger("form:save",this.$tip)},addThirdPartyProductCatalogs:function(e){var t=new o({model:e,parent:this});this.$ThirdPartyProductCatalogList.append(t.render().el,this)},addAllThirdPartyProductCatalogs:function(){this.$ThirdPartyProductCatalogList.empty(),t.each(this.addThirdPartyProductCatalogs,this)},handleSort:function(e){var n=$(e.target),i=n.data("attribute");n.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),n.addClass("icon-sort-desc"),t.changeSort(i,"descending")):n.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),n.addClass("icon-sort-asc"),t.changeSort(i,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),n.addClass("icon-sort-asc"),t.changeSort(i,"ascending")),t.sort()},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new a}),define("content/category-sections/merchandising/merchandising-icons/templates/create-edit-merchandising-icons-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n    <div class="col-12">\r\n        <div class="clearfix section-title">\r\n            <h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+' Merchandising Icons</h2>\r\n            <div class="btn-panel">\r\n                ',id&&"Custom"===type&&(__p+=' <button type="button" id="delete-btn" class="btn btn-cancel btn-panel pull-left ">Delete</button> '),__p+='\r\n\r\n                <button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-left">Cancel</button>\r\n                <button type="button" id="save-btn" class="btn btn-submit btn-panel"> Save</button>\r\n                <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="y-space-top-m"> \r\n    You can use this page to '+(null==(__t=id?"modify your":"create a new")?"":__t)+' Merchandising Icon. You can associate the icon with products or change the icon image.\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel alert-panel">\r\n    <div class="col-12">\r\n        <div class="row">\r\n            <div class="col-1">\r\n                <div class="icon icon-3x icon-warning"></div>\r\n            </div>\r\n            <div class="col-11 alert-text">\r\n                This is a generic placeholder for error messages in eSAT. <br>\r\n                In the live app, this will be a real message and will be hidden by default.\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel">\r\n    <form id="create-edit-merchandising-icon-form" name="create-edit-merchandising-icon-form" class="form-section">\r\n        <div class="col-12">\r\n            <div class="row">\r\n                <div class="col-12">\r\n                    <div class="panel-title">Icon Info</div>\r\n                </div>\r\n            </div>\r\n            <div class="row row-spaced form-section">\r\n                <div class="col-6 form-section">\r\n                    <label>Merchandising Icon Name</label><i title="This is the name you give to the icon for record-keeping purposes. It is never seen by your customer." class="icon icon-tool-tip x-space-s"></i>\r\n                    ',__p+="Teleflora"===type?'\r\n                        <input type="text" id="f-create-edit-icon-name" name="f-create-edit-icon-name" value="'+(null==(__t=merchandisingIconName)?"":__t)+'" disabled>\r\n                    ':'\r\n                        <input type="text" id="f-create-edit-icon-name" name="f-create-edit-icon-name" value="'+(null==(__t=merchandisingIconName)?"":__t)+'">\r\n                    ',__p+='\r\n                </div>\r\n                <div class="col-2">\r\n                    <div class="label">Status</div>\r\n                    <div class="centered-content-container">\r\n                        <input '+(null==(__t=merchandisingActiveStatus?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="merchandising-icon-active-"+id)?"":__t)+'" name="'+(null==(__t="merchandising-icon-active-"+id)?"":__t)+'" class="on-off-switch merchandisingActive-switch" />\r\n                        <label for="'+(null==(__t="merchandising-icon-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class="col-4 form-section">\r\n                    <label class="">Type</label>\r\n                    <input type="text" id="f-create-edit-icon-type" name="f-create-edit-icon-type" value="'+(null==(__t=type)?"":__t)+'" disabled>\r\n                </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n                <div class="col-6 form-section">\r\n                    <label for="f-attribute-tag-icon">Icon Display Name </label><i title="If there is no image uploaded for the icon, this is the text that will be displayed instead." class="icon icon-tool-tip x-space-s"></i>\r\n                    ',__p+="Teleflora"===type?'\r\n                        <input type="text" id="f-attribute-tag-icon" name="f-attribute-tag-icon" value="'+(null==(__t=merchandisingIconTag)?"":__t)+'" disabled>\r\n                    ':'\r\n                        <input type="text" id="f-attribute-tag-icon" name="f-attribute-tag-icon" value="'+(null==(__t=merchandisingIconTag)?"":__t)+'">\r\n                    ',__p+='\r\n                </div>\r\n                <div class="col-2 form-section">\r\n                    ',__p+="Teleflora"===type?"\r\n                    ":'\r\n                        <div class="label">Image<i title="Use this button to change the icon image." class="icon icon-tool-tip x-space-s"></i></div>\r\n                        <button type="button" id="merchandising-btn-logo" name="merchandising-btn-logo" class="icon icon-btn icon-image btn-file icon-3x"></button>\r\n                    ',__p+='\r\n                </div>\r\n                <div class="col-4 form-section">\r\n                    <div class="label y-space-bottom-s">Image Preview<i title="This is the image for your merchandising icon." class="icon icon-tool-tip x-space-s"></i> </div>\r\n                    <img id="preview-merchandising-Img" class="icon icon-2x" src="'+(null==(__t=merchandisingconImage)?"":__t)+'" style="max-height:60%; max-width:60%;">\r\n                </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n                <div class="col-12 y-space-bottom-s">\r\n                    <div class="clearfix panel-title">Associated Products</div>\r\n                </div>\r\n                <div class="col-12">\r\n                    <div class="">\r\n                        Selected products that will use this Merchandising Icon\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-12">\r\n                    <div id="featured-product"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n';return __p}}),define("content/category-sections/merchandising/merchandising-icons/models/merchandising-icons-model",["backbone","components/featured-product/collections/featured-product-collection"],function(e){var t=e.Model.extend({defaults:{id:null,merchandisingIconName:"",merchandisingIconTag:"",merchandisingconImage:"",type:"Custom",products:[],merchandisingActiveStatus:!0}});return t}),define("content/category-sections/merchandising/merchandising-icons/collections/merchandising-Icons-home-collection",["backbone","../models/merchandising-icons-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-merchandising-icons.json",model:t});return new n}),define("content/category-sections/merchandising/merchandising-icons/views/create-edit-merchandising-icons-view",["backbone","../templates/create-edit-merchandising-icons-tpl","../collections/merchandising-Icons-home-collection","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection","global-events","jquery","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,render:function(){var e=this;return e.setElement(e.template(e.model.toJSON())),e.delegateEvents(),e.cacheElem(),e.handleValForm(),e.applyTooltips(),e.featuredProductView&&e.featuredProductView.remove(),e.featuredProductView=new i({collection:new o(e.model.get("products")),bodyOnly:!0,title:"Selected Products",selectAll:!0}),e.$featuredProduct.append(e.featuredProductView.render().el),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #delete-btn":"handleDeleteBtn","click #merchandising-btn-logo":"handleFileUploadMerchandisingImage"},cacheElem:function(){this.$MerchandisingImage=this.$el.find("#preview-merchandising-Img"),this.$featuredProduct=this.$el.find("#featured-product"),this.$IconName=this.$el.find("#f-create-edit-icon-name"),this.$IconTag=this.$el.find("#f-attribute-tag-icon"),this.$IconActiveStatus=this.$el.find(".merchandisingActive-switch"),this.$CreateEditMerchandisingIconForm=this.$el.find("#create-edit-merchandising-icon-form"),this.$tip=this.$el.find(".tooltip-change")},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleSave:function(){this.$CreateEditMerchandisingIconForm.valid()?(this.model.set({merchandisingIconName:this.$IconName.val().trim(),merchandisingIconTag:this.$IconTag.val().trim(),merchandisingconImage:this.$MerchandisingImage.prop("src"),products:this.featuredProductView.collection.toJSON(),merchandisingActiveStatus:this.$IconActiveStatus.is(":checked")}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),r.trigger("form:save",this.$tip),this.parent.showHome()):r.trigger("form:invalid",this.$tip)},handleCancel:function(){this.parent.showHome()},handleDeleteBtn:function(){r.trigger("form:delete",n.remove.bind(n,this.model)),this.parent.showHome()},handleFileUploadMerchandisingImage:function(){var e=this;r.trigger("form:image-upload",{cb:function(t){e.$MerchandisingImage.prop("src",t)},active:e.$MerchandisingImage.prop("src"),name:"Merchandising Icons"})},handleValForm:function(){var e=this;e.$CreateEditMerchandisingIconForm.validate({rules:{"f-create-edit-icon-name":"required","f-attribute-tag-icon":"required"}})}});return new a}),define("content/category-sections/merchandising/merchandising-icons/templates/merchandising-icons-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<form id="merchandisingIconsHome-form" name="merchandisingIconsHome-form">\r\n	<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Merchandising Icons</h2>\r\n			<div class="btn-panel">\r\n                <button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				<button type="button" id="new-icon-btn" class="btn btn-submit"><i class="icon icon-add icon-lg"></i>NEW ICON</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		You can use this section to modify your existing Merchandising Icons or create new ones. Merchandising Icons are small icon graphics that appear underneath product images that you can use to further market your products.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section"> \r\n	<div class="col-12">\r\n		<table id="Merchandising-IconsTable"class="table alternate">\r\n			<thead>\r\n				<tr>\r\n					<th class="col-2 left-align">Icon Name</th>\r\n					<th class="col-2 left-align">Display Name</th>\r\n					<th class="col-2 left-align">Image</th>\r\n					<th class="col-2 left-align">Type</th>\r\n					<th class="col-2 left-align">Active</th>\r\n					<th class="col-1 left-align">Edit</th>\r\n					<th class="col-1 left-align">Delete</th>\r\n				</tr>\r\n			</thead>\r\n			<tbody id="MerchandisingIcons-List"></tbody>\r\n		</table>\r\n	</div>		\r\n</div>\r\n\r\n</form>';return __p}}),define("content/category-sections/merchandising/merchandising-icons/templates/merchandising-icons-HomeTable-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr> \r\n    <td class="left-align">'+(null==(__t=merchandisingIconName)?"":__t)+'</td>\r\n    <td class="left-align">'+(null==(__t=merchandisingIconTag)?"":__t)+'</td>\r\n    <td class="left-align"><img id="display-image-content" class="fit-container" src="'+(null==(__t=merchandisingconImage)?"":__t)+'"></td>\r\n    <td class="left-align">'+(null==(__t=type)?"":__t)+'</td>\r\n    <td class="left-align hide-overflow">  \r\n        <div class="centered-content-container">\r\n            <input '+(null==(__t=merchandisingActiveStatus?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="merchandising-icon-status-active-"+id)?"":__t)+'" name="'+(null==(__t="merchandising-icon-status-active-"+id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'" class="on-off-switch merchandisingActive-switch" />\r\n            <label for="'+(null==(__t="merchandising-icon-status-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n        </div>\r\n    </td> \r\n    <td class="left-align">\r\n        <button type="button" class="icon icon-btn icon-2x icon-edit"></button>\r\n    </td>        \r\n    <td class="left-align"> \r\n        ',"Custom"===type&&(__p+='  \r\n            <button type="button" class="icon icon-btn icon-2x icon-trash"></button>  \r\n        '),__p+="\r\n    </td>    \r\n</tr>";return __p}}),define("content/category-sections/merchandising/merchandising-icons/views/merchandising-icons-homeTABLE-view",["backbone","../collections/merchandising-Icons-home-collection","../templates/merchandising-icons-HomeTable-tpl","global-events"],function(e,t,n,i){var o=e.View.extend({template:n,initialize:function(e){var t=this;t.parent=e.parent},render:function(){var e=this;return e.setElement(e.template(e.model.toJSON())),e.listenTo(t,"remove",function(t){e.model===t&&e.$el.fadeOut(200,function(){e.remove()})}),e.delegateEvents(),e},events:{"click .icon-edit":"handleEdit","click .icon-trash":"handleDelete"},handleEdit:function(){var e=this;i.trigger("form:cancel",function(){e.parent.handleEdit(e.model)})},handleDelete:function(){i.trigger("form:delete",t.remove.bind(t,this.model))}});return o}),define("content/category-sections/merchandising/merchandising-icons/views/merchandising-icons-home-view",["backbone","../models/merchandising-icons-model","../collections/merchandising-Icons-home-collection","../templates/merchandising-icons-home-tpl","./merchandising-icons-homeTABLE-view","global-events","datatables","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:i,initialize:function(){o.parent=this},render:function(){var e=this;return this.$el.html(this.template()),e.delegateEvents(),n.fetchCustom().done(function(){e.cacheElem(),e.addAllMerchandisingIcons(),e.applyDataTables()}),e},events:{"click #new-icon-btn":"handleNewIcon","click #save-btn":"handleActiveSave"},cacheElem:function(){this.$MerchandisingIconsTable=this.$el.find("#Merchandising-IconsTable"),this.$MerchandisingIconsList=this.$el.find("#MerchandisingIcons-List"),this.$tip=this.$el.find(".tooltip-change")},handleEdit:function(e){this.parent.showCreateEdit(e)},handleNewIcon:function(){this.parent.showCreateEdit(new t)},handleSaveEach:function(e){var t=this,n=e.get("id"),i=t.$el.find('input[data-id="'+n+'"]'),o=i.attr("data-id");console.log(o),console.log(i),e.set({merchandisingActiveStatus:i.is(":checked")})},handleActiveSave:function(){var e=this;n.each(e.handleSaveEach,e),r.trigger("form:save",e.$tip)},addMerchandisingIcons:function(e){var t=new o({model:e,parent:this});this.$MerchandisingIconsList.append(t.render().el,this)},addAllMerchandisingIcons:function(){this.$MerchandisingIconsList.empty(),n.each(this.addMerchandisingIcons,this)},applyDataTables:function(){this.dataTable=this.$MerchandisingIconsTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new a}),define("content/category-sections/merchandising/merchandising-icons/views/merchandising-icons-ReplaceView",["backbone","./create-edit-merchandising-icons-view","./merchandising-icons-home-view","global-events"],function(e,t,n){var i=e.View.extend({initialize:function(){n.parent=this,t.parent=this},regions:{visible:null},render:function(){return this.showHome(),this},replaceVisible:function(e){e&&this.regions.visible!==e?(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e):e.render(),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(n)},showCreateEdit:function(e){t.model=e,this.replaceVisible(t,this)}});return new i}),define("content/category-sections/merchandising/subscription-product-setup/templates/edit-subscription-setup-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">Edit Subscription Product</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="reset-btn" class="btn btn-other">Reset</button>\r\n				<button id="save-btn" type="button" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT.\r\n				<br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n\r\n	<div class="row">\r\n		<div class="col-12 y-space-bottom-m">\r\n			<div class="panel-title">Product Details</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n\r\n		<div class="col-4 form-section">\r\n\r\n			<label for="f-name-product-sub">Name</label> <i class="icon icon-tool-tip x-space-s" title="This is the title of the subscription product."></i>\r\n			<input type="text" id="f-name-product-sub" name="f-name-product-sub" value="'+(null==(__t=subcriptionName)?"":__t)+'">\r\n\r\n		</div>\r\n\r\n		<div class="col-4 form-section">\r\n\r\n			<label for="f-product-number">Product Number</label> <i class="icon icon-tool-tip x-space-s" title="This is the unique product ID number."></i>\r\n\r\n			<input type="text" id="f-product-number" name="f-product-number" value="'+(null==(__t=productNumber)?"":__t)+'" disabled>\r\n		</div>\r\n\r\n		<div class="col-4 form-section">\r\n			<div class="label">\r\n				Active <i title="If this is turned OFF, the subscription product will be inactive and will not be available for purchase on your site." class="icon icon-tool-tip x-space-s"></i>\r\n			</div>\r\n			<input '+(null==(__t=SubscriptionActive?"checked":"")?"":__t)+'\r\n			type="checkbox" id="f-subscription-active" name="f-subscription-active" class="on-off-switch"/>\r\n			<label for="f-subscription-active" class="on-off-switch-label">\r\n				<div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n\r\n		<div class="col-12 form-section">\r\n			<label for="f-subscription-subtitle">Subtitle</label>\r\n			<i class="icon icon-tool-tip x-space-s" title="The subtitle is shown on the details page for your subscription product and is used to describe the product."></i>\r\n\r\n			<textarea id="f-subscription-subtitle" name="f-subscription-subtitle" class="size-2" maxlength="500">\r\n				'+(null==(__t=subscriptionSubtitle)?"":__t)+'</textarea>\r\n\r\n			<span class="pull-right">\r\n				<span id="character-count">500</span>\r\n				<span>Characters remaining (500 maximum)</span>\r\n			</span>\r\n\r\n		</div>\r\n\r\n	</div>\r\n\r\n</div>\r\n\r\n<form id="edit-subscription-products" name="edit-subscription-products">\r\n	<!--  ALL TABS Below -->\r\n	<div id="tabs" class="y-space-top-l">\r\n		<ul>\r\n			<li class="col-4 center-align">\r\n				<a class="url-management-edit-tab" href="#ProductInfo-Image-tab">Product Info & Image</a>\r\n			</li>\r\n			<li class="col-4 center-align">\r\n				<a class="url-management-edit-tab" href="#Category-tab">Categories</a>\r\n			</li>\r\n			<li class="col-4 center-align">\r\n				<a class="url-management-edit-tab" href="#settings-tab">Settings</a>\r\n			</li>\r\n		</ul>\r\n\r\n		<div id="ProductInfo-Image-tab">\r\n\r\n			<div class="row row-spaced">\r\n\r\n				<div class="row form-section x-space-s form-section">\r\n					<div class="col-12 y-space-bottom-m form-section">\r\n						<div class="panel-title">Subscription Product Images</div>\r\n					</div>\r\n				</div>\r\n\r\n				<!-- Holiday Subscription -->\r\n				<div class="row y-space-bottom-m x-space-s form-section">\r\n					<div class="col-3 form-section">\r\n						<div class="label">Holiday Subscription</div>\r\n						<button type="button" id="upload-holiday-logo" name="upload-holiday-logo"  class="icon icon-btn icon-image btn-file icon-3x holidayBtn"></button>\r\n					</div>\r\n					<div class="col-3 Holiday-Upload-Logo-Div preview-wrapper hidden-alt">\r\n						<div class="label">Holiday Image Preview</div>\r\n						<img id="preview-holiday-img" class="fit-container" src="'+(null==(__t=holidayLogo)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n				<!-- Holiday Subscription-->\r\n\r\n				<!-- Monthly Subscription -->\r\n				<div class="row y-space-bottom-m x-space-s form-section">\r\n					<div class="col-3 form-section">\r\n						<div class="label">Monthly Subscription</div>\r\n						<button type="button" id="upload-monthly-logo" name="upload-monthly-logo"  class="icon icon-btn icon-image btn-file icon-3x monthlyBtn"></button>\r\n					</div>\r\n					<div class="col-3 Monthly-Upload-Logo-Div preview-wrapper hidden-alt">\r\n						<div class="label">Monthly Image Preview</div>\r\n						<img id="preview-monthly-img" class="fit-container" src="'+(null==(__t=monthlyLogo)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n				<!-- Monthly Subscription-->\r\n\r\n				<!-- Custom Subscription -->\r\n				<div class="row y-space-bottom-m x-space-s form-section">\r\n					<div class="col-3 form-section">\r\n						<div class="label">Custom Subscription</div>\r\n						<button type="button" id="upload-custom-logo" name="upload-custom-logo"  class="icon icon-btn icon-image btn-file icon-3x customBtn"></button>\r\n					</div>\r\n					<div class="col-3 Custom-Upload-Logo-Div preview-wrapper hidden-alt">\r\n						<div class="label">Custom Image Preview</div>\r\n						<img id="preview-custom-img" class="fit-container" src="'+(null==(__t=customLogo)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n				<!-- Custom Subscription -->\r\n\r\n				<!-- Subscription Product Image -->\r\n				<div class="row y-space-bottom-m x-space-s form-section">\r\n					<div class="col-3 form-section">\r\n						<div class="label">Subscription Product Image</div>\r\n						<button type="button" id="upload-product-image" class="icon icon-btn icon-image btn-file icon-3x y-space-s">\r\n							<input id="upload-product-Image" name="upload-product-image" type="file" accept="image/*"/>\r\n						</button>\r\n					</div>\r\n					<div class="col-3 Product-Upload-Logo-Div preview-wrapper hidden-alt">\r\n						<div class="label">Subscription Product Image Preview</div>\r\n						 <img id="f-product-image" class="fit-container" src="'+(null==(__t=productLogo)?"":__t)+'" alt="">\r\n					</div>\r\n				</div>\r\n				<!-- Subscription Product Image -->\r\n\r\n				<div class="row x-space-s form-section">\r\n					<div class="col-12 y-space-bottom-m">\r\n						<div class="panel-title">Price Points</div>\r\n					</div>\r\n				</div>\r\n				<div class="row x-space-s">\r\n\r\n					<div class="col-6 form-section">\r\n\r\n						<label for="f-basic-price-point">Label</label>\r\n						<i class="icon icon-tool-tip x-space-s" title="This is the name of each price point."></i>\r\n						<input type="text" id="f-basic-price-point" name="f-basic-price-point" value="'+(null==(__t=basicpricePoint)?"":__t)+'" disabled></div>\r\n\r\n					<div class="col-3 form-section">\r\n\r\n						<label for="f-basic-suggested-price">Suggested Price</label>\r\n						<i class="icon icon-tool-tip x-space-s" title="This is the Teleflora suggested price for each price point."></i>\r\n						<div class="dollar-container">\r\n							<input type="text" id="f-basic-suggested-price" name="f-basic-suggested-price" value="'+(null==(__t=basicSuggestedPrice)?"":__t)+'" disabled></div>\r\n						</div>\r\n\r\n					<div class="col-3 form-section">\r\n\r\n						<label for="f-basic-myPrice">My Price</label>\r\n						<div class="dollar-container">\r\n							<input type="text" id="f-basic-myPrice" name="f-basic-myPrice" value="'+(null==(__t=basicMyPrice)?"":__t)+'">\r\n						</div>\r\n					</div>\r\n\r\n				</div>\r\n\r\n				<div class="row x-space-s form-section">\r\n\r\n					<div class="col-6 form-section">\r\n						\r\n						<input type="text" id="f-deluxe-price-point" name="f-deluxe-price-point" value="'+(null==(__t=deluxepricePoint)?"":__t)+'" disabled>\r\n					</div>\r\n\r\n					<div class="col-3 form-section">\r\n						<div class="dollar-container">\r\n							<input type="text" id="f-deluxe-suggestedprice" name="f-deluxe-suggestedprice" value="'+(null==(__t=deluxeSuggestedPrice)?"":__t)+'" disabled>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="col-3 form-section">\r\n						<div class="dollar-container">\r\n							<input type="text" id="f-deluxe-myPrice" name="f-deluxe-myPrice" value="'+(null==(__t=deluxeMyPrice)?"":__t)+'">\r\n						</div>\r\n					</div>\r\n\r\n				</div>\r\n\r\n				<div class="row x-space-s form-section">\r\n\r\n					<div class="col-6 form-section">\r\n\r\n						<input type="text" id="f-premium-price-point" name="f-premium-price-point" value="'+(null==(__t=premiumPricePoint)?"":__t)+'" disabled>\r\n					</div>\r\n\r\n					<div class="col-3 form-section">\r\n\r\n						<div class="dollar-container">\r\n							<input type="text" id="f-premium-suggested-price" name="f-premium-suggested-price" value="'+(null==(__t=premiumSuggestedPrice)?"":__t)+'" disabled></div>\r\n						</div>\r\n\r\n					<div class="col-3 form-section">\r\n						<div class="dollar-container">\r\n							<input type="text" id="f-premium-MyPrice" name="f-premium-MyPrice" value="'+(null==(__t=premiumMyPrice)?"":__t)+'">\r\n						</div>\r\n					</div>\r\n\r\n				</div>\r\n\r\n				<div class="row x-space-s form-section">\r\n					<div class="col-12 y-space-bottom-m">\r\n						<div class="panel-title">Product Information</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row x-space-s form-section">\r\n\r\n					<div class="col-12 form-section">\r\n\r\n						<label for="f-holiday-subscription">Holiday Subscription Description</label>\r\n						<i class="icon icon-tool-tip x-space-s" title="This is a descriptive text area that is shown for the holiday option for the subscription product."></i>\r\n\r\n						<textarea id="f-holiday-subscription" name="f-holiday-subscription" class="size-2">\r\n							'+(null==(__t=holidayDescription)?"":__t)+'</textarea>\r\n					</div>\r\n\r\n				</div>\r\n\r\n				<div class="row x-space-s form-section">\r\n\r\n					<div class="col-12 form-section">\r\n\r\n						<label for="f-monthly-subscription-description">Monthly Subscription Description</label>\r\n						<i class="icon icon-tool-tip x-space-s" title="This is a descriptive text area that is shown for the monthly option for the subscription product."></i>\r\n\r\n						<textarea id="f-monthly-subscription-description" name="f-monthly-subscription-description" class="size-2">\r\n							'+(null==(__t=monthlySubscriptionDescription)?"":__t)+'</textarea>\r\n					</div>\r\n\r\n				</div>\r\n\r\n				<div class="row x-space-s">\r\n					<div class="col-12 form-section">\r\n\r\n						<label for="f-custom-subscription-description">Custom Subscription Description</label>\r\n						<i class="icon icon-tool-tip x-space-s" title="This is a descriptive text area that is shown for the custom option for the subscription product."></i>\r\n\r\n						<textarea id="f-custom-subscription-description" name="f-custom-subscription-description" class="size-2">\r\n							'+(null==(__t=customSubscriptionDescription)?"":__t)+'</textarea>\r\n					</div>\r\n\r\n				</div>\r\n\r\n				<div id="subscription-seo-information" class="row row-spaced clearfix">\r\n					<div class="col-12 x-space-s">\r\n						<div class="panel-title x-space-s">\r\n							<i class="icon icon-closed x-space-s"></i>\r\n							SEO Information (optional)\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="accordion">\r\n					<div class="panel row row-spaced x-space-s">\r\n\r\n						<div class="row form-section y-space-top-m">\r\n							<div class="col-12">\r\n								<div class="row">\r\n									<div class="col-12 form-section">\r\n										<label for="f-meta-title">Page &#60;title&#62;</label>\r\n										<i class="icon icon-tool-tip x-space-s" title="This is the text that appears in the page tab at the top of your browser window while looking at the product."></i>\r\n										<input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n									</div>\r\n								</div>\r\n								<div class="row">\r\n									<div class="col-6 form-section">\r\n										<label for="f-meta-keywords">Keywords</label>\r\n										<i class="icon icon-tool-tip x-space-s" title="Here you can list a few comma separated keywords that describe your product."></i>\r\n										<textarea id="f-meta-keywords" name="f-meta-keywords" class="size-2">\r\n											'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n									</div>\r\n\r\n									<div class="col-6 form-section">\r\n										<label for="f-meta-desc">Meta Description</label>\r\n										<i class="icon icon-tool-tip x-space-s" title="This is the text that appears on search engines and should consist of a short simple paragraph describing the product."></i>\r\n										<textarea name="f-meta-desc" id="f-meta-desc" class="size-2" maxlength="256">\r\n											'+(null==(__t=metaDescription)?"":__t)+'</textarea>\r\n										<p class="pull-right">\r\n											<span id="meta-description-character-count">256</span>\r\n											<span>Characters remaining (256 maximum)</span>\r\n										</p>\r\n\r\n									</div>\r\n								</div>\r\n								<div class="row">\r\n									<div class="col-12 form-section">\r\n										<label for="f-additional-tags">Additional Tags</label>\r\n										<i class="icon icon-tool-tip x-space-s" title="Here you can add any additional meta tags you need for tracking or other purposes. This area is optional."></i>\r\n\r\n										<textarea name="f-additional-tags" id="f-additional-tags" class="size-3">\r\n											'+(null==(__t=additionalTags)?"":__t)+'</textarea>\r\n										<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n\r\n				</div>\r\n\r\n			</div>\r\n\r\n		</div>\r\n		<!-- Product & Images -->\r\n		<div id="Category-tab">\r\n			<div class="row">\r\n				<div class="col-12 form-section y-space-top-m">\r\n					<div class="x-space-s">\r\n					<div class="panel-title">Assign to Categories</div>\r\n					</div>\r\n				</div>\r\n			</div>		\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div class="x-space-s">\r\n					<div id="categories-container"></div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<!-- Category Tabs Ends here -->\r\n\r\n		<div id="settings-tab">\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div class="row">\r\n\r\n						<div class="x-space-s">\r\n							<div class="col-12">\r\n								<div class="row row-spaced">\r\n									<div class="col-12 form-section">\r\n										<div class="panel-title">Payment Settings</div>\r\n									</div>\r\n								</div>\r\n								<div class="row row-spaced">\r\n									<div class="col-12">\r\n										\r\n									Please verify with your Point of Sale system support team that you are able to use the Pay on Delivery solution in order to charge your customer at the time of delivery. If you are using Teleflora to process your credit cards, or your customer selects Paypal, Teleflora will authorize and/or capture the funds for the first bouquet. The remaining bouquets will need to be charged prior to delivery.\r\n								\r\n									</div>\r\n								</div>\r\n								<div class="row row-spaced">\r\n									<div class="col-4 form-section">\r\n\r\n										<div class="label">Pay on Delivery Option <i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n\r\n										<input '+(null==(__t=payatDeliveryActive?"checked":"")?"":__t)+'\r\n										type="checkbox" id="pay-at-delivery" name="pay-at-delivery" class="on-off-switch"/>\r\n										<label for="pay-at-delivery" class="on-off-switch-label">\r\n											<div class="on-off-switch-state">on</div>\r\n										</label>\r\n									</div>\r\n\r\n									<div class="col-4 form-section">\r\n										<div class="label">Pay on Delivery Discount <i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n\r\n										<div class="select-container">\r\n											<select id="discount-amount-pay-at-delivery">\r\n												<option selected hidden value="'+(null==(__t=discountAmountPayatDelivery)?"":__t)+'\r\n													">\r\n													'+(null==(__t=discountAmountPayatDelivery)?"":__t)+'</option>\r\n												<option value="5%">5%</option>\r\n												<option value="10%">10%</option>\r\n												<option value="15%">15%</option>\r\n												<option value="20%">20%</option>\r\n												<option value="25%">25%</option>\r\n											</select>\r\n\r\n										</div>\r\n\r\n									</div>\r\n								</div>\r\n								<div class="row row-spaced">\r\n\r\n									<div class="col-4 form-section">\r\n\r\n										<div class="label">Penalty Fee  <i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n\r\n										<input '+(null==(__t=penaltyFeeActive?"checked":"")?"":__t)+'\r\n										type="checkbox" id="f-penalty-fee-active" name="f-penalty-fee-active" class="on-off-switch"/>\r\n										<label for="f-penalty-fee-active" class="on-off-switch-label">\r\n											<div class="on-off-switch-state">on</div>\r\n										</label>\r\n									</div>\r\n\r\n									<div class="col-4 form-section">\r\n\r\n										<label for="f-penalty-message">Penalty Fee Message <i class="icon icon-tool-tip x-space-s" title=""></i></label>\r\n										<i class="icon icon-tool-tip x-space-s" title=""></i>\r\n\r\n										<input type="text" id="f-penalty-message" name="f-penalty-message" value="'+(null==(__t=penaltyMessage)?"":__t)+'">\r\n									</div>\r\n\r\n								</div>\r\n\r\n								<div class="row row-spaced">\r\n									<div class="col-4 form-section">\r\n\r\n										<div class="label">Pay in Full Option <i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n\r\n										<input '+(null==(__t=payInFullActive?"checked":"")?"":__t)+'\r\n										type="checkbox" id="pay-in-fullActive" name="pay-in-fullActive" class="on-off-switch"/>\r\n										<label for="pay-in-fullActive" class="on-off-switch-label">\r\n											<div class="on-off-switch-state">on</div>\r\n										</label>\r\n									</div>\r\n\r\n									<div class="col-4 form-section">\r\n										<div class="label">Pay in Full Discount <i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n\r\n										<div class="select-container">\r\n											<select id="discount-amount-payInFull">\r\n												<option selected hidden value="'+(null==(__t=discountAmountPayInFull)?"":__t)+'\r\n													">\r\n													'+(null==(__t=discountAmountPayInFull)?"":__t)+'</option>\r\n												<option value="5%">5%</option>\r\n												<option value="10%">10%</option>\r\n												<option value="15%">15%</option>\r\n												<option value="20%">20%</option>\r\n												<option value="25%">25%</option>\r\n											</select>\r\n\r\n										</div>\r\n									</div>\r\n									\r\n								</div>\r\n\r\n			\r\n\r\n							</div>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="row row-spaced">\r\n						<div class="x-space-s">\r\n							<div class="col-12">\r\n								<div class="row row-spaced">\r\n									<div class="col-12 form-section">\r\n										<div class="panel-title">Other Settings</div>\r\n									</div>\r\n								</div>\r\n								<div class="row row-spaced">\r\n									<div class="col-4 form-section">\r\n\r\n										<div class="label">\r\n											In-Store Pickup Only\r\n											<i title="." class="icon icon-tool-tip x-space-s"></i>\r\n\r\n										</div>\r\n\r\n										<input '+(null==(__t=InstorePickupActive?"checked":"")?"":__t)+'\r\n										type="checkbox" id="in-store-pickup" name="in-store-pickup" class="on-off-switch"/>\r\n										<label for="in-store-pickup" class="on-off-switch-label">\r\n											<div class="on-off-switch-state">on</div>\r\n										</label>\r\n\r\n									</div>		\r\n									<div class="col-3 form-section">\r\n\r\n										<div class="label">Tax Free</div>\r\n\r\n										<input '+(null==(__t=taxfreeActive?"checked":"")?"":__t)+'\r\n										type="checkbox" id="tax-free-active" name="tax-free-active" class="on-off-switch"/>\r\n										<label for="tax-free-active" class="on-off-switch-label">\r\n											<div class="on-off-switch-state">on</div>\r\n										</label>\r\n									</div>\r\n\r\n									<div class="col-4 form-section">\r\n										<div class="label">Merchandising Icons</div>\r\n\r\n										<div class="select-container">\r\n											<select id="merchandising-icons">\r\n												<option selected hidden value="'+(null==(__t=merchandisingIcons)?"":__t)+'"> '+(null==(__t=merchandisingIcons)?"":__t)+'  </option>\r\n												<option value="New">New</option>\r\n												<option value="BestSeller">BestSeller</option>\r\n												<option value="Hot">Hot</option>\r\n												<option value="Most Viewed">Most Viewed</option>\r\n											</select>\r\n\r\n										</div>\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n\r\n				</div>\r\n\r\n			</div>\r\n		</div>\r\n\r\n	</div>\r\n	<!-- Tabs Ends here -->\r\n</form>\r\n';
return __p}}),define("content/category-sections/merchandising/subscription-product-setup/models/edit-subscription-setup-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-subscription-product.json",defaults:{subcriptionName:"",SubscriptionActive:!0,productNumber:"",subscriptionSubtitle:"",metaTitle:"",metaDescription:"",metaKeywords:"",additionalTags:"",basicpricePoint:"",basicSuggestedPrice:"",basicMyPrice:"",deluxepricePoint:"",deluxeSuggestedPrice:"",deluxeMyPrice:"",premiumPricePoint:"",premiumSuggestedPrice:"",premiumMyPrice:"",holidayDescription:"",monthlySubscriptionDescription:"",customSubscriptionDescription:"",holidayLogo:"",monthlyLogo:"",customLogo:"",productLogo:"",InstorePickupActive:!0,payatDeliveryActive:!0,penaltyFeeActive:!0,payInFullActive:!0,penaltyMessage:"",discountAmountPayatDelivery:"",discountAmountPayInFull:"",taxfreeActive:!1,merchandisingIcons:""}});return new t}),define("content/category-sections/merchandising/subscription-product-setup/views/edit-subscription-setup-view",["backbone","../templates/edit-subscription-setup-tpl","../models/edit-subscription-setup-model","components/general-product/views/general-product-view","components/featured-occasions/collections/all-occasions-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyTabs(),e.applyAccordians(),e.applyToolTips(),e.checkPreviews()}),o.fetchCustom().done(function(){e.occasionsCollection=o.deepClone(),e.cacheElem(),e.$categoriesContainer.append(e.getCategoriesComponent(e.occasionsCollection).render().el)}.bind(e)),e},events:{"keyup #f-subscription-subtitle":"handleCharacterCount","keyup #f-meta-desc":"handleMetaDescriptionCharacterCount","click #upload-holiday-logo":"handleHolidayLogoUpload","click #upload-monthly-logo":"handleMonthlyLogoUpload","click #upload-custom-logo":"handleCustomLogoUpload","change #upload-product-image":"handleProductImageUpload","click #save-btn":"handleSave","click #reset-btn":"handleReset","change input":"triggerChange"},triggerChange:function(){r.trigger("form:editing")},cacheElem:function(){this.$inStorePickup=this.$el.find("#in-store-pickup"),this.$subscriptionDetailsName=this.$el.find("#f-name-product-sub"),this.$productNumber=this.$el.find("#f-product-number"),this.$SubscriptionActive=this.$el.find("#f-subscription-active"),this.$basicPricePoint=this.$el.find("#f-basic-price-point"),this.$basicSuggestedPrice=this.$el.find("#f-basic-suggested-price"),this.$basicMyPrice=this.$el.find("#f-basic-myPrice"),this.$deluxePricePoint=this.$el.find("#f-deluxe-price-point"),this.$deluxeSuggestedPrice=this.$el.find("#f-deluxe-suggestedprice"),this.$deluxemyPrice=this.$el.find("#f-deluxe-myPrice"),this.$premiumPricePoint=this.$el.find("#f-premium-price-point"),this.$premiumSuggestedPrice=this.$el.find("#f-premium-suggested-price"),this.$premiummyPrice=this.$el.find("#f-premium-MyPrice"),this.$holidaySubscriptionDescription=this.$el.find("#f-holiday-subscription"),this.$MonthlySubscriptionDescription=this.$el.find("#f-monthly-subscription-description"),this.$customSubscriptionDescription=this.$el.find("#f-custom-subscription-description"),this.$SubscriptionSubtitle=this.$el.find("#f-subscription-subtitle"),this.$MetaDescription=this.$el.find("#f-meta-desc"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$AdditionalTags=this.$el.find("#f-additional-tags"),this.$payatDeliveryTime=this.$el.find("#pay-at-delivery"),this.$discountAmountPayatDelivery=this.$el.find("#discount-amount-pay-at-delivery"),this.$penaltyFeeActive=this.$el.find("#f-penalty-fee-active"),this.$penaltyMessage=this.$el.find("#f-penalty-message"),this.$payInfullActive=this.$el.find("#pay-in-fullActive"),this.$discountAmountPayinfull=this.$el.find("#discount-amount-payInFull"),this.$taxFreeActive=this.$el.find("#tax-free-active"),this.$HolidayLogoDiv=this.$el.find(".Holiday-Upload-Logo-Div"),this.$MonthlyLogoDiv=this.$el.find(".Monthly-Upload-Logo-Div"),this.$CustomLogoDiv=this.$el.find(".Custom-Upload-Logo-Div"),this.$ProductLogoDiv=this.$el.find(".Product-Upload-Logo-Div"),this.$productImage=this.$el.find("#f-product-image"),this.$alertPanel=this.$el.find(".alert-panel"),this.$previewHolidayImg=this.$el.find("#preview-holiday-img"),this.$previewMonthlyImg=this.$el.find("#preview-monthly-img"),this.$previewCustomImg=this.$el.find("#preview-custom-img"),this.$merchandisingIcon=this.$el.find("#merchandising-icons"),this.$imagePreviews=this.$el.find(".preview-wrapper"),this.$categoriesContainer=this.$el.find("#categories-container"),this.$tip=this.$el.find(".tooltip-change")},handleSave:function(){var e=this;n.set({subcriptionName:e.$subscriptionDetailsName.val().trim(),SubscriptionActive:e.$SubscriptionActive.is(":checked"),productNumber:e.$productNumber.val().trim(),subscriptionSubtitle:e.$SubscriptionSubtitle.val().trim(),metaTitle:e.$metaTitle.val().trim(),metaDescription:e.$MetaDescription.val().trim(),metaKeywords:e.$metaKeywords.val().trim(),additionalTags:e.$AdditionalTags.val().trim(),basicpricePoint:e.$basicPricePoint.val().trim(),basicSuggestedPrice:e.$basicSuggestedPrice.val().trim(),basicMyPrice:e.$basicMyPrice.val().trim(),deluxepricePoint:e.$deluxePricePoint.val().trim(),deluxeSuggestedPrice:e.$deluxeSuggestedPrice.val().trim(),deluxeMyPrice:e.$deluxemyPrice.val().trim(),premiumPricePoint:e.$premiumPricePoint.val().trim(),premiumSuggestedPrice:e.$premiumSuggestedPrice.val().trim(),premiumMyPrice:e.$premiummyPrice.val().trim(),holidayDescription:e.$holidaySubscriptionDescription.val().trim(),monthlySubscriptionDescription:e.$MonthlySubscriptionDescription.val().trim(),customSubscriptionDescription:e.$customSubscriptionDescription.val().trim(),holidayLogo:e.$previewHolidayImg.prop("src"),monthlyLogo:e.$previewMonthlyImg.prop("src"),customLogo:e.$previewCustomImg.prop("src"),productLogo:e.$productImageLogo,InstorePickupActive:e.$inStorePickup.is(":checked"),payatDeliveryActive:e.$payatDeliveryTime.is(":checked"),penaltyFeeActive:e.$penaltyFeeActive.is(":checked"),payInFullActive:e.$payInfullActive.is(":checked"),penaltyMessage:e.$penaltyMessage.val().trim(),discountAmountPayatDelivery:e.$discountAmountPayatDelivery.val().trim(),discountAmountPayInFull:e.$discountAmountPayinfull.val().trim(),taxfreeActive:e.$taxFreeActive.is(":checked"),merchandisingIcons:e.$merchandisingIcon.val().trim()}),r.trigger("form:save",e.$tip)},handleReset:function(){var e=this;r.trigger("modal:custom",{template:{title:"Reset Settings",text:"Are you sure? This will reset all applicable fields to their default Teleflora/group values."},confirmFn:function(){e.$subscriptionDetailsName.val(n.get("subcriptionName")),e.$SubscriptionActive.prop("checked",!0),e.$productNumber.val(n.get("productNumber")),e.$SubscriptionSubtitle.val(n.get("subscriptionSubtitle")),e.$metaTitle.val(n.get("metaTitle")),e.$MetaDescription.val(n.get("metaDescription")),e.$metaKeywords.val(n.get("metaKeywords")),e.$AdditionalTags.val(n.get("additionalTags")),e.$basicPricePoint.val(n.get("basicpricePoint")),e.$basicSuggestedPrice.val(n.get("basicSuggestedPrice")),e.$basicMyPrice.val(n.get("basicMyPrice")),e.$deluxePricePoint.val(n.get("deluxepricePoint")),e.$deluxeSuggestedPrice.val(n.get("deluxeSuggestedPrice")),e.$deluxemyPrice.val(n.get("deluxeMyPrice")),e.$premiumPricePoint.val(n.get("premiumPricePoint")),e.$premiumSuggestedPrice.val(n.get("premiumSuggestedPrice")),e.$premiummyPrice.val(n.get("premiumMyPrice")),e.$holidaySubscriptionDescription.val(n.get("holidayDescription")),e.$MonthlySubscriptionDescription.val(n.get("monthlySubscriptionDescription")),e.$customSubscriptionDescription.val(n.get("customSubscriptionDescription")),e.$inStorePickup.prop("checked",!0),e.$payatDeliveryTime.prop("checked",!0),e.$penaltyFeeActive.prop("checked",!0),e.$payInfullActive.prop("checked",!0),e.$penaltyMessage.val(n.get("penaltyMessage")),e.$discountAmountPayatDelivery.val(n.get("discountAmountPayatDelivery")),e.$discountAmountPayinfull.val(n.get("discountAmountPayInFull")),e.$taxFreeActive.prop("checked",!1),e.$merchandisingIcon.val(n.get("merchandisingIcons"))},cancelFn:function(){}})},handleCharacterCount:function(){var e=this.$SubscriptionSubtitle.val(),t=e.length,n=500-t;$("#character-count").html(n)},applyTabs:function(){this.$el.find("#tabs").tabs()},applyAccordians:function(){this.$el.find(".accordian").accordion({heightStyle:"content"}),this.applyAccordians2()},applyAccordians2:function(){this.$el.find("#subscription-seo-information").click(function(){var e=$(this);return e.next().fadeToggle(200).toggleClass("active"),e.find(".icon").hasClass("icon-opened")?e.find(".icon").switchClass("icon-opened","icon-closed"):e.find(".icon").switchClass("icon-closed","icon-opened"),!1}).next().hide()},handleMetaDescriptionCharacterCount:function(){var e=this.$MetaDescription.val(),t=e.length,n=256-t;$("#meta-description-character-count").html(n)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},checkPreviews:function(){this.$imagePreviews.each(function(){var e=$(this),t=e.find("img"),n=$(t).attr("src");""!=n&&n?e.fadeIn("200"):e.fadeOut("200")})},handleHolidayLogoUpload:function(){var e=this;r.trigger("form:image-upload",{cb:function(t){e.$previewHolidayImg.prop("src",t),e.checkPreviews()},active:e.$previewHolidayImg.prop("src"),name:"Subscription Product"})},handleMonthlyLogoUpload:function(){var e=this;r.trigger("form:image-upload",{cb:function(t){e.$previewMonthlyImg.prop("src",t),e.checkPreviews()},active:e.$previewMonthlyImg.prop("src"),name:"Subscription Product"})},handleCustomLogoUpload:function(){var e=this;r.trigger("form:image-upload",{cb:function(t){e.$previewCustomImg.prop("src",t),e.checkPreviews()},active:e.$previewCustomImg.prop("src"),name:"Subscription Product"})},hasValidImageExtension:function(e){return new RegExp("(\\.gif|\\.jpg|\\.jpeg|\\.bmp|\\.png)$","i").test(e)},handleProductImageUpload:function(e){{var t=this,n=new FileReader,i=e.target.files[0],o=i.name;$("#f-product-image").remove()}n.onload=function(e){var n=e.target.result;t.$ProductLogoDiv.append('<img id="f-product-image" class="y-space-top-s center-align small-dotd-image" src="'+n+'" alt="">'),t.$productImageLogo=n,t.checkPreviews()},t.hasValidImageExtension(o)?(t.hideAlertPanel(),n.readAsDataURL(e.target.files[0])):t.showAlertPanel()},showAlertPanel:function(){this.$alertPanel.show()},hideAlertPanel:function(){this.$alertPanel.hide()},getCategoriesComponent:function(e){return new i({activeTitle:"Selected Categories",activeTableTitle:"Category",allTitle:"Category Search",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,collection:e,hideGrids:!0,showCategoryID:!0})}});return new a}),define("content/category-sections/common/about-us/templates/about-us-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage About Us Page</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage the About Us Page. You can add and change images, and change the text content of the page.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Contact Us Section</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3">\r\n			<div class="label">Display Contact Us<i title="This controls whether or not your address and phone number will show on the about us page.\r\n" class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=contactUsActive?"checked":"")?"":__t)+' type="checkbox" id="f-contact-us-active" name="f-contact-us-active" class="on-off-switch" />\r\n	        <label for="f-contact-us-active" class="on-off-switch-label">\r\n	            <div class="on-off-switch-state">on</div>\r\n	        </label>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Store Hours Section</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3">\r\n			<div class="label">Store Hours Section<i title="Do you want to show your store\'s hours? If so, keep this turned on.\r\n" class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=storeHoursActive?"checked":"")?"":__t)+' type="checkbox" id="f-store-hours-active" name="f-store-hours-active" class="on-off-switch" />\r\n	        <label for="f-store-hours-active" class="on-off-switch-label">\r\n	            <div class="on-off-switch-state">on</div>\r\n	        </label>\r\n		</div>\r\n\r\n		<div class="col-9">\r\n			<label for="f-store-hours-content">Store Hours Content</label><i title="What are your store hours? Type them in here.\r\n" class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea '+(null==(__t=storeHoursActive?"":"disabled")?"":__t)+' id="f-store-hours-content" name="f-store-hours-content" class="size-1">'+(null==(__t=storeHoursContent)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Map/Image Section</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3">\r\n			<label for="f-displayed-content">Displayed Content</label><i title="Would you like to display a map to your store? Perhaps something different? Select that here.\r\n" class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="select-container">\r\n				<select name="f-displayed-content" id="f-displayed-content">\r\n					<option selected disabled hidden value="'+(null==(__t=displayedContent)?"":__t)+'">'+(null==(__t=displayedContent)?"":__t)+'</option>\r\n					<option value="Image">Image</option>\r\n					<option value="Map">Map</option>\r\n					<option value="Nothing">Nothing</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n\r\n		<div id="displayed-content-image-btn" class="col-3 '+(null==(__t="Image"===displayedContent?"":"hidden-alt")?"":__t)+'">\r\n			<div class="label">About Us Image<i title="Would you like to upload a picture to display on your about us page? You can do that here.\r\n" class="icon icon-tool-tip x-space-s"></i></div>\r\n			<button id="about-img-upload-btn" type="button" class="btn btn-other btn-file">\r\n				Select\r\n			</button>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-6 center-align">\r\n			<div id="displayed-content-container" class="display-container"></div>\r\n		</div>\r\n	</div>\r\n	<div class="row hidden-alt" id="map-message">\r\n		<div class="col-12">Maps are automatically generated based on your store locations. You can configure these on the Store Locations page in eSAT - More > Settings > Store Locations.</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<button type="button" id="new-btn"class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Section</button>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<table class="table alternate">\r\n			<thead>\r\n				<tr>\r\n					<th class="col-1"></th>\r\n					<th class="col-1">Sequence</th>\r\n					<th class="col-8 left-align">Section<button type="button" id="sort-btn" class="icon icon-btn icon-sort x-space-s"></button></th>\r\n					<th class="col-1">Edit</th>\r\n					<th class="col-1">Delete</th>\r\n				</tr>\r\n			</thead>\r\n			<tbody id="section-list"></tbody>\r\n		</table>\r\n	</div>\r\n</div>\r\n\r\n<div id="confirm-modal-container"></div>\r\n\r\n';return __p}}),define("content/category-sections/common/about-us/models/about-us-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/about-us-settings.json",defaults:{contactUsActive:!0,storeHoursActive:!0,storeHoursContent:"",displayedContent:"Image",latitude:0,longitude:0,imgUrl:""}});return new t}),define("content/category-sections/common/about-us/models/section-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,title:"",sectionActive:!0,sectionDescription:"",imgActive:!0,imgUrl:""}});return t}),define("content/category-sections/common/about-us/collections/section-collection",["backbone","../models/section-model"],function(e,t){var n,i=e.Collection.extend({url:"/mock/user-sections.json",model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,i,o){for(n=o.index,j=i.length;j>n;++n)i.at(n).set("sequence",n+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("title")},descending:function(e,t){return e.get("title")>t.get("title")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return new i}),define("content/category-sections/common/about-us/templates/section-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td>'+(null==(__t=sequence)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=title)?"":__t)+'</td>\r\n	<td><button type="button" class="icon icon-btn icon-edit icon-2x"></button></td>\r\n	<td><button type="button" class="icon icon-btn icon-trash icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/common/about-us/views/section-view",["backbone","../templates/section-tpl","../collections/section-collection","components/confirm-modal/views/confirm-modal-view","global-events"],function(e,t,n,i,o){var r=e.View.extend({template:t,initialize:function(e){var t=this;t.parent=e.parent,t.listenTo(n,"remove",function(e){e===t.model&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this},events:{"click .icon-edit":"handleEdit","click .icon-trash":"handleDelete"},handleEdit:function(){this.parent.handleEdit(this.model)},handleDelete:function(){o.trigger("form:delete",n.remove.bind(n,this.model))}});return r}),define("content/category-sections/common/about-us/views/about-us-home-view",["backbone","../templates/about-us-home-tpl","../models/about-us-model","../models/section-model","../collections/section-collection","./section-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"p-about-us",template:t,initialize:function(){this.listenTo(o,"resequenced",this.addAllSections)},render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),o.fetchCustom().done(function(){o.resequence(),e.applySortable()}),e.applyToolTips(),e.handleDisplayedContentChange()}),this},cacheElem:function(){this.$contactUsActive=this.$el.find("#f-contact-us-active"),this.$storeHoursActive=this.$el.find("#f-store-hours-active"),this.$storeHoursContent=this.$el.find("#f-store-hours-content"),this.$displayedContent=this.$el.find("#f-displayed-content"),this.$imgUploadBtn=this.$el.find("#about-img-upload-btn"),this.$displayedContentImageBtn=this.$el.find("#displayed-content-image-btn"),this.$sectionList=this.$el.find("#section-list"),this.$displayedContentContainer=this.$el.find("#displayed-content-container"),this.$mapMessage=this.$el.find("#map-message"),this.$tip=this.$el.find(".tooltip-change")},events:{"change #f-displayed-content":"handleDisplayedContentChange","click #about-img-upload-btn":"handleFileUpload","click #new-btn":"handleNewBtnClick","click #sort-btn":"handleSortBtnClick","click #save-btn":"handleSave","change #f-store-hours-active":"handleStoreHoursActiveChange"},addSection:function(e){var t=new r({model:e,parent:this});this.$sectionList.append(t.render().el)},addAllSections:function(){this.$sectionList.empty(),o.each(this.addSection,this)},initMap:function(){this.$displayedContentContainer.empty();{var e=new google.maps.LatLng(n.get("latitude"),n.get("longitude")),t={zoom:14,center:e},i=new google.maps.Map(this.$displayedContentContainer[0],t);new google.maps.Marker({position:e,map:i})}},initImage:function(e){this.$displayedContentContainer.empty();var e=e||n.get("imgUrl"),t=document.createElement("img");t.src=e,this.$displayedContentContainer.append(t)},handleDisplayedContentChange:function(){var e=this.$displayedContent.find("option:selected").val();"Image"===e?(this.$displayedContentImageBtn.fadeIn(200),this.$displayedContentContainer.fadeIn(200),this.$mapMessage.fadeOut(200),this.initImage()):"Map"===e?(this.$displayedContentImageBtn.fadeOut(200),this.$displayedContentContainer.fadeIn(200),this.$mapMessage.fadeIn(200),this.initMap()):(this.$displayedContentImageBtn.fadeOut(200),this.$displayedContentContainer.fadeOut(200),this.$mapMessage.fadeOut(200))},handleFileUpload:function(){var e=this;a.trigger("form:image-upload",{cb:function(t){e.initImage(t)},active:this.$displayedContentContainer.find("img").prop("src"),name:"About Us"})},handleNewBtnClick:function(){this.parent.showCreateEdit(new i)},handleEdit:function(e){this.parent.showCreateEdit(e)},handleSortBtnClick:function(e){var t=$(e.target);t.hasClass("icon-sort")?(t.switchClass("icon-sort","icon-sort-asc"),o.changeSort("ascending")):t.hasClass("icon-sort-asc")?(t.switchClass("icon-sort-asc","icon-sort-desc"),o.changeSort("descending")):t.hasClass("icon-sort-desc")&&(t.switchClass("icon-sort-desc","icon-sort-asc"),o.changeSort("ascending")),o.sort(),o.resequence()},handleStoreHoursActiveChange:function(e){$(e.target).is(":checked")?this.$storeHoursContent.attr("disabled",!1):this.$storeHoursContent.attr("disabled",!0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#section-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionList.children().each(function(e){var t=$(this).data("id");o.where({id:t})[0].set("sequence",e+1)}),o.changeSort("sequence"),o.sort(),o.trigger("resequenced")}})},handleSave:function(){n.set({contactUsActive:this.$contactUsActive.is(":checked"),storeHoursActive:this.$storeHoursActive.is(":checked"),storeHoursContent:this.$storeHoursContent.val().trim(),displayedContent:this.$displayedContent.find("option:selected").val()}),"Image"===n.get("displayedContent")&&n.set({imgUrl:this.$displayedContentContainer.find("img").prop("src")}),a.trigger("form:save",this.$tip)}});return new s}),define("content/category-sections/common/about-us/templates/create-section-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="p-new-about-us">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add ")?"":__t)+' About Us Section</h2>\r\n				<div class="btn-panel">\r\n					<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button id="save-btn" class="btn btn-submit pull-right">\r\n						',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n					</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n	',__p+="About The Company "==title?'\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use this to tell your customers the history of your company.\r\n		</div>\r\n	</div>\r\n\r\n	':"Store Hours"==title?'\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use this section to list your store hours and any days you may be closed, such as Christmas.\r\n		</div>\r\n	</div>\r\n\r\n	':"Contact Information"==title?'\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			List your contact information, such as phone number, address, and email here.\r\n		</div>\r\n	</div>\r\n\r\n	':'\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use this to tell your customers the history of your company.\r\n		</div>\r\n	</div>\r\n\r\n	',__p+='\r\n\r\n	<form id="create-edit-form" class="row row-spaced panel form-section">\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="title">Section Title</label>\r\n				<input type="text" id="title" name="title" value="'+(null==(__t=title)?"":__t)+'">\r\n			</div>\r\n			<div class="col-6">\r\n				<div class="label">Display Section<i title="Do you want customers to see this section in your About Us page? If so, leave this turned on.\r\n" class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=sectionActive?"checked":"")?"":__t)+' type="checkbox" id="section-active" name="section-active" class="on-off-switch" />\r\n		        <label for="section-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<label for="section-description">Section Description</label><i title="How did your Flower Shop begin? Use this section to tell your customers what makes your company special." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea name="section-description" id="section-description" class="tinymce">'+(null==(__t=sectionDescription)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Section Image</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3">\r\n				<div class="label">Display Image<i title="Would you like to display an image with this section? Leave this on." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=imgActive?"checked":"")?"":__t)+' type="checkbox" id="image-active" name="image-active" class="on-off-switch" />\r\n		        <label for="image-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n\r\n			<div id="preview-img-btn" class="col-3 '+(null==(__t=imgActive?"":"hidden-alt")?"":__t)+'">\r\n				<div class="label">Promotional Image<i title="Use this to upload your image." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<button type="button" id="promotional-img-file" class="btn btn-other btn-file">\r\n					Select\r\n				</button>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 center-align">\r\n				<div id="preview-img" class="display-container '+(null==(__t=imgActive&&imgUrl?"":"hidden-alt")?"":__t)+'">\r\n					<img id="promotional-img" src="'+(null==(__t=imgUrl)?"":__t)+'" alt="">\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>';return __p}}),define("content/category-sections/common/about-us/views/create-section-view",["backbone","../templates/create-section-tpl","../collections/section-collection","tinymce","global-events","jquery","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.validateForm(),this.applyTinymce(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick","click #promotional-img-file":"handleFileUpload","change #image-active":"togglePreviewImg"},cacheElem:function(){this.$title=this.$el.find("#title"),this.$sectionActive=this.$el.find("#section-active"),this.$imgActive=this.$el.find("#image-active"),this.$promotionalImg=this.$el.find("#promotional-img"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$previewImg=this.$el.find("#preview-img"),this.$previewImgBtn=this.$el.find("#preview-img-btn"),this.$tip=this.$el.find(".tooltip-change")},handleCancelBtnClick:function(){o.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveBtnClick:function(){this.$createEditForm.valid()?(this.model.set({title:this.$title.val().trim(),sectionActive:this.$sectionActive.is(":checked"),imgActive:this.$imgActive.is(":checked"),imgUrl:this.$promotionalImg.prop("src"),sectionDescription:i.activeEditor.getContent()}),n.get(this.model)||(this.model.set("id",-1),n.add(this.model)),o.trigger("form:save",this.$tip),this.parent.showHome()):o.trigger("form:invalid",this.$tip)},handleFileUpload:function(){var e=this;o.trigger("form:image-upload",{cb:function(t){e.$promotionalImg.prop("src",t),e.$previewImg.is(":hidden")&&e.$previewImg.fadeIn(200)},active:e.$promotionalImg.prop("src"),name:"Promotional"})},applyTinymce:function(){i.remove(),setTimeout(function(){i.init({setup:function(e){e.on("change",function(){o.trigger("form:editing")})},selector:"textarea#section-description",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{title:"required"}})},togglePreviewImg:function(){this.$imgActive.is(":checked")?(this.$previewImg.fadeIn(200),this.$previewImgBtn.fadeIn(200)):(this.$previewImg.fadeOut(200),this.$previewImgBtn.fadeOut(200))}});return new r}),define("content/category-sections/common/about-us/views/about-us-view",["backbone","./about-us-home-view","./create-section-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;i.trigger("form:cancel",function(){n.model=e,t.replaceVisible(n)
})}});return new o}),define("content/category-sections/content-management/help/templates/help-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Edit Help Page</h2>\r\n			<button id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">Use this to edit your help page and give your customers access to important information.</div>\r\n</div>\r\n<div class="row">\r\n	<div class="col-12">\r\n		<button id="new-btn" class="btn btn-submit pull-right y-space-s">\r\n			<i class="icon icon-add icon-lg"></i> New Item\r\n		</button>\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="pull-right top-offset-s">\r\n				<input '+(null==(__t=companyActive?"checked":"")?"":__t)+' type="checkbox" id="f-company-policy-active" name="f-company-policy-active" class="on-off-switch" />\r\n		        <label for="f-company-policy-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n			<div class="panel-title y-space-top-l">Company Policy Info<i class="icon icon-tool-tip" title="Leave this switched to on, so your customers and see this section."></i></div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-1"></th>\r\n						<th class="col-1">Sequence</th>\r\n						<th class="col-6 left-align">Question</th>\r\n						<th class="col-1">Edit</th>\r\n						<!-- <th class="col-2">Status</th> -->\r\n						<th class="col-1">Delete</th>\r\n					</tr>	\r\n				</thead>\r\n				<tbody id="company-policy"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="pull-right top-offset-s">\r\n				<input '+(null==(__t=ordersReturnsActive?"checked":"")?"":__t)+' type="checkbox" id="f-orders-returns-policy-active" name="f-orders-returns-policy-active" class="on-off-switch" />\r\n		        <label for="f-orders-returns-policy-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n			<div class="panel-title y-space-top-l">Ordering & Return Policy Info<i class="icon icon-tool-tip" title="Leave this switched to on, so your customers and see this section."></i></div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-1"></th>\r\n						<th class="col-1">Sequence</th>\r\n						<th class="col-6 left-align">Question</th>\r\n						<th class="col-1">Edit</th>\r\n						<!-- <th class="col-2">Status</th> -->\r\n						<th class="col-1">Delete</th>\r\n					</tr>	\r\n				</thead>\r\n				<tbody id="orders-returns-policy"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="pull-right top-offset-s">\r\n				<input '+(null==(__t=securityPrivacyActive?"checked":"")?"":__t)+' type="checkbox" id="f-security-privacy-policy-active" name="f-security-privacy-policy-active" class="on-off-switch" />\r\n		        <label for="f-security-privacy-policy-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n			<div class="panel-title y-space-top-l">Security and Privacy Policy Info<i class="icon icon-tool-tip" title="Leave this switched to on, so your customers and see this section."></i></div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-1"></th>\r\n						<th class="col-1">Sequence</th>\r\n						<th class="col-6 left-align">Question</th>\r\n						<th class="col-1">Edit</th>\r\n						<!-- <th class="col-2">Status</th> -->\r\n						<th class="col-1">Delete</th>\r\n					</tr>	\r\n				</thead>\r\n				<tbody id="security-privacy-policy"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>\r\n';return __p}}),define("content/category-sections/content-management/help/models/help-model",["backbone"],function(e){var t=e.Model.extend({defaults:{companyActive:!0,ordersReturnsActive:!0,securityPrivacyActive:!0}});return new t}),define("content/category-sections/content-management/help/models/question-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,question:"",active:!0,answer:"",category:"Company Policy Info"}});return t}),define("content/category-sections/content-management/help/templates/question-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td>'+(null==(__t=sequence)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=question)?"":__t)+'</td>\r\n	<td><button class="icon icon-btn icon-edit icon-2x"></button></td>\r\n	<!--\r\n	<td class="hide-overflow">\r\n		<div class="centered-content-container">\r\n		<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="active-"+category+sequence)?"":__t)+'" name="'+(null==(__t="active-"+category+sequence)?"":__t)+'" class="on-off-switch" />\r\n        <label for="'+(null==(__t="active-"+category+sequence)?"":__t)+'" class="on-off-switch-label">\r\n            <div class="on-off-switch-state">on</div>\r\n        </label>\r\n        </div>\r\n	</td>\r\n	-->\r\n	<td><button class="icon icon-btn icon-trash icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/content-management/help/views/question-view",["backbone","../templates/question-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){var t=this;t.parent=e.parent,t.collection=e.collection,t.listenTo(t.collection,"remove",function(e){e===t.model&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-edit":"handleEdit","click .icon-trash":"handleDelete","change .on-off-switch":"handleSwitch"},cacheElem:function(){this.$active=this.$el.find(".on-off-switch")},handleEdit:function(){this.parent.handleEdit(this.collection,this.model)},handleDelete:function(){n.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleSwitch:function(){n.trigger("form:editing"),this.model.set({active:this.$active.is(":checked")})}});return i}),define("content/category-sections/content-management/help/collections/questions-collection",["backbone","../models/question-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){this.listenTo(this,"add",function(e){e.get("sequence")||e.set("sequence",this.length)}),this.listenTo(this,"remove",function(e,t,n){for(var i=n.index,o=t.length;o>i;++i)t.at(i).set("sequence",i+1);this.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("title")},descending:function(e,t){return e.get("title")>t.get("title")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return n}),define("content/category-sections/content-management/help/collections/all-questions-collection",["backbone","./questions-collection"],function(e,t){var n=new t;return n.url="/mock/user-help-questions.json",n}),define("content/category-sections/content-management/help/collections/company-policy-collection",["backbone","./questions-collection","./all-questions-collection"],function(e,t,n){var i=new t;return i.category="Company Policy Info",n.fetchCustom().done(function(){i.set(n.where({category:"Company Policy Info"})),i.trigger("sync")}),i}),define("content/category-sections/content-management/help/collections/orders-returns-policy-collection",["backbone","./questions-collection","./all-questions-collection"],function(e,t,n){var i=new t;return i.category="Ordering and Return Policy Info",n.fetchCustom().done(function(){i.set(n.where({category:"Ordering and Return Policy Info"})),i.trigger("sync")}),i}),define("content/category-sections/content-management/help/collections/security-privacy-policy-collection",["backbone","./questions-collection","./all-questions-collection"],function(e,t,n){var i=new t;return i.category="Security and Privacy Policy Info",n.fetchCustom().done(function(){i.set(n.where({category:"Security and Privacy Policy Info"})),i.trigger("sync")}),i}),define("content/category-sections/content-management/help/views/help-home-view",["backbone","../templates/help-home-tpl","../models/help-model","../models/question-model","./question-view","../collections/company-policy-collection","../collections/orders-returns-policy-collection","../collections/security-privacy-policy-collection","global-events","jqueryui"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({tagName:"div",id:"p-help",template:t,initialize:function(){},render:function(){return this.$el.html(this.template(n.toJSON())),this.cacheElem(),this.initPolicy(this.$companyPolicy,r),this.initPolicy(this.$ordersReturnsPolicy,a),this.initPolicy(this.$securityPrivacyPolicy,s),this.delegateEvents(),this.applyTooltips(),this},cacheElem:function(){this.$companyPolicy=this.$el.find("#company-policy"),this.$ordersReturnsPolicy=this.$el.find("#orders-returns-policy"),this.$securityPrivacyPolicy=this.$el.find("#security-privacy-policy"),this.$companyActive=this.$el.find("#f-company-policy-active"),this.$ordersReturnsActive=this.$el.find("#f-orders-returns-policy-active"),this.$securityPrivacyActive=this.$el.find("#f-security-privacy-policy-active"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #new-btn":"handleNew","click #f-company-policy-active":"handleSwitch","click #f-orders-returns-policy-active":"handleSwitch","click #f-security-privacy-policy-active":"handleSwitch","click #save-btn":"handleSave"},initPolicy:function(e,t){this.addAllQuestions(e,t),this.applySortable(e,t),this.listenTo(t,"resequenced sync",this.addAllQuestions.bind(this,e,t))},addQuestion:function(e,t,n){var i=new o({model:n,collection:t,parent:this});e.append(i.render().el)},addAllQuestions:function(e,t){e.empty(),t.sort(),t.each(this.addQuestion.bind(this,e,t),this)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(e,t){var n=this;e.sortable({helper:n.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.children().each(function(e){var n=$(this).data("id");t.get(n).set("sequence",e+1)}),t.changeSort("sequence"),t.sort(),t.trigger("resequenced")}})},handleNew:function(){this.parent.showCreateEdit(r,new i)},handleEdit:function(e,t){this.parent.showCreateEdit(e,t)},handleSave:function(){l.trigger("form:save",this.$tip)},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleSwitch:function(){l.trigger("form:editing"),n.set({companyActive:this.$companyActive,ordersReturnsActive:this.$ordersReturnsActive,securityPrivacyActive:this.$securityPrivacyActive})}});return new c}),define("content/category-sections/content-management/help/templates/create-edit-help-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div id="p-create-edit-help">\n	<div class="row row-spaced">\n		<div class="col-12">\n			<div class="clearfix section-title">\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'Help Page</h2>\n				<div class="btn-panel">\n					<button id="cancel-btn" class="btn btn-other">Cancel</button>\n					<button id="save-btn" class="btn btn-submit pull-right">\n						<i class="icon icon-add icon-lg"></i>Submit\n					</button>\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n<!-- Hidden Alert Message -->\n\n<div class="row panel alert-panel">\n  <div class="col-12">\n    <div class="row">\n      <div class="col-1">\n        <div class="icon icon-3x icon-warning"></div>\n      </div>\n      <div class="col-11 alert-text">\n                     This is a generic placeholder for error messages in eSAT. <br>\n                     In the live app, this will be a real message and will be hidden by default.\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Hidden Alert Message -->\n\n	<div class="row row-spaced">\n		<div class="col-12">Use this to edit your help page and give your customers access to important information.</div>\n	</div>\n\n	<form id="create-edit-form" class="row row-spaced panel form-section">\n		<div class="row row-spaced">\n			<div class="col-12">\n				<div class="col-6">\n					<div class="label">Display this question<i title="Would you like to show this question? If so, leave this turned on." class="icon icon-tool-tip x-space-s"></i></div>\n					<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\n			        <label for="f-active" class="on-off-switch-label">\n			            <div class="on-off-switch-state">on</div>\n			        </label>\n				</div>		\n			</div>\n		</div>\n		<div class="row row-spaced">\n			<div class="col-12">\n				<div class="col-6 form-section">\n					<label for="f-question">Question</label><i title ="What question would you like to display?" class="icon icon-tool-tip x-space-s"></i>\n					<textarea name="f-question" id="f-question" class="size-2">'+(null==(__t=question)?"":__t)+'</textarea>\n				</div>\n				<div class="col-6 form-section">\n					<label for="f-question-section">Help Section</label><i title ="Which section would you like this filed under?" class="icon icon-tool-tip x-space-s"></i>\n					<div class="select-container">\n						<select name="f-question-section" id="f-question-section">\n							<option selected disabled hidden value="'+(null==(__t=category)?"":__t)+'">'+(null==(__t=category)?"":__t)+'</option>\n							<option value="Company Policy Info">Company Policy Info</option>\n							<option value="Ordering and Return Policy Info">Ordering and Return Policy Info</option>\n							<option value="Security and Privacy Policy Info">Security and Privacy Policy Info</option>\n						</select>\n					</div>\n				</div>\n			</div>\n		</div>\n\n		<div class="row row-spaced">\n			<div class="col-12">\n				<div class="col-12 form-section">\n					<label for="f-answer">Answer</label><i title="Put the answer to the question here." class="icon icon-tool-tip x-space-s"></i>\n					<textarea name="f-answer" id="f-answer" class="tinymce">'+(null==(__t=answer)?"":__t)+"</textarea>\n				</div>\n			</div>\n		</div>\n	</form>\n</div>";return __p}}),define("content/category-sections/content-management/help/views/create-edit-help-view",["backbone","../templates/create-edit-help-tpl","../collections/company-policy-collection","../collections/orders-returns-policy-collection","../collections/security-privacy-policy-collection","tinymce","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.applyToolTips(),this.cacheElem(),this.delegateEvents(),this.validateForm(),this.applyTinymce(),this},events:{"click #cancel-btn":"handleCancelBtnClick","change #f-question-section":"handleSectionChange","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$createEditForm=this.$el.find("#create-edit-form"),this.$question=this.$el.find("#f-question"),this.$active=this.$el.find("#f-active"),this.$questionSection=this.$el.find("#f-question-section"),this.$tip=this.$el.find(".tooltip-change")},handleCancelBtnClick:function(){a.trigger("form:cancel",this.parent.showHome.bind(this.parent))},isMCEValid:function(){var e=this;return e.$el.find(".tinymce.error").is("*")?!1:!0},handleSaveBtnClick:function(){var e=this.$questionSection.find("option:selected").val();if(r.triggerSave(),this.$createEditForm.valid()&&this.isMCEValid()){if(this.model.set({question:this.$question.val().trim(),active:this.$active.is(":checked"),answer:r.activeEditor.getContent(),category:e}),this.model.get("id")||(this.model.set("id",(new Date).getTime()),this.collection.add(this.model)),e!==this.collection.category)switch(this.collection.remove(this.model),this.model.set("sequence",null),e){case"Company Policy Info":n.add(this.model);break;case"Ordering and Return Policy Info":i.add(this.model);break;case"Security and Privacy Policy Info":o.add(this.model)}a.trigger("form:save",this.$tip),this.parent.showHome()}else a.trigger("form:invalid",this.$tip)},applyTinymce:function(){var e=this;setTimeout(function(){r.remove(),r.init({setup:function(t){t.on("change",function(){a.trigger("form:editing"),r.triggerSave(),e.$el.find($("#"+t.id)).valid()}),t.on("blur",function(){a.trigger("form:editing"),r.triggerSave(),e.$el.find($("#"+t.id)).valid()})},selector:"textarea#f-answer",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1,onchange_callback:function(){}})},0)},validateForm:function(){var e=this;e.$createEditForm.validate({rules:{"f-question":{required:!0,maxlength:500}},ignore:""})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{"f-question":"required","f-answer":{required:!0,maxlength:500}}}),$.validator.setDefaults({ignore:""})}});return new s}),define("content/category-sections/content-management/help/views/help-view",["backbone","./help-home-view","./create-edit-help-view","jqueryui"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){e&&this.regions.visible!==e&&(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e,t){n.model=t,n.collection=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/content-management/modal-management/templates/modal-management-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title">\r\n      <h2 class="pull-left">Modal Management</h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="save-btn" class="btn btn-submit">Save Changes</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n        <button type="button" id="new-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i>Add new modal</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n		This is a generic placeholder for error messages in eSAT. <br>\r\n		In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this tool to manage holiday closures for your website. Select the dates when your shop will be closed or will not accept delivery requests on your website. These dates will not appear as available delivery dates, but your website will still be able to accept orders for other days. \r\n	</div>\r\n</div>\r\n\r\n<!-- Start of Section table -->\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Existing Modals</div>\r\n		</div>\r\n	</div>\r\n	<div class="row">\r\n		<div class="col-12 y-space-top-m">\r\n			<table id="modal-table"class="table alternate">\r\n				<thead>\r\n				<tr>\r\n				<th class="col-3 left-align">Modal Name <button data-attribute="name" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n				<th class="col-2 left-align">Start Date <button data-attribute="startDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n				<th class="col-2 left-align">End Date</th>\r\n				<th class="col-1">Type</th>\r\n				<th class="col-1">Status</th>\r\n				<th class="col-1">Edit</th>\r\n				<th class="col-1">Delete</th>\r\n				</tr>\r\n				</thead>\r\n				<tbody id="section-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- End of Section Table -->';return __p}}),define("content/category-sections/content-management/modal-management/models/modal-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-modal-management.json",defaults:{id:null,name:"",startDate:"",endDate:"",type:"Custom",size:"",modalWidth:"",modalHeight:"",modalContent:"",modalShowsOn:"",customSize:!1,status:!0,category:[],product:[],specificUrl:""}});return t}),define("content/category-sections/content-management/modal-management/collections/modal-collection",["backbone","../models/modal-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-modal-management.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("name")?-1:n.get("name")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("name")?-1:n.get("name")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/content-management/modal-management/templates/create-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n    <div class="col-12">\r\n        <div class="section-title clearfix">\r\n            <h2 class="pull-left">\r\n                '+(null==(__t=id?"Edit":"Create")?"":__t)+' Modal\r\n            </h2>\r\n            <div class="btn-panel">\r\n                ',"Teleflora"!==type&&(__p+='\r\n                    <button id="delete-btn" type="button" class="btn btn-cancel">Delete</button>\r\n                '),__p+='\r\n                <button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n                <button id="save-btn" type="button" class="btn btn-submit">',id||(__p+='<i class="icon icon-add"></i>'),__p+='Save</button>\r\n                <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n    <div class="col-12">\r\n        <div class="row">\r\n            <div class="col-1">\r\n                <div class="icon icon-3x icon-warning"></div>\r\n            </div>\r\n            <div class="col-11 alert-text">\r\n                This is a generic placeholder for error messages in eSAT. <br>\r\n                In the live app, this will be a real message and will be hidden by default.\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel row-spaced alert-panel hidden-alt" id="min-cat-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        This modal must be associated with at least 1 category. <br>\r\n        Please select at least 1 category below before saving.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row panel row-spaced alert-panel hidden-alt" id="min-prod-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        This modal must be associated with at least 1 product. <br>\r\n        Please select at least 1 product below before saving.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n    <div class="col-12">\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Modal Info\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced y-space-top-m">\r\n            <div class="col-5 form-section">\r\n                <label for="f-modal-name">Modal Name</label>\r\n                <input type="text" id="f-modal-name" name="f-modal-name" value="'+(null==(__t=name)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n            </div> \r\n            <div class="col-2 form-section">\r\n                <div class="label">Active</div>\r\n                <input '+(null==(__t=status?"checked":"")?"":__t)+' type="checkbox" id="f-status" name="f-status" class="on-off-switch" />\r\n                <label for="f-status" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n            <div class="col-2 form-section">\r\n                <label for="f-type">Type</label>\r\n                <input type="text" id="f-type" name="f-type" value="'+(null==(__t=type)?"":__t)+'" disabled>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n            <div class="col-3 date-container form-section f-startDate">\r\n                <div class="label">Start Date</div>\r\n                <input type="text" id="f-startDate" name="f-startDate" class="f-startDate" value="'+(null==(__t=startDate)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+' >\r\n            </div>\r\n            <div class="col-3 date-container form-section f-endDate">\r\n                <div class="label">End Date</div>\r\n                <input type="text" id="f-endDate" name="f-endDate" class="f-endDate" value="'+(null==(__t=endDate)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n            </div>  \r\n            <div class="col-3 form-section">\r\n                <label for="f-size">Modal Size</label>\r\n                <div class="select-container">\r\n                    <select id="f-size" name="f-size" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n                        <option selected disabled hidden value="'+(null==(__t=size)?"":__t)+'">'+(null==(__t=size)?"":__t)+'</option>\r\n                        <option value="Small">Small</option>\r\n                        <option value="Medium">Medium</option>\r\n                        <option value="Large">Large</option>\r\n                        <option value="Custom">Custom</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div id="customSizeContainer">\r\n                <div class="col-1 form-section customsizewidth">\r\n                    <label for="f-modalWidth">Width</label>\r\n                    <input type="text" id="f-modalWidth" name="f-modalWidth" value="'+(null==(__t=modalWidth)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n                </div>\r\n                <div class="col-1 form-section customsizewidth">\r\n                    <label for="f-modalHeight">Height</label>\r\n                    <input type="text" id="f-modalHeight" name="f-modalHeight" value="'+(null==(__t=modalHeight)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="tiny-mce-container" class="row row-spaced panel">\r\n    <div class="col-12">\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                Modal Content<i class="icon icon-tool-tip x-space-s" title="Put your content here and use the tools below to edit and style the content to your liking."></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-12 form-section">\r\n                <textarea id="f-modalContent" class="size-2 tinymce y-space-s" name="f-modalContent">'+(null==(__t=modalContent)?"":__t)+'</textarea>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section panel">\r\n    <div class="col-12">\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Modal Display\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n            <div class="col-5">\r\n                <label for="f-modalShowsOn">Modal Shows On:</label>\r\n                <div class="select-container">\r\n                    <select id="f-modalShowsOn" name="f-modalShowsOn" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n                        <option selected disabled hidden value="'+(null==(__t=modalShowsOn)?"":__t)+'">'+(null==(__t=modalShowsOn)?"":__t)+'</option>\r\n                        <option id="homePage" value="HomePage">Home Page</option>\r\n                        <option id="categoryPage" value="CategoryPage">Category Page</option>\r\n                        <option id="productPage" value="ProductPage">Product Page</option>\r\n                        <option id="basketPage" value="BasketPage">Basket Page</option>\r\n                        <option id="checkoutDeliveryPage" value="CheckoutDeliveryPage">Checkout Delivery Page</option>\r\n                        <option id="checkoutBillingPage" value="CheckoutBillingPage">Checkout Billing Page</option>\r\n                        <option id="orderConfirmationPage" value="OrderConfirmationPage">Order Confirmation Page</option>\r\n                        <option id="specificPageURL" value="SpecificPageURL">Specific Page URL</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced form-section" id="category-banner" style="display:none;">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Category Page\r\n                </div>\r\n            </div>\r\n            <div class="col-12">\r\n                <div id="f-category-table"></div>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced form-section" id="product-banner" style="display:none;">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Product Page\r\n                </div>\r\n            </div>\r\n            <div class="col-12">\r\n                <div id="f-product-table"></div>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced form-section" id="specific-url-banner" style="display:none;">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Specific URL Link:\r\n                </div>\r\n            </div>\r\n            <div class=\'col-4 y-space-s\'>\r\n                <input type="text" id="f-specificUrl" name="f-specificUrl" value="'+(null==(__t=specificUrl)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>";
return __p}}),define("content/category-sections/content-management/modal-management/views/create-edit-view",["backbone","../templates/create-edit-view-tpl","../models/modal-model","../collections/modal-collection","components/featured-occasions/collections/all-occasions-collection","components/featured-product/collections/featured-product-collection","components/featured-product/views/featured-product-view","components/general-product/views/general-product-view","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c){var d=e.View.extend({tagName:"form",id:"m-create-edit",template:t,initialize:function(){},render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template(e.model.toJSON())),e.delegateEvents(),e.cacheElem(),e.homeProductView=new a({collection:new r(e.model.get("product")),title:"Selected Products",selectAll:!0,maxNumberProducts:3}),e.$productTable.append(e.homeProductView.render().el),o.fetchCustom().done(function(){e.categoryCollection=o.deepClone(),e.categoryCollection.set(e.model.get("category").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.catSelect=new s({activeTitle:"Selected Categories",activeTableTitle:"Selected Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",selectAll:!1,nosearch:!1,async:!1,hoverTitle:!0,collection:e.categoryCollection,hideGrids:!0,showCategoryID:!0}),e.$categoryTable.html(e.catSelect.render().el)}.bind(this)),e.applyDates(),"Teleflora"===e.model.get("type")?e.applyTinymceTeleflora():e.applyTinymce(),e.applyToolTips(),e.modalSizeContainer(),e.handleDropDownChange(),e.validateForm()}.bind(this)),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #delete-btn":"handleDelete","change #f-size":"modalSizeContainer","change #f-modalShowsOn":"handleDropDownChange"},cacheElem:function(){this.$modalName=this.$el.find("#f-modal-name"),this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate"),this.$modalContent=this.$el.find("#f-modalContent"),this.$specificUrl=this.$el.find("#f-specificUrl"),this.$status=this.$el.find("#f-status"),this.$modalSize=this.$el.find("#f-size"),this.$customSizeContainer=this.$el.find("#customSizeContainer"),this.$modalWidth=this.$el.find("#f-modalWidth"),this.$modalHeight=this.$el.find("#f-modalHeight"),this.$modalShowsOn=this.$el.find("#f-modalShowsOn"),this.$homepageTable=this.$el.find("#f-homepage-table"),this.$categoryTable=this.$el.find("#f-category-table"),this.$productTable=this.$el.find("#f-product-table"),this.$basketTable=this.$el.find("#f-basket-table"),this.$checkoutDeliveryTable=this.$el.find("#f-checkout-delivery-table"),this.$checkoutBillingTable=this.$el.find("#f-checkout-billing-table"),this.$orderConfirmationTable=this.$el.find("#f-order-confirmation-table"),this.$specificURLTable=this.$el.find("#f-specific-url-table"),this.$homePage=this.$el.find("#homePage"),this.$categoryPage=this.$el.find("#categoryPage"),this.$productPage=this.$el.find("#productPage"),this.$basketPage=this.$el.find("#basketPage"),this.$checkoutDeliveryPage=this.$el.find("#checkoutDeliveryPage"),this.$checkoutBillingPage=this.$el.find("#checkoutBillingPage"),this.$orderConfirmationPage=this.$el.find("#orderConfirmationPage"),this.$specificPageURL=this.$el.find("#specificPageURL"),this.$homepageBanner=this.$el.find("#homepage-banner"),this.$categoryBanner=this.$el.find("#category-banner"),this.$productBanner=this.$el.find("#product-banner"),this.$basketBanner=this.$el.find("#basket-banner"),this.$checkoutDeliveryBanner=this.$el.find("#checkout-delivery-banner"),this.$checkoutBillingBanner=this.$el.find("#checkout-billing-banner"),this.$orderConfirmationBanner=this.$el.find("#order-confirmation-banner"),this.$specificURLBanner=this.$el.find("#specific-url-banner"),this.$tip=this.$el.find(".tooltip-change"),this.$minCatError=this.$el.find("#min-cat-error"),this.$minProdError=this.$el.find("#min-prod-error")},handleDropDownChange:function(){var e=this;e.$homepageBanner.css({display:"none"}),e.$categoryBanner.css({display:"none"}),e.$productBanner.css({display:"none"}),e.$basketBanner.css({display:"none"}),e.$checkoutDeliveryBanner.css({display:"none"}),e.$checkoutBillingBanner.css({display:"none"}),e.$orderConfirmationBanner.css({display:"none"}),e.$specificURLBanner.css({display:"none"}),e.$homePage.is("option:selected")?e.$homepageBanner.css({display:"block"}):e.$categoryPage.is("option:selected")?e.$categoryBanner.css({display:"block"}):e.$productPage.is("option:selected")?e.$productBanner.css({display:"block"}):e.$basketPage.is("option:selected")?e.$basketBanner.css({display:"block"}):e.$checkoutDeliveryPage.is("option:selected")?e.$checkoutDeliveryBanner.css({display:"block"}):e.$checkoutBillingPage.is("option:selected")?e.$checkoutBillingBanner.css({display:"block"}):e.$orderConfirmationPage.is("option:selected")?e.$orderConfirmationBanner.css({display:"block"}):e.$specificPageURL.is("option:selected")&&e.$specificURLBanner.css({display:"block"})},modalSizeContainer:function(){var e=this;e.$customSizeContainer.css("Custom"===e.$modalSize.find("option:selected").val()?{display:"block"}:{display:"none"})},handleDelete:function(){var e=this;l.trigger("form:delete",function(){i.remove(e.model),e.parent.showparenthome()})},validateForm:function(){var e,t=this;this.$el.validate({rules:{"f-modal-name":"required","f-modalContent":"required","f-size":"required","f-startDate":"required","f-endDate":"required","f-modalShowsOn":"required","f-modalWidth":{required:function(){return e=t.$modalSize.find("option:selected").val(),"Custom"==e},digits:!0},"f-specificUrl":{url3:!0},"f-modalHeight":{required:function(){return e=t.$modalSize.find("option:selected").val(),"Custom"==e},digits:!0}}})},showMinCatError:function(){var e=this;l.trigger("form:invalid",this.$tip),this.$minCatError.fadeIn(200),setTimeout(function(){e.$minCatError.fadeOut(200)},15e3)},showMinProdError:function(){var e=this;l.trigger("form:invalid",this.$tip),this.$minProdError.fadeIn(200),setTimeout(function(){e.$minProdError.fadeOut(200)},15e3)},minCatSelected:function(e){var t,n=this,i={};return i[n.catSelect.activeAttribute]=!0,t=n.catSelect.collection.where(i).length,t>=e?!0:!1},minProdSelected:function(e){var t=this.homeProductView.collection.where({featured:!0}).length;return t>=e?!0:!1},handleSave:function(){var e=this,t=e.$modalShowsOn.find("option:selected").val();if("CategoryPage"==t){if(!e.minCatSelected(1))return e.showMinCatError(),!1}else if("ProductPage"==t&&!e.minProdSelected(1))return e.showMinProdError(),!1;this.$el.valid()?(this.model.set({name:this.$modalName.val().trim(),status:this.$status.is(":checked"),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),size:this.$modalSize.find("option:selected").val(),modalWidth:this.$modalWidth.val().trim(),modalHeight:this.$modalHeight.val().trim(),modalContent:c.activeEditor.getContent(),modalShowsOn:this.$modalShowsOn.val(),specificUrl:this.$specificUrl.val().trim(),product:e.homeProductView.collection.toJSON(),category:e.categoryCollection.toJSON()}),i.get(this.model)||(this.model.set("id",Date.now()),i.add(this.model)),l.trigger("form:save",this.$tip),e.parent.showparenthome()):l.trigger("form:invalid",this.$tip)},handleCancel:function(){l.trigger("form:cancel",function(){this.parent.showparenthome()}.bind(this))},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},onClose:function(){$("#ui-datepicker-div")},dateFormat:"mm/dd/yy"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},onClose:function(){$("#ui-datepicker-div")},dateFormat:"mm/dd/yy"})},applyTinymce:function(){setTimeout(function(){c.remove(),c.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;l.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Custom HTML"})}}),e.on("change",function(){l.trigger("form:editing")})},selector:"textarea.tinymce",height:200,toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyTinymceTeleflora:function(){setTimeout(function(){c.remove(),c.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;l.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Custom HTML"})}}),e.on("change",function(){l.trigger("form:editing")})},selector:"textarea.tinymce",readonly:!0,height:200,toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new d}),define("content/category-sections/content-management/modal-management/templates/modal-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td class="left-align">'+(null==(__t=name)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=startDate)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=endDate)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=type)?"":__t)+"</td>\r\n	<td>\r\n		<input "+(null==(__t=status?"checked":"")?"":__t)+' type="checkbox"  id="'+(null==(__t=id)?"":__t)+'"  data-id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch"/>\r\n		<label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label left-offset-l"><div class="on-off-switch-state">on</div></label>\r\n    </td>\r\n	<td>\r\n		',__p+="Custom"===type?'\r\n		<button type="button" class="icon icon-btn icon-edit icon-2x"></button>\r\n		':'\r\n		<button type="button" class="icon icon-btn icon-search icon-2x"></button>\r\n		',__p+="\r\n	</td>\r\n	<td>","Custom"===type&&(__p+='<button type="button" class="icon icon-btn icon-trash icon-2x"></button>'),__p+="</td>\r\n</tr>";return __p}}),define("content/category-sections/content-management/modal-management/views/modal-view",["backbone","../templates/modal-view-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent},render:function(){var e=this;return this.setElement(this.template(this.model.toJSON())),e.listenTo(e.collection,"remove",function(t){t===e.model&&e.$el.fadeOut(200,function(){e.remove()})}),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","click .icon-search":"handleEdit"},handleDelete:function(){n.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleEdit:function(){n.trigger("form:cancel",function(){this.parent.handleEdit(this.model.get("id"))}.bind(this))}});return i}),define("content/category-sections/content-management/modal-management/views/modal-management-home-view",["backbone","../templates/modal-management-home-view-tpl","../models/modal-model","../collections/modal-collection","./create-edit-view","./modal-view","global-events"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"div",id:"f-modal-management-page",template:t,initialize:function(){o.parent=this,r.parent=this},render:function(){return i.fetchCustom().done(function(){this.$el.html(this.template),this.delegateEvents(),this.cacheElem(),this.collection=i.deepClone(),this.dataTable&&this.dataTable.destroy(),this.addAllModals(),this.applyDataTables(),this.applyToolTips()}.bind(this)),this},events:{"click #new-btn":"handleAdd","click #save-btn":"handleActiveSave","change #section-list":"handleChange","click .sort-btn":"handleSort"},cacheElem:function(){this.$sectionList=this.$el.find("#section-list"),this.$modalTable=this.$el.find("#modal-table"),this.$tip=this.$el.find(".tooltip-change"),this.$sortButtons=this.$el.find(".sort-btn")},handleSaveEach:function(e){{var t=this,n=e.get("id"),i=t.$el.find('input[data-id="'+n+'"]');i.attr("data-id")}e.set({status:i.is(":checked")})},handleActiveSave:function(){var e=this;i.each(e.handleSaveEach,this),a.trigger("form:save",this.$tip)},handleChange:function(){a.trigger("form:editing")},handleEdit:function(e){var t=void 0!==e?i.get(e):new n;this.parent.showCreateEdit(t)},handleAdd:function(){this.handleEdit()},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()},addModal:function(e){var t=new r({model:e,collection:this.collection,parent:this});this.$sectionList.append(t.render().el)},addAllModals:function(){this.$sectionList.empty(),this.collection.each(this.addModal,this)},applyDataTables:function(){this.dataTable=this.$modalTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!0,processing:!1,searching:!1,serverSide:!1,stateSave:!1,bDestroy:!0,info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},showparenthome:function(){this.parent.showHome()}});return new s}),define("content/category-sections/content-management/modal-management/views/modal-management-view",["backbone","./modal-management-home-view","./create-edit-view"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;n.model=e,t.replaceVisible(n)}});return new i}),define("text!content/category-sections/content-management/custom-html-pages/templates/custom-html-pages-home-tpl.html",[],function(){return'<div id="custom-html-pages">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Custom HTML Pages</h2>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			It\'s always a good idea to add custom content to your website. Use this page to help you with the HTML.\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<button id="add-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Page</button>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-3 left-align indented-l">Page Name <button type="button" data-attribute="pageName" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-5 left-align indented-l">Page URL <button type="button" data-attribute="pageUrl" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n\r\n						<th class="col-2">Edit</th>\r\n						<th class="col-2">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="page-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>'}),define("content/category-sections/content-management/custom-html-pages/models/custom-html-page-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,pageName:"",pageUrl:"",active:!0,metaDesc:"",pageTitle:"",metaKeywords:"",metaTags:"",wrapper:!0,pageMainContent:"",startDate:"",endDate:""}});return t}),define("content/category-sections/content-management/custom-html-pages/collections/custom-html-page-collection",["backbone","../models/custom-html-page-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-custom-html-pages.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/content-management/custom-html-pages/templates/page-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=pageName)?"":__t)+'</td>\r\n	<td class="left-align indented-l">/'+(null==(__t=pageUrl)?"":__t)+'</td>\r\n	<td><button class="icon icon-btn icon-2x icon-edit"></button></td>\r\n	<td><button class="icon icon-btn icon-2x icon-trash"></button></td>\r\n</tr>\r\n';return __p}}),define("content/category-sections/content-management/custom-html-pages/views/page-view",["backbone","../templates/page-tpl","../collections/custom-html-page-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent},render:function(){var e=this;return e.setElement(e.template(e.model.toJSON())),e.listenTo(n,"remove",function(t){t===e.model&&e.$el.fadeOut(200,function(){e.remove()})}),e},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return o}),define("content/category-sections/content-management/custom-html-pages/views/custom-html-pages-home-view",["backbone","text!../templates/custom-html-pages-home-tpl.html","../models/custom-html-page-model","../collections/custom-html-page-collection","./page-view"],function(e,t,n,i,o){var r=e.View.extend({template:t,initialize:function(){this.setElement(this.template),this.cacheElem(),this.listenTo(i,"sort",this.addAllCustomHtmlPages)},render:function(){var e=this;return i.fetchCustom().done(function(){e.cacheElem(),e.addAllCustomHtmlPages()}),e.delegateEvents(),e},events:{"click #add-btn":"handleNewBtn","click .sort-btn":"handleSort"},cacheElem:function(){this.$pageList=this.$el.find("#page-list"),this.$sortButtons=this.$el.find(".sort-btn")},handleNewBtn:function(){this.parent.showCreateEdit(new n)},handleEdit:function(e){this.parent.showCreateEdit(e)},addCustomHtmlPage:function(e){var t=new o({model:e,parent:this});this.$pageList.append(t.render().el)},addAllCustomHtmlPages:function(){this.$pageList.empty(),i.each(this.addCustomHtmlPage,this)},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()}});return new r}),define("content/category-sections/content-management/custom-html-pages/templates/create-edit-custom-html-page-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Create ")?"":__t)+'Custom HTML Page</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" type="button" class="btn btn-submit"><i class="icon icon-add"></i>Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Fill out the form below to build your custom content page. No HTML tags required!\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-6 form-section">\r\n			<label for="f-page-name">Page Name</label><i class="icon icon-tool-tip x-space-s" title="Use this to name your page as something you will remember like \'design classes.\' Your customers will not see this name on the page, it\'s for your eyes only."></i>\r\n			<input type="text" id="f-page-name" name="f-page-name" value="'+(null==(__t=pageName)?"":__t)+'">\r\n		</div>\r\n\r\n		<div class="col-6">\r\n			<div class="pull-right">\r\n			<div class="label">Active</div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n			<label for="f-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3 form-section">\r\n			<label for="f-page-url">Page URL</label><i class="icon icon-tool-tip x-space-s" title="How are people going to find this page? The URL is like an address and should look something like this: www.yourwebsite.com/designclasses.asp"></i>\r\n			<input type="text" id="f-page-url" name="f-page-url" value="'+(null==(__t=pageUrl)?"":__t)+'">\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<div class="label">Use Site Wrapper<i class="icon icon-tool-tip x-space-s" title="If you turn off the site wrapper, this page will not have the same header and footer as the rest of your site. It will appear to be more of a standalone page."></i></div>\r\n			<input '+(null==(__t=wrapper?"checked":"")?"":__t)+' type="checkbox" id="f-wrapper" name="f-wrapper" class="on-off-switch" />\r\n			<label for="f-wrapper" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>		\r\n		<div class="col-3 form-section">\r\n			<label for="f-start-date">Start Date</label><i title="When should this page begin showing live on your website?" class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n				<input type="text" id="f-start-date" name="f-start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<label for="f-end-date">End Date</label><i title="What should this page stop showing live on your website?" class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n				<input type="text" id="f-end-date" name="f-end-date" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-page-title">Page Title</label><i title="This will show up at the top of the window while the customer is on the page. We like something like \'Flower Design Classes | XYZ Flower Shop\'" class="icon icon-tool-tip x-space-s"></i>\r\n			<input type="text" id="f-page-title" name="f-page-title" value="'+(null==(__t=pageTitle)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-meta-desc">Meta Description</label><i title ="If a customer is coming from a search engine, this is the first thing they will see about your page. Use this to let them know one or two sentences about your page." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea name="f-meta-desc" id="f-meta-desc" class="size-2">'+(null==(__t=metaDesc)?"":__t)+'</textarea>	\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-meta-keywords">Meta Keywords</label><i title ="Use this to input a few words that describe your page like floral education or floral design. Don\'t use more than 3 or 4 keywords, since more can hurt your search ranking." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea name="f-meta-keywords" id="f-meta-keywords" class="size-2">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>	\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12 form-section">\r\n			<label for="f-meta-tags">Additional Meta Tags</label><i class="icon icon-tool-tip x-space-s" title="Need to include some extra HTML tags on this page? You can place those here."></i>\r\n			<textarea id="f-meta-tags" class="size-2" name="f-meta-tags">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div id="tiny-mce-container" class="row row-spaced panel form-section">\r\n	<div class="row">\r\n	<div class="col-12">\r\n		<label for="f-page-main-content">Page Main Content</label><i class="icon icon-tool-tip x-space-s" title="Put your content here and use the tools below to edit and style the content to your liking."></i>\r\n		<textarea id="f-page-main-content" class="size-4 tinymce y-space-s" name="f-page-main-content">'+(null==(__t=pageMainContent)?"":__t)+"</textarea>\r\n	</div>\r\n	</div>\r\n</div>";return __p}}),define("content/category-sections/content-management/custom-html-pages/views/create-edit-custom-html-page-view",["backbone","../templates/create-edit-custom-html-page-tpl","../collections/custom-html-page-collection","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({tagName:"form",id:"create-edit-custom-html-pages",template:t,render:function(){return this.$el.html(this.template(this.model.toJSON())),this.cacheElem(),this.applyTinymce(),this.validateForm(),this.applyToolTips(),this.delegateEvents(),this.applyDates(),this},cacheElem:function(){this.$startDate=this.$el.find("#f-start-date"),this.$endDate=this.$el.find("#f-end-date"),this.$pageName=this.$el.find("#f-page-name"),this.$pageUrl=this.$el.find("#f-page-url"),this.$active=this.$el.find("#f-active"),this.$pageTitle=this.$el.find("#f-page-title"),this.$metaDesc=this.$el.find("#f-meta-desc"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$pageMainContent=this.$el.find("#f-page-main-content"),this.$tip=this.$el.find(".tooltip-change"),this.$wrapper=this.$el.find("#f-wrapper")},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave"},handleCancel:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSave:function(){$("#tiny-mce-container").removeClass("error"),this.$el.valid()&&this.validateTinymce()?(this.model.set({startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),pageName:this.$pageName.val().trim(),pageUrl:this.$pageUrl.val().trim(),active:this.$active.is(":checked"),wrapper:this.$wrapper.is(":checked"),metaDesc:this.$metaDesc.val().trim(),pageTitle:this.$pageTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaTags:this.$metaTags.val().trim(),pageMainContent:o.activeEditor.getContent()}),n.get(this.model)||(this.model.set("id",new Date),n.add(this.model)),this.parent.showHome(),i.trigger("form:save",this.$tip)):i.trigger("form:invalid",this.$tip)},handleImageUpload:function(){var e;i.trigger("form:image-upload",{cb:function(t){e=t,newImg='<img src="'+e+'">',editor.selection.setContent(newImg)},active:e,name:"Custom HTML"})},applyTinymce:function(){setTimeout(function(){o.remove(),o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Custom HTML"})}}),e.on("change",function(){i.trigger("form:editing")})},selector:"textarea.tinymce",height:700,toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},validateForm:function(){var e=this;setTimeout(function(){e.$el.validate({rules:{"f-start-date":"dateCustom","f-end-date":"dateCustom","f-page-name":"required","f-page-url":{required:!0,url3:!0},"f-name":"required","f-page-title":"noCarets","f-meta-keywords":"noCarets","f-meta-desc":"noCarets"}})},0)},validateTinymce:function(){return o.activeEditor.getContent()?!0:($("#tiny-mce-container").addClass("error").append('<label id="f-page-main-content-error" class="error" for="f-page-main-content">This field is required.</label>'),!1)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})}});return new r}),define("content/category-sections/content-management/custom-html-pages/views/custom-html-pages-view",["backbone","./custom-html-pages-home-view","./create-edit-custom-html-page-view","jqueryui"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){e&&this.regions.visible!==e&&(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("text!content/category-sections/content-management/custom-forms/templates/forms-home-tpl.html",[],function(){return'<div id="custom-html-pages">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Custom Forms</h2>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			It\'s always a good idea to add custom forms to your website. Use this section to create a form that your customers can submit to an email address at your shop.\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Hidden Alert Message -->\r\n	<div class="row row-spaced panel alert-panel">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					This is a generic placeholder for error messages in eSAT. <br>\r\n					In the live app, this will be a real message and will be hidden by default.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<!-- Hidden Alert Message -->\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<button id="add-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Form</button>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-5 left-align indented-l">Form Name <button type="button" data-attribute="formName" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-5 left-align indented-l">Form URL <button type="button" data-attribute="formUrl" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n\r\n						<th class="col-1">Edit</th>\r\n						<th class="col-1">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="form-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>'
}),define("content/category-sections/content-management/custom-forms/models/form-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,formName:"",formUrl:"",formEmail:"",pageHeader:"",active:!0,captcha:!0,metaDesc:"",pageTitle:"",metaKeywords:"",metaTags:"",wrapper:!0,pageMainContent:"",startDate:"",endDate:""}});return t}),define("content/category-sections/content-management/custom-forms/collections/forms-collection",["backbone","../models/form-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-custom-forms.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/content-management/custom-forms/templates/form-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=formName)?"":__t)+'</td>\r\n	<td class="left-align indented-l">/'+(null==(__t=formUrl)?"":__t)+'</td>\r\n	<td><button class="icon icon-btn icon-2x icon-edit"></button></td>\r\n	<td><button class="icon icon-btn icon-2x icon-trash"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/content-management/custom-forms/views/form-list-view",["backbone","../templates/form-list-tpl","../collections/forms-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent},render:function(){var e=this;return e.setElement(e.template(e.model.toJSON())),e.listenTo(n,"remove",function(t){t===e.model&&e.$el.fadeOut(200,function(){e.remove()})}),e},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return o}),define("content/category-sections/content-management/custom-forms/views/forms-home-view",["backbone","text!../templates/forms-home-tpl.html","../models/form-model","../collections/forms-collection","./form-list-view"],function(e,t,n,i,o){var r=e.View.extend({template:t,initialize:function(){this.setElement(this.template),this.cacheElem(),this.listenTo(i,"sort",this.addAllForms)},render:function(){var e=this;return i.fetchCustom().done(function(){e.cacheElem(),e.addAllForms()}),e.delegateEvents(),e},events:{"click #add-btn":"handleNewBtn","click .sort-btn":"handleSort"},cacheElem:function(){this.$formList=this.$el.find("#form-list"),this.$sortButtons=this.$el.find(".sort-btn")},handleNewBtn:function(){this.parent.showCreateEdit(new n)},handleEdit:function(e){this.parent.showCreateEdit(e)},addForm:function(e){var t=new o({model:e,parent:this});this.$formList.append(t.render().el)},addAllForms:function(){this.$formList.empty(),i.each(this.addForm,this)},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()}});return new r}),define("content/category-sections/content-management/custom-forms/templates/create-edit-form-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="create-edit-form-page" name="create-edit-form-page">\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Create ")?"":__t)+'Form</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" type="button" class="btn btn-submit"><i class="icon icon-add"></i>Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to make a custom form for your site. You can change all of the form\'s settings using this page. To add specific form fields, click the "edit form fields" button below.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-6 form-section">\r\n			<label for="f-form-name">Form Name</label><i class="icon icon-tool-tip x-space-s" title="Use this to name your page something you will remember like \'design classes.\' Your customers will not see this name on the page, it\'s for your eyes only."></i>\r\n			<input type="text" id="f-form-name" name="f-form-name" value="'+(null==(__t=formName)?"":__t)+'">\r\n		</div>\r\n\r\n		<div class="col-3 form-section">\r\n			<div class="label">Active</div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n			<label for="f-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<div class="label">Captcha</div>\r\n			<input '+(null==(__t=captcha?"checked":"")?"":__t)+' type="checkbox" id="f-captcha" name="f-captcha" class="on-off-switch" />\r\n			<label for="f-captcha" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>	\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-form-url">Page URL</label><i class="icon icon-tool-tip x-space-s" title="How are people going to find this page? The URL is like an address and should look something like this: www.yourwebsite.com/designclasses.asp"></i>\r\n			<input type="text" id="f-form-url" name="f-form-url" value="'+(null==(__t=formUrl)?"":__t)+'">\r\n		</div>\r\n		<div class="col-6 form-section">\r\n			<label for="f-form-email">Email Results To</label><i class="icon icon-tool-tip x-space-s" title="Form results will be emailed to the address entered here."></i>\r\n			<input type="text" id="f-form-email" name="f-form-email" value="'+(null==(__t=formEmail)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">		\r\n		<div class="col-3 form-section">\r\n			<label for="f-start-date">Start Date</label><i title="When should this page begin showing live on your website?" class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n				<input type="text" id="f-start-date" name="f-start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<label for="f-end-date">End Date</label><i title="What should this page stop showing live on your website?" class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n				<input type="text" id="f-end-date" name="f-end-date" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div id="tiny-mce-container" class="col-12 form-section">\r\n			<div class="label">Page Header  <i title="This is a custom content area which will be displayed above the form fields on this page." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<textarea id="f-page-header" name="f-page-header" id="f-page-header" class="tinymce">'+(null==(__t=pageHeader)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div id="form-builder-modal"></div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Form Fields</div>\r\n		</div>\r\n	</div>	\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<button type="button" class="btn btn-submit" id="edit-btn">Edit form fields</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Form SEO Information</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-page-title">Page &#60;title&#62;</label><i title="This will show up at the top of the window while the customer is on the page. We like something like \'Flower Design Classes | XYZ Flower Shop\'" class="icon icon-tool-tip x-space-s"></i>\r\n			<input type="text" id="f-page-title" name="f-page-title" value="'+(null==(__t=pageTitle)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-meta-desc">Meta Description</label><i title ="If a customer is coming from a search engine, this is the first thing they will see about your page. Use this to let them know one or two sentences about your page." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea name="f-meta-desc" id="f-meta-desc" class="size-2">'+(null==(__t=metaDesc)?"":__t)+'</textarea>	\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-meta-keywords">Meta Keywords</label><i title ="Use this to input a few words that describe your page like floral education or floral design. Don\'t use more than 3 or 4 keywords, since more can hurt your search ranking." class="icon icon-tool-tip x-space-s"></i>\r\n			<textarea name="f-meta-keywords" id="f-meta-keywords" class="size-2">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>	\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12 form-section">\r\n			<label for="f-meta-tags">Additional Meta Tags</label><i class="icon icon-tool-tip x-space-s" title="Need to include some extra HTML tags on this page? You can place those here."></i>\r\n			<textarea id="f-meta-tags" class="size-2" name="f-meta-tags">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n			<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n		</div>\r\n	</div>\r\n\r\n</div>\r\n\r\n</form>\r\n';return __p}}),define("content/category-sections/content-management/custom-forms/templates/edit-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="section-modal" class="form-section left-align">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="section-title clearfix">\r\n				<h2 class="pull-left">Edit Form</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n			        <button type="button" id="cancel-btn"class="btn btn-other">Cancel</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row panel alert-panel">\r\n	  <div class="col-12">\r\n	    <div class="row">\r\n	      <div class="col-1">\r\n	        <div class="icon icon-3x icon-warning"></div>\r\n	      </div>\r\n	      <div class="col-11 alert-text">\r\n	                     This is a generic placeholder for error messages in eSAT. <br>\r\n	                     In the live app, this will be a real message and will be hidden by default.\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n	</div>\r\n\r\n	<div id="form-builder"></div>\r\n\r\n\r\n	<!-- Right Image Section End -->\r\n</div>';return __p}}),function(){function e(e,n,i,o){return new t(e,n,i,o)}function t(e,t,i,o){this.options=o||{},this.options.adapters=this.options.adapters||{},this.obj=e,this.keypath=t,this.callback=i,this.objectPath=[],this.parse(),n(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function n(e){return"object"==typeof e&&null!==e}function i(e){throw new Error("[sightglass] "+e)}e.adapters={},t.tokenize=function(e,t,n){var i,o,r=[],a={i:n,path:""};for(i=0;i<e.length;i++)o=e.charAt(i),~t.indexOf(o)?(r.push(a),a={i:o,path:""}):a.path+=o;return r.push(a),r},t.prototype.parse=function(){var n,o,r=this.interfaces();r.length||i("Must define at least one adapter interface."),~r.indexOf(this.keypath[0])?(n=this.keypath[0],o=this.keypath.substr(1)):("undefined"==typeof(n=this.options.root||e.root)&&i("Must define a default root adapter."),o=this.keypath),this.tokens=t.tokenize(o,r,n),this.key=this.tokens.pop()},t.prototype.realize=function(){var e,t=this.obj,i=!1;return this.tokens.forEach(function(o,r){n(t)?("undefined"!=typeof this.objectPath[r]?t!==(e=this.objectPath[r])&&(this.set(!1,o,e,this.update.bind(this)),this.set(!0,o,t,this.update.bind(this)),this.objectPath[r]=t):(this.set(!0,o,t,this.update.bind(this)),this.objectPath[r]=t),t=this.get(o,t)):(i===!1&&(i=r),(e=this.objectPath[r])&&this.set(!1,o,e,this.update.bind(this)))},this),i!==!1&&this.objectPath.splice(i),t},t.prototype.update=function(){var e,t;(e=this.realize())!==this.target&&(n(this.target)&&this.set(!1,this.key,this.target,this.callback),n(e)&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,this.value()!==t&&this.callback())},t.prototype.value=function(){return n(this.target)?this.get(this.key,this.target):void 0},t.prototype.setValue=function(e){n(this.target)&&this.adapter(this.key).set(this.target,this.key.path,e)},t.prototype.get=function(e,t){return this.adapter(e).get(t,e.path)},t.prototype.set=function(e,t,n,i){var o=e?"observe":"unobserve";this.adapter(t)[o](n,t.path,i)},t.prototype.interfaces=function(){var t=Object.keys(this.options.adapters);return Object.keys(e.adapters).forEach(function(e){~t.indexOf(e)||t.push(e)}),t},t.prototype.adapter=function(t){return this.options.adapters[t.i]||e.adapters[t.i]},t.prototype.unobserve=function(){var e;this.tokens.forEach(function(t,n){(e=this.objectPath[n])&&this.set(!1,t,e,this.update.bind(this))},this),n(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("sightglass",[],function(){return this.sightglass=e}):this.sightglass=e}.call(this),function(){var e,t,n,i,o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){return function(){return e.apply(t,arguments)}},a=[].slice,s={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e={options:["prefix","templateDelimiters","rootInterface","preloadData","handler"],extensions:["binders","formatters","components","adapters"],"public":{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,n){return this.call(e,t,n.view.models)},configure:function(t){var n,i,o,r;null==t&&(t={});for(o in t)if(r=t[o],"binders"===o||"components"===o||"formatters"===o||"adapters"===o)for(i in r)n=r[i],e[o][i]=n;else e["public"][o]=r},bind:function(t,n,i){var o;return null==n&&(n={}),null==i&&(i={}),o=new e.View(t,n,i),o.bind(),o}}},"jQuery"in window?(i="on"in jQuery.prototype?["on","off"]:["bind","unbind"],t=i[0],n=i[1],e.Util={bindEvent:function(e,n,i){return jQuery(e)[t](n,i)},unbindEvent:function(e,t,i){return jQuery(e)[n](t,i)},getInputValue:function(e){var t;return t=jQuery(e),"checkbox"===t.attr("type")?t.is(":checked"):t.val()}}):e.Util={bindEvent:function(){return"addEventListener"in window?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)}}(),unbindEvent:function(){return"removeEventListener"in window?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)}}(),getInputValue:function(e){var t,n,i,o;if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){for(o=[],n=0,i=e.length;i>n;n++)t=e[n],t.selected&&o.push(t.value);return o}return e.value}},e.KeypathParser=function(){function e(){}return e.parse=function(e,t,n){var i,r,a,s,l,c;for(s=[],r={"interface":n,path:""},a=l=0,c=e.length;c>l;a=l+=1)i=e.charAt(a),o.call(t,i)>=0?(s.push(r),r={"interface":i,path:""}):r.path+=i;return s.push(r),s},e}(),e.ArgumentParser=function(){function e(){}return e.types={primitive:0,keypath:1},e.parse=function(e){var t,n,i,o;for(n=[],i=0,o=e.length;o>i;i++)t=e[i],n.push(/^'.*'$/.test(t)?{type:this.types.primitive,value:t.slice(1,-1)}:"true"===t?{type:this.types.primitive,value:!0}:"false"===t?{type:this.types.primitive,value:!1}:"null"===t?{type:this.types.primitive,value:null}:"undefined"===t?{type:this.types.primitive,value:void 0}:isNaN(Number(t))===!1?{type:this.types.primitive,value:Number(t)}:{type:this.types.keypath,value:t});return n},e}(),e.TextTemplateParser=function(){function e(){}return e.types={text:0,binding:1},e.parse=function(e,t){var n,i,o,r,a,s,l;for(s=[],r=e.length,n=0,i=0;r>i;){if(n=e.indexOf(t[0],i),0>n){s.push({type:this.types.text,value:e.slice(i)});break}if(n>0&&n>i&&s.push({type:this.types.text,value:e.slice(i,n)}),i=n+t[0].length,n=e.indexOf(t[1],i),0>n){a=e.slice(i-t[1].length),o=s[s.length-1],(null!=o?o.type:void 0)===this.types.text?o.value+=a:s.push({type:this.types.text,value:a});break}l=e.slice(i,n).trim(),s.push({type:this.types.binding,value:l}),i=n+t[1].length}return s},e}(),e.View=function(){function t(t,n,i){var o,a,s,l,c,d,u,h,p,f,v,m;for(this.els=t,this.models=n,null==i&&(i={}),this.update=r(this.update,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.select=r(this.select,this),this.build=r(this.build,this),this.componentRegExp=r(this.componentRegExp,this),this.bindingRegExp=r(this.bindingRegExp,this),this.options=r(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),p=e.extensions,c=0,u=p.length;u>c;c++){if(a=p[c],this[a]={},i[a]){f=i[a];for(o in f)s=f[o],this[a][o]=s}v=e["public"][a];for(o in v)s=v[o],null==(l=this[a])[o]&&(l[o]=s)}for(m=e.options,d=0,h=m.length;h>d;d++)a=m[d],this[a]=i[a]||e["public"][a];this.build()}return t.prototype.options=function(){var t,n,i,o,r;for(n={},r=e.extensions.concat(e.options),i=0,o=r.length;o>i;i++)t=r[i],n[t]=this[t];return n},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.componentRegExp=function(){return new RegExp("^"+this.prefix.toUpperCase()+"-")},t.prototype.build=function(){var t,n,i,r,a,s,l,c,d;for(this.bindings=[],s=[],t=this.bindingRegExp(),i=this.componentRegExp(),n=function(t){return function(n,i,o,r){var a,s,l,c,d,u,h;return d={},h=function(){var e,t,n,i;for(n=r.split("|"),i=[],e=0,t=n.length;t>e;e++)u=n[e],i.push(u.trim());return i}(),a=function(){var e,t,n,i;for(n=h.shift().split("<"),i=[],e=0,t=n.length;t>e;e++)s=n[e],i.push(s.trim());return i}(),c=a.shift(),d.formatters=h,(l=a.shift())&&(d.dependencies=l.split(/\s+/)),t.bindings.push(new e[n](t,i,o,c,d))}}(this),a=function(r){return function(l){var c,d,u,h,p,f,v,m,g,b,y,_,w,x,$,k,C,T,S,A,D,P,E,M,I,N,F,L,j,O;if(o.call(s,l)<0){if(3===l.nodeType){if(m=e.TextTemplateParser,(p=r.templateDelimiters)&&(_=m.parse(l.data,p)).length&&(1!==_.length||_[0].type!==m.types.text)){for($=0,S=_.length;S>$;$++)y=_[$],b=document.createTextNode(y.value),l.parentNode.insertBefore(b,l),1===y.type&&n("TextBinding",b,null,y.value);l.parentNode.removeChild(l)}}else if(i.test(l.tagName))w=l.tagName.replace(i,"").toLowerCase(),r.bindings.push(new e.ComponentBinding(r,l,w));else if(null!=l.attributes){for(I=l.attributes,k=0,A=I.length;A>k;k++)if(c=I[k],t.test(c.name)){if(w=c.name.replace(t,""),!(u=r.binders[w])){N=r.binders;for(f in N)x=N[f],"*"!==f&&-1!==f.indexOf("*")&&(g=new RegExp("^"+f.replace("*",".+")+"$"),g.test(w)&&(u=x))}if(u||(u=r.binders["*"]),u.block){for(F=l.childNodes,C=0,D=F.length;D>C;C++)v=F[C],s.push(v);d=[c]}}for(L=d||l.attributes,T=0,P=L.length;P>T;T++)c=L[T],t.test(c.name)&&(w=c.name.replace(t,""),n("Binding",l,w,c.value))}for(j=function(){var e,t,n,i;for(n=l.childNodes,i=[],t=0,e=n.length;e>t;t++)v=n[t],i.push(v);return i}(),O=[],M=0,E=j.length;E>M;M++)h=j[M],O.push(a(h));return O}}}(this),d=this.els,l=0,c=d.length;c>l;l++)r=d[l],a(r)},t.prototype.select=function(e){var t,n,i,o,r;for(o=this.bindings,r=[],n=0,i=o.length;i>n;n++)t=o[n],e(t)&&r.push(t);return r},t.prototype.bind=function(){var e,t,n,i,o;for(i=this.bindings,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e.bind());return o},t.prototype.unbind=function(){var e,t,n,i,o;for(i=this.bindings,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e.unbind());return o},t.prototype.sync=function(){var e,t,n,i,o;for(i=this.bindings,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e.sync());return o},t.prototype.publish=function(){var e,t,n,i,o;for(i=this.select(function(e){return e.binder.publishes}),o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e.publish());return o},t.prototype.update=function(e){var t,n,i,o,r,a,s;null==e&&(e={});for(n in e)i=e[n],this.models[n]=i;for(a=this.bindings,s=[],o=0,r=a.length;r>o;o++)t=a[o],s.push(t.update(e));return s},t}(),e.Binding=function(){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.update=r(this.update,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.set=r(this.set,this),this.eventHandler=r(this.eventHandler,this),this.formattedValue=r(this.formattedValue,this),this.observe=r(this.observe,this),this.setBinder=r(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var e,t,n,i;if(!(this.binder=this.view.binders[this.type])){i=this.view.binders;for(e in i)n=i[e],"*"!==e&&-1!==e.indexOf("*")&&(t=new RegExp("^"+e.replace("*",".+")+"$"),t.test(this.type)&&(this.binder=n,this.args=new RegExp("^"+e.replace("*","(.+)")+"$").exec(this.type),this.args.shift()))}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},t.prototype.observe=function(t,n,i){return e.sightglass(t,n,i,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.formattedValue=function(t){var n,i,o,r,s,l,c,d,u,h,p,f,v,m;for(m=this.formatters,r=h=0,f=m.length;f>h;r=++h){for(s=m[r],o=s.match(/[^\s']+|'[^']+'/g),l=o.shift(),s=this.view.formatters[l],o=e.ArgumentParser.parse(o),d=[],n=p=0,v=o.length;v>p;n=++p)i=o[n],d.push(0===i.type?i.value:((u=this.formatterObservers)[r]||(u[r]={}),(c=this.formatterObservers[r][n])?void 0:(c=this.observe(this.view.models,i.value,this.sync),this.formatterObservers[r][n]=c),c.value()));(null!=s?s.read:void 0)instanceof Function?t=s.read.apply(s,[t].concat(a.call(d))):s instanceof Function&&(t=s.apply(null,[t].concat(a.call(d))))}return t},t.prototype.eventHandler=function(e){var t,n;return n=(t=this).view.handler,function(i){return n.call(e,this,i,t)}},t.prototype.set=function(e){var t;return e=this.formattedValue(e instanceof Function&&!this.binder["function"]?e.call(this.model):e),null!=(t=this.binder.routine)?t.call(this,this.el,e):void 0},t.prototype.sync=function(){var e,t,n,i,o,r,a,s,l;if(this.model!==this.observer.target){for(a=this.dependencies,n=0,o=a.length;o>n;n++)t=a[n],t.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(s=this.options.dependencies)?s.length:void 0))for(l=this.options.dependencies,i=0,r=l.length;r>i;i++)e=l[i],t=this.observe(this.model,e,this.sync),this.dependencies.push(t)}return this.set(this.observer.value())},t.prototype.publish=function(){var t,n,i,o,r,s,l,c,d;for(o=e.Util.getInputValue(this.el),l=this.formatters.slice(0).reverse(),r=0,s=l.length;s>r;r++)n=l[r],t=n.split(/\s+/),i=t.shift(),(null!=(c=this.view.formatters[i])?c.publish:void 0)&&(o=(d=this.view.formatters[i]).publish.apply(d,[o].concat(a.call(t))));return this.observer.setValue(o)},t.prototype.bind=function(){var e,t,n,i,o,r,a;if(null!=(o=this.binder.bind)&&o.call(this,this.el),this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target,null!=this.model&&(null!=(r=this.options.dependencies)?r.length:void 0))for(a=this.options.dependencies,n=0,i=a.length;i>n;n++)e=a[n],t=this.observe(this.model,e,this.sync),this.dependencies.push(t);return this.view.preloadData?this.sync():void 0},t.prototype.unbind=function(){var e,t,n,i,o,r,a,s,l;for(null!=(a=this.binder.unbind)&&a.call(this,this.el),this.observer.unobserve(),s=this.dependencies,o=0,r=s.length;r>o;o++)i=s[o],i.unobserve();this.dependencies=[],l=this.formatterObservers;for(n in l){t=l[n];for(e in t)i=t[e],i.unobserve()}return this.formatterObservers={}},t.prototype.update=function(e){var t;return null==e&&(e={}),this.model=this.observer.target,this.unbind(),null!=(t=this.binder.update)&&t.call(this,e),this.bind()},t}(),e.ComponentBinding=function(t){function n(e,t,n){var i,a,s,l,c;for(this.view=e,this.el=t,this.type=n,this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.update=r(this.update,this),this.locals=r(this.locals,this),this.component=this.view.components[this.type],this.attributes={},this.inflections={},l=this.el.attributes||[],a=0,s=l.length;s>a;a++)i=l[a],c=i.name,o.call(this.component.attributes,c)>=0?this.attributes[i.name]=i.value:this.inflections[i.name]=i.value}return l(n,t),n.prototype.sync=function(){},n.prototype.locals=function(e){var t,n,i,o,r,a,s,l,c;null==e&&(e=this.view.models),r={},l=this.inflections;for(n in l)for(t=l[n],c=t.split("."),a=0,s=c.length;s>a;a++)o=c[a],r[n]=(r[n]||e)[o];for(n in e)i=e[n],null==r[n]&&(r[n]=i);return r},n.prototype.update=function(e){var t;return null!=(t=this.componentView)?t.update(this.locals(e)):void 0},n.prototype.bind=function(){var t,n;return null!=this.componentView?null!=(n=this.componentView)?n.bind():void 0:(t=this.component.build.call(this.attributes),(this.componentView=new e.View(t,this.locals(),this.view.options)).bind(),this.el.parentNode.replaceChild(t,this.el))},n.prototype.unbind=function(){var e;return null!=(e=this.componentView)?e.unbind():void 0},n}(e.Binding),e.TextBinding=function(e){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.sync=r(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return l(t,e),t.prototype.binder={routine:function(e,t){return e.data=null!=t?t:""}},t.prototype.sync=function(){return t.__super__.sync.apply(this,arguments)},t}(e.Binding),e["public"].binders.text=function(e,t){return null!=e.textContent?e.textContent=null!=t?t:"":e.innerText=null!=t?t:""},e["public"].binders.html=function(e,t){return e.innerHTML=null!=t?t:""},e["public"].binders.show=function(e,t){return e.style.display=t?"":"none"},e["public"].binders.hide=function(e,t){return e.style.display=t?"none":""},e["public"].binders.enabled=function(e,t){return e.disabled=!t},e["public"].binders.disabled=function(e,t){return e.disabled=!!t},e["public"].binders.checked={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)===(null!=t?t.toString():void 0):!!t}},e["public"].binders.unchecked={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)!==(null!=t?t.toString():void 0):!t}},e["public"].binders.value={publishes:!0,bind:function(t){return this.event="SELECT"===t.tagName?"change":"input",e.Util.bindEvent(t,this.event,this.publish)},unbind:function(t){return e.Util.unbindEvent(t,this.event,this.publish)},routine:function(e,t){var n,i,r,a,s,l,c;if(null!=window.jQuery){if(e=jQuery(e),(null!=t?t.toString():void 0)!==(null!=(a=e.val())?a.toString():void 0))return e.val(null!=t?t:"")}else if("select-multiple"===e.type){if(null!=t){for(c=[],i=0,r=e.length;r>i;i++)n=e[i],c.push(n.selected=(s=n.value,o.call(t,s)>=0));return c}}else if((null!=t?t.toString():void 0)!==(null!=(l=e.value)?l.toString():void 0))return e.value=null!=t?t:""}},e["public"].binders["if"]={block:!0,bind:function(e){var t,n;return null==this.marker?(t=[this.view.prefix,this.type].join("-").replace("--","-"),n=e.getAttribute(t),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),this.bound=!1,e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)):void 0},unbind:function(){var e;return null!=(e=this.nested)?e.unbind():void 0},routine:function(t,n){var i,o,r,a;if(!!n==!this.bound){if(n){r={},a=this.view.models;for(i in a)o=a[i],r[i]=o;return(this.nested||(this.nested=new e.View(t,r,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1}},update:function(e){var t;return null!=(t=this.nested)?t.update(e):void 0}},e["public"].binders.unless={block:!0,bind:function(t){return e["public"].binders["if"].bind.call(this,t)},unbind:function(){return e["public"].binders["if"].unbind.call(this)},routine:function(t,n){return e["public"].binders["if"].routine.call(this,t,!n)},update:function(t){return e["public"].binders["if"].update.call(this,t)}},e["public"].binders["on-*"]={"function":!0,unbind:function(t){return this.handler?e.Util.unbindEvent(t,this.args[0],this.handler):void 0},routine:function(t,n){return this.handler&&e.Util.unbindEvent(t,this.args[0],this.handler),e.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(n))}},e["public"].binders["each-*"]={block:!0,bind:function(e){var t,n,i,o,r;if(null==this.marker)t=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e);else for(r=this.iterated,i=0,o=r.length;o>i;i++)n=r[i],n.bind()},unbind:function(){var e,t,n,i,o;if(null!=this.iterated){for(i=this.iterated,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e.unbind());return o}},routine:function(t,n){var i,o,r,a,s,l,c,d,u,h,p,f,v,m,g,b,y,_,w,x,$;if(c=this.args[0],n=n||[],this.iterated.length>n.length)for(_=Array(this.iterated.length-n.length),f=0,g=_.length;g>f;f++)r=_[f],p=this.iterated.pop(),p.unbind(),this.marker.parentNode.removeChild(p.els[0]);for(a=v=0,b=n.length;b>v;a=++v)if(l=n[a],o={index:a},o[c]=l,null==this.iterated[a]){w=this.view.models;for(s in w)l=w[s],null==o[s]&&(o[s]=l);u=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,d=this.view.options(),d.preloadData=!0,h=t.cloneNode(!0),p=new e.View(h,o,d),p.bind(),this.iterated.push(p),this.marker.parentNode.insertBefore(h,u.nextSibling)}else this.iterated[a].models[c]!==l&&this.iterated[a].update(o);if("OPTION"===t.nodeName){for(x=this.view.bindings,$=[],m=0,y=x.length;y>m;m++)i=x[m],$.push(i.el===this.marker.parentNode&&"value"===i.type?i.sync():void 0);return $}},update:function(e){var t,n,i,o,r,a,s,l;t={};for(n in e)i=e[n],n!==this.args[0]&&(t[n]=i);for(s=this.iterated,l=[],r=0,a=s.length;a>r;r++)o=s[r],l.push(o.update(t));return l}},e["public"].binders["class-*"]=function(e,t){var n;return n=" "+e.className+" ",!t==(-1!==n.indexOf(" "+this.args[0]+" "))?e.className=t?""+e.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim():void 0
},e["public"].binders["*"]=function(e,t){return null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},e["public"].adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(e){var t;return e.hasOwnProperty(this.id)||(t=this.counter++,this.weakmap[t]={callbacks:{}},Object.defineProperty(e,this.id,{value:t})),this.weakmap[e[this.id]]},stubFunction:function(e,t){var n,i,o;return i=e[t],n=this.weakReference(e),o=this.weakmap,e[t]=function(){var t,r,a,s,l,c,d,u,h,p;s=i.apply(e,arguments),d=n.pointers;for(a in d)for(r=d[a],p=null!=(u=null!=(h=o[a])?h.callbacks[r]:void 0)?u:[],l=0,c=p.length;c>l;l++)(t=p[l])();return s}},observeMutations:function(e,t,n){var i,r,a,s,l,c;if(Array.isArray(e)){if(a=this.weakReference(e),null==a.pointers)for(a.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],l=0,c=r.length;c>l;l++)i=r[l],this.stubFunction(e,i);if(null==(s=a.pointers)[t]&&(s[t]=[]),o.call(a.pointers[t],n)<0)return a.pointers[t].push(n)}},unobserveMutations:function(e,t,n){var i,o,r;return Array.isArray(e&&null!=e[this.id])&&(o=null!=(r=this.weakReference(e).pointers)?r[t]:void 0)&&(i=o.indexOf(n),i>=0)?o.splice(i,1):void 0},observe:function(e,t,n){var i,r;return i=this.weakReference(e).callbacks,null==i[t]&&(i[t]=[],r=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return r},set:function(a){return function(s){var l,c,d;if(s!==r){for(r=s,d=i[t].slice(),l=0,c=d.length;c>l;l++)n=d[l],o.call(i[t],n)>=0&&n();return a.observeMutations(s,e[a.id],t)}}}(this)})),o.call(i[t],n)<0&&i[t].push(n),this.observeMutations(e[t],e[this.id],t)},unobserve:function(e,t,n){var i,o;return i=this.weakmap[e[this.id]].callbacks[t],o=i.indexOf(n),o>=0&&i.splice(o,1),this.unobserveMutations(e[t],e[this.id],t)},get:function(e,t){return e[t]},set:function(e,t,n){return e[t]=n}},e.factory=function(t){return e.sightglass=t,e["public"]._=e,e["public"]},"object"==typeof("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=e.factory(require("sightglass")):"function"==typeof define&&define.amd?define("rivets",["sightglass"],function(t){return this.rivets=e.factory(t)}):this.rivets=e.factory(sightglass)}.call(this),function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e){window.Backbone=window.Backbone||{},window.Backbone.DeepModel=e(".")},{".":20}],2:[function(e,t){function n(e){return e&&"object"==typeof e||!1}function i(e,t){return d(e,t,m)}function o(e,t,l,d,u){if(!s(e))return e;var h=a(t.length)&&(p(t)||v(t));return(h?c:i)(t,function(t,i,a){if(n(t))return d||(d=[]),u||(u=[]),r(e,a,i,o,l,d,u);var s=e[i],c=l?l(s,t,i,e,a):void 0,p="undefined"==typeof c;p&&(c=t),!h&&"undefined"==typeof c||!p&&(c===c?c===s:s!==s)||(e[i]=c)}),e}function r(e,t,n,i,o,r,s){for(var c=r.length,d=t[n];c--;)if(r[c]==d)return void(e[n]=s[c]);var u=e[n],m=o?o(u,d,n,e,t):void 0,b="undefined"==typeof m;b&&(m=d,a(d.length)&&(p(d)||v(d))?m=p(u)?u:u?l(u):[]:f(d)||h(d)?m=h(u)?g(u):f(u)?u:{}:b=!1),r.push(d),s.push(m),b?e[n]=i(m,d,o,r,s):(m===m?m!==u:u===u)&&(e[n]=m)}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function s(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}var l=e("lodash._arraycopy"),c=e("lodash._arrayeach"),d=e("lodash._basefor"),u=e("lodash._createassigner"),h=e("lodash.isarguments"),p=e("lodash.isarray"),f=e("lodash.isplainobject"),v=e("lodash.istypedarray"),m=e("lodash.keys"),g=e("lodash.toplainobject"),b=Math.pow(2,53)-1,y=u(o);t.exports=y},{"lodash._arraycopy":3,"lodash._arrayeach":4,"lodash._basefor":5,"lodash._createassigner":6,"lodash.isarguments":9,"lodash.isarray":10,"lodash.isplainobject":11,"lodash.istypedarray":14,"lodash.keys":15,"lodash.toplainobject":17}],3:[function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}t.exports=n},{}],4:[function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}t.exports=n},{}],5:[function(e,t){function n(e,t,n){for(var o=-1,r=i(e),a=n(e),s=a.length;++o<s;){var l=a[o];if(t(r[l],l,r)===!1)break}return e}function i(e){return o(e)?e:Object(e)}function o(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}t.exports=n},{}],6:[function(e,t){function n(e){return function(){var t=arguments,n=t.length,r=t[0];if(2>n||null==r)return r;var a=t[n-2],s=t[n-1],l=t[3];n>3&&"function"==typeof a?(a=i(a,s,5),n-=2):(a=n>2&&"function"==typeof s?s:null,n-=a?1:0),l&&o(t[1],t[2],l)&&(a=3==n?null:a,n=2);for(var c=0;++c<n;){var d=t[c];d&&e(r,d,a)}return r}}var i=e("lodash._bindcallback"),o=e("lodash._isiterateecall");t.exports=n},{"lodash._bindcallback":7,"lodash._isiterateecall":8}],7:[function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)};case 5:return function(n,i,o,r,a){return e.call(t,n,i,o,r,a)}}return function(){return e.apply(t,arguments)}}function i(e){return e}t.exports=n},{}],8:[function(e,t){function n(e,t){return e=+e,t=null==t?a:t,e>-1&&e%1==0&&t>e}function i(e,t,i){if(!r(i))return!1;var a=typeof t;if("number"==a)var s=i.length,l=o(s)&&n(t,s);else l="string"==a&&t in i;if(l){var c=i[t];return e===e?e===c:c!==c}return!1}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&a>=e}function r(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}var a=Math.pow(2,53)-1;t.exports=i},{}],9:[function(e,t){function n(e){return e&&"object"==typeof e||!1}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function o(e){var t=n(e)?e.length:void 0;return i(t)&&s.call(e)==r||!1}var r="[object Arguments]",a=Object.prototype,s=a.toString,l=Math.pow(2,53)-1;t.exports=o},{}],10:[function(e,t){function n(e){return"string"==typeof e?e:null==e?"":e+""}function i(e){return e&&"object"==typeof e||!1}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function r(e){return null==e?!1:f.call(e)==l?v.test(p.call(e)):i(e)&&c.test(e)||!1}function a(e){return e=n(e),e&&u.test(e)?e.replace(d,"\\$&"):e}var s="[object Array]",l="[object Function]",c=/^\[object .+?Constructor\]$/,d=/[.*+?^${}()|[\]\/\\]/g,u=RegExp(d.source),h=Object.prototype,p=Function.prototype.toString,f=h.toString,v=RegExp("^"+a(f).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=r(m=Array.isArray)&&m,g=Math.pow(2,53)-1,b=m||function(e){return i(e)&&o(e.length)&&f.call(e)==s||!1};t.exports=b},{}],11:[function(e,t){function n(e){return e&&"object"==typeof e||!1}function i(e,t){return r(e,t,s)}function o(e){var t;if(!n(e)||u.call(e)!=l||!d.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var o;return i(e,function(e,t){o=t}),"undefined"==typeof o||d.call(e,o)}var r=e("lodash._basefor"),a=e("lodash.isnative"),s=e("lodash.keysin"),l="[object Object]",c=Object.prototype,d=c.hasOwnProperty,u=c.toString,h=a(h=Object.getPrototypeOf)&&h,p=h?function(e){if(!e||u.call(e)!=l)return!1;var t=e.valueOf,n=a(t)&&(n=h(t))&&h(n);return n?e==n||h(e)==n:o(e)}:o;t.exports=p},{"lodash._basefor":5,"lodash.isnative":12,"lodash.keysin":13}],12:[function(e,t){function n(e){return"string"==typeof e?e:null==e?"":e+""}function i(e){return e&&"object"==typeof e||!1}function o(e){return null==e?!1:h.call(e)==a?p.test(u.call(e)):i(e)&&s.test(e)||!1}function r(e){return e=n(e),e&&c.test(e)?e.replace(l,"\\$&"):e}var a="[object Function]",s=/^\[object .+?Constructor\]$/,l=/[.*+?^${}()|[\]\/\\]/g,c=RegExp(l.source),d=Object.prototype,u=Function.prototype.toString,h=d.toString,p=RegExp("^"+r(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=o},{}],13:[function(e,t){function n(e,t){return e=+e,t=null==t?u:t,e>-1&&e%1==0&&t>e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function o(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function r(e){if(null==e)return[];o(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(s(e)||h.nonEnumArgs&&a(e))&&t||0;for(var r=e.constructor,l=-1,d="function"==typeof r&&r.prototype===e,u=Array(t),p=t>0;++l<t;)u[l]=l+"";for(var f in e)p&&n(f,t)||"constructor"==f&&(d||!c.call(e,f))||u.push(f);return u}var a=e("lodash.isarguments"),s=e("lodash.isarray"),l=Object.prototype,c=l.hasOwnProperty,d=l.propertyIsEnumerable,u=Math.pow(2,53)-1,h={};!function(){try{h.nonEnumArgs=!d.call(arguments,1)}catch(e){h.nonEnumArgs=!0}}(0,0),t.exports=r},{"lodash.isarguments":9,"lodash.isarray":10}],14:[function(e,t){function n(e){return e&&"object"==typeof e||!1}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&E>=e}function o(e){return n(e)&&i(e.length)&&A[P.call(e)]||!1}var r="[object Arguments]",a="[object Array]",s="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",u="[object Map]",h="[object Number]",p="[object Object]",f="[object RegExp]",v="[object Set]",m="[object String]",g="[object WeakMap]",b="[object ArrayBuffer]",y="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",$="[object Int32Array]",k="[object Uint8Array]",C="[object Uint8ClampedArray]",T="[object Uint16Array]",S="[object Uint32Array]",A={};A[y]=A[_]=A[w]=A[x]=A[$]=A[k]=A[C]=A[T]=A[S]=!0,A[r]=A[a]=A[b]=A[s]=A[l]=A[c]=A[d]=A[u]=A[h]=A[p]=A[f]=A[v]=A[m]=A[g]=!1;var D=Object.prototype,P=D.toString,E=Math.pow(2,53)-1;t.exports=o},{}],15:[function(e,t){function n(e,t){return e=+e,t=null==t?f:t,e>-1&&e%1==0&&t>e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&f>=e}function o(e){for(var t=a(e),o=t.length,r=o&&e.length,c=r&&i(r)&&(l(e)||v.nonEnumArgs&&s(e)),d=-1,h=[];++d<o;){var p=t[d];(c&&n(p,r)||u.call(e,p))&&h.push(p)}return h}function r(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function a(e){if(null==e)return[];r(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(l(e)||v.nonEnumArgs&&s(e))&&t||0;for(var o=e.constructor,a=-1,c="function"==typeof o&&o.prototype===e,d=Array(t),h=t>0;++a<t;)d[a]=a+"";for(var p in e)h&&n(p,t)||"constructor"==p&&(c||!u.call(e,p))||d.push(p);return d}var s=e("lodash.isarguments"),l=e("lodash.isarray"),c=e("lodash.isnative"),d=Object.prototype,u=d.hasOwnProperty,h=d.propertyIsEnumerable,p=c(p=Object.keys)&&p,f=Math.pow(2,53)-1,v={};!function(){try{v.nonEnumArgs=!h.call(arguments,1)}catch(e){v.nonEnumArgs=!0}}(0,0);var m=p?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&i(n)?o(e):r(e)?p(e):[]}:o;t.exports=m},{"lodash.isarguments":9,"lodash.isarray":10,"lodash.isnative":16}],16:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],17:[function(e,t){function n(e){return i(e,o(e))}var i=e("lodash._basecopy"),o=e("lodash.keysin");t.exports=n},{"lodash._basecopy":18,"lodash.keysin":19}],18:[function(e,t){function n(e,t,n){n||(n=t,t={});for(var i=-1,o=n.length;++i<o;){var r=n[i];t[r]=e[r]}return t}t.exports=n},{}],19:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{dup:13,"lodash.isarguments":9,"lodash.isarray":10}],20:[function(e,t){function n(e){var t={},i=d.keyPathSeparator;for(var o in e){var r=e[o];if(!r||r.constructor!==Object&&r.constructor!==Array||a.isEmpty(r))t[o]=r;else{var s=n(r);for(var l in s){var c=s[l];t[o+i+l]=c}}}return t}function i(e,t,n){for(var i=d.keyPathSeparator,o=t?t.split(i):[],r=e,s=0,l=o.length;l>s;s++){if(n&&!a.has(r,o[s]))return!1;if(r=r[o[s]],null==r&&l-1>s&&(r={}),"undefined"==typeof r)return n?!0:r}return n?!0:r}function o(e,t,n,i){i=i||{};for(var o=d.keyPathSeparator,r=t?t.split(o):[],s=e,l=0,c=r.length;c>l&&void 0!==s;l++){var u=r[l];if(l===c-1)i.unset?delete s[u]:s[u]=n;else{if("undefined"==typeof s[u]||!a.isObject(s[u])){var h=r[l+1];s[u]=/^\d+$/.test(h)?[]:{}}s=s[u]}}}function r(e,t){o(e,t,null,{unset:!0})}try{var a=e("underscore")}catch(s){var a=window._}try{var l=e("backbone")}catch(s){var l=window.Backbone}var c=e("lodash.merge"),d=l.Model.extend({constructor:function(e,t){var n,i=e||{};this.cid=a.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),(n=a.result(this,"defaults"))&&(i=c(n,i)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(){return c({},this.attributes)},get:function(e){return i(this.attributes,e)},set:function(e,t,s){var l,u,h,p,f,v,m,g;if(null==e)return this;if("object"==typeof e?(u=e,s=t||{}):(u={})[e]=t,s||(s={}),!this._validate(u,s))return!1;h=s.unset,f=s.silent,p=[],v=this._changing,this._changing=!0,v||(this._previousAttributes=c({},this.attributes),this.changed={}),g=this.attributes,m=this._previousAttributes,this.idAttribute in u&&(this.id=u[this.idAttribute]),u=n(u);for(l in u)t=u[l],a.isEqual(i(g,l),t)||p.push(l),a.isEqual(i(m,l),t)?r(this.changed,l):o(this.changed,l,t),h?r(g,l):o(g,l,t);if(!f){p.length&&(this._pending=!0);for(var b=d.keyPathSeparator,y={},_=0,w=p.length;w>_;_++){var e=p[_];y.hasOwnProperty(e)&&y[e]||(y[e]=!0,this.trigger("change:"+e,this,i(g,e),s));for(var x=e.split(b),$=x.length-1;$>0;$--){var k=x.slice(0,$).join(b),C=k+b+"*";y.hasOwnProperty(C)&&y[C]||(y[C]=!0,this.trigger("change:"+C,this,i(g,k),s)),y.hasOwnProperty(k)&&y[k]||(y[k]=!0,this.trigger("change:"+k,this,i(g,k),s))}}}if(v)return this;if(!f)for(;this._pending;)this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},clear:function(e){var t={},i=n(this.attributes);for(var o in i)t[o]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):void 0!==i(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes;e=n(e),t=n(t);var i,o=!1;for(var r in e)a.isEqual(t[r],i=e[r])||((o||(o={}))[r]=i);return o},previous:function(e){return null!=e&&this._previousAttributes?i(this._previousAttributes,e):null},previousAttributes:function(){return c({},this._previousAttributes)}});d.keyPathSeparator=".",t.exports=d},{backbone:void 0,"lodash.merge":2,underscore:void 0}]},{},[1]),define("deepmodel",function(e){return function(){var t;return t||e.deepmodel}}(this)),$.scrollWindowTo=function(e,t,n){return null==t&&(t=0),e===$(window).scrollTop()?($(window).trigger("scroll"),void("function"==typeof n&&n())):$("html, body").animate({scrollTop:e},t,function(){return"function"==typeof n?n():void 0})},define("scrollwindowto",function(){});var Node=Node||{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3};define("ie8nodeenum",function(){}),function(){rivets.binders.input={publishes:!0,routine:rivets.binders.value.routine,bind:function(e){return $(e).bind("input.rivets",this.publish)},unbind:function(e){return $(e).unbind("input.rivets")}},rivets.configure({prefix:"rv"})}.call(this),function(){var e,t,n,i,o,r,a,s,l,c,d,u={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var i in t)u.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};o=function(e){function t(){return a=t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.sync=function(){},t.prototype.indexInDOM=function(){var e,t=this;return e=$(".fb-field-wrapper").filter(function(e,n){return $(n).data("cid")===t.cid}),$(".fb-field-wrapper").index(e)},t.prototype.is_input=function(){return null!=n.inputFields[this.get(n.options.mappings.FIELD_TYPE)]},t}(Backbone.DeepModel),i=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){return this.on("add",this.copyCidToModel)},t.prototype.model=o,t.prototype.comparator=function(e){return e.indexInDOM()},t.prototype.copyCidToModel=function(e){return e.attributes.cid=e.cid},t}(Backbone.Collection),r=function(e){function t(){return l=t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="fb-field-wrapper",t.prototype.events={"click .subtemplate-wrapper":"focusEditView","click .js-duplicate":"duplicate","click .js-clear":"clear"},t.prototype.initialize=function(e){return this.parentView=e.parentView,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},t.prototype.render=function(){return this.$el.addClass("response-field-"+this.model.get(n.options.mappings.FIELD_TYPE)).data("cid",this.model.cid).html(n.templates["view/base"+(this.model.is_input()?"":"_non_input")]({rf:this.model})),this},t.prototype.focusEditView=function(){return this.parentView.createAndShowEditView(this.model)},t.prototype.clear=function(e){var t,i,o=this;switch(e.preventDefault(),e.stopPropagation(),t=function(){return o.parentView.handleFormUpdate(),o.model.destroy()},i=n.options.CLEAR_FIELD_CONFIRM,typeof i){case"string":if(confirm(i))return t();break;case"function":return i(t);default:return t()}},t.prototype.duplicate=function(){var e;return e=_.clone(this.model.attributes),delete e.id,e.label+=" Copy",this.parentView.createField(e,{position:this.model.indexInDOM()+1})},t}(Backbone.View),t=function(e){function t(){return c=t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="edit-response-field",t.prototype.events={"click .js-add-option":"addOption","click .js-remove-option":"removeOption","click .js-default-updated":"defaultUpdated","input .option-label-input":"forceRender"},t.prototype.initialize=function(e){return this.parentView=e.parentView,this.rightView=this.parentView.$el.find(".fb-right"),this.listenTo(this.model,"destroy",this.remove)},t.prototype.render=function(){this.$el.html(n.templates["edit/base"+(this.model.is_input()?"":"_non_input")]({rf:this.model}));var e=this.model.get("cid");return edited=this.rightView.find('.fb-field-wrapper[data-cid="'+e+'"]'),m=this.model.attributes,rivets.bind(this.$el,{model:m}),rivets.bind($(edited),{model:m}),this},t.prototype.remove=function(){return this.parentView.editView=void 0,this.parentView.$el.find('[data-target="#addField"]').click(),t.__super__.remove.apply(this,arguments)},t.prototype.addOption=function(e){var t,i,o,r;return t=$(e.currentTarget),i=this.$el.find(".option").index(t.closest(".option")),r=this.model.get(n.options.mappings.OPTIONS)||[],o={label:"",checked:!1},i>-1?r.splice(i+1,0,o):r.push(o),this.model.set(n.options.mappings.OPTIONS,r),this.model.trigger("change:"+n.options.mappings.OPTIONS),this.forceRender()},t.prototype.removeOption=function(e){var t,i,o;return t=$(e.currentTarget),i=this.$el.find(".js-remove-option").index(t),o=this.model.get(n.options.mappings.OPTIONS),o.splice(i,1),this.model.set(n.options.mappings.OPTIONS,o),this.model.trigger("change:"+n.options.mappings.OPTIONS),this.forceRender()},t.prototype.defaultUpdated=function(e){var t;return t=$(e.currentTarget),"checkboxes"!==this.model.get(n.options.mappings.FIELD_TYPE)&&this.$el.find(".js-default-updated").not(t).attr("checked",!1).trigger("change"),this.forceRender()},t.prototype.forceRender=function(){return this.model.trigger("change")},t}(Backbone.View),e=function(e){function o(){return d=o.__super__.constructor.apply(this,arguments)}return h(o,e),o.prototype.SUBVIEWS=[],o.prototype.events={"click .js-save-form":"saveForm","click .fb-tabs a":"showTab","click .fb-add-field-types a":"addField","mouseover .fb-add-field-types":"lockLeftWrapper","mouseout .fb-add-field-types":"unlockLeftWrapper"},o.prototype.initialize=function(e){var t;return t=e.selector,this.formBuilder=e.formBuilder,this.bootstrapData=e.bootstrapData,null!=t&&this.setElement($(t)),this.collection=new i,this.collection.bind("add",this.addOne,this),this.collection.bind("reset",this.reset,this),this.collection.bind("change",this.handleFormUpdate,this),this.collection.bind("destroy add reset",this.hideShowNoResponseFields,this),this.collection.bind("destroy",this.ensureEditViewScrolled,this),this.render(),this.collection.reset(this.bootstrapData),this.bindSaveEvent()},o.prototype.bindSaveEvent=function(){var e=this;return this.formSaved=!0,this.saveFormButton=this.$el.find(".js-save-form"),this.saveFormButton.attr("disabled",!0).text(n.options.dict.ALL_CHANGES_SAVED),n.options.AUTOSAVE&&setInterval(function(){return e.saveForm.call(e)},5e3),$(window).bind("beforeunload",function(){return e.formSaved?void 0:n.options.dict.UNSAVED_CHANGES})},o.prototype.reset=function(){return this.$responseFields.html(""),this.addAll()},o.prototype.render=function(){var e,t,i,o;for(this.$el.html(n.templates.page()),this.$fbLeft=this.$el.find(".fb-left"),this.$responseFields=this.$el.find(".fb-response-fields"),this.hideShowNoResponseFields(),o=this.SUBVIEWS,t=0,i=o.length;i>t;t++)e=o[t],new e({parentView:this}).render();return this},o.prototype.bindWindowScrollEvent=function(){var e=this;return $(window).on("scroll",function(){var t,n;if(e.$fbLeft.data("locked")!==!0)return n=Math.max(0,$(window).scrollTop()-e.$el.offset().top),t=e.$responseFields.height(),e.$fbLeft.css({"margin-top":Math.min(t,n)})})},o.prototype.showTab=function(e){var t,n,i;return t=$(e.currentTarget),i=t.data("target"),t.closest("li").addClass("active").siblings("li").removeClass("active"),$(i).addClass("active").siblings(".fb-tab-pane").removeClass("active"),"#editField"!==i&&this.unlockLeftWrapper(),"#editField"===i&&!this.editView&&(n=this.collection.models[0])?this.createAndShowEditView(n):void 0},o.prototype.addOne=function(e,t,n){var i,o;return o=new r({model:e,parentView:this}),null!=n.$replaceEl?n.$replaceEl.replaceWith(o.render().el):null==n.position||-1===n.position?this.$responseFields.append(o.render().el):0===n.position?this.$responseFields.prepend(o.render().el):(i=this.$responseFields.find(".fb-field-wrapper").eq(n.position))[0]?i.before(o.render().el):this.$responseFields.append(o.render().el)},o.prototype.setSortable=function(){var e=this;return this.$responseFields.hasClass("ui-sortable")&&this.$responseFields.sortable("destroy"),this.$responseFields.sortable({forcePlaceholderSize:!0,placeholder:"sortable-placeholder",stop:function(t,i){var o;return i.item.data("field-type")&&(o=e.collection.create(n.helpers.defaultFieldAttrs(i.item.data("field-type")),{$replaceEl:i.item}),e.createAndShowEditView(o)),e.handleFormUpdate(),!0},update:function(t,n){return n.item.data("field-type")?void 0:e.ensureEditViewScrolled()}}),this.setDraggable()},o.prototype.setDraggable=function(){var e,t=this;return e=this.$el.find("[data-field-type]"),e.draggable({connectToSortable:this.$responseFields,helper:function(){var e;return e=$("<div class='response-field-draggable-helper' />"),e.css({width:t.$responseFields.width(),height:"80px"}),e}})},o.prototype.addAll=function(){return this.collection.each(this.addOne,this),this.setSortable()},o.prototype.hideShowNoResponseFields=function(){return this.$el.find(".fb-no-response-fields")[this.collection.length>0?"hide":"show"]()},o.prototype.addField=function(e){var t;return t=$(e.currentTarget).data("field-type"),this.createField(n.helpers.defaultFieldAttrs(t))},o.prototype.createField=function(e,t){var n;return n=this.collection.create(e,t),this.createAndShowEditView(n),this.handleFormUpdate()},o.prototype.createAndShowEditView=function(e){var n,i;if(i=this.$el.find(".fb-field-wrapper").filter(function(){return $(this).data("cid")===e.cid}),i.addClass("editing").attr("data-cid",e.get("cid")).siblings(".fb-field-wrapper").removeClass("editing"),this.editView){if(this.editView.model.cid===e.cid)return this.$el.find('.fb-tabs a[data-target="#editField"]').click(),void this.scrollLeftWrapper(i);this.editView.remove()}return this.editView=new t({model:e,parentView:this}),n=this.editView.render().$el,this.$el.find(".fb-edit-field-wrapper").html(n),this.$el.find('.fb-tabs a[data-target="#editField"]').click(),this.scrollLeftWrapper(i),this},o.prototype.ensureEditViewScrolled=function(){},o.prototype.scrollLeftWrapper=function(){},o.prototype.lockLeftWrapper=function(){return this.$fbLeft.data("locked",!0)},o.prototype.unlockLeftWrapper=function(){return this.$fbLeft.data("locked",!1)},o.prototype.handleFormUpdate=function(){this.updatingBatch||(this.formSaved=!1)},o.prototype.saveForm=function(){var e;if(!this.formSaved)return this.formSaved=!0,this.saveFormButton.attr("disabled",!0).text(n.options.dict.ALL_CHANGES_SAVED),this.collection.sort(),e=JSON.stringify({fields:this.collection.toJSON()}),n.options.HTTP_ENDPOINT&&this.doAjaxSave(e),this.formBuilder.trigger("save",e)},o.prototype.doAjaxSave=function(e){var t=this;return $.ajax({url:n.options.HTTP_ENDPOINT,type:n.options.HTTP_METHOD,data:e,contentType:"application/json",success:function(e){var n,i,o,r;for(t.updatingBatch=!0,i=0,o=e.length;o>i;i++)n=e[i],null!=(r=t.collection.get(n.cid))&&r.set({id:n.id}),t.collection.trigger("sync");return t.updatingBatch=void 0}})},o}(Backbone.View),n=function(){function t(t){var n;null==t&&(t={}),_.extend(this,Backbone.Events),n=_.extend(t,{formBuilder:this}),this.mainView=new e(n)}return t.helpers={defaultFieldAttrs:function(e){var n,i;return n={},n[t.options.mappings.LABEL]="Untitled",n[t.options.mappings.FIELD_TYPE]=e,n[t.options.mappings.REQUIRED]=!0,n.field_options={},("function"==typeof(i=t.fields[e]).defaultAttributes?i.defaultAttributes(n):void 0)||n},simple_format:function(e){return null!=e?e.replace(/\n/g,"<br />"):void 0}},t.options={BUTTON_CLASS:"fb-button",HTTP_ENDPOINT:"",HTTP_METHOD:"POST",AUTOSAVE:!0,CLEAR_FIELD_CONFIRM:!1,mappings:{SIZE:"field_options.size",UNITS:"field_options.units",LABEL:"label",FIELD_TYPE:"field_type",REQUIRED:"required",ADMIN_ONLY:"admin_only",OPTIONS:"field_options.options",DESCRIPTION:"field_options.description",INCLUDE_OTHER:"field_options.include_other_option",INCLUDE_BLANK:"field_options.include_blank_option",INTEGER_ONLY:"field_options.integer_only",MIN:"field_options.min",MAX:"field_options.max",MINLENGTH:"field_options.minlength",MAXLENGTH:"field_options.maxlength",LENGTH_UNITS:"field_options.min_max_length_units"},dict:{ALL_CHANGES_SAVED:"All changes saved",SAVE_FORM:"Save form",UNSAVED_CHANGES:"You have unsaved changes. If you leave this page, you will lose those changes!"}},t.fields={},t.inputFields={},t.nonInputFields={},t.registerField=function(e,n){var i,o,r,a;for(a=["view","edit"],o=0,r=a.length;r>o;o++)i=a[o],n[i]=_.template(n[i]);return n.field_type=e,t.fields[e]=n,"radio"===n.field_type,"non_input"===n.type?t.nonInputFields[e]=n:t.inputFields[e]=n},t.filteredOptions=function(e){function n(e){return"object"==typeof e}var i=e.get(t.options.mappings.OPTIONS),o=i.filter(n);return o},t}(),window.Formbuilder=n,"undefined"!=typeof module&&null!==module?module.exports=n:window.Formbuilder=n}.call(this),function(){Formbuilder.registerField("radio",{order:15,view:"<% for (i in (Formbuilder.filteredOptions(rf) || [])) { %>\n  <div>\n    <label class='fb-option'>\n      <input type='radio' <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].checked && 'checked' %> onclick=\"javascript: return false;\" />\n      <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %>\n    </label>\n  </div>\n<% } %>\n\n<% if (rf.get(Formbuilder.options.mappings.INCLUDE_OTHER)) { %>\n  <div class='other-option'>\n    <label class='fb-option'>\n      <input type='radio' />\n      Other\n    </label>\n\n    <input type='text' />\n  </div>\n<% } %>",edit:"<%= Formbuilder.templates['edit/options']({ includeOther: true }) %>",addButton:'<span class="symbol"><span class="fa fa-circle-o"></span></span> Multiple Choice',defaultAttributes:function(e){return e.field_options.options=[{label:"",checked:!1},{label:"",checked:!1}],e}})}.call(this),function(){Formbuilder.registerField("address",{order:50,view:"<div class='input-line'>\n  <span class='street'>\n    <input type='text' />\n    <label>Address</label>\n  </span>\n</div>\n\n<div class='input-line'>\n  <span class='city'>\n    <input type='text' />\n    <label>City</label>\n  </span>\n\n  <span class='state'>\n    <input type='text' />\n    <label>State / Province / Region</label>\n  </span>\n</div>\n\n<div class='input-line'>\n  <span class='zip'>\n    <input type='text' />\n    <label>Zipcode</label>\n  </span>\n\n  <span class='country'>\n    <select><option>United States</option></select>\n    <label>Country</label>\n  </span>\n</div>",edit:"",addButton:'<span class="symbol"><span class="fa fa-home"></span></span> Address'})}.call(this),function(){Formbuilder.registerField("checkboxes",{order:10,view:"<% for (i in ( Formbuilder.filteredOptions(rf) ) ) { %>\n  <div>\n    <label class='fb-option'>\n      <input type='checkbox' <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].checked && 'checked' %> onclick=\"javascript: return false;\" />\n      <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %>\n    </label>\n  </div>\n<% } %>\n\n<% if (rf.get(Formbuilder.options.mappings.INCLUDE_OTHER)) { %>\n  <div class='other-option'>\n    <label class='fb-option'>\n      <input type='checkbox' />\n      Other\n    </label>\n\n    <input type='text' />\n  </div>\n<% } %>",edit:"<%= Formbuilder.templates['edit/options']({ includeOther: true }) %>",addButton:'<span class="symbol"><span class="fa fa-square-o"></span></span> Checkboxes',defaultAttributes:function(e){return e.field_options.options=[{label:"",checked:!1},{label:"",checked:!1}],e}})}.call(this),function(){Formbuilder.registerField("date",{order:20,view:"<div class='input-line'>\n  <span class='month'>\n    <input type=\"text\" />\n    <label>MM</label>\n  </span>\n\n  <span class='above-line'>/</span>\n\n  <span class='day'>\n    <input type=\"text\" />\n    <label>DD</label>\n  </span>\n\n  <span class='above-line'>/</span>\n\n  <span class='year'>\n    <input type=\"text\" />\n    <label>YYYY</label>\n  </span>\n</div>",edit:"",addButton:'<span class="symbol"><span class="fa fa-calendar"></span></span> Date'})}.call(this),function(){Formbuilder.registerField("dropdown",{order:24,view:"<select>\n  <% if (rf.get(Formbuilder.options.mappings.INCLUDE_BLANK)) { %>\n    <option value=''></option>\n  <% } %>\n\n  <% for (i in ( Formbuilder.filteredOptions(rf) ) ) { %>\n    <option <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].checked && 'selected' %>>\n      <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %>\n    </option>\n  <% } %>\n</select>",edit:"<%= Formbuilder.templates['edit/options']({ includeBlank: true }) %>",addButton:'<span class="symbol"><span class="fa fa-caret-down"></span></span> Dropdown',defaultAttributes:function(e){return e.field_options.options=[{label:"",checked:!1},{label:"",checked:!1}],e.field_options.include_blank_option=!1,e}})}.call(this),function(){Formbuilder.registerField("email",{order:40,view:"<input type='text' class='rf-size-<%= rf.get(Formbuilder.options.mappings.SIZE) %>' />",edit:"",addButton:'<span class="symbol"><span class="fa fa-envelope-o"></span></span> Email'})}.call(this),function(){}.call(this),function(){Formbuilder.registerField("paragraph",{order:5,view:"<textarea class='rf-size-<%= rf.get(Formbuilder.options.mappings.SIZE) %>'></textarea>",edit:"<%= Formbuilder.templates['edit/size']() %>\n<%= Formbuilder.templates['edit/min_max_length']() %>",addButton:'<span class="symbol">&#182;</span> Paragraph',defaultAttributes:function(e){return e.field_options.size="small",e}})}.call(this),function(){Formbuilder.registerField("text",{order:0,view:"<input type='text' class='rf-size-<%= rf.get(Formbuilder.options.mappings.SIZE) %>' />",edit:"<%= Formbuilder.templates['edit/size']() %>\n<%= Formbuilder.templates['edit/min_max_length']() %>",addButton:"<span class='symbol'><span class='fa fa-font'></span></span> Text",defaultAttributes:function(e){return e.field_options.size="small",e}})}.call(this),function(){Formbuilder.registerField("time",{order:25,view:"<div class='input-line'>\n  <span class='hours'>\n    <input type=\"text\" />\n    <label>Hour</label>\n  </span>\n\n  <span class='above-line'>:</span>\n\n  <span class='minutes'>\n    <input type=\"text\" />\n    <label>Minute</label>\n  </span>\n\n  <span class='am_pm'>\n    <select>\n      <option>AM</option>\n      <option>PM</option>\n    </select>\n  </span>\n</div>",edit:"",addButton:'<span class="symbol"><span class="fa fa-clock-o"></span></span> Time'})
}.call(this),function(){Formbuilder.registerField("website",{order:35,view:"<input type='text' placeholder='http://' />",edit:"",addButton:'<span class="symbol"><span class="fa fa-link"></span></span> Website'})}.call(this),this.Formbuilder=this.Formbuilder||{},this.Formbuilder.templates=this.Formbuilder.templates||{},this.Formbuilder.templates["edit/base"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=Formbuilder.templates["edit/base_header"]())?"":__t)+"\n"+(null==(__t=Formbuilder.templates["edit/common"]())?"":__t)+"\n"+(null==(__t=Formbuilder.fields[rf.get(Formbuilder.options.mappings.FIELD_TYPE)].edit({rf:rf}))?"":__t)+"\n";return __p},this.Formbuilder.templates["edit/base_header"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='fb-field-label'>\n  <span class='field-label' rv-text=\"model."+(null==(__t=Formbuilder.options.mappings.LABEL)?"":__t)+"\"></span>\n  <code class='field-type' rv-text='model."+(null==(__t=Formbuilder.options.mappings.FIELD_TYPE)?"":__t)+"'></code>\n  <span class='fa fa-arrow-right pull-right'></span>\n</div>";return __p},this.Formbuilder.templates["edit/base_non_input"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='fb-field-label'>\n  <span class='field-label' rv-text=\"model."+(null==(__t=Formbuilder.options.mappings.LABEL)?"":__t)+"\"></span>\n  <code class='field-type' rv-text='model."+(null==(__t=Formbuilder.options.mappings.FIELD_TYPE)?"":__t)+"'></code>\n  <span class='fa fa-arrow-right pull-right'></span>\n</div>";return __p},this.Formbuilder.templates["edit/checkboxes"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<label>\n  <input type='checkbox' rv-checked='model."+(null==(__t=Formbuilder.options.mappings.REQUIRED)?"":__t)+"' />\n  Required\n</label>\n<!-- label>\n  <input type='checkbox' rv-checked='model."+(null==(__t=Formbuilder.options.mappings.ADMIN_ONLY)?"":__t)+"' />\n  Admin only\n</label -->";return __p},this.Formbuilder.templates["edit/common"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='fb-edit-section-header'>Label</div>\n\n<div class='fb-common-wrapper'>\n  <div class='fb-label-description'>\n    "+(null==(__t=Formbuilder.templates["edit/label_description"]())?"":__t)+"\n  </div>\n  <div class='fb-common-checkboxes'>\n    "+(null==(__t=Formbuilder.templates["edit/checkboxes"]())?"":__t)+"\n  </div>\n  <div class='fb-clear'></div>\n</div>\n";return __p},this.Formbuilder.templates["edit/integer_only"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='fb-edit-section-header'>Integer only</div>\n<label>\n  <input type='checkbox' rv-checked='model."+(null==(__t=Formbuilder.options.mappings.INTEGER_ONLY)?"":__t)+"' />\n  Only accept integers\n</label>\n";return __p},this.Formbuilder.templates["edit/label_description"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<input type='text' rv-value='model.label' />\n<textarea rv-input='model."+(null==(__t=Formbuilder.options.mappings.DESCRIPTION)?"":__t)+"'\n  placeholder='Add a longer description to this field'></textarea>";return __p},this.Formbuilder.templates["edit/min_max"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class=\'fb-edit-section-header\'>Minimum / Maximum</div>\n\nAbove\n<input type="text" rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MIN)?"":__t)+'" style="width: 30px" />\n\n&nbsp;&nbsp;\n\nBelow\n<input type="text" rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MAX)?"":__t)+'" style="width: 30px" />\n';return __p},this.Formbuilder.templates["edit/min_max_length"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class=\'fb-edit-section-header\'>Length Limit</div>\n\nMin\n<input type="text" rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MINLENGTH)?"":__t)+'" style="width: 30px" />\n\n&nbsp;&nbsp;\n\nMax\n<input type="text" rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MAXLENGTH)?"":__t)+'" style="width: 30px" />\n\n&nbsp;&nbsp;\n\n<select rv-value="model.'+(null==(__t=Formbuilder.options.mappings.LENGTH_UNITS)?"":__t)+'" style="width: auto;">\n  <option value="characters">characters</option>\n  <option value="words">words</option>\n</select>\n';return __p},this.Formbuilder.templates["edit/options"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<div class='fb-edit-section-options'><div class='fb-edit-section-header'>Options</div>\n\n","undefined"!=typeof includeBlank&&(__p+="\n  <label>\n    <input type='checkbox' rv-checked='model."+(null==(__t=Formbuilder.options.mappings.INCLUDE_BLANK)?"":__t)+"' />\n    Include blank\n  </label>\n"),__p+='\n\n<div class=\'option\' rv-each-option=\'model.field_options.options\'>\n  <input type="checkbox" class=\'js-default-updated\' rv-checked="option.checked" />\n  <input type="text" rv-value="option.label" rv-input="option.label" class=\'option-label-input\' />\n  <a class="js-add-option '+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'" title="Add Option"><i class=\'fa fa-plus-circle\'></i></a>\n  <a class="js-remove-option '+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'" title="Remove Option"><i class=\'fa fa-minus-circle\'></i></a>\n</div>\n\n',"undefined"!=typeof includeOther&&(__p+="\n  <label>\n    <input type='checkbox' rv-checked='model."+(null==(__t=Formbuilder.options.mappings.INCLUDE_OTHER)?"":__t)+'\' />\n    Include "other"\n  </label>\n'),__p+="\n\n<div class='fb-bottom-add'>\n  <a class=\"js-add-option "+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'">Add option</a>\n</div></div>\n';return __p},this.Formbuilder.templates["edit/size"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='fb-edit-section-header'>Size</div>\n<select class='fb-size-select' rv-value=\"model."+(null==(__t=Formbuilder.options.mappings.SIZE)?"":__t)+'">\n  <option value="small">Small</option>\n  <option value="medium">Medium</option>\n  <option value="large">Large</option>\n</select>\n';return __p},this.Formbuilder.templates["edit/units"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class=\'fb-edit-section-header\'>Units</div>\n<input type="text" rv-input="model.'+(null==(__t=Formbuilder.options.mappings.UNITS)?"":__t)+'" />\n';return __p},this.Formbuilder.templates.page=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=Formbuilder.templates["partials/save_button"]())?"":__t)+"\n"+(null==(__t=Formbuilder.templates["partials/left_side"]())?"":__t)+"\n"+(null==(__t=Formbuilder.templates["partials/right_side"]())?"":__t)+"\n<div class='fb-clear'></div>";return __p},this.Formbuilder.templates["partials/add_field"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<div class='fb-tab-pane active' id='addField'>\n  <div class='fb-add-field-types'>\n    <div class='section'>\n      ",_.each(_.sortBy(Formbuilder.inputFields,"order"),function(e){__p+='\n        <a data-field-type="'+(null==(__t=e.field_type)?"":__t)+'" class="'+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'">\n          '+(null==(__t=e.addButton)?"":__t)+"\n        </a>\n      "}),__p+="\n    </div>\n\n    <div class='section'>\n      ",_.each(_.sortBy(Formbuilder.nonInputFields,"order"),function(e){__p+='\n        <a data-field-type="'+(null==(__t=e.field_type)?"":__t)+'" class="'+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'">\n          '+(null==(__t=e.addButton)?"":__t)+"\n        </a>\n      "}),__p+="\n    </div>\n  </div>\n</div>\n";return __p},this.Formbuilder.templates["partials/edit_field"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<div class='fb-tab-pane' id='editField'>\n  <div class='fb-edit-field-wrapper'></div>\n</div>\n";return __p},this.Formbuilder.templates["partials/left_side"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='fb-left'>\n  <ul class='fb-tabs'>\n    <li class='active'><a data-target='#addField'>Add new field</a></li>\n    <li><a data-target='#editField'>Edit field</a></li>\n  </ul>\n\n  <div class='fb-tab-content'>\n    "+(null==(__t=Formbuilder.templates["partials/add_field"]())?"":__t)+"\n    "+(null==(__t=Formbuilder.templates["partials/edit_field"]())?"":__t)+"\n  </div>\n</div>";return __p},this.Formbuilder.templates["partials/right_side"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<div class='fb-right'>\n  <div class='fb-no-response-fields'>No response fields</div>\n  <div class='fb-response-fields'></div>\n</div>\n";return __p},this.Formbuilder.templates["partials/save_button"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='fb-save-wrapper'>\n  <button class='js-save-form "+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+"'></button>\n</div>";return __p},this.Formbuilder.templates["view/base"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='subtemplate-wrapper'>\n  <div class='cover'></div>\n  "+(null==(__t=Formbuilder.templates["view/label"]({rf:rf}))?"":__t)+"\n\n  "+(null==(__t=Formbuilder.fields[rf.get(Formbuilder.options.mappings.FIELD_TYPE)].view({rf:rf}))?"":__t)+"\n\n  "+(null==(__t=Formbuilder.templates["view/description"]({rf:rf}))?"":__t)+"\n  "+(null==(__t=Formbuilder.templates["view/duplicate_remove"]({rf:rf}))?"":__t)+"\n</div>\n";return __p},this.Formbuilder.templates["view/base_non_input"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='subtemplate-wrapper'>\n  <div class='cover'></div>\n  "+(null==(__t=Formbuilder.templates["view/label"]({rf:rf}))?"":__t)+"\n\n  "+(null==(__t=Formbuilder.templates["view/description"]({rf:rf}))?"":__t)+"\n  "+(null==(__t=Formbuilder.templates["view/duplicate_remove"]({rf:rf}))?"":__t)+"\n</div>\n";return __p},this.Formbuilder.templates["view/description"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<span class='help-block'>\n  "+(null==(__t=Formbuilder.helpers.simple_format(rf.get(Formbuilder.options.mappings.DESCRIPTION)))?"":__t)+"\n</span>\n";return __p},this.Formbuilder.templates["view/duplicate_remove"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<div class='actions-wrapper'>\n  <a class=\"js-duplicate "+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'" title="Duplicate Field"><i class=\'fa fa-plus-circle\'></i></a>\n  <a class="js-clear '+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'" title="Remove Field"><i class=\'fa fa-minus-circle\'></i></a>\n</div>';return __p},this.Formbuilder.templates["view/label"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<label>\n  <span rv-text='model.label'>"+(null==(__t=Formbuilder.helpers.simple_format(rf.get(Formbuilder.options.mappings.LABEL)))?"":__t)+"\n  ",rf.get(Formbuilder.options.mappings.REQUIRED)&&(__p+="\n    <abbr title='required'>*</abbr>\n  "),__p+="\n</label>\n";return __p},define("formbuilder",["rivets","deepmodel","scrollwindowto","ie8nodeenum"],function(e){return function(){var t;return t||e.formbuilder}}(this)),define("content/category-sections/content-management/custom-forms/views/edit-modal",["backbone","../templates/edit-modal-tpl","sightglass","rivets","formbuilder","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(){},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),setTimeout(function(){e.applyFormBuilder()},200),this},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave"},handleCancel:function(){this.parent.closeModal()},handleSave:function(){this.parent.closeModal()},cacheElem:function(){this.$formBuilder=this.$el.find("#form-builder")},applyFormBuilder:function(){var e=this,t=new Formbuilder({selector:"#form-builder",autosave:!0,bootstrapData:e.model.get("fields")});t.on("save",function(){})}});return new n}),define("content/category-sections/content-management/custom-forms/views/create-edit-forms-view",["backbone","../templates/create-edit-form-tpl","../collections/forms-collection","../views/edit-modal","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,render:function(){return this.$el.html(this.template(this.model.toJSON())),this.cacheElem(),this.applyTinymce(),this.validateForm(),this.applyToolTips(),this.delegateEvents(),this.applyDates(),this.initModal(),this},cacheElem:function(){this.$startDate=this.$el.find("#f-start-date"),this.$endDate=this.$el.find("#f-end-date"),this.$formName=this.$el.find("#f-form-name"),this.$formUrl=this.$el.find("#f-form-url"),this.$active=this.$el.find("#f-active"),this.$pageTitle=this.$el.find("#f-page-title"),this.$metaDesc=this.$el.find("#f-meta-desc"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$pageMainContent=this.$el.find("#f-page-main-content"),this.$tip=this.$el.find(".tooltip-change"),this.$wrapper=this.$el.find("#f-wrapper"),this.$formModal=this.$el.find("#form-builder-modal"),this.$createEditForm=this.$el.find("#create-edit-form-page")},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #edit-btn":"showModal"},initModal:function(){var e=this;e.formModal=e.$formModal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:200}})},showModal:function(){var e=this;this.$formModal.empty(),i.model=e.model,i.parent=e,e.$formModal.append(i.render().el),this.formModal.dialog("open")},closeModal:function(){this.$formModal.dialog("close")},handleCancel:function(){o.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSave:function(){this.$createEditForm.valid()?(this.model.set({startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),formName:this.$formName.val().trim(),formUrl:this.$formUrl.val().trim(),active:this.$active.is(":checked"),wrapper:this.$wrapper.is(":checked"),metaDesc:this.$metaDesc.val().trim(),pageTitle:this.$pageTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaTags:this.$metaTags.val().trim(),pageMainContent:r.activeEditor.getContent()}),n.get(this.model)||(this.model.set("id",new Date),n.add(this.model)),this.parent.showHome(),o.trigger("form:save",this.$tip)):o.trigger("form:invalid",this.$tip)},handleImageUpload:function(){var e;o.trigger("form:image-upload",{cb:function(t){e=t,newImg='<img src="'+e+'">',editor.selection.setContent(newImg)},active:e,name:"Custom HTML"})},applyTinymce:function(){setTimeout(function(){r.remove(),r.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;o.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Custom HTML"})}}),e.on("change",function(){o.trigger("form:editing")})},selector:"textarea.tinymce",height:150,toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},validateForm:function(){var e=this;e.$createEditForm.validate({rules:{"f-form-name":"required","f-form-url":{required:!0,url3:!0},"f-form-email":{required:!0,email:!0}}})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})}});return new a}),define("content/category-sections/content-management/custom-forms/views/forms-view",["backbone","./forms-home-view","./create-edit-forms-view","jqueryui"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){e&&this.regions.visible!==e&&(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/merchandising/weddings-page/templates/wedding-page-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<form id="create-edit-f-wedding-page" name="create-edit-f-wedding-page">\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title">\r\n      <h2 class="pull-left">Wedding Landing Page</h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    Use this section to manage your site\'s main wedding page. This is the first thing your customers will see after clicking on the Weddings link on your site. You can add unique testimonials and change settings such as the page text and email consultation form.\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="panel">\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="f-pageHeaderTitle">Page Header Title</label><i class="icon icon-tool-tip x-space-s" title="This is the text which will be displayed at the top of your wedding landing page."></i>\r\n        <input type="text" id="f-pageHeaderTitle" name="f-pageHeaderTitle" value="'+(null==(__t=pageHeaderTitle)?"":__t)+'">\r\n      </div>\r\n      <div class="col-2 form-section pull-right">\r\n        <div class="label">Active<i title="If this setting is turned OFF, the wedding landing page will be deactivated and will not appear on your site." class="icon icon-tool-tip x-space-s"></i></div>\r\n        <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n        <label for="f-active" class="on-off-switch-label">\r\n          <div class="on-off-switch-state">on</div>\r\n        </label>\r\n      </div>    \r\n      <div class="col-12 form-section">\r\n          <label for="f-pageHeaderDescription">Page Header Description</label><i title="You may use this area to describe the way your flower shop does weddings. This descriptive text shows up at the top of the page." class="icon icon-tool-tip x-space-s"></i>\r\n          <textarea name="f-pageHeaderDescription" id="f-pageHeaderDescription" class="size-3">'+(null==(__t=pageHeaderDescription)?"":__t)+'</textarea>\r\n      </div>\r\n    </div> <!-- End of Row -->\r\n    <div class="row row-spaced">       \r\n      <div class="col-2 form-section">\r\n        <div class="pull-left">\r\n          <div class="label">Social Media Share Icons<i title="If this setting is ON, social media sharing icons will be displayed on the wedding landing page." class="icon icon-tool-tip x-space-s"></i></div>\r\n          <input '+(null==(__t=socialMedia?"checked":"")?"":__t)+' type="checkbox" id="f-socialMedia" name="f-socialMedia" class="on-off-switch center-align" />\r\n          <label for="f-socialMedia" class="on-off-switch-label">\r\n            <div class="on-off-switch-state">on</div>\r\n          </label>\r\n        </div>\r\n      </div>\r\n      <div class="col-2 form-section">\r\n        <div class="label">Consultation Form<i title="If this setting is ON, your customers can fill out a form that will be emailed to you in order to request a wedding consultation." class="icon icon-tool-tip x-space-s"></i></div>\r\n        <input '+(null==(__t=enableConsultation?"checked":"")?"":__t)+' type="checkbox" id="f-enableConsultation" name="f-enableConsultation" class="on-off-switch center-align" />\r\n        <label for="f-enableConsultation" class="on-off-switch-label">\r\n          <div class="on-off-switch-state">on</div>\r\n        </label>\r\n      </div>\r\n      <div class="col-6 consultationSection hidden form-section">\r\n        <label for="f-consultationEmail">Consultation Email Address</label><i class="icon icon-tool-tip x-space-s" title="This is the email address to which consultation form requests will be mailed."></i>\r\n        <input type="text" id="f-consultationEmail" name="f-consultationEmail" value="'+(null==(__t=consultationEmail)?"":__t)+'" class="y-space-top-ll">\r\n      </div>\r\n    </div>\r\n    <div class="row row-spaced">\r\n      <div class="col-4 form-section image-section">\r\n        <div class="label">Background Image <i class="icon icon-tool-tip" title="Use the button below to specify a large background image for the top of your wedding landing page."></i></div>\r\n        <button type="button" id="f-tile-image-upload" class="image-upload icon icon-btn icon-image btn-file icon-3x y-space-s"></button>\r\n      </div>\r\n      <div class="col-3 form-section">\r\n        <div class="label">Background Preview </div>\r\n        <img id="f-image-1-preview" class="fill-container-width" src="'+(null==(__t=backgroundImage)?"":__t)+'" alt="">\r\n      </div>    \r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- Start of Section table -->\r\n<div class="panel row row-spaced form-section">\r\n  <div class="panel-title">Testimonial Management</div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <button type="button" id="add-section-btn"class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Testimonial</button>\r\n    </div>\r\n  </div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <table class="table alternate">\r\n        <thead>\r\n          <tr>\r\n            <th class="col-1">Sequence</th>\r\n            <th class="col-2 left-align">Customer Name</th>\r\n            <th class="col-3 left-align">Testimonial</th>\r\n            <th class="col-2 center-align">Image</th>\r\n            <th class="col-1">Edit</th>\r\n            <th class="col-1">Status</th>\r\n            <th class="col-1">Delete</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id="section-list"></tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- End of Section Table -->\r\n\r\n<!-- Start of SEO Information -->\r\n<div class="panel form-section row row-spaced">\r\n  <div class="row">\r\n    <div class="col-12">\r\n      <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional"></i>SEO Information (optional)</div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id="accordion">\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n        <label for="f-meta-title">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the text displayed in the tab at the top of your browser window."></i>\r\n        <input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="f-meta-keywords">Meta Keywords</label><i class="icon icon-tool-tip x-space-s" title="This area allows you to enter a few comma separated keywords that describe your page."></i>\r\n        <textarea name="f-meta-keywords" id="f-meta-keywords" class="size-2">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n      </div>\r\n\r\n      <div class="col-6 form-section">\r\n          <label for="f-meta-desc">Meta Description</label><i title="This is the text shown on search engines for your page and should consist of short clear sentences." class="icon icon-tool-tip x-space-s"></i>\r\n          <textarea name="f-meta-desc" id="f-meta-desc" class="size-2">'+(null==(__t=metaDescription)?"":__t)+'</textarea>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n          <label for="f-meta-tags">Additional Tags</label><i title="This area is for any additional meta tags that may be used for tracking or other purposes that you would like in the page &lt;head&gt;." class="icon icon-tool-tip x-space-s"></i>\r\n          <textarea name="f-meta-tags" id="f-meta-tags" class="size-2">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n          <div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n      </div>\r\n    </div>\r\n\r\n  </div> <!-- End of Accordian -->\r\n</div>\r\n<!-- End of SEO Information -->\r\n\r\n\r\n</form>';return __p}}),define("content/category-sections/merchandising/weddings-page/models/wedding-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-wedding.json",defaults:{active:!0,socialMedia:!0,enableConsultation:!0,consultationEmail:"",pageHeaderTitle:"",pageHeaderDescription:"",backgroundImage:"",mainTitle:"",metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:""}});return new t}),define("content/category-sections/merchandising/weddings-page/models/section-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,sectionActive:!0,customerName:"",imgActive:!0,imgUrl1:"",display:!0,testimonial:""}});return t}),define("content/category-sections/merchandising/weddings-page/collections/section-collection",["backbone","../models/section-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return n}),define("content/category-sections/merchandising/weddings-page/templates/section-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable form-section" data-id="'+(null==(__t=id)?"":__t)+'">\n	<td><i class="icon icon-arrows icon-2x"></i></td>\n	<td class="left-align">'+(null==(__t=customerName)?"":__t)+'</td>\n	<td class="left-align">'+(null==(__t=testimonial.substring(0,40))?"":__t)+'...</td>\n	<td><img id="display-image-content" class="fit-container" alt="image preview"  src="'+(null==(__t=imgUrl1)?"":__t)+'"></td>\n	<td><button type="button" class="icon icon-btn icon-edit icon-2x"></button></td>\n	<td>\n		<input '+(null==(__t=display?"checked":"")?"":__t)+' type="checkbox"  id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch"/>\n        <label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\n        	<div class="on-off-switch-state">on</div>\n        </label>\n    </td>\n	<td><button type="button" class="icon icon-btn icon-trash icon-2x"></button></td>\n</tr>';return __p}}),define("content/category-sections/merchandising/weddings-page/views/section-view",["backbone","../templates/section-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent,this.listenTo(this.collection,"remove",function(e){this.model===e&&this.remove()}.bind(this))},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","change .on-off-switch":"handleActiveSwitch"},cacheElem:function(){this.$onOffSwitch=this.$el.find(".on-off-switch")},handleDelete:function(){n.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)},handleActiveSwitch:function(){this.model.set({display:this.$onOffSwitch.is(":checked")}),n.trigger("form:editing")}});return i}),define("content/category-sections/merchandising/weddings-page/views/wedding-page-home-view",["backbone","../templates/wedding-page-home-tpl","../models/wedding-model","../models/section-model","../collections/section-collection","./section-view","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({template:t,sectionCollection:null,render:function(){return n.fetchCustom().done(function(){this.$el.html(this.template(n.toJSON())),this.delegateEvents(),this.cacheElem(),this.applyAccordion(),this.applyToolTips(),this.stopListening(this.sectionCollection,"resequenced"),n.stopListening(this.sectionCollection),this.sectionCollection=new o(n.get("sections")),n.listenTo(this.sectionCollection,"add remove change",function(){n.set("sections",this.sectionCollection.toJSON())}.bind(this)),this.listenTo(this.sectionCollection,"resequenced",this.addAllSections),this.addAllSections(),this.applySortable(),this.handleToggleConsultation(),this.validateForm()}.bind(this)),this},events:{"click #add-section-btn":"handleAddSection","click #save-btn":"handleSave","click .image-upload":"handleTileImageUpload","change #f-enableConsultation":"handleToggleConsultation"},cacheElem:function(){this.$accordion=this.$el.find("#accordion"),this.$optional=this.$el.find("#optional"),this.$sectionList=this.$el.find("#section-list"),this.$consultationSection=this.$el.find(".consultationSection"),this.$createEditForm=this.$el.find("#create-edit-f-wedding-page"),this.$active=this.$el.find("#f-active"),this.$socialMedia=this.$el.find("#f-socialMedia"),this.$sectionActive=this.$el.find("#f-section-active"),this.$pageHeaderTitle=this.$el.find("#f-pageHeaderTitle"),this.$pageHeaderDescription=this.$el.find("#f-pageHeaderDescription"),this.$tileImage=this.$el.find("#f-tile-image-upload"),this.$backgroundImage=this.$el.find("#f-image-1-preview"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDescription=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$tip=this.$el.find(".tooltip-change"),this.$sectionButton=this.$el.find("#section-button"),this.$consultation=this.$el.find("#f-enableConsultation"),this.$consultationEmail=this.$el.find("#f-consultationEmail")},handleSave:function(){this.$createEditForm.valid()?(n.set({active:this.$active.is(":checked"),socialMedia:this.$active.is(":checked"),enableConsultation:this.$consultation.is(":checked"),consultationEmail:this.$consultationEmail.val().trim(),pageHeaderTitle:this.$pageHeaderTitle.val().trim(),pageHeaderDescription:this.$pageHeaderDescription.val().trim(),metaTitle:this.$metaTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaDescription:this.$metaDescription.val().trim(),metaTags:this.$metaTags.val().trim(),backgroundimage:this.$backgroundImage.attr("src")}),a.trigger("form:save",this.$tip)):a.trigger("form:invalid",this.$tip)},handleTileImageUpload:function(){var e=this;
a.trigger("form:image-upload",{cb:function(t){e.$backgroundImage.prop("src",t)},active:e.$backgroundImage.prop("src"),name:"Tile"})},handleToggleConsultation:function(){var e=this;e.$consultation.is(":checked")?this.$consultationSection.removeClass("hidden").addClass("required"):this.$consultationSection.addClass("hidden").removeClass("required")},handleSort:function(e){var t=$(e.target);t.hasClass("icon-sort")?(t.switchClass("icon-sort","icon-sort-asc"),this.sectionCollection.changeSort("ascending")):t.hasClass("icon-sort-asc")?(t.switchClass("icon-sort-asc","icon-sort-desc"),this.sectionCollection.changeSort("descending")):t.hasClass("icon-sort-desc")&&(t.switchClass("icon-sort-desc","icon-sort-asc"),this.sectionCollection.changeSort("ascending")),this.sectionCollection.sort(),this.sectionCollection.resequence()},handleAddSection:function(){this.handleEdit(new i)},handleEdit:function(e){this.parent.showCreateEdit(e,this.sectionCollection)},addSection:function(e){var t=new r({model:e,collection:this.sectionCollection,parent:this});this.$sectionList.append(t.render().el)},addAllSections:function(){this.$sectionList.empty(),this.sectionCollection.each(this.addSection,this)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyAccordion:function(){var e=this;this.$optional.click(function(){var t=$(this);return e.$accordion.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#section-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionList.children().each(function(t){var n=$(this).data("id");e.sectionCollection.where({id:n})[0].set("sequence",t+1)}),e.sectionCollection.changeSort("sequence"),e.sectionCollection.sort(),e.sectionCollection.trigger("resequenced"),a.trigger("form:editing")}})},validateForm:function(){var e=this;e.validator=e.$createEditForm.validate({rules:{"f-consultationEmail":{required:function(){return e.$consultation.is(":checked")}},"f-meta-title":"required","f-meta-keywords":"required","f-meta-desc":"required"}})}});return new s}),define("content/category-sections/merchandising/weddings-page/templates/edit-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="p-new-about-us">\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add ")?"":__t)+' Testimonial</h2>\r\n        <div class="btn-panel">\r\n          <button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n          <button id="save-btn" class="btn btn-submit pull-right">\r\n            ',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n          </button>\r\n          <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      On this page you can '+(null==(__t=id?"edit ":"add ")?"":__t)+' a testimonial of your wedding page. This will allow you to customize your testimonial section as you see fit.\r\n    </div>\r\n  </div>\r\n\r\n  <form id="create-edit-form" class="row row-spaced panel form-section">\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="customer-name">Section Title</label>\r\n        <input type="text" id="customer-name" name="customer-name" value="'+(null==(__t=customerName)?"":__t)+'">\r\n      </div>\r\n      <div class="col-6">\r\n        <div class="label">Display Section<i title="This is the title of the section. It will be shown in larger font on the wedding page." class="icon icon-tool-tip x-space-s"></i></div>\r\n        <input '+(null==(__t=display?"checked":"")?"":__t)+' type="checkbox" id="section-active" name="section-active" class="on-off-switch" />\r\n            <label for="section-active" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div id="tiny-mce-container" class="col-12 form-section">\r\n        <label for="section-description">Section Description</label><i title="This is the content for the section. You can put anything you\'d like in here to offer help or advice to your customers." class="icon icon-tool-tip x-space-s"></i>\r\n        <textarea name="section-description" id="section-description" class="tinymce">'+(null==(__t=testimonial)?"":__t)+'</textarea>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-3 form-section image-section">\r\n        <div class="label">Image<i title="You may use the button below to associate an image with your customer testimonial to make it more personal." class="icon icon-tool-tip"></i></div>\r\n        <button type="button" id="f-image-url-1" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s"></button>\r\n      </div>\r\n      <div class="col-3">\r\n        <div class="label">Image Preview</div>\r\n        <img id="f-image-1-preview" src="'+(null==(__t=imgUrl1)?"":__t)+'" alt=""></div>\r\n    </div>\r\n  </form>\r\n</div>';return __p}}),define("content/category-sections/merchandising/weddings-page/views/edit-view",["backbone","../templates/edit-tpl","tinymce","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.validateForm(),this.applyTinymce(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick","click .image-upload":"handleImageUpload"},cacheElem:function(){this.$customername=this.$el.find("#customer-name"),this.$sectionActive=this.$el.find("#section-active"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change"),this.$imageUrl1=this.$el.find("#f-image-url-1"),this.$image1Preview=this.$el.find("#f-image-1-preview")},handleImageUpload:function(){var e=this,t="Wedding Testimonials";i.trigger("form:image-upload",{cb:function(t){e.$image1Preview.prop("src",t)},active:e.$image1Preview.prop("src"),name:t})},handleCancelBtnClick:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveBtnClick:function(){$("#tiny-mce-container").removeClass("error"),this.$createEditForm.valid()&&this.validateTinymce()?(this.model.set({customerName:this.$customername.val().trim(),display:this.$sectionActive.is(":checked"),imgUrl1:this.$image1Preview.attr("src"),testimonial:n.activeEditor.getContent()}),this.collection.get(this.model)||(this.model.set("id",Date.now()),this.collection.add(this.model)),i.trigger("form:save",this.$tip),this.parent.showHome()):i.trigger("form:invalid",this.$tip)},applyTinymce:function(){n.remove(),setTimeout(function(){n.init({setup:function(e){e.on("change",function(){i.trigger("form:editing")})},selector:"textarea#section-description",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{"customer-name":"required"}})},validateTinymce:function(){return n.activeEditor.getContent()?!0:($("#tiny-mce-container").addClass("error").append('<label id="f-page-main-content-error" class="error" for="f-page-main-content">This field is required.</label>'),!1)}});return new o}),define("content/category-sections/merchandising/weddings-page/views/wedding-page-view",["backbone","./wedding-page-home-view","./edit-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e,t){var o=this;i.trigger("form:cancel",function(){n.model=e,n.collection=t,o.replaceVisible(n)})}});return new o}),define("content/category-sections/more/checkout-messaging-management/templates/checkout-messaging-management-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<form id="checkoutMessagingHome" name="checkoutMessagingHome">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Checkout Message Management</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="add-new-message-btn" class="btn btn-submit"><i class="icon icon-add"></i>ADD NEW MESSAGE</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">SAVE</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Hidden Alert Message -->\r\n	<div class="row panel alert-panel">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					This is a generic placeholder for error messages in eSAT. <br>\r\n					In the live app, this will be a real message and will be hidden by default.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<!-- Hidden Alert Message -->\r\n\r\n	<div class="y-space-top-m"> \r\n		Use can use this section to manage text areas throughout your site\'s checkout pages. You can also set date ranges on these messages if they are time sensitive. For example, you may want to leave a message up on your delivery page for a week or so if you are experiencing delivery delays due to a snow storm in your area.\r\n	</div>\r\n\r\n  	<div class="row row-spaced form-section"> \r\n		<div class="col-12 form-section y-space-top-l">\r\n			<table id="checkout-table" class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-4 left-align indented-l">Associated Page</th>\r\n						<th class="col-2 left-align">Start Date</th>\r\n						<th class="col-2 left-align">End Date</th>\r\n						<th class="col-2 center-align">Type</th>\r\n						<th class="col-2 center-align">Status</th>\r\n						<th class="col-1 center-align">Edit</th>\r\n						<th class="col-1 center-align">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="CheckoutMessagingMangement-List"></tbody>\r\n			</table>\r\n		</div>		\r\n	</div>\r\n <!-- Page Wrapping div row ends here -->\r\n</form>';return __p}}),define("content/category-sections/more/checkout-messaging-management/models/checkout-messaging-management-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,AssociatedPage:"",StartDate:"",EndDate:"",type:"",type2:"",holidayMessage:"",deliveryInformation:"",cutOffTimeInformation:"",taxAndShippingInformation:"",CheckoutMessagingActive:!0,CheckoutMessagingEditStatus:!1,CheckoutMessagingDeleteStatus:!1}});return t}),define("content/category-sections/more/checkout-messaging-management/collections/checkoutMessagingManagementHomeCollection",["backbone","../models/checkout-messaging-management-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-checkout-messaging-management.json",model:t});return new n}),define("content/category-sections/more/checkout-messaging-management/templates/checkout-messaging-management-home-TABLE",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr> \r\n    <td class="left-align indented-l">'+(null==(__t=AssociatedPage)?"":__t)+' </td>\r\n    <td class="left-align">'+(null==(__t=StartDate)?"":__t)+'</td>\r\n    <td class="left-align">'+(null==(__t=EndDate)?"":__t)+' </td>\r\n    <td class="center-align">'+(null==(__t=type)?"":__t)+' </td>\r\n	<td class="center-align hide-overflow">  \r\n        <div class="centered-content-container">\r\n            <input '+(null==(__t=CheckoutMessagingActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" name="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'" class="on-off-switch checkoutMessagingActive-switch" />\r\n            <label for="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n        </div>\r\n    </td>  \r\n    <td class="center-align"> \r\n        ',__p+="Teleflora"===type?' \r\n            <!-- <button type="button" class="icon icon-btn icon-2x icon-edit"></button> -->\r\n            <button type="button" class="icon icon-btn icon-2x icon-search"></button>   \r\n        ':'\r\n            <button type="button" class="icon icon-btn icon-2x icon-edit"></button>\r\n        ',__p+='\r\n    </td>  \r\n    <td class="center-align"> \r\n        ',"Custom"===type&&(__p+='\r\n            <button type="button" class="icon icon-btn icon-trash icon-2x"></button> \r\n        '),__p+="\r\n    </td> \r\n</tr>";return __p}}),define("content/category-sections/more/checkout-messaging-management/views/checkoutMessagingManagementHomeTABLEView",["backbone","../templates/checkout-messaging-management-home-TABLE","../collections/checkoutMessagingManagementHomeCollection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent},render:function(){var e=this;return this.setElement(this.template(this.model.toJSON())),e.listenTo(n,"remove",function(t){t===e.model&&e.$el.fadeOut(200,function(){e.remove()})}),e.delegateEvents(),e},events:{"click .icon-edit":"handleEdit","click .icon-search":"handleEdit","click .icon-trash":"handleDelete"},handleEdit:function(){this.parent.handleEdit(this.model)},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))}});return o}),define("content/category-sections/more/checkout-messaging-management/views/checkout-messaging-management-home-view",["backbone","../templates/checkout-messaging-management-home-tpl","../models/checkout-messaging-management-model","../collections/checkoutMessagingManagementHomeCollection","./checkoutMessagingManagementHomeTABLEView","global-events","datatables","jqueryui"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,initialize:function(){o.parent=this},render:function(){var e=this;return this.$el.html(this.template()),e.delegateEvents(),i.fetchCustom().done(function(){e.cacheElem(),e.addAllCheckoutMessaging(),setTimeout(function(){e.applyDataTables()},100)}),e},events:{"click #add-new-message-btn":"handleAddNewCheckoutMessage","click #save-btn":"handleActiveSave"},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$CheckoutMessagingList=this.$el.find("#CheckoutMessagingMangement-List"),this.$checkoutTable=this.$el.find("#checkout-table")},handleAddNewCheckoutMessage:function(){this.parent.showCreateEdit(new n)},handleEdit:function(e){this.parent.showCreateEdit(e)},handleSaveEach:function(e){{var t=this,n=e.get("id"),i=t.$el.find('input[data-id="'+n+'"]');i.attr("data-id")}e.set({CheckoutMessagingActive:i.is(":checked")})},handleActiveSave:function(){var e=this;i.each(e.handleSaveEach,this),r.trigger("form:save",this.$tip)},addEachCheckoutMessaging:function(e){var t=new o({model:e,parent:this});this.$CheckoutMessagingList.append(t.render().el,this)},addAllCheckoutMessaging:function(){this.$CheckoutMessagingList.empty(),i.each(this.addEachCheckoutMessaging,this)},applyDataTables:function(){this.dataTable=this.$checkoutTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,searching:!0,serverSide:!1,stateSave:!1,destroy:!0,info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new a}),define("content/category-sections/more/checkout-messaging-management/templates/create-edit-checkout-msg-management-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!-- If type === Custom, disable field, else fields should be enabled. -->\r\n\r\n\r\n<form id="create-edit-checkoutMessaging" name="create-edit-checkoutMessaging">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+' Checkout Messaging</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right">Save</button>\r\n					',id&&"Teleflora"!=type&&(__p+='\r\n						<button type="button" id="delete-btn" class="btn btn-cancel btn-panel pull-right ">Delete</button> \r\n					\r\n					'),__p+='\r\n					<button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Hidden Alert Message -->\r\n	<div class="row panel alert-panel">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					This is a generic placeholder for error messages in eSAT. <br>\r\n					In the live app, this will be a real message and will be hidden by default.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<!-- Hidden Alert Message -->\r\n\r\n	<div class="y-space-top-m">\r\n		Use this page to '+(null==(__t=id?"edit your":"create a new")?"":__t)+' checkout message. You can specify the message text, the days the message will remain on your site, and change which page the message appears on. Teleflora created messages cannot be edited. \r\n	</div>\r\n\r\n	<div class="row row-spaced panel">\r\n		',__p+="Teleflora"===type?'\r\n			<div class="row row-spaced form-section">\r\n				<div class="col-4 form-section">\r\n					<label for="f-type2">Associated Page <i title="This is the only page on which the message will appear." class="icon icon-tool-tip x-space-s"></i></label>\r\n					<div class="select-container">\r\n						<select id="f-type2" name="f-type2" disabled="">\r\n							<option selected hidden value="'+(null==(__t=AssociatedPage)?"":__t)+'"> '+(null==(__t=AssociatedPage)?"":__t)+' </option>\r\n							<option value="Checkout Payment Page">Checkout Payment Page</option>\r\n							<option value="Shopping Basket Page">Shopping Basket Page</option>\r\n							<option value="Checkout Delivery Page">Checkout Delivery Page</option>\r\n						</select>\r\n					</div>\r\n				</div>\r\n				<div class="col-2">\r\n					<label for="checkout-messaging-active"> Status </label>\r\n					<input '+(null==(__t=CheckoutMessagingActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" name="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" class="on-off-switch checkoutMessagingActive-switch" />\r\n					<label for="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n						<div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n				<div class="col-3 form-section">\r\n					<label for="start-date">Start Date</label>\r\n					<div class="date-container">\r\n						<input type="text" id="start-date" name="start-date" class="date" value="'+(null==(__t=StartDate)?"":__t)+'" disabled>\r\n					</div>\r\n				</div>\r\n				<div class="col-3 form-section">\r\n					<label for="end-date">End Date</label>\r\n					<div class="date-container">\r\n						<input type="text" id="end-date" name="end-date" class="date" value="'+(null==(__t=EndDate)?"":__t)+'" disabled>\r\n					</div>\r\n				</div>\r\n		    </div>\r\n	    ':'\r\n			<div class="row row-spaced form-section">\r\n				<div class="col-4 form-section">\r\n					<label for="f-type2">Associated Page <i title="This is the only page on which the message will appear." class="icon icon-tool-tip x-space-s"></i></label>\r\n					<div class="select-container">\r\n						<select id="f-type2" name="f-type2">\r\n							<option selected hidden value="'+(null==(__t=AssociatedPage)?"":__t)+'"> '+(null==(__t=AssociatedPage)?"":__t)+' </option>\r\n							<option value="Checkout Payment Page">Checkout Payment Page</option>\r\n							<option value="Shopping Basket Page">Shopping Basket Page</option>\r\n							<option value="Checkout Delivery Page">Checkout Delivery Page</option>\r\n						</select>\r\n					</div>\r\n				</div>\r\n				<div class="col-2">\r\n					<label for="checkout-messaging-active"> Status </label>\r\n					<input '+(null==(__t=CheckoutMessagingActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" name="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" class="on-off-switch checkoutMessagingActive-switch" />\r\n					<label for="'+(null==(__t="checkoutmessaging-status-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n						<div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n				<div class="col-3 form-section">\r\n					<label for="start-date">Start Date</label>\r\n					<div class="date-container">\r\n						<input type="text" id="start-date" name="start-date" class="date" value="'+(null==(__t=StartDate)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n				<div class="col-3 form-section">\r\n					<label for="end-date">End Date</label>\r\n					<div class="date-container">\r\n						<input type="text" id="end-date" name="end-date" class="date" value="'+(null==(__t=EndDate)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n		    </div>\r\n	    ',__p+='\r\n\r\n		<div class="row row-spaced CheckOutEditors y-space-top-s form-section">\r\n			',"Checkout Payment Page"===AssociatedPage&&(__p+='\r\n				<div class="col-12 y-space-top-xl"> \r\n					<label for="f-checkout-holidaymessage-section-checkout-payment">Holiday Message</label><i title="Specify the text content for your message below." class="icon icon-tool-tip x-space-s"></i>   \r\n					<div id="tiny-mce-container2" class="row row-spaced panel">\r\n						<textarea id="f-checkout-holidaymessage-section-checkout-payment" class="size-4 tinymce f-checkout-holidaymessage-section-checkout-payment y-space-s" name="f-checkout-holidaymessage-section-checkout-payment">\r\n						'+(null==(__t=holidayMessage)?"":__t)+"</textarea>\r\n					</div>\r\n				</div>\r\n			"),__p+="\r\n\r\n	        ","Shopping Basket Page"===AssociatedPage&&(__p+='\r\n				<div class="col-12 y-space-top-xl"> \r\n					<label for="f-checkout-holidaymessage-section-shopping-basket-page">Holiday Message  </label><i title="Specify the text content for your message below." class="icon icon-tool-tip x-space-s"></i>   \r\n					<div id="tiny-mce-container2" class="row row-spaced panel">\r\n						<textarea id="f-checkout-holidaymessage-section-shopping-basket-page" class="size-4 tinymce f-checkout-holidaymessage-section-shopping-basket-page y-space-s" name="f-checkout-holidaymessage-section-shopping-basket-page">\r\n						'+(null==(__t=holidayMessage)?"":__t)+"</textarea>\r\n					</div>\r\n				</div>\r\n			"),__p+="\r\n\r\n	        ","Checkout Delivery Page"===AssociatedPage&&(__p+='\r\n				<div class="col-12 y-space-top-xl"> \r\n					<label for="f-checkout-holidaymessage-section-checkout-delivery">Holiday Message</label> <i title="Specify the text content for your message below." class="icon icon-tool-tip x-space-s"></i>   \r\n					<div id="tiny-mce-container2" class="row row-spaced panel">\r\n						<textarea id="f-checkout-holidaymessage-section-checkout-delivery" class="size-4 tinymce f-checkout-holidaymessage-section-checkout-delivery y-space-s" name="f-checkout-holidaymessage-section-checkout-delivery">\r\n						'+(null==(__t=holidayMessage)?"":__t)+"</textarea>\r\n					</div>\r\n				</div>\r\n	        "),__p+="\r\n		</div>\r\n    </div><!-- Panel Div ends here -->\r\n</form>";return __p}}),define("content/category-sections/more/checkout-messaging-management/views/create-edit-checkoutMessagingManagementView",["backbone","../templates/create-edit-checkout-msg-management-tpl","../collections/checkoutMessagingManagementHomeCollection","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:t,render:function(e){var t=this;return n.fetchCustom().done(function(){viewModel=t.model.toJSON(),e.AssociatedPage&&(viewModel.AssociatedPage=t.AssociatedPage=e.AssociatedPage),t.$el.html(t.template(viewModel)),t.delegateEvents(),t.cacheElem(),t.applyDates()}),t.model.get("id")&&(t.applyTinymceholidayMessageCheckoutPayment(),t.applyTinymceholidayMessageShoppingBasket(),t.applyTinymceShippingANDTaxInformation(),t.applyTinymceDeliveryInformation(),t.applyTinymceCutOffTimeInformation(),t.applyTinymceholidayMessageCheckoutDelivery()),t.valNewForm(),t},events:{"change #f-type2":"handleType2Change","click #cancel-btn":"handleCancel","click #delete-btn":"handleDeleteBtn","click #save-btn":"handleSave"},cacheElem:function(){this.$type2=this.$el.find("#f-type2"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$CheckoutEditorsArea=this.$el.find(".CheckOutEditors"),this.$CreateEditCheckoutForm=this.$el.find("#create-edit-checkoutMessaging"),this.$checkoutMessagingActiveStatus=this.$el.find(".checkoutMessagingActive-switch"),this.$tip=this.$el.find(".tooltip-change")},handleSave:function(){this.$CreateEditCheckoutForm.valid()?(this.model.set({AssociatedPage:this.$type2.find("option:selected").val().trim(),StartDate:this.$startDate.val().trim(),EndDate:this.$endDate.val(),type:"Custom",CheckoutMessagingActive:this.$checkoutMessagingActiveStatus.is(":checked"),CheckoutMessagingEditStatus:!0,CheckoutMessagingDeleteStatus:!0}),"Checkout Delivery Page"===this.model.get("AssociatedPage")&&this.model.set({holidayMessage:o.get("f-checkout-holidaymessage-section-checkout-delivery").getContent(),deliveryInformation:o.get("f-delivery-info-section").getContent(),cutOffTimeInformation:o.get("f-cut-off-time-info-section").getContent()}),"Checkout Payment Page"===this.model.get("AssociatedPage")&&this.model.set({holidayMessage:o.get("f-checkout-holidaymessage-section-checkout-payment").getContent()}),"Shopping Basket Page"===this.model.get("AssociatedPage")&&this.model.set({holidayMessage:o.get("f-checkout-holidaymessage-section-shopping-basket-page").getContent(),taxAndShippingInformation:o.get("f-tax-shipping-info-section").getContent()}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),i.trigger("form:save",this.$tip),this.parent.showHome()):i.trigger("form:invalid",this.$tip)},handleDeleteBtn:function(){i.trigger("form:delete",n.remove.bind(n,this.model)),this.parent.showHome()},handleType2Change:function(){var e=this;e.render({id:e.model.get("id"),AssociatedPage:e.$type2.find("option:selected").val()}),e.cacheElem();var t=e.$type2.find("option:selected").val();"Checkout Payment Page"===t?e.applyTinymceholidayMessageCheckoutPayment():"Shopping Basket Page"===t?(e.applyTinymceholidayMessageShoppingBasket(),e.applyTinymceShippingANDTaxInformation()):"Checkout Delivery Page"===t&&(e.applyTinymceDeliveryInformation(),e.applyTinymceCutOffTimeInformation(),e.applyTinymceholidayMessageCheckoutDelivery())},handleCancel:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/yy"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/yy"})},valNewForm:function(){this.validator=this.$CreateEditCheckoutForm.validate({rules:{"f-type2":{required:!0},"start-date":"required","end-date":{required:"#start-date:filled"}}})},readOnlyValue:function(){var e=this.model.get("type");return"Teleflora"===e?1:void 0},applyTinymceholidayMessageCheckoutPayment:function(){var e=this;setTimeout(function(){o.remove(),o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Holiday Message - Checkout Payment"})}}),e.on("change",function(){i.trigger("form:editing")})},selector:"textarea.f-checkout-holidaymessage-section-checkout-payment",height:300,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1,readonly:e.readOnlyValue()})},0)},applyTinymceShippingANDTaxInformation:function(){var e=this;o.remove(),setTimeout(function(){o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Shopping Basket"})}}),e.on("change",function(){i.trigger("form:editing")})},selector:"textarea.f-tax-shipping-info-section",height:300,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1,readonly:e.readOnlyValue()})},500)},applyTinymceholidayMessageShoppingBasket:function(){var e=this;o.remove(),setTimeout(function(){o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Holiday Message Shopping Basket"})}}),e.on("change",function(){i.trigger("form:editing")})},selector:"textarea.f-checkout-holidaymessage-section-shopping-basket-page",height:300,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1,readonly:e.readOnlyValue()})},100)
},applyTinymceholidayMessageCheckoutDelivery:function(){var e=this;o.remove(),setTimeout(function(){o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Holiday Message - Checkout Delivery"})}}),e.on("change",function(){i.trigger("form:editing")})},selector:"textarea.f-checkout-holidaymessage-section-checkout-delivery",height:300,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1,readonly:e.readOnlyValue()})},200)},applyTinymceDeliveryInformation:function(){var e=this;o.remove(),setTimeout(function(){o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Delivery Information"})}}),e.on("change",function(){i.trigger("form:editing")})},selector:"textarea.f-delivery-info-section",height:300,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1,readonly:e.readOnlyValue()})},300)},applyTinymceCutOffTimeInformation:function(){var e=this;o.remove(),setTimeout(function(){o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Cut off Time Information"})}}),e.on("change",function(){i.trigger("form:editing")})},selector:"textarea.f-cut-off-time-info-section",height:300,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1,readonly:e.readOnlyValue()})},400)}});return new r}),define("content/category-sections/more/checkout-messaging-management/views/checkoutMessagingManagement-ReplaceView",["backbone","./checkout-messaging-management-home-view","./create-edit-checkoutMessagingManagementView","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e,t){e&&this.regions.visible!==e?(this.$el.empty(),this.$el.append(e.render(t).$el.fadeIn(200).focus()),this.regions.visible=e):e.render(),$(window).scrollTop(0)},handleEdit:function(e){this.parent.showCreateEdit(e)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;i.trigger("form:cancel",function(){n.model=e,t.replaceVisible(n,t)})}});return new o}),define("content/category-sections/seo/social-media-setup/templates/socialmedia-homepage-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\n<tr class="sortable form-section" data-id="'+(null==(__t=id)?"":__t)+'">\n    <td><i class="icon icon-arrows icon-2x"></i></td>\n\n  	<td > <img id="display-image-content" class="fit-container" alt="image preview"  src="'+(null==(__t=imgUrl)?"":__t)+'"> </td>\n    \n  	<td>'+(null==(__t=ChannelName)?"":__t)+'</td>\n\n    <td class="form-section">    \n           <input type="text" id="'+(null==(__t="f-Social-Link-"+sequence)?"":__t)+'" name="'+(null==(__t="f-Social-Link-"+sequence)?"":__t)+' f-Social-Link" value="'+(null==(__t=SocialPageLink)?"":__t)+'" class="f-Social-Link-Home"/>\n\n        </td> \n           <td class="hide-overflow">\n\n    <div class="centered-content-container">\n\n      <input '+(null==(__t=SocialMedActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="social-media-active-"+sequence)?"":__t)+'" name="'+(null==(__t="social-media-active-"+sequence)?"":__t)+'" class="on-off-switch SocialMedActive-switch" />\n\n          <label for="'+(null==(__t="social-media-active-"+sequence)?"":__t)+'" class="on-off-switch-label">\n\n              <div class="on-off-switch-state">on</div>\n        </label>\n\n        </div>\n  </td>  \n      <td>\n   ',Edit&&(__p+=' <button type="button" class="icon icon-btn icon-2x icon-edit"></button> '),__p+="   \n    </td>   \n   <!-- Show Edit Icon on for Newly Added Social Links -->\n</tr>\n\n\n";return __p}}),define("content/category-sections/seo/social-media-setup/templates/social-media-MGT-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="Social-Media-HPage" name="f-Social-Media-HPage" class="form-section">\n 	<div class="row row-spaced">\n		<div class="col-12">\n			<div class="clearfix section-title">\n				<h2 class="pull-left">Social Media Management </h2>\n				<div class="btn-panel">\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">\n						Save\n					</button>\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n<!-- Hidden Alert Message -->\n\n<div class="row panel alert-panel">\n  <div class="col-12">\n    <div class="row">\n      <div class="col-1">\n        <div class="icon icon-3x icon-warning"></div>\n      </div>\n      <div class="col-11 alert-text">\n                     This is a generic placeholder for error messages in eSAT. <br>\n                     In the live app, this will be a real message and will be hidden by default.\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Hidden Alert Message -->\n\n\n	<div class="row row-spaced">\n		<div class="col-12">\n			You can manage social media settings by editing the settings below.\n		</div>\n	</div>\n\n<div class="row row-spaced panel">\n	<div class="row">\n		<div class="col-12">\n			<div class="panel-title">Social Media Icons General Settings</div>\n		</div>\n	</div>\n\n\n	<div class="row row-spaced form-section" >   \n		<div class="col-4">\n			<div class="label">Show in Header\n\n			<i title="Leave this turned on to show icons at the Header on your Site." class="icon icon-tool-tip x-space-s"></i>\n\n			</div>\n\n		<input '+(null==(__t=showInHeaderActive?"checked":"")?"":__t)+' type="checkbox" id="f-showInHeaderActive" name="f-showInHeaderActive" class="on-off-switch"/>\n\n\n			<label for="f-showInHeaderActive" class="on-off-switch-label">\n			    <div class="on-off-switch-state">on</div>\n			</label>\n		</div>\n		<div class="col-4">\n			<div class="label">Show in Footer<i title="Leave this turned on to show icons at the in the Footer of your Site." class="icon icon-tool-tip x-space-s"></i></div>\n\n			<input '+(null==(__t=showInFooterActive?"checked":"")?"":__t)+' type="checkbox" id="f-showInFooterActive" name="f-showInFooterActive" class="on-off-switch" />\n\n			<label for="f-showInFooterActive" class="on-off-switch-label">\n			    <div class="on-off-switch-state">on</div>\n			</label>\n		</div>\n\n		<div class="col-4">\n			<div class="label">Show In Contact us Box<i title="Leave this turned on to show icons in the Contact us Box on your Site." class="icon icon-tool-tip x-space-s"></i></div>\n			<input  '+(null==(__t=showInContactBxActive?"checked":"")?"":__t)+' type="checkbox" id="f-showInContactBxActive" name="f-showInContactBxActive" class="on-off-switch" />\n			<label for="f-showInContactBxActive" class="on-off-switch-label">\n			    <div class="on-off-switch-state">on</div>\n			</label>\n		</div> \n\n	</div>\n</div>  <!-- Social Media Icons General Settings Section ends here -->\n\n<div class="row panel">\n	<div class="row">\n		<div class="col-12">\n			<button type="button" id="add-new-btn" class="btn btn-submit pull-right">\n				<i class="icon icon-add icon-lg"></i> ADD CHANNEL\n			</button>  <!-- Add New Social Media Channel-->\n		<div class="panel-title y-space-top-m">Social Media Channels Settings </div>\n	</div>\n</div>\n			<div class="row row-spaced">\n		<div class="col-12">\n			Add your social media pages links in this section. Top 5 active social media channels will show up on your website.\n		</div>\n	</div>   \n\n	<div class="row row-spaced">\n		<div class="col-12">\n			<table class="table alternate">\n				<thead>\n					<tr class="form-section">\n						<th class="col-1 indented-s">Sequence</th>\n						<th class="col-1"></th>    <!-- Channels Logo -->\n						<th class="col-2">Channels Name</th> \n						<th class="col-3 left-align">Store\'s Social Page Link</th>\n						<th class="col-2">Status</th> \n						<th class="col-1">Edit</th>  \n						<!-- Note: Only New Added Social Media Channels should possess Edit Capabilities -->\n					</tr>\n				</thead>\n				<tbody id="socialMedia-List"></tbody>\n			</table>\n		</div>\n	</div>\n\n	</div>\n	</div>\n	\n</form>\n\n		 <!-- Social Media Channel Settings Ends here -->\n';return __p}}),define("content/category-sections/seo/social-media-setup/models/social-media-settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-social-settings.json",defaults:{showInHeaderActive:!0,showInFooterActive:!0,showInContactBxActive:!0}});return new t}),define("content/category-sections/seo/social-media-setup/models/socialmedia-homepage-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,name:"",imgUrl:"",ChannelName:"",SocialPageLink:"",SocialMedActive:!0,Edit:!0}});return t}),define("content/category-sections/seo/social-media-setup/collections/socialmedia-homepage-collection",["backbone","../models/socialmedia-homepage-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-social-mediaMgt.json",model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return new n}),define("content/category-sections/seo/social-media-setup/views/socialmediahomepage-view",["backbone","../templates/socialmedia-homepage-tpl","../collections/socialmedia-homepage-collection","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){var t=this;t.parent=e.parent,t.collection=n,t.listenTo(t.collection,"remove",function(e){t.model===e&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"change .SocialMedActive-switch":"handleSocialActiveSwitch","click .icon-edit":"handleEdit","change .f-Social-Link-Home":"handleSocialLinkSave","click #delete-btn":"handleDeleteBtn"},cacheElem:function(){this.$SocialMedActive=this.$el.find(".SocialMedActive-switch"),this.$socialMediaLink=this.$el.find(".f-Social-Link-Home"),this.$tip=this.$el.find(".tooltip-change")},handleEdit:function(){this.parent.handleEdit(this.model)},handleSocialLinkSave:function(){var e=this;e.model.set({SocialPageLink:e.$socialMediaLink.val()})},handleSocialActiveSwitch:function(){this.model.set({SocialMedActive:this.$SocialMedActive.is(":checked")})}});return i}),define("content/category-sections/seo/social-media-setup/views/social-media-MGT-home-view",["backbone","../templates/socialmedia-homepage-tpl","../templates/social-media-MGT-home-tpl","../models/social-media-settings-model","../models/socialmedia-homepage-model","../collections/socialmedia-homepage-collection","./socialmediahomepage-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s){var l=e.View.extend({template:n,initialize:function(){this.listenTo(r,"resequenced",this.addAllSocialSites)},render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template(i.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyTooltips(),r.fetchCustom().done(function(){r.resequence(),e.applySortable()}),e.valSocialLinks()}),this},cacheElem:function(){this.$socialMediaList=this.$el.find("#socialMedia-List"),this.$socialMediaHeader=this.$el.find("#f-showInHeaderActive"),this.$socialMediaFooter=this.$el.find("#f-showInFooterActive"),this.$socialMediaContactBox=this.$el.find("#f-showInContactBxActive"),this.$tip=this.$el.find(".tooltip-change"),this.$form=this.$el.find("#Social-Media-HPage"),this.$socialMediaLink=this.$el.find(".f-Social-Link-Home")},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancelBtnClick","click #add-new-btn":"handleAddChannelBtnClick"},handleAddChannelBtnClick:function(){this.parent.showCreateEdit(new o)},handleEdit:function(e){this.parent.showCreateEdit(e)},addSocialSites:function(e){var t=new a({model:e,parent:this});this.$socialMediaList.append(t.render().el)},addAllSocialSites:function(){this.$socialMediaList.empty(),r.each(this.addSocialSites,this)},handleCancelBtnClick:function(){s.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSave:function(){i.set({showInHeaderActive:this.$socialMediaHeader.is(":checked"),showInFooterActive:this.$socialMediaFooter.is(":checked"),showInContactBxActive:this.$socialMediaContactBox.is(":checked")}),s.trigger("form:save",this.$tip)},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#socialMedia-List").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$socialMediaList.children().each(function(e){var t=$(this).data("id");r.where({id:t})[0].set("sequence",e+1)}),r.changeSort("sequence"),r.sort(),r.trigger("resequenced"),s.trigger("form:editing")}})},valSocialLinks:function(){this.$form.validate({ignore:[]}),jQuery.validator.addClassRules({"f-Social-Link-Home":{required:!0,url3:!0}})}});return new l}),define("content/category-sections/seo/social-media-setup/templates/create-edit-socialMedia-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n<div id="p-social-media-edit-new" class="row row-spaced panel">\r\n\r\n  <form id="create-edit-form" name="f-create-edit-social" class="form-section"> \r\n\r\n    <div class="row">\r\n\r\n      <div class="col-12">\r\n                <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n                <button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right"> Save</button>\r\n            ',id&&(__p+='  <button type="button" id="delete-btn" class="btn btn-cancel btn-panel pull-right ">Delete</button> '),__p+='\r\n \r\n                <button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n                \r\n        <div class="panel-title y-space-top-l">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'Social Media Channel</div>\r\n\r\n       </div>\r\n    </div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row panel alert-panel hidden-alt">\r\n\r\n    <div class="col-12">\r\n\r\n      <div class="row">\r\n        <div class="col-1">\r\n          <div class="icon icon-3x icon-warning"></div>\r\n\r\n        </div>\r\n\r\n        <div class="col-11 alert-text left-align">\r\n          You have uploaded an invalid image file.  Please upload image files that have\r\n          extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n<div class="row y-space-s"> \r\n\r\n    <div class="col-12">\r\n\r\n    <div class="row">\r\n      <div class="col-7 form-section">\r\n\r\n        <label for="f-ChannelName">Channel Name</label>\r\n\r\n        <input type="text" id="f-socialChannel-Name" name="f-socialChannel-Name" value="'+(null==(__t=ChannelName)?"":__t)+'"/>\r\n\r\n      </div>\r\n\r\n      <div id="channelImg-dv" class="col-5 form-section">\r\n\r\n        <div class="channelLogoDiv label form-section">Channel Logo</div>\r\n\r\n        <button type="button" id="btn-logo" name="logobutton"  class="icon icon-btn icon-image btn-file icon-2x socialBtn">\r\n\r\n        </button> \r\n\r\n       <img id="edit-Img" class="icon icon-2x mediaIcon" ',id&&(__p+=' src="'+(null==(__t=imgUrl)?"":__t)+'" '),__p+=' src="'+(null==(__t=imgUrl)?"":__t)+'"  style="max-height:60%; max-width:60%; border-radius:10px;">\r\n\r\n      </div>\r\n   </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n <div class="row y-space-s">\r\n    <div class="col-9 form-section">\r\n        <label for="f-ChannelLink">Social Media Channel Link</label>\r\n          <input type="text" id="f-ChannelLink" name="f-ChannelLink" value="'+(null==(__t=SocialPageLink)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n\r\n </form>\r\n\r\n</div>\r\n';return __p}}),define("content/category-sections/seo/social-media-setup/views/create-edit-socialMedia-View",["backbone","../templates/create-edit-socialMedia-tpl","../collections/socialmedia-homepage-collection","global-events","jquery","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.valNewEditForm(),this},events:{"click #cancel-btn":"handleCancelClick","click #save-btn":"handleSaveBtnClick","click #delete-btn":"handleDeleteBtn","click #btn-logo":"handleFileUpload","click .newIconUpload":"handleFileUpload"},cacheElem:function(){this.$createEditForm=this.$el.find("#create-edit-form"),this.$socialChannelName=this.$el.find("#f-socialChannel-Name"),this.$socialChannelLink=this.$el.find("#f-ChannelLink"),this.$alertPanel=this.$el.find(".alert-panel"),this.$tip=this.$el.find(".tooltip-change"),this.$buttonImg=this.$el.find("#btn-logo"),this.$iconImg=this.$el.find("#edit-Img"),this.$LogoDiv=this.$el.find(".channelLogoDiv")},handleCancelClick:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveBtnClick:function(){this.$createEditForm.valid()?(this.model.set({ChannelName:this.$socialChannelName.val().trim(),SocialPageLink:this.$socialChannelLink.val(),imgUrl:this.$iconImg.prop("src"),Edit:!0}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),i.trigger("form:save",this.$tip),this.parent.showHome()):i.trigger("form:invalid",this.$tip)},handleDeleteBtn:function(){i.trigger("form:delete",n.remove.bind(n,this.model)),this.parent.showHome()},handleFileUpload:function(){var e=this;i.trigger("form:image-upload",{cb:function(t){e.$iconImg.prop("src",t);var n=$(".socialBtn");n.remove(),e.$iconImg.addClass("newIconUpload")},active:e.$iconImg.prop("src"),name:"Social Media Icons"})},valNewEditForm:function(){this.$createEditForm.validate({focusCleanup:!0,rules:{"f-socialChannel-Name":"required","f-ChannelLink":{required:!0,url3:!0}}})}});return new o}),define("content/category-sections/seo/social-media-setup/views/social-media-view",["backbone","./social-media-MGT-home-view","./create-edit-socialMedia-View","../collections/socialmedia-homepage-collection","global-events","jqueryui","jqueryval"],function(e,t,n){var i=e.View.extend({initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.showHome(),this},replaceVisible:function(e){e&&this.regions.visible!==e?(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e):e.render(),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/merchandising/wedding-product/templates/wedding-product-page-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title">\r\n      <h2 class="pull-left">Wedding Products Page</h2>\r\n	  <div class="btn-panel">\r\n        <button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>      \r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    Use this section to manage the Wedding Products page of your site. You can change the page settings as well as what is featured on this page.\r\n  </div>\r\n</div>\r\n\r\n<!-- Start of Page Header -->\r\n<div class="panel form-section">\r\n    <div class="row">\r\n      <div class="col-6 form-section">\r\n        <label for="f-pageHeaderTitle">Page Header Title</label><i class="icon icon-tool-tip x-space-s" title="This title will appear at the top of the page."></i>\r\n        <input type="text" id="f-pageHeaderTitle" name="f-pageHeaderTitle" value="'+(null==(__t=pageHeaderTitle)?"":__t)+'">\r\n      </div>\r\n     <div class="col-5 form-section">\r\n        <div class="pull-left">\r\n          <div class="label">Enable Wedding Products<i title="If this setting is turned OFF, the Wedding Products page will be deactivated and will not appear on your site." class="icon icon-tool-tip x-space-s"></i></div>\r\n          <input '+(null==(__t=statusWedding?"checked":"")?"":__t)+' type="checkbox" id="f-statusWedding" name="f-statusWedding" class="on-off-switch" />\r\n          <label for="f-statusWedding" class="on-off-switch-label">\r\n            <div class="on-off-switch-state">on</div>\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>  <!-- End of Row -->\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12 form-section">\r\n        <label for="f-pageHeaderDescription">Page Header Description</label><i title="This descriptive text will appear underneath the page title." class="icon icon-tool-tip x-space-s"></i>\r\n        <textarea name="f-pageHeaderDescription" id="f-pageHeaderDescription" class="size-3">'+(null==(__t=pageHeaderDescription)?"":__t)+'</textarea>\r\n    </div>\r\n  </div> <!-- End of Row -->\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div id="service-type-container"></div>\r\n		</div>\r\n	</div>\r\n</div> \r\n<!-- End of Page Header -->\r\n\r\n<!-- Start of SEO Information -->\r\n<div class="panel form-section row row-spaced">\r\n  <div class="row">\r\n    <div class="col-12">\r\n      <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional"></i>SEO Information (optional)</div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id="accordion">\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n        <label for="f-meta-title">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the text displayed in the tab at the top of your browser window."></i>\r\n        <input type="text" id="f-meta-title" name="f-meta-title" value="'+(null==(__t=metaTitle)?"":__t)+'">\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="f-meta-keywords">Meta Keywords</label><i class="icon icon-tool-tip x-space-s" title="This area allows you to enter a few comma separated keywords that describe your page."></i>\r\n        <textarea name="f-meta-keywords" id="f-meta-keywords" class="size-2">'+(null==(__t=metaKeywords)?"":__t)+'</textarea>\r\n      </div>\r\n\r\n      <div class="col-6 form-section">\r\n          <label for="f-meta-desc">Meta Description</label><i title="This is the text shown on search engines for your page and should consist of short clear sentences." class="icon icon-tool-tip x-space-s"></i>\r\n          <textarea name="f-meta-desc" id="f-meta-desc" class="size-2">'+(null==(__t=metaDescription)?"":__t)+'</textarea>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n          <label for="f-meta-tags">Additional Tags</label><i title="This area is for any additional meta tags that may be used for tracking or other purposes that you would like in the page &lt;head&gt;." class="icon icon-tool-tip x-space-s"></i>\r\n          <textarea name="f-meta-tags" id="f-meta-tags" class="size-2">'+(null==(__t=metaTags)?"":__t)+'</textarea>\r\n          <div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n      </div>\r\n    </div>\r\n\r\n  </div> <!-- End of Accordian -->\r\n</div>\r\n<!-- End of SEO Information -->';return __p}}),define("content/category-sections/merchandising/wedding-product/models/wedding-product-page-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-wedding-product.json",defaults:{pageHeaderTitle:"",pageHeaderDescription:"",metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:"",statusWedding:!0,sections:[]}});return new t}),define("content/category-sections/merchandising/wedding-product/collections/section-collection",["backbone","../models/wedding-product-page-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},getSortedByRank:function(){return this.where({active:!0}).sort(function(e,t){return e.get("sequence")-t.get("sequence")})},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("name")},descending:function(e,t){return e.get("name")>t.get("name")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return n}),define("content/category-sections/merchandising/wedding-product/views/wedding-product-page-home-view",["backbone","../templates/wedding-product-page-home-tpl","../models/wedding-product-page-model","../collections/section-collection","components/general-product/views/general-product-view","content/shared/collections/blank-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"f-wedding-product-page",template:t,serviceTypeCollection:null,render:function(){return n.fetchCustom().done(function(){this.$el.html(this.template(n.toJSON())),this.delegateEvents(),this.cacheElem(),this.applyAccordion(),this.applyToolTips(),this.serviceTypeCollection=new r(n.get("sections")),this.serviceTypeCollection.getSortedByRank=function(){return this.where({active:!0}).sort(function(e,t){return e.get("sequence")-t.get("sequence")})},this.$serviceTypeContainer.append(new o({activeTitle:"Selected Categories (Types)",activeTableTitle:"Name",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"name",nofilter:!0,images:!0,imgGroup:"Wedding Product",imgAttribute:"img",nosearch:!1,statusFilter:!1,typeFilter:!1,async:!1,sequence:!0,collection:this.serviceTypeCollection,imageSearch:!1,hideGrids:!0,statusactive:!1,statusTitle:"Status",maxNumberProducts:3}).render().el)}.bind(this)),this},events:{"click #save-btn":"handleSave"},cacheElem:function(){this.$accordion=this.$el.find("#accordion"),this.$optional=this.$el.find("#optional"),this.$serviceTypeContainer=this.$el.find("#service-type-container"),this.$statusWedding=this.$el.find("#f-statusWedding"),this.$createEditForm=this.$el.find("#f-wedding-product-page"),this.$active=this.$el.find("#f-active"),this.$sectionActive=this.$el.find("#f-section-active"),this.$pageHeaderTitle=this.$el.find("#f-pageHeaderTitle"),this.$pageHeaderDescription=this.$el.find("#f-pageHeaderDescription"),this.$tileImage=this.$el.find("#f-tile-image"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDescription=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$tip=this.$el.find(".tooltip-change"),this.$tileImage=this.$el.find("#tile-image"),this.$sectionButton=this.$el.find("#section-button")},handleSave:function(){n.set({pageHeaderTitle:this.$pageHeaderTitle.val().trim(),pageHeaderDescription:this.$pageHeaderDescription.val().trim(),metaTitle:this.$metaTitle.val().trim(),metaKeywords:this.$metaKeywords.val().trim(),metaDescription:this.$metaDescription.val().trim(),metaTags:this.$metaTags.val().trim()});a.trigger("form:save",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyAccordion:function(){var e=this;this.$optional.click(function(){var t=$(this);return e.$accordion.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()}});return new s}),define("content/category-sections/content-management/wedding-galleries/templates/wedding-gallery-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title">\r\n      <h2 class="pull-left">Wedding Galleries</h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n        <button type="button" id="add-section-btn"class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> New Gallery</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        This is a generic placeholder for error messages in eSAT. <br>\r\n        In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    You can use this section to manage your site\'s wedding galleries. You can create galleries of images to showcase your own unique wedding portfolio with lots of photos.\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12 form-section">\r\n    <div class="label">Enable Wedding Galleries</div>\r\n      <input checked type="checkbox" id="f-enableGalleries" name="f-enableGalleries" class="on-off-switch"/>\r\n      <label for="f-enableGalleries" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>   \r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <table id="section-table" class="table alternate">\r\n     <thead>\r\n        <tr>\r\n          <th class="col-10 left-align">Gallery Name<button data-attribute="name" type="button" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n          <th class="col-1">Status</th>\r\n          <th class="col-1">Edit</th>\r\n        </tr>\r\n      </thead>\r\n       <tbody id="section-list"></tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n\r\n<!-- Start of SEO Information -->\r\n<div class="panel form-section row row-spaced">\r\n  <div class="row">\r\n    <div class="col-12">\r\n      <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional"></i>SEO Information (optional)</div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div id="accordion">\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n        <label for="f-meta-title">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the text displayed in the tab at the top of your browser window."></i>\r\n        <input type="text" id="f-meta-title" name="f-meta-title" value="">\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="f-meta-keywords">Meta Keywords</label><i class="icon icon-tool-tip x-space-s" title="This area allows you to enter a few comma separated keywords that describe your page."></i>\r\n        <textarea name="f-meta-keywords" id="f-meta-keywords" class="size-2"></textarea>\r\n      </div>\r\n\r\n      <div class="col-6 form-section">\r\n          <label for="f-meta-desc">Meta Description</label><i title="This is the text shown on search engines for your page and should consist of short clear sentences." class="icon icon-tool-tip x-space-s"></i>\r\n          <textarea name="f-meta-desc" id="f-meta-desc" class="size-2"></textarea>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n          <label for="f-meta-tags">Additional Tags</label><i title="This area is for any additional meta tags that may be used for tracking or other purposes that you would like in the page &lt;head&gt;." class="icon icon-tool-tip x-space-s"></i>\r\n          <textarea name="f-meta-tags" id="f-meta-tags" class="size-2"></textarea>\r\n          <div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n      </div>\r\n    </div>\r\n\r\n  </div> <!-- End of Accordian -->\r\n</div>';
return __p}}),define("content/category-sections/content-management/wedding-galleries/models/gallery-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,sequence:"",name:"",galleryStatus:!0,enableGallery:!0,type:"Custom",metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:"",sections:[]}});return t}),define("content/category-sections/content-management/wedding-galleries/collections/gallery-collection",["backbone","../models/gallery-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-wedding-gallery.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/content-management/wedding-galleries/templates/gallery-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td class="left-align">'+(null==(__t=name)?"":__t)+"</td>\r\n	<td>\r\n		<input "+(null==(__t=galleryStatus?"checked":"")?"":__t)+' type="checkbox"  id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch"/>\r\n		<label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n		<div class="on-off-switch-state">on</div>\r\n	</td>\r\n	<td>\r\n		<button type="button" class="icon icon-edit icon-btn icon-2x"></button>\r\n	</td>\r\n</tr>\r\n\r\n\r\n\r\n';return __p}}),define("content/category-sections/content-management/wedding-galleries/views/gallery-view",["backbone","../templates/gallery-tpl","../collections/gallery-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.listenTo(n,"remove",function(e){e.get("id")===this.model.get("id")&&(this.parent.dataTable.row(this.$el).remove().draw(),this.remove())})},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","change input.on-off-switch":"toggleActive"},cacheElem:function(){this.$status=this.$el.find("status-"+this.model.get("id")),this.$onOffSwitch=this.$el.find(".on-off-switch")},handleEdit:function(){i.trigger("form:cancel",function(){this.parent.handleEdit(this.model.get("id"))}.bind(this))},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model.get("id"))),i.trigger("form:save")},toggleActive:function(){this.model.set({galleryStatus:this.$onOffSwitch.is(":checked")}),i.trigger("form:editing")}});return o}),define("content/category-sections/content-management/wedding-galleries/views/wedding-gallery-home-view",["backbone","../templates/wedding-gallery-home-tpl","../models/gallery-model","../collections/gallery-collection","./gallery-view","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",id:"f-wedding-gallery-page",template:t,initialize:function(){},render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template(i.toJSON())),this.delegateEvents(),this.cacheElem(),this.dataTable&&this.dataTable.destroy(),e.collection=i.deepClone(),this.addAllGalleries(this.collection),this.applyDataTables(),this.applyAccordion(),this.applyToolTips(),this.listenTo(i,"sort",this.addAllGalleries)}.bind(this)),this},events:{"click #save-btn":"handleSave","click #add-section-btn":"handleAdd","click .sort-btn":"handleSort","change input":"triggerChange"},triggerChange:function(){r.trigger("form:editing")},cacheElem:function(){this.$galleryList=this.$el.find("#section-list"),this.$galleryTable=this.$el.find("#section-table"),this.$sortButtons=this.$el.find(".sort-btn"),this.$enableGallery=this.$el.find("#f-enableGallery"),this.$status=this.$el.find("#status"),this.$optional=this.$el.find("#optional"),this.$accordion=this.$el.find("#accordion"),this.$metaTitle=this.$el.find("#f-meta-title"),this.$metaKeywords=this.$el.find("#f-meta-keywords"),this.$metaDesc=this.$el.find("#f-meta-desc"),this.$metaTags=this.$el.find("#f-meta-tags"),this.$tip=this.$el.find(".tooltip-change")},handleEdit:function(e){var t=void 0!==e?i.get(e):new n;this.parent.showEdit(t)},handleAdd:function(){this.handleEdit()},handleSave:function(){r.trigger("form:save",this.$tip)},addGallery:function(e){var t=new o({model:e,parent:this});this.$galleryList.append(t.render().el)},addAllGalleries:function(e){this.$galleryList.empty(),e.each(this.addGallery,this)},applyAccordion:function(){var e=this;this.$optional.click(function(){var t=$(this);return e.$accordion.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()},applyDataTables:function(){this.dataTable=this.$galleryTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,searching:!1,serverSide:!1,stateSave:!1,bDestroy:!0,info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new a}),define("content/category-sections/content-management/wedding-galleries/templates/create-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="create-edit-form" name="create-edit-form">\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title clearfix">\r\n      <h2 class="pull-left">\r\n        '+(null==(__t=id?"Edit":"Create")?"":__t)+' Wedding Gallery\r\n      </h2>\r\n      <div class="btn-panel">\r\n        <button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n        ',"Teleflora"!==type&&(__p+='\r\n        <button id="delete-btn" type="button" class="btn btn-cancel">Delete</button>\r\n        '),__p+='\r\n        <button id="save-btn" type="button" class="btn btn-submit">',id||(__p+='<i class="icon icon-add"></i>'),__p+='Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    Here you can '+(null==(__t=id?"edit ":"create ")?"":__t)+' wedding galleries for your site. This page will allow you to change all of the details for each individual gallery.\r\n  </div>\r\n</div>\r\n\r\n<!-- Start of Gallery Panel -->\r\n<div class="row row-spaced panel form-section">\r\n  <div class="row">\r\n    <div class="col-5 form-section">\r\n      <label for="f-name">Name</label><i title="This is the name of the wedding gallery." class="icon icon-tool-tip x-space-s"></i>\r\n      <input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'" autofocus>\r\n    </div>  \r\n    <div class="col-2">\r\n      <div class="label">\r\n        Active\r\n      </div>\r\n      <input '+(null==(__t=galleryStatus?"checked":"")?"":__t)+' type="checkbox" id="f-galleryStatus" name="f-galleryStatus" class="on-off-switch" />\r\n      <label for="f-galleryStatus" class="on-off-switch-label">\r\n        <div class="on-off-switch-state">on</div>\r\n      </label>\r\n    </div>\r\n    <div class="col-3">\r\n      <label for="f-type">Type</label>\r\n      <input type="text" id="f-type" name="f-type" value="'+(null==(__t=type)?"":__t)+'" disabled>\r\n    </div> \r\n  </div>\r\n</div>\r\n\r\n\r\n<!-- End of Gallery Panel -->\r\n\r\n<!-- Start of Sections Panel -->\r\n<div class="panel row row-spaced ">\r\n  <div class="panel-title"> '+(null==(__t=name)?"":__t)+' Gallery Photos</div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <button type="button" id="add-photo-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i> Add New Photo</button>\r\n    </div>\r\n  </div>\r\n  <div class="row panel alert-panel hidden">\r\n    <div class="col-12">\r\n      <div class="row">\r\n        <div class="col-1">\r\n          <div class="icon icon-3x icon-warning"></div>\r\n        </div>\r\n        <div class="col-11 alert-text">\r\n          You have reached the maximum number of photos allowed.<br>Please remove photos you have selected if you wish to add more.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <table class="table alternate">\r\n        <thead>\r\n          <tr>\r\n            <th class="col-1">Sequence<button data-attribute="sequence" type="button" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n            <th class="col-2">Image</th>\r\n            <th class="col-4 left-align">Photo Name<button data-attribute="name" type="button" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n            <th class="col-2">Status</th>\r\n            <th class="col-1">Edit</th>\r\n            <th class="col-1">Delete</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id="section-list"></tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- End of Sections Panel -->\r\n\r\n<div id="print-modal"></div>\r\n\r\n\r\n</form>\r\n';return __p}}),define("content/category-sections/content-management/wedding-galleries/models/section-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,sectionName:"",sectionStatus:!0,sectionImage:"",sectionCaption:"",type:"",imgType:"Custom"}});return t}),define("content/category-sections/content-management/wedding-galleries/collections/section-collection",["backbone","../models/section-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-wedding-gallery.json",model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("sectionName")},descending:function(e,t){return e.get("sectionName")>t.get("sectionName")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return n}),define("content/category-sections/content-management/wedding-galleries/templates/section-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td><img src='+(null==(__t=sectionImage)?"":__t)+' class="sectionImage small-table-image"></td>\r\n	<td class="left-align">'+(null==(__t=sectionName)?"":__t)+"</td>\r\n	<td>\r\n		<input "+(null==(__t=sectionStatus?"checked":"")?"":__t)+' type="checkbox"  id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch"/>\r\n		<label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label left-offset-l"><div class="on-off-switch-state">on</div></label>\r\n    </td>\r\n	<td>',"Custom"===imgType&&(__p+='<button type="button" id="f-tile-image-upload" class="image-upload icon icon-btn icon-edit icon-2x"></button>'),__p+="</td>\r\n	<td>","Custom"===imgType&&(__p+='<button type="button" class="icon icon-btn icon-trash icon-2x"></button>'),__p+="</td>\r\n</tr>";return __p}}),define("content/category-sections/content-management/wedding-galleries/views/section-view",["backbone","../templates/section-view-tpl","../collections/gallery-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.listenTo(n,"remove",function(e){e.get("id")===this.model.get("id")&&(this.parent.dataTable.row(this.$el).remove().draw(),this.remove())})},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleImageUpload","change .on-off-switch":"handleActiveSwitch"},cacheElem:function(){this.$onOffSwitch=this.$el.find(".on-off-switch"),this.$sectionImage=this.$el.find(".sectionImage")},handleImageUpload:function(e){var t=this;console.log(e),i.trigger("form:image-upload",{cb:function(e){t.$sectionImage.prop("src",e)},active:t.$sectionImage.prop("src"),name:"Wedding Galleries"})},handleDelete:function(){i.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleActiveSwitch:function(){i.trigger("form:editing"),this.model.set({status:this.$onOffSwitch.is(":checked")})}});return o}),define("content/category-sections/content-management/wedding-galleries/templates/create-edit-section-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<!-- start create edit section model -->\r\n<div id="section-modal">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="section-title clearfix">\r\n				<h2 class="pull-left">\r\n				'+(null==(__t=id?"Edit":"Create")?"":__t)+' Wedding Gallery\r\n				</h2>\r\n				<div class="btn-panel">\r\n					<button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n					<button id="save-section-btn" type="button" class="btn btn-submit">',id||(__p+='<i class="icon icon-add"></i>'),__p+='Save</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n	<!-- Start of Gallery Panel -->\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-5 form-section">\r\n				<label for="f-sectionName" class="pull-left">Photo Name<i title="This is the name of the photo." class="icon icon-tool-tip x-space-s"></i></label>\r\n				<input type="text" id="f-sectionName" name="f-sectionName" value="'+(null==(__t=sectionName)?"":__t)+'" autofocus>\r\n			</div>\r\n			<div class="col-4">\r\n				<div class="label">Photo Upload <i class="icon icon-tool-tip" title="Add a photo to your gallery"></i></div>\r\n				<button type="button"  class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s" value="'+(null==(__t=sectionImage)?"":__t)+'"></button>\r\n			</div>\r\n\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-12 center-align">\r\n				<div class="center-align"><img id="f-tile-image-upload"  class="center-align  small-table-image" src="'+(null==(__t=sectionImage)?"":__t)+'" alt=""></div> \r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<div class="col-12 form-section">\r\n				<label for="f-sectionCaption" class="pull-left">Photo Caption<i title="This caption appears alongside the photo to describe it." class="icon icon-tool-tip x-space-s"></i></label>\r\n				<textarea name="f-sectionCaption" id="f-sectionCaption" class="size-3">'+(null==(__t=sectionCaption)?"":__t)+"</textarea>\r\n			</div>\r\n		</div>    \r\n	</div>\r\n	<!-- End of Gallery Panel -->\r\n</div>\r\n";return __p}}),define("content/category-sections/content-management/wedding-galleries/views/create-edit-section-view",["backbone","../templates/create-edit-section-view-tpl","../models/gallery-model","../models/section-model","../collections/section-collection","../collections/gallery-collection","global-events"],function(e,t,n,i,o,r,a){var s=e.View.extend({template:t,initialize:function(){},render:function(){return this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.cacheElem(),this.delegateEvents(),this},events:{"click #save-section-btn":"handleSave","click .image-upload":"handleImageUpload","click #cancel-btn":"closeModal","click #print-btn":"handlePrint"},cacheElem:function(){this.$sectionName=this.$el.find("#f-sectionName"),this.$sectionCaption=this.$el.find("#f-sectionCaption"),this.$tileImage=this.$el.find("#f-tile-image-upload"),this.$tip=this.$el.find(".tooltip-change")},handleImageUpload:function(){var e=this;a.trigger("form:image-upload",{cb:function(t){e.$tileImage.prop("src",t)},active:e.$tileImage.prop("src"),name:"Wedding Galleries"})},handlePrint:function(){var e=document.title,t=document.getElementById("section-modal").innerHTML,n=window.open();n.document.open(),n.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),setTimeout(function(){n.print(),n.close()},300)},closeModal:function(){this.parent.closeModal()},handleSave:function(){this.model.set({sectionName:this.$sectionName.val().trim(),sectionCaption:this.$sectionCaption.val().trim(),sectionImage:this.$tileImage.attr("src")}),this.parent.sectionCollection.get(this.model)||(this.model.set("id",Date.now()),this.parent.sectionCollection.add(this.model)),a.trigger("form:save",this.$tip),this.closeModal(),this.parent.addAllSections()}});return new s}),define("content/category-sections/content-management/wedding-galleries/views/create-edit-view",["backbone","../templates/create-edit-view-tpl","../models/gallery-model","../models/section-model","../collections/gallery-collection","../collections/section-collection","./section-view","./create-edit-section-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({template:t,initialize:function(){s.parent=this},render:function(){var e=this;return o.fetchCustom().done(function(){this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.validateForm(),viewModel=e.model.toJSON(),e.renderVisible(viewModel),this.stopListening(this.sectionCollection,"resequenced"),this.model.stopListening(this.sectionCollection),this.sectionCollection=new r(this.model.get("sections")),this.model.listenTo(this.sectionCollection,"add remove change",function(){this.model.set("sections",this.sectionCollection.toJSON())}.bind(this)),this.listenTo(this.sectionCollection,"resequenced",this.addAllSections),this.addAllSections(),this.applySortable()}.bind(this)),e.cacheElem(),e.validateForm(),e.applyToolTips(),e},renderVisible:function(e){this.visibleModel=e,this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.setModal()},events:{"click #add-photo-btn":"handlePrintModal","click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #delete-btn":"handleDelete","click #img-upload":"handleImgUpload","click .sort-btn":"handleSort"},cacheElem:function(){this.$name=this.$el.find("#f-name"),this.$galleryStatus=this.$el.find("#f-galleryStatus"),this.$sectionList=this.$el.find("#section-list"),this.$modal=this.$el.find("#print-modal"),this.$sortButtons=this.$el.find(".sort-btn"),this.$tileImage=this.$el.find("#f-tile-image-upload"),this.$alertPanel=this.$el.find(".alert-panel"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change")},handleImageUpload:function(){},addSection:function(e){var t=new a({model:e,collection:this.sectionCollection,parent:this});this.$sectionList.append(t.render().el)},addAllSections:function(){this.$sectionList.empty(),this.sectionCollection.each(this.addSection,this)},handleEdit:function(e){s.model=e,this.$modal.empty(),this.$modal.append(s.render().el),this.$modal.dialog("open")},handleAddSection:function(){var e=new i;this.handleEdit(e)},handleDelete:function(){l.trigger("form:delete",o.remove.bind(o,this.model)),this.parent.showHome()},handleSave:function(){this.$createEditForm.valid()?(this.model.set({name:this.$name.val().trim(),galleryStatus:this.$galleryStatus.is(":checked")}),o.get(this.model)||(this.model.set("id",Date.now()),o.add(this.model)),this.parent.showHome(),l.trigger("form:save",this.$tip)):l.trigger("form:invalid",this.$tip)},handleCancel:function(){l.trigger("form:cancel",function(){this.parent.showHome()}.bind(this))},handlePrintModal:function(){var e=this;this.sectionCollection.length>49?(this.$alertPanel.removeClass("hidden").show(),setTimeout(function(){e.$alertPanel.fadeOut("500")},5e3)):this.showModal(s)},setModal:function(){this.$el.find("#print-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=new i,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},closeModal:function(){this.$modal.dialog("close")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},handleSort:function(e){var t=this,n=$(e.target);n.hasClass("icon-sort")?(n.switchClass("icon-sort","icon-sort-asc"),t.sectionCollection.changeSort("ascending")):n.hasClass("icon-sort-asc")?(n.switchClass("icon-sort-asc","icon-sort-desc"),t.sectionCollection.changeSort("descending")):n.hasClass("icon-sort-desc")&&(n.switchClass("icon-sort-desc","icon-sort-asc"),t.sectionCollection.changeSort("ascending")),t.sectionCollection.sort(),t.sectionCollection.resequence(),t.sectionCollection.changeSort("default")},applySortable:function(){var e=this;e.$el.find("#section-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionList.children().each(function(t){var n=$(this).data("id");e.sectionCollection.where({id:n})[0].set("sequence",t+1)}),e.sectionCollection.changeSort("sequence"),e.sectionCollection.sort(),e.sectionCollection.trigger("resequenced")}})},validateForm:function(){var e=this;e.$createEditForm.validate({rules:{"f-name":"required"}})}});return new c}),define("content/category-sections/content-management/wedding-galleries/views/wedding-gallery-view",["backbone","./wedding-gallery-home-view","./create-edit-view"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)},showEdit:function(e){var t=this;n.model=e,t.replaceVisible(n)},showSectionEdit:function(e){var t=this;CreateEditSectionView.model=e,t.replaceVisible(CreateEditSectionView)}});return new i}),define("content/category-sections/content-management/wedding-flowers/templates/wedding-flower-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title">\r\n      <h2 class="pull-left">Wedding Flowers</h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    You can use this section to configure the Wedding Seasonal Flowers and Wedding Flower Colors pages of your site. You can edit the existing flowers/colors from the lists below as well as add to them. You can even use this as an opportunity to showcase some of your own wedding work.\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div id="tabs">\r\n      <ul class="clearfix">\r\n        <li class="col-6"><a class="center-align fill-container-width" href="#flowers">Wedding Seasonal Flowers</a></li>\r\n        <li class="col-6"><a class="center-align fill-container-width" href="#colors">Wedding Flower Colors</a></li>\r\n      </ul>\r\n\r\n      <!-- Start of Flower Tab -->\r\n      <div id="flowers">\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <div class="panel-title">Wedding Seasonal Flowers Page</div>\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            There are up to 4 sections available in this page. Click on any section to view or edit the section\'s information. Also, click on any section\'s image to edit the image title and caption.\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <button type="button" id="new-btn" class="btn btn-submit pull-right"><div class="icon icon-lg icon-add"></div> Add new</button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Start of Section table -->\r\n        <div class="row row-spaced ">\r\n          <div class="col-12">\r\n            <table class="table alternate">\r\n              <thead>\r\n                <tr>\r\n                  <th class="col-1">Section</th>\r\n                  <th class="col-2">Section Title</th>\r\n                  <th class="col-2">Section Description</th>\r\n                  <th class="col-1">Left Image</th>\r\n                  <th class="col-1">Middle Image</th>\r\n                  <th class="col-1">Right Image</th>\r\n                  <th class="col-1">Status</th>\r\n                  <th class="col-1">Edit</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody id="section-flower-list"></tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <!-- End of Section Table -->\r\n\r\n        <!-- Start of SEO Information -->\r\n        <div class="panel form-section row row-spaced">\r\n          <div class="row">\r\n            <div class="col-12">\r\n              <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional-flowers"></i>SEO Information (optional) <i class="icon icon-tool-tip" title="???"></i></div>\r\n            </div>\r\n          </div>\r\n          <div id="accordion-flowers">\r\n            <div class="row row-spaced">\r\n              <div class="col-12 form-section">\r\n                <label for="f-meta-title-flowers">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n                <input type="text" id="f-meta-title-flowers" name="f-meta-title-flowers" value="'+(null==(__t=metaTitleflowers)?"":__t)+'">\r\n              </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                <label for="f-meta-keywords-flowers">Meta Keywords</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n                <textarea name="f-meta-keywords-flowers" id="f-meta-keywords-flowers" class="size-2">'+(null==(__t=metaKeywordsflowers)?"":__t)+'</textarea>\r\n              </div>\r\n              <div class="col-6 form-section">\r\n                  <label for="f-meta-desc-flowers">Meta Description</label><i class="icon icon-tool-tip x-space-s"></i>\r\n                  <textarea name="f-meta-desc-flowers" id="f-meta-desc-flowers" class="size-2">'+(null==(__t=metaDescriptionflowers)?"":__t)+'</textarea>\r\n              </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n              <div class="col-12 form-section">\r\n                  <label for="f-meta-tags-flowers">Additional Tags</label><i class="icon icon-tool-tip x-space-s"></i>\r\n                  <textarea name="f-meta-tags-flowers" id="f-meta-tags-flowers" class="size-2">'+(null==(__t=metaTagsflowers)?"":__t)+'</textarea>\r\n                  <div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n              </div>\r\n            </div>\r\n          </div> <!-- End of Accordian -->\r\n        </div>\r\n        <!-- End of SEO Information -->  \r\n      </div>\r\n      <!-- End of Flower Tab -->\r\n\r\n       \r\n\r\n      <!-- Start of Color Tab -->\r\n      <div id="colors">\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <div class="panel-title">Wedding Seasonal Colors Page</div>\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            There are up to 4 sections available in this page. Click on any section to view or edit the section\'s information. Also, click on any section\'s image to edit the image title and caption.\r\n          </div>\r\n        </div>\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <button type="button" id="new-color-btn" class="btn btn-submit pull-right"><div class="icon icon-lg icon-add"></div> Add new</button>\r\n          </div>\r\n        </div>\r\n\r\n         <!-- Start of Section table -->\r\n        <div class="row row-spaced ">\r\n          <div class="col-12">\r\n            <table class="table alternate">\r\n              <thead>\r\n                <tr>\r\n                  <th class="col-1">Section</th>\r\n                  <th class="col-2">Section Title</th>\r\n                  <th class="col-2">Section Description</th>\r\n                  <th class="col-1">Left Image</th>\r\n                  <th class="col-1">Middle Image</th>\r\n                  <th class="col-1">Right Image</th>\r\n                  <th class="col-1">Status</th>\r\n                  <th class="col-1">Edit</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody id="section-color-list"></tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <!-- End of Section Table -->\r\n\r\n        <!-- Start of SEO Information -->\r\n        <div class="panel form-section row row-spaced">\r\n          <div class="row">\r\n            <div class="col-12">\r\n              <div class="panel-title"><i class="icon icon-closed x-space-s" id="optional-colors"></i>SEO Information (optional) <i class="icon icon-tool-tip" title="???"></i></div>\r\n            </div>\r\n          </div>\r\n          <div id="accordion-colors">\r\n            <div class="row row-spaced">\r\n              <div class="col-12 form-section">\r\n                <label for="f-meta-title-colors">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n                <input type="text" id="f-meta-title-colors" name="f-meta-title-colors" value="'+(null==(__t=metaTitlecolors)?"":__t)+'">\r\n              </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                <label for="f-meta-keywords-colors">Meta Keywords</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n                <textarea name="f-meta-keywords-colors" id="f-meta-keywords-colors" class="size-2">'+(null==(__t=metaKeywordscolors)?"":__t)+'</textarea>\r\n              </div>\r\n              <div class="col-6 form-section">\r\n                  <label for="f-meta-desc-colors">Meta Description</label><i class="icon icon-tool-tip x-space-s"></i>\r\n                  <textarea name="f-meta-desc-colors" id="f-meta-desc-colors" class="size-2">'+(null==(__t=metaDescriptioncolors)?"":__t)+'</textarea>\r\n              </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n              <div class="col-12 form-section">\r\n                  <label for="f-meta-tags-colors">Additional Tags</label><i class="icon icon-tool-tip x-space-s"></i>\r\n                  <textarea name="f-meta-tags-colors" id="f-meta-tags-colors" class="size-2">'+(null==(__t=metaTagscolors)?"":__t)+'</textarea>\r\n                  <div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n              </div>\r\n            </div>\r\n          </div> <!-- End of Accordian -->\r\n        </div>\r\n        <!-- End of SEO Information -->  \r\n      </div>\r\n      <!-- End of Color Tab -->\r\n    <div id="wedding-edit-modal"></div>\r\n    </div>\r\n    <!-- End of Tabs -->\r\n  </div>\r\n</div>\r\n  ';
return __p}}),define("content/category-sections/content-management/wedding-flowers/templates/edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="section-modal" class="form-section left-align">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="section-title clearfix">\r\n				<h2 class="pull-left">',__p+=id?null==(__t=sectionTitle)?"":__t:"Add New",__p+='</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n			        <button type="button" id="cancel-btn"class="btn btn-other">Cancel</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-6">\r\n				<label for="f-section-title">Section Title<i class="icon icon-tool-tip x-space-s" title="This is the name of the flower/color."></i></label>\r\n				<input type="text" id="f-section-title" name="f-section-title" value="'+(null==(__t=sectionTitle)?"":__t)+'">\r\n			</div>\r\n			<div class="col-2">\r\n				<div class="label">Active</div>\r\n				<input '+(null==(__t=sectionStatus?"checked":"")?"":__t)+' type="checkbox" id="f-sectionStatus" name="f-sectionStatus" class="on-off-switch" />\r\n				<label for="f-sectionStatus" class="on-off-switch-label">\r\n				<div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<div class="col-12 form-section">\r\n				<label for="f-sectionDescription" class="pull-left">Section Description<i title="This descriptive text will appear next to the name of the flower/color." class="icon icon-tool-tip x-space-s"></i></label>\r\n				<textarea name="f-sectionDescription" id="f-sectionDescription" class="size-2">'+(null==(__t=sectionDescription)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Left Image Section Start -->\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Left Image - Section</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-4">\r\n				<label for="f-left-image-title" class="pull-left">Image Title<i class="icon icon-tool-tip x-space-s" title="This is the name of the image and appears directly underneath it."></i></label>\r\n				<input type="text" id="f-left-image-title" name="f-left-image-title" value="'+(null==(__t=leftTitle)?"":__t)+'">\r\n			</div>\r\n			<div class="col-4">\r\n				<div class="label">Photo Upload</div>\r\n				<button type="button"   class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s" id="leftimagebutton" value="'+(null==(__t=leftImage)?"":__t)+'"></button>\r\n			</div>\r\n			<div class="col-4 center-align">\r\n				<div class="center-align"><img id="f-left-image"  class="center-align  small-table-image" src="'+(null==(__t=leftImage)?"":__t)+'" alt=""></div>\r\n			</div>\r\n		</div>\r\n	\r\n		<div class="row">\r\n			<div class="col-12 form-section">\r\n				<label for="f-left-sectionDescription" class="pull-left">Image Caption<i title="This descriptive text is displayed just underneath the Image Title." class="icon icon-tool-tip x-space-s"></i></label>\r\n				<textarea name="f-left-sectionDescription" id="f-left-sectionDescription" class="size-2">'+(null==(__t=leftCaption)?"":__t)+'</textarea>\r\n			</div>\r\n			<div class="col-12 right-align">Max. 120 Characters</div>\r\n		</div>\r\n	</div>\r\n	<!-- Left Image Section End -->\r\n\r\n	<!-- Middle Image Section Start -->\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Middle Image - Section</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-4">\r\n				<label for="f-middle-image-title" class="pull-left">Image Title<i class="icon icon-tool-tip x-space-s" title="This is the name of the image and appears directly underneath it."></i></label>\r\n				<input type="text" id="f-middle-image-title" name="f-middle-image-title" value="'+(null==(__t=middleTitle)?"":__t)+'">\r\n			</div>\r\n			<div class="col-4">\r\n				<div class="label">Photo Upload</div>\r\n				<button type="button" id="middleimagebutton" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s" value="'+(null==(__t=middleImage)?"":__t)+'"></button>\r\n			</div>\r\n			<div class="col-4 center-align">\r\n				<div class="center-align"><img id="f-middle-image"  class="center-align  small-table-image" src="'+(null==(__t=middleImage)?"":__t)+'" alt=""></div>\r\n			</div>\r\n		</div>\r\n	\r\n		<div class="row">\r\n			<div class="col-12 form-section">\r\n				<label for="f-middle-sectionDescription" class="pull-left">Image Caption<i title="This descriptive text is displayed just underneath the Image Title." class="icon icon-tool-tip x-space-s"></i></label>\r\n				<textarea name="f-middle-sectionDescription" id="f-middle-sectionDescription" class="size-2">'+(null==(__t=middleCaption)?"":__t)+'</textarea>\r\n			</div>\r\n			<div class="col-12 right-align">Max. 120 Characters</div>\r\n		</div>\r\n	</div>\r\n	<!-- Middle Image Section End -->\r\n\r\n	<!-- Right Image Section Start -->\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Right Image - Section</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-4">\r\n				<label for="f-right-image-title" class="pull-left">Image Title<i class="icon icon-tool-tip x-space-s" title="This is the name of the image and appears directly underneath it."></i></label>\r\n				<input type="text" id="f-right-image-title" name="f-right-image-title" value="'+(null==(__t=rightTitle)?"":__t)+'">\r\n			</div>\r\n			<div class="col-4">\r\n				<div class="label">Photo Upload</div>\r\n				<button type="button" id="rightimagebutton" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s" value="'+(null==(__t=rightImage)?"":__t)+'"></button>\r\n			</div>\r\n			<div class="col-4 center-align">\r\n				<div class="center-align"><img id="f-right-image" class="center-align  small-table-image" src="'+(null==(__t=rightImage)?"":__t)+'" alt=""></div>\r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<div class="col-12 form-section">\r\n				<label for="f-right-sectionDescription" class="pull-left">Image Caption<i title="This descriptive text is displayed just underneath the Image Title." class="icon icon-tool-tip x-space-s"></i></label>\r\n				<textarea name="f-right-sectionDescription" id="f-right-sectionDescription" class="size-2">'+(null==(__t=rightCaption)?"":__t)+'</textarea>\r\n			</div>\r\n			<div class="col-12 right-align">Max. 120 Characters</div>\r\n		</div>\r\n	</div>\r\n	<!-- Right Image Section End -->\r\n</div>';return __p}}),define("content/category-sections/content-management/wedding-flowers/models/flower-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-wedding-flower.json",defaults:{mainTitleflowers:"Main Title & Copy",metaTitleflowers:"Meta Title",metaKeywordsflowers:"Meta Keywords",metaDescriptionflowers:"Meta Description",metaTagsflowers:"Meta Tags",sectionsflowers:[],mainTitlecolors:"Main Title & Copy",metaTitlecolors:"Meta Title",metaKeywordscolors:"Meta Keywords",metaDescriptioncolors:"Meta Description",metaTagscolors:"Meta Tags",sectionscolors:[]}});return new t}),define("content/category-sections/content-management/wedding-flowers/models/section-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,sequence:null,sectionStatus:!0,sectionTitle:"",sectionDescription:"",leftTitle:"",leftCaption:"",leftImage:"",middleTitle:"",middleCaption:"",middleImage:"",rightTitle:"",rightCaption:"",rightImage:""}});return t}),define("content/category-sections/content-management/wedding-flowers/collections/flower-collection",["backbone","../models/flower-model"],function(e,t){var n=e.Collection.extend({model:t});return new n}),define("content/category-sections/content-management/wedding-flowers/collections/section-collection",["backbone","../models/section-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return n}),define("content/category-sections/content-management/wedding-flowers/templates/section-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></td>\r\n	<td class="left-align">'+(null==(__t=sectionTitle)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=sectionDescription)?"":__t)+"</td>\r\n	<td><img src="+(null==(__t=leftImage)?"":__t)+' class="small-table-image"></td>\r\n	<td><img src='+(null==(__t=middleImage)?"":__t)+' class="small-table-image"></td>\r\n	<td><img src='+(null==(__t=rightImage)?"":__t)+' class="small-table-image"></td>\r\n	<td><input '+(null==(__t=sectionStatus?"checked":"")?"":__t)+' type="checkbox"  id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch"/>\r\n          <label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n            <div class="on-off-switch-state">on</div></td>\r\n	<td><button type="button" class="icon icon-btn icon-edit icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/content-management/wedding-flowers/views/section-view",["backbone","../templates/section-view-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent,this.listenTo(this.collection,"remove",function(e){this.model===e&&this.remove()}.bind(this))},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","change .on-off-switch":"handleActiveSwitch"},cacheElem:function(){this.$onOffSwitch=this.$el.find(".on-off-switch")},handleDelete:function(){n.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)},handleActiveSwitch:function(){this.model.set({sectionStatus:this.$onOffSwitch.is(":checked")})}});return i}),define("content/category-sections/content-management/wedding-flowers/views/edit-view",["backbone","../templates/edit-view-tpl","../models/section-model","../models/flower-model","../collections/section-collection","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({template:t,initialize:function(){},render:function(){return this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.cacheElem(),this.delegateEvents(),this},events:{"click #save-btn":"handleSave","click .image-upload":"handleImageUpload","click #cancel-btn":"closeModal","click #print-btn":"handlePrint","change .on-off-switch":"toggleActive","change input":"triggerChange"},triggerChange:function(){r.trigger("form:editing")},cacheElem:function(){this.$sectionTitle=this.$el.find("#f-section-title"),this.$sectionStatus=this.$el.find("#f-sectionStatus"),this.$sectionDescription=this.$el.find("#f-sectionDescription"),this.$leftTitle=this.$el.find("#f-left-image-title"),this.$leftImage=this.$el.find("#f-left-image"),this.$leftCaption=this.$el.find("#f-left-sectionDescription"),this.$middleTitle=this.$el.find("#f-middle-image-title"),this.$middleImage=this.$el.find("#f-middle-image"),this.$middleCaption=this.$el.find("#f-middle-sectionDescription"),this.$rightTitle=this.$el.find("#f-right-image-title"),this.$rightImage=this.$el.find("#f-right-image"),this.$rightCaption=this.$el.find("#f-right-sectionDescription"),this.$onOffSwitch=this.$el.find(".on-off-switch")},handleSave:function(){this.model.set({sectionTitle:this.$sectionTitle.val().trim(),sectionCaption:this.$sectionDescription.val().trim(),sectionStatus:this.$sectionStatus.is(":checked"),leftTitle:this.$leftTitle.val().trim(),leftImage:this.$leftImage.attr("src"),leftCaption:this.$leftCaption.val().trim(),middleTitle:this.$middleTitle.val().trim(),middleImage:this.$middleImage.attr("src"),middleCaption:this.$middleCaption.val().trim(),rightTitle:this.$rightTitle.val().trim(),rightImage:this.$rightImage.attr("src"),rightCaption:this.$rightCaption.val().trim()}),this.parent.sectionCollection.get(this.model)||(this.model.set("id",new Date),this.parent.sectionCollection.add(this.model)),this.parent.sectionCollectionColor.get(this.model)||(this.model.set("id",new Date),this.parent.sectionCollectionColor.add(this.model)),this.closeModal(),this.parent.addAllSections()},handleImageUpload:function(e){var t=this;console.log(e.currentTarget.id),"leftimagebutton"==e.currentTarget.id?(console.log("left"),r.trigger("form:image-upload",{cb:function(e){t.$leftImage.prop("src",e)},active:t.$leftImage.prop("src"),name:"Wedding Galleries"})):"middleimagebutton"==e.currentTarget.id?(console.log("middle"),r.trigger("form:image-upload",{cb:function(e){t.$middleImage.prop("src",e)},active:t.$middleImage.prop("src"),name:"Wedding Galleries"})):"rightimagebutton"==e.currentTarget.id&&(console.log("right"),r.trigger("form:image-upload",{cb:function(e){t.$rightImage.prop("src",e)},active:t.$rightImage.prop("src"),name:"Wedding Galleries"}))},handlePrint:function(){var e=document.title,t=document.getElementById("section-modal").innerHTML,n=window.open();n.document.open(),n.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),setTimeout(function(){n.print(),n.close()},300)},closeModal:function(){var e=this;e.parent.closeModal()},toggleActive:function(){this.model.set({sectionStatus:this.$onOffSwitch.is(":checked")}),console.log(this.model.attributes.sectionStatus),r.trigger("form:editing"),r.trigger("form:save",this.$tip)}});return new a}),define("content/category-sections/content-management/wedding-flowers/views/wedding-flower-home-view",["backbone","../templates/wedding-flower-home-view-tpl","../templates/edit-view-tpl","../models/flower-model","../models/section-model","../collections/flower-collection","../collections/section-collection","../views/section-view","../views/edit-view","global-events"],function(e,t,n,i,o,r,a,s,l,c){var d=e.View.extend({tagName:"div",id:"f-wedding-flower-page",template:t,initialize:function(){l.parent=this},render:function(){var e=this;return i.fetchCustom().done(function(){this.$el.html(this.template(i.toJSON())),this.delegateEvents(),this.cacheElem(),this.stopListening(this.sectionCollection,"resequenced"),i.stopListening(this.sectionCollection),this.sectionCollection=new a(i.get("sectionsflowers")),i.listenTo(this.sectionCollection,"add remove change",function(){i.set("sectionsflowers",this.sectionCollection.toJSON())}.bind(this)),this.listenTo(this.sectionCollection,"resequenced",this.addAllSections),this.stopListening(this.sectionCollectionColor,"resequenced"),i.stopListening(this.sectionCollectionColor),this.sectionCollectionColor=new a(i.get("sectionscolors")),i.listenTo(this.sectionCollectionColor,"add remove change",function(){i.set("sectionscolors",this.sectionCollectionColor.toJSON())}.bind(this)),this.listenTo(this.sectionCollectionColor,"resequenced",this.addAllSections),this.applyTabs(),this.applyAccordion(),this.addAllSections(),this.applySortableFlower(),this.applySortableColor(),this.setModal(),e.applyToolTips()}.bind(this)),this},events:{"click #save-btn":"handleSave","click #new-btn":"handleAddSection","click #new-color-btn":"handleAddColor","click #reset-btn":"handleReset"},cacheElem:function(){this.$modal=this.$el.find("#wedding-edit-modal"),this.$sectionFlowerList=this.$el.find("#section-flower-list"),this.$sectionColorList=this.$el.find("#section-color-list"),this.$optionalflowers=this.$el.find("#optional-flowers"),this.$optionalcolors=this.$el.find("#optional-colors"),this.$accordionflowers=this.$el.find("#accordion-flowers"),this.$accordioncolors=this.$el.find("#accordion-colors"),this.$metaTitleflowers=this.$el.find("#f-meta-title-flowers"),this.$metaKeywordsflowers=this.$el.find("#f-meta-keywords-flowers"),this.$metaDescflowers=this.$el.find("#f-meta-desc-flowers"),this.$metaTagsflowers=this.$el.find("#f-meta-tags-flowers"),this.$metaTitlecolors=this.$el.find("#f-meta-title-colors"),this.$metaKeywordscolors=this.$el.find("#f-meta-keywords-colors"),this.$metaDesccolors=this.$el.find("#f-meta-desc-colors"),this.$metaTagscolors=this.$el.find("#f-meta-tags-colors"),this.$tip=this.$el.find(".tooltip-change")},handleSave:function(){i.set({metaTitleflowers:this.$metaTitleflowers.val().trim(),metaKeywordsflowers:this.$metaKeywordsflowers.val().trim(),metaDescriptionflowers:this.$metaDescflowers.val().trim(),metaTagsflowers:this.$metaTagsflowers.val().trim(),metaTitlecolors:this.$metaTitlecolors.val().trim(),metaKeywordscolors:this.$metaKeywordscolors.val().trim(),metaDescriptioncolors:this.$metaDesccolors.val().trim(),metaTagscolors:this.$metaTagscolors.val().trim()}),c.trigger("form:save",this.$tip)},handleReset:function(){},applyToolTips:function(){this.$tip.tooltip()},handleEdit:function(e){l.model=e,this.$modal.empty(),this.$modal.append(l.render().el),this.$modal.dialog("open")},handleAddSection:function(){var e=new o;this.handleEdit(e)},handleAddColor:function(){var e=new o;this.handleEdit(e)},addSectionFlower:function(e){var t=new s({model:e,collection:this.sectionCollection,parent:this});this.$sectionFlowerList.append(t.render().el)},addSectionColor:function(e){var t=new s({model:e,collection:this.sectionCollectionColor,parent:this});this.$sectionColorList.append(t.render().el)},addAllSections:function(){this.$sectionFlowerList.empty(),this.$sectionColorList.empty(),this.sectionCollection.each(this.addSectionFlower,this),this.sectionCollectionColor.each(this.addSectionColor,this)},applyTabs:function(){this.$el.find("#tabs").tabs()},applyAccordion:function(){var e=this;e.$optionalflowers&&this.$optionalflowers.click(function(){var t=$(this);return e.$accordionflowers.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide(),e.$optionalcolors&&this.$optionalcolors.click(function(){var t=$(this);return e.$accordioncolors.fadeToggle(200).toggleClass("active"),t.hasClass("icon-opened")?t.switchClass("icon-opened","icon-closed"):t.switchClass("icon-closed","icon-opened"),!1}).closest(".row").next().hide()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortableColor:function(){var e=this;e.$el.find("#section-color-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionColorList.children().each(function(t){var n=$(this).data("id");e.sectionCollectionColor.where({id:n})[0].set("sequence",t+1)}),e.sectionCollectionColor.changeSort("sequence"),e.sectionCollectionColor.sort(),e.sectionCollectionColor.trigger("resequenced")}})},applySortableFlower:function(){var e=this;e.$el.find("#section-flower-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionFlowerList.children().each(function(t){var n=$(this).data("id");e.sectionCollection.where({id:n})[0].set("sequence",t+1)}),e.sectionCollection.changeSort("sequence"),e.sectionCollection.sort(),e.sectionCollection.trigger("resequenced")}})},handlePrintModal:function(){this.showModal(l)},setModal:function(){this.$modal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=new o,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},closeModal:function(){this.$modal.dialog("close")}});return new d}),define("content/category-sections/content-management/wedding-flowers/views/wedding-flower-view",["backbone","./wedding-flower-home-view","global-events"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},events:{"change input":"triggerChange"},triggerChange:function(){n.trigger("form:editing")},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)}});return new i}),define("content/category-sections/marketing-promotions/manage-marketing-emails/templates/manage-marketing-emails-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage eMail Marketing Campaigns</h2>\r\n			<button class="btn btn-submit pull-right" id="save-btn">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Your eFlorist automatically sends promotional emails on your behalf. Use this section to edit those emails, and choose the products you want to promote, and edit the subject line of your emails.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<div class="col-12">\r\n		<div class="label">Let Teleflora Send eMail Marketing Campaigns<i title="Leave this turned on so we can send emails to your customers on your behalf, and get more orders coming to your website." class="icon icon-tool-tip x-space-s"></i></div>\r\n		<input '+(null==(__t=emailCampaignActive?"checked":"")?"":__t)+' type="checkbox" id="f-campaign-active" name="f-campaign-active" class="on-off-switch" />\r\n		<label for="f-campaign-active" class="on-off-switch-label">\r\n		    <div class="on-off-switch-state">on</div>\r\n		</label>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel alert-panel '+(null==(__t=emailCampaignActive?"hidden":"")?"":__t)+'" id="m-email-campaign-alert">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-4x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				Email marketing campaigns have been disabled for this site. Please note that when deactivating email campaigns, if there are any email campaigns listed below whose Product Selection Deadline has already passed, those email campaigns are already scheduled and will be sent. All other email campaigns after those will be disabled and will not be sent.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<table id="email-campaign-table" class="table alternate">\r\n			<thead>\r\n				<tr>\r\n					<th class=\'col-5 left-align indented-s\'>Email Subject</th>\r\n					<th class=\'col-2\'>Product Selection Deadline</th>\r\n					<th class=\'col-1\'>Campaign Launches</th>\r\n					<th class=\'col-1\'>Edit</th>\r\n					<th class=\'col-2\'>Active</th>\r\n					<th class=\'col-1\'>Reset Changes</th>\r\n				</tr>\r\n			</thead>\r\n			<tbody id="email-campaign-list"></tbody>\r\n		</table>\r\n	</div>\r\n</div>';return __p}}),define("content/category-sections/marketing-promotions/manage-marketing-emails/models/manage-marketing-emails-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/manage-marketing-emails-settings.json",defaults:{emailCampaignActive:!0}});return new t}),define("content/category-sections/marketing-promotions/manage-marketing-emails/models/email-campaign-model",["backbone"],function(e){var t=e.Model.extend({defaults:function(){return{name:"",featuredProductsNum:6,active:!0,subject:"",sendDate:"",pullDate:"",description:"",promotionCode:"",featuredProducts:[],customSubject:"",customFeaturedProducts:null,editable:!0}},initialize:function(){var e=this.get("pullDate");e&&new Date(e).getTime()>(new Date).getTime()?this.set("editable",!0):this.set("editable",!1)}});return t}),define("content/category-sections/marketing-promotions/manage-marketing-emails/collections/email-campaign-collection",["backbone","../models/email-campaign-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-email-campaigns.json",model:t});return new n}),define("content/category-sections/marketing-promotions/manage-marketing-emails/templates/email-campaign-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<td class="left-align left-pad-m">\r\n	'+(null==(__t=customSubject?customSubject:subject)?"":__t)+"\r\n</td>\r\n<td>"+(null==(__t=pullDate)?"":__t)+"</td>\r\n<td>"+(null==(__t=sendDate)?"":__t)+'</td>\r\n<td>\r\n	<button class="icon icon-btn icon-2x icon-edit"></button>\r\n</td>\r\n<td>\r\n	<div class="centered-content-container hide-overflow">\r\n		<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" class="on-off-switch" id="'+(null==(__t="f-"+id)?"":__t)+'" name="'+(null==(__t="f-"+id)?"":__t)+'"/>\r\n		<label for="'+(null==(__t="f-"+id)?"":__t)+'" class="on-off-switch-label">\r\n		    <div class="on-off-switch-state">on</div>\r\n		</label>\r\n	</div>\r\n</td>\r\n<td>\r\n	',(customSubject||customFeaturedProducts||!active)&&editable&&(__p+='\r\n		<button class="icon icon-btn icon-2x icon-undo"></button>\r\n	'),__p+="\r\n</td>\r\n";return __p}}),define("content/category-sections/marketing-promotions/manage-marketing-emails/views/email-campaign-view",["backbone","../templates/email-campaign-tpl","global-events"],function(e,t,n){var i=e.View.extend({tagName:"tr",template:t,initialize:function(e){this.parent=e.parent},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$active=this.$el.find(".on-off-switch")},events:{"click .icon-edit":"handleEdit","click .icon-undo":"handleUndo","click .on-off-switch":"handleSwitch"},handleEdit:function(){this.parent.handleEdit(this.model)},handleUndo:function(){this.model.get("editable")&&(this.model.set({active:!0,customSubject:"",customFeaturedProducts:null}),setTimeout(this.render.bind(this),100))},handleSwitch:function(e){this.model.get("editable")?(n.trigger("form:editing"),this.model.set({active:this.$active.is(":checked")}),setTimeout(this.render.bind(this),100)):e.preventDefault()}});return i}),define("content/category-sections/marketing-promotions/manage-marketing-emails/views/manage-marketing-emails-home-view",["backbone","../templates/manage-marketing-emails-home-tpl","../models/manage-marketing-emails-model","../collections/email-campaign-collection","./email-campaign-view","global-events","jqueryui","datatables"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",id:"p-manage-marketing-emails",template:t,initialize:function(){var e=this;$.fn.dataTable.ext.search.push(function(t,n){if("email-campaign-table"!==t.nTable.id)return!0;var i=new Date(n[1]).getTime(),o=e.$emailCampaignActive.is(":checked");return o||i<(new Date).getTime()}),$.when(n.fetch(),i.fetch()).done(this.render.bind(this))},render:function(){return this.$el.html(this.template(n.toJSON())),this.delegateEvents(),this.cacheElem(),this.addAllEmailCampaigns(),this.applyToolTips(),this.paginateTable(),this},events:{"change #f-campaign-active":"handleButtonSwitch","click #save-btn":"handleSave"},cacheElem:function(){this.$emailCampaignActive=this.$el.find("#f-campaign-active"),this.$emailCampaignList=this.$el.find("#email-campaign-list"),this.$emailCampaignTable=this.$el.find("#email-campaign-table"),this.$emailAlert=this.$el.find("#m-email-campaign-alert"),this.$tip=this.$el.find(".tooltip-change")},handleEdit:function(e){this.parent.showEdit(e)},addEmailCampaign:function(e){if(n.get("emailCampaignActive")||!e.get("editable")){var t=new o({model:e,parent:this});this.$emailCampaignList.append(t.render().el)}},addAllEmailCampaigns:function(){this.$emailCampaignList.empty(),i.each(this.addEmailCampaign,this)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleSave:function(){r.trigger("form:save",this.$tip)},handleButtonSwitch:function(e){r.trigger("form:editing");var t=$(e.target);t.is(":checked")?this.$emailAlert.addClass("hidden"):this.$emailAlert.removeClass("hidden"),n.set("emailCampaignActive",t.is(":checked")),this.dataTable.columns(1).search("").draw()},paginateTable:function(){this.dataTable=this.$emailCampaignTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new a}),define("content/category-sections/marketing-promotions/manage-marketing-emails/templates/edit-email-campaign-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div id="m-create-edit-email-campaign">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Edit Marketing Email Campaign</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use the tools below to edit your email campaigns. Select the products, add a promotion code, and choose your own email subject.\r\n		</div>\r\n	</div>\r\n\r\n	<form id="edit-form" class="row row-spaced panel form-section">\r\n		<div class="panel-title">Email Campaign Settings</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-2">\r\n				<div class="label">Active</div>\r\n				<input '+(null==(__t=editable?"":"disabled")?"":__t)+" "+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n				<label for="f-active" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n\r\n			<div class="col-4">\r\n				<label for="f-name">Email Campaign Name</label>\r\n				<input disabled type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'">\r\n			</div>\r\n\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-subject">Email Subject</label><i class="icon icon-tool-tip x-space-s" title="This is the first thing your customer will see when looking at this email, so we like to use something catchy to get them to open the email."></i>\r\n				<input '+(null==(__t=editable?"":"disabled")?"":__t)+' type="text" id="f-subject" name="f-subject" value="'+(null==(__t=customSubject?customSubject:subject)?"":__t)+'">\r\n			</div>\r\n			<div class="col-3">\r\n				<label for="send-date">Send Date</label><i title="This is the date the email will be sent out." class="icon icon-tool-tip x-space-s"></i>\r\n				<input disabled type="text" id="send-date" name="send-date" class="date" value="'+(null==(__t=sendDate)?"":__t)+'">\r\n			</div>\r\n			<div class="col-3">\r\n				<label for="pull-date">Product Pull Date</label><i title="This is the deadline for selecting the products you\'d like to feature." class="icon icon-tool-tip x-space-s"></i>\r\n				<input disabled type="text" id="pull-date" name="pull-date" class="date" value="'+(null==(__t=pullDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<label for="f-featured-products-num">Number of Featured Products</label>\r\n				<input disabled type="text" id="f-featured-products-num" name="f-featured-products-num" value="'+(null==(__t=featuredProductsNum)?"":__t)+'">\r\n			</div>\r\n\r\n			<div class="col-6">\r\n				<label for="f-promotion-code">Promotion Code Included</label><i class="icon icon-tool-tip x-space-s" title="Including a promotion code really increases your chances of receiving an order. Include your promotion code here."></i>\r\n				<input type="text" id="f-promotion-code" name="f-promotion-code" value="'+(null==(__t=promotionCode)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n\r\n			<div class="col-12">\r\n				<label for="f-description">Marketing Description</label><i class="icon icon-tool-tip x-space-s" title="This descriptive text is shown in the banner of the email. Using this to explain an offer along with the promotion code field is a great way to generate new orders from repeat customers."></i>\r\n				<textarea class="size-1">'+(null==(__t=description)?"":__t)+'</textarea>\r\n			</div>\r\n\r\n		</div>\r\n	</form>\r\n\r\n	<div id="featured-product"></div>\r\n</div>';
return __p}}),define("content/category-sections/marketing-promotions/manage-marketing-emails/views/edit-email-campaign-view",["backbone","../templates/edit-email-campaign-tpl","../collections/email-campaign-collection","components/featured-product/views/featured-product-view","../models/manage-marketing-emails-model","components/featured-product/collections/featured-product-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({template:t,initialize:function(){},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),featuredProducts=this.model.get("featuredProducts"),customFeaturedProducts=this.model.get("customFeaturedProducts"),currentCollection=new r(customFeaturedProducts?customFeaturedProducts:featuredProducts),this.featuredProductView=new i({collection:currentCollection,title:"Email Campaign Featured Products",maxNumberProducts:this.model.get("featuredProductsNum"),selectAll:!0,disabled:!this.model.get("editable")}),this.$featuredProduct.append(this.featuredProductView.render().el),this.applyToolTips(),this.validateForm(),this},cacheElem:function(){this.$featuredProduct=this.$el.find("#featured-product"),this.$subject=this.$el.find("#f-subject"),this.$active=this.$el.find("#f-active"),this.$editForm=this.$el.find("#edit-form"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #cancel-btn":"handleCancelClick","click #save-btn":"handleSaveClick"},handleCancelClick:function(){a.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveClick:function(){if(this.$editForm.valid()){var e=this.$subject.val().trim();e!==this.model.get("subject")&&this.model.set({customSubject:e}),this.model.set({active:this.$active.is(":checked")}),_.isEqual(this.model.get("featuredProducts"),this.featuredProductView.collection.toJSON())?this.model.set("customFeaturedProducts",null):this.model.set("customFeaturedProducts",this.featuredProductView.collection.toJSON()),a.trigger("form:save",this.$tip),this.parent.showHome()}else a.trigger("form:invalid",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$editForm.validate({rules:{"f-subject":"required"}})}});return new s}),define("content/category-sections/marketing-promotions/manage-marketing-emails/views/manage-marketing-emails-view",["backbone","./manage-marketing-emails-home-view","./edit-email-campaign-view"],function(e,t,n){var i=e.View.extend({tagName:"div",id:"m-manage-marketing-emails",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){e&&this.regions.visible!==e&&(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showEdit:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/common/email-settings/templates/email-settings-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Email Settings</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit">Save Changes</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n   \r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			This page controls other non-marketing emails that are sent out on your behalf. Use this page to change an email address, choose a theme for emails, and more.\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Merchant Confirmation Emails</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-6">\r\n				<div class="label">\r\n					Send Merchant Confirmation Emails<i title="Merchant confirmation emails go to you when an order is placed on your website, and include information on that order. We recommend keeping this turned on so you\'ll know as soon as someone places an order on your website." class="icon icon-tool-tip x-space-s"></i>\r\n				</div>\r\n				<input '+(null==(__t=merchantConfirmationActive?"checked":"")?"":__t)+' type="checkbox" id="merchant-confirmation-active" name="merchant-confirmation-active" class="on-off-switch" />\r\n		        <label for="merchant-confirmation-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n\r\n			<div class="col-6 form-section">\r\n				<label for="merchant-confirmation-email">Merchant Confirmation Email Address</label><i title="Which address should you confirmations go to? Enter it here." class="icon icon-tool-tip x-space-s"></i>\r\n				<input type="text" id="merchant-confirmation-email" name="merchant-confirmation-email" value="'+(null==(__t=merchantConfirmationEmail)?"":__t)+'" autofocus>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Transactional Email Settings</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div id="current-layout-container" class="row row-spaced"></div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<div class="label">\r\n					Order Confirmation Emails<i title="This is sent to your customer to let them know the order went through successfully. We recommend leaving this turned on." class="icon icon-tool-tip x-space-s"></i>\r\n				</div>\r\n				<input '+(null==(__t=orderConfirmationActive?"checked":"")?"":__t)+' type="checkbox" id="order-confirmation-active" name="order-confirmation-active" class="on-off-switch" />\r\n		        <label for="order-confirmation-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<label for="confirmation-email-header">Confirmation Email Header</label><i title="You can thank your customers for their business at the top of the confirmation email here." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-3" name="confirmation-email-header" id="confirmation-email-header" maxlength="1000">'+(null==(__t=confirmationEmailHeader)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<label for="confirmation-email-footer">Confirmation Email Footer</label><i title="Need to let you customers know something about their order delivery? You can enter that information here." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea class="size-3" name="confirmation-email-footer" id="confirmation-email-footer" maxlength="1000">'+(null==(__t=confirmationEmailFooter)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3">\r\n				<div class="label">\r\n					Thank You Emails<i title="This email is automatically sent out on your behalf to thank your customer for their order. We recommend leaving this turned on." class="icon icon-tool-tip x-space-s"></i>\r\n				</div>\r\n				<input '+(null==(__t=thankYouActive?"checked":"")?"":__t)+' type="checkbox" id="thank-you-active" name="thank-you-active" class="on-off-switch" />\r\n		        <label for="thank-you-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n\r\n			<div class="col-3">\r\n				<div class="label">\r\n					Welcome Emails<i title="We send these emails out to your customers after they sign up for an account on your website. We recommend leaving this turned on." class="icon icon-tool-tip x-space-s"></i>\r\n				</div>\r\n				<input '+(null==(__t=welcomeActive?"checked":"")?"":__t)+' type="checkbox" id="welcome-active" name="welcome-active" class="on-off-switch" />\r\n		        <label for="welcome-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n\r\n			<div class="col-3">\r\n				<div class="label">\r\n					Gift Reminders<i title="Your customers can sign up for gift reminders, and your website will send them an email automatically to remind them of the event. We recommend leaving this turned on." class="icon icon-tool-tip x-space-s"></i>\r\n				</div>\r\n				<input '+(null==(__t=giftRemindersActive?"checked":"")?"":__t)+' type="checkbox" id="gift-reminders-active" name="gift-reminders-active" class="on-off-switch" />\r\n		        <label for="gift-reminders-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Cart Abandonment Email Settings</div>\r\n			</div>\r\n		</div>	\r\n		<div class="row row-spaced">\r\n			<div class="col-4 form-section">\r\n				<div class="label">\r\n					Send Cart Abandonment Emails<i title="Enabling this setting will send emails to your registered customers who leave your site with items in the cart." class="icon icon-tool-tip x-space-s"></i>\r\n				</div>\r\n				<input '+(null==(__t=cartAbandon?"checked":"")?"":__t)+' type="checkbox" id="cartAbandon-active" name="cartAbandon-active" class="on-off-switch" />\r\n		        <label for="cartAbandon-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>			\r\n			<div class="col-4 form-section">\r\n				<div class="label">Promo Code in Email</div>\r\n				<input type="text" name="f-cartPromo" id="f-cartPromo" value="'+(null==(__t=cartPromo)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<div class="label">Email Message</div>\r\n				<textarea class="size-2" name="f-cartText" id="f-cartText">'+(null==(__t=cartText)?"":__t)+"</textarea>\r\n			</div>\r\n		</div>\r\n	</div>";return __p}}),define("content/category-sections/common/email-settings/models/email-settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-email-settings.json",defaults:{merchantConfirmationActive:!0,merchantConfirmationEmail:"",orderConfirmationActive:!0,confirmationEmailHeader:"",confirmationEmailFooter:"",thankYouActive:!0,welcomeActive:!0,giftRemindersActive:!0,cartAbandon:!0,cartPromo:"",cartText:"",featuredLayout:{}}});return new t}),define("components/current-layout/collections/layout-collection",["backbone","../models/layout-model"],function(e,t){var n=e.Collection.extend({url:"/mock/layouts.json",model:t,getActive:function(){return this.where({active:!0})},setAllInactive:function(){this.getActive().forEach(function(e){e.set("active",!1)})}});return n}),define("content/category-sections/common/email-settings/views/email-settings-view",["backbone","../templates/email-settings-tpl","../models/email-settings-model","components/current-layout/views/current-layout-view","components/current-layout/collections/layout-collection","global-events","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"form",id:"p-homepage-customization",template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.layoutCollection=new o(n.get("featuredLayout")),e.currentLayoutView=new i({type:"Email",collection:e.layoutCollection}),e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyToolTips(),e.$currentLayoutContainer.append(e.currentLayoutView.render().el),e.validateForm()}),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel"},cacheElem:function(){this.$currentLayoutContainer=this.$el.find("#current-layout-container"),this.$merchantConfirmationActive=this.$el.find("#merchant-confirmation-active"),this.$merchantConfirmationEmail=this.$el.find("#merchant-confirmation-email"),this.$orderConfirmationActive=this.$el.find("#order-confirmation-active"),this.$confirmationEmailHeader=this.$el.find("#confirmation-email-header"),this.$confirmationEmailFooter=this.$el.find("#confirmation-email-footer"),this.$thankYouActive=this.$el.find("#thank-you-active"),this.$welcomeActive=this.$el.find("#welcome-active"),this.$giftRemindersActive=this.$el.find("#gift-reminders-active"),this.$tip=this.$el.find(".tooltip-change")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){var e=this;e.editForm=e.$el.validate({rules:{"merchant-confirmation-email":{email:!0,required:function(){return e.$merchantConfirmationActive.is(":checked")}},"confirmation-email-header":{maxlength:1e3},"confirmation-email-footer":{maxlength:1e3}}})},handleSave:function(){var e=this;if(this.editForm.valid()){var e=this;n.set({merchantConfirmationActive:this.$merchantConfirmationActive.is(":checked"),merchantConfirmationEmail:this.$merchantConfirmationEmail.val().trim(),orderConfirmationActive:this.$orderConfirmationActive.is(":checked"),confirmationEmailHeader:this.$confirmationEmailHeader.val().trim(),confirmationEmailFooter:this.$confirmationEmailFooter.val().trim(),thankYouActive:this.$thankYouActive.is(":checked"),welcomeActive:this.$welcomeActive.is(":checked"),giftRemindersActive:this.$giftRemindersActive.is(":checked"),featuredLayout:e.layoutCollection.where({active:!0})[0].toJSON()}),r.trigger("form:save",this.$tip)}else r.trigger("form:invalid",this.$tip)},handleCancel:function(){r.trigger("form:reset",this.render.bind(this))}});return new a}),define("content/category-sections/more/email-list/templates/email-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Email List Management</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel alert-panel hidden">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				Error message text here\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this section to manage your customer email list. You can view and download a list of your existing customers or upload a new list to add a new set of customer emails.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced y-space-top-xl">\r\n	<div class="col-4">\r\n		<button type="button" id="download-btn" class="btn btn-download btn-submit pull-left"><div class="icon icon-1p5x icon-save"></div> Download List</button>\r\n	</div>\r\n\r\n	<div class="col-3 pull-right">\r\n		<button type="button" id="sample-btn" class="btn btn-other pull-right"> Sample File</button>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section updateEmailListPanel">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="panel-title clearfix">\r\n				<div class="y-space-top-m pull-left">Update Email List</div>\r\n				<div class="btn-panel">\r\n					<button id="save-btn" class="btn btn-submit">Upload</button>\r\n				</div>\r\n			</div>		\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel alert-panel hidden" id="modal-alert">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					You must select a CSV file to upload.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>	\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div>Column headings in the CSV file must be exactly the same as in the sample file.</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n	<div class="row row-spaced y-space-top-xl">\r\n		<div class="col-5 select-container form-section left-align">\r\n			<div class="label">Select Update Method</div>\r\n			<select name="f-email-update-method" id="f-email-update-method">\r\n				<option value="">Please select a method</option>\r\n				<option value="Add New Records">Add New Records</option>\r\n				<option value="Opt Out Existing Records">Opt Out Existing Records</option>\r\n				<option value="Add New &amp; Opt In Existing Records">Add New &amp; Opt In Existing Records</option>\r\n			</select>\r\n		</div>\r\n		<div class="col-4 form-section">\r\n			\r\n			<div class="label hidelabel">Select File to Upload</div>\r\n	    	<button type="button" id="uploadimage" class="btn btn-other btn-file hidebutton">\r\n	    		<input type="file" id="file-btn"> Browse...\r\n	    	</button>\r\n	    	\r\n	    	<input type=\'text\' class="hidden pathName" value="'+(null==(__t=pathName)?"":__t)+'">	\r\n	    		\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced y-space-top-m"></div>\r\n\r\n</div>';return __p}}),define("content/category-sections/more/email-list/models/email-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/email-list-management.json",defaults:{pathName:"",fVal:""}});return new t}),define("content/category-sections/more/email-list/views/email-list-view",["backbone","../templates/email-list-tpl","../models/email-model","global-events","jqueryui"],function(e,t,n){var i=e.View.extend({tagName:"div",id:"p-email-list-management",template:t,initialize:function(){},render:function(){var e=this;return n.fetchCustom().done(function(){this.$el.html(this.template(n.toJSON())),e.cacheElem(),e.delegateEvents()}.bind(this)),e},events:{"click #cancel-btn":"handleCancel","click #update-btn":"showHidePanel","change #uploadimage":"handleSave","click #sample-btn":"handleDownload"},cacheElem:function(){this.$modalAlert=this.$el.find("#modal-alert"),this.$save=this.$el.find("#save-btn"),this.$fileBtn=this.$el.find("#file-btn"),this.$updatelistBtn=this.$el.find("#update-btn"),this.$fVal=this.$el.find("#f-fVal"),this.$pathName=this.$el.find(".pathName"),this.$hideButton=this.$el.find(".hidebutton"),this.$hideLabel=this.$el.find(".hidelabel"),this.$counter=0},handleDownload:function(){window.location.assign("/mock/Email-Uploads-Sample.xls")},showHidePanel:function(){this.$counter%2===0?(this.$counter++,this.$showHidePanel.removeClass("hidden").fadeIn("slow"),this.$updatelistBtn.html('<div class="icon icon-lg icon-down-chevron"></div> HIDE LIST')):(this.$counter++,this.$showHidePanel.addClass("hidden").fadeOut("slow"),this.$updatelistBtn.html('<div class="icon icon-lg icon-add"></div>UPDATE LIST'))},handleSave:function(){var e=this,t=this.$fileBtn.val();t.indexOf(".csv")>-1?(n.set({pathName:this.$fileBtn.val()}),this.$hideButton.hide(),this.$hideLabel.text("Selected File"),this.$pathName.removeClass("hidden").show().prop("disabled",!0),t=t.replace(/^.*[\\\/]/,""),this.$pathName.val(t)):(this.$modalAlert.removeClass("hidden"),setTimeout(function(){e.$modalAlert.addClass("hidden")},5e3))}});return new i}),define("content/category-sections/more/floral-app-code-management/templates/floral-app-code-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Floral App Code Management</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<button type="button" id="new-btn" class="btn btn-submit pull-left">Add New Code</button>\r\n		<button type="button" id="bulk-btn" class="x-space-m btn btn-submit pull-left">Bulk Upload</button>\r\n		<button type="button" id="download-btn" class="btn btn-submit pull-left">Export</button>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="panel-title">Search for an Existing Code</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<div class="col-4">\r\n		<label for="f-siteID-search">Search by Site ID</label><i class="icon icon-tool-tip x-space-s" title="Search for a Floral App code by the ID of the site associated with it."></i>\r\n		<div class="search-container">\r\n			<input type="text" id="f-siteID-search" name="f-siteID-search">\r\n		</div>\r\n	</div>		\r\n\r\n	<div class="col-4">\r\n		<label for="f-floralCode-search">Search by Floral Code</label><i class="icon icon-tool-tip x-space-s" title="Search for a Floral App code using the unique Floral Code used by Floral App."></i>\r\n		<div class="search-container">\r\n			<input type="text" id="f-floralCode-search" name="f-floralCode-search">\r\n		</div>\r\n	</div>	\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n	<table id="code-table" class="table alternate">\r\n		<thead>\r\n			<tr>\r\n				<th class="left-align">Site ID</th>\r\n				<th class="left-align">Floral Code</th>\r\n				<th>Status</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody id="code-list"></tbody>\r\n	</table>\r\n	</div>\r\n</div>\r\n\r\n<div id="create-edit-modal"></div>\r\n<div id="bulk-modal"></div>';return __p}}),define("content/category-sections/more/floral-app-code-management/models/code-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,type:"Custom",active:!0,siteID:"",floralCode:"",pathName:"",fVal:""}});return t}),define("content/category-sections/more/floral-app-code-management/models/bulk-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null}});return new t}),define("content/category-sections/more/floral-app-code-management/collections/code-collection",["backbone","../models/code-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-floral-app-code.json",model:t});return new n}),define("content/category-sections/more/floral-app-code-management/templates/code-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align">'+(null==(__t=siteID)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=floralCode)?"":__t)+'</td>\r\n	<td>\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n			<label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label no-margin">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/more/floral-app-code-management/views/code-view",["backbone","../templates/code-view-tpl","../collections/code-collection","settings","global-events"],function(e,t,n,i,o){var r=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.collection=e.collection},render:function(){var e=this.model.toJSON();return e.baseUrl=i.floralAppCodeBaseUrl,this.setElement(this.template(e)),this.delegateEvents(),this},events:{"click .icon-edit":"handleEdit","change input":"triggerChange"},triggerChange:function(){o.trigger("form:editing")},handleEdit:function(){this.parent.handleEdit(this.model)}});return r}),define("content/category-sections/more/floral-app-code-management/templates/create-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div id="create-edit-modal">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="section-title clearfix">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+' Code</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n			        <button type="button" id="cancel-btn"class="btn btn-other">Cancel</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-2 left-align">\r\n			<div class="label">Active<i title="Set this to on in order for this delivery fee to be active." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n			<label for="f-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n		<div class="col-4 left-align">\r\n			<label for="f-siteID">Site ID</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n			 <input '+(null==(__t=id?"disabled":"")?"":__t)+' type="text" id="f-siteID" name="f-siteID" value="'+(null==(__t=siteID)?"":__t)+'" autofocus>\r\n		</div>\r\n		<div class="col-4 left-align">\r\n			<label for="f-floralCode">Floral Code</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n			<input type="text" id="f-floralCode" name="f-floralCode" value="'+(null==(__t=floralCode)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n';return __p}}),define("content/category-sections/more/floral-app-code-management/views/create-edit-view",["backbone","../templates/create-edit-view-tpl","../models/code-model","../collections/code-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(){},render:function(){return this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.cacheElem(),this.delegateEvents(),this},events:{"click #save-btn":"handleSave","click #cancel-btn":"closeModal"},cacheElem:function(){this.$active=this.$el.find("#f-active"),this.$siteID=this.$el.find("#f-siteID"),this.$floralCode=this.$el.find("#f-floralCode")},handleSave:function(){this.model.set({active:this.$active.is(":checked"),siteID:this.$siteID.val().trim(),floralCode:this.$floralCode.val().trim()}),this.model.get("id")||(this.model.set("id",(new Date).getTime()),i.add(this.model)),this.closeModal(),this.parent.addAllCode()},closeModal:function(){this.parent.closeModal()}});return new o}),define("content/category-sections/more/floral-app-code-management/templates/bulk-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">Bulk Upload Codes</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n		        <button type="button" id="cancel-btn"class="btn btn-other">Cancel</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced form-section">\r\n	<div class="col-6">\r\n		<div class="row row-spaced panel codeHeightMin">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Download Sample Data\r\n				</div>\r\n			</div>\r\n			<div class="col-12 y-space-top-s">\r\n				Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cum officiis perspiciatis dolor impedit dolore temporibus mollitia maxime.\r\n			</div>\r\n			<div class="col-12 y-space-top-s">\r\n				<button type="button" class="btn btn-submit">DOWNLOAD</button>	\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="col-6">\r\n		<div class="row row-spaced panel codeHeightMin">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Upload Selected Files\r\n				</div>\r\n			</div>\r\n			<div class="col-12 y-space-top-s">\r\n				For users with high volume code additions, upload a CSV file for bulk import. Column headings in the CSV file must be exactly the same as in the sample file.\r\n			</div>\r\n\r\n			<!-- Showing file path when selected -->\r\n			<div class="col-12  panel alert-panel hidden" id="modal-alert">\r\n				<div class="row">\r\n					<div class="col-1">\r\n						<div class="icon icon-3x icon-warning"></div>\r\n					</div>\r\n					<div class="col-11 alert-text">\r\n						You must select a CSV file to upload.\r\n					</div>\r\n				</div>\r\n			</div>		\r\n			<div class="col-12 y-space-top-s">\r\n				<button type="button" id="uploadimage" class="btn btn-other btn-file hidebutton">\r\n		    		<input type="file" id="file-btn">Browse</button>	\r\n		    	<input type=\'text\' class="hidden pathName" value="'+(null==(__t=pathName)?"":__t)+'">	\r\n			</div>\r\n		</div>\r\n	</div>	\r\n</div>';return __p}}),define("content/category-sections/more/floral-app-code-management/views/bulk-view",["backbone","../templates/bulk-view-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(){},render:function(){return this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.cacheElem(),this.delegateEvents(),this
},events:{"click #save-btn":"closeModal","click #cancel-btn":"closeModal","change #uploadimage":"handleSave"},cacheElem:function(){this.$active=this.$el.find("#f-active"),this.$siteID=this.$el.find("#f-siteID"),this.$floralCode=this.$el.find("#f-floralCode"),this.$modalAlert=this.$el.find("#modal-alert"),this.$save=this.$el.find("#save-btn"),this.$fileBtn=this.$el.find("#file-btn"),this.$updatelistBtn=this.$el.find("#update-btn"),this.$fVal=this.$el.find("#f-fVal"),this.$pathName=this.$el.find(".pathName"),this.$hideButton=this.$el.find(".hidebutton"),this.$hideLabel=this.$el.find(".hidelabel")},handleSave:function(){var e=this,t=this.$fileBtn.val();t.indexOf(".csv")>-1?(e.model.set({pathName:this.$fileBtn.val()}),this.$hideButton.hide(),this.$hideLabel.text("Selected File"),this.$pathName.removeClass("hidden").show().prop("disabled",!0),t=t.replace(/^.*[\\\/]/,""),this.$pathName.val(t)):(this.$modalAlert.removeClass("hidden"),setTimeout(function(){e.$modalAlert.addClass("hidden")},5e3)),this.parent.addAllCode()},closeModal:function(){this.parent.closeBulkModal()}});return new n}),define("content/category-sections/more/floral-app-code-management/views/floral-app-code-home-view",["backbone","../templates/floral-app-code-home-view-tpl","../models/code-model","../models/bulk-model","../collections/code-collection","./code-view","./create-edit-view","./bulk-view","global-events","datatables"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({tagName:"div",id:"f-floral-app-report-home",template:t,initialize:function(){a.parent=this,s.parent=this},render:function(){var e=this;return e.$el.html(e.template),e.delegateEvents(),e.cacheElem(),o.fetchCustom().done(function(){e.addAllCode(),e.applyDataTables(),e.setModal(),e.setBulkModal(),e.applyToolTips()}.bind(this)),e},cacheElem:function(){this.$CodeList=this.$el.find("#code-list"),this.$CodeTable=this.$el.find("#code-table"),this.$siteIDSearch=this.$el.find("#f-siteID-search"),this.$floralCodeSearch=this.$el.find("#f-floralCode-search"),this.$modal=this.$el.find("#create-edit-modal"),this.$bulkmodal=this.$el.find("#bulk-modal"),this.$tip=this.$el.find(".tooltip-change")},events:{"change #f-siteID-search":"handleSearchCodeSearch","keydown #f-floralCode-search":"handleFloralCodeSearch","click #new-btn":"handleCreate","click #bulk-btn":"handleCreateBulk","click #download-btn":"handleDownload","click #save-btn":"handleSave"},handleSave:function(){l.trigger("form:save",this.$tip)},addCode:function(e){var t=new r({model:e,parent:this});this.$CodeList.append(t.render().el)},addAllCode:function(){this.$CodeList.empty(),o.each(this.addCode,this)},handleDownload:function(){window.location.assign("/mock/samplebulk.csv")},handleCreate:function(){this.handleEdit(new n)},handleEdit:function(e){a.model=e,this.$modal.empty(),this.$modal.append(a.render().el),this.$modal.dialog("open")},handleCreateBulk:function(){this.handleEditBulk(new n)},handleEditBulk:function(e){s.model=e,this.$bulkmodal.empty(),this.$bulkmodal.append(s.render().el),this.$bulkmodal.dialog("open")},handleCancel:function(){this.parent.showParentHome()},applyDataTables:function(){this.dataTable=this.$CodeTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,destroy:!0,info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},handleSave:function(){l.trigger("form:save",this.$tip)},handleSearchCodeSearch:function(e){this.dataTable.columns(0).search(e.target.value).draw()},handleFloralCodeSearch:function(e){var t=this;window.setTimeout(function(){t.dataTable.columns(1).search(e.target.value).draw()},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},handlePrintModal:function(){this.showModal(a)},setModal:function(){this.$modal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=new n,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},closeModal:function(){this.$modal.dialog("close")},handleBulkModal:function(){this.showBulkModal(s)},setBulkModal:function(){this.$bulkmodal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showBulkModal:function(e){e.model=new i,this.$bulkmodal.empty(),this.$bulkmodal.append(e.render().el),this.$bulkmodal.dialog("open")},closeBulkModal:function(){console.log("parent function"),this.$bulkmodal.dialog("close")}});return new c}),define("content/category-sections/more/floral-app-code-management/views/floral-app-code-view",["backbone","./floral-app-code-home-view"],function(e,t){var n=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)}});return new n}),define("content/category-sections/more/bonus-bloom-program/templates/bonus-bloom-homepage-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="bonus-bloom-homepage-form" name="bonus-bloom-homepage-form">\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Bonus Blooms Program</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n		<div class="y-space-top-xs">The Bonus Blooms program is an opportunity to get more orders as well as make and retain customers. You can use it to give prizes to customers based on unique "winner codes" that you specify. You can include those numbers in receipts with bouquets, give them away on your Facebook page, or use whatever method you like to get your customers involved.</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n			This is a generic placeholder for error messages in eSAT. <br>\r\n			In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div id="tabs">\r\n	<ul>\r\n		<li class="right-pad-tabs"><a class="manage-bonus-bloom-edit-tab" href="#settings-Content">Settings</a></li>\r\n		<li><a class="manage-bonus-bloom-edit-tab" href="#Main-PageTab">Main Page </a></li>\r\n		<li><a class="manage-bonus-bloom-edit-tab" href="#Winner-Page">Winner Page </a></li>\r\n		<li><a class="manage-bonus-bloom-edit-tab" href="#No-Winner-Page">No Winner Page </a></li>\r\n		<li><a class="manage-bonus-bloom-edit-tab" href="#thank-You-Page">Thank You Page  </a></li>\r\n	</ul>\r\n\r\n\r\n	<div id="settings-Content">\r\n\r\n\r\n\r\n <div class="row">\r\n	<div class="col-12">\r\n \r\n	 <div class="row row-spaced form-section">\r\n	  <div class="col-4">\r\n		<label for="bloom-settings-active" class="pull-left">Active</label><i title="If this is turned OFF, the Bonus Blooms program will not be active on your site and customers will not be able to enter codes." class="icon icon-tool-tip x-space-s"></i>\r\n\r\n		    <input '+(null==(__t=settingsContentActive?"checked":"")?"":__t)+' type="checkbox" id="bloom-settings-active" name="bloom-settings-active" class="on-off-switch f-settingsActive" />\r\n\r\n	          <label for="bloom-settings-active" class="on-off-switch-label">\r\n\r\n	              <div class="on-off-switch-state">on</div>\r\n\r\n\r\n	      </label>\r\n\r\n	   </div>\r\n\r\n	 </div>\r\n\r\n		<div class="row row-spaced form-section">\r\n		    <div class="col-5 form-section">\r\n		      <label for="f-setting-program-name">Program Name</label> <i title="You can change the program name to something other than Bonus Blooms here. Get creative and make it fit your store!" class="icon icon-tool-tip x-space-s"></i>\r\n			    <input type="text" id="f-setting-program-name" name="f-setting-program-name" value="'+(null==(__t=programName)?"":__t)+'">\r\n		    <!-- Character Count Here -->\r\n			</div>\r\n\r\n			<div class="col-3 form-section">\r\n\r\n			 <label for="f-setting-winning-digits">Winning Digits</label><i title="These are the winning numbers your customers need to get a prize. You can specify a series of up to 3 numbers here." class="icon icon-tool-tip x-space-s"></i>\r\n			    <input type="number" id="f-setting-winning-digits" name="f-setting-winning-digits" value="'+(null==(__t=winningDigits)?"":__t)+'">\r\n                <!-- Character Count Here -->\r\n			</div>\r\n\r\n		</div>\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-7">\r\n				<label for="f-email-address-name">Email Address</label> <i title="This is the email address that entries will be sent to." class="icon icon-tool-tip x-space-s"></i>\r\n				<input type="email" id="f-email-address-name" name="f-email-address-name" value="'+(null==(__t=emailAddressBonusBloom)?"":__t)+'">\r\n			<!-- Character Count Here -->\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced ">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix y-space-bottom-l">Display Banners to Promote Program</div>\r\n				<p class="y-space-top-s">If you have enabled the Bonus Blooms program on your site, a Bonus Blooms Marketing Campaign is automatically created and enabled to promote Bonus Blooms. You can control this and all your other marketing items in the "Marketing Campaign" page - Marketing & Promotions > Marketing Campaigns. </p>\r\n			</div>\r\n		</div>\r\n\r\n\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 y-space-bottom-l">\r\n				<div class="panel-title clearfix"> FAQ & Rules</div>\r\n			</div>\r\n		</div>\r\n\r\n\r\n				<div class="row row-spaced form-section">\r\n			      <div class="col-12"> \r\n			         	 	<label for="f-bloom-faq-section"> FAQs </label> <i title="This is an FAQ section to better inform your customers and help let them know how the Bonus Blooms program works." class="icon icon-tool-tip x-space-s"></i>   \r\n			      	  <div id="tiny-mce-container1" class="row row-spaced panel form-section">\r\n					<textarea id="f-bloom-faq-section" class="size-4 f-bloom-faq-section f-bloom-rules-section y-space-s" name="f-bloom-faq-section">'+(null==(__t=faQSectionContent)?"":__t)+'</textarea>\r\n\r\n			      </div>\r\n  	                <p ><span id="character-countFAQSection">3000 </span><span> Characters remaining (3000 maximum) </span></p>\r\n\r\n			    </div>\r\n             </div>\r\n\r\n\r\n\r\n				<div class="row row-spaced form-section">\r\n			      <div class="col-12"> \r\n			        <label for="f-bloom-rules-section">Rules  </label> <i title="This content area is meant for the rules of your unique Bonus Blooms program." class="icon icon-tool-tip x-space-s"></i>   \r\n			          <div id="tiny-mce-container2" class="row row-spaced panel form-section">\r\n					<textarea id="f-bloom-rules-section" class="size-4 tinymce f-bloom-rules-section y-space-s" name="f-bloom-rules-section">\r\n					'+(null==(__t=RulesContent)?"":__t)+'</textarea>\r\n			        </div>\r\n			          <p><span id="character-countRulesSection">3000 </span><span> Characters remaining (3000 maximum) </span></p>\r\n			      </div>\r\n               </div>\r\n\r\n\r\n           </div>\r\n   </div>\r\n\r\n		</div> <!-- Settings Content Ends Here  -->\r\n\r\n\r\n\r\n\r\n		<div id="Main-PageTab">\r\n\r\n\r\n\r\n		 <div class="row">\r\n		 <div class="col-12">\r\n		 	<div class="row row-spaced">\r\n		 		<div class="col-12 form-section">\r\n		 			<div class="label">Main Page Title</div>\r\n		 			<input type="text" name="f-main-page-title" id="f-main-page-title" value="'+(null==(__t=MainPageTitle)?"":__t)+'">\r\n		 		</div>\r\n		 	</div>\r\n			<div class="row row-spaced form-section">\r\n             \r\n             <div class="col-12 y-space-bottom-xxl">\r\n	             <label for="f-main-page-section-header">Main Page Header</label> <i title="This is a descriptive text area that shows up on the main entry Bonus Blooms page underneath the Main Page Title." class="icon icon-tool-tip x-space-s"></i>   \r\n	                <textarea id="f-main-page-section-header" name="f-main-page-section-header">'+(null==(__t=MainPageHeader)?"":__t)+'</textarea>\r\n	                <p ><span id="character-countMainHeader">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n               </div>\r\n\r\n			   </div>\r\n     \r\n\r\n\r\n			<div class="row row-spaced form-section">\r\n             \r\n             <div class="col-12 y-space-bottom-xxl">\r\n	             <label for="f-main-page-section-message">Main Page Message</label> <i title="This is a descriptive text area that shows up on the main entry Bonus Blooms page that you can use to explain what the customer should do to enter." class="icon icon-tool-tip x-space-s"></i>   \r\n	                <textarea id="f-main-page-section-message" name="f-main-page-section-message" maxlength="500">'+(null==(__t=MainPageMessage)?"":__t)+'</textarea>\r\n	                <p ><span id="character-countMainMessage">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n               </div>\r\n             </div>\r\n		   \r\n\r\n          <div class="row row-spaced">\r\n\r\n           <div class="col-2 form-section">\r\n		      <div class="label form-section">Image</div>\r\n\r\n		         <button type="button" id="btn-main-section-logo" name="btn-main-section-logo"  class="icon icon-btn icon-image btn-file icon-3x"> </button>\r\n			   </div>\r\n\r\n\r\n              <div class="col-10">\r\n                      <img id="preview-main-section-Img" class="icon icon-2x" src="'+(null==(__t=MainpageImgUrl)?"":__t)+'" style="max-height:60%; max-width:60%;">\r\n              </div>\r\n           </div>\r\n\r\n       </div>\r\n     </div>\r\n		</div> <!-- Main Page Tab Ends here -->\r\n\r\n\r\n\r\n\r\n		<div id="Winner-Page">\r\n\r\n\r\n\r\n			<div class="row panel alert-panel hidden-alt">\r\n\r\n			    <div class="col-12">\r\n\r\n			      <div class="row">\r\n			        <div class="col-1">\r\n			          <div class="icon icon-3x icon-warning"></div>\r\n\r\n			        </div>\r\n\r\n			        <div class="col-11 alert-text left-align">\r\n			          You have uploaded an invalid image file.  Please upload image files that have\r\n			          extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n			        </div>\r\n\r\n			      </div>\r\n\r\n			    </div>\r\n			  </div>\r\n\r\n\r\n\r\n		 <div class="row">\r\n		 	<div class="col-12">\r\n			<div class="row row-spaced form-section">\r\n             \r\n             <div class="col-12 y-space-bottom-xxl">\r\n	             <label for="f-winner-page-section-header">Winner Page Header </label> <i title="This header text is displayed on the page if your customer enters a winning code that you can use to congratulate your winner." class="icon icon-tool-tip x-space-s"></i>   \r\n	                <textarea id="f-winner-page-section-header" name="f-winner-page-section-header" maxlength="500">'+(null==(__t=WinnerPageHeader)?"":__t)+'</textarea>\r\n	       	        <p ><span id="character-countWinnerHeader">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n        \r\n               </div>\r\n		   \r\n			</div>\r\n     \r\n			<div class="row row-spaced form-section">\r\n             \r\n             <div class="col-12 y-space-bottom-xxl">\r\n	             <label for="f-winner-page-section-message">Winner Page Message  </label> <i title="This is another descriptive text field on the winner page that you can use to congratulate and let your winning customer know how they will redeem their prize." class="icon icon-tool-tip x-space-s"></i>   \r\n	                <textarea id="f-winner-page-section-message" name="f-winner-page-section-message" maxlength="500">'+(null==(__t=WinnerPageMessage)?"":__t)+'</textarea>\r\n	                 <p ><span id="character-countWinnerMessage">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n               </div>\r\n             </div>\r\n		   \r\n\r\n		  <div class="row row-spaced">\r\n\r\n           <div class="col-2 form-section">\r\n		      <div class="label form-section">Image</div>\r\n\r\n		         <button type="button" id="winnerPage-btn-logo" name="winnerPage-btn-logo"  class="icon icon-btn icon-image btn-file icon-3x"> </button>\r\n			   </div>\r\n\r\n\r\n              <div class="col-10">\r\n                      <img id="winner-edit-Img" name="winner-edit-Img" class="icon icon-2x " src="'+(null==(__t=winnnerImgUrl)?"":__t)+'" style="max-height:60%; max-width:60%;">\r\n              </div>\r\n           </div>\r\n\r\n       </div>\r\n     \r\n     </div>\r\n\r\n\r\n		</div> <!-- Winner Page Tab Ends here -->\r\n\r\n\r\n\r\n\r\n\r\n		<div id="No-Winner-Page">\r\n\r\n\r\n\r\n		<div class="row panel alert-panel hidden-alt">\r\n\r\n		    <div class="col-12">\r\n\r\n		      <div class="row">\r\n		        <div class="col-1">\r\n		          <div class="icon icon-3x icon-warning"></div>\r\n\r\n		        </div>\r\n\r\n		        <div class="col-11 alert-text left-align">\r\n		          You have uploaded an invalid image file.  Please upload image files that have\r\n		          extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n		        </div>\r\n\r\n		      </div>\r\n\r\n		    </div>\r\n		  </div>\r\n\r\n\r\n\r\n		 <div class="row">\r\n		 	<div class="col-12">\r\n\r\n			<div class="row row-spaced form-section ">\r\n             \r\n             <div class="col-12 y-space-bottom-xxl">\r\n	             <label for="f-winner-page-section-header">No Winner Page Header </label> <i title="This is the header text that is displayed if your customer does not enter a winning code." class="icon icon-tool-tip x-space-s"></i>   \r\n	                <textarea id="f-no-winner-page-section-header" name="f-no-winner-page-section-header" maxlength="500">'+(null==(__t=NoWinnerPageHeader)?"":__t)+'</textarea>\r\n             <p ><span id="character-countNoWinnerPageHeader">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n\r\n               </div>\r\n		   \r\n\r\n\r\n\r\n			   </div>\r\n\r\n\r\n\r\n			<div class="row row-spaced form-section">\r\n             \r\n             <div class="col-12 y-space-bottom-xxl">\r\n	             <label for="f-no-winner-page-section-message">No Winner Page Message  </label> <i title="This second block of descriptive text is shown if you customer does not enter a winning code." class="icon icon-tool-tip x-space-s"></i>   \r\n	                <textarea id="f-no-winner-page-section-message" name="f-no-winner-page-section-message" maxlength="500">'+(null==(__t=NoWinnerPageMessage)?"":__t)+'</textarea>\r\n                 <p><span id="character-countNoWinnerPageMessage">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n\r\n               </div>\r\n             </div>\r\n\r\n\r\n\r\n          <div class="row row-spaced form-section">\r\n          		   <div class="col-2">\r\n		      <div class="label form-section">Image</div>\r\n\r\n		         <button type="button" id="no-winnerPage-btn-logo" name="no-winnerPage-btn-logo"  class="icon icon-btn icon-image btn-file icon-3x"> </button>\r\n			   </div>\r\n			   \r\n              <div class="col-10">\r\n                      <img id="No-winner-Img" class="icon icon-2x " src="'+(null==(__t=NoWinnnerImgUrl)?"":__t)+'" style="max-height:60%; max-width:60%;">\r\n              </div>\r\n           </div>\r\n		   \r\n       </div>\r\n     </div>\r\n\r\n\r\n\r\n		</div> <!-- No Winner Page Tab ends here -->\r\n\r\n\r\n\r\n\r\n\r\n		<div id="thank-You-Page">\r\n\r\n\r\n\r\n		<div class="row panel alert-panel hidden-alt">\r\n\r\n		    <div class="col-12">\r\n\r\n		      <div class="row">\r\n		        <div class="col-1">\r\n		          <div class="icon icon-3x icon-warning"></div>\r\n\r\n		        </div>\r\n\r\n		        <div class="col-11 alert-text left-align">\r\n		          You have uploaded an invalid image file.  Please upload image files that have\r\n		          extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n		        </div>\r\n\r\n		      </div>\r\n\r\n		    </div>\r\n		  </div>\r\n\r\n\r\n\r\n\r\n		  <div class="row">\r\n			<div class="col-12">\r\n			<div class="row row-spaced form-section ">\r\n             \r\n             <div class="col-12 y-space-bottom-xxl">\r\n	             <label for="f-thank-you-section-header">Thank You Page Header </label> <i title="This header text is displayed at the top of the Thank You page after submitting a Bonus Blooms code." class="icon icon-tool-tip x-space-s"></i>   \r\n	                <textarea id="f-thank-you-section-header" name="f-thank-you-section-header" maxlength="500">'+(null==(__t=thankYouPageHeader)?"":__t)+'</textarea>\r\n                <p ><span id="character-countThankYouHeader">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n\r\n               </div>\r\n\r\n			   </div>\r\n      \r\n\r\n\r\n\r\n		<div class="row row-spaced form-section">\r\n         \r\n         <div class="col-12 y-space-bottom-xxl">\r\n             <label for="f-thank-you-section-message">Thank You Page Message  </label> <i title="This descriptive text shows up underneath the page header on the Thank You page." class="icon icon-tool-tip x-space-s"></i>   \r\n                <textarea id="f-thank-you-section-message" name="f-thank-you-section-message" maxlength="500">'+(null==(__t=thankYouPageMessage)?"":__t)+'</textarea>\r\n            <p ><span id="character-countThankYouMessage">500 </span><span> Characters remaining (500 maximum) </span></p>\r\n\r\n           </div>\r\n         </div>\r\n\r\n\r\n          <div class="row row-spaced form-section">\r\n\r\n           <div class="col-2">\r\n		      <div class="label form-section">Image</div>\r\n\r\n		         <button type="button" id="thankYouPage-btn-logo" name="thankYouPage-btn-logo"  class="icon icon-btn icon-image btn-file icon-3x"> </button>\r\n			   </div>\r\n\r\n\r\n              <div class="col-10">\r\n                      <img id="thankyou-edit-Img" class="icon icon-2x " src="'+(null==(__t=thankYouImgUrl)?"":__t)+'" style="max-height:70%; max-width:70%;">\r\n              </div>\r\n           </div>\r\n\r\n       </div>\r\n		 </div>\r\n\r\n		</div> <!--  Thank you page ends here-->\r\n\r\n\r\n	</div> <!-- Tabs Content Ends Here -->\r\n</form>';return __p}}),define("content/category-sections/more/bonus-bloom-program/models/bonus-bloom-homepage-model",["backbone"],function(e){var t=e.Model.extend({defaults:{settingsContentActive:!0,programName:"",winningDigits:null,emailAddressBonusBloom:"",faQSectionContent:"",RulesContent:"",MainPageTitle:"",MainPageHeader:"",MainpageImgUrl:"",MainPageMessage:"",WinnerPageHeader:"",WinnerPageMessage:"",winnnerImgUrl:"",NoWinnerPageMessage:"",NoWinnerPageHeader:"",NoWinnnerImgUrl:"",thankYouPageHeader:"",thankYouPageMessage:"",thankYouImgUrl:""}});return new t}),define("content/category-sections/more/bonus-bloom-program/views/bonus-bloom-home-view",["backbone","../templates/bonus-bloom-homepage-tpl","../models/bonus-bloom-homepage-model","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.handleHomeValidation(),e.applyTabs(),e.applyToolTips(),e.applyTinymceFAQ(),e.applyTinymceRulesContent(),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #btn-main-section-logo":"handleFileUploadMainPageImage","click #winnerPage-btn-logo":"handleFileUploadWinnerImage","click #no-winnerPage-btn-logo":"handleFileUploadNOWinnerImage","click #thankYouPage-btn-logo":"handleFileUploadThankYouImage","keyup #f-main-page-section-header":"handleCharacterCountMainPageHeader","keyup #f-main-page-section-message":"handleCharacterCountMainPageMessage","keyup #f-winner-page-section-header":"handleCharacterCountWinnerPageHeader","keyup #f-winner-page-section-message":"handleCharacterCountWinnerPageMessage","keyup #f-no-winner-page-section-header":"handleCharacterCountNOWinnerPageHeader","keyup #f-no-winner-page-section-message":"handleCharacterCountNOWinnerPageMessage","keyup #f-thank-you-section-header":"handleCharacterCountThankYouPageHeader","keyup #f-thank-you-section-message":"handleCharacterCountThankYouPageMessage"},cacheElem:function(){this.$BonusBloomHomeForm=this.$el.find("#bonus-bloom-homepage-form"),this.$SettingsBloomActive=this.$el.find("#bloom-settings-active"),this.$SettingsProgramName=this.$el.find("#f-setting-program-name"),this.$SettingsWinningsDigits=this.$el.find("#f-setting-winning-digits"),this.$SettingsEmailAddress=this.$el.find("#f-email-address-name"),this.$FAQSectionContentMce=this.$el.find("#f-bloom-faq-section"),this.$RulesSectionContentMce=this.$el.find("#f-bloom-rules-section"),this.$MainPageSectionHeader=this.$el.find("#f-main-page-section-header"),this.$MainPageSectionMessage=this.$el.find("#f-main-page-section-message"),this.$WinnerSectionHeader=this.$el.find("#f-winner-page-section-header"),this.$WinnerpageSectionMessage=this.$el.find("#f-winner-page-section-message"),this.$NoWinnerSectionHeader=this.$el.find("#f-no-winner-page-section-header"),this.$NoWinnerSectionMessage=this.$el.find("#f-no-winner-page-section-message"),this.$ThankYouSectionHeader=this.$el.find("#f-thank-you-section-header"),this.$ThankYouSectionMessage=this.$el.find("#f-thank-you-section-message"),this.$tip=this.$el.find(".tooltip-change"),this.$MainPageImg=this.$el.find("#preview-main-section-Img"),this.$WinnerPageImg=this.$el.find("#winner-edit-Img"),this.$NoWinnerPageImg=this.$el.find("#No-winner-Img"),this.$ThankYouPageImg=this.$el.find("#thankyou-edit-Img")},handleSave:function(){n.set({settingsContentActive:this.$SettingsBloomActive.is(":checked"),faQSectionContent:o.get("f-bloom-faq-section").getContent(),RulesContent:o.get("f-bloom-rules-section").getContent(),MainPageHeader:this.$MainPageSectionHeader.val().trim(),MainPageMessage:this.$MainPageSectionMessage.val().trim(),WinnerPageHeader:this.$WinnerSectionHeader.val().trim(),WinnerPageMessage:this.$WinnerpageSectionMessage.val().trim(),NoWinnerPageMessage:this.$NoWinnerSectionHeader.val().trim(),NoWinnerPageHeader:this.$NoWinnerSectionMessage.val().trim(),thankYouPageHeader:this.$ThankYouSectionHeader.val().trim(),thankYouPageMessage:this.$ThankYouSectionMessage.val().trim(),MainpageImgUrl:this.$MainPageImg.prop("src"),winnnerImgUrl:this.$WinnerPageImg.prop("src"),NoWinnnerImgUrl:this.$NoWinnerPageImg.prop("src"),thankYouImgUrl:this.$ThankYouPageImg.prop("src")}),this.$BonusBloomHomeForm.valid?(n.set({programName:this.$SettingsProgramName.val().trim(),emailAddressBonusBloom:this.$SettingsEmailAddress.val().trim(),winningDigits:this.$SettingsWinningsDigits.val().trim()}),i.trigger("form:save",this.$tip)):i.trigger("form:invalid",this.$tip)},handleCancel:function(){i.trigger("form:reset",this.render.bind(this))},applyTabs:function(){this.$el.find("#tabs").tabs()},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleHomeValidation:function(){this.$BonusBloomHomeForm.validate({rules:{"f-setting-program-name":"required","f-email-address-name":"required","f-setting-winning-digits":{required:!0,digits:!0,maxlength:3}}})},handleFileUploadMainPageImage:function(){var e=this;i.trigger("form:image-upload",{cb:function(t){e.$MainPageImg.prop("src",t)},active:e.$MainPageImg.prop("src"),name:"Bonus Bloom Program"})},handleFileUploadWinnerImage:function(){var e=this;i.trigger("form:image-upload",{cb:function(t){e.$WinnerPageImg.prop("src",t)},active:e.$WinnerPageImg.prop("src"),name:"Bonus Bloom Program"})},handleFileUploadNOWinnerImage:function(){var e=this;i.trigger("form:image-upload",{cb:function(t){e.$NoWinnerPageImg.prop("src",t)},active:e.$NoWinnerPageImg.prop("src"),name:"Bonus Bloom Program"})},handleFileUploadThankYouImage:function(){var e=this;i.trigger("form:image-upload",{cb:function(t){e.$ThankYouPageImg.prop("src",t)},active:e.$ThankYouPageImg.prop("src"),name:"Bonus Bloom Program"})},applyTinymceFAQ:function(){setTimeout(function(){o.remove(),o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"FAQ"})}}),e.on("change",function(){i.trigger("form:editing")}),e.on("keyup",function(){var e=o.get("f-bloom-faq-section").getContent(),t=$(e).text(),n=t.length,i=3e3-n;$("#character-countFAQSection").html(i)})},selector:"textarea.f-bloom-faq-section",height:300,maxLength:3e3,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyTinymceRulesContent:function(){setTimeout(function(){o.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;i.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Rules Content"})}}),e.on("change",function(){i.trigger("form:editing")}),e.on("keyup",function(){var e=o.get("f-bloom-rules-section").getContent(),t=$(e).text(),n=t.length,i=3e3-n;$("#character-countRulesSection").html(i)})},selector:"textarea.f-bloom-rules-section",height:300,maxLength:3e3,mode:"textareas",toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},1e3)},handleCharacterCountMainPageHeader:function(){var e=this.$MainPageSectionHeader.val(),t=e.length,n=500-t;$("#character-countMainHeader").html(n)},handleCharacterCountMainPageMessage:function(){var e=this.$MainPageSectionMessage.val(),t=e.length,n=500-t;$("#character-countMainMessage").html(n)},handleCharacterCountWinnerPageHeader:function(){var e=this.$WinnerSectionHeader.val(),t=e.length,n=500-t;$("#character-countWinnerHeader").html(n)},handleCharacterCountWinnerPageMessage:function(){var e=this.$WinnerpageSectionMessage.val(),t=e.length,n=500-t;$("#character-countWinnerMessage").html(n)},handleCharacterCountNOWinnerPageHeader:function(){var e=this.$NoWinnerSectionHeader.val(),t=e.length,n=500-t;$("#character-countNoWinnerPageHeader").html(n)},handleCharacterCountNOWinnerPageMessage:function(){var e=this.$NoWinnerSectionMessage.val(),t=e.length,n=500-t;$("#character-countNoWinnerPageMessage").html(n)},handleCharacterCountThankYouPageHeader:function(){var e=this.$ThankYouSectionHeader.val(),t=e.length,n=500-t;$("#character-countThankYouHeader").html(n)},handleCharacterCountThankYouPageMessage:function(){var e=this.$ThankYouSectionMessage.val(),t=e.length,n=500-t;$("#character-countThankYouMessage").html(n)}});return new r}),define("content/category-sections/marketing-promotions/promotion-codes/templates/promotion-codes-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class=" clearfix section-title">\r\n      <h2 class="pull-left">Manage Promotion Codes</h2>\r\n      <div class="btn-panel">\r\n        <button id="save-btn" class="btn btn-submit">Save Changes</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    Use this page to manage the promotion codes on your site. You can manage all of the existing codes using the table below or create new codes.\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n\r\n  <div class="col-12 form-section">\r\n\r\n    <div class="col-4">\r\n      <div class="row">\r\n        <label for="f-search-promotion-code">Search for Promotion Code</label>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-12">\r\n          <div class="row">\r\n              <div class="search-container">\r\n                <input type="text" id="f-search-promotion-code" name="f-search-promotion-code">\r\n              </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="col-8">\r\n      <div class="row">\r\n        <button id="add-btn" type="button" class="y-space-top-l btn compact btn-submit pull-right"><i class="icon icon-add"></i>Advanced Promo</button>  \r\n        <button id="quick-btn" type="button" class="y-space-top-l x-space-m btn compact btn-submit pull-right"><i class="icon icon-add"></i>Quick Promo</button>          \r\n      </div>\r\n    </div>\r\n\r\n  </div> \r\n\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n  <table id="promotion-codes-table" class="table alternate">\r\n    <thead>\r\n      <tr>\r\n        <th>Promo Code <button data-attribute="code" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n        <th>Discount</th>\r\n        <th>Start Date <button data-attribute="startDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n        <th>End Date <button data-attribute="endDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n        <th>Status</th>\r\n        <th>Edit</th>\r\n        <th>Delete</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody id="promotion-codes-list"></tbody>\r\n  </table>\r\n  </div>\r\n</div>\r\n';
return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/models/promotion-code-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,code:"",discountType:"Percentage Off",discountAmount:"5",startDate:"",endDate:"",active:!0,oneTimeActive:!1,stackingActive:!1,federated:!1,allAddOns:!0,category:"Item Only",number:"",description:"",bulk:!1,prefix:null,minTotal:"",minItems:"1",maxDiscount:"",tiers:[],products:[],occasions:[],deliveryStartDate:"",deliveryEndDate:"",selectedProductsCategories:"All Products",bcc:!1,bccPromoDetail:""}});return t}),define("content/category-sections/marketing-promotions/promotion-codes/collections/promotion-code-collection",["backbone","../models/promotion-code-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-promotion-codes.json",model:t,hasCode:function(e){return!!this.findWhere({code:e})},getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/marketing-promotions/promotion-codes/templates/promotion-code-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<tr>\r\n  <td>"+(null==(__t=code)?"":__t)+"</td>\r\n  <td>\r\n\r\n    ",bcc?__p+='\r\n      <button type="button" class="icon icon-btn icon-tag icon-2x"></button><i class="icon icon-tool-tip x-space-s" title="'+(null==(__t=bccPromoDetail)?"":__t)+'"></i>\r\n    ':(__p+="\r\n      ","Dollar Off"===discountType&&(__p+="\r\n        $\r\n      "),__p+="\r\n      "+(null==(__t=discountAmount)?"":__t)+"\r\n      ","Percentage Off"===discountType&&(__p+="\r\n        %\r\n      "),__p+="\r\n    "),__p+="\r\n  </td>\r\n  <td>"+(null==(__t=startDate)?"":__t)+"</td>\r\n  <td>"+(null==(__t=endDate)?"":__t)+'</td>\r\n  <td>\r\n    <div class="v-center">\r\n      <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active-'+(null==(__t=id)?"":__t)+'" name="f-active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n      <label for="f-active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n          <div class="on-off-switch-state">on</div>\r\n      </label>\r\n    </div>\r\n  </td>\r\n  <td>\r\n    ',bcc?__p+='\r\n      <button type="button" class="icon icon-btn p-icon-view icon-search icon-2x"></button>\r\n    ':(__p+="\r\n      ",__p+=bulk?'\r\n        <button type="button" class="icon icon-btn p-icon-download icon-save icon-2x"></button>\r\n      ':federated?'\r\n        <button type="button" class="icon icon-btn p-icon-view icon-search icon-2x"></button>\r\n      ':'\r\n        <button type="button" class="icon icon-btn icon-edit icon-2x"></button>\r\n      ',__p+="\r\n    "),__p+="\r\n  </td>\r\n  <td>\r\n    ",__p+=bulk||federated||bcc===!0?"\r\n    \r\n    ":'\r\n      <button type="button" class="icon icon-btn icon-trash icon-2x"></button>\r\n    ',__p+="  \r\n  </td>\r\n</tr>";return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/promotion-code-list-view",["backbone","../templates/promotion-code-list-tpl","../collections/promotion-code-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.listenTo(n,"remove",function(e){this.model===e&&(this.parent.dataTable.row(this.$el).remove().draw(),this.remove())})},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","click .p-icon-view":"handleEdit","click .p-icon-download":"handleDownload","change input":"triggerChange"},triggerChange:function(){i.trigger("form:editing")},handleDelete:function(){i.trigger("form:delete",function(){n.remove(this.model)}.bind(this))},handleDownload:function(){window.location.assign("/mock/samplebulk.csv")},handleEdit:function(){this.parent.handleEdit(this.model)}});return o}),define("content/category-sections/marketing-promotions/promotion-codes/views/promotion-codes-home-view",["backbone","../templates/promotion-codes-home-tpl","../models/promotion-code-model","../collections/promotion-code-collection","./promotion-code-list-view","global-events","datatables"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",id:"p-promotion-codes-home",template:t,render:function(){return this.$el.html(this.template()),this.delegateEvents(),this.cacheElem(),i.fetchCustom().done(function(){this.addAllPromotionCodes(i),this.applyDataTables(),this.applyToolTips()}.bind(this)),this.listenTo(i,"sort",this.addAllPromotionCodes),this},cacheElem:function(){this.$promotionCodesTable=this.$el.find("#promotion-codes-table"),this.$promotionCodesList=this.$el.find("#promotion-codes-list"),this.$search=this.$el.find("#f-search-promotion-code"),this.$sortButtons=this.$el.find(".sort-btn"),this.$tip=this.$el.find(".tooltip-change")},events:{"keydown #f-search-promotion-code":"handlePromotionCodeSearch","click #add-btn":"addNewPromoCode","click .sort-btn":"handleSort","click #quick-btn":"addQuickCode","click #save-btn":"handleSave"},handleSave:function(){r.trigger("form:save",this.$tip)},addNewPromoCode:function(){this.parent.showAdd()},addQuickCode:function(){this.parent.showQuick()},addPromotionCode:function(e){var t=new o({model:e,parent:this});this.$promotionCodesList.append(t.render().el)},handleEdit:function(e){this.parent.handleEdit(e)},addAllPromotionCodes:function(e){this.$promotionCodesList.empty(),e.each(this.addPromotionCode,this)},applyDataTables:function(){this.dataTable=this.$promotionCodesTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,searching:!0,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()},handlePromotionCodeSearch:function(){var e=this;window.setTimeout(function(){e.dataTable.columns(0).search(e.$search.val().trim()).draw()},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new a}),define("content/category-sections/marketing-promotions/promotion-codes/templates/add-promo-code-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="section-title clearfix">\r\n      <h2 class="pull-left">\r\n        Add New Promotion Code\r\n      </h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n        <button type="button" id="save-btn" class="btn btn-submit hidden">Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>    \r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n         This is a generic placeholder for error messages in eSAT. <br>\r\n         In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel row-spaced alert-panel hidden-alt" id="addon-min-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        If you do not select "Apply To All Add-Ons," you must specify at least 1 Add-On. <br>\r\n        Please select at least 1 Add-On from the list below.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row panel row-spaced alert-panel hidden-alt" id="prod-min-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        You must apply this type of promo to at least 1 specific product. <br>\r\n        Please select at least 1 product from the list below.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row panel row-spaced alert-panel hidden-alt" id="cat-min-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        You must apply this type of promo to at least 1 specific category. <br>\r\n        Please select at least 1 category from the list below.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row panel row-spaced alert-panel hidden-alt" id="tier-min-error">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n        You must create at least 1 tier to give tiered discounts. <br>\r\n        Please select at least 1 tier using the menu below.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row">\r\n  <div class="col-12">\r\n    To create a promotion code, select what you want to offer discount for from the following options:\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-6 form-section">\r\n      <label for="f-promo-type">Promotion Type</label>\r\n      <div class="select-container">\r\n        <select id="f-promo-type" name="f-promo-type">\r\n          <option selected="" disabled="" hidden="" value=""></option>\r\n            <option value="Order Total">Order Total</option>\r\n            <option value="Item Total">Item Total (Item + Add-Ons)</option>\r\n            <option value="Item Only">Item Only</option>\r\n            <option value="Item AddOns">Item Add-Ons</option>\r\n            <option value="Delivery">Delivery/Service Fee</option>\r\n            <option value="Bulk">One Time Use Bulk Codes</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="type-2"></div>\r\n<div id="type-3"></div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/add-promo-code-view",["backbone","../templates/add-promo-code-tpl","../models/promotion-code-model","../collections/promotion-code-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({tagName:"form",id:"p-add-promo-code",template:t,render:function(){return this.$el.html(this.template()),this.delegateEvents(),this.cacheElem(),this.applyDates(),this.applyToolTips(),this.validateForm(),this},events:{"click #save-btn":"handleSave","click #cancel-btn":"showHome","click #f-stackingActive":"handleStackToggle","change #f-promo-type":"togglePromoType"},cacheElem:function(){this.$createForm=this.$el.find("#create-form"),this.$promoCode=this.$el.find("#f-promotionCode"),this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate"),this.$discountAmount=this.$el.find("#f-discountAmount"),this.$saveBtn=this.$el.find("#save-btn"),this.$tip=this.$el.find(".tooltip-change"),this.$createBulkForm=this.$el.find("#create-bulk-form"),this.$promoCodePrefix=this.$el.find("#f-codePrefix"),this.$discountAmountBulk=this.$el.find("#f-discountAmount-bulk"),this.$startDateBulk=this.$el.find("#f-startDate-bulk"),this.$endDateBulk=this.$el.find("#f-endDate-bulk"),this.$promoCodeQty=this.$el.find("#f-codeQuantityNeeded"),this.$stackingActive=this.$el.find("#f-stackingActive"),this.$type2=this.$el.find("#type-2"),this.$type3=this.$el.find("#type-3"),this.$pType=this.$el.find("#f-promo-type"),this.$addOnMinError=this.$el.find("#addon-min-error"),this.$prodMinError=this.$el.find("#prod-min-error"),this.$prodCatError=this.$el.find("#cat-min-error"),this.$tierMinError=this.$el.find("#tier-min-error")},handleStackToggle:function(e){var t=this,n=$(e.target);n.is(":checked")?(e.preventDefault(),o.trigger("modal:custom",{template:{title:"Allow Stacking?",text:"Any promotions that are set as stackable can be combined resulting in the customer receiving multiple discounts. Are you sure you want to activate this?",confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})):!t.$stackingActive.is("checked")},showAddOnMin:function(){var e=this;o.trigger("form:invalid",this.$tip),this.$addOnMinError.fadeIn(200),setTimeout(function(){e.$addOnMinError.fadeOut(200)},15e3)},showProdMin:function(){var e=this;o.trigger("form:invalid",this.$tip),this.$prodMinError.fadeIn(200),setTimeout(function(){e.$prodMinError.fadeOut(200)},15e3)},showCatMin:function(){var e=this;o.trigger("form:invalid",this.$tip),this.$prodCatError.fadeIn(200),setTimeout(function(){e.$prodCatError.fadeOut(200)},15e3)},showTierMin:function(){var e=this;o.trigger("form:invalid",this.$tip),this.$tierMinError.fadeIn(200),setTimeout(function(){e.$tierMinError.fadeOut(200)},15e3)},handleSave:function(){if(this.$el.find("#f-allAddOns").is("*")){if(!this.$el.find("#f-allAddOns").is(":checked")&&!this.parent.checkAddOns())return this.showAddOnMin(),!1}else if("Specific Products discount"==this.$el.find("#f-promo-condition").find("option:selected").val()){if(!this.parent.checkProducts())return this.showProdMin(),!1}else if("Specific Category discount"==this.$el.find("#f-promo-condition").find("option:selected").val()){if(!this.parent.checkCats())return this.showCatMin(),!1}else if("Tiered Discounts"==this.$el.find("#f-promo-condition").find("option:selected").val()&&!this.parent.checkTiers())return this.showTierMin(),!1;this.$el.valid()?this.showHome():o.trigger("form:invalid",this.$tip)},isUniquePromoCode:function(){return!i.hasCode()},togglePromoType:function(){var e=this.$pType.val();switch(o.trigger("form:finished"),e){case"Order Total":this.showOrderTotal();break;case"Item Total":this.showItemAddOns();break;case"Item Only":this.showItemOnly();break;case"Item AddOns":this.showAddOns();break;case"Delivery":this.showDeliveryServiceFee();break;case"Bulk":this.showBulk()}},showOrderTotal:function(){this.$type3.empty(),this.$saveBtn.removeClass("hidden"),this.parent.showOrderTotal(this.$type2)},showItemAddOns:function(){this.$type3.empty(),this.$saveBtn.removeClass("hidden"),this.parent.showItemAddOns(this.$type2)},showDeliveryServiceFee:function(){this.$type3.empty(),this.$saveBtn.removeClass("hidden"),this.parent.showDeliveryServiceFee(this.$type2)},showBulk:function(){this.$type2.empty(),this.$saveBtn.removeClass("hidden"),this.parent.showBulk(new n,this.$type3)},showHome:function(){this.parent.showHome()},showItemOnly:function(){this.$type2.empty(),this.$saveBtn.removeClass("hidden"),this.parent.showItemOnly(new n,this.$type3)},showAddOns:function(){this.$type2.empty(),this.$saveBtn.removeClass("hidden"),this.parent.showAddOns(new n,this.$type3)},showSave:function(){this.$saveBtn.removeClass("hidden")},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$startDateBulk.datepicker({onSelect:function(t){e.$endDateBulk.datepicker("option","minDate",t),e.$startDateBulk.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDateBulk.datepicker({onSelect:function(t){e.$startDateBulk.datepicker("option","maxDate",t),e.$endDateBulk.trigger("blur")},dateFormat:"mm/dd/y"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$el.validate({rules:{"f-promotionCode":{required:!0},"f-discountAmount":{required:!0},"f-startDate":{dateCustom:!0},"f-endDate":{dateCustom:!0}}}),jQuery.validator.addClassRules({"f-promo-required":{required:!0}})}});return new r}),define("content/category-sections/marketing-promotions/promotion-codes/templates/add-promo-base-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)id&&(__p+='\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="'+(null==(__t=subtitle?"section-title-with-sub-title":"section-title")?"":__t)+'">\r\n      <h2 class="pull-left">'+(null==(__t=title)?"":__t)+'</h2>\r\n      <div class="btn-panel">\r\n        <button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n        ',id&&!bcc&&(__p+='<button type="button" id="delete-btn" class="btn btn-other">Delete</button>'),__p+='\r\n        <button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n        <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n      </div>\r\n      ',subtitle&&(__p+='\r\n        <div class="clearfix"></div>\r\n        <h3>'+(null==(__t=subtitle)?"":__t)+"</h3>\r\n      "),__p+='\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    '+(null==(__t=description)?"":__t)+"\r\n  </div>\r\n</div>\r\n\r\n"),__p+='\r\n\r\n<div class="row row-spaced panel form-section">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-12">\r\n        <div class="panel-title">Promotion Details</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="f-promoCode">Promotion Code</label><i class="icon icon-tool-tip x-space-s" title="This is the promotion code that customers will need to enter to recieve the discount."></i>\r\n        <input type="text" class="f-promo-required" id="f-promoCode" name="f-promoCode" value="'+(null==(__t=code)?"":__t)+'"',(federated||bcc)&&(__p+=" disabled"),__p+='>\r\n      </div>\r\n      <div class="col-3 form-section">\r\n        <div class="label">Active</div>\r\n        <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n        <label for="f-active" class="on-off-switch-label">\r\n            <div class="on-off-switch-state">on</div>\r\n        </label>\r\n      </div>      \r\n    </div>\r\n\r\n\r\n    <div class="row row-spaced">\r\n      ',"Promo Discount On Order Total"!==title?(__p+='\r\n      <div class="col-12">\r\n        <div class="row">\r\n          <div class="col-3 form-section">\r\n            <label for="f-startDate">Start Date</label>\r\n          </div>\r\n          <div class="col-3 form-section">\r\n            <label for="f-endDate">End Date</label>\r\n          </div>\r\n          <div class="col-2 form-section">\r\n            <div class="label">One Time Use</div>\r\n          </div>\r\n          ',bcc||(__p+='\r\n          <div class="col-2 form-section">\r\n            <div class="label">Allow Stacking<i title="This sets if the customer is allowed to combine other promo codes with this one on the same order." class="icon icon-tool-tip x-space-s"></i></div>\r\n          </div>\r\n          '),__p+='\r\n        </div>\r\n        <div class="row">\r\n          <div class="col-3 form-section">\r\n            <div class="date-container">\r\n              <input type="text" id="f-startDate" name="f-startDate" class="date f-promo-required" value="'+(null==(__t=startDate)?"":__t)+'"',(federated||bcc)&&(__p+=" disabled"),__p+='>\r\n            </div>\r\n          </div>\r\n          <div class="col-3 form-section">\r\n            <div class="date-container">\r\n              <input type="text" id="f-endDate" name="f-endDate" class="date f-promo-required" value="'+(null==(__t=endDate)?"":__t)+'"',(federated||bcc)&&(__p+=" disabled"),__p+='>\r\n            </div>\r\n          </div>\r\n          <div class="col-2 form-section">\r\n            <input '+(null==(__t=oneTimeActive?"checked":"")?"":__t)+' type="checkbox" id="f-oneTimeActive" name="f-oneTimeActive" class="on-off-switch" ',(federated||bcc)&&(__p+=" disabled"),__p+=' />\r\n            <label for="f-oneTimeActive" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n          </div>\r\n         ',bcc||(__p+='\r\n          <div class="col-2 form-section">\r\n            <input '+(null==(__t=stackingActive?"checked":"")?"":__t)+' type="checkbox" id="f-stackingActive" name="f-stackingActive" class="on-off-switch"',federated&&(__p+=" disabled"),__p+=' />\r\n            <label for="f-stackingActive" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n          </div>\r\n          '),__p+="\r\n        </div>\r\n      </div>\r\n      "):(__p+='\r\n        <div class="col-3 form-section">\r\n          <label for="f-startDate">Start Date</label>\r\n          <div class="date-container">\r\n            <input type="text" id="f-startDate" name="f-startDate" class="date f-promo-required"',federated&&(__p+=" disabled"),__p+='>\r\n          </div>\r\n        </div>\r\n        <div class="col-3 form-section">\r\n          <label for="f-endDate">End Date</label>\r\n          <div class="date-container">\r\n            <input type="text" id="f-endDate" name="f-endDate" class="date f-promo-required"',federated&&(__p+=" disabled"),__p+=">\r\n          </div>\r\n        </div>\r\n           ",bcc||(__p+='\r\n        <div class="col-2 form-section">\r\n          <div class="label">Allow Stacking<i title="This sets if the customer is allowed to combine other promo codes with this one on the same order." class="icon icon-tool-tip x-space-s"></i></div>\r\n          <input checked type="checkbox" id="f-stackingActive" name="f-stackingActive" class="on-off-switch"',federated&&(__p+=" disabled"),__p+=' />\r\n          <label for="f-stackingActive" class="on-off-switch-label">\r\n              <div class="on-off-switch-state">on</div>\r\n          </label>\r\n        </div>\r\n        '),__p+="\r\n      "),__p+="\r\n    </div>\r\n\r\n    ",bcc||(__p+='\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n        <label for="f-promoDescription">Promotion Description On Front-End</label><i class="icon icon-tool-tip x-space-s" title="This text describes to the customer what this promotion code will provide. It should also list any restrictions, such as minimum order total."></i>\r\n        <input type="text" class="f-promo-required" id="f-promoDescription" name="f-promoDescription"',federated&&(__p+=" disabled"),__p+=">\r\n      </div>\r\n    </div>\r\n    "),__p+="\r\n    ",bcc&&(__p+='\r\n    <div class="row row-spaced">\r\n      <div class="col-12 form-section">\r\n        <label for="f-bccPromoDetail">Promotion Details</label><i class="icon icon-tool-tip x-space-s" title="BCC Promo Details"></i>\r\n        <input type="text" id="f-bccPromoDetail" name="f-bccPromoDetail" value="'+(null==(__t=bccPromoDetail)?"":__t)+'" disabled>\r\n      </div>\r\n    </div>\r\n    '),__p+="\r\n\r\n  </div>\r\n</div>\r\n\r\n\r\n",promotionConditions&&!bcc&&(__p+='\r\n<div class="row row-spaced panel form-section">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-12">\r\n        <div class="panel-title">Promotion Conditions'+(null==(__t=promotionOffer?"":" and Offer")?"":__t)+'</div>\r\n      </div>\r\n    </div>\r\n    <div id="promotion-conditions-container">\r\n      '+(null==(__t=promotionConditions)?"":__t)+"\r\n    </div>\r\n  </div>\r\n</div>\r\n"),__p+="\r\n\r\n",promotionOffer&&!bcc&&(__p+='\r\n<div class="row row-spaced panel form-section">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-12">\r\n        <div class="panel-title">Promotion Offer</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div id="promotion-offer-container">\r\n      <div class="row row-spaced">\r\n        <div class="col-6 form-section">\r\n          <label for="f-discountType">Discount Type</label>\r\n          <div class="select-container">\r\n            <select class="f-promo-required" id="f-discountType" name="f-discountType"',federated&&(__p+=" disabled"),__p+='>\r\n              <option selected disabled hidden value="'+(null==(__t=discountType)?"":__t)+'">'+(null==(__t=discountType)?"":__t)+'</option>\r\n              <option value="Dollar Off">Dollar Off</option>\r\n              <option value="Percentage Off">Percentage Off</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="col-6 form-section">\r\n          <label for="f-discountAmount">Discount Amount</label>\r\n          <div class="select-container">\r\n            <select class="f-promo-required" id="f-discountAmount" name="f-discountAmount"',federated&&(__p+=" disabled"),__p+='>\r\n              <option selected disabled hidden value="'+(null==(__t=discountAmount)?"":__t)+'">'+(null==(__t=discountAmount)?"":__t)+'</option>\r\n              <option value="5">5</option>\r\n              <option value="10">10</option>\r\n              <option value="15">15</option>\r\n              <option value="20">20</option>\r\n              <option value="25">25</option>\r\n              <option value="30">30</option>\r\n              <option value="35">35</option>\r\n              <option value="40">40</option>\r\n              <option value="45">45</option>\r\n              <option value="50">50</option>\r\n              <option value="75">75</option>\r\n              <option value="100">100</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n');return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/templates/item-only-promo-condition-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n    <div class="row row-spaced">\r\n      <div class="col-6 form-section">\r\n        <label for="f-minItemNumber">Minimum Number Of Items In The Order</label>\r\n        <div class="select-container">\r\n          <select id="f-minItemNumber" class="f-promo-required" name="f-minItemNumber"',federated&&(__p+=" disabled"),__p+='>\r\n            <option selected disabled hidden value="'+(null==(__t=minItems)?"":__t)+'">'+(null==(__t=minItems)?"":__t)+'</option>\r\n            <option value="1">1</option>\r\n            <option value="2">2</option>\r\n            <option value="3">3</option>\r\n            <option value="4">4</option>\r\n            <option value="5">5</option>\r\n            <option value="6">6</option>\r\n            <option value="7">7</option>\r\n            <option value="8">8</option>\r\n            <option value="9">9</option>\r\n            <option value="10">10</option>        \r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/item-only-view",["backbone","../templates/add-promo-base-tpl","../templates/item-only-promo-condition-tpl","global-events"],function(e,t,n,i){var o=e.View.extend({render:function(){return this.$el.html(t(_.extend({title:"Promo Discount On Item Only",subtitle:"",description:"Discount on the item's price when number of items in the order is greater than or equal specific quantity.",promotionConditions:n(this.model.toJSON()),promotionOffer:!0},this.model.toJSON()))),this.delegateEvents(),this.cacheElem(),this},events:{"click #cancel-btn":"showAdd","click #save-btn":"handleSave","click #f-stackingActive":"handleStackToggle"},cacheElem:function(){this.$stackingActive=this.$el.find("#f-stackingActive")},handleStackToggle:function(e){var t=this,n=$(e.target);n.is(":checked")?(e.preventDefault(),i.trigger("modal:custom",{template:{title:"Allow Stacking?",text:"Any promotions that are set as stackable can be combined resulting in the customer receiving multiple discounts. Are you sure you want to activate this?",confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})):!t.$stackingActive.is("checked")},handleSave:function(){this.parent.showHome()},showAdd:function(){this.parent.showHome()}});return new o}),define("content/category-sections/marketing-promotions/promotion-codes/templates/add-ons-promo-condition-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n    <div class="col-4 form-section">\r\n        <div class="label">Apply To All Add-Ons</div>\r\n        <input '+(null==(__t=allAddOns?"checked":"")?"":__t)+' type="checkbox" id="f-allAddOns" name="f-allAddOns" class="on-off-switch" />\r\n        <label for="f-allAddOns" class="on-off-switch-label">\r\n            <div class="on-off-switch-state">on</div>\r\n        </label>\r\n    </div>\r\n</div>\r\n\r\n<div id="add-ons-container"></div>\r\n<div id="categories-container"></div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/add-ons-view",["backbone","../templates/add-promo-base-tpl","../templates/add-ons-promo-condition-tpl","components/general-product/views/general-product-view","content/shared/collections/addons-collection"],function(e,t,n,i,o){var r=e.View.extend({render:function(){return this.$el.html(t(_.extend({title:"Promo Discount On Item's Add-On",subtitle:"",description:"Discount on the item's Add-On when item total (item + add-on) is greater than or equal specific amount.  Also when any item from a specific category is in the order.  Example: 30% off the balloon for birthday bouquet.",promotionConditions:n(this.model.toJSON()),promotionOffer:!0},this.model.toJSON()))),this.delegateEvents(),this.cacheElem(),o.fetchCustom().done(function(){this.addonsCollection=o.deepClone(),this.addonsCollection.each(function(e){e.set("active",!1)}),this.$addonsContainer.append(this.getAddonsComponent(this.addonsCollection).render().el),this.toggleAddOns()}.bind(this)),this},cacheElem:function(){this.$addonsContainer=this.$el.find("#add-ons-container"),this.$allAddOns=this.$el.find("#f-allAddOns")},events:{"click #cancel-btn":"showAdd","change #f-allAddOns":"toggleAddOns"},showAdd:function(){this.parent.showHome()},toggleAddOns:function(){var e=this;e.$allAddOns.is(":checked")?e.$addonsContainer.hide():e.$addonsContainer.show()},minSelected:function(e){var t,n={};
return n[this.selectAddons.activeAttribute]=!0,t=this.selectAddons.collection.where(n).length,t>=e?!0:!1},getAddonsComponent:function(e){return this.selectAddons=new i({activeTitle:"Selected Product Add-Ons",activeTableTitle:"Add-on",allTitle:"Add-on Search",allSearchPlaceholder:"Add-on Search Term",activeAttribute:"active",nameAttribute:"name",async:!1,collection:e,imageSearch:!0}),this.selectAddons}});return new r}),define("content/category-sections/marketing-promotions/promotion-codes/templates/condition-base-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="f-promo-condition-wrapper">\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-6 form-section">\r\n        <label for="f-promo-condition">Promotion Conditions</label>\r\n        <div class="select-container">\r\n          <select id="f-promo-condition" name="f-promo-condition">\r\n            <option selected="" disabled="" hidden="" value=""></option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced">\r\n    <div id="type-3" class="col-12"></div>  \r\n  </div>\r\n  \r\n</div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/models/condition-model",["backbone"],function(e){var t=e.Model.extend({defaults:{number:"",condition:""}});return t}),define("content/category-sections/marketing-promotions/promotion-codes/collections/condition-collection",["backbone","../models/condition-model"],function(e,t){var n=e.Collection.extend({url:"/mock/promotion-code-conditions.json",model:t,getByCategory:function(e){return this.where({category:e})}});return new n}),define("content/category-sections/marketing-promotions/promotion-codes/templates/condition-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<option val="'+(null==(__t=condition)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'">'+(null==(__t=condition)?"":__t)+"</option>";return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/condition-view",["backbone","../templates/condition-tpl","../models/promotion-code-model"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){var t=this;this.parent=e.parent,this.childList=e.childList,this.setElement(this.template(this.model.toJSON())),e.parent.on("condChange:"+this.model.get("id"),t.handleCreate,this)},handleCreate:function(){var e=this,t=new n({number:e.model.get("number")});e.parent.handleEdit(t,e.childList)}});return i}),define("content/category-sections/marketing-promotions/promotion-codes/views/condition-base-view",["backbone","../templates/condition-base-tpl","../collections/condition-collection","./condition-view","global-events"],function(e,t,n,i,o){var r=e.View.extend({template:t,render:function(){return this.$el.html(this.template(this.templateOptions)),this.delegateEvents(),this.cacheElem(),n.fetchCustom().done(function(){this.addAllConditions(n.getByCategory(this.category))}.bind(this)),this},cacheElem:function(){this.$conditionsList=this.$el.find("#f-promo-condition"),this.$type3=this.$el.find("#type-3")},events:{"click #cancel-btn":"showAdd","change #f-promo-condition":"changeParentCondition"},showAdd:function(){this.parent.showAdd()},showHome:function(){this.parent.showHome()},changeParentCondition:function(e){o.trigger("form:finished");var t=this.$conditionsList.find(":selected").data("id");e.cVal=t,this.trigger("condChange:"+e.cVal,e)},addCondition:function(e){var t=this,n=new i({model:e,parent:t,childList:t.$type3});this.$conditionsList.append(n.render().el)},addAllConditions:function(e){this.$conditionsList.empty(),this.$conditionsList.prepend('<option selected="" disabled="" hidden="" value=""></option>'),e.forEach(this.addCondition,this)}});return r}),define("content/category-sections/marketing-promotions/promotion-codes/views/add-promo-code-base-view",["backbone","../models/promotion-code-model","../templates/add-promo-base-tpl","global-events","jqueryui"],function(e,t,n){var i=e.View.extend({initialize:function(){this.augment&&this.augment.events&&(this.events=_.extend(this.events,this.augment.events)),!this.options.title&&(this.options.title=""),!this.options.subtitle&&(this.options.subtitle=""),!this.options.description&&(this.options.description=""),!this.options.promotionConditions&&(this.options.promotionConditions=""),!this.options.promotionOffer&&(this.options.promotionOffer="")},render:function(){return this.$el.html(n(_.extend(this.options,this.model.toJSON()))),this.delegateEvents(),this.applyDates(),this.cacheElem(),this.applyToolTips(),this.augment&&this.augment.render&&this.augment.render.call(this),this},events:{"click #cancel-btn":"showHome","click #save-btn":"handleSave"},showHome:function(){this.parent.showHome()},handleSave:function(){this.showHome()},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$stackingActive=this.$el.find("#f-stackingActive")},applyDates:function(){var e=this;e.$startDate=e.$el.find("#f-startDate"),e.$endDate=e.$el.find("#f-endDate"),e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return i}),define("content/category-sections/marketing-promotions/promotion-codes/views/order-total-local-delivery-view",["./add-promo-code-base-view"],function(e){var t=e.extend({options:{title:"Promo Discount On Order Total",subtitle:"Local Delivery Discount",description:"Discount on the Order Total for Delivery to local zip codes",promotionConditions:'<div class="row row-spaced"><div class="col-12 font-size-l">The delivery destination zip code is among the local delivery zip codes which are set before in the custom fees section. To change these, please visit More > Delivery > Manage Delivery Fees.</div></div>',promotionOffer:!0}});return new t}),define("content/category-sections/marketing-promotions/promotion-codes/templates/order-total-max-allowed-promo-condition-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-6 form-section">\r\n    <label for="f-minOrderTotal">Minimum Order Total</label>\r\n    <div class="select-container">\r\n      <select class="f-promo-required" id="f-minOrderTotal" name="f-minOrderTotal"',federated&&(__p+=" disabled"),__p+='>\r\n        <option selected disabled hidden value=""></option>\r\n        <option value="25">$25</option>\r\n        <option value="30">$30</option>\r\n        <option value="35">$35</option>\r\n        <option value="40">$40</option>\r\n        <option value="45">$45</option>\r\n        <option value="50">$50</option>\r\n        <option value="55">$55</option>\r\n        <option value="60">$60</option>\r\n        <option value="65">$65</option>\r\n        <option value="70">$70</option>\r\n        <option value="75">$75</option>\r\n        <option value="80">$80</option>\r\n        <option value="85">$85</option>\r\n        <option value="90">$90</option>\r\n        <option value="95">$95</option>\r\n        <option value="100">$100</option>          \r\n      </select>\r\n    </div>\r\n  </div>\r\n  <div class="col-6 form-section">\r\n    <label for="f-maxDiscount">Max Discount Allowed</label><i class="icon icon-tool-tip x-space-s" title="This is the maximum discount amount allowed when using this promotion code."></i>\r\n    <div class="select-container">\r\n      <select class="f-promo-required" id="f-maxDiscount" name="f-maxDiscount"',federated&&(__p+=" disabled"),__p+='>\r\n        <option selected disabled hidden value="'+(null==(__t=maxDiscount)?"":__t)+'">'+(null==(__t=maxDiscount)?"":__t)+'</option>\r\n        <option value="5">$5</option>\r\n        <option value="10">$10</option>\r\n        <option value="15">$15</option>\r\n        <option value="20">$20</option>\r\n        <option value="25">$25</option>\r\n        <option value="30">$30</option>\r\n        <option value="35">$35</option>\r\n        <option value="40">$40</option>\r\n        <option value="50">$50</option>\r\n        <option value="60">$60</option>\r\n      </select>\r\n    </div>\r\n  </div>\r\n</div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/order-total-max-allowed-view",["./add-promo-code-base-view","../templates/order-total-max-allowed-promo-condition-tpl","../models/promotion-code-model"],function(e,t,n){var i=e.extend({options:{title:"Promo Discount On Order Total",subtitle:"Minimum Spend Required with Max allowed discount.",description:"Discount on the Order Total based on the amount of order total and maximum discount allowed.",promotionConditions:t((this.model||new n).toJSON()),promotionOffer:!0}});return new i}),define("content/category-sections/marketing-promotions/promotion-codes/templates/order-total-minimum-spend-promo-condition-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-6 form-section">\r\n    <label for="f-minOrderTotal">Minimum Order Total</label>\r\n    <div class="select-container">\r\n    	<select class="f-promo-required" id="f-minOrderTotal" name="f-minOrderTotal"',federated&&(__p+=" disabled"),__p+='>\r\n       		<option selected disabled hidden value="'+(null==(__t=minTotal)?"":__t)+'">'+(null==(__t=minTotal)?"":__t)+'</option>\r\n		    <option value="25">$25</option>\r\n		    <option value="30">$30</option>\r\n		    <option value="35">$35</option>\r\n		    <option value="40">$40</option>\r\n		    <option value="45">$45</option>\r\n		    <option value="50">$50</option>\r\n		    <option value="55">$55</option>\r\n		    <option value="60">$60</option>\r\n		    <option value="65">$65</option>\r\n		    <option value="70">$70</option>\r\n		    <option value="75">$75</option>\r\n		    <option value="80">$80</option>\r\n		    <option value="85">$85</option>\r\n		    <option value="90">$90</option>\r\n		    <option value="95">$95</option>\r\n		    <option value="100">$100</option>        \r\n    	</select>\r\n    </div>\r\n  </div>\r\n</div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/order-total-minimum-spend-view",["./add-promo-code-base-view","../models/promotion-code-model","../templates/order-total-minimum-spend-promo-condition-tpl"],function(e,t,n){var i=e.extend({options:{title:"Promo Discount On Order Total",subtitle:"Minimum Spend Required",description:"Discount on the Order Total fbased on the amount of order total.",promotionConditions:n((this.model||new t).toJSON()),promotionOffer:!0}});return new i}),define("content/category-sections/marketing-promotions/promotion-codes/views/order-total-register-view",["./add-promo-code-base-view"],function(e){var t=e.extend({options:{title:"Promo Discount On Order Total",subtitle:"First Time Purchase by Registered Customers",description:"Discount on the Order Total for registered customers placing order for the first time.  The customer will receive the promotion code in her email after registration.",promotionConditions:'<div class="row row-spaced"><div class="col-12 font-size-l">The customer should be registered and placing the order for the first time.</div></div>',promotionOffer:!0}});return new t}),define("content/category-sections/marketing-promotions/promotion-codes/templates/order-totaled-tiered-discounts-promo-condition-offer-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <button type="button" id="add-tier-btn" class="btn btn-submit pull-right"><i class="icon icon-add"></i>Add Tier</button>\r\n  </div>\r\n</div>\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <table id="tier-table" class="table alternate">\r\n      <thead>\r\n        <tr>\r\n          <th class="col-6-20">Minimum Order Total</th>\r\n          <th class="col-6-20">Discount Type</th>\r\n          <th class="col-6-20">Discount Amount</th>\r\n          <th class="col-2-20">Delete</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody class="form-section" id="tier-list"></tbody>\r\n    </table>\r\n  </div>\r\n</div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/templates/tier-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n  <td>\r\n    <div class="select-container">\r\n      <select class="f-promo-required">\r\n        <option selected disabled hidden value="'+(null==(__t=minOrderTotal)?"":__t)+'">'+(null==(__t=minOrderTotal)?"":__t)+'</option>\r\n        <option value="$50+">$50+</option>\r\n        <option value="$100+">$100+</option>\r\n        <option value="$150+">$150+</option>\r\n        <option value="$200+">$200+</option>\r\n        <option value="$250+">$250+</option>\r\n        <option value="$300+">$300+</option>\r\n        <option value="$350+">$350+</option>\r\n        <option value="$400+">$400+</option>\r\n        <option value="$450+">$450+</option>\r\n        <option value="$500+">$500+</option>\r\n      </select>\r\n    </div>\r\n  </td>\r\n  <td>\r\n    <div class="select-container">\r\n      <select class="f-promo-required">\r\n        <option selected disabled hidden value="'+(null==(__t=discountType)?"":__t)+'">'+(null==(__t=discountType)?"":__t)+'</option>\r\n        <option value="Dollar Off">Dollar Off</option>\r\n        <option value="Percentage Off">Percentage Off</option>\r\n      </select>\r\n    </div>\r\n  </td>\r\n  <td>\r\n    <div class="select-container">\r\n      <select class="f-promo-required">\r\n        <option selected disabled hidden value="'+(null==(__t=discountAmount)?"":__t)+'">'+(null==(__t=discountAmount)?"":__t)+'</option>\r\n        <option value="5">5</option>\r\n        <option value="10">10</option>\r\n        <option value="15">15</option>\r\n        <option value="20">20</option>\r\n        <option value="25">25</option>\r\n        <option value="30">30</option>\r\n        <option value="35">35</option>\r\n        <option value="40">40</option>\r\n        <option value="45">45</option>\r\n        <option value="50">50</option>\r\n      </select>\r\n    </div>\r\n  </td>\r\n  <td>\r\n    <button class="icon icon-btn icon-trash icon-2x"></button>\r\n  </td>\r\n</tr>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/tier-view",["backbone","../templates/tier-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.listenTo(this.collection,"remove",function(e){this.model===e&&this.remove()}.bind(this)),this.setElement(this.template(this.model.toJSON()))},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){this.collection.remove(this.model)}});return n}),define("content/category-sections/marketing-promotions/promotion-codes/models/tier-model",["backbone"],function(e){var t=e.Model.extend({defaults:{minOrderTotal:"",discountType:"",discountAmount:""}});return t}),define("content/category-sections/marketing-promotions/promotion-codes/collections/tier-collection",["backbone","../models/tier-model"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("content/category-sections/marketing-promotions/promotion-codes/views/order-total-tiered-discounts-view",["./add-promo-code-base-view","../templates/order-totaled-tiered-discounts-promo-condition-offer-tpl","./tier-view","../collections/tier-collection"],function(e,t,n,i){var o=e.extend({options:{title:"Promo Discount On Order Total",subtitle:"Tiered Discounts",description:"Different discount on the order total based on different amount of order total (Tier Discount)",promotionConditions:t(),promotionOffer:!1},augment:{render:function(){this.cacheElem(),this.stopListening(this.tierCollection),this.tierCollection=new i,this.listenTo(this.tierCollection,"add remove",this.addAllTiers),this.addAllTiers(this.tierCollection)},events:{"click #add-tier-btn":"addNewTier"}},cacheElem:function(){this.$tierList=this.$el.find("#tier-list")},minSelected:function(e){var t;return t=this.tierCollection.length,console.log(t),t>=e?!0:!1},addNewTier:function(){this.tierCollection.add({})},addTier:function(e){var t=new n({model:e,collection:this.tierCollection});this.$tierList.append(t.render().el)},addAllTiers:function(){this.$tierList.empty(),this.tierCollection.each(this.addTier,this)}});return new o}),define("content/category-sections/marketing-promotions/promotion-codes/views/order-total-main-view",["./condition-base-view","./order-total-local-delivery-view","./order-total-max-allowed-view","./order-total-minimum-spend-view","./order-total-register-view","./order-total-tiered-discounts-view"],function(e,t,n,i,o,r){var a=e.extend({initialize:function(){t.parent=this,n.parent=this,i.parent=this,o.parent=this,r.parent=this},templateOptions:{title:"Add New Promotion Code On Order Total",description:"Please use one of the Promotion Conditions below to create a new promotion code for discounting on Order Total."},category:"Order Total",minTierSelected:function(e){return r.minSelected(e)},handleEdit:function(e,a){var s;switch(e.get("number")){case"01":s=i;break;case"02":s=n;break;case"03":s=r;break;case"04":s=t;break;case"05":s=o}s.model=e,s&&this.parent.replaceVisible(s,a),a&&a.find("div:first").css("opacity",1)}});return new a}),define("content/category-sections/marketing-promotions/promotion-codes/views/delivery-service-fee-local-view",["./add-promo-code-base-view"],function(e){var t=e.extend({options:{title:"Promo Discount On Fees Total",subtitle:"Delivery To Local Zip Codes",description:"Discount on the Delivery/Service Fees total for orders with local delivery.",promotionConditions:'<div class="row row-spaced"><div class="col-12 font-size-l">Delivery Zip Code is among the local zip codes which are set inside Custom Fees setup section.</div></div>',promotionOffer:!0}});return new t}),define("content/category-sections/marketing-promotions/promotion-codes/templates/delivery-service-fee-minimum-item-promo-condition-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-6 form-section">\r\n    <label for="f-minItemTotal">Minimum Item Total (item + add-on)</label><i class="icon icon-tool-tip x-space-s" title="This is the minimum purchase amount required to use this promotion code."></i>\r\n    <div class="select-container">\r\n      <select class="f-promo-required" id="f-minItemTotal" name="f-minItemTotal"',federated&&(__p+=" disabled"),__p+='>\r\n        <option selected disabled hidden value="'+(null==(__t=minTotal)?"":__t)+'">'+(null==(__t=minTotal)?"":__t)+'</option>\r\n        <option value="25">$25</option>\r\n        <option value="30">$30</option>\r\n        <option value="35">$35</option>\r\n        <option value="40">$40</option>\r\n        <option value="45">$45</option>\r\n        <option value="50">$50</option>\r\n        <option value="55">$55</option>\r\n        <option value="60">$60</option>\r\n        <option value="65">$65</option>\r\n        <option value="70">$70</option>\r\n        <option value="75">$75</option>\r\n        <option value="80">$80</option>\r\n        <option value="85">$85</option>\r\n        <option value="90">$90</option>\r\n        <option value="95">$95</option>\r\n        <option value="100">$100</option>          \r\n      </select>\r\n    </div>\r\n  </div>\r\n  <div class="col-6 form-section">\r\n    <label for="f-selectedProductsCategories">Selected Products or Categories</label><i class="icon icon-tool-tip x-space-s" title="The promotion code will only work on the selected categories or products."></i>\r\n    <div class="select-container">\r\n      <select class="f-promo-required" id="f-selectedProductsCategories" name="f-selectedProductsCategories"',federated&&(__p+=" disabled"),__p+='>\r\n        <option selected disabled hidden value="'+(null==(__t=selectedProductsCategories)?"":__t)+'"></option>\r\n        <option value="All Products">All Products</option>\r\n        <option value="Specific Products">Specific Products</option>\r\n        <option value="Specific Categories">Specific Categories</option>\r\n      </select>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div id="products-container"></div>\r\n<div id="categories-container"></div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/delivery-service-fee-minimum-item-view",["./add-promo-code-base-view","../templates/delivery-service-fee-minimum-item-promo-condition-tpl","components/general-product/views/general-product-view","components/featured-occasions/collections/all-occasions-collection","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection","../models/promotion-code-model","global-events"],function(e,t,n,i,o,r,a,s){var l=e.extend({options:{title:"Promo Discount On Delivery Fee",description:"Discount on Delivery/Service Fee when item total (item + add-on) is greater than or equal specific amount, OR when specific item, OR any item from a specific category is in the order.  Example: $10 off the delivery fee for the birthday bouquet.",promotionConditions:t((this.model||new a).toJSON()),promotionOffer:!0},render:function(){this.cacheElem(),i.fetchCustom().done(function(){this.occasionsCollection=i.deepClone(),this.occasionsCollection.each(function(e){e.set("active",!1)}),this.$categoriesContainer.append(this.getCategoriesComponent(this.occasionsCollection).render().el)}.bind(this)),this.featuredProductView=new o({collection:new r,selectAll:!0}),this.$productsContainer.append(this.featuredProductView.render().el)},events:{"change #f-selectedProductsCategories":"handleToggle","click #f-stackingActive":"handleStackToggle"},cacheElem:function(){this.$categoriesContainer=this.$el.find("#categories-container"),this.$productsContainer=this.$el.find("#products-container"),this.$toggler=this.$el.find("#f-selectedProductsCategories"),this.$stackingActive=this.$el.find("#f-stackingActive")},handleStackToggle:function(e){var t=this,n=$(e.target);n.is(":checked")?(e.preventDefault(),s.trigger("modal:custom",{template:{title:"Allow Stacking?",text:"Any promotions that are set as stackable can be combined resulting in the customer receiving multiple discounts. Are you sure you want to activate this?",confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){console.log(e.target.checked),n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})):(!t.$stackingActive.is("checked"),console.log("reaching Else"))},handleToggle:function(){var e=this.$toggler.find("option:selected").val();"All Products"==e?(this.$productsContainer.hide(),this.$categoriesContainer.hide()):"Specific Products"==e?(this.$productsContainer.show(),this.$categoriesContainer.hide()):"Specific Categories"==e&&(this.$productsContainer.hide(),this.$categoriesContainer.show())},getCategoriesComponent:function(e){return new n({activeTitle:"Selected Categories",activeTableTitle:"Category",allTitle:"Category Search",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,collection:e,hideGrids:!0,showCategoryID:!0})}});return new l}),define("content/category-sections/marketing-promotions/promotion-codes/views/delivery-fee-discount-view",["./add-promo-code-base-view"],function(e){var t=e.extend({options:{title:"Delivery Fee Discount",subtitle:"",description:"Discount on the Delivery Fee.",promotionConditions:!1,promotionOffer:!0}});return new t}),define("content/category-sections/marketing-promotions/promotion-codes/views/delivery-service-fee-main-view",["./condition-base-view","./delivery-service-fee-local-view","./delivery-service-fee-minimum-item-view","./delivery-fee-discount-view"],function(e,t,n,i){var o=e.extend({initialize:function(){t.parent=this,n.parent=this,i.parent=this},templateOptions:{title:"Add New Promotion Code On Delivery/Service Fee",description:"Please use one of the Promotion Conditions below to create a new promotion code for discounting on Delivery/Service fee."},category:"Delivery/Service Fee",handleEdit:function(e,o){var r;switch(e.get("number")){case"01":r=t;break;case"02":r=n;break;case"03":r=i}r.model=e,r&&this.parent.replaceVisible(r,o),o&&o.find("div:first").css("opacity",1)}});return new o}),define("content/category-sections/marketing-promotions/promotion-codes/views/item-add-ons-in-store-view",["./add-promo-code-base-view"],function(e){var t=e.extend({options:{title:"Promo Discount On Item Total",subtitle:"In Store Pick-Up Discount",description:"Discount on the Item Total when the customer chooses in store pick-up method.",promotionConditions:'<div class="row row-spaced"><div class="col-12 font-size-l">Customer chooses in store pick-up method in delivery options.</div></div>',promotionOffer:!0}});return new t}),define("content/category-sections/marketing-promotions/promotion-codes/templates/item-add-ons-minimum-item-promo-condition-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n<div class="col-6 form-section">\r\n  <label for="f-minItemTotal">Minimum Item Total</label><i class="icon icon-tool-tip x-space-s" title="This is the minimum purchase amount required to use this promotion code."></i>\r\n  <div class="select-container">\r\n    <select id="f-minItemTotal" class="f-promo-required" name="f-minItemTotal"',federated&&(__p+=" disabled"),__p+='>\r\n      <option selected disabled hidden value=""></option>\r\n      <option value="25">$25</option>\r\n      <option value="30">$30</option>\r\n      <option value="35">$35</option>\r\n      <option value="40">$40</option>\r\n      <option value="45">$45</option>\r\n      <option value="50">$50</option>\r\n      <option value="55">$55</option>\r\n      <option value="60">$60</option>\r\n      <option value="65">$65</option>\r\n      <option value="70">$70</option>\r\n      <option value="75">$75</option>\r\n      <option value="80">$80</option>\r\n      <option value="85">$85</option>\r\n      <option value="90">$90</option>\r\n      <option value="95">$95</option>\r\n      <option value="100">$100</option>\r\n    </select>\r\n  </div>\r\n</div>\r\n<div class="col-3 form-section">\r\n  <label for="f-deliveryStartDate">Delivery Start Date</label>\r\n  <div class="date-container">\r\n    <input type="text" id="f-deliveryStartDate" name="f-deliveryStartDate" class="date f-promo-required" value="'+(null==(__t=deliveryStartDate)?"":__t)+'"',federated&&(__p+=" disabled"),__p+='>\r\n  </div>\r\n</div>\r\n<div class="col-3 form-section">\r\n  <label for="f-deliveryEndDate">Delivery End Date</label>\r\n  <div class="date-container">\r\n    <input type="text" id="f-deliveryEndDate" name="f-deliveryEndDate" class="date f-promo-required" value="'+(null==(__t=deliveryEndDate)?"":__t)+'"',federated&&(__p+=" disabled"),__p+=">\r\n  </div>\r\n</div>\r\n</div>";return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/item-add-ons-minimum-item-view",["./add-promo-code-base-view","../templates/item-add-ons-minimum-item-promo-condition-tpl","../models/promotion-code-model"],function(e,t,n){var i=e.extend({options:{title:"Promo Discount On Item Total",subtitle:"Minimum Item total (Item + Add ons) in specific delivery date range.",description:"Discount on the Item Total based on the delivery date range.",promotionConditions:t((this.model||new n).toJSON()),promotionOffer:!0},augment:{render:function(){this.cacheElem(),this.applyDeliveryDates()}},cacheElem:function(){this.$deliveryStartDate=this.$el.find("#f-deliveryStartDate"),this.$deliveryEndDate=this.$el.find("#f-deliveryEndDate")},applyDeliveryDates:function(){var e=this;e.$deliveryStartDate.datepicker({onSelect:function(t){e.$deliveryEndDate.datepicker("option","minDate",t),e.$deliveryStartDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$deliveryEndDate.datepicker({onSelect:function(t){e.$deliveryStartDate.datepicker("option","maxDate",t),e.$deliveryEndDate.trigger("blur")},dateFormat:"mm/dd/y"})}});return new i}),define("content/category-sections/marketing-promotions/promotion-codes/views/item-add-ons-specific-category-view",["./add-promo-code-base-view","components/general-product/views/general-product-view","components/featured-occasions/collections/all-occasions-collection"],function(e,t,n){var i=e.extend({options:{title:"Promo Discount On Item Total",subtitle:"Specific Category Discount",description:"Discount on the item total (item + add on) when any item from a specific category is in the order.",promotionConditions:'<div id="categories-container"><div class="panel-title">Category Selection</div></div>',promotionOffer:!0},augment:{render:function(){this.cacheElem(),n.fetchCustom().done(function(){this.occasionsCollection=n.deepClone(),this.occasionsCollection.each(function(e){e.set("active",!1)}),this.$categoriesContainer.append(this.getCategoriesComponent(this.occasionsCollection).render().el),this.$removePanel=this.$el.find(".general-product .panel:first"),this.$removePanel.removeClass("panel").wrapInner('<div class="col-12"></div>'),this.$categoriesContainer.unwrap(),this.$removeRow.hide()}.bind(this))}},minSelected:function(e){var t,n={};return n[catSelect.activeAttribute]=!0,t=catSelect.collection.where(n).length,t>=e?!0:!1},cacheElem:function(){this.$categoriesContainer=this.$el.find("#categories-container"),this.$catCol12=this.$categoriesContainer.closest(".col-12"),this.$removeRow=this.$catCol12.find(".row:first")},getCategoriesComponent:function(e){return catSelect=new t({activeTitle:"Selected Categories",activeTableTitle:"Category",allTitle:"Category Search",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,selectAll:!1,collection:e,hideGrids:!0})}});return new i}),define("content/category-sections/marketing-promotions/promotion-codes/views/item-add-ons-specific-products-view",["./add-promo-code-base-view","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection"],function(e,t,n){var i=e.extend({options:{title:"Promo Discount On Item Total",subtitle:"Specific Products discount",description:"Discount on the item total (item + add on) when specific item is in the order.",promotionConditions:'<div id="products-container"></div>',promotionOffer:!0},augment:{render:function(){this.cacheElem(),this.featuredProductView=new t({collection:new n,selectAll:!0}),this.$productsContainer.append(this.featuredProductView.render().el),this.$prodPanel.removeClass("panel"),this.$removeRow.hide(),this.$productsContainer.unwrap().unwrap().unwrap()}},minSelected:function(e){var t=this.featuredProductView.collection.where({featured:!0}).length;return t>=e?!0:!1},cacheElem:function(){this.$productsContainer=this.$el.find("#products-container"),this.$prodCol12=this.$productsContainer.closest(".col-12"),this.$removeRow=this.$prodCol12.find(".row:first"),this.$featuredProducts=this.$el.find("#m-featured-products"),this.$prodPanel=this.$featuredProducts.find(".panel:first")}});return new i}),define("content/category-sections/marketing-promotions/promotion-codes/views/item-add-ons-main-view",["./condition-base-view","./item-add-ons-in-store-view","./item-add-ons-minimum-item-view","./item-add-ons-specific-category-view","./item-add-ons-specific-products-view"],function(e,t,n,i,o){var r=e.extend({initialize:function(){t.parent=this,n.parent=this,i.parent=this,o.parent=this
},templateOptions:{title:"Add New Promotion Code On Item Total",description:"Please use one of the Promotion Conditions below to create a new promotion code for discounting on Item Total (Item + Add Ons)."},category:"Item + Add Ons",minProdSelected:function(e){return o.minSelected(e)},minCatSelected:function(e){return i.minSelected(e)},handleEdit:function(e,r){var a;switch(e.get("number")){case"01":a=o;break;case"02":a=i;break;case"03":a=n;break;case"04":a=t}a.model=e,a&&this.parent.replaceVisible(a,r),r&&r.find("div:first").css("opacity",1)}});return new r}),define("content/category-sections/marketing-promotions/promotion-codes/templates/quick-promo-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n		  <h2 class="pull-left">Create Quick Promotion Code</h2>\r\n		  <div class="btn-panel">\r\n			<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right compact"><i class="icon icon-add"></i>Create Code</button>			\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>	  				\r\n		  </div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-6 form-section">\r\n	  <label for="f-promotionCode">Promotion Code</label><i class="icon icon-tool-tip x-space-s" title="This is the text that customers will need to enter to recieve this discount."></i>\r\n	  <input type="text" id="f-promotionCode" name="f-promotionCode">\r\n	</div>\r\n	<div class="col-3 form-section">\r\n	  <label for="f-discountAmount">Discount Amount</label>\r\n	  <div class="select-container">\r\n	    <select id="f-discountAmount" name="f-discountAmount">\r\n	      <option selected disabled hidden value=""></option>\r\n	      <option value="$5">$5</option>\r\n	      <option value="$10">$10</option>\r\n	      <option value="$20">$20</option>\r\n	      <option value="10%">10%</option>\r\n	      <option value="20%">20%</option>\r\n	      <option value="Free Delivery">Free Delivery</option>\r\n	    </select>\r\n	  </div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-3 form-section">\r\n	  <label for="f-startDate">Start Date</label><i title="This is the date you\'d like this promo to become active." class="icon icon-tool-tip x-space-s"></i>\r\n	  <div class="date-container">\r\n	    <input type="text" id="f-startDate" name="f-startDate" class="date">\r\n	  </div>\r\n	</div>\r\n	<div class="col-3 form-section">\r\n	  <label for="f-endDate">End Date</label><i title="This is the date you\'d like this promo code to become inactive." class="icon icon-tool-tip x-space-s"></i>\r\n	  <div class="date-container">\r\n	    <input type="text" id="f-endDate" name="f-endDate" class="date">\r\n	  </div>\r\n	</div>\r\n</div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/quick-promo-view",["underscore","backbone","../templates/quick-promo-tpl","../models/promotion-code-model","../collections/promotion-code-collection","global-events","jqueryval","jqueryui"],function(e,t,n,i,o,r){var a=t.View.extend({tagName:"form",id:"f-quick-promo",template:n,model:new i,render:function(){var e=this;return this.$el.html(this.template()),e.delegateEvents(),e.cacheElem(),e.applyDates(),e.validateForm(),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel"},cacheElem:function(){this.$form=this.$el,this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate"),this.$tip=this.$el.find(".tooltip-change"),this.$discountAmount=this.$el.find("#f-discountAmount"),this.$code=this.$el.find("#f-promotionCode"),this.$cancelBtn=this.$el.find("#cancel-btn")},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},validateForm:function(){this.validator=this.$form.validate({rules:{"f-promotionCode":"required","f-discountAmount":"required","f-endDate":{required:"#f-startDate:filled"}}})},isUniquePromoCode:function(){return!o.hasCode()},handleCancel:function(){this.parent.showHome()},handleSave:function(){var e=this.$code.val().trim();if(this.$form.valid()&&this.isUniquePromoCode(e)){var t,n=this.$discountAmount.find("option:selected").val(),a=n.replace(/[^a-z0-9\s]/gi,"");t=n.indexOf("$")>-1?"Dollar Off":"Percentage Off";var s=new i({code:e,startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),discountType:t,discountAmount:a,id:Date.now()});s.set("Free Delivery"===s.get("discountAmount")?{category:"Delivery/Service Fee",number:"01"}:{category:"Item Only",number:"01"}),o.add(s),r.trigger("form:save",this.$tip),this.parent.showHome()}else r.trigger("form:invalid",this.$tip)}});return new a}),define("content/category-sections/marketing-promotions/promotion-codes/templates/bulk-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n	  <div class="panel-title clearfix">\r\n	    <div class="pull-left y-space-top-m">\r\n	      Create Quick Promotion Codes in Bulk\r\n	    </div>\r\n	    <div class="btn-panel">\r\n	      <button type="button" id="save-btn" class="btn btn-submit pull-right compact">\r\n	        <i class="icon icon-add"></i>\r\n	        Create Codes\r\n	      </button>\r\n	    </div>\r\n	  </div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-3 form-section">\r\n	  <label for="f-codePrefix">Code Prefix</label><i class="icon icon-tool-tip x-space-s" title="This allows you to put a prefix at the beginning of every promo code in the set. The second half will be automatically generated for you."></i>\r\n	  <input type="text" id="f-codePrefix" name="f-codePrefix">\r\n</div>\r\n\r\n\r\n<div class="col-3 form-section">\r\n  <label for="f-discountAmount">Discount Amount</label>\r\n  <div class="select-container">\r\n    <select id="f-discountAmount" name="f-discountAmount">\r\n      <option selected disabled hidden value=""></option>\r\n      <option value="$5">$5</option>\r\n      <option value="$10">$10</option>\r\n      <option value="$20">$20</option>\r\n      <option value="10%">10%</option>\r\n      <option value="20%">20%</option>\r\n      <option value="Free Delivery">Free Delivery</option>\r\n    </select>\r\n  </div>\r\n</div>\r\n\r\n	<div class="col-3 form-section">\r\n	  <label for="f-codeQuantityNeeded">Quantity</label><i class="icon icon-tool-tip x-space-s" title="How many of these promotion codes would you like to create?"></i>\r\n	  <input type="text" id="f-codeQuantityNeeded" name="f-codeQuantityNeeded">\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-3 form-section">\r\n	  <label for="f-startDate">Start Date</label><i title="This is the date that this set of promotion codes will become active." class="icon icon-tool-tip x-space-s"></i>\r\n	  <div class="date-container">\r\n	    <input type="text" id="f-startDate" name="f-startDate" class="date">\r\n	  </div>\r\n	</div>\r\n	<div class="col-3 form-section">\r\n	  <label for="f-endDate">End Date</label><i title="This is the date that this set of promotion codes will become inactive." class="icon icon-tool-tip x-space-s"></i>\r\n	  <div class="date-container">\r\n	    <input type="text" id="f-endDate" name="f-endDate" class="date">\r\n	  </div>\r\n	</div>\r\n</div>';return __p}}),define("content/category-sections/marketing-promotions/promotion-codes/views/bulk-view",["underscore","backbone","../templates/bulk-tpl","../models/promotion-code-model","../collections/promotion-code-collection","global-events","jqueryval","jqueryui"],function(e,t,n,i,o,r){var a=t.View.extend({tagName:"form",id:"f-bulk-promo",template:n,model:new i,render:function(){var e=this;return this.$el.html(this.template()),e.delegateEvents(),e.cacheElem(),e.applyDates(),e.validateForm(),e},events:{"click #save-btn":"handleSave","click #f-stackingActive":"handleStackToggle"},cacheElem:function(){this.$form=this.$el,this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate"),this.$tip=this.$el.find(".tooltip-change"),this.$discountAmount=this.$el.find("#f-discountAmount"),this.$code=this.$el.find("#f-codePrefix"),this.$quantity=this.$el.find("#f-codeQuantityNeeded"),this.$stackingActive=this.$el.find("#f-stackingActive")},handleStackToggle:function(e){var t=this,n=$(e.target);event.preventDefault(),r.trigger("modal:custom",{template:{title:"Allow Stacking?",text:"Any promotions that are set as stackable can be combined resulting in the customer receiving multiple discounts. Are you sure you want to activate this?",confirmBtnText:"OK",cancelBtnText:"Cancel"},confirmFn:function(){n.is(":checked")||t.$stackingActive.prop("checked",!0),n.prop("checked",!n.prop("checked"))},cancelFn:function(){}})},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},validateForm:function(){this.validator=this.$form.validate({rules:{"f-codePrefix":"required","f-discountAmount":"required","f-codeQuantityNeeded":{required:!0,digits:!0},"f-endDate":{required:"#f-startDate:filled"}}})},isUniquePromoCode:function(){return!o.hasCode()},handleSave:function(){var e=this.$code.val().trim();if(this.$form.valid()&&this.isUniquePromoCode(e)){var t,n=this.$discountAmount.find("option:selected").val(),a=n.replace(/[^a-z0-9\s]/gi,"");t=n.indexOf("$")>-1?"Dollar Off":"Percentage Off";var s=new i({code:e,startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),discountType:t,discountAmount:a,id:Date.now(),bulk:!0});s.set("Free Delivery"===s.get("discountAmount")?{category:"Delivery/Service Fee",number:"01"}:{category:"Item Only",number:"01"}),o.add(s),r.trigger("form:save",this.$tip),this.parent.showHome()}else r.trigger("form:invalid",this.$tip)}});return new a}),define("content/category-sections/marketing-promotions/promotion-codes/views/promotion-codes-view",["backbone","./promotion-codes-home-view","./add-promo-code-view","./item-only-view","./add-ons-view","./order-total-main-view","./delivery-service-fee-main-view","./item-add-ons-main-view","./quick-promo-view","./bulk-view","global-events"],function(e,t,n,i,o,r,a,s,l,c,d){var u=e.View.extend({tagName:"div",id:"p-promotion-codes",initialize:function(){t.parent=this,n.parent=this,i.parent=this,o.parent=this,r.parent=this,a.parent=this,s.parent=this,l.parent=this,c.parent=this},regions:{visible:null},render:function(){return this.showHome(),el=null,this},replaceVisible:function(e,t){var n=this;t?d.trigger("form:cancel",function(){t.empty(),t.append(e.render().$el.fadeIn(200).focus())}):(d.trigger("form:cancel",function(){n.$el.empty(),n.$el.append(e.render().$el.fadeIn(200).focus()),n.regions.visible=e}),$(window).scrollTop(0))},showHome:function(){this.replaceVisible(t)},showAdd:function(){this.replaceVisible(n)},showQuick:function(){this.replaceVisible(l)},handleEdit:function(e){switch(e.get("category")){case"Order Total":this.showOrderTotal(e);break;case"Item + Add Ons":this.showItemAddOns(null,e);break;case"Delivery/Service Fee":this.showDeliveryServiceFee(null,e);break;case"Item Only":this.showItemOnly(e);break;case"Item Add-Ons":this.showAddOns(null,e)}},checkAddOns:function(){return o.minSelected(1)},checkProducts:function(){return s.minProdSelected(1)},checkCats:function(){return s.minCatSelected(1)},checkTiers:function(){return r.minTierSelected(1)},showItemOnly:function(e,t){i.model=e,this.replaceVisible(i,t)},showBulk:function(e,t){c.model=e,this.replaceVisible(c,t)},showAddOns:function(e,t){o.model=e,this.replaceVisible(o,t)},showOrderTotal:function(e,t){t?r.handleEdit(t):this.replaceVisible(r,e)},showDeliveryServiceFee:function(e,t){t?a.handleEdit(t):this.replaceVisible(a,e)},showItemAddOns:function(e,t){t?s.handleEdit(t):this.replaceVisible(s,e)}});return new u}),define("content/category-sections/more/manage-rewards/templates/manage-rewards-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Rewards Program</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this section to manage your site\'s rewards program. When your customers place orders, they can be given the option to register at checkout and sign up to receive rewards. This can give them points per order to use towards rewards and special offers.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<!-- Hidden Alert Message for invalid search -->\r\n<div class="row row-spaced panel alert-panel hidden-alt" id="search-alert">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-4x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				Please enter search criteria into at least one of the below fields in order to look up reward information.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n	    <div id="tabs">\r\n	      <ul class="clearfix">\r\n	        <li class="col-6"><a class="center-align fill-container-width" href="#accountManagement">Account Management</a></li>\r\n	        <li class="col-6"><a class="center-align fill-container-width" href="#settings">Settings</a></li>\r\n	      </ul>\r\n\r\n			<!-- Start of Account Tab -->\r\n			<div id="accountManagement">\r\n\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="panel-title">Search</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-4">\r\n						<div class="search-container">\r\n							<input type="text" id="firstNameSearch" name="firstNameSearch" placeholder="Search by First Name"> \r\n						</div>\r\n					</div>\r\n\r\n					<div class="col-4">\r\n						<div class="search-container">\r\n							<input type="text" id="lastNameSearch" name="lastNameSearch" placeholder="Search by Last Name">\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-8">\r\n						<div class="search-container">\r\n							<input type="text" id="emailSearch" name="emailSearch" placeholder="Search by Email">\r\n						</div>\r\n					</div>\r\n\r\n					<div class="col-3 pull-right buttonwithlabel">\r\n						<button type="button" id="search-btn" class="btn btn-submit">SEARCH</button>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="search-results">\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<div class="panel-title">Member Account Information</div>\r\n						</div>\r\n					</div>\r\n\r\n					<!-- Start of Rewards Table -->\r\n					<div class="row row-spaced">\r\n						<div class="col-12">\r\n							<table id="reward-table" class="table alternate">\r\n								<thead>\r\n									<tr>\r\n										<th class="clickable th-3-20 left-align">First Name <i class="icon left-offset-xs"></i></th>\r\n										<th class="clickable th-3-20 left-align">Last Name<i class="icon left-offset-xs"></i></th>\r\n										<th class="clickable th-2-20 left-align">Email Address <i class="icon left-offset-xs"></i></th>\r\n										<th class="clickable th-2-20">Opt In Date<i class="icon left-offset-xs"></i></th>\r\n										<th class="clickable th-2-20">Opt Out Date<i class="icon left-offset-xs"></i></th>\r\n										<th class="clickable th-2-20">Account Status <i class="icon left-offset-xs"></i></th>\r\n										<th class="clickable th-2-20">Current Balance <i class="icon left-offset-xs"></i></th>\r\n										<th class="th-1-20">Edit</th>\r\n									</tr>\r\n								</thead>\r\n								<tbody id="reward-list"></tbody>\r\n							</table>\r\n						</div>\r\n					</div>\r\n					<!-- End of Rewards Table -->\r\n\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<div class="panel-title">Download Account Data</div>\r\n						</div>\r\n					</div>\r\n					<div class="row row-spaced">\r\n						<div class="col-3">\r\n							<button type="button" id="download-btn" class="btn btn-submit">Export csv</button>\r\n						</div>\r\n					</div>\r\n\r\n				</div><!-- end of search-results -->\r\n\r\n\r\n\r\n			</div><!-- End of Account Tab -->\r\n			\r\n	        <!-- Start of Settings Tab -->\r\n			<div id="settings">\r\n\r\n				\r\n				\r\n				<div id="settings-content"></div>\r\n\r\n\r\n			</div><!-- End of Settings Tab -->\r\n\r\n	    </div><!-- End of Tabs Section -->\r\n\r\n	<div id="reward-modal"></div>\r\n	</div>\r\n</div>';return __p}}),define("content/category-sections/more/manage-rewards/models/manage-rewards-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,firstName:"",lastName:"",emailAddress:"",optInDate:"",optOutDate:"",accountStatus:"",currentBalance:"",addSubPoints:"",pointsAdjustment:"",adjustmentDescription:"",adjustments:[]}});return t}),define("content/category-sections/more/manage-rewards/models/manage-rewards-settings-model",["backbone"],function(e){var t=e.Model.extend({defaults:{activateProgram:!0,programName:"",newRegistration:!0,paymentPage:!0,dollarToPoint:"",pointsEarned:"",pointsRequired:"",pointsThreshold:"",numberofDays:"",promoCodePrefix:"",discountType:"",discountAmount:"",bonusJoin:!1,bonusJoinPts:"",bonusReminders:!1,bonusRemindersPts:"",bonusPromoEmail:!1,bonusPromoEmailPts:"",bonusAddOn:!1,bonusAddOnPts:"",emailProductSKUs:{}}});return t}),define("content/category-sections/more/manage-rewards/collections/reward-collection",["backbone","../models/manage-rewards-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-manage-rewards.json",model:t,comparator:function(e){return e.get("firstName")}});return new n}),define("content/category-sections/more/manage-rewards/collections/setting-collection",["backbone","../models/manage-rewards-settings-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-manage-rewards-settings.json",model:t});return n}),define("content/category-sections/more/manage-rewards/templates/review-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align">'+(null==(__t=firstName)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=lastName)?"":__t)+'</td>\r\n  <td class="left-align">'+(null==(__t=emailAddress)?"":__t)+"</td>\r\n  <td>"+(null==(__t=optInDate)?"":__t)+"</td>\r\n  <td>"+(null==(__t=optOutDate)?"":__t)+"</td>\r\n  <td>"+(null==(__t=accountStatus)?"":__t)+"</td>\r\n  <td>"+(null==(__t=currentBalance)?"":__t)+'</td>\r\n  <td> <a class="edit-link" href="'+(null==(__t=baseUrl+"edit/"+id)?"":__t)+'">\r\n      <button type="button" class="icon icon-edit icon-btn icon-2x"></button>\r\n    </a>\r\n  </td>\r\n</tr>';return __p}}),define("content/category-sections/more/manage-rewards/views/reward-view",["backbone","../templates/review-view-tpl","../collections/reward-collection","settings","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent},render:function(){var e=this.model.toJSON();return e.baseUrl=i.manageRewardsBaseUrl,this.setElement(this.template(e)),this.cacheElem(),this.delegateEvents(),this},events:{"click .edit-link":"handleEdit"},cacheElem:function(){},handleEdit:function(){var e=this;e.parent.handleRewardEdit(e.model)}});return o}),define("content/category-sections/more/manage-rewards/templates/settings-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="setting-content" id="setting-content-form">\r\n	<div class="row row-spaced panel">\r\n		<div class="col-12">\r\n			<div class="row row-spaced">\r\n				<div class="col-12">\r\n					<div class="panel-title">Program Settings</div>\r\n				</div>\r\n			</div>\r\n			<div class="row row-spaced">\r\n				<div class="col-3 form-section">\r\n					<div class="label">Activate Program</div>\r\n					<input '+(null==(__t=activateProgram?"checked":"")?"":__t)+' type="checkbox" id="f-activateProgram" name="f-activateProgram" class="on-off-switch" />\r\n					<label for="f-activateProgram" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n				<div class="col-4 form-section">\r\n					<label for="f-programName">Program Name</label><i class="icon icon-tool-tip x-space-s" title="You can give your rewards program a unique name that fits your shop."></i>\r\n					<input type="text" class="f-programName" id="f-programName" name="f-programName" value="'+(null==(__t=programName)?"":__t)+'">\r\n				</div>	\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel">\r\n		<div class="col-12">\r\n			<div class="panel-title">Program Promotion Details</div>\r\n		</div>\r\n		<div class="col-12 form-section">\r\n			<div class="row">\r\n				<div class="col-3 solo-label label left-align">Your customers earn</div>\r\n				<div class="form-section col-2">\r\n					<input type="text" id="f-dollarToPoint" class="f-dollarToPoint" placeholder="#" name="f-dollarToPoint" value="'+(null==(__t=dollarToPoint)?"":__t)+'" required>\r\n				</div>\r\n				<div class="col-3 solo-label label collesswidth left-align">points for every</div>\r\n				<div class="form-section col-2">\r\n					<input type="text" id="f-pointsRequired" class="f-pointsRequired" placeholder="$" name="f-pointsRequired" value="'+(null==(__t=pointsRequired)?"":__t)+'" required>\r\n				</div>\r\n				<div class="col-1 solo-label label">spent</div>\r\n			</div>\r\n			<div class="row">\r\n				<div class="col-1 solo-label label right-align">After</div>\r\n				<div class="form-section col-2">\r\n					<input type="text" id="f-pointsThreshold" class="f-pointsThreshold" placeholder="#" name="f-pointsThreshold" value="'+(null==(__t=pointsThreshold)?"":__t)+'" required>\r\n				</div>\r\n				<div class="col-8 solo-label label left-align">points, customers will earn a reward promo code.</div>		\r\n			</div>\r\n		</div>\r\n		<div class="col-12">\r\n			<div class="row row-spaced form-section">\r\n				<div class="col-4">\r\n					<div class="label">Promo Discount Amount</div>\r\n					<div class="select-container">\r\n						<select id="f-discountAmount" name="f-discountAmount" class="f-discountAmount">\r\n						<option selected disabled hidden value="',__p+='">'+(null==(__t=discountAmount)?"":__t)+'</option>\r\n						<option value="FIVEDOLLARS">$5</option>\r\n						<option value="TENDOLLARS">$10</option>\r\n						<option value="TWENTYDOLLARS">$20</option>\r\n						<option value="10PERCENT">10%</option>\r\n						<option value="TWENTYPERCENT">20%</option>\r\n						<option value="FREEDELIVERY">Free Delivery</option>\r\n						</select>\r\n					</div>\r\n				</div>\r\n			</div>	\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced panel">\r\n		<div class="col-12">\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-12">\r\n					<div class="panel-title">Bonus Points</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-4 form-section">\r\n					<div class="label">Joining Rewards Program <i title="With this setting enabled, your customers will get bonus points for joining your rewards program." class="icon icon-tool-tip x-space-s"></i></div>\r\n					<input '+(null==(__t=bonusJoin?"checked":"")?"":__t)+' type="checkbox" id="f-bonusJoin" name="f-bonusJoin" class="on-off-switch f-bonus-toggle" />\r\n					<label for="f-bonusJoin" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n				<div class="col-4 form-section f-bonus-points hidden-alt" data-toggle="f-bonusJoin">\r\n					<div class="label">Bonus Points for Joining</div>\r\n					<input type="text" name="f-bonusJoinPts" class="f-bonusJoinPts" placeholder="#" id="f-bonusJoinPts" value="'+(null==(__t=bonusJoinPts)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-4 form-section">\r\n					<div class="label">Signing Up for Email Reminders <i title="With this setting enabled, your customers will get bonus points for receiving holiday email reminders." class="icon icon-tool-tip x-space-s"></i></div>\r\n					<input '+(null==(__t=bonusReminders?"checked":"")?"":__t)+' type="checkbox" id="f-bonusReminders" name="f-bonusReminders" class="on-off-switch f-bonus-toggle" />\r\n					<label for="f-bonusReminders" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n				<div class="col-4 form-section f-bonus-points hidden-alt" data-toggle="f-bonusReminders">\r\n					<div class="label">Bonus Points for Reminders</div>\r\n					<input type="text" name="f-bonusRemindersPts" class="f-bonusRemindersPts" placeholder="#" id="f-bonusRemindersPts" value="'+(null==(__t=bonusRemindersPts)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-4 form-section">\r\n					<div class="label">Subscribing to Promo Emails <i title="With this setting enabled, your customers will get bonus points for subscribing to your email marketing list." class="icon icon-tool-tip x-space-s"></i></div>\r\n					<input '+(null==(__t=bonusPromoEmail?"checked":"")?"":__t)+' type="checkbox" id="f-bonusPromoEmail" name="f-bonusPromoEmail" class="on-off-switch f-bonus-toggle" />\r\n					<label for="f-bonusPromoEmail" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n				<div class="col-4 form-section f-bonus-points hidden-alt" data-toggle="f-bonusPromoEmail">\r\n					<div class="label">Bonus Points for Emails</div>\r\n					<input type="text" name="f-bonusPromoEmailPts" class="f-bonusPromoEmailPts" placeholder="#" id="f-bonusPromoEmailPts" value="'+(null==(__t=bonusPromoEmailPts)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-4 form-section">\r\n					<div class="label">Placing Orders with Add-Ons <i title="With this setting enabled, your customers will get bonus points for placing orders that contain add-ons (like chocolates or balloons)." class="icon icon-tool-tip x-space-s"></i></div>\r\n					<input '+(null==(__t=bonusAddOn?"checked":"")?"":__t)+' type="checkbox" id="f-bonusAddOn" name="f-bonusAddOn" class="on-off-switch f-bonus-toggle" />\r\n					<label for="f-bonusAddOn" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n				<div class="col-4 form-section f-bonus-points hidden-alt" data-toggle="f-bonusAddOn">\r\n					<div class="label">Bonus Points for Add-On Orders</div>\r\n					<input type="text" name="f-bonusAddOnPts" class="f-bonusAddOnPts" placeholder="#" id="f-bonusAddOnPts" value="'+(null==(__t=bonusAddOnPts)?"":__t)+'">\r\n				</div>\r\n			</div>						\r\n			\r\n		</div>\r\n	</div>\r\n\r\n\r\n	<div class="row row-spaced panel">\r\n		<div class="col-12">\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-12">\r\n					<div class="panel-title">Products Featured In Reward Emails</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced">\r\n				<div class="col-12" id="f-featured-products"></div>\r\n			</div>\r\n\r\n		</div>\r\n\r\n\r\n	</div>\r\n\r\n</div>\r\n\r\n\r\n';return __p}}),define("content/category-sections/more/manage-rewards/views/settings-view",["backbone","../models/manage-rewards-settings-model","../collections/setting-collection","../templates/settings-view-tpl","components/featured-product/views/featured-product-view","components/featured-product/collections/featured-product-collection","global-events","jquery","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:i,tagName:"form",id:"f-settings-form",initialize:function(){},render:function(){return this.visibleModel=this.model,this.renderVisible(this.model),this.applyToolTips(),this},renderVisible:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.featuredProductView&&this.featuredProductView.remove(),this.featuredProductView=new o({collection:new r(this.model.get("emailProductSKUs")),title:"Email Products",primarySku:!1,selectAll:!0,bodyOnly:!0,maxNumberProducts:6}),this.$featuredProduct.append(this.featuredProductView.render().el),this.validateForm(),this.checkBonusToggles(),this},events:{"click .icon-edit":"handleEdit","change .f-bonus-toggle":"handleBonusToggle"},handleSave:function(){var e=this;e.$el.valid()?e.parent.cbSave():e.parent.cbError()},cacheElem:function(){this.$settingForm=this.$el.find("#setting-content-form"),this.$activateProgram=this.$el.find("#f-activateProgram"),this.$programName=this.$el.find("#f-programName"),this.$newRegistration=this.$el.find("#f-newRegistration"),this.$paymentPage=this.$el.find("#f-paymentPage"),this.$dollarToPoint=this.$el.find("#f-dollarToPoint"),this.$pointsEarned=this.$el.find("#f-pointsEarned"),this.$pointsRequired=this.$el.find("#f-pointsRequired"),this.$numberofDays=this.$el.find("#f-numberofDays"),this.$promoCodePrefix=this.$el.find("#f-promoCodePrefix"),this.$discountType=this.$el.find("#f-discountType"),this.$discountAmount=this.$el.find("#f-discountAmount"),this.$bonusToggles=this.$el.find(".f-bonus-toggle"),this.$featuredProduct=this.$el.find("#f-featured-products"),this.$bonusJoin=this.$el.find("#f-bonusJoin"),this.$bonusSignup=this.$el.find("#f-bonusReminders"),this.$bonusSub=this.$el.find("#f-bonusPromoEmail"),this.$bonusAddon=this.$el.find("#f-bonusAddOn")
},checkBonusToggles:function(){var e=this;this.$bonusToggles.each(function(){var t=$(this);e.handleBonusToggle(t)})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){var e=this;this.$el.find("#settings-content").validate(),this.$el.validate({rules:{"f-programName":{required:{depends:function(){return e.$activateProgram.is(":checked")}}},"f-dollarToPoint":{required:{depends:function(){return e.$activateProgram.is(":checked")}}},"f-pointsThreshold":{required:{depends:function(){return e.$activateProgram.is(":checked")}}},"f-discountAmount":{required:{depends:function(){return e.$activateProgram.is(":checked")}}},"f-pointsRequired":{required:{depends:function(){return e.$activateProgram.is(":checked")}}},"f-bonusJoinPts":{required:{depends:function(){return e.$bonusJoin.is(":checked")}},digits:!0},"f-bonusRemindersPts":{required:{depends:function(){return e.$bonusSignup.is(":checked")}},digits:!0},"f-bonusPromoEmailPts":{required:{depends:function(){return e.$bonusSub.is(":checked")}},digits:!0},"f-bonusAddOnPts":{required:{depends:function(){return e.$bonusAddon.is(":checked")}},digits:!0}}})},handleBonusToggle:function(e){var t=this,n=$(e.currentTarget),i=n.attr("id"),o=t.$el.find('.f-bonus-points[data-toggle="'+i+'"]');n.is(":checked")?o.fadeIn(200):o.fadeOut(200)}});return new a}),define("content/category-sections/more/manage-rewards/templates/reward-modal-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="col-12">\r\n<div class="row row-spaced form-section left-align">\r\n	<div class="clearfix section-title">\r\n		<h2 id="saved-DisplayMoved" class="pull-left left-pad-xs">\r\n			'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'Account Information\r\n		</h2>\r\n		<div role="tooltip" data-parent="saved-DisplayMoved" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n\r\n		<div class="btn-panel">\r\n			<button type="button" id="save-btn" class="btn btn-submit btn-panel"> Save</button>\r\n			<button type="button" id="cancel-btn" class="btn btn-other btn-panel">Cancel</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n	<div class="row">\r\n	  <div class="col-1">\r\n		<div class="icon icon-3x icon-warning"></div>\r\n	  </div>\r\n		<div class="col-11 alert-text left-align">\r\n			This is a generic placeholder for error messages in eSAT. <br>\r\n			In the live app, this will be a real message and will be hidden by default.\r\n		</div>\r\n	</div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced form-section left-align">\r\n	<div class="col-3">\r\n		<div class="label">Account Status</div>\r\n		<div class="select-container">\r\n			<select id="f-accountStatus" name="f-accountStatus">\r\n				<option selected disabled hidden value="'+(null==(__t=accountStatus)?"":__t)+'">'+(null==(__t=accountStatus)?"":__t)+'</option>\r\n				<option value="Good">Good</option>\r\n				<option value="Warning">Warning</option>\r\n				<option value="Does not qualify">Does not qualify</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n	<div class="col-2">\r\n		<label for="f-firstName">First Name</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n		<input type="text" id="f-firstName" name="f-firstName" value="'+(null==(__t=firstName)?"":__t)+'" disabled>\r\n	</div>\r\n	<div class="col-2">\r\n		<label for="f-lastName">Last Name</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n		<input type="text" id="f-lastName" name="f-lastName" value="'+(null==(__t=lastName)?"":__t)+'" disabled>\r\n	</div>\r\n	<div class="col-5">\r\n		<label for="f-emailAddress">Email Address</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n		<input type="text" id="f-emailAddress" name="f-emailAddress" value="'+(null==(__t=emailAddress)?"":__t)+'" disabled>\r\n	</div>\r\n</div>\r\n\r\n<form id="f-adjustForm" name="f-adjustForm">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="panel-title left-align">Adjust Member Reward Points</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3 left-align form-section">\r\n			<label for="f-pointsAdjustment">Amount</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n			<input type="text" id="f-pointsAdjustment" name="f-pointsAdjustment" value="'+(null==(__t=pointsAdjustment)?"":__t)+'">\r\n		</div>\r\n		<div class="col-3 left-align form-section">\r\n			<div class="select-container">\r\n				<label for="f-addSubPoints">Add/Subtract</label>\r\n				<select id="f-addSubPoints" name="f-addSubPoints">\r\n					<option value=""></option>\r\n					<option value="Add">Add</option>\r\n					<option value="Subtract">Subtract</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n		<div class="col-5 left-align form-section">\r\n			<label for="f-adjustmentDescription">Adjustment Description</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n			<input type="text" id="f-adjustmentDescription" maxlength="100" name="f-adjustmentDescription" value="'+(null==(__t=adjustmentDescription)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-2">\r\n			<button class="btn btn-submit x-pad-m pull-left" id="apply-points-btn" type="button">\r\n				Apply\r\n			</button>\r\n		</div>\r\n		<div class="col-4">\r\n			<div class="padded-s ui-widget ui-corner-all ui-widget-content tooltip-change tooltip-save hidden-alt">\r\n				<div class="icon icon-added"></div>\r\n				Adjustment successful\r\n			</div>\r\n		</div>\r\n	</div>\r\n</form>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="panel-title left-align">Recent Member Rewards Activity History</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced"> \r\n	<div class="col-12 y-space-top-l">\r\n		<table class="table alternate">\r\n\r\n			<thead>\r\n				<tr class="highlighted">\r\n					<th class="col-1 left-align">Date</th>\r\n					<th class="col-2 left-align">Reward Activity</th>\r\n					<th class="col-1 left-align">Points Accrued/Deducted</th>\r\n					<th class="col-1 left-align">Current Point Balance</th>\r\n					<th class="col-1 left-align">Promotion Code</th>\r\n					<th class="col-1 left-align">Promotion Offer</th>\r\n					<th class="col-1 left-align">Expiration Date</th>\r\n				</tr>\r\n			</thead>\r\n\r\n			<tbody id="rewards-points-table">\r\n				<tr>\r\n					<td class="left-align">10/15/2015</td>\r\n					<td class="left-align">Points Adjustment</td>\r\n					<td class="left-align">+ 100</td>\r\n					<td class="left-align td-total">300</td>\r\n					<td class="left-align"></td>\r\n					<td class="left-align">10% off</td>\r\n					<td class="left-align">12/31/2015</td>\r\n				</tr>\r\n				<tr>\r\n					<td class="left-align">11/1/2015</td>\r\n					<td class="left-align">Points Redemption</td>\r\n					<td class="left-align">- 50</td>\r\n					<td class="left-align td-total">250</td>\r\n					<td class="left-align">flowers</td>\r\n					<td class="left-align"></td>\r\n					<td class="left-align">11/15/2015</td>\r\n				</tr>\r\n				<tr>\r\n					<td class="left-align">11/1/2015</td>\r\n					<td class="left-align">Order DTB009<br/>Confirmation #4691008</td>\r\n					<td class="left-align">+ 150</td>\r\n					<td class="left-align td-total">500</td>\r\n					<td class="left-align"></td>\r\n					<td class="left-align"></td>\r\n					<td class="left-align"></td>\r\n				</tr>\r\n			</tbody>\r\n\r\n		</table>\r\n	</div> \r\n</div> \r\n</div>';return __p}}),define("content/category-sections/more/manage-rewards/views/reward-modal-view",["backbone","../templates/reward-modal-view-tpl","../models/manage-rewards-model","../collections/reward-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({tagName:"div",id:"rewardModal",template:t,initialize:function(){},render:function(){var e=this;return this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.delegateEvents(),this.cacheElem(),this.validateForm(),e},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSave","click #apply-points-btn":"handleApplyAdjustment"},cacheElem:function(){this.$applyBtn=this.$el.find("#apply-points-btn"),this.$pointsTable=this.$el.find("#rewards-points-table"),this.$adjustDescription=this.$el.find("#f-adjustmentDescription"),this.$adjustAmount=this.$el.find("#f-pointsAdjustment"),this.$adjustType=this.$el.find("#f-addSubPoints"),this.$adjustForm=this.$el.find("#f-adjustForm")},validateForm:function(){var e=this;e.$adjustForm.validate({rules:{"f-pointsAdjustment":{required:!0,digits:!0},"f-addSubPoints":"required","f-adjustmentDescription":"required"}})},handleApplyAdjustment:function(){var e=this;if(this.$adjustForm.valid()){var t,n,i,o=(e.$adjustDescription.val(),e.$adjustType.val()),r=e.$adjustAmount.val(),a=new Date,s=a.getDate(),l=a.getMonth(),c=a.getYear(),d=s+"/"+l+"/"+c,u=e.$adjustForm.find(".tooltip-change"),h=+e.$pointsTable.find(".td-total:last").text();"Add"==o?(t=1,n="+"):(t=-1,n="-"),i=r*t+h,e.$pointsTable.append('<tr><td class="left-align">'+d+'</td><td class="left-align">Points Adjustment</td><td class="left-align">'+n+" "+r+'</td><td class="left-align td-total">'+i+'</td><td class="left-align"></td><td class="left-align"></td><td class="left-align"></td></tr>'),e.$adjustDescription.val(""),e.$adjustType.val(""),e.$adjustAmount.val(""),u.fadeIn(200),setTimeout(function(){u.fadeOut(200)},3e3)}},handleSave:function(){var e=this;e.model.set({}),o.trigger("form:save",e.$tip)},closeModal:function(){this.$el.parent().dialog("close")}});return new r}),define("content/category-sections/more/manage-rewards/views/manage-rewards-home-view",["backbone","../templates/manage-rewards-home-view-tpl","../models/manage-rewards-model","../models/manage-rewards-settings-model","../collections/reward-collection","../collections/setting-collection","components/featured-occasions/collections/all-occasions-collection","./reward-view","./settings-view","./reward-modal-view","settings","global-events","datatables","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c,d,u){var h=e.View.extend({tagName:"div",id:"f-manage-rewards-page",template:t,initialize:function(){var e=this;l.parent=this,$.fn.dataTable.ext.search.push(function(t,n,i){if("reward-table"!==t.nTable.id)return!0;if(!e.collection)return!0;var n=e.collection.toJSON()[i];return n})},render:function(){var e=this;return a.fetchCustom().done(function(){e.$el.html(e.template({baseUrl:d.manageRewardsBaseUrl,allOccasions:a.toJSON()})),e.cacheElem(),e.delegateEvents(),e.applyTooltips(),e.addSettingsContent()}),$.when(o.fetchCustom(),a.fetchCustom()).done(function(){e.dataTable&&e.dataTable.destroy(),e.collection=o.deepClone(),e.addAllRewards(e.collection),e.applyDataTables(e.$rewardTable),e.applyTabs(),e.setModal()}),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #search-btn":"handleSearch","click #lastNameSearch":"handleSearch","click #emailSearch":"handleSearch"},cacheElem:function(){this.$rewardList=this.$el.find("#reward-list"),this.$rewardTable=this.$el.find("#reward-table"),this.$SettingsContent=this.$el.find("#settings-content"),this.$firstNameSearch=this.$el.find("#firstNameSearch"),this.$lastNameSearch=this.$el.find("#lastNameSearch"),this.$emailSearch=this.$el.find("#emailSearch"),this.$modal=this.$el.find("#reward-modal"),this.$tip=this.$el.find(".tooltip-change"),this.$searchResults=this.$el.find(".search-results"),this.$searchAlert=this.$el.find("#search-alert"),this.$activeCheck=this.$el.find("#f-activateProgram"),this.$bonusJoin=this.$el.find("#f-bonusJoin"),this.$bonusReminders=this.$el.find("#f-bonusReminders"),this.$bonusPromoEmail=this.$el.find("#f-bonusPromoEmail"),this.$bonusAddOn=this.$el.find("#f-bonusAddOn")},showError:function(){this.$searchAlert.fadeIn(1e3)},hideError:function(){this.$searchAlert.fadeOut(1e3)},handleSave:function(){l.handleSave()},cbSave:function(){u.trigger("form:save",this.$tip)},cbError:function(){u.trigger("form:invalid",this.$tip)},handleCancel:function(){u.trigger("form:reset",this.render.bind(this))},addReward:function(e){var t=new s({model:e,parent:this});this.$rewardList.append(t.render().el)},addAllRewards:function(e){this.$rewardList.empty(),this.$searchResults.addClass("hidden"),e.each(this.addReward,this)},addSettingsContent:function(){l.model=new i,l.parent=this,this.$SettingsContent.append(l.render().el)},applyDataTables:function(){this.dataTable=this.$rewardTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!0,processing:!1,serverSide:!1,stateSave:!1,bDestroy:!0,columns:[{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!1}],order:[],columnDefs:[{orderable:!1,targets:0}],info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},applyTabs:function(){this.$el.find("#tabs").tabs()},handleSearch:function(){var e=this;this.$searchResults.addClass("hidden");var t=this.$firstNameSearch.val(),n=this.$firstNameSearch.val(),i=this.$emailSearch.val();t.length>0||n.length>0||i.length>0?this.$searchResults.removeClass("hidden"):(e.showError(),setTimeout(function(){e.hideError()},7e3))},setModal:function(){this.$modal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModalRewardPage:function(e,t){e.model=t,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},handleRewardEdit:function(e){this.showModalRewardPage(c,e)},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new h}),define("content/category-sections/more/manage-rewards/views/manage-rewards-view",["backbone","./manage-rewards-home-view","global-events","jqueryui"],function(e,t){var n=e.View.extend({tagName:"div",initialize:function(){},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(){}});return new n}),define("content/category-sections/marketing-promotions/marketing-campaigns/templates/marketing-campaigns-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Marketing Campaigns</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				<a id="new-btn" href="'+(null==(__t=baseUrl)?"":__t)+'create"><button type="button" class="btn btn-submit"><i class="icon icon-add icon-lg"></i>New Campaign</button></a>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use the settings of this page to create marketing campaigns and edit marketing banners on different pages of your website.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<table id="product-table" class="table alternate">\r\n			<thead>\r\n				<tr class="form-section">\r\n					<th class="th-4-20">Campaign Name</th>\r\n					<th class="th-2-20">Type</th>\r\n					<th class="th-2-20">Start Date</th>\r\n					<th class="th-2-20">End Date</th>\r\n					<th class="th-2-20">Priority</th>\r\n					<th class="th-2-20">Status</th>\r\n					<th class="th-1-20">Edit</th>\r\n				</tr>\r\n			</thead>\r\n			<tbody id="product-list"></tbody>\r\n		</table>\r\n	</div>\r\n</div>\r\n';return __p}}),define("content/category-sections/marketing-promotions/marketing-campaigns/models/marketing-campaigns-model",["backbone"],function(e){var t=e.Model.extend({defaults:{name:"",active:"",priority:null,featured:!1,featuredRank:0,homeFeature:[],homeCatFeature:[],catSidebarFeature:[],catFeature:[],gridFeature:[],prodFeature:[],catAppear1:[],catAppear2:[],prodAppear:[],sidebarContainer:[],sidebarBanner:"",allOccasions:[],imgUrl1:"",homeAltText:"",mobileHomeAltText:"",sidebarAltText:"",gridAltText:"",mobileGridAltText:"",productAltText:"",homepageImage:"",mobileHomepageImage:"",sidebarImage:"",gridImage:"",mobileGridImage:"",productImage:"",number:"",id:null,pricePoints:"Primary",type:"Custom",type1:"Category Page",type2:"",type3:"",type4:"",suggestedPrice:"Custom",myPrice:"",holidayPrice:"",taxFreeActive:"",active:!0,img1:!1,img2:!1,img3:!1,img4:!1,homeCategories:[],startDate:"",endDate:"",setEndDate:!0,landingPageLink:"",catPageLink:"",gridPageLink:"",productPageLink:"",homeLinkActive:!0,catLinkActive:!0,gridLinkActive:!0,description:"",additionalInfo:"",legalInfo:"",metaTitle:"",metaKeywords:"",metaDescription:"",metaTags:"",homepageContainer:[],dropshipMethods:[],addons:[],width:0,height:0,productClassification:"Bouquet",categoriesVariantsActive:!0,attributesVariantsActive:!0},initialize:function(){this.set("imgUrl","http://s7d2.scene7.com/is/image/Teleflora/"+this.get("number")+"?wid=150&hei=215&fmt=jpeg&qlt=90,0&op_sharpen=0&resMode=bilin&op_usm=1.0,0.5,1.0,0&iccEmbed=0&layer=1&opac=0&layer=2&opac=55&layer=5&opac=0")}});return t}),define("content/category-sections/marketing-promotions/marketing-campaigns/collections/marketing-campaigns-collection",["backbone","../models/marketing-campaigns-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-marketing-campaign.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/marketing-promotions/marketing-campaigns/templates/campaign-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="form-section">\r\n    <td class="left-align">'+(null==(__t=name)?"":__t)+"</td>\r\n\r\n    <td>"+(null==(__t=type)?"":__t)+'</td>\r\n    <td>\r\n        <div class="form-section" id="f-startDate-'+(null==(__t=id)?"":__t)+'" class="f-startDate">\r\n            '+(null==(__t=startDate)?"":__t)+'\r\n        </div>    \r\n    </td>\r\n    <td>\r\n        <div class="form-section" id="f-endDate-'+(null==(__t=id)?"":__t)+'" class="f-endDate">\r\n            '+(null==(__t=endDate)?"":__t)+"\r\n        </div>\r\n    </td>\r\n    <td>"+(null==(__t=priority)?"":__t)+'</td>\r\n    <td>\r\n        <div class="v-center">\r\n            <input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="active-'+(null==(__t=id)?"":__t)+'" name="active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n            <label for="active-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n        </div>\r\n    </td>\r\n    <td>\r\n        <a class="edit-link" href="'+(null==(__t=baseUrl+"edit/"+id)?"":__t)+'">\r\n            <button class="icon icon-edit icon-btn icon-2x"></button>\r\n        </a>\r\n    </td>\r\n</tr>\r\n';return __p}}),define("content/category-sections/marketing-promotions/marketing-campaigns/views/campaign-view",["backbone","../templates/campaign-tpl","settings","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){var e=this.model.toJSON();return e.baseUrl=n.marketingCampaignBaseUrl,this.setElement(this.template(e)),this.cacheElem(),this.delegateEvents(),this.applyDates(),this},events:{"click .edit-link":"handleEdit","change input.on-off-switch":"toggleActive","change input":"triggerChange",'change input[name="f-startDate"]':"changeStartDate",'change input[name="f-endDate"]':"changeEndDate"},triggerChange:function(){i.trigger("form:editing")},cacheElem:function(){this.$active=this.$el.find("active-"+this.model.get("id")),this.$startDate=this.$el.find('input[name="f-startDate"]'),this.$endDate=this.$el.find('input[name="f-endDate"]')},handleEdit:function(e){e.preventDefault(),e.stopPropagation(),i.trigger("form:cancel:url",e.currentTarget.href)},toggleActive:function(){i.trigger("form:editing"),this.model.set("active",this.$active.is("checked"))},changeStartDate:function(){console.log(this.model),i.trigger("form:editing"),this.model.set("startDate",this.$startDate.val().trim())},changeEndDate:function(){i.trigger("form:editing"),this.model.set("endDate",this.$endDate.val().trim())},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})}});return o}),define("content/category-sections/marketing-promotions/marketing-campaigns/views/marketing-campaigns-page-home-view",["backbone","../templates/marketing-campaigns-home-view-tpl","../models/marketing-campaigns-model","../collections/marketing-campaigns-collection","components/featured-occasions/collections/all-occasions-collection","./campaign-view","global-events","settings","datatables","jqueryui"],function(e,t,n,i,o,r,a,s){var l=e.View.extend({tagName:"form",id:"m-marketing-campaign",template:t,render:function(){var e=this;return o.fetchCustom().done(function(){e.$el.html(e.template({baseUrl:s.marketingCampaignBaseUrl,allOccasions:o.toJSON()})),e.cacheElem(),e.delegateEvents()}),$.when(i.fetchCustom(),o.fetchCustom()).done(function(){e.dataTable&&e.dataTable.destroy(),e.collection=i.deepClone(),e.applyDataTables(),e.cacheElem(),e.addAllProducts(e.collection),e.applyToolTips()}),this.listenTo(i,"sort",this.addAllProducts),e},events:{"click #new-btn":"handleCreate","click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click .sort-btn":"handleSort"},cacheElem:function(){this.$productList=this.$el.find("#product-list"),this.$productTable=this.$el.find("#product-table"),this.$sortButtons=this.$el.find(".sort-btn"),this.$tip=this.$el.find(".tooltip-change")},handleCreate:function(e){e.preventDefault(),e.stopPropagation(),a.trigger("form:cancel:url",e.currentTarget.href);new n},handleSave:function(){i.set(this.collection.toJSON()),a.trigger("form:save",this.$tip)},handleCancel:function(){},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},addProduct:function(e){var t=new r({model:e,parent:this});this.$productList.append(t.render().el)},addAllProducts:function(e){this.$productList.empty(),e.each(this.addProduct,this)},applyDataTables:function(){this.dataTable=this.$productTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!0,processing:!1,searching:!0,serverSide:!1,stateSave:!1,bDestroy:!0,columns:[{orderable:!0},{orderable:!1},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!1},{orderable:!1}],order:[],columnDefs:[{orderable:!0,targets:0}],info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new l}),define("content/category-sections/marketing-promotions/marketing-campaigns/templates/create-edit-campaign-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Create ")?"":__t)+'Campaign</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" type="button" class="btn btn-other">Cancel</button>\r\n				',"Teleflora"!==type&&(__p+='\r\n				<button id="delete-btn" type="button" class="btn btn-cancel">Delete</button>\r\n				'),__p+='\r\n				<button id="save-btn" type="button" class="btn btn-submit">',id||(__p+='<i class="icon icon-add"></i>'),__p+='Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n			This is a generic placeholder for error messages in eSAT. <br>\r\n			In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Here you can '+(null==(__t=id?"edit ":"create ")?"":__t)+' products for your site. This page will allow you to change all of the details for each individual product.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row y-space-top-m">\r\n		<div class="col-3 form-section">\r\n			<label for="f-name">Name</label><i class="icon icon-tool-tip x-space-s" title="This is the name of the marketing campaign for your internal use."></i>\r\n			<input '+(null==(__t="Teleflora"===type?"disabled":"")?"":__t)+' type="text" id="f-name" name="f-name" value="'+(null==(__t=name)?"":__t)+'">\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<label for="f-number">Campaign Type</label>\r\n			<input '+(null==(__t="Teleflora"===type?"disabled":"disabled")?"":__t)+' type="text" id="f-type" name="f-type" value="'+(null==(__t=type)?"":__t)+'">\r\n		</div>\r\n		<div class="col-2">\r\n			<div class="label">Active<i title="If this setting is OFF, the marketing campaign is deactivated and will not appear on your site." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n			<label for="f-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-3 form-section">\r\n			<label for="f-startDate">Start Date</label><i title="The marketing campaign will become active at 12:01AM on this date." class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n			    <input type="text" id="f-startDate" name="f-startDate" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<label for="f-endDate">End Date</label><i title="The marketing campaign will be deactived at 11:59PM on this date." class="icon icon-tool-tip x-space-s"></i>\r\n			<div class="date-container">\r\n			    <input type="text" id="f-endDate" name="f-endDate" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="col-2 form-section">\r\n			<label for="f-priority">Priority</label><i class="icon icon-tool-tip x-space-s" title="If you have multiple marketing campaigns active that might be displayed on the same page at once, this number identifies which campaign will be displayed. The lower the number, the higher the priority. If you want to make sure this campaign is displayed before all others, enter 1."></i>\r\n			<input type="text" id="f-priority" name="f-priority" value="'+(null==(__t=priority)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n</div>\r\n\r\n\r\n<!-- Start of jQuery Tabs -->\r\n<div id="tabs">\r\n	<ul>\r\n		<li><a class="product-management-edit-tab" href="#home-page">Home Page</a></li>\r\n		<li><a class="product-management-edit-tab" href="#category-sidebar">Category Sidebar</a></li>\r\n		<li><a class="product-management-edit-tab" href="#category-grid">Category Grid</a></li>\r\n		<li><a class="product-management-edit-tab" href="#product-page">Product Page</a></li>\r\n	</ul>\r\n\r\n	<!-- Start of Home Page Tab -->\r\n	<div id="home-page">\r\n\r\n		<div class="row">\r\n\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Home Page Banner</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				The recommended size for home page banner image is 940 (W) x 200 (H) pixels. The maximum file size is 200 KB.\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-5 form-section image-section">\r\n				<div class="label">Image Upload</div>\r\n				<button type="button" id="homepage-image-button" class="image-upload btn btn-other">Select</button>\r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<div class="col-12">\r\n			<div id="tile-display" class="row row-spaced">\r\n				<div class="col-12 center-align">\r\n					<img class="fit-container" id="homepage-image" src="'+(null==(__t=homepageImage)?"":__t)+'" alt="">\r\n				</div>\r\n			</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Mobile Home Page Banner</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				The recommended size for home page banner image is 460 (W) x 200 (H) pixels. The maximum file size is 100 KB.\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">	\r\n			<div class="col-5 form-section image-section">\r\n				<div class="label">Image Upload</div>\r\n				<button type="button" id="mobile-homepage-image-button" class="image-upload btn btn-other">Select</button>\r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<div class="col-12">\r\n			<div id="tile-display" class="row row-spaced">\r\n				<div class="col-12 center-align">\r\n					<img class="fit-container" id="mobile-homepage-image" src="'+(null==(__t=mobileHomepageImage)?"":__t)+'" alt="">\r\n				</div>\r\n			</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Where Banner Links To</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				To indicate what page users will be directed to once they click on the banner, you can select either a product page or a category page or indicate any other landing page (by entering the page URL).\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="form-section col-3">\r\n				<label for="f-type1">Banner Links To: </label>\r\n				<div class="select-container">\r\n					<select id="f-type1" name="f-type1">\r\n						<option selected disabled hidden value="'+(null==(__t=type1)?"":__t)+'">'+(null==(__t=type1)?"":__t)+'</option>\r\n						<option id="homeone" value="Category Page">Category Page</option>\r\n						<option id="hometwo" value="Collections Page">Collections Page</option>\r\n						<option id="homethree" value="Product Page">Product Page</option>\r\n						<option id="homefour" value="Link/Landing Page">Link/Landing Page</option>\r\n						<option id="homezero" value="No Link">No Link</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n			\r\n		<div class="row row-spaced" id="homeBanner-Category" style="display:block;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Category Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12">\r\n				<div id="homepage-category"></div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced" id="homeBanner-Collections" style="display:none;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Collections Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12">\r\n				<div id="homepage-collections"></div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced" id="homeBanner-Product" style="display:none;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Products Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12">\r\n				<div id="homepage-productpage"></div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced" id="homeBanner-LinkLanding" style="display:none;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Link/Landing Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12" id="homepage-linklanding">\r\n				<div class="row row-spaced">\r\n					<div class="form-section col-5">\r\n						<label for="f-landingPageLink">Banner Landing Page Link</label>\r\n						<input type="text" id="f-landingPageLink" name="f-landingPageLink" value="'+(null==(__t=landingPageLink)?"":__t)+'">\r\n					</div>\r\n					<div class="form-section col-4">\r\n						<div class="label">Open Link in New Window<i title="If this is turned ON, clicking the link will open it in a new browser window/tab." class="icon icon-tool-tip x-space-s"></i></div>\r\n						<input '+(null==(__t=homeLinkActive?"checked":"")?"":__t)+' type="checkbox" id="f-link-active" name="f-link-active" class="on-off-switch" />\r\n						<label for="f-link-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div><!-- Closing Div, Home Page -->\r\n\r\n	<!-- End of Home Page Tab -->\r\n\r\n	<!-- Start of Category Sidebar Tab -->\r\n	<div id="category-sidebar">\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Category Sidebar</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				The recommended size for category landing page left side banner is 220(W) x 275(H) pixels. The Maximum file size is 100 KB.\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3 center-align"><img src="/images/mock/sidebarbanner.jpg"></div>\r\n			<div class="col-3 form-section image-section">\r\n				<div class="label">Image Upload</div>\r\n				<button type="button" id="sidebar-image-button" class="image-upload btn btn-other">Select</button>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n			<div id="tile-display" class="row row-spaced">\r\n				<div class="col-12 center-align">\r\n					<img class="fit-container" id="sidebar-image" src="'+(null==(__t=sidebarImage)?"":__t)+'" alt="">\r\n				</div>\r\n			</div>\r\n			</div>\r\n		</div>\r\n\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Where the Banner Appears\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				Select the categories that you want the banner to show up.\r\n			</div>\r\n		</div>\r\n\r\n		<div id="sidebar-appear-container"></div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Where Banner Links To</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				To indicate what page users will be directed to once they click on the banner, you can select either a product page or a category page or indicate any other link or landing page (by endering the page URL.)\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="form-section col-3">\r\n				<label for="f-type2">Banner Links To: </label>\r\n				<div class="select-container">\r\n					<select id="f-type2" name="f-type2">\r\n						<option selected disabled hidden value="'+(null==(__t=type2)?"":__t)+'">Category Page</option>\r\n						<option id="sideone" value="Category Page">Category Page</option>\r\n						<option id="sidetwo" value="Collections Page">Collections Page</option>\r\n						<option id="sidethree" value="Product Page">Product Page</option>\r\n						<option id="sidefour" value="Link/Landing Page">Link/Landing Page</option>\r\n						<option id="sidezero" value="No Link">No Link</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n			\r\n		<div class="row row-spaced" id="side-Category" style="display:block;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Category Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12">\r\n				<div id="sidebar-category"></div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced" id="side-Collections" style="display:none;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Collections Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12">\r\n				<div id="sidebar-collections"></div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced" id="side-Product" style="display:none;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Products Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12">\r\n				<div id="sidebar-productpage"></div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced" id="side-LinkLanding" style="display:none;">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Select Link/Landing Page Link\r\n				</div>\r\n			</div>\r\n			<div class="col-12">\r\n				<div id="sidebar-linklanding">\r\n					<div class="row row-spaced">\r\n						<div class="form-section col-5">\r\n							<label for="f-catPageLink">Banner Landing Page Link</label>\r\n							<input type="text" id="f-catPageLink" name="f-catPageLink" value="'+(null==(__t=catPageLink)?"":__t)+'">\r\n						</div>\r\n						<div class="form-section col-4">\r\n							<div class="label" center-align>Open Link in New Window<i title="If this is turned ON, clicking the link will open it in a new browser window/tab." class="icon icon-tool-tip x-space-s"></i></div>\r\n							<input '+(null==(__t=catLinkActive?"checked":"")?"":__t)+' type="checkbox" id="f-cat-link-active" name="f-cat-link-active" class="on-off-switch" />\r\n							<label for="f-cat-link-active" class="on-off-switch-label">\r\n							    <div class="on-off-switch-state">on</div>\r\n							</label>\r\n						</div>\r\n					</div>						\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div id="sidebar-container"></div>\r\n\r\n	</div><!-- Closing Div, Category Sidebar -->\r\n	<!-- End of Category Sidebar Tab -->\r\n\r\n	<!-- Start of Category Grid -->\r\n	<div id="category-grid">\r\n		<div class="row">\r\n\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Category Page\'s Products Grid Banner</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				The recommended image size for banner inside the products grid in categories is 340(W) x 220(H) pixels. The Maximum file size is 200 KB. The banner will only show if it is activated in category settings page.\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3 center-align"><img src="/images/mock/homegridimage.jpg"></div>\r\n			<div class="col-3 form-section image-section">\r\n				<div class="label">Image Upload</div>\r\n				<button type="button" id="grid-image-button" class="image-upload btn btn-other">Select</button>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n			<div id="tile-display" class="row row-spaced">\r\n				<div class="col-12 center-align">\r\n					<img class="fit-container" id="grid-image" src="'+(null==(__t=gridImage)?"":__t)+'" alt="">\r\n				</div>\r\n			</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Mobile Category Pages Products Grid Banner</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				The recommended size for home page banner image is 460 (W) x 200 (H) pixels. The maximum file size is 100 KB.\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3 center-align"><img src="/images/mock/mobilegridimage.jpg"></div>\r\n			<div class="col-3 form-section image-section">\r\n				<div class="label">Image Upload</div>\r\n				<button type="button" id="mobile-grid-image-button" class="image-upload btn btn-other">Select</button>\r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<div class="col-12">\r\n			<div id="tile-display" class="row row-spaced">\r\n				<div class="col-12 center-align">\r\n					<img class="fit-container" id="mobile-grid-image" src="'+(null==(__t=mobileGridImage)?"":__t)+'" alt="">\r\n				</div>\r\n			</div>\r\n			</div>\r\n		</div>\r\n\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Where the Banner Appears\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				Select the categories that you want the banner to show up.\r\n			</div>\r\n		</div>\r\n\r\n		<div id="grid1-table-container"></div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Where Banner Links To</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				To indicate what page users will be directed to once they click on the banner, you can select either a product page or a category page or indicate any other link or landing page (by endering the page URL.)\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="form-section col-3">\r\n				<label for="f-type3">Banner Links To: </label>\r\n				<div class="select-container">\r\n					<select id="f-type3" name="f-type3">\r\n						<option selected disabled hidden value="'+(null==(__t=type3)?"":__t)+'">Category Page</option>\r\n						<option id="gridone" value="Category Page">Category Page</option>\r\n						<option id="gridtwo" value="Collections Page">Collections Page</option>\r\n						<option id="gridthree" value="Product Page">Product Page</option>\r\n						<option id="gridfour" value="Link/Landing Page">Link/Landing Page</option>\r\n						<option id="gridzero" value="No Link">No Link</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n			\r\n			<div class="row row-spaced" id="grid-Category" style="display:block;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Category Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="grid-category"></div>\r\n				</div>\r\n			</div>\r\n	\r\n			<div class="row row-spaced" id="grid-Collections" style="display:none;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Collections Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="grid-collections"></div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced" id="grid-Product" style="display:none;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Products Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="grid-productpage"></div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced" id="grid-LinkLanding" style="display:none;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Link/Landing Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="grid-linklanding">		\r\n						<div class="row row-spaced">\r\n							<div class="form-section col-5">\r\n								<label for="f-gridPageLink">Banner Landing Page Link</label>\r\n								<input type="text" id="f-gridPageLink" name="f-gridPageLink" value="'+(null==(__t=gridPageLink)?"":__t)+'">\r\n							</div>\r\n							<div class="form-section col-4">\r\n								<div class="label">Open Link in New Window<i title="If this is turned ON, clicking the link will open it in a new browser window/tab." class="icon icon-tool-tip x-space-s"></i></div>\r\n								<input '+(null==(__t=gridLinkActive?"checked":"")?"":__t)+' type="checkbox" id="f-grid-link-active" name="f-grid-link-active" class="on-off-switch" center-align/>\r\n								<label for="f-grid-link-active" class="on-off-switch-label">\r\n								    <div class="on-off-switch-state">on</div>\r\n								</label>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n	</div><!-- Closing Tab, Category Grid -->\r\n\r\n	<!-- End of Category Grid -->\r\n\r\n	<!-- Start of Product Tab -->\r\n	<div id="product-page">\r\n\r\n	<div class="row">\r\n\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Product Page Banner</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				The recommended image size for banner inside the products grid in categories is 340(W) x 220(H) pixels. The Maximum file size is 200 KB. The banner will only show if it is activated in category settings page.\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3 center-align"><img src="/images/mock/productimage.jpg"></div>\r\n			<div class="col-3 form-section image-section">\r\n				<div class="label">Image Upload</div>\r\n				<button type="button" id="product-image-button" class="image-upload btn btn-other">Select</button>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n			<div id="tile-display" class="row row-spaced">\r\n				<div class="col-12 center-align">\r\n					<img class="fit-container" id="product-image" src="'+(null==(__t=productImage)?"":__t)+'" alt="">\r\n				</div>\r\n			</div>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- Start Featured Product Section -->\r\n		<div id="product-or-subcategory"></div>\r\n		<!-- End of Featured Product Section -->\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="panel-title">\r\n					Where the Banner Appears\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				Select the categories that you want the banner to show up.\r\n			</div>\r\n		</div>\r\n\r\n		<div id="product-table-container"></div>\r\n		\r\n\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title clearfix">\r\n					<div class="y-space-top-m pull-left">Where Banner Links To</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				To indicate what page users will be directed to once they click on the banner, you can select either a product page or a category page or indicate any other link or landing page (by endering the page URL.)\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="form-section col-3">\r\n				<label for="f-type4">Banner Links To: </label>\r\n				<div class="select-container">\r\n					<select id="f-type4" name="f-type4">\r\n						<option selected disabled hidden value="'+(null==(__t=type4)?"":__t)+'">Category Page</option>\r\n						<option id="productone" value="Category Page">Category Page</option>\r\n						<option id="producttwo" value="Collections Page">Collections Page</option>\r\n						<option id="productthree" value="Product Page">Product Page</option>\r\n						<option id="productfour" value="Link/Landing Page">Link/Landing Page</option>\r\n						<option id="productzero" value="No Link">No Link</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n			\r\n			<div class="row row-spaced" id="product-Category" style="display:block;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Category Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="product-tab-category"></div>\r\n				</div>\r\n			</div>\r\n	\r\n			<div class="row row-spaced" id="product-Collections" style="display:none;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Collections Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="product-tab-collections"></div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced" id="product-Product" style="display:none;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Products Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="product-tab-productpage"></div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced" id="product-LinkLanding" style="display:none;">\r\n				<div class="col-12">\r\n					<div class="panel-title">\r\n						Select Link/Landing Page Link\r\n					</div>\r\n				</div>\r\n				<div class="col-12">\r\n					<div id="product-tab-linklanding">\r\n						<div class="row row-spaced">\r\n							<div class="form-section col-5">\r\n								<label for="f-productPageLink">Banner Landing Page Link</label>\r\n								<input type="text" id="f-productPageLink" name="f-productPageLink" value="'+(null==(__t=productPageLink)?"":__t)+'">\r\n							</div>\r\n							<div class="form-section col-4">\r\n								<div class="label">Open Link in New Window<i title="If this is turned ON, clicking the link will open it in a new browser window/tab." class="icon icon-tool-tip x-space-s"></i></div>\r\n								<input '+(null==(__t=productPageLink?"checked":"")?"":__t)+' type="checkbox" id="f-product-link-active" name="f-product-link-active" class="on-off-switch" center-align/>\r\n								<label for="f-product-link-active" class="on-off-switch-label">\r\n								    <div class="on-off-switch-state">on</div>\r\n								</label>\r\n							</div>\r\n						</div>						\r\n					</div>\r\n				</div>\r\n			</div>\r\n		\r\n	</div><!-- Closing Tag, Product tab -->\r\n	<!-- End of Product Tab -->\r\n\r\n    \r\n</div>';
return __p}}),define("text!content/category-sections/marketing-promotions/marketing-campaigns/templates/featured-sub-tpl.html",[],function(){return'<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Featured Subcategories</div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-6">\r\n			<h4 class="title pull-left">Selected Featured Subcategories</h4><i title="This allows you to organize your site by listing several groups of products under one main category." class="icon icon-tool-tip x-space-s"></i>\r\n			<table class="table-list alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-3">Rank</th>\r\n						<th class="col-6">Name</th>\r\n						<th class="col-3">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="featured-sub-list"></tbody>\r\n			</table>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<h4 class="title">Subcategory Search</h4>\r\n			<div class="search-container">\r\n				<input class="no-margin search-input" type="text" placeholder="Search Terms">\r\n				<ul id="featured-sub-search-list" class="search-list"></ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("content/category-sections/marketing-promotions/marketing-campaigns/templates/active-featured-sub-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td>'+(null==(__t=featuredRank)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=name)?"":__t)+'</td>\r\n	<td>\r\n		<button type="button" class="icon icon-trash icon-btn icon-2x"></button>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/marketing-promotions/marketing-campaigns/views/active-featured-sub-view",["underscore","backbone","../templates/active-featured-sub-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.listenTo(this.model,"change:featured",this.remove)},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){this.model.set("featured",!1)}});return i}),define("content/category-sections/marketing-promotions/marketing-campaigns/templates/all-featured-sub-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<li class="clearfix hide-overflow clickable">\r\n	<div class="pull-left">\r\n		'+(null==(__t=name)?"":__t)+'\r\n	</div>\r\n	<div class="pull-right">\r\n		<button type="button" class="icon icon-btn '+(null==(__t=featured?"icon-added":"icon-add")?"":__t)+'"></button>\r\n	</div>\r\n</li>';return __p}}),define("content/category-sections/marketing-promotions/marketing-campaigns/views/all-featured-sub-view",["underscore","backbone","../templates/all-featured-sub-tpl"],function(e,t,n){var i=t.View.extend({template:n,initialize:function(){this.setElement(this.template(this.model.toJSON())),this.listenTo(this.model,"change:featured",this.handleChange)},render:function(){return this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$icon=this.$el.find(".icon")},events:{click:"toggleAdded"},toggleAdded:function(){this.model.set("featured",!this.model.get("featured"))},handleChange:function(e){var t=e.get("featured");t?(this.$icon.removeClass("icon-add"),this.$icon.addClass("icon-added")):(this.$icon.removeClass("icon-added"),this.$icon.addClass("icon-add"))}});return i}),define("content/category-sections/marketing-promotions/marketing-campaigns/views/featured-sub-view",["underscore","backbone","text!../templates/featured-sub-tpl.html","./active-featured-sub-view","./all-featured-sub-view","global-events","jqueryui"],function(e,t,n,i,o,r){var a=t.View.extend({template:n,initialize:function(e){var t=this;t.setElement(t.template),t.cacheElem(),t.collection=e.collection,t.listenTo(t.collection,"change:featured",function(){t.addAllActive(),r.trigger("form:editing")})},render:function(){return this.cacheElem(),this.addAllListings(),this.addAllActive(),this.sortListView(),this},cacheElem:function(){this.$allList=this.$el.find("#featured-sub-search-list"),this.$activeList=this.$el.find("#featured-sub-list")},addListing:function(e){var t=new o({model:e});this.$allList.append(t.render().el)},addAllListings:function(){this.$allList.empty(),this.collection.forEach(this.addListing,this)},addActive:function(e){var t=new i({model:e});this.$activeList.append(t.render().el)},addAllActive:function(){this.$activeList.empty(),this.collection.getSortedByRank().forEach(this.addActive,this)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},sortListView:function(){var e=this;e.$activeList.sortable({helper:e.helperFixRowWidth,containment:"parent",tolerance:"pointer",start:function(e,t){t.placeholder.height(t.item.height()),t.helper.addClass("active")},update:function(){e.$activeList.children().each(function(t){var n=$(this).data("id");e.collection.get(n).set("featuredRank",t+1),e.addAllActive(),r.trigger("form:editing")})}})}});return a}),define("content/category-sections/marketing-promotions/marketing-campaigns/collections/featured-sub-collection",["backbone","../models/marketing-campaigns-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){var e=this;e.listenTo(e,"change:featured",function(t){var n;t.get("featured")?(t.set("featuredRank",0),n=e.getSortedByRank(),t.set("featuredRank",n[n.length-1].get("featuredRank")+1)):(e.setRank(),e.trigger("resequenced"))})},getSortedByRank:function(){return this.where({featured:!0}).sort(function(e,t){return e.get("featuredRank")-t.get("featuredRank")})},setRank:function(){var e=this.getSortedByRank().map(function(e,t){return e.set("featuredRank",t+1),e});this.set(e,{remove:!1})}});return n}),define("content/category-sections/marketing-promotions/marketing-campaigns/views/create-edit-campaign-view",["backbone","../templates/create-edit-campaign-tpl","../models/marketing-campaigns-model","../collections/marketing-campaigns-collection","components/featured-product/views/featured-product-view","./featured-sub-view","components/featured-product/collections/featured-product-collection","../collections/featured-sub-collection","global-events","settings","components/general-product/views/general-product-view","components/featured-occasions/collections/all-occasions-collection","content/category-sections/merchandising/manage-collections/collections/collection-collection","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c,d,u,h){var p=e.View.extend({tagName:"form",id:"m-marketing-campaign",template:t,render:function(e){var t=this,o=e.id;return i.fetchCustom().done(function(){t.model=o?i.get(o):new n,viewModel=t.model.toJSON(),t.$el.html(t.template(viewModel)),t.cacheElem(),t.delegateEvents(),t.applyTabs(),t.applyDates(),t.showTables(),t.validate(),t.applyToolTips()}.bind(this)),t},showTables:function(){var e=this;u.fetchCustom().done(function(){homeCatsCollection=u.deepClone(),catCatsCollection=u.deepClone(),gridCatsCollection=u.deepClone(),prodCatsCollection=u.deepClone(),catAppear1Collection=u.deepClone(),catAppear2Collection=u.deepClone(),homeCatsCollection.set(e.model.get("homeCatFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.homeCatView=new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,maxNumberProducts:2,sequence:!0,showCategoryID:!0,collection:homeCatsCollection,hideGrids:!0}),e.$homepageCategory.append(e.homeCatView.render().el),catCatsCollection.set(e.model.get("catSidebarFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.sidebarCatView=new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,maxNumberProducts:1,showCategoryID:!0,collection:catCatsCollection,hideGrids:!0}),e.$sidebarCategory.append(e.sidebarCatView.render().el),gridCatsCollection.set(e.model.get("gridFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$gridcategory.html(new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,maxNumberProducts:1,showCategoryID:!0,collection:gridCatsCollection,hideGrids:!0}).render().el),prodCatsCollection.set(e.model.get("prodFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$productTabCategory.html(new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Category",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,maxNumberProducts:1,showCategoryID:!0,collection:prodCatsCollection,hideGrids:!0}).render().el),catAppear1Collection.set(e.model.get("catAppear1").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.sidebarAppearView=new d({activeTitle:"Categories In Which This Appears",activeTableTitle:"Selected Categories",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,maxNumberProducts:20,showCategoryID:!0,collection:catAppear1Collection,hideGrids:!0}),e.$sidebarAppear.append(e.sidebarAppearView.render().el),catAppear2Collection.set(e.model.get("catAppear2").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$grid1TableContainer.html(new d({activeTitle:"Categories In Which This Appears",activeTableTitle:"Selected Categories",allTitle:"All Categories",allSearchPlaceholder:"Category Search Terms",activeAttribute:"active",nameAttribute:"occasion",async:!1,hoverTitle:!0,maxNumberProducts:100,showCategoryID:!0,collection:catAppear2Collection,hideGrids:!0}).render().el)}.bind(e)),h.fetchCustom().done(function(){homeCollectionCollection=h.deepClone(),catCollectionCollection=h.deepClone(),gridCollectionCollection=h.deepClone(),prodCollectionCollection=h.deepClone(),homeCollectionCollection.set(e.model.get("homeFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$homepageCollections.html(new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Collection",allTitle:"All Collections",allSearchPlaceholder:"Collection Search Terms",activeAttribute:"featured",nameAttribute:"name",async:!1,hoverTitle:!0,maxNumberProducts:1,selectAll:!0,collection:homeCollectionCollection,hideGrids:!0}).render().el),catCollectionCollection.set(e.model.get("catFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$sidebarCollections.html(new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Collection",allTitle:"All Collections",allSearchPlaceholder:"Collection Search Terms",activeAttribute:"featured",nameAttribute:"name",async:!1,hoverTitle:!0,maxNumberProducts:1,selectAll:!0,collection:catCollectionCollection,hideGrids:!0}).render().el),gridCollectionCollection.set(e.model.get("gridFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$gridcollections.html(new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Collection",allTitle:"All Collections",allSearchPlaceholder:"Collection Search Terms",activeAttribute:"featured",nameAttribute:"name",async:!1,hoverTitle:!0,maxNumberProducts:1,selectAll:!0,collection:gridCollectionCollection,hideGrids:!0}).render().el),prodCollectionCollection.set(e.model.get("prodFeature").map(function(e){return{id:e,active:!0}}),{merge:!0,remove:!1}),e.$productTabCollections.html(new d({activeTitle:"Link-To Location",activeTableTitle:"Selected Collection",allTitle:"All Collections",allSearchPlaceholder:"Collection Search Terms",activeAttribute:"featured",nameAttribute:"name",async:!1,hoverTitle:!0,maxNumberProducts:1,selectAll:!0,collection:prodCollectionCollection,hideGrids:!0}).render().el)}.bind(e)),e.homeProductView=new o({collection:new a(e.model.get("homeFeature")),maxNumberProducts:1,selectAll:!0}),e.$homepageProductPage.append(e.homeProductView.render().el),e.catProductView=new o({collection:new a(e.model.get("catFeature")),maxNumberProducts:1,selectAll:!0}),e.$sidebarProductPage.append(e.catProductView.render().el),e.gridProductView=new o({collection:new a(e.model.get("gridFeature")),maxNumberProducts:1,selectAll:!0}),e.$gridproductPage.append(e.gridProductView.render().el),e.prodProductView=new o({collection:new a(e.model.get("prodFeature")),maxNumberProducts:1,selectAll:!0}),e.$productTabProductPage.append(e.prodProductView.render().el),e.prodAppearsProductView=new o({collection:new a(e.model.get("prodAppear")),maxNumberProducts:100,selectAll:!0}),e.$productTableContainer.append(e.prodAppearsProductView.render().el)},cacheElem:function(){this.$name=this.$el.find("#f-name"),this.$active=this.$el.find("#f-active"),this.$type1=this.$el.find("#f-type1"),this.$type2=this.$el.find("#f-type2"),this.$type3=this.$el.find("#f-type3"),this.$type4=this.$el.find("#f-type4"),this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate"),this.$setEndDate=this.$el.find("#f-setEndDate"),this.$priority=this.$el.find("#f-priority"),this.$homepageImage=this.$el.find("#homepage-image"),this.$mobileHomepageImage=this.$el.find("#mobile-homepage-image"),this.$sidebarImage=this.$el.find("#sidebar-image"),this.$gridImage=this.$el.find("#grid-image"),this.$mobileGridImage=this.$el.find("#mobile-grid-image"),this.$productImage=this.$el.find("#product-image"),this.$homeAltText=this.$el.find("#f-homeAltText"),this.$mobileHomeAltText=this.$el.find("#f-mobileHomeAltText"),this.$sidebarAltText=this.$el.find("#f-sidebarAltText"),this.$gridAltText=this.$el.find("#f-gridAltText"),this.$mobileGridAltText=this.$el.find("#f-mobileGridAltText"),this.$productAltText=this.$el.find("#f-productAltText"),this.$landingPageLink=this.$el.find("#f-landingPageLink"),this.$catPageLink=this.$el.find("#f-catPageLink"),this.$gridPageLink=this.$el.find("#f-gridPageLink"),this.$productPageLink=this.$el.find("#f-productPageLink"),this.$linkActive=this.$el.find("#f-link-active"),this.$catLinkActive=this.$el.find("#f-cat-link-active"),this.$gridLinkActive=this.$el.find("#f-grid-link-active"),this.$productLinkActive=this.$el.find("#f-product-link-active"),this.$homepageCategory=this.$el.find("#homepage-category"),this.$homepageCollections=this.$el.find("#homepage-collections"),this.$homepageProductPage=this.$el.find("#homepage-productpage"),this.$homepageLinkLanding=this.$el.find("#homepage-linklanding"),this.$sidebarAppear=this.$el.find("#sidebar-appear-container"),this.$sidebarCategory=this.$el.find("#sidebar-category"),this.$sidebarCollections=this.$el.find("#sidebar-collections"),this.$sidebarProductPage=this.$el.find("#sidebar-productpage"),this.$sidebarLinkLanding=this.$el.find("#sidebar-linklanding"),this.$grid1TableContainer=this.$el.find("#grid1-table-container"),this.$grid2TableContainer=this.$el.find("#grid2-table-container"),this.$gridcategory=this.$el.find("#grid-category"),this.$gridcollections=this.$el.find("#grid-collections"),this.$gridproductPage=this.$el.find("#grid-productpage"),this.$gridlinkLanding=this.$el.find("#grid-linklanding"),this.$productTabCategory=this.$el.find("#product-tab-category"),this.$productTabCollections=this.$el.find("#product-tab-collections"),this.$productTabProductPage=this.$el.find("#product-tab-productpage"),this.$productTabLinkLanding=this.$el.find("#product-tab-linklanding"),this.$categoriesContainer=this.$el.find("#categories-container"),this.$homepagetabContainer=this.$el.find("#homepage-container"),this.$sidebarContainer=this.$el.find("#sidebar-container"),this.$sidebarLinksToContainer=this.$el.find("#sidebar-linksto-container"),this.$productTableContainer=this.$el.find("#product-table-container"),this.$productContainer=this.$el.find("#product-or-subcategory"),this.$homeOne=this.$el.find("#homeone"),this.$homeTwo=this.$el.find("#hometwo"),this.$homeThree=this.$el.find("#homethree"),this.$homeFour=this.$el.find("#homefour"),this.$homeZero=this.$el.find("#homezero"),this.$sideOne=this.$el.find("#sideone"),this.$sideTwo=this.$el.find("#sidetwo"),this.$sideThree=this.$el.find("#sidethree"),this.$sideFour=this.$el.find("#sidefour"),this.$sideZero=this.$el.find("#sidezero"),this.$gridOne=this.$el.find("#gridone"),this.$gridTwo=this.$el.find("#gridtwo"),this.$gridThree=this.$el.find("#gridthree"),this.$gridFour=this.$el.find("#gridfour"),this.$gridZero=this.$el.find("#gridzero"),this.$productOne=this.$el.find("#productone"),this.$productTwo=this.$el.find("#producttwo"),this.$productThree=this.$el.find("#productthree"),this.$productFour=this.$el.find("#productfour"),this.$productZero=this.$el.find("#productzero"),this.$homeCategory=this.$el.find("#homeBanner-Category"),this.$homeCollections=this.$el.find("#homeBanner-Collections"),this.$homeProduct=this.$el.find("#homeBanner-Product"),this.$homeLinkLanding=this.$el.find("#homeBanner-LinkLanding"),this.$sideCategory=this.$el.find("#side-Category"),this.$sideCollections=this.$el.find("#side-Collections"),this.$sideProduct=this.$el.find("#side-Product"),this.$sideLinkLanding=this.$el.find("#side-LinkLanding"),this.$gridCategory=this.$el.find("#grid-Category"),this.$gridCollections=this.$el.find("#grid-Collections"),this.$gridProduct=this.$el.find("#grid-Product"),this.$gridLinkLanding=this.$el.find("#grid-LinkLanding"),this.$productCategory=this.$el.find("#product-Category"),this.$productCollections=this.$el.find("#product-Collections"),this.$productProduct=this.$el.find("#product-Product"),this.$productLinkLanding=this.$el.find("#product-LinkLanding"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #delete-btn":"handleDelete","click .image-upload":"handleTileImageUpload","click .preview-btn":"handleMerchChange","change #f-type1":"handleType1Change","change #f-type2":"handleType2Change","change #f-type3":"handleType3Change","change #f-type4":"handleType4Change","change #f-setEndDate":"handleToggle"},handleTileImageUpload:function(e){var t=this,n=e.currentTarget.id;switch(n){case"homepage-image-button":l.trigger("form:image-upload",{cb:function(e){t.$homepageImage.prop("src",e)},active:t.$homepageImage.prop("src"),name:"Wedding Galleries"});break;case"mobile-homepage-image-button":l.trigger("form:image-upload",{cb:function(e){t.$mobileHomepageImage.prop("src",e)},active:t.$mobileHomepageImage.prop("src"),name:"Wedding Galleries"});break;case"sidebar-image-button":l.trigger("form:image-upload",{cb:function(e){t.$sidebarImage.prop("src",e)},active:t.$sidebarImage.prop("src"),name:"Wedding Galleries"});break;case"grid-image-button":l.trigger("form:image-upload",{cb:function(e){t.$gridImage.prop("src",e)},active:t.$gridImage.prop("src"),name:"Wedding Galleries"});break;case"mobile-grid-image-button":l.trigger("form:image-upload",{cb:function(e){t.$mobileGridImage.prop("src",e)},active:t.$mobileGridImage.prop("src"),name:"Wedding Galleries"});break;case"product-image-button":l.trigger("form:image-upload",{cb:function(e){t.$productImage.prop("src",e)},active:t.$productImage.prop("src"),name:"Wedding Galleries"});break;default:console.log("the default")}},handleType1Change:function(){var e=this;e.$homeCategory.css({display:"none"}),e.$homeCollections.css({display:"none"}),e.$homeProduct.css({display:"none"}),e.$homeLinkLanding.css({display:"none"}),e.$homeOne.is("option:selected")?e.$homeCategory.css({display:"block"}):e.$homeTwo.is("option:selected")?e.$homeCollections.css({display:"block"}):e.$homeThree.is("option:selected")?e.$homeProduct.css({display:"block"}):e.$homeFour.is("option:selected")&&e.$homeLinkLanding.css({display:"block"})},handleType2Change:function(){var e=this;e.$sideCategory.css({display:"none"}),e.$sideCollections.css({display:"none"}),e.$sideProduct.css({display:"none"}),e.$sideLinkLanding.css({display:"none"}),e.$sideOne.is("option:selected")?e.$sideCategory.css({display:"block"}):e.$sideTwo.is("option:selected")?e.$sideCollections.css({display:"block"}):e.$sideThree.is("option:selected")?e.$sideProduct.css({display:"block"}):e.$sideFour.is("option:selected")&&e.$sideLinkLanding.css({display:"block"})},handleType3Change:function(){var e=this;e.$gridCategory.css({display:"none"}),e.$gridCollections.css({display:"none"}),e.$gridProduct.css({display:"none"}),e.$gridLinkLanding.css({display:"none"}),e.$gridOne.is("option:selected")?e.$gridCategory.css({display:"block"}):e.$gridTwo.is("option:selected")?e.$gridCollections.css({display:"block"}):e.$gridThree.is("option:selected")?e.$gridProduct.css({display:"block"}):e.$gridFour.is("option:selected")&&e.$gridLinkLanding.css({display:"block"})},handleType4Change:function(){var e=this;e.$productCategory.css({display:"none"}),e.$productCollections.css({display:"none"}),e.$productProduct.css({display:"none"}),e.$productLinkLanding.css({display:"none"}),e.$productOne.is("option:selected")?e.$productCategory.css({display:"block"}):e.$productTwo.is("option:selected")?e.$productCollections.css({display:"block"}):e.$productThree.is("option:selected")?e.$productProduct.css({display:"block"}):e.$productFour.is("option:selected")&&e.$productLinkLanding.css({display:"block"})},handleMerchChange:function(e){var t=this.$merch;e.preventDefault(),console.log(e),l.trigger("modal:custom",{template:{title:"Page Preview",text:"The preview page should be rendered here in this modal."},confirmFn:function(){t.prop("checked",!t.prop("checked"))},cancelFn:function(){}})},handleToggle:function(){var e=this;l.trigger("form:editing"),e.$setEndDate.is(":checked")?l.trigger("form:reset",function(){e.$setEndDate.prop("checked",!0),e.$startDate.prop("disabled",!1).val(e.model.get("startDate")),e.$endDate.prop("disabled",!1).val(e.model.get("endDate"))}):(this.$startDate.prop("disabled",!0),this.$endDate.prop("disabled",!0))},handleDelete:function(){var e=this;l.trigger("form:delete",function(){i.remove(e.model),this.parent.showHome()}.bind(this))},handleCancel:function(){l.trigger("form:cancel:url",c.marketingCampaignBaseUrl)},handleSave:function(){var e=this;this.$el.valid()?(this.model.set({name:this.$name.val().trim(),active:this.$active.is(":checked"),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),setEndDate:this.$setEndDate.is(":checked"),priority:this.$priority.val().trim(),landingPageLink:this.$landingPageLink.val().trim(),catPageLink:this.$catPageLink.val().trim(),gridPageLink:this.$gridPageLink.val().trim(),productPageLink:this.$productPageLink.val().trim(),linkActive:this.$linkActive.is(":checked"),homeLinkActive:this.$linkActive.is(":checked"),catLinkActive:this.$catLinkActive.is(":checked"),gridLinkActive:this.$gridLinkActive.is(":checked"),productLinkActive:this.$productLinkActive.is(":checked"),homepageImage:this.$homepageImage.attr("src"),mobileHomepageImage:this.$mobileHomepageImage.attr("src"),sidebarImage:this.$sidebarImage.attr("src"),gridImage:this.$gridImage.attr("src"),mobileGridImage:this.$mobileGridImage.attr("src"),productImage:this.$productImage.attr("src"),homeFeature:e.homeProductView.collection.where({active:!0}).map(function(e){return e.get("id")}),homeCatFeature:e.homeCatView.collection.where({active:!0}).map(function(e){return e.get("id")}),catFeature:e.catProductView.collection.where({active:!0}).map(function(e){return e.get("id")}),gridFeature:e.gridProductView.collection.where({active:!0}).map(function(e){return e.get("id")}),prodFeature:e.prodProductView.collection.where({active:!0}).map(function(e){return e.get("id")}),prodAppear:e.prodAppearsProductView.collection.where({active:!0}).map(function(e){return e.get("id")}),catAppear1:e.sidebarAppearView.collection.where({active:!0}).map(function(e){return e.get("id")}),catSidebarFeature:e.sidebarCatView.collection.where({active:!0}).map(function(e){return e.get("id")}),type1:this.$type1.find("option:selected").val(),type2:this.$type2.find("option:selected").val()}),i.get(this.model)||(this.model.set("id",Date.now()),i.add(this.model)),l.trigger("form:save",this.$tip),l.trigger("form:cancel:url",c.marketingCampaignBaseUrl)):l.trigger("form:invalid",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyTabs:function(){this.$el.find("#tabs").tabs()},validate:function(){this.$el.validate({rules:{"f-name":{required:!0},"f-startDate":{dateCustom:!0,required:!0},"f-endDate":{dateCustom:!0,required:!0},"f-priority":{required:!0}}})}});return new p}),define("content/category-sections/marketing-promotions/marketing-campaigns/views/marketing-campaigns-page-view",["backbone","./marketing-campaigns-page-home-view","./create-edit-campaign-view","global-events","jqueryui"],function(e,t,n,i){var o="marketing-promotions",r="marketing-campaigns",a=e.View.extend({tagName:"div",initialize:function(){var e=this;t.parent=this,n.parent=this,i.on("route:argument",function(t,n,i){var a,s;i=i&&i.split("/"),t===o&&n===r&&(i&&i.length?(a=i[0],s=i[1],/edit/i.test(a)?e.showCreateEdit(s):/create/i.test(a)&&e.showCreateEdit()):e.showHome())})},render:function(){return this},replaceVisible:function(e,t){this.$el.empty(),this.$el.append(e.render(t).$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){this.replaceVisible(n,{id:e})}});return new a}),define("content/category-sections/more/floral-app-settings/templates/floral-app-settings-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Floral App Settings</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage the settings for your Floral App. You can create new Floral App promo codes, create push notifications, or change your other Floral App settings such as delivery text.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div id="tabs">\r\n\r\n			<ul class="clearfix">\r\n				<li class="col-4"><a class="center-align fill-container-width" href="#mktg">Marketing Items</a></li>\r\n				<li class="col-4"><a class="center-align fill-container-width" href="#codes">Promo Codes</a></li>\r\n				<li class="col-4"><a class="center-align fill-container-width" href="#push">Push Notifications</a></li>\r\n			</ul>\r\n\r\n			<div id="mktg">\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<div class="panel-title">App Status</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-4 form-section">\r\n						<div class="label">Enrollment Status<i title="This indicates whether or not you are currently enrolled in the Floral App Program." class="icon icon-tool-tip x-space-s"></i></div>\r\n						<input type="text" readonly id="f-enrollment" name="f-enrollment" value="'+(null==(__t=enrollment)?"":__t)+'" disabled>\r\n					</div>\r\n					<div class="col-2"></div>\r\n					<div class="col-4 form-section">\r\n						<div class="label">Your Unique Floral App Code<i title="This is the code unique to your Floral App which your customers can use to find you on Floral App." class="icon icon-tool-tip x-space-s"></i></div>\r\n						<input type="text" readonly id="f-appCode" name="f-appCode" value="'+(null==(__t=appCode)?"":__t)+'" disabled>\r\n					</div>		\r\n				</div>\r\n\r\n				<div class="row row-spaced y-space-top-m"></div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<div class="panel-title">Display Banners</div>\r\n					</div>\r\n				</div>				\r\n				<div class="row row-spaced">\r\n					<div class="col-6 form-section">\r\n						<div class="row">\r\n							<div class="col-5">\r\n		 						<div class="label">Email Banner</div>\r\n								<input '+(null==(__t=emails?"checked":"")?"":__t)+' type="checkbox" id="f-emails" name="f-emails" class="on-off-switch" />\r\n								<label for="f-emails" class="on-off-switch-label">\r\n									<div class="on-off-switch-state">on</div>\r\n								</label>\r\n							</div>\r\n							<div class="col-1">\r\n								<label for="f-image-email">Image</label>\r\n								<button type="button" id="f-image-email" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s"></button>\r\n							</div>\r\n						</div>	 	\r\n						<div class="row row-spaced form-section">\r\n							<div class="col-12">\r\n								<img id="f-emailImg-image" class="medium-table-image" src="'+(null==(__t=emailImg)?"":__t)+'" alt="">\r\n							</div>\r\n						</div>\r\n					</div>\r\n					<div class="col-6 form-section">\r\n						<div class="row">\r\n							<div class="col-5">\r\n		 						<div class="label">About Us Banner</div>\r\n								<input '+(null==(__t=aboutUs?"checked":"")?"":__t)+' type="checkbox" id="f-aboutUs" name="f-aboutUs" class="on-off-switch" />\r\n								<label for="f-aboutUs" class="on-off-switch-label">\r\n									<div class="on-off-switch-state">on</div>\r\n								</label>\r\n							</div>\r\n							<div class="col-1">\r\n								<label for="f-image-about">Image</label>\r\n								<button type="button" id="f-image-about" class="image-upload icon icon-btn icon-image btn-file icon-2x y-space-s"></button>\r\n							</div>\r\n						</div>	 	\r\n						<div class="row row-spaced form-section">\r\n							<div class="col-12">\r\n								<img id="f-aboutUs-image" class="medium-table-image" src="'+(null==(__t=aboutUsImg)?"":__t)+'" alt="">\r\n							</div>\r\n						</div>	\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced y-space-top-m"></div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<div class="panel-title">App Text</div>\r\n					</div>\r\n				</div>		\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-12">\r\n						<div class="label">\r\n							Pick-Up Message\r\n						</div>\r\n					</div>\r\n					<div class="col-12">\r\n						<textarea name="f-pickUpMsg" id="f-pickUpMsg" class="size-2">'+(null==(__t=pickUpMsg)?"":__t)+'</textarea>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-12">\r\n						<div class="label">\r\n							Delivery Message\r\n						</div>\r\n					</div>\r\n					<div class="col-12">\r\n						<textarea name="f-delMsg" id="f-delMsg" class="size-2">'+(null==(__t=delMsg)?"":__t)+'</textarea>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-12">\r\n						<div class="label">\r\n							Profile Message\r\n						</div>\r\n					</div>\r\n					<div class="col-12">\r\n						<textarea name="f-profileMsg" id="f-profileMsg" class="size-2">'+(null==(__t=profileMsg)?"":__t)+'</textarea>\r\n					</div>\r\n				</div>				\r\n			</div><!-- end tab 1 -->\r\n\r\n			<div id="codes">\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<!-- <button type="button" id="f-quick-promo" class="btn btn-submit pull-right"><div class="icon icon-lg icon-add"></div>New Quick Promo</button> -->\r\n						<button type="button" id="f-advanced-promo" class="btn btn-submit pull-right x-space-s"><div class="icon icon-lg icon-add"></div>New Promo</button>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<table class="table alternate">\r\n							<thead>\r\n								<tr>\r\n									<th class="col-2 left-align">Promo Code</th>\r\n									<th class="col-2">Start Date</th>\r\n									<th class="col-2">End Date</th>\r\n									<th class="col-2">Discount</th>\r\n									<th class="col-2">Usage Type</th>\r\n									<th class="col-1">Edit</th>\r\n									<th class="col-1">Delete</th>\r\n								</tr>\r\n							</thead>\r\n							<tbody id="promo-list"></tbody>\r\n						</table>						\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div id="push">\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<button type="button" id="f-new-push" class="btn btn-submit pull-right"><div class="icon icon-lg icon-add"></div>New Offer</button>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<table class="table alternate">\r\n							<thead>\r\n								<tr>\r\n									<th class="col-2 left-align">Offer</th>\r\n									<th class="col-2">Start Date</th>\r\n									<th class="col-2">End Date<i class="icon icon-tool-tip x-space-s" title="The offer will no longer appear to your customers after this date and time."></i></th>\r\n									<th class="col-2">Send</th>\r\n									<th class="col-2">Status</th>\r\n									<th class="col-1">Edit</th>\r\n									<th class="col-1">Delete</th>\r\n								</tr>\r\n							</thead>\r\n							<tbody id="push-list"></tbody>\r\n						</table>						\r\n					</div>\r\n				</div>			\r\n			</div>			\r\n\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div id="quick-promo-modal"></div>\r\n<div id="adv-promo-modal"></div>\r\n<div id="push-modal"></div>';
return __p}}),define("content/category-sections/more/floral-app-settings/models/settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-floral-app-settings.json",defaults:{enrollment:"active",appCode:"",emails:!0,emailImg:"",aboutUs:!0,aboutUsImg:"",pickUpMsg:"",delMsg:"",profileMsg:""}});return new t}),define("content/category-sections/more/floral-app-settings/models/promo-model",["backbone"],function(e){var t=e.Model.extend({defaults:{statusActive:!0,promoCode:"",startDate:"",endDate:"",discountType:"",discountAmt:"",condition:"M",description:"",federated:!1}});return t}),define("content/category-sections/more/floral-app-settings/templates/quick-promo-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="left-align">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Create Quick Promotion Code</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Create Code</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<div class="label">Promotion Code</div>\r\n			<input type="text" name="f-promoCode" id="f-promoCode" value="'+(null==(__t=promoCode)?"":__t)+'">\r\n		</div>\r\n		<div class="col-3 form-section date-container">\r\n			<div class="label">Start Date</div>\r\n			<input type="text" name="f-startDate" id="f-startDate" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n		</div>\r\n		<div class="col-3 form-section date-container">\r\n			<div class="label">End Date</div>\r\n			<input type="text" name="f-endDate" id="f-endDate" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n		</div>			\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section select-container">\r\n			<div class="label">Discount Amount</div>\r\n			<select name="f-discountAmount" id="f-discountAmount">\r\n				<option value="$5">$5</option>\r\n				<option value="$10">$10</option>\r\n				<option value="$20">$20</option>\r\n				<option value="10%">10%</option>\r\n				<option value="20%">20%</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n\r\n</div>';return __p}}),define("content/category-sections/more/floral-app-settings/views/quick-promo-edit-view",["backbone","../models/promo-model","../templates/quick-promo-edit-view-tpl","jqueryval"],function(e,t,n){return e.View.extend({tagName:"div",template:n,render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.validateForm(),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$editForm=this.$el.find("#edit-form")},closeModal:function(){this.$el.parent().dialog("close")},handleSaveBtnClick:function(){this.editForm.valid()&&(t.set({}),this.closeModal())},validateForm:function(){this.editForm=this.$editForm.validate({rules:{"f-paypal-email-address":{required:!0,email:!0},"f-paypal-pos-account-number":{required:!0,digits:!0}}})}})}),define("content/category-sections/more/floral-app-settings/templates/promo-code-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="left-align">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Edit Promo Code</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Hidden Alert Message -->\r\n	<div class="row panel alert-panel">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-1">\r\n					<div class="icon icon-3x icon-warning"></div>\r\n				</div>\r\n				<div class="col-11 alert-text">\r\n					This is a generic placeholder for error messages in eSAT. <br>\r\n					In the live app, this will be a real message and will be hidden by default.\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<!-- Hidden Alert Message -->\r\n\r\n	',federated===!0?(__p+='\r\n		<div class="row row-spaced">\r\n			<div class="col-4 form-section">\r\n				<div class="label">Active</div>\r\n				<input '+(null==(__t=statusActive?"checked":"")?"":__t)+' type="checkbox" id="f-statusActive" name="f-statusActive" class="on-off-switch" />\r\n				<label for="f-statusActive" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<div class="label">Promotion Code</div>\r\n				<input type="text" name="f-promoCode" id="f-promoCode" value="'+(null==(__t=promoCode)?"":__t)+'" disabled>\r\n			</div>\r\n			<div class="col-3 form-section date-container">\r\n				<div class="label">Start Date</div>\r\n				<input type="text" name="f-startDate" id="f-startDate" class="date" value="'+(null==(__t=startDate)?"":__t)+'" disabled>\r\n			</div>\r\n			<div class="col-3 form-section date-container">\r\n				<div class="label">End Date</div>\r\n				<input type="text" name="f-endDate" id="f-endDate" class="date" value="'+(null==(__t=endDate)?"":__t)+'" disabled>\r\n			</div>			\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<div class="label">Description</div>\r\n				<input type="text" name="f-description" id="f-description" value="'+(null==(__t=description)?"":__t)+'" disabled>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-4 form-section select-container">\r\n				<div class="label">Discount Amount</div>\r\n				<select name="f-discountAmount" id="f-discountAmount" disabled>\r\n					<option value="$5">$5</option>\r\n					<option value="$10">$10</option>\r\n					<option value="$20">$20</option>\r\n					<option value="10%">10%</option>\r\n					<option value="20%">20%</option>\r\n				</select>\r\n			</div>\r\n			<div class="col-6 form-section select-container">\r\n				<div class="label">Promotion Conditions</div>\r\n				<select name="f-conditions" id="f-conditions" disabled>\r\n					',"AAP"==condition?conditionTitle="One Per Device - Auto Apply":"M"==condition?conditionTitle="Multi Use":"ANP"==condition&&(conditionTitle="One Per Device - Do Not Auto Apply"),__p+='\r\n					<option selected disabled hidden value="'+(null==(__t=conditionTitle)?"":__t)+'">'+(null==(__t=conditionTitle)?"":__t)+'</option>\r\n					<option value="AAP">One Per Device - Auto Apply</option>\r\n					<option value="ANP">One Per Device - Do Not Auto Apply</option>\r\n					<option value="M">Multi Use</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	'):(__p+='\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<div class="label">Promotion Code</div>\r\n				<input type="text" name="f-promoCode" id="f-promoCode" value="'+(null==(__t=promoCode)?"":__t)+'">\r\n			</div>\r\n			<div class="col-3 form-section date-container">\r\n				<div class="label">Start Date</div>\r\n				<input type="text" name="f-startDate" id="f-startDate" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n			</div>\r\n			<div class="col-3 form-section date-container">\r\n				<div class="label">End Date</div>\r\n				<input type="text" name="f-endDate" id="f-endDate" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n			</div>			\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<div class="label">Description</div>\r\n				<input type="text" name="f-description" id="f-description" value="'+(null==(__t=description)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-4 form-section select-container">\r\n				<div class="label">Discount Amount</div>\r\n				<select name="f-discountAmount" id="f-discountAmount">\r\n					<option value="$5">$5</option>\r\n					<option value="$10">$10</option>\r\n					<option value="$20">$20</option>\r\n					<option value="10%">10%</option>\r\n					<option value="20%">20%</option>\r\n				</select>\r\n			</div>\r\n			<div class="col-6 form-section select-container">\r\n				<div class="label">Promotion Conditions</div>\r\n				<select name="f-conditions" id="f-conditions">\r\n					',"AAP"==condition?conditionTitle="One Per Device - Auto Apply":"M"==condition?conditionTitle="Multi Use":"ANP"==condition&&(conditionTitle="One Per Device - Do Not Auto Apply"),__p+='\r\n					<option selected disabled hidden value="'+(null==(__t=conditionTitle)?"":__t)+'">'+(null==(__t=conditionTitle)?"":__t)+'</option>\r\n					<option value="AAP">One Per Device - Auto Apply</option>\r\n					<option value="ANP">One Per Device - Do Not Auto Apply</option>\r\n					<option value="M">Multi Use</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	'),__p+="\r\n\r\n</div>";return __p}}),define("content/category-sections/more/floral-app-settings/views/promo-code-edit-view",["backbone","../models/promo-model","../templates/promo-code-edit-view-tpl","jqueryval"],function(e,t,n){return e.View.extend({tagName:"div",template:n,render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.validateForm(),this.applyDates(),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$editForm=this.$el.find("#edit-form"),this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate")},closeModal:function(){this.$el.parent().dialog("close")},handleSaveBtnClick:function(){t.set({}),this.closeModal()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},validateForm:function(){this.editForm=this.$editForm.validate({rules:{"f-paypal-email-address":{required:!0,email:!0},"f-paypal-pos-account-number":{required:!0,digits:!0}}})}})}),define("content/category-sections/more/floral-app-settings/templates/promo-code-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr>\r\n	<td class="left-align">'+(null==(__t=promoCode)?"":__t)+"</td>\r\n	<td>"+(null==(__t=startDate)?"":__t)+"</td>\r\n	<td>"+(null==(__t=endDate)?"":__t)+"</td>\r\n	<td>",__p+="Dollars Off"==discountType?"$"+(null==(__t=discountAmt)?"":__t):(null==(__t=discountAmt)?"":__t)+"%",__p+="</td>\r\n	<td>"+(null==(__t=condition)?"":__t)+'</td>\r\n	<td><button type="button" class="icon icon-btn icon-2x icon-edit"></button></td>\r\n	<td>',federated||(__p+='<button type="button" class="icon icon-btn icon-2x icon-trash"></button>'),__p+="</td>\r\n</tr>";return __p}}),define("content/category-sections/more/floral-app-settings/collections/promo-collection",["backbone","../models/promo-model"],function(e,t){var n=e.Collection.extend({model:t,url:"/mock/user-floral-app-promo-codes.json"});return new n}),define("content/category-sections/more/floral-app-settings/views/promo-code-view",["backbone","../templates/promo-code-view-tpl","../collections/promo-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))},handleEdit:function(){this.parent.handlePromoEdit(this.model)}});return o}),define("content/category-sections/more/floral-app-settings/models/push-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:"",active:!0,startDate:"",startTime:"",startAmPm:"",endDate:"",endTime:"",endAmPm:"",offer:"",offerMsg:"",send:!1,notified:"pending",notifyTime:"",sendTime:"",federated:!1}});return t}),define("content/category-sections/more/floral-app-settings/templates/push-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="left-align">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">Edit Push Notification</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-5 form-section">\r\n			<div class="label">Push Notification Status</div>\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-status" name="f-status" class="on-off-switch" />\r\n			<label for="f-status" class="on-off-switch-label">\r\n				<div class="on-off-switch-state">on</div>\r\n			</label>	 				\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<div class="label">Push Notification Text</div>\r\n			<input type="text" id="f-offer" name="f-offer" value="'+(null==(__t=offer)?"":__t)+'" '+(null==(__t=send?"disabled":"")?"":__t)+'>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 select-container form-section">\r\n			<div class="label">Send Time</div>\r\n			<select id="f-sendTime" name="f-sendTime" '+(null==(__t=send?"disabled":"")?"":__t)+">\r\n				",sendTimeTitle="future"==sendTime?"Schedule future send date and time":"Send offer immediately",__p+='			\r\n				<option selected disabled hidden value="'+(null==(__t=sendTimeTitle)?"":__t)+'">'+(null==(__t=sendTimeTitle)?"":__t)+'</option>\r\n				<option value="Schedule future send date and time">Schedule future send date and time</option>\r\n				<option value="Send offer immediately">Send offer immediately</option>\r\n			</select>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced" id="f-start-row">\r\n		<div class="col-4 form-section date-container">\r\n			<div class="label">Start Date</div>\r\n			<input type="text" name="f-startDate" id="f-startDate" class="date" value="'+(null==(__t=startDate)?"":__t)+'" '+(null==(__t=send?"disabled":"")?"":__t)+'>\r\n		</div>\r\n		<div class="col-3 form-section select-container">\r\n			<div class="label">Time</div>\r\n			<select name="f-startTime" id="f-startTime" '+(null==(__t=send?"disabled":"")?"":__t)+'>\r\n				<option selected disabled hidden value="'+(null==(__t=startTime)?"":__t)+'">'+(null==(__t=startTime)?"":__t)+'</option>\r\n				<option value="1:00">1:00</option>\r\n				<option value="2:00">2:00</option>\r\n				<option value="3:00">3:00</option>\r\n				<option value="4:00">4:00</option>\r\n				<option value="5:00">5:00</option>\r\n				<option value="6:00">6:00</option>\r\n				<option value="7:00">7:00</option>\r\n				<option value="8:00">8:00</option>\r\n				<option value="9:00">9:00</option>\r\n				<option value="10:00">10:00</option>\r\n				<option value="11:00">11:00</option>\r\n				<option value="12:00">12:00</option>\r\n			</select>\r\n		</div>\r\n		<div class="col-3 form-section select-container">\r\n			<div class="label">&nbsp;</div>\r\n			<select name="f-startAmPm" id="f-startAmPm" '+(null==(__t=send?"disabled":"")?"":__t)+'>\r\n				<option selected disabled hidden value="'+(null==(__t=startAmPm)?"":__t)+'">'+(null==(__t=startAmPm)?"":__t)+'</option>\r\n				<option value="AM">AM</option>\r\n				<option value="PM">PM</option>\r\n			</select>			\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-4 form-section date-container">\r\n			<div class="label">End Date</div>\r\n			<input type="text" name="f-endDate" id="f-endDate" class="date" value="'+(null==(__t=endDate)?"":__t)+'" '+(null==(__t=send?"disabled":"")?"":__t)+'>\r\n		</div>\r\n		<div class="col-3 form-section select-container">\r\n			<div class="label">Time</div>\r\n			<select name="f-endTime" id="f-endTime" '+(null==(__t=send?"disabled":"")?"":__t)+'>\r\n				<option selected disabled hidden value="'+(null==(__t=endTime)?"":__t)+'">'+(null==(__t=endTime)?"":__t)+'</option>\r\n				<option value="1:00">1:00</option>\r\n				<option value="2:00">2:00</option>\r\n				<option value="3:00">3:00</option>\r\n				<option value="4:00">4:00</option>\r\n				<option value="5:00">5:00</option>\r\n				<option value="6:00">6:00</option>\r\n				<option value="7:00">7:00</option>\r\n				<option value="8:00">8:00</option>\r\n				<option value="9:00">9:00</option>\r\n				<option value="10:00">10:00</option>\r\n				<option value="11:00">11:00</option>\r\n				<option value="12:00">12:00</option>\r\n			</select>\r\n		</div>\r\n		<div class="col-3 form-section select-container">\r\n			<div class="label">&nbsp;</div>\r\n			<select name="f-endAmPm" id="f-endAmPm" '+(null==(__t=send?"disabled":"")?"":__t)+'>\r\n				<option selected disabled hidden value="'+(null==(__t=endAmPm)?"":__t)+'">'+(null==(__t=endAmPm)?"":__t)+'</option>\r\n				<option value="AM">AM</option>\r\n				<option value="PM">PM</option>\r\n			</select>			\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<div class="label">Special Offer Message</div>\r\n			<textarea name="f-offerMsg" id="f-offerMsg" class="size-2" '+(null==(__t=send?"disabled":"")?"":__t)+">"+(null==(__t=offerMsg)?"":__t)+"</textarea>\r\n		</div>\r\n	</div>\r\n\r\n</div>";return __p}}),define("content/category-sections/more/floral-app-settings/views/push-edit-view",["backbone","../models/push-model","../templates/push-edit-view-tpl","jqueryval"],function(e,t,n){return e.View.extend({tagName:"div",template:n,render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.validateForm(),this.applyDates(),this.handleTimeToggle(),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick","change #f-sendTime":"handleTimeToggle"},cacheElem:function(){this.$editForm=this.$el.find("#edit-form"),this.$startDate=this.$el.find("#f-startDate"),this.$endDate=this.$el.find("#f-endDate"),this.$startRow=this.$el.find("#f-start-row"),this.$sendTime=this.$el.find("#f-sendTime"),this.$offer=this.$el.find("#f-offer"),this.$offerMsg=this.$el.find("#f-offerMsg")},closeModal:function(){this.$el.parent().dialog("close")},handleSaveBtnClick:function(){this.editForm.valid()&&(t.set({}),this.closeModal())},handleTimeToggle:function(){var e=this.$sendTime.find("option:selected").val();"Schedule future send date and time"==e?this.$startRow.removeClass("hidden"):this.$startRow.addClass("hidden")},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},validateForm:function(){this.editForm=this.$editForm.validate({rules:{"f-paypal-email-address":{required:!0,email:!0},"f-paypal-pos-account-number":{required:!0,digits:!0}}})}})}),define("content/category-sections/more/floral-app-settings/templates/push-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr>\r\n	<td class="left-align">'+(null==(__t=offer)?"":__t)+"</td>\r\n	<td>"+(null==(__t=startDate)?"":__t)+"</td>\r\n	<td>"+(null==(__t=endDate)?"":__t)+"</td>\r\n	<td>\r\n		",__p+=1==send?'\r\n			<button type="button" class="icon icon-btn icon-2x fa fa-check"></button>\r\n		':'\r\n			<button type="button" title="This push notification has already been sent out." class="icon icon-btn btn-tool-tip icon-2x"></button>\r\n		',__p+="\r\n	</td>\r\n	<td>"+(null==(__t=notified)?"":__t)+"<br>"+(null==(__t=notifyTime)?"":__t)+"</td>\r\n	<td>\r\n		",federated||(__p+="		\r\n			",__p+=send?'\r\n				<button type="button" class="icon icon-btn icon-2x icon-search"></button>\r\n			':'\r\n				<button type="button" class="icon icon-btn icon-2x icon-edit"></button>\r\n			',__p+="\r\n		"),__p+="\r\n	</td>\r\n	<td>",federated||send||(__p+='<button type="button" class="icon icon-btn icon-2x icon-trash"></button>'),__p+="</td>\r\n</tr>";return __p}}),define("content/category-sections/more/floral-app-settings/collections/push-collection",["backbone","../models/push-model"],function(e,t){var n=e.Collection.extend({model:t,url:"/mock/user-floral-app-push-notifications.json"});return new n}),define("content/category-sections/more/floral-app-settings/views/push-view",["backbone","../templates/push-view-tpl","../collections/push-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","click .icon-search":"handleEdit"},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))},handleEdit:function(){this.parent.handlePushEdit(this.model)}});return o}),define("content/category-sections/more/floral-app-settings/views/floral-app-settings-view",["jquery","backbone","../templates/floral-app-settings-view-tpl","../models/settings-model","./quick-promo-edit-view","./promo-code-edit-view","./promo-code-view","../collections/promo-collection","../models/promo-model","./push-edit-view","./push-view","../collections/push-collection","../models/push-model","global-events","jqueryui"],function(e,t,n,i,o,r,a,s,l,c,d,u,h,p){var f=t.View.extend({tagName:"form",id:"p-floral-app-settings",template:n,render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template(i.toJSON())),e.cacheElem(),e.delegateEvents(),e.applyTabs(),e.applyToolTips(),e.initModals(),s.fetchCustom().done(function(){e.addAllPromos()}),u.fetchCustom().done(function(){e.addAllPushes()})}),e},cacheElem:function(){this.$tabs=this.$el.find("#tabs"),this.$tip=this.$el.find(".tooltip-change"),this.$promoTable=this.$el.find("#promo-list"),this.$pushTable=this.$el.find("#push-list"),this.$quickPromoModal=this.$el.find("#quick-promo-modal"),this.$advPromoModal=this.$el.find("#adv-promo-modal"),this.$pushModal=this.$el.find("#push-modal"),this.$emailImg=this.$el.find("#f-emailImg-image"),this.$aboutUsImg=this.$el.find("#f-aboutUs-image")},events:{"click #save-btn":"handleSave","click #f-advanced-promo":"handleAdvancedAdd","click #f-quick-promo":"handleQuickAdd","click #f-new-push":"handlePushAdd","click .image-upload":"handleImageUpload"},handleImageUpload:function(e){var t=this,n=e.currentTarget.id;"f-image-email"===n?p.trigger("form:image-upload",{cb:function(e){t.$emailImg.prop("src",e)},active:t.$emailImg.prop("src"),name:"Floral App Settings"}):"f-image-about"===n&&p.trigger("form:image-upload",{cb:function(e){t.$aboutUsImg.prop("src",e)},active:t.$aboutUsImg.prop("src"),name:"Floral App Settings"})},applyTabs:function(){this.$tabs.tabs()},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},initModals:function(){this.$quickPromoModal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}}),this.$advPromoModal.dialog({autoOpen:!1,modal:!0,width:700,dialogClass:"adv-promo-modal",draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}}),this.$pushModal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},addPromo:function(e){var t=new a({model:e,parent:this});this.$promoTable.append(t.render().el)},addAllPromos:function(){this.$promoTable.empty(),s.each(this.addPromo,this)},addPush:function(e){var t=new d({model:e,parent:this});this.$pushTable.append(t.render().el)},addAllPushes:function(){this.$pushTable.empty(),u.each(this.addPush,this)},handlePromoEdit:function(e){this.$advPromoModal.empty();var t=new r({parent:this,model:e});this.$advPromoModal.append(t.render().el),this.$advPromoModal.dialog("open")},handlePushEdit:function(e){this.$pushModal.empty();var t=new c({parent:this,model:e});this.$pushModal.append(t.render().el),this.$pushModal.dialog("open")},handlePushAdd:function(){var e=new h;this.handlePushEdit(e)},handleQuickAdd:function(){var e=new l,t=new o({parent:this,model:e});this.$quickPromoModal.empty(),this.$quickPromoModal.append(t.render().el),this.$quickPromoModal.dialog("open")},handleAdvancedAdd:function(){var e=new l;this.handlePromoEdit(e)},handleSave:function(){i.set({emailImg:this.$emailImg.attr("src"),aboutUsImg:this.$aboutUsImg.attr("src")}),p.trigger("form:save",this.$tip)}});return new f}),define("content/category-sections/marketing-promotions/paid-membership/templates/paid-membership-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Paid Memberships</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		You can use this section to manage the Paid Membership feature of your site. You can configure the discount that your customers will receive for being members, manage the list of members, and create descriptive text content to help explain the program.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<!-- Hidden Alert Message for invalid search -->\r\n<div class="row row-spaced panel alert-panel hidden-alt" id="search-alert">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-4x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				Please enter search criteria into at least one of the below fields in order to look up membership information.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n	    <div id="tabs">\r\n			<ul class="clearfix">\r\n			<li class="col-6"><a class="center-align fill-container-width" href="#programsettings">Program Settings</a></li>\r\n			<li class="col-6"><a class="center-align fill-container-width" href="#memberstab">Program Members</a></li>\r\n			</ul>\r\n\r\n			<!-- Start of programsettings Tab -->\r\n			<div id="programsettings">\r\n\r\n				<div id="settings-content">\r\n					\r\n					<div id="settings-content">\r\n						<div class="row row-spaced">\r\n							<div class="col-3 form-section">\r\n								<div class="label">Program Status</div>\r\n								<input '+(null==(__t=status?"checked":"")?"":__t)+' type="checkbox" id="f-status" name="f-status" class="on-off-switch" />\r\n								<label for="f-status" class="on-off-switch-label">\r\n								<div class="on-off-switch-state">on</div>\r\n								</label>\r\n							</div>\r\n							<div class="col-4 form-section">\r\n								<label for="f-programName">Program Name</label><i class="icon icon-tool-tip x-space-s" title="This is the unique name of your paid membership program."></i>\r\n								<input type="text" id="f-programName" name="f-programName" value="'+(null==(__t=programName)?"":__t)+'">\r\n							</div>	\r\n						</div>\r\n\r\n						<div class="row row-spaced form-section">\r\n							<div class="col-4">\r\n								<div class="label">Discount <i class="icon icon-tool-tip x-space-s" title="This is the discount your members will receive when ordering from your site."></i></div>\r\n								<div class="select-container">\r\n									<select id="f-markupMarkdown" name="f-markupMarkdown">\r\n										<option selected disabled hidden value="'+(null==(__t=discountOptions)?"":__t)+'">'+(null==(__t=discountOptions)?"":__t)+'</option>\r\n										<option value="$5">$5</option>\r\n										<option value="$10">$10</option>\r\n										<option value="$20">$20</option>\r\n										<option value="10%">10%</option>\r\n										<option value="20%">20%</option>\r\n										<option value="Free Delivery">Free Delivery</option>\r\n									</select>\r\n								</div>\r\n							</div>\r\n						</div>\r\n\r\n						<div class="row row-spaced">\r\n							<div id="tiny-mce-container-faq" class="col-12 form-section">\r\n								<label for="section-description">FAQ Content</label><i title="This is a descriptive text area that you can use to help answer questions your customers may have about the membership program." class="icon icon-tool-tip x-space-s"></i>\r\n								<textarea name="section-descriptionOne" id="section-descriptionOne" class="tinymce">'+(null==(__t=faqContent)?"":__t)+'</textarea>\r\n							</div>\r\n						</div>\r\n\r\n						<div class="row row-spaced">\r\n							<div id="tiny-mce-container-legal" class="col-12 form-section">\r\n								<label for="section-description">Legal Content</label><i title="This descriptive text area can be used to elaborate on the fine print legal info for the program." class="icon icon-tool-tip x-space-s"></i>\r\n								<textarea name="section-descriptionTwo" id="section-descriptionTwo" class="tinymce">'+(null==(__t=legalContent)?"":__t)+'</textarea>\r\n							</div>\r\n						</div>\r\n\r\n						<div class="row row-spaced">\r\n							<div id="tiny-mce-container-myaccounts" class="col-12 form-section">\r\n								<label for="section-description">Membership Page Description</label><i title="This text is displayed on the membership page." class="icon icon-tool-tip x-space-s"></i>\r\n								<textarea name="section-descriptionThree" id="section-descriptionThree" class="tinymce">'+(null==(__t=accountContent)?"":__t)+'</textarea>\r\n							</div>\r\n						</div>\r\n\r\n						<div class="row row-spaced">\r\n							<div id="tiny-mce-container-myaccounts" class="col-12 form-section">\r\n								<label for="section-description">Membership Signup Description</label><i title="This descriptive text area is displayed when your customers wish to sign up for the membership program." class="icon icon-tool-tip x-space-s"></i>\r\n								<textarea name="section-descriptionFour" id="section-descriptionFour" class="tinymce">'+(null==(__t=accountSignupContent)?"":__t)+'</textarea>\r\n							</div>\r\n						</div>\r\n\r\n					</div>					\r\n\r\n				</div>\r\n\r\n			</div><!-- End of Account Tab -->\r\n			\r\n	        <!-- Start of memberstab Tab -->\r\n			<div id="memberstab">\r\n\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="panel-title">Search</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-4">\r\n						<div class="search-container">\r\n							<input type="text" id="firstNameSearch" name="firstNameSearch" placeholder="Search by First Name"> \r\n						</div>\r\n					</div>\r\n\r\n					<div class="col-4">\r\n						<div class="search-container">\r\n							<input type="text" id="lastNameSearch" name="lastNameSearch" placeholder="Search by Last Name">\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced form-section">\r\n					<div class="col-8">\r\n						<div class="search-container">\r\n							<input type="text" id="emailSearch" name="emailSearch" placeholder="Search by Email">\r\n						</div>\r\n					</div>\r\n\r\n					<div class="col-3 pull-right buttonwithlabel">\r\n						<button type="button" id="search-btn" class="btn btn-submit">SEARCH</button>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="search-results">\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<div class="panel-title">Member Account Information</div>\r\n						</div>\r\n					</div>\r\n\r\n					<!-- Start of Rewards Table -->\r\n					<div class="row row-spaced">\r\n						<div class="col-12">\r\n							<table id="member-table" class="table alternate">\r\n								<thead>\r\n									<tr>\r\n										<th class="th-3-20 left-align">First Name <i class="icon left-offset-xs"></i></th>\r\n										<th class="th-3-20 left-align">Last Name<i class="icon left-offset-xs"></i></th>\r\n										<th class="th-2-20 left-align">Email Address <i class="icon left-offset-xs"></i></th>\r\n										<th class="th-2-20 left-align">Status<i class="icon left-offset-xs"></i></th>\r\n									</tr>\r\n								</thead>\r\n								<tbody id="member-list"></tbody>\r\n							</table>\r\n						</div>\r\n					</div>\r\n					<!-- End of members Table -->\r\n\r\n					<div class="row">\r\n						<div class="col-12">\r\n							<div class="panel-title">Download Account Data</div>\r\n						</div>\r\n					</div>\r\n					<div class="row row-spaced">\r\n						<div class="col-3">\r\n							<button type="button" id="download-btn" class="btn btn-submit">Export csv</button>\r\n						</div>\r\n					</div>\r\n\r\n				</div><!-- end of search-results -->\r\n			</div><!-- End of Settings Tab -->\r\n\r\n	    </div><!-- End of Tabs Section -->\r\n	</div><!-- end of col-12 -->\r\n</div><!-- end of row -->\r\n';
return __p}}),define("content/category-sections/marketing-promotions/paid-membership/models/setting-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-paid-membership-settings.json",defaults:{id:null,status:!0,programName:"",discountOptions:"",faqContent:"",legalContent:"",accountContent:"",accountSignupContent:""}});return new t}),define("content/category-sections/marketing-promotions/paid-membership/models/member-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,firstName:"",lastName:"",emailAddress:"",memberstatus:!0}});return t}),define("content/category-sections/marketing-promotions/paid-membership/collections/member-collection",["backbone","../models/member-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-paid-membership.json",model:t});return new n}),define("content/category-sections/marketing-promotions/paid-membership/templates/member-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td class="left-align">'+(null==(__t=firstName)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=lastName)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=emailAddress)?"":__t)+'</td>\r\n	<td class="left-align">\r\n		<div class="centered-content-container">\r\n            <input '+(null==(__t=memberstatus?"checked":"")?"":__t)+' type="checkbox" class="on-off-switch" id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch" />\r\n            <label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n        </div>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/marketing-promotions/paid-membership/views/member-view",["backbone","../templates/member-view-tpl","../collections/member-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.collection=e.collection,this.setElement(this.template(this.model.toJSON()))},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"change input.on-off-switch":"toggleActive"},cacheElem:function(){this.$status=this.$el.find("status-"+this.model.get("id")),this.$onOffSwitch=this.$el.find(".on-off-switch")},toggleActive:function(){this.model.set({galleryStatus:this.$onOffSwitch.is(":checked")}),i.trigger("form:editing")}});return o}),define("content/category-sections/marketing-promotions/paid-membership/views/paid-membership-home-view",["backbone","../templates/paid-membership-home-view-tpl","../models/setting-model","../models/member-model","../collections/member-collection","./member-view","global-events","datatables","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"f-paid-memberships-page",template:t,initialize:function(){var e=this;$.fn.dataTable.ext.search.push(function(t,n,i){if("member-table"!==t.nTable.id)return!0;if(!e.collection)return!0;var n=e.collection.toJSON()[i];return n})},render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyTabs(),e.dataTable&&e.dataTable.destroy(),o.fetchCustom().done(function(){e.mcollection=o.deepClone(),e.addAllMembers(e.mcollection),e.applyDataTables()}),e.validate(),e.applyToolTips()}.bind(this)),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #search-btn":"handleSearch"},cacheElem:function(){this.$memberList=this.$el.find("#member-list"),this.$memberTable=this.$el.find("#member-table"),this.$firstNameSearch=this.$el.find("#firstNameSearch"),this.$lastNameSearch=this.$el.find("#lastNameSearch"),this.$emailSearch=this.$el.find("#emailSearch"),this.$SettingsContent=this.$el.find("#settings-content"),this.$tip=this.$el.find(".tooltip-change"),this.$searchResults=this.$el.find(".search-results"),this.$searchAlert=this.$el.find("#search-alert")},showError:function(){this.$searchAlert.fadeIn(1e3)},hideError:function(){this.$searchAlert.fadeOut(1e3)},handleSave:function(){this.$el.valid()?a.trigger("form:save",this.$tip):a.trigger("form:invalid",this.$tip)},handleCancel:function(){a.trigger("form:reset",this.render.bind(this))},addMember:function(e){var t=new r({model:e,parent:this});this.$memberList.append(t.render().el)},addAllMembers:function(){var e=this;this.$memberList.empty(),this.$searchResults.addClass("hidden"),e.mcollection.each(this.addMember,this)},addSettingsContent:function(e){var t=new SettingView({model:new SettingModel,collection:e,parent:this,template:SettingsTpl});this.$SettingsContent.append(t.render().el)},applyDataTables:function(){this.dataTable=this.$memberTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!0,processing:!1,searching:!0,serverSide:!1,stateSave:!1,bDestroy:!0,columns:[{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0}],order:[],columnDefs:[{orderable:!1,targets:0}],info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},applyTabs:function(){this.$el.find("#tabs").tabs()},handleSearch:function(){var e=this;this.$searchResults.addClass("hidden");var t=this.$firstNameSearch.val(),n=this.$lastNameSearch.val(),i=this.$emailSearch.val();t.length>0||n.length>0||i.length>0?this.$searchResults.removeClass("hidden"):(e.showError(),setTimeout(function(){e.hideError()},7e3))},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validate:function(){this.$el.validate({rules:{"f-programName":{required:!0},"section-descriptionThree":{required:!0},"section-descriptionFour":{required:!0}}})}});return new s}),define("content/category-sections/marketing-promotions/paid-membership/views/paid-membership-view",["backbone","./paid-membership-home-view","global-events","jqueryui"],function(e,t){var n=e.View.extend({tagName:"div",initialize:function(){},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(){}});return new n}),define("content/category-sections/seo/footer-management/models/footer-management-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-footer-management.json",defaults:{address1:"",address2:"",customFooterText:"",addressDisplay:"Display Address",customAddress:"",emailSignup:!0,tfLogo:!0,shopInfoLinks:!0,featuredOccasionLinks:!0,customerServiceLinks:!0}});return new t}),define("content/category-sections/seo/footer-management/templates/footer-management-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="create-edit-form" name="create-edit-form">\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Site Footer</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Make changes to the content of your website footer, or completely rewrite it. The choice is yours!\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Custom Footer Text</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<textarea name="f-custom-footer-text" id="f-custom-footer-text" class="size-3 tinymce">'+(null==(__t=customFooterText)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Footer Settings</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="select-container form-section col-6">\r\n			<label for="f-footer-display-address">Display Address In Footer</label><i class="icon icon-tool-tip x-space-s" title="Use this to select how your address will be displayed."></i>\r\n			<select id="f-footer-display-address">\r\n				<option selected disabled hidden value="'+(null==(__t=addressDisplay)?"":__t)+'">'+(null==(__t=addressDisplay)?"":__t)+'</option>\r\n				<option value="Display Address">Display Address</option>\r\n				<option value="Custom">Custom</option>\r\n				<option value="Don\'t Display Address">Don\'t Display Address</option>\r\n			</select>\r\n		</div>\r\n\r\n		<div class="col-12 '+(null==(__t="Don't Display Address"===addressDisplay?"hidden-alt":"")?"":__t)+' form-section" id="f-custom-footer-address-wrap">\r\n		   <label for="f-custom-footer-address">Override Address Field</label><i class="icon icon-tool-tip x-space-s" title="Do you have more than one location? Or need to edit your address? Set the choice above to custom, and put your address here."></i>\r\n			\r\n\r\n	   <textarea '+(null==(__t="Display Address"===addressDisplay?"disabled":"")?"":__t)+' name="f-custom-footer-address" id="f-custom-footer-address" class="size-3">'+(null==(__t="Display Address"===addressDisplay?address1+"\r\n"+address2:"")?"":__t)+'</textarea>\r\n\r\n\r\n	   </div>\r\n\r\n	    <div id="customAddressDiv" class="col-12 form-section '+(null==(__t="Don't Display Address"===addressDisplay?"hidden-alt":"")?"":__t)+' hidden" >\r\n	       <label for="f-custom-val">Override Address Field</label><i class="icon icon-tool-tip x-space-s" title="Do you have more than one location? Or need to edit your address? Set the choice above to custom, and put your address here."></i>\r\n\r\n			<textarea name="f-custom-val" id="f-custom-val" class="size-3">'+(null==(__t=customAddress)?"":__t)+'</textarea>\r\n			\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-4 form-section">\r\n			<div class="label pull-left">Display Email Sign-up</div><i class="icon icon-tool-tip x-space-s" title="This allows your customers to sign up for email marketing campaigns, which can bring you extra orders. We recommend leaving this turned on."></i>\r\n			<input '+(null==(__t=emailSignup?"checked":"")?"":__t)+' type="checkbox" id="f-footer-email" name="f-footer-email" class="switch on-off-switch">\r\n			<label for="f-footer-email" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>\r\n        </div>\r\n        <div class="col-8 form-section">\r\n			<div class="label pull-left">Display "Proud Member" Logo</div><i class="icon icon-tool-tip x-space-s" title="This lets your customers know that you are a Teleflora Member. We recommend leaving this turned on."></i>\r\n			<input '+(null==(__t=tfLogo?"checked":"")?"":__t)+' type="checkbox" id="f-footer-tf-logo" name="f-footer-tf-logo" class="switch on-off-switch">\r\n			<label for="f-footer-tf-logo" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Footer Links</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-4">\r\n			<div class="label pull-left">Shop Info Links</div><i class="icon icon-tool-tip x-space-s" title="Turning on this setting will display the \'Learn More About\' links - About Us, Safe Shopping, Privacy/Delivery/Substitution Policies, and Site Map."></i>\r\n			<input '+(null==(__t=shopInfoLinks?"checked":"")?"":__t)+' type="checkbox" id="f-shopInfoLinks" name="f-shopInfoLinks" class="switch on-off-switch">\r\n			<label for="f-shopInfoLinks" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>\r\n		</div>\r\n		<div class="col-4">\r\n			<div class="label pull-left">Featured Occasions</div><i class="icon icon-tool-tip x-space-s" title="Turning on this setting will display the Featured Occasion links in your site footer. These come from the first 5 active Occasions in your site navigation."></i>\r\n			<input '+(null==(__t=featuredOccasionLinks?"checked":"")?"":__t)+' type="checkbox" id="f-featuredOccasionLinks" name="f-featuredOccasionLinks" class="switch on-off-switch">\r\n			<label for="f-featuredOccasionLinks" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>\r\n		</div>\r\n		<div class="col-4">\r\n			<div class="label pull-left">Customer Service Links</div><i class="icon icon-tool-tip x-space-s" title="Turning on this setting will display the \'Cusomter Service\' links in your site footer - Contact Us and Help/FAQs."></i>\r\n			<input '+(null==(__t=customerServiceLinks?"checked":"")?"":__t)+' type="checkbox" id="f-customerServiceLinks" name="f-customerServiceLinks" class="switch on-off-switch">\r\n			<label for="f-customerServiceLinks" class="on-off-switch-label"><div class="on-off-switch-state">on</div></label>\r\n		</div>		\r\n    </div>\r\n\r\n</div>\r\n\r\n</form>';return __p}}),define("text!content/category-sections/container/category-section-tpl.html",[],function(){return'<div class="row">\r\n	<section class="no-mobile col-d-3" id="side-menu"></section>	\r\n	<section class="col-12 col-d-9" id="section"></section>	\r\n</div>'}),define("content/category-sections/container/category-section-view",["backbone","text!./category-section-tpl.html"],function(e,t){var n=e.View.extend({template:t,initialize:function(){this.setElement(this.template),this.cacheElem()},render:function(){return this.cacheElem(),this.$menu.empty(),this.regions.menu=null,this.$section.empty(),this.regions.section=null,this},regions:{menu:null,section:null},cacheElem:function(){this.$menu=this.$el.find("#side-menu"),this.$section=this.$el.find("#section"),this.$windowRef=$(window)},changeMenu:function(t){var n;this.regions.menu!==t&&(this.regions.menu=t,this.$menu.html(t.render().$el.fadeIn(200))),this.$menu.find(".selected").removeClass("selected"),n=e.history.fragment&&e.history.fragment.split("/").slice(0,2).join("/"),this.$menu.find('a[href*="'+n+'"]').addClass("selected")},changeSection:function(e){this.cleanDOM(),this.regions.section!==e?(this.regions.section=e,this.$section.html(e.render().$el.fadeIn(200).focus())):e.render(),this.$windowRef.scrollTop(0)},cleanDOM:function(){$(".ui-helper-hidden-accessible").remove()}});return new n}),define("content/category-sections/seo/footer-management/views/footer-management-view",["underscore","backbone","../models/footer-management-model","../templates/footer-management-tpl","content/category-sections/container/category-section-view","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=t.View.extend({template:i,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyToolTips(),e.applyTinymce(),e.validateForm()}),e},cacheElem:function(){this.$createEditForm=this.$el.find("#create-edit-form"),this.$overrideSection=this.$el.find("#f-custom-footer-address-wrap"),this.$CustomoverrideSection=this.$el.find("#customAddressDiv"),this.$overrideText=this.$el.find("#f-custom-footer-address"),this.$footerDisplayAddress=this.$el.find("#f-footer-display-address"),this.$emailSignupActive=this.$el.find("#f-footer-email"),this.$tip=this.$el.find(".tooltip-change")},events:{"change #f-footer-display-address":"handleFooterDisplayAddressChange","click #save-btn":"handleSave"},handleFooterDisplayAddressChange:function(e){switch(e.target.value){case"Display Address":$("#customAddressDiv").addClass("hidden"),$("#f-custom-footer-address-wrap").removeClass("hidden"),this.$overrideText.val(n.get("address1")+"\r\n"+n.get("address2")),this.$overrideText.attr("disabled",!0),this.$overrideSection.fadeIn(200);break;case"Custom":$("#f-custom-footer-address-wrap").addClass("hidden"),$("#customAddressDiv").removeClass("hidden"),this.$CustomoverrideSection.fadeIn(200);break;case"Don't Display Address":$("#f-custom-footer-address-wrap").removeClass("hidden"),$("#customAddressDiv").addClass("hidden"),this.$overrideSection.fadeOut(200)}},applyTinymce:function(){setTimeout(function(){a.remove(),a.init({setup:function(e){e.on("change",function(){r.trigger("form:editing")})},selector:"textarea.tinymce",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",plugins:["code"],force_br_newlines:!0,force_p_newlines:!1})},0)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleSave:function(){this.$createEditForm.valid()?(n.set({customFooterText:a.activeEditor.getContent(),addressDisplay:this.$footerDisplayAddress.find("option:selected").val(),emailSignup:this.$emailSignupActive.is(":checked")}),"Custom"===n.get("addressDisplay")&&n.set({customAddress:$("#f-custom-val").val().trim()}),r.trigger("form:save",this.$tip)):r.trigger("form:invalid",this.$tip)},validateForm:function(){var e=this;e.validator=e.$createEditForm.validate({rules:{"f-custom-val":"required"}})}});return new s}),define("content/category-sections/seo/site-meta/models/site-meta-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-site-meta.json",defaults:{homeTitle:"",homeDesc:"",homeKwords:"",homeTags:"",aboutTitle:"",aboutDesc:"",aboutKwords:"",aboutTags:"",catTitle:"",catDesc:"",catKwords:"",catTags:"",prodTitle:"",prodDesc:"",prodKwords:"",prodTags:"",helpTitle:"",helpDesc:"",helpKwords:"",helpTags:""}});return new t}),define("content/category-sections/seo/site-meta/templates/site-meta-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Sitewide Meta Tags</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n      <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		We have default meta data set up for you, but if you would like to make changes, you can make those changes on this page.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<div class="col-12">\r\n		<div class="label">Use default meta info<i title="If this setting is turned ON, your site will use all of the eFlorist default meta data. If it is turned OFF, you can use the fields below to specify individual meta info for different types of pages." class="icon icon-tool-tip x-space-s"></i></div>\r\n		<input '+(null==(__t=defaultInfoActive?"checked":"")?"":__t)+' type="checkbox" id="f-defaultInfoActive" name="f-defaultInfoActive" class="on-off-switch" />\r\n		<label for="f-defaultInfoActive" class="on-off-switch-label">\r\n		    <div class="on-off-switch-state">on</div>\r\n		</label>\r\n	</div>\r\n</div>\r\n\r\n<!--// Section 1 - Home Page Meta [Start] //-->\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Home Page</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-homeTitle">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the short description in the very top of your window that tells the name of the page you are on. You should set this to something like \'Anniversary Flowers | XYZ Flower Shop\'"></i>\r\n			<input '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' type="text" class="f-meta-title" id="f-homeTitle" name="f-homeTitle" value="'+(null==(__t=defaultInfoActive?homeTitle:homeTitleCustom)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-homeDesc">Meta Description</label><i class="icon icon-tool-tip x-space-s" title="These are just a few short keywords that tell the search engines what your category is about. Don\'t use too many, or it can actually hurt your ranking. Best practice is to use four keywords or less. You can use things like, \'flowers in city name\', \'get well flowers\', or \'hospital delivery.\'"></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' class="f-meta-desc size-2" name="f-homeDesc" id="f-homeDesc">'+(null==(__t=defaultInfoActive?homeDesc:homeDescCustom)?"":__t)+'</textarea>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-homeKwords">Keywords</label><i class="icon icon-tool-tip x-space-s" title="When coming from a search engine, this is the first thing a customer will see, so make it count! Has your designer won floral awards? This is the place to let customers know."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' name="f-homeKwords" id="f-homeKwords" class="size-2">'+(null==(__t=defaultInfoActive?homeKwords:homeKwordsCustom)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-homeTags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="Need to place a few extra tags in your page header? You can do that here."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' id="f-homeTags" name="f-homeTags">'+(null==(__t=defaultInfoActive?homeTags:homeTagsCustom)?"":__t)+'</textarea>\r\n			<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Section 1 - Home Page Meta [Stop] //-->\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">About Us Page</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-aboutTitle">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the short description in the very top of your window that tells the name of the page you are on. You should set this to something like \'Anniversary Flowers | XYZ Flower Shop\'"></i>\r\n			<input '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' type="text" class="f-meta-title" id="f-aboutTitle" name="f-aboutTitle" value="'+(null==(__t=defaultInfoActive?aboutTitle:aboutTitleCustom)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-aboutDesc">Meta Description</label><i class="icon icon-tool-tip x-space-s" title="When coming from a search engine, this is the first thing a customer will see, so make it count! Has your designer won floral awards? This is the place to let customers know."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' class="f-meta-desc size-2" name="f-aboutDesc" id="f-aboutDesc">'+(null==(__t=defaultInfoActive?aboutDesc:aboutDescCustom)?"":__t)+'</textarea>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-aboutKwords">Keywords</label><i class="icon icon-tool-tip x-space-s" title="These are just a few short keywords that tell the search engines what your category is about. Don\'t use too many, or it can actually hurt your ranking. Best practice is to use four keywords or less. You can use things like, \'flowers in city name\', \'get well flowers\', or \'hospital delivery.\'"></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' name="f-aboutKwords" id="f-aboutKwords" class="f-meta-keywords size-2">'+(null==(__t=defaultInfoActive?aboutKwords:aboutKwordsCustom)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-aboutTags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="Need to place a few extra tags in your page header? You can do that here."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' id="f-aboutTags" name="f-aboutTags">'+(null==(__t=defaultInfoActive?aboutTags:aboutTagsCustom)?"":__t)+'</textarea>\r\n			<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Category Pages</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-catTitle">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the short description in the very top of your window that tells the name of the page you are on. You should set this to something like \'Anniversary Flowers | XYZ Flower Shop\'"></i>\r\n			<input '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' type="text" id="f-catTitle" class="f-meta-title" name="f-catTitle" value="'+(null==(__t=defaultInfoActive?catTitle:catTitleCustom)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-catDesc">Meta Description</label><i class="icon icon-tool-tip x-space-s" title="When coming from a search engine, this is the first thing a customer will see, so make it count! Has your designer won floral awards? This is the place to let customers know."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' class="f-meta-desc size-2" name="f-catDesc" id="f-catDesc">'+(null==(__t=defaultInfoActive?catDesc:catDescCustom)?"":__t)+'</textarea>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-catKwords">Keywords</label><i class="icon icon-tool-tip x-space-s" title="These are just a few short keywords that tell the search engines what your category is about. Don\'t use too many, or it can actually hurt your ranking. Best practice is to use four keywords or less. You can use things like, \'flowers in city name\', \'get well flowers\', or \'hospital delivery.\'"></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' name="f-catKwords" id="f-catKwords" class="f-meta-keywords size-2">'+(null==(__t=defaultInfoActive?catKwords:catKwordsCustom)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-catTags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="Need to place a few extra tags in your page header? You can do that here."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' id="f-catTags" name="f-catTags">'+(null==(__t=defaultInfoActive?catTags:catTagsCustom)?"":__t)+'</textarea>\r\n			<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Product Pages</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-prodTitle">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the short description in the very top of your window that tells the name of the page you are on. You should set this to something like \'Anniversary Flowers | XYZ Flower Shop\'"></i>\r\n			<input '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' type="text" class="f-meta-title" id="f-prodTitle" name="f-prodTitle" value="'+(null==(__t=defaultInfoActive?prodTitle:prodTitleCustom)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-prodDesc">Meta Description</label><i class="icon icon-tool-tip x-space-s" title="When coming from a search engine, this is the first thing a customer will see, so make it count! Has your designer won floral awards? This is the place to let customers know."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' class="f-meta-desc size-2" name="f-prodDesc" id="f-prodDesc">'+(null==(__t=defaultInfoActive?prodDesc:prodDescCustom)?"":__t)+'</textarea>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-prodKwords">Keywords</label><i class="icon icon-tool-tip x-space-s" title="These are just a few short keywords that tell the search engines what your category is about. Don\'t use too many, or it can actually hurt your ranking. Best practice is to use four keywords or less. You can use things like, \'flowers in city name\', \'get well flowers\', or \'hospital delivery.\'"></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' name="f-prodKwords" id="f-prodKwords" class="f-meta-keywords size-2">'+(null==(__t=defaultInfoActive?prodKwords:prodKwordsCustom)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-prodTags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="Need to place a few extra tags in your page header? You can do that here."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' id="f-prodTags" name="f-prodTags">'+(null==(__t=defaultInfoActive?prodTags:prodTagsCustom)?"":__t)+'</textarea>\r\n			<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Help Page</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-helpTitle">Page &#60;title&#62;</label><i class="icon icon-tool-tip x-space-s" title="This is the short description in the very top of your window that tells the name of the page you are on. You should set this to something like \'Anniversary Flowers | XYZ Flower Shop\'"></i>\r\n			<input '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' type="text" class="f-meta-title" id="f-helpTitle" name="f-helpTitle" value="'+(null==(__t=defaultInfoActive?helpTitle:helpTitleCustom)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-helpDesc">Meta Description</label><i class="icon icon-tool-tip x-space-s" title="When coming from a search engine, this is the first thing a customer will see, so make it count! Has your designer won floral awards? This is the place to let customers know."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' class="f-meta-desc size-2" name="f-helpDesc" id="f-helpDesc">'+(null==(__t=defaultInfoActive?helpDesc:helpDescCustom)?"":__t)+'</textarea>\r\n		</div>\r\n\r\n		<div class="col-6 form-section">\r\n			<label for="f-helpKwords">Keywords</label><i class="icon icon-tool-tip x-space-s" title="These are just a few short keywords that tell the search engines what your category is about. Don\'t use too many, or it can actually hurt your ranking. Best practice is to use four keywords or less. You can use things like, \'flowers in city name\', \'get well flowers\', or \'hospital delivery.\'"></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' name="f-helpKwords" id="f-helpKwords" class="f-meta-keywords size-2">'+(null==(__t=defaultInfoActive?helpKwords:helpKwordsCustom)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<label for="f-helpTags">Additional Tags</label><i class="icon icon-tool-tip x-space-s" title="Need to place a few extra tags in your page header? You can do that here."></i>\r\n			<textarea '+(null==(__t=defaultInfoActive?"disabled":"")?"":__t)+' id="f-helpTags" name="f-helpTags">'+(null==(__t=defaultInfoActive?helpTags:helpTagsCustom)?"":__t)+'</textarea>\r\n			<div class="row"><div class="col-12">Please include the full HTML (such as &lt;meta&gt;) in the Additional Tags field.</div></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n';
return __p}}),define("content/category-sections/seo/site-meta/views/site-meta-view",["underscore","backbone","../models/site-meta-model","../templates/site-meta-tpl","global-events"],function(e,t,n,i,o){var r=t.View.extend({tagName:"form",id:"p-site-meta",template:i,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.validate(),e.applyToolTips()}),this},events:{"click #save-btn":"handleSave","change #f-defaultInfoActive":"handleToggle"},cacheElem:function(){this.$homeTitle=this.$el.find("#f-homeTitle"),this.$homeDesc=this.$el.find("#f-homeDesc"),this.$homeKwords=this.$el.find("#f-homeKwords"),this.$homeTags=this.$el.find("#f-homeTags"),this.$aboutTitle=this.$el.find("#f-aboutTitle"),this.$aboutDesc=this.$el.find("#f-aboutDesc"),this.$aboutKwords=this.$el.find("#f-aboutKwords"),this.$aboutTags=this.$el.find("#f-aboutTags"),this.$catTitle=this.$el.find("#f-catTitle"),this.$catDesc=this.$el.find("#f-catDesc"),this.$catKwords=this.$el.find("#f-catKwords"),this.$catTags=this.$el.find("#f-catTags"),this.$prodTitle=this.$el.find("#f-prodTitle"),this.$prodDesc=this.$el.find("#f-prodDesc"),this.$prodKwords=this.$el.find("#f-prodKwords"),this.$prodTags=this.$el.find("#f-prodTags"),this.$helpTitle=this.$el.find("#f-helpTitle"),this.$helpDesc=this.$el.find("#f-helpDesc"),this.$helpKwords=this.$el.find("#f-helpKwords"),this.$helpTags=this.$el.find("#f-helpTags"),this.$defaultInfoActive=this.$el.find("#f-defaultInfoActive"),this.$tip=this.$el.find(".tooltip-change")},handleToggle:function(){var e=this;o.trigger("form:editing"),e.$defaultInfoActive.is(":checked")?(e.$defaultInfoActive.prop("checked",!1),o.trigger("form:reset",function(){e.$defaultInfoActive.prop("checked",!0),e.$homeTitle.prop("disabled",!0).val(n.get("homeTitle")),e.$homeDesc.prop("disabled",!0).val(n.get("homeDesc")),e.$homeKwords.prop("disabled",!0).val(n.get("homeKwords")),e.$homeTags.prop("disabled",!0).val(n.get("homeTags")),e.$aboutTitle.prop("disabled",!0).val(n.get("aboutTitle")),e.$aboutDesc.prop("disabled",!0).val(n.get("aboutDesc")),e.$aboutKwords.prop("disabled",!0).val(n.get("aboutKwords")),e.$aboutTags.prop("disabled",!0).val(n.get("aboutTags")),e.$catTitle.prop("disabled",!0).val(n.get("catTitle")),e.$catDesc.prop("disabled",!0).val(n.get("catDesc")),e.$catKwords.prop("disabled",!0).val(n.get("catKwords")),e.$catTags.prop("disabled",!0).val(n.get("catTags")),e.$prodTitle.prop("disabled",!0).val(n.get("prodTitle")),e.$prodDesc.prop("disabled",!0).val(n.get("prodDesc")),e.$prodKwords.prop("disabled",!0).val(n.get("prodKwords")),e.$prodTags.prop("disabled",!0).val(n.get("prodTags")),e.$helpTitle.prop("disabled",!0).val(n.get("helpTitle")),e.$helpDesc.prop("disabled",!0).val(n.get("helpDesc")),e.$helpKwords.prop("disabled",!0).val(n.get("helpKwords")),e.$helpTags.prop("disabled",!0).val(n.get("helpTags"))})):(this.$homeTitle.prop("disabled",!1),this.$homeDesc.prop("disabled",!1),this.$homeKwords.prop("disabled",!1),this.$homeTags.prop("disabled",!1),this.$aboutTitle.prop("disabled",!1),this.$aboutDesc.prop("disabled",!1),this.$aboutKwords.prop("disabled",!1),this.$aboutTags.prop("disabled",!1),this.$catTitle.prop("disabled",!1),this.$catDesc.prop("disabled",!1),this.$catKwords.prop("disabled",!1),this.$catTags.prop("disabled",!1),this.$prodTitle.prop("disabled",!1),this.$prodDesc.prop("disabled",!1),this.$prodKwords.prop("disabled",!1),this.$prodTags.prop("disabled",!1),this.$helpTitle.prop("disabled",!1),this.$helpDesc.prop("disabled",!1),this.$helpKwords.prop("disabled",!1),this.$helpTags.prop("disabled",!1))},handleSave:function(){n.set({defaultInfoActive:this.$defaultInfoActive.is(":checked")}),n.set(n.get("defaultInfoActive")?{homeTitleCustom:"",homeDescCustom:"",homeKwordsCustom:"",homeTagsCustom:"",aboutTitleCustom:"",aboutDescCustom:"",aboutKwordsCustom:"",aboutTagsCustom:"",catTitleCustom:"",catDescCustom:"",catKwordsCustom:"",catTagsCustom:"",prodTitleCustom:"",prodDescCustom:"",prodKwordsCustom:"",prodTagsCustom:"",helpTitleCustom:"",helpDescCustom:"",helpKwordsCustom:"",helpTagsCustom:""}:{homeTitleCustom:this.$homeTitle.val().trim(),homeDescCustom:this.$homeDesc.val().trim(),homeKwordsCustom:this.$homeKwords.val().trim(),homeTagsCustom:this.$homeTags.val().trim(),aboutTitleCustom:this.$aboutTitle.val().trim(),aboutDescCustom:this.$aboutDesc.val().trim(),aboutKwordsCustom:this.$aboutKwords.val().trim(),aboutTagsCustom:this.$aboutTags.val().trim(),catTitleCustom:this.$catTitle.val().trim(),catDescCustom:this.$catDesc.val().trim(),catKwordsCustom:this.$catKwords.val().trim(),catTagsCustom:this.$catTags.val().trim(),prodTitleCustom:this.$prodTitle.val().trim(),prodDescCustom:this.$prodDesc.val().trim(),prodKwordsCustom:this.$prodKwords.val().trim(),prodTagsCustom:this.$prodTags.val().trim(),helpTitleCustom:this.$helpTitle.val().trim(),helpDescCustom:this.$helpDesc.val().trim(),helpKwordsCustom:this.$helpKwords.val().trim(),helpTagsCustom:this.$helpTags.val().trim()}),o.trigger("form:save",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validate:function(){this.$el.validate(),jQuery.validator.addClassRules({"f-meta-title":{noCarets:!0},"f-meta-desc":{noCarets:!0},"f-meta-keywords":{noCarets:!0}})}});return new r}),define("content/category-sections/seo/url-management/templates/create-Edit-301PermanentRedirect-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="create-edit-301-PermanentRedirect-form" name="create-edit-301-PermanentRedirect-form" class="form-section"> \r\n    <div class="row row-spaced panel x-space-s">\r\n        <div class="row row-spaced">\r\n            <div class="col-12">\r\n                <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n                <button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right"> Save</button>\r\n                ',id&&(__p+='  <button type="button" id="delete-btn" class="btn btn-cancel btn-panel pull-right ">Delete</button> '),__p+='\r\n                <button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n                <div class="panel-title y-space-top-l">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'301 Permanent URL Redirect</div>\r\n            </div>\r\n        </div>\r\n        <!-- Hidden Alert Message -->\r\n        <div class="row panel alert-panel">\r\n            <div class="col-12">\r\n                <div class="row">\r\n                    <div class="col-1">\r\n                        <div class="icon icon-3x icon-warning"></div>\r\n                    </div>\r\n                    <div class="col-11 alert-text">\r\n                        This is a generic placeholder for error messages in eSAT. <br>\r\n                        In the live app, this will be a real message and will be hidden by default.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- Hidden Alert Message -->\r\n        <div class="row row-spaced y-space-s"> \r\n            <div class="col-12 form-section">\r\n                <label for="f-old-url">Old Url</label><i title="This is the old address. When a user hits this URL, they will be redirected to the URL specified under Redirect To." class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="f-old-url" name="f-old-url" value="'+(null==(__t=oldUrl)?"":__t)+'"/>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced y-space-s">\r\n            <div class="col-12 form-section">\r\n                <label for="f-301-Permanent-Redirect">Redirect To</label><i title="This is the new URL. The 301 redirect will take your customers here." class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="f-301-Permanent-Redirect" name="f-301-Permanent-Redirect" value="'+(null==(__t=PermanentRedirectToURL)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n';return __p}}),define("content/category-sections/seo/url-management/models/UrlManagement-301PermanentRedirects-Model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,oldUrl:"",PermanentRedirectToURL:""}});return t}),define("content/category-sections/seo/url-management/collections/UrlManagement-301PermanentRedirectCollection",["backbone","../models/UrlManagement-301PermanentRedirects-Model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-UrlManagement-301Redirects.json",model:t});return new n}),define("content/category-sections/seo/url-management/views/create-edit-301PermanentRedirects-View",["backbone","../templates/create-Edit-301PermanentRedirect-tpl","../collections/UrlManagement-301PermanentRedirectCollection","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=Backbone.View.extend({template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(e.model.toJSON())),e.delegateEvents(),e.applyTooltips(),e.cacheElem()}),e.handleValidation(),e},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #delete-btn":"handleDelete"},cacheElem:function(){this.$OldUrl=this.$el.find("#f-old-url"),this.$PermanentRedirect=this.$el.find("#f-301-Permanent-Redirect"),this.$tip=this.$el.find(".tooltip-change"),this.$CreateEditPermanentDirectForm=this.$el.find("#create-edit-301-PermanentRedirect-form")},handleSave:function(){this.$CreateEditPermanentDirectForm.valid()&&(this.model.set({oldUrl:this.$OldUrl.val().trim(),PermanentRedirectToURL:this.$PermanentRedirect.val().trim()}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),i.trigger("form:save",this.$tip),this.parent.showHome())},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model)),this.parent.showHome()},handleCancel:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleValidation:function(){jQuery.validator.addMethod("domainCheck",function(e){return/^www/i.test(e)},"Invalid format, do not include http"),this.validator=this.$CreateEditPermanentDirectForm.validate({rules:{"f-old-url":{domainCheck:!0,required:!0},"f-301-Permanent-Redirect":{domainCheck:!0,required:!0}}})}});return new o}),define("content/category-sections/seo/url-management/templates/create-edit-DirectoryRedirects-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="create-edit-directory-Redirect-form" name="create-edit-directory-Redirect-form" class="form-section"> \r\n    <div class="row row-spaced panel x-space-s">\r\n        <div class="row row-spaced">\r\n            <div class="col-12">\r\n                <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n                <button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right"> Save</button>\r\n                ',id&&(__p+='  <button type="button" id="delete-btn" class="btn btn-cancel btn-panel pull-right ">Delete</button> '),__p+='\r\n                <button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n                <div class="panel-title y-space-top-l">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+' Vanity URL</div>\r\n            </div>\r\n        </div>\r\n        <!-- Hidden Alert Message -->\r\n        <div class="row panel alert-panel">\r\n            <div class="col-12">\r\n                <div class="row">\r\n                    <div class="col-1">\r\n                        <div class="icon icon-3x icon-warning"></div>\r\n                    </div>\r\n                    <div class="col-11 alert-text">\r\n                        This is a generic placeholder for error messages in eSAT. <br>\r\n                        In the live app, this will be a real message and will be hidden by default.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- Hidden Alert Message -->\r\n        <div class="row row-spaced y-space-s"> \r\n            <div class="col-12 form-section">\r\n                <label for="f-new-directory-url">Directory</label><i title="This is the short link that is easier for your customers to remember." class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="f-new-directory-url" name="f-new-directory-url" value="'+(null==(__t=directoryUrl)?"":__t)+'"/>\r\n            </div>\r\n        </div>\r\n        <div class="row row-spaced y-space-s">\r\n            <div class="col-12 form-section">\r\n                <label for="f-directory-Redirect">Redirect To:</label><i title="This is the address that the vanity URL will take your shoppers to." class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="f-directory-Redirect" name="f-directory-Redirect" value="'+(null==(__t=redirectToURL)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n';return __p}}),define("content/category-sections/seo/url-management/models/UrlManagement-DirectoryRedirects-Model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,directoryUrl:"/",redirectToURL:""}});return t}),define("content/category-sections/seo/url-management/collections/UrlManagement-DirectoryResourceCollection",["backbone","../models/UrlManagement-DirectoryRedirects-Model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-UrlManagement-DirectoryRedirects.json",model:t});return new n}),define("content/category-sections/seo/url-management/views/create-edit-DirectoryRedirects-View",["backbone","../templates/create-edit-DirectoryRedirects-tpl","../collections/UrlManagement-DirectoryResourceCollection","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=Backbone.View.extend({template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(e.model.toJSON())),e.delegateEvents(),e.applyTooltips(),e.cacheElem()}),e.handleValidation(),e},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #delete-btn":"handleDelete"},cacheElem:function(){this.$directoryUrl=this.$el.find("#f-new-directory-url"),this.$redirectToURL=this.$el.find("#f-directory-Redirect"),this.$createEditDirectoryform=this.$el.find("#create-edit-directory-Redirect-form")},handleSave:function(){this.$createEditDirectoryform.valid()&&(this.model.set({directoryUrl:this.$directoryUrl.val().trim(),redirectToURL:this.$redirectToURL.val().trim()}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),i.trigger("form:save",this.$tip),this.parent.showHome())},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model)),this.parent.showHome()},handleCancel:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleValidation:function(){jQuery.validator.addMethod("domainCheck",function(e){return/^www/i.test(e)},"Invalid format, do not include http"),this.validator=this.$createEditDirectoryform.validate({rules:{"f-directory-Redirect":{domainCheck:!0,required:!0},"f-new-directory-url":"required"}})}});return new o}),define("content/category-sections/seo/url-management/templates/create-Edit-AlternateURL-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="create-edit-301-Alternate-form" name="create-edit-301-Alternate-form" class="form-section"> \r\n    <div class="row row-spaced panel x-space-s">\r\n        <div class="row row-spaced">\r\n            <div class="col-12">\r\n                <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n                <button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right"> Save</button>\r\n                ',id&&(__p+='  <button type="button" id="delete-btn" class="btn btn-cancel btn-panel pull-right ">Delete</button> '),__p+='\r\n\r\n                <button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n\r\n                <div class="panel-title y-space-top-l">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+' Alternate URL</div>\r\n            </div>\r\n        </div>\r\n        <!-- Hidden Alert Message -->\r\n        <div class="row panel alert-panel">\r\n            <div class="col-12">\r\n                <div class="row">\r\n                    <div class="col-1">\r\n                        <div class="icon icon-3x icon-warning"></div>\r\n                    </div>\r\n                    <div class="col-11 alert-text">\r\n                        This is a generic placeholder for error messages in eSAT. <br>\r\n                        In the live app, this will be a real message and will be hidden by default.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- Hidden Alert Message -->\r\n        <div class="row row-spaced y-space-s"> \r\n            <div class="col-12 form-section">\r\n                <label for="f-alternate-url"> Alternate URL (301 Permanent Redirect)</label><i title="Enter the alternate URL here. Make sure that your URL is properly configured at the registrar level first." class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="f-alternate-url" name="f-alternate-url" value="'+(null==(__t=alternateUrl)?"":__t)+'"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n';return __p}}),define("content/category-sections/seo/url-management/models/UrlManagement-AlternateResource-Model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,alternateUrl:"",vendorPrimaryURL:"www.michaealsflowershop.com"}});return t}),define("content/category-sections/seo/url-management/collections/UrlManagement-AlternateResourceCollection",["backbone","../models/UrlManagement-AlternateResource-Model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-UrlManagement-alternateResource.json",model:t});return new n}),define("content/category-sections/seo/url-management/views/create-edit-Alternate-Resource-View",["backbone","../templates/create-Edit-AlternateURL-tpl","../collections/UrlManagement-AlternateResourceCollection","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=Backbone.View.extend({template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(e.model.toJSON())),e.delegateEvents(),e.applyTooltips(),e.cacheElem()}),e.handleValidation(),e},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #delete-btn":"handleDelete"},cacheElem:function(){this.$AlternateUrl=this.$el.find("#f-alternate-url"),this.$CreateEditAlternateForm=this.$el.find("#create-edit-301-Alternate-form")},handleSave:function(){this.$CreateEditAlternateForm.valid()&&(this.model.set({alternateUrl:this.$AlternateUrl.val().trim()}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),i.trigger("form:save",this.$tip),this.parent.showHome())},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model)),this.parent.showHome()},handleCancel:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleValidation:function(){jQuery.validator.addMethod("domainCheck",function(e){return/^www/i.test(e)},"Invalid format, do not include http"),this.validator=this.$CreateEditAlternateForm.validate({rules:{"f-alternate-url":{domainCheck:!0,required:!0}}})},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new o}),define("content/category-sections/seo/url-management/templates/url-management-MainHome-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced form-section">\r\n	 <div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">URL Management</h2>\r\n		</div>\r\n	</div> \r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel form-section">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="y-space-top-xs">Use the settings of this page to manage alternate URLs and URL redirects for your website</div>\r\n	</div>\r\n</div>\r\n\r\n<!--  ALL TABS Below -->\r\n<div id="tabs" class="y-space-top-l">\r\n	<ul>\r\n		<li class="right-pad-tabs"><a class="url-management-edit-tab" href="#Alternate-Url">Alternate Url</a></li>\r\n		<li class="right-pad-tabs"><a class="url-management-edit-tab" href="#directory-Redirects">Vanity URLs</a></li>\r\n		<li class="right-pad-tabs"><a class="url-management-edit-tab" href="#301-Redirects">301 Redirects</a></li>\r\n	</ul>\r\n\r\n	<div id="Alternate-Url">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="row row-spaced">\r\n					<div class="col-12 form-section">\r\n						<div class="label">Vendor Primary Url</div>\r\n						<input type="text" id="vendor-PrimaryUrl" name="vendor-PrimaryUrl" value="'+(null==(__t=vendorPrimaryURL)?"":__t)+'" disabled>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<button type="button" id="add-new-AlternateResourceUrl-btn" class="btn btn-submit pull-right"><i class="icon icon-add"></i>ADD NEW</button>\r\n						<div class="panel-title y-space-top-l">Alternate URLs<i title="You can add Alternate URLs here. These are additional URLs that your customers may use to access your website other than your primary URL (located under More > General Settings)." class="icon icon-tool-tip x-space-s"></i></div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced"> \r\n					<div class="col-12">\r\n						<table class="table alternate">\r\n							<thead>\r\n								<tr class="">\r\n									<th class="col-6 left-align indented-l">Alternate URL</th>\r\n									<th class="col-2 left-align">Edit</th>\r\n									<th class="col-2 left-align">Delete</th>\r\n								</tr>\r\n							</thead>\r\n							<tbody id="AlternateResourceUrl-List"></tbody>\r\n						</table>\r\n					</div>		\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div> <!-- Alternate URL Ends Here -->\r\n\r\n	<div id="directory-Redirects">\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<button type="button" id="add-new-DirectoryResourceUrl-btn" class="btn btn-submit pull-right"><i class="icon icon-add"></i>ADD NEW</button>\r\n				<div class="panel-title y-space-top-l">Vanity URLs<i title="You may specify vanity URLs below. These are special directories used to link to pages that are deeper in your website but are shorter and much easier for your customers to remember." class="icon icon-tool-tip x-space-s"></i></div>   \r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced"> \r\n			<div class="col-12">\r\n				<table class="table alternate">\r\n					<thead>\r\n						<tr class="">\r\n							<th class="col-4 left-align indented-s">Directory</th>\r\n							<th class="col-6 left-align">Redirect To</th>\r\n							<th class="col-1 left-align">Edit</th>\r\n							<th class="col-1 left-align">Delete</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="DirectoryResourceUrl-List"></tbody>\r\n				</table>\r\n			</div>		\r\n		</div>\r\n	</div> <!-- Director Redirects ends here -->\r\n\r\n	<div id="301-Redirects">\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="clearfix">\r\n					<div class="btn-panel pull-right">\r\n					    <button type="button" id="save-btn" class="btn btn-other">SAMPLE</button>\r\n						<button type="button" id="301-import-btn" class="fileUpload btn btn-Boostrap btn-primary btn-file">\r\n							<span> IMPORT</span>\r\n							<input type="file" id="file-btn" class="upload">\r\n						</button>						    \r\n						<button type="button" id="add-301-redirect-btn" class="btn btn-submit"><i class="icon icon-add"></i>ADD NEW</button>\r\n						<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n					</div>\r\n					<div class="panel-title y-space-top-l">301 Permanent URL Redirect<i title="You may use 301 redirects to redirect traffic from old or bad links to new ones. This can be helpful if you decide to take down a section of your site but do not want to take any SEO penalties due to having broken links." class="icon icon-tool-tip x-space-s"></i></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced hidden" id="modal-alert">\r\n			<div class="col-12 panel alert-panel">\r\n				<div class="row">\r\n					<div class="col-1">\r\n						<div class="icon icon-3x icon-warning"></div>\r\n					</div>\r\n					<div class="col-11 alert-text">\r\n						You must select a CSV file to upload.\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced hidden" id="import-alert">\r\n			<div class="col-12  panel alert-panel-success">\r\n				<div class="row">\r\n					<div class="col-1">\r\n						<div class="fa fa-2x fa-thumbs-o-up"></div>\r\n					</div>\r\n					<div class="col-11 alert-text-success">\r\n					   Import Successful.\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	    <div class="row row-spaced"> \r\n		   <div class="col-12 ">\r\n				<table class="table alternate">\r\n					<thead>\r\n						<tr class="">\r\n							<th class="col-5 left-align">Old Address</th>\r\n							<th class="col-5 left-align">Redirect To</th>\r\n							<th class="col-1 left-align">Edit</th>\r\n							<th class="col-1 left-align">Delete</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="301Permanent-Redirect-List"></tbody>\r\n				</table>\r\n		     </div>		\r\n	    </div>\r\n	</div>\r\n</div> <!-- TABS Ends Here -->\r\n\r\n';return __p}}),define("content/category-sections/seo/url-management/templates/URLManagement-DirectoryRedirects-Table-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\n	<td class="left-align indented-s"> '+(null==(__t=directoryUrl)?"":__t)+' </td>\n	<td class="left-align"> '+(null==(__t=redirectToURL)?"":__t)+' </td>\n    <td class="left-align"><button type="button" class="icon icon-btn icon-2x icon-edit"></button> </td>  \n    <td class="left-align"> <button class="icon icon-btn icon-2x icon-trash"></button> </td>					\n</tr>';return __p}}),define("content/category-sections/seo/url-management/views/UrlManagementDirectory-Redirects-View",["backbone","../models/UrlManagement-DirectoryRedirects-Model","../templates/URLManagement-DirectoryRedirects-Table-tpl","../collections/UrlManagement-DirectoryResourceCollection","global-events"],function(e,t,n,i,o){var r=e.View.extend({template:n,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.listenTo(i,"remove",function(e){e===this.model&&this.$el.fadeOut(200,function(){this.remove()})}),this.delegateEvents(),this},events:{"click .icon-edit":"handleDirectoryURLRedirect","click .icon-trash":"handleDelete"},handleDirectoryURLRedirect:function(){this.parent.handleEditDirectoryRedirect(this.model)},handleDelete:function(){o.trigger("form:delete",i.remove.bind(i,this.model))}});return r}),define("content/category-sections/seo/url-management/templates/URLManagement-301PermanentRedirects-Table-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align"> '+(null==(__t=oldUrl)?"":__t)+' </td>\r\n	<td class="left-align"> '+(null==(__t=PermanentRedirectToURL)?"":__t)+' </td>\r\n	<td class="left-align"><button type="button" class="icon icon-btn icon-2x icon-edit"></button> </td>  \r\n	<td class="left-align"> <button class="icon icon-btn icon-2x icon-trash"></button> </td>			\r\n</tr>';return __p}}),define("content/category-sections/seo/url-management/views/UrlManagement-301PermanentRedirects-View",["backbone","../models/UrlManagement-301PermanentRedirects-Model","../templates/URLManagement-301PermanentRedirects-Table-tpl","../collections/UrlManagement-301PermanentRedirectCollection","global-events"],function(e,t,n,i,o){var r=e.View.extend({template:n,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.listenTo(i,"remove",function(e){e===this.model&&this.$el.fadeOut(200,function(){this.remove()})}),this.delegateEvents(),this},events:{"click .icon-edit":"handleEditPermaRedirect","click .icon-trash":"handleDelete"},handleEditPermaRedirect:function(){this.parent.handleEditPermanentRedirect(this.model)},handleDelete:function(){o.trigger("form:delete",i.remove.bind(i,this.model))}});return r}),define("content/category-sections/seo/url-management/models/UrlManagementAlternateResourceHOME-Model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,vendorPrimaryURL:"www.michaealsflowershop.com",pathName:""}});return new t}),define("content/category-sections/seo/url-management/templates/url-Management-AlternateResourceTable-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\n	<td class="left-align indented-l"> '+(null==(__t=alternateUrl)?"":__t)+' </td>\n    <td class="left-align"><button type="button" class="icon icon-btn icon-2x icon-edit"></button> </td>  \n    <td class="left-align"> <button class="icon icon-btn icon-2x icon-trash"></button> </td>				\n</tr>';return __p}}),define("content/category-sections/seo/url-management/views/url-mangement-AlternateResourceTableView",["backbone","../models/UrlManagement-AlternateResource-Model","../templates/url-Management-AlternateResourceTable-tpl","../collections/UrlManagement-AlternateResourceCollection","global-events"],function(e,t,n,i,o){var r=e.View.extend({template:n,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.listenTo(i,"remove",function(e){e===this.model&&this.$el.fadeOut(200,function(){this.remove()})}),this.delegateEvents(),this},events:{"click .icon-edit":"handleEditAltResource","click .icon-trash":"handleDelete"},handleEditAltResource:function(){this.parent.handleEditAlternateResource(this.model)},handleDelete:function(){o.trigger("form:delete",i.remove.bind(i,this.model))}});return r}),define("content/category-sections/seo/url-management/views/url-management-MainHome-view",["backbone","../collections/UrlManagement-AlternateResourceCollection","../templates/url-management-MainHome-tpl","../collections/UrlManagement-DirectoryResourceCollection","./UrlManagementDirectory-Redirects-View","../collections/UrlManagement-301PermanentRedirectCollection","./UrlManagement-301PermanentRedirects-View","../models/UrlManagement-301PermanentRedirects-Model","../models/UrlManagementAlternateResourceHOME-Model","../models/UrlManagement-DirectoryRedirects-Model","../models/UrlManagement-AlternateResource-Model","./url-mangement-AlternateResourceTableView","global-events","jqueryui"],function(e,t,n,i,o,r,a,s,l,c,d,u){var h=e.View.extend({initialize:function(){o.parent=this,a.parent=this,u.parent=this},template:n,render:function(){var e=this;return e.$el.html(e.template(l.toJSON())),e.delegateEvents(),e.applyTabs(),e.cacheElem(),e.applyTooltips(),t.fetchCustom().done(function(){e.addAllAlternateUrls()
}),i.fetchCustom().done(function(){e.addAllDirectoryUrls()}),r.fetchCustom().done(function(){e.addAllPermanentRedirectUrls()}),e},events:{"click #add-301-redirect-btn":"handleAddPermanentRedirect","click #add-new-DirectoryResourceUrl-btn":"handleAddDirectoryRedirect","click #add-new-AlternateResourceUrl-btn":"handleAlternateResource","change #301-import-btn":"handleImport"},cacheElem:function(){this.$AlternateResourceList=this.$el.find("#AlternateResourceUrl-List"),this.$DirectoryResourceList=this.$el.find("#DirectoryResourceUrl-List"),this.$PermanentRedirectList=this.$el.find("#301Permanent-Redirect-List"),this.$fileBtn=this.$el.find("#file-btn"),this.$pathName=this.$el.find(".pathName"),this.$hideButton=this.$el.find(".hidebutton"),this.$hideLabel=this.$el.find(".hidelabel"),this.$modalAlert=this.$el.find("#modal-alert"),this.$importSuccessAlert=this.$el.find("#import-alert")},handleImport:function(){this.handleLoader();var e,t=this.$fileBtn.val();t.indexOf(".csv")>-1?(e=t.replace(/^.*[\\\/]/,""),l.set({pathName:this.$fileBtn.val()}),this.$importSuccessAlert.removeClass("hidden").fadeIn(400),this.$importSuccessAlert.delay(200).fadeOut(3e3)):(this.$modalAlert.removeClass("hidden"),setTimeout(function(){this.$modalAlert.addClass("hidden")},5e3))},handleLoader:function(){var e=$("#save-btn"),t=$("#save-btn");t.after('<img id="spinImg" src="/images/icons/ajax-loader.gif" style="position: absolute;">'),$("#spinImg").position({my:"right top",at:"right bottom",of:$(e)});var n=$("#spinImg");n.fadeOut(1e3)},addEachAlternateUrl:function(e){var t=this,n=new u({model:e,parent:t});t.$AlternateResourceList.append(n.render().el)},addAllAlternateUrls:function(){var e=this;e.$AlternateResourceList.empty(),t.each(e.addEachAlternateUrl,e)},addEachDirectoryUrl:function(e){var t=this,n=new o({model:e,parent:t});t.$DirectoryResourceList.append(n.render().el)},addAllDirectoryUrls:function(){var e=this;e.$DirectoryResourceList.empty(),i.each(e.addEachDirectoryUrl,e)},addEachPermanentRedirectUrls:function(e){var t=this,n=new a({model:e,parent:t});t.$PermanentRedirectList.append(n.render().el)},addAllPermanentRedirectUrls:function(){this.$PermanentRedirectList.empty(),r.each(this.addEachPermanentRedirectUrls,this)},handleAlternateResource:function(){this.parent.showCreateEditAlternateResourceUrl(new d)},handleEditAlternateResource:function(e){this.parent.showCreateEditAlternateResourceUrl(e)},handleAddPermanentRedirect:function(){this.parent.showCreateEditCreateEditPermanentRedirects(new s)},handleEditPermanentRedirect:function(e){this.parent.showCreateEditCreateEditPermanentRedirects(e)},handleAddDirectoryRedirect:function(){this.parent.showCreateEditDirectoryRedirectUrl(new c)},handleEditDirectoryRedirect:function(e){this.parent.showCreateEditDirectoryRedirectUrl(e)},applyTabs:function(){this.$el.find("#tabs").tabs()},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new h}),define("content/category-sections/seo/url-management/views/UrlManagement-ReplaceView",["backbone","./create-edit-301PermanentRedirects-View","./create-edit-DirectoryRedirects-View","./create-edit-Alternate-Resource-View","./url-management-MainHome-view","global-events"],function(e,t,n,i,o){var r=e.View.extend({initialize:function(){o.parent=this,t.parent=this,n.parent=this,i.parent=this},regions:{visible:null},render:function(){return this.showHome(),this},replaceVisible:function(e){e&&this.regions.visible!==e?(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e):e.render(),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(o)},showCreateEditCreateEditPermanentRedirects:function(e){t.model=e,this.replaceVisible(t,this)},showCreateEditAlternateResourceUrl:function(e){i.model=e,this.replaceVisible(i,this)},showCreateEditDirectoryRedirectUrl:function(e){n.model=e,this.replaceVisible(n,this)}});return new r}),define("content/category-sections/seo/site-map/templates/site-map-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">Site Map</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Your site map is a list of pages of your website accessible to search engine crawlers and shoppers. It is set up as a document in XML format and is also a page on your website that lists all the active pages on the site organized in hierarchical fashion. \r\n	</div>\r\n</div>\r\n\r\n<div class="panel">\r\n	<div class="row row-spaced">\r\n		<div class="col-6 form-section">\r\n			<label for="f-xmlUrl">Your XML Site Map URL</label><i class="icon icon-tool-tip x-space-s" title="This is the URL to access the XML version of your site map."></i>\r\n			<input type="text" id="f-xmlUrl" name="f-xmlUrl" value="'+(null==(__t=xmlUrl)?"":__t)+'" disabled>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Start of Section table -->\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<button type="button" id="new-btn" class="btn btn-submit pull-right"><i class="icon icon-add"></i>Add New Link</button>\r\n			<div class="panel-title y-space-top-l">Manage Site Map<i title="You can use this section to manually configure what links appear on your site map." class="icon icon-tool-tip x-space-s"></i></div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use this section to add custom page links to your website\'s site map.\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-1">Sequence</th>\r\n						<th class="col-3 left-align">Link Title</th>\r\n						<th class="col-5 left-align">Link URL</th>\r\n						<th class="col-1">Edit</th>\r\n						<th class="col-1">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="section-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n	<!-- End of Section Table -->\r\n</div> <!-- panel end -->\r\n';return __p}}),define("content/category-sections/seo/site-map/models/site-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-site-map.json",defaults:{id:null,xmlUrl:"",sections:[]}});return new t}),define("content/category-sections/seo/site-map/models/section-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,sequence:null,linkTitle:"",linkUrl:""}});return t}),define("content/category-sections/seo/site-map/collections/section-collection",["backbone","../models/section-model"],function(e,t){var n=e.Collection.extend({model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return n}),define("content/category-sections/seo/site-map/templates/section-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td class="left-align">'+(null==(__t=linkTitle)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=linkUrl)?"":__t)+'</td>\r\n	<td><button type="button" class="icon icon-btn icon-edit icon-2x"></button></td>\r\n	<td><button type="button" class="icon icon-btn icon-trash icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/seo/site-map/views/section-view",["backbone","../templates/section-view-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent,this.listenTo(this.collection,"remove",function(e){this.model===e&&this.remove()}.bind(this))},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},cacheElem:function(){this.$onOffSwitch=this.$el.find(".on-off-switch")},handleDelete:function(){n.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return i}),define("content/category-sections/seo/site-map/templates/create-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="create-edit-form" name="create-edit-form" class="form-section">\r\n    <div class="row row-spaced">\r\n        <div class="col-12">\r\n            <div class="clearfix section-title">\r\n                <h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add ")?"":__t)+' Site Map</h2>\r\n                <div class="btn-panel">\r\n                    <button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n                    ',id&&(__p+='\r\n                        <button type="button" id="delete-btn" class="btn btn-cancel">Delete</button>\r\n                    '),__p+='\r\n                    <button type="button" id="save-btn" class="btn btn-submit pull-right">\r\n                    ',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n                    </button>\r\n                    <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Hidden Alert Message -->\r\n    <div class="row panel alert-panel">\r\n        <div class="col-12">\r\n            <div class="row">\r\n                <div class="col-1">\r\n                    <div class="icon icon-3x icon-warning"></div>\r\n                </div>\r\n                <div class="col-11 alert-text">\r\n                    This is a generic placeholder for error messages in eSAT. <br>\r\n                    In the live app, this will be a real message and will be hidden by default.\r\n                </div>\r\n            </div> \r\n        </div>\r\n    </div>\r\n    <!-- Hidden Alert Message -->\r\n\r\n    <div class="row row-spaced panel form-section">\r\n        <div class="col-8 form-section">\r\n            <label for="f-link-title">Link Title</label><i class="icon icon-tool-tip x-space-s" title="This text is the name of the link which will be displayed on your site map."></i>\r\n            <input type="text" id="f-link-title" name="f-link-title" value="'+(null==(__t=linkTitle)?"":__t)+'" required>\r\n        </div>\r\n        <div class="col-8 form-section">\r\n            <label for="f-link-url">Link URL</label><i class="icon icon-tool-tip x-space-s" title="You can specify a URL for the site map link you have added here."></i>\r\n            <input type="text" id="f-link-url" name="f-link-url" value="'+(null==(__t=linkUrl)?"":__t)+'" required>\r\n        </div>\r\n    </div>\r\n</form>\r\n';return __p}}),define("content/category-sections/seo/site-map/views/create-edit-view",["backbone","../templates/create-edit-view-tpl","../models/section-model","../collections/section-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:t,render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.validateForm(),this.applyToolTips(),this},events:{"click #cancel-btn":"handleCancel","click #save-btn":"handleSave","click #delete-btn":"handleDelete"},cacheElem:function(){this.$linkTitle=this.$el.find("#f-link-title"),this.$linkUrl=this.$el.find("#f-link-url"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change")},handleCancel:function(){o.trigger("form:cancel",function(){this.showParentHome()}.bind(this.parent))},handleSave:function(){var e=this;this.$createEditForm.valid()?(this.model.set({linkTitle:this.$linkTitle.val().trim(),linkUrl:this.$linkUrl.val().trim()}),this.collection.get(this.model)||(this.model.set("id",Date.now()),this.collection.add(this.model)),o.trigger("form:save",this.$tip),e.parent.addAllSections(),e.parent.showParentHome()):o.trigger("form:invalid",this.$tip)},handleDelete:function(){var e=this;o.trigger("form:delete",function(){e.collection.remove(e.model),e.parent.showParentHome()})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{"f-link-title":{required:!0},"f-link-url":{required:!0,url3:!0}}})}});return new r}),define("content/category-sections/seo/site-map/views/site-map-home-view",["backbone","../templates/site-map-home-view-tpl","../models/site-model","../models/section-model","../collections/section-collection","./section-view","./create-edit-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s){var l=e.View.extend({tagName:"div",id:"f-site-map",template:t,initialize:function(){a.parent=this},sectionCollection:null,render:function(){var e=this;return n.fetchCustom().done(function(){this.$el.html(e.template(n.toJSON())),this.delegateEvents(),this.cacheElem(),this.stopListening(this.sectionCollection,"resequenced"),n.stopListening(this.sectionCollection),this.sectionCollection=new o(n.get("sections")),n.listenTo(this.sectionCollection,"add remove change",function(){n.set("sections",this.sectionCollection.toJSON())}.bind(this)),this.listenTo(this.sectionCollection,"resequenced",this.addAllSections),this.addAllSections(),this.applySortable(),this.applyToolTips()}.bind(this)),this},events:{"click #new-btn":"handleAddSection","click #save-btn":"handleSave"},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$sectionList=this.$el.find("#section-list")},handleSave:function(){s.trigger("form:save",this.$tip)},handleAddSection:function(){this.handleEdit(new i)},handleEdit:function(e){this.parent.showCreateEdit(e,this.sectionCollection)},addSection:function(e){var t=new r({model:e,collection:this.sectionCollection,parent:this});this.$sectionList.append(t.render().el)},addAllSections:function(){this.$sectionList.empty(),this.sectionCollection.each(this.addSection,this)},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#section-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$sectionList.children().each(function(t){var n=$(this).data("id");e.sectionCollection.where({id:n})[0].set("sequence",t+1)}),e.sectionCollection.changeSort("sequence"),e.sectionCollection.sort(),e.sectionCollection.trigger("resequenced"),s.trigger("form:editing")}})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},showParentHome:function(){this.parent.showHome()}});return new l}),define("content/category-sections/seo/site-map/views/site-map-view",["backbone","./site-map-home-view","./create-edit-view","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e,t){var o=this;i.trigger("form:cancel",function(){n.model=e,n.collection=t,o.replaceVisible(n)})}});return new o}),define("content/category-sections/reporting/google-analytics/models/google-analytics-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-google-analytics.json",defaults:{googleAccount:"",googleConversionTrackingCode:""}});return new t}),define("content/category-sections/reporting/google-analytics/templates/google-analytics-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Google Analytics Setup</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Want to use Google Analytics to analyze the traffic coming to your site? Google Analytics gives you great information and demographics on your customers, and this page allows you to set up the whole thing.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Google Analytics Account</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6">\r\n			<label for="f-googleAccount">Google Account</label><i class="icon icon-tool-tip x-space-s" title="When you create a Google Analytics account, it gives an account number or UA-code. Place that here."></i>\r\n			<input type="text" name="f-googleAccount" id="f-googleAccount" value="'+(null==(__t=googleAccount)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Conversion Code</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<label for="f-googleConversionTrackingCode">Google Conversion Tracking Code</label><i class="icon icon-tool-tip x-space-s" title="Google will give a tracking code to insert into your webpages. Place that here."></i>\r\n			<textarea name="f-googleConversionTrackingCode" id="f-googleConversionTrackingCode" class="size-3">'+(null==(__t=googleConversionTrackingCode)?"":__t)+"</textarea>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n";return __p}}),define("content/category-sections/reporting/google-analytics/views/google-analytics-view",["underscore","backbone","../models/google-analytics-model","../templates/google-analytics-tpl","global-events"],function(e,t,n,i,o){var r=t.View.extend({tagName:"form",id:"p-google-analytics",template:i,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyToolTips()}),e},events:{"click #save-btn":"handleSave"},cacheElem:function(){this.$googleAccount=this.$el.find("#f-googleAccount"),this.$googleConversionTrackingCode=this.$el.find("#f-googleConversionTrackingCode"),this.$tip=this.$el.find(".tooltip-change")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleSave:function(){n.set({googleAccount:this.$googleAccount.val().trim(),googleConversionTrackingCode:this.$googleConversionTrackingCode.val().trim()}),o.trigger("form:save",this.$tip)}});return new r}),define("text!content/category-sections/common/order-lookup/templates/order-lookup-home-tpl.html",[],function(){return'<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title">\r\n			<h2 class="pull-left">Order Lookup / Resend</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<!-- Hidden Alert Message for invalid search -->\r\n<div class="row row-spaced panel alert-panel hidden-alt" id="search-alert">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-4x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				Please enter search criteria into at least one of the below fields in order to look up orders.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced form-section panel">\r\n<form id="p-form">\r\n	<div class="row row-spaced">\r\n		<div class="col-3 form-section">\r\n			<label for="f-dove-number">Dove No.</label>\r\n			<input type="text" id="f-dove-number" name="f-dove-number">\r\n		</div>\r\n\r\n		<div class="col-3 form-section">\r\n			<label for="f-from-date">Order Date From:</label>\r\n			<div class="date-container">\r\n			    <input type="text" id="f-from-date" name="f-from-date">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="col-3 form-section">\r\n			<label for="f-to-date">To:</label>\r\n			<div class="date-container">\r\n			    <input type="text" id="f-to-date" name="f-to-date">\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-3"><label for="f-confirmation-number">Confirmation No.</label></div>\r\n				<div class="col-3"><label for="f-sender-last-name">Sender Last Name</label></div>\r\n				<div class="col-3"><label for="f-recipient-last-name">Recipient Last Name</label></div>\r\n			</div>\r\n\r\n			<div class="row">\r\n				<div class="col-3 form-section"><input type="text" id="f-confirmation-number" name="f-confirmation-number"></div>\r\n				<div class="col-3 form-section"><input type="text" id="f-sender-last-name" name="f-sender-last-name">	</div>\r\n				<div class="col-3 form-section"><input type="text" id="f-recipient-last-name" name="f-recipient-last-name">	</div>\r\n				<div class="col-3"><button type="button" class="btn btn-submit y-space-s" id="search-btn">Search</button></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</form>\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Order Search Result</div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">Click on any order to view the order details.  To resend the order, click on the resend icon next to the order</div>\r\n	</div>\r\n	<table id="orders-table" class="table alternate">\r\n		<thead>\r\n			<tr class="highlighted">\r\n				<th>Order Date</th>\r\n				<th>Sender Last Name</th>\r\n				<th>Recipient Last Name</th>\r\n				<th>Confirmation No.</th>\r\n				<th>Dove No.</th>\r\n				<th>Resend</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody id="orders-list"></tbody>\r\n	</table>\r\n</div>\r\n'}),define("content/category-sections/common/order-lookup/models/order-model",["backbone"],function(e){var t=e.Model.extend({defaults:{orderDate:"",confirmationNumber:"",doveNumber:"",deliveryDate:"",recipientFirstName:"",recipientLastName:"",recipientAdress:"",recipientCity:"",recipientState:"",recipientZip:"",recipientPhoneNumber:"",recipientEmail:"",occasionCode:"",itemId:"",itemName:"",addOns:"",specialInstructions:"",cardMessage:"",signature:"",senderFirstName:"",senderLastName:"",senderAdress:"",senderCity:"",senderState:"",senderZip:"",senderPhoneNumber:"",senderEmail:"",deliveryMethod:"",sourceCode:"",promotionCode:"",productTotal:"$0.00",upsellTotal:"$0.00",promotionTotal:"$0.00",feeTotal:"$0.00",subTotal:"$0.00",taxTotal:"$0.00",orderTotal:"$0.00",paymentType:"",creditCardType:"",creditCardAccountNumberPayPalEmail:"",creditCardExpirationDate:"",creditCardName:"",giftCardNumber:""}});return t}),define("content/category-sections/common/order-lookup/collections/order-collection",["backbone","../models/order-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-orders.json",model:t});return new n}),define("content/category-sections/common/order-lookup/templates/order-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="clickable">\r\n	<td>'+(null==(__t=orderDate)?"":__t)+"</td>\r\n	<td>"+(null==(__t=senderLastName)?"":__t)+"</td>\r\n	<td>"+(null==(__t=recipientLastName)?"":__t)+"</td>\r\n	<td>"+(null==(__t=confirmationNumber)?"":__t)+"</td>\r\n	<td>"+(null==(__t=doveNumber)?"":__t)+'</td>\r\n	<td>\r\n		<button class="icon icon-btn icon-reset icon-2x"></button>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/common/order-lookup/views/order-view",["backbone","../templates/order-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))},events:{click:"showDetails","click .icon-reset":"resend"},showDetails:function(e){!$(e.target).hasClass("icon-reset")&&this.parent.showDetails(this.model)},resend:function(){var e=this;n.trigger("modal:custom",{template:{title:"Resending Dove Number",text:'This order is now being resent via Dove. The customer will be receiving the order shortly.\n          <h3 class="center-align">Dove No. '+e.model.get("doveNumber")+"</h3>",confirmBtnText:"OK",singleBtn:!0}})}});return i}),define("content/category-sections/common/order-lookup/views/order-lookup-home-view",["backbone","text!../templates/order-lookup-home-tpl.html","../models/order-model","../collections/order-collection","./order-view","datatables","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({tagName:"div",id:"p-order-lookup",template:t,initialize:function(){},render:function(){var e=this;return e.$el.html(this.template),e.delegateEvents(),e.cacheElem(),i.fetchCustom().done(function(){e.applyDataTables(e.$ordersTable),e.addAllOrders(),e.validateForm()}),e.applyDates(),e},cacheElem:function(){this.$createEditForm=this.$el.find("#p-form"),this.$ordersList=this.$el.find("#orders-list"),this.$ordersTable=this.$el.find("#orders-table"),this.$doveNumber=this.$el.find("#f-dove-number"),this.$confirmationNumber=this.$el.find("#f-confirmation-number"),this.$senderLastName=this.$el.find("#f-sender-last-name"),this.$recipientLastName=this.$el.find("#f-recipient-last-name"),this.$fromDate=this.$el.find("#f-from-date"),this.$toDate=this.$el.find("#f-to-date"),this.$searchAlert=this.$el.find("#search-alert")},events:{"change #f-dove-number":"validateFields","change #f-confirmation-number":"validateFields","change #f-sender-last-name":"validateFields","change #f-recipient-last-name":"validateFields","change #f-from-date":"validateFields","change #f-to-date":"validateFields","click #search-btn":"handleSearch"},showError:function(){this.$searchAlert.fadeIn(1e3)},hideError:function(){this.$searchAlert.fadeOut(1e3)},addOrder:function(e){var t=new o({model:e,parent:this.parent});this.$ordersList.append(t.render().el)},addAllOrders:function(){this.$ordersList.empty(),this.$ordersList.addClass("hidden"),i.each(this.addOrder,this)},applyDataTables:function(e){this.dataTable=e.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},applyDates:function(){var e=this;e.$fromDate.datepicker({onSelect:function(t){e.$toDate.datepicker("option","minDate",t),e.$fromDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$toDate.datepicker({onSelect:function(t){e.$fromDate.datepicker("option","maxDate",t),e.$toDate.trigger("blur")},dateFormat:"mm/dd/y"})},handleSearch:function(){var e=this;if(e.$createEditForm.valid()){var t=this.$doveNumber.val(),n=this.$confirmationNumber.val(),i=this.$senderLastName.val(),o=this.$recipientLastName.val(),r=this.$fromDate.val(),a=this.$toDate.val();(t.length>0||n.length>0||i.length>0||o.length>0||r.length>0&&a.length>0)&&this.$ordersList.removeClass("hidden")}},validateFields:function(){var e=this;e.$doveNumber.valid(),e.$confirmationNumber.valid(),e.$senderLastName.valid(),e.$recipientLastName.valid(),e.$fromDate.valid(),e.$toDate.valid()},validateForm:function(){var e=this;e.$createEditForm.validate({rules:{"f-dove-number":{required:{depends:function(){return e.$confirmationNumber.is(":filled")||e.$senderLastName.is(":filled")||e.$recipientLastName.is(":filled")?void 0:!0}}},"f-confirmation-number":{required:{depends:function(){return e.$doveNumber.is(":filled")||e.$senderLastName.is(":filled")||e.$recipientLastName.is(":filled")?void 0:!0}}},"f-sender-last-name":{required:{depends:function(){return e.$confirmationNumber.is(":filled")||e.$doveNumber.is(":filled")||e.$recipientLastName.is(":filled")?void 0:!0}}},"f-recipient-last-name":{required:{depends:function(){return e.$confirmationNumber.is(":filled")||e.$senderLastName.is(":filled")||e.$doveNumber.is(":filled")?void 0:!0}}},"f-from-date":{required:!0},"f-to-date":{required:!0}}})}});return new r}),define("content/category-sections/common/order-lookup/templates/order-details-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Order Details</h2>\r\n			<div class="btn-panel">\r\n				<button class="btn btn-submit pull-right" id="order-lookup-resend-btn"><i class="icon icon-undo"></i>Resend</button>\r\n				<button class="btn btn-submit pull-right"><i class="icon icon-print"></i>Print</button>\r\n				<button id="cancel-btn" class="btn btn-other pull-right">Cancel</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">View the selected order details below</div>\r\n</div>\r\n\r\n<!--// Order Info [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Order Information</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Order Date</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=orderDate)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Confirmation No.</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=confirmationNumber)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Dove No.</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=doveNumber)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Delivery Date</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=deliveryDate)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Order Info [End] //-->\r\n\r\n<!--// Recipient Info [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Recipient/Delivery Information</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">First Name</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientFirstName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Last Name</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientLastName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Phone Number</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientPhoneNumber)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Email</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientEmail)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Address</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientAdress)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">				\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">City</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientCity)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">				\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">State</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientState)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">				\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Zip/Postal Code</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=recipientZip)?"":__t)+'</div>\r\n					</div>\r\n				</div>												\r\n			</div>\r\n		</div>\r\n\r\n	</div>\r\n</div>\r\n<!--// Recipient Info [End] //-->\r\n\r\n<!--// Item Ordered [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Item Ordered</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Occasion Code</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=occasionCode)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Item ID</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=itemId)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Item Name</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=itemName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Add-Ons</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=addOns)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Special Instructions</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=specialInstructions)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Card Message</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=cardMessage)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Signature</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=signature)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Item Ordered [End] //-->\r\n\r\n<!--// Sender Info [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Sender Information</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">First Name</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderFirstName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Last Name</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderLastName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Phone Number</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderPhoneNumber)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Email</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderEmail)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Address</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderAdress)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">			\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">City</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderCity)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">				\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">State</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderState)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">				\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Zip/Postal Code</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=senderZip)?"":__t)+'</div>\r\n					</div>\r\n				</div>					\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Sender Info [End] //-->\r\n\r\n<!--// Misc Info [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Miscellaneous Information</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Delivery Method</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=deliveryMethod)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Source Code</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=sourceCode)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Promotion Code</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=promotionCode)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Misc Info [End] //-->\r\n\r\n<!--// Order Totals [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Order Totals</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Products</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=productTotal)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Add-Ons</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=upsellTotal)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Promotions</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=promotionTotal)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Fees</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=feeTotal)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Taxes</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=taxTotal)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Order Total</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=orderTotal)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Order Totals [End] //-->\r\n\r\n<!--// Payment Information [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Payment Information</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Payment Type</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=paymentType)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Credit Card Type</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=creditCardType)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Card or Account No./PayPal Email</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text"><span id="credit-card-number">'+(null==(__t=creditCardAccountNumberPayPalEmail)?"":__t)+"</span> ",creditCardAccountNumberPayPalEmail.match("@")||(__p+='<button id="toggle-credit-card-number-btn" class="icon icon-btn icon-search"></button>'),__p+='</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Full Name On Card</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=creditCardName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Gift Card Number</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=giftCardNumber)?"":__t)+"</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Payment Information [End] //-->";
return __p}}),define("content/category-sections/common/order-lookup/views/order-details-view",["backbone","../templates/order-details-tpl","global-events"],function(e,t,n){var i=e.View.extend({tagName:"div",id:"order-details",template:t,render:function(){var e=this.model.toJSON();return e.creditCardAccountNumberPayPalEmail=e.creditCardAccountNumberPayPalEmail.replace(/\d{4}-\d{4}-\d{4}/,"XXXX-XXXX-XXXX"),this.$el.html(this.template(e)),this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$creditCardNumber=this.$el.find("#credit-card-number")},events:{"click #cancel-btn":"showHome","click #toggle-credit-card-number-btn":"toggleCreditCardNumber","click #order-lookup-resend-btn":"resend"},showHome:function(){this.parent.showHome()},resend:function(){var e=this;n.trigger("modal:custom",{template:{title:"Resending Dove Number",text:'This order is now being resent via Dove. The customer will be receiving the order shortly.\n	          				<h3 class="center-align">Dove No. '+e.model.get("doveNumber")+"</h3>",confirmBtnText:"OK",singleBtn:!0}})},toggleCreditCardNumber:function(){this.$creditCardNumber.text(this.$creditCardNumber.text().trim().match(/XXXX-XXXX-XXXX/)?this.model.get("creditCardAccountNumberPayPalEmail")+" Expiration Date: "+this.model.get("creditCardExpirationDate"):this.model.get("creditCardAccountNumberPayPalEmail").replace(/\d{4}-\d{4}-\d{4}/,"XXXX-XXXX-XXXX"))}});return new i}),define("content/category-sections/common/order-lookup/views/order-lookup-view",["backbone","./order-lookup-home-view","./order-details-view"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)},showDetails:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/reporting/find-a-florist/models/find-a-florist-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-find-a-florist.json",defaults:{totalTopFive:"",totalOverall:"",totalReferrals:"",totalOrders:"",topCity:"",cityTopFive:"",cityOverall:""}});return new t}),define("content/category-sections/reporting/find-a-florist/models/find-a-florist-top20-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-find-a-florist-top20.json",defaults:{zip:"",topFive:"",overall:"",referrals:"",orders:""}});return t}),define("content/category-sections/reporting/find-a-florist/templates/find-a-florist-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Find A Florist Statistics</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		This section reports the web statistics of Find A Florist for the selected date range.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Report Time Period</div>\r\n		</div>\r\n	</div>\r\n	<form id="f-find-a-florist-date-form" name="f-find-a-florist-date-form" class="form-section">\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="start-date">From:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="start-date" name="start-date" class="date">\r\n				</div>\r\n			</div>\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="end-date">To:</label>\r\n				<div class="date-container">\r\n					<input type="text" disabled id="end-date" name="end-date" class="date">\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n\r\n		<div class="row">\r\n			<div class="col-d-5 form-section">\r\n				<label for="f-site-dropdown">Site:</label>\r\n				<div class="select-container">\r\n					<select name="f-site-dropdown" id="f-site-dropdown">\r\n						<option selected disabled hidden value=""></option>\r\n						<option selected="selected" value="Combined">Combined</option>\r\n						<option value="Jennys">Jennys</option>\r\n						<option value="Lehrers">Lehrer\'s Flowers</option>\r\n						<option value="Martinas">Martina\'s Flowers</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-d-5 col-6 form-section">\r\n				<button type="button" id="go-btn" class="btn btn-submit row-btn">GO <i class="icon icon-right-circle-chevron icon-lg"></i></button>\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section find-a-florist-report" style="display:none;">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Find A Florist Website Statistics Report Total</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align"></th>\r\n						<th class="col-2 left-align">Top 5 Placement</th>\r\n						<th class="col-2 left-align">Overall Placement</th>\r\n					</tr>\r\n				</thead>\r\n\r\n				<tbody>\r\n					<tr>\r\n						<td class="left-align indented-l">Total</td>\r\n						<td class="left-align">'+(null==(__t=totalTopFive)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=totalOverall)?"":__t)+'</td> \r\n					</tr>\r\n				</tbody>\r\n\r\n			</table>\r\n		</div>		\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section find-a-florist-report" style="display:none;">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Find A Florist Website Statistics Report By Top City</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align indented-l">Top City</th>\r\n						<th class="col-2 left-align">Top 5 Placement</th>\r\n						<th class="col-2 left-align">Overall Placement</th>\r\n					</tr>\r\n				</thead>\r\n\r\n				<tbody>\r\n					<tr>\r\n						<td class="left-align indented-l">'+(null==(__t=topCity)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=cityTopFive)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=cityOverall)?"":__t)+'</td>\r\n					</tr>\r\n				</tbody>\r\n\r\n			</table>\r\n		</div>		\r\n	</div>\r\n\r\n\r\n <div class="row row-spaced panel form-section find-a-florist-report" >\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Find A Florist Website Statistics Report By Top 20 Zip Codes</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n	   <div class="col-12">\r\n			<div class="btn-panel y-space-top-s">\r\n                <button id="print-top20Report-btn" type="button" class="btn btn-submit"><i class="icon icon-print"></i>Print</button>\r\n		           <button id="export-Report-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-export"></i>Export</button>\r\n				</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div id="print-top-20-section" class="col-12">\r\n			<table class="table">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align indented-l">Top Zip Code</th>\r\n						<th class="col-2 left-align">Top 5 Placement</th>\r\n						<th class="col-2 left-align">Overall Placement</th>\r\n					</tr>\r\n				</thead>\r\n\r\n				<tbody id="find-a-florist-top20-table">\r\n				</tbody>\r\n\r\n			</table>\r\n		</div>		\r\n	</div>\r\n  </div>\r\n</div>';return __p}}),define("content/category-sections/reporting/find-a-florist/collections/find-a-florist",["backbone","../models/find-a-florist-top20-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-find-a-florist-top20.json",model:t});return new n}),define("content/category-sections/reporting/find-a-florist/templates/top20-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=zip)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=topFive)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=overall)?"":__t)+"</td>\r\n</tr>";return __p}}),define("content/category-sections/reporting/find-a-florist/views/top20-view",["backbone","../templates/top20-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/category-sections/reporting/find-a-florist/views/find-a-florist-view",["backbone","../models/find-a-florist-model","../models/find-a-florist-top20-model","../templates/find-a-florist-tpl","../collections/find-a-florist","./top20-view","global-events","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:i,render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyDates(),o.fetchCustom().done(function(){e.addAllStats()})}),e},events:{"click #go-btn":"handleGo","click #print-top20Report-btn":"handleReportTabPrint","change #start-date":"handleStartChange","change #end-date":"handleEndChange"},cacheElem:function(){this.$goBtn=this.$el.find("#go-btn"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$reports=this.$el.find(".find-a-florist-report"),this.$topTwentyContainer=this.$el.find("#find-a-florist-top20-table"),this.$dateForm=this.$el.find("#f-find-a-florist-date-form")},handleStartChange:function(){var e;e=this.$startDate.datepicker("getDate"),this.$endDate.val("");var t=131328e5,n=new Date;n.setTime(e.getTime()+t);var i=new Date;i.setTime(e.getTime()),this.$endDate.removeAttr("disabled"),this.$endDate.datepicker("option","minDate",i),this.$endDate.datepicker("option","maxDate",n)},handleEndChange:function(){},handleGo:function(){var e=this;e.valForm(),e.$dateForm.valid()&&this.$reports.show()},handleReportTabPrint:function(){var e=document.title,t=document.getElementById("print-top-20-section").innerHTML,n=window.open();n.document.open(),n.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),setTimeout(function(){n.print(),n.close()},300)},addStat:function(e){var t=new r({model:e,parent:this});this.$topTwentyContainer.append(t.render().el)},addAllStats:function(){this.$topTwentyContainer.empty(),o.each(this.addStat,this)},applyDates:function(){var e=this;e.$startDate.datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,dateFormat:"MM yy",onSelect:function(){e.$startDate.trigger("blur")},beforeShow:function(){$("#ui-datepicker-div").addClass("hide-calendar")},onClose:function(){$("#ui-datepicker-div").removeClass("hide-calendar");var t=$("#ui-datepicker-div .ui-datepicker-month :selected").val();console.log("month",t);var n=$("#ui-datepicker-div .ui-datepicker-year :selected").val();console.log("year",n);var i=new Date(n,t,15);console.log("theD",i),$(this).datepicker("setDate",null),$(this).datepicker("option","defaultDate",i),$(this).datepicker("setDate",i);var o=$(this).datepicker("getDate");console.log("curdate",o),e.$startDate.trigger("change")}}),e.$endDate.datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,dateFormat:"MM yy",onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},beforeShow:function(){$("#ui-datepicker-div").addClass("hide-calendar")},onClose:function(){$("#ui-datepicker-div").removeClass("hide-calendar");var e=$("#ui-datepicker-div .ui-datepicker-month :selected").val();console.log("month",e);var t=$("#ui-datepicker-div .ui-datepicker-year :selected").val();console.log("year",t),$(this).datepicker("setDate",new Date(t,e,15))}})},valForm:function(){var e=this;e.$dateForm.validate({rules:{"start-date":{required:!0},"end-date":{required:!0}}})}});return new a}),define("content/category-sections/reporting/source-codes/models/source-code-models",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-source-codes.json",defaults:{totalSales:"",totalOrders:"",averageOrderValues:""}});return new t}),define("content/category-sections/reporting/source-codes/models/source-code-reportingTabs-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-source-codesReport.json",defaults:{sourcecodeReportDate:"",sourceCodes:"",SourceCode:"",Orders:"",sales:"",orderValue:""}});return t}),define("content/category-sections/reporting/source-codes/templates/source-codes-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Source Codes</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		This section reports the amount of orders coming from source codes for the selected date range.<br>\r\n		Source codes are used to track how many orders you are receiving from a particular source. \r\n		This is a code <br> that can be created by you, to help track your advertising.\r\n		Source codes are automatically used on purchases from<br> Findaflorist.com as well as your email marketing campaigns.\r\n	</div>\r\n</div>\r\n\r\n<form name="sourceCode-date-form" id="sourceCode-date-form" class="form-section">\r\n      <div class="row row-spaced panel form-section">\r\n			\r\n	<div class="row row-spaced form-section">\r\n            <div class="col-6">\r\n	               <label class="x-space"> Report by Specific Source Code </label>\r\n			<i class="icon icon-tool-tip x-space-s" title="Search for a specific Source Code."></i>\r\n			<div class="search-container">\r\n				<input type="text" id="f-source-code-search-value" name="f-source-code-search-value" placeholder="Enter the Source Code...">\r\n			</div>\r\n	      </div>\r\n\r\n	</div>\r\n     \r\n 	 <div class="label x-space"> Report Time Period </div>\r\n		\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="start-date">From:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="start-date" name="start-date" class="date">\r\n				</div>\r\n			</div>\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="end-date">To:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="end-date" name="end-date" class="date">\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-d-5 form-section">\r\n				<label for="f-site-dropdown">Site:</label>\r\n				<div class="select-container">\r\n					<select name="f-site-dropdown" id="f-site-dropdown">\r\n						<option selected disabled hidden value=""></option>\r\n						<option selected="selected" value="Combined">Combined</option>\r\n						<option value="Jennys">Jennys</option>\r\n						<option value="Lehrers">Lehrer\'s Flowers</option>\r\n						<option value="Martinas">Martina\'s Flowers</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-d-5 col-6 form-section">\r\n				<button type="button" id="go-btn" class="btn btn-submit row-btn">GO <i class="icon icon-right-circle-chevron icon-lg"></i></button>\r\n			</div>\r\n		</div>\r\n</div>\r\n	</form>\r\n\r\n\r\n<div class="row row-spaced panel form-section source-Code-Report" style="display: none">\r\n\r\n 	<div class="row">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left">Source Codes Reporting Table </h3>\r\n				<div class="btn-panel">\r\n                   <button id="print-sourceCodes-btn" type="button" class="btn btn-submit"><i class="icon icon-print"></i>Print</button>\r\n		           <button id="export-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-export"></i>Export</button>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n\r\n<div id="print-source-codes-section">\r\n	<div class="row row-spaced"> \r\n		<div class="col-12">\r\n			<table id="source-code-table" class="table alternate">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align indented-l">Date<button data-attribute="sourcecodeReportDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-3 left-align">Source Code<button data-attribute="SourceCode" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2 left-align">Orders<button data-attribute="Orders" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2 left-align">Total Sales<button data-attribute="sales" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-3 left-align">Average Order Value<button data-attribute="orderValue" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					</tr>\r\n				</thead> 		\r\n\r\n				<tbody id="source-codes-ReportingTable">\r\n				</tbody>\r\n\r\n			</table>\r\n		</div>		\r\n	</div>\r\n    \r\n\r\n    <div>\r\n\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table">\r\n				\r\n			<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align indented-l"></th>\r\n						<th class="col-3 left-align">Source Code</th>\r\n						<th class="col-2 left-align">Orders</th>\r\n						<th class="col-2 left-align">Total Sales</th>\r\n						<th class="col-3 left-align">Average Order Value</th>\r\n					</tr>\r\n				</thead>\r\n\r\n				<tbody>\r\n					<tr class="rounded-table-container">\r\n						<td class="left-align">Total/Average</td>\r\n						<td class="left-align"> - </td>\r\n						<td class="left-align">'+(null==(__t=totalOrders)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=totalSales)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=averageOrderValues)?"":__t)+"</td> \r\n					</tr>\r\n				</tbody>\r\n\r\n			</table>\r\n		</div>		\r\n	</div>\r\n</div>\r\n\r\n\r\n</div>";return __p}}),define("content/category-sections/reporting/source-codes/collections/source-code-collection",["backbone","../models/source-code-reportingTabs-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-source-codesReport.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/reporting/source-codes/templates/source-codesReportingTab-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=sourcecodeReportDate)?"":__t)+'</td>\r\n    <td class="left-align">'+(null==(__t=SourceCode)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=Orders)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=sales)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=orderValue)?"":__t)+"</td>\r\n</tr>";return __p}}),define("content/category-sections/reporting/source-codes/views/source-codes-reportTab-view",["backbone","../templates/source-codesReportingTab-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/category-sections/reporting/source-codes/views/source-codes-view",["backbone","../models/source-code-models","../models/source-code-reportingTabs-model","../templates/source-codes-tpl","../collections/source-code-collection","./source-codes-reportTab-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({template:i,initialize:function(){a.off("form:editing")},render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyDates(),e.applyTooltips(),e.valForm(),o.fetchCustom().done(function(){e.dataTable&&e.dataTable.destroy(),e.collection=o.deepClone(),e.addAllSourceCodes(),e.applyDataTables(e.$sourceCodeTable)}.bind(e))}),e.listenTo(o,"sort",e.addAllSourceCodes),e},events:{"click #go-btn":"handleGo","click #print-sourceCodes-btn":"handlePrint","click .sort-btn":"handleSort"},cacheElem:function(){this.$goBtn=this.$el.find("#go-btn"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$reports=this.$el.find(".source-Code-Report"),this.$sourceCodeReportsContainer=this.$el.find("#source-codes-ReportingTable"),this.$dateForm=this.$el.find("#sourceCode-date-form"),this.$sourceCodeSearch=this.$el.find("#f-source-code-search-value"),this.$sourceCodeTable=this.$el.find("#source-code-table"),this.$sourceCodesSearch=this.$el.find("#f-source-code-search-value"),this.$sortButtons=this.$el.find(".sort-btn")},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleGo:function(){var e=this;e.$dateForm.valid()&&this.$reports.show()},addCodes:function(e){var t=new r({model:e,parent:this});this.$sourceCodeReportsContainer.append(t.render().el)},addAllSourceCodes:function(){this.$sourceCodeReportsContainer.empty(),o.each(this.addCodes,this)},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyDataTables:function(){this.dataTable=this.$sourceCodeTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,bDestroy:!0,info:!1,paging:!1,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",pageLength:50,language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),o.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),o.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),o.changeSort(n,"ascending")),o.sort()},handlePrint:function(){var e=document.title,t=document.getElementById("print-source-codes-section").innerHTML,n=window.open();n.document.open(),n.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),setTimeout(function(){n.print(),n.close()},300)},valForm:function(){var e=this;e.$dateForm.validate({rules:{"start-date":{required:!0},"end-date":{required:!0}}})}});return new s}),define("content/category-sections/reporting/promo-codes/models/promo-code-models",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-promo-codes.json",defaults:{totalSales:"",totalDiscount:"",totalOrders:"",averageOrderValues:""}});return new t}),define("content/category-sections/reporting/promo-codes/models/promo-code-reportingTabs-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-promo-codesReport.json",defaults:{promocodeReportDate:"",promoCode:"",promotionCodes:"",discountAmount:"",Orders:"",sales:"",orderValue:""}});return t}),define("content/category-sections/reporting/promo-codes/templates/promo-codes-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Promotion Codes Reporting</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		This section reports the number of orders and total sales related to promotion codes in a specific date range\r\n	</div>\r\n</div>\r\n\r\n<form name="promoCode-date-form" id="promoCode-date-form">\r\n   <div class="row row-spaced panel form-section">\r\n			\r\n	<div class="row row-spaced form-section">\r\n            <div class="col-6">\r\n	               <label class="x-space"> Report by Specific Promotion Code </label>\r\n			<i class="icon icon-tool-tip x-space-s" title="Search for a specific Promotion Code."></i>\r\n			<div class="search-container">\r\n				<input type="text" id="f-promo-code-search-value" name="f-promo-code-search-value" placeholder="Enter the Promotion Code...">\r\n			</div>\r\n	      </div>\r\n\r\n	</div>\r\n     \r\n 	 <div class="label x-space"> Report Time Period </div>\r\n		\r\n\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-d-3 col-6 form-section">\r\n				<label for="start-date">From:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="start-date" name="start-date" class="date">\r\n				</div>\r\n			</div>\r\n			<div class="col-d-3 col-6 form-section">\r\n				<label for="end-date">To:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="end-date" name="end-date" class="date">\r\n				</div>\r\n			</div>\r\n\r\n		</div>\r\n\r\n\r\n		<div class="row">\r\n			\r\n			<div class="col-d-3 form-section">\r\n				<label for="f-site-dropdown">Site:</label>\r\n				<div class="select-container">\r\n					<select name="f-site-dropdown" id="f-site-dropdown">\r\n						<option selected disabled hidden value=""></option>\r\n						<option selected="selected" value="Combined">Combined</option>\r\n						<option value="Jennys">Jennys</option>\r\n						<option value="Lehrers">Lehrer\'s Flowers</option>\r\n						<option value="Martinas">Martina\'s Flowers</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-d-3 col-6 form-section">\r\n				<button type="button" id="go-btn" class="btn btn-submit row-btn">GO <i class="icon icon-right-circle-chevron icon-lg"></i></button>\r\n			</div>\r\n		</div>\r\n</div>\r\n	</form>\r\n\r\n\r\n<div class="row row-spaced panel form-section promo-Code-Report" style="display: none;">\r\n\r\n 	<div class="row">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left">Promotion Codes Reporting Table </h3>\r\n				<div class="btn-panel">\r\n                   <button id="print-promoCodes-btn" type="button" class="btn btn-submit"><i class="icon icon-print"></i>Print</button>\r\n		           <button id="export-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-export"></i>Export</button>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n\r\n<div id="print-promo-codes-section">\r\n	<div class="row row-spaced"> \r\n		<div class="col-12">\r\n			<table id="promo-code-table" class="table alternate">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align indented-l">Date <button data-attribute="promocodeReportDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					  <th class="col-2 left-align">Promo Code <button data-attribute="promoCode" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2 left-align">Total Discount Given <button data-attribute="discountAmount" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2 left-align">Orders <button data-attribute="Orders" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2 left-align">Total Sales <button data-attribute="sales" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n						<th class="col-2 left-align">Average Order Value <button data-attribute="orderValue" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					</tr>\r\n				</thead> 		\r\n\r\n				<tbody id="promo-codes-ReportingTable">\r\n				</tbody>\r\n\r\n			</table>\r\n		</div>		\r\n	</div>\r\n    \r\n\r\n    <div>\r\n\r\n    </div>\r\n\r\n    <div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table  class="table">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align indented-l"></th>\r\n						<th class="col-2 left-align">Promo Code</th>\r\n						<th class="col-2 left-align">Total Discount Given</th>\r\n						<th class="col-2 left-align">Orders</th>\r\n						<th class="col-2 left-align">Total Sales</th>\r\n						<th class="col-2 left-align">Average Order Value</th>\r\n					</tr>\r\n				</thead>\r\n\r\n				<tbody>\r\n					<tr class="rounded-table-container">\r\n						<td class="left-align">Total/Average</td>\r\n						<td class="left-align"> - </td>\r\n						<td class="left-align">'+(null==(__t=totalDiscount)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=totalOrders)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=totalSales)?"":__t)+'</td>\r\n						<td class="left-align">'+(null==(__t=averageOrderValues)?"":__t)+"</td> \r\n					</tr>\r\n				</tbody>\r\n\r\n			</table>\r\n		</div>		\r\n	</div>\r\n</div>\r\n\r\n\r\n</div>";return __p}}),define("content/category-sections/reporting/promo-codes/collections/promo-codes-collection",["backbone","../models/promo-code-reportingTabs-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-promo-codesReport.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/reporting/promo-codes/templates/promo-codesReportingTab-tpl",[],function(){return function(obj){obj||(obj={});
{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=promocodeReportDate)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=promoCode)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=discountAmount)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=Orders)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=sales)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=orderValue)?"":__t)+" </td>\r\n</tr>";return __p}}),define("content/category-sections/reporting/promo-codes/views/promo-codes-reportTab-view",["backbone","../templates/promo-codesReportingTab-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/category-sections/reporting/promo-codes/views/promo-codes-view",["backbone","../models/promo-code-models","../models/promo-code-reportingTabs-model","../templates/promo-codes-tpl","../collections/promo-codes-collection","./promo-codes-reportTab-view","global-events","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({template:i,initialize:function(){a.off("form:editing")},render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyDates(),e.applyTooltips(),e.valForm(),o.fetchCustom().done(function(){e.addAllPromoCodes()})}),e.listenTo(o,"sort",e.addAllPromoCodes),e},events:{"click #go-btn":"handleGo","click #print-promoCodes-btn":"handlePrint","click .sort-btn":"handleSort"},cacheElem:function(){this.$goBtn=this.$el.find("#go-btn"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$reports=this.$el.find(".promo-Code-Report"),this.$promoCodeReportsContainer=this.$el.find("#promo-codes-ReportingTable"),this.$dateForm=this.$el.find("#promoCode-date-form"),this.$promoCodeTable=this.$el.find("#promo-code-table"),this.$promoCodesSearch=this.$el.find("#f-promo-code-search-value"),this.$sortButtons=this.$el.find(".sort-btn")},handleGo:function(){var e=this;e.$dateForm.valid()&&this.$reports.show()},applyTooltips:function(){this.$el.find(".icon-tool-tip").tooltip()},addCodes:function(e){var t=new r({model:e,parent:this});this.$promoCodeReportsContainer.append(t.render().el)},addAllPromoCodes:function(){this.$promoCodeReportsContainer.empty(),o.each(this.addCodes,this)},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyDataTables:function(){this.dataTable=this.$promoCodeTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,bDestroy:!0,info:!1,paging:!1,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",pageLength:50,language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),o.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),o.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),o.changeSort(n,"ascending")),o.sort()},handlePrint:function(){var e=document.title,t=document.getElementById("print-promo-codes-section").innerHTML,n=window.open();n.document.open(),n.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),n.document.write(t),n.document.write("</body></html>"),n.document.close(),n.focus(),setTimeout(function(){n.print(),n.close()},300)},handleSearch:function(){this.dataTable.columns(2).search(this.$promoCodesSearch.val()).draw()},valForm:function(){var e=this;e.$dateForm.validate({rules:{"start-date":{required:!0},"end-date":{required:!0}}})}});return new s}),define("content/category-sections/reporting/top-products/models/top50-products-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-top-products-reporting.json",defaults:{Rank:"",productId:"",productName:"",numbersSold:""}});return t}),define("content/category-sections/reporting/top-products/templates/top-products-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Top Products</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		This section reports the top 50 best selling products for your eFlorist website for the selected date range. It shows you\r\n		how many of each product were sold.\r\n	</div>\r\n</div>\r\n\r\n<form name="topProducts-date-form" id="topProducts-date-form">\r\n  <div class="row row-spaced panel form-section">\r\n 	 <div class="label x-space"> Report Time Period </div>\r\n		\r\n       \r\n		<div class="row row-spaced form-section">\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="start-date">From:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="start-date" name="start-date" class="date">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="end-date">To:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="end-date" name="end-date" class="date">\r\n				</div>\r\n			</div>\r\n\r\n	  </div>\r\n\r\n\r\n	  <div class="row">\r\n\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="f-site-dropdown">Site:</label>\r\n				<div class="select-container">\r\n					<select name="f-site-dropdown" id="f-site-dropdown">\r\n						<option selected disabled hidden value=""></option>\r\n						<option selected="selected" value="Combined">Combined</option>\r\n						<option value="Jennys">Jennys</option>\r\n						<option value="Lehrers">Lehrer\'s Flowers</option>\r\n						<option value="Martinas">Martina\'s Flowers</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-d-5 col-6 form-section">\r\n				<button type="button" id="go-btn" class="btn btn-submit row-btn">GO <i class="icon icon-right-circle-chevron icon-lg"></i></button>\r\n			</div>\r\n\r\n\r\n		</div>\r\n</div>\r\n	</form>\r\n\r\n<div id="show-report-Chart-section" class="form-section top-Products-Report" style="visibility: hidden;">\r\n   <div class="row row-spaced panel form-section">\r\n\r\n\r\n 	<div class="row">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left"> Top Products Report Charts (Units Sold) </h3>\r\n				<div class="btn-panel">\r\n                   <button id="print-productChart-btn" type="button" class="btn btn-submit"><i class="icon icon-print"></i>Print</button>\r\n		           <button id="export-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-export"></i>Export</button>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n   <div id="chart_div" align=\'center\'></div>\r\n\r\n   </div>\r\n\r\n  <!-- Graph Goes Here -->\r\n\r\n</div>\r\n\r\n\r\n 	<div class="row row-spaced panel">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left">Top 50 Products Report Table </h3>\r\n			</div>\r\n		</div>\r\n	\r\n\r\n\r\n\r\n<div id="print-top-products-section">\r\n	<div class="row row-spaced "> \r\n		<div class="col-12 y-space-top-xl">\r\n			<table class="table alternate">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-1 left-align indented-l">Rank</th>\r\n						<th class="col-2 left-align">Product Id</th>\r\n						<th class="col-6 left-align">Product Name</th>\r\n						<th class="col-1 left-align"># Sold</th>\r\n					</tr>\r\n				</thead>\r\n\r\n					<tbody id="top-products-ReportingTable">\r\n					</tbody>\r\n\r\n			</table>\r\n				\r\n				</div>		\r\n			\r\n			</div>\r\n\r\n  \r\n    </div>\r\n\r\n     </div>\r\n\r\n\r\n</div>';return __p}}),define("content/category-sections/reporting/top-products/collections/top-products-collection",["backbone","../models/top50-products-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-top-products-reporting.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/reporting/top-products/templates/top-products-ReportingTab-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=Rank)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=productId)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=productName)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=numbersSold)?"":__t)+" </td>\r\n</tr>";return __p}}),define("content/category-sections/reporting/top-products/views/top-products-ReportTab-view",["backbone","../templates/top-products-ReportingTab-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/category-sections/reporting/top-products/views/top-products-view",["backbone","../models/top50-products-model","../templates/top-products-tpl","../collections/top-products-collection","./top-products-ReportTab-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:n,render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template()),e.delegateEvents(),e.cacheElem(),e.valForm(),e.applyDates(),e.collection=i.deepClone(),e.addAllTopProducts(),e.addAllChartsRows(),google.load("visualization","1.0",{callback:e.drawChart,packages:["corechart"]}),e.listenTo(i,"sort",e.addAllTopProducts)}.bind(e)),e},events:{"click #go-btn":"handleGo","click #print-productChart-btn":"handlePrintChartAndReport","click .sort-btn":"handleSort"},cacheElem:function(){this.$goBtn=this.$el.find("#go-btn"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$reports=this.$el.find(".top-Products-Report"),this.$topProductsReportsContainer=this.$el.find("#top-products-ReportingTable"),this.$dateForm=this.$el.find("#topProducts-date-form"),this.$chartDivContainer=this.$el.find("#chart_div"),this.$sortButtons=this.$el.find(".sort-btn")},handleGo:function(){var e=this;e.$dateForm.valid()&&(document.getElementById("show-report-Chart-section").style.visibility="visible")},addTopProduct:function(e){var t=new o({model:e,parent:this});this.$topProductsReportsContainer.append(t.render().el)},addAllTopProducts:function(){this.$topProductsReportsContainer.empty(),i.each(this.addTopProduct,this)},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},handlePrintChartAndReport:function(){var e=document.title,t=document.getElementById("chart_div").innerHTML,n=document.getElementById("print-top-products-section").innerHTML,i=window.open();i.document.open(),i.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),i.document.write(t),i.document.write(n),i.document.write("</body></html>"),i.document.close(),i.focus(),setTimeout(function(){i.print(),i.close()},300)},addChartsRows:function(e){var t=this,n=new o({model:e,parent:t}),i=[n.model.get("productId"),n.model.get("numbersSold")];ROWARRAY.length<10&&ROWARRAY.push(i)},addAllChartsRows:function(){var e=this;ROWARRAY=[],i.each(e.addChartsRows,e)},drawChart:function(){var e=new google.visualization.DataTable;e.addColumn("string","productId"),e.addColumn("number","UnitS Sold"),e.addRows(ROWARRAY);var t={title:"",width:600,height:400,vAxis:{title:"",textStyle:{color:"black",fontSize:11}}},n=new google.visualization.BarChart(document.getElementById("chart_div"));n.draw(e,t)},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()},valForm:function(){var e=this;e.$dateForm.validate({rules:{"start-date":{required:!0},"end-date":{required:!0}}})}});return new r}),define("content/category-sections/reporting/osm-tracking/templates/osm-tracking-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Online Search Marketing Stats</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		This section provides statistics on how your online search marketing program is performing.\r\n	</div>\r\n</div>\r\n\r\n<div id="osm-tabs">\r\n    <div id="osm-tabs-1" class="osm-tab">\r\n    	<div class="osm-header">Stats Report</div>\r\n                                        \r\n        <!-- The contents of following div will be replaced by the report once loaded -->\r\n        <div id="balihoochart">Please wait, we\'re searching for your report...</div>\r\n    </div>\r\n\r\n\r\n    <div id="osm-tabs-2" class="osm-tab">\r\n    	<div class="osm-header">Call Tracking</div>\r\n     \r\n        <!-- The contents of following div will be replaced by the report once loaded -->\r\n        <div id="balihoocalltracking" class="balihoochart hidden">Loading Call Tracking Report...</div>\r\n        \r\n    </div>\r\n</div>';return __p}}),define("content/category-sections/reporting/osm-tracking/views/osm-tracking-view",["backbone","../templates/osm-tracking-tpl","global-events","jqueryval"],function(e,t){var n=e.View.extend({template:t,render:function(){var e=this;return e.$el.html(e.template),e.delegateEvents(),e.cacheElem(),e},events:{"click #go-btn":"handleGo","click #print-ordersAndTraffic-btn":"handlePrint"},cacheElem:function(){this.$callTrack=this.$el.find("#balihoocalltracking"),this.$chart1=this.$el.find("#balihoochart"),this.$chart2=this.$el.find("#balihoochartnew")},runTrackingReport:function(){}});return new n}),define("content/category-sections/reporting/top-referrals/models/top50-referrals-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-top50-referrals.json",defaults:{Rank:"",refWebsiteAddress:"",numberofVisits:"",numberofOrders:""}});return t}),define("content/category-sections/reporting/top-referrals/templates/top-referrals-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Top Referrals</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n      <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		This section reports the website that a user was on prior to coming to your website. For instance, if a user is on www.abc.com and then decided to come to your website without closing their browser, this would be considered a referral from www.abc.com. This report does not account for all your traffic, only the top referring sites.\r\n	</div>\r\n</div>\r\n\r\n<form name="topReferrals-date-form" id="topReferrals-date-form" class="form-section">\r\n  <div class="row row-spaced panel form-section">\r\n 	 <div class="label x-space"> Report Time Period </div>\r\n		\r\n       \r\n		<div class="row row-spaced form-section">\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="start-date">From:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="start-date" name="start-date" class="date">\r\n				</div>\r\n			</div>\r\n			<div class="col-d-5 col-6 form-section">\r\n				<label for="end-date">To:</label>\r\n				<div class="date-container">\r\n					<input type="text" id="end-date" name="end-date" class="date">\r\n				</div>\r\n			</div>\r\n	    </div>\r\n			\r\n\r\n        <div class="row row-spaced ">\r\n\r\n			<div class="col-d-5 form-section">\r\n				<label for="f-site-dropdown">Site:</label>\r\n				<div class="select-container">\r\n					<select name="f-site-dropdown" id="f-site-dropdown">\r\n						<option selected disabled hidden value=""></option>\r\n						<option selected="selected" value="Combined">Combined</option>\r\n						<option value="Jennys">Jennys</option>\r\n						<option value="Lehrers">Lehrer\'s Flowers</option>\r\n						<option value="Martinas">Martina\'s Flowers</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-d-5 col-6 form-section">\r\n				<button type="button" id="go-btn" class="btn btn-submit row-btn">GO <i class="icon icon-right-circle-chevron icon-lg"></i></button>\r\n			</div>\r\n		</div>\r\n</div>\r\n	</form>\r\n\r\n<div id="reportandChart-section" class="form-section top-Referrals-Report" style="visibility: hidden;">\r\n   <div class="row row-spaced panel form-section">\r\n\r\n\r\n 	<div class="row">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left"> Top 50 Referrals Report Charts (# of Visits) </h3>\r\n				<div class="btn-panel">\r\n                   <button id="print-ReferralsChart-btn" type="button" class="btn btn-submit"><i class="icon icon-print"></i>Print</button>\r\n		           <button id="export-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-export"></i>Export</button>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n   <div id="chart_div" align=\'center\'></div>\r\n\r\n   </div>\r\n\r\n  <!-- Graph Goes Here -->\r\n\r\n</div>\r\n\r\n\r\n 	<div class="row row-spaced panel">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left">Top 50 Referrals Report Table </h3>\r\n			</div>\r\n		</div>\r\n	\r\n\r\n\r\n\r\n<div id="print-top-referrals-section">\r\n	<div class="row row-spaced "> \r\n		<div class="col-12 y-space-top-xl">\r\n			<table id="top-referrals-table" class="table alternate">\r\n				\r\n				<thead>\r\n					<tr class="highlighted">\r\n						<th class="col-2 left-align indented-l">Rank</th>\r\n						<th class="col-7 left-align">Referals Website Address</th>\r\n						<th class="col-2 left-align">Visits</th>\r\n						<th class="col-2 left-align">Orders</th>\r\n					</tr>\r\n				</thead>\r\n\r\n\r\n					<tbody id="top-Referrals-ReportingTable">\r\n					</tbody>\r\n\r\n			</table>\r\n				\r\n				</div>		\r\n			\r\n			</div>\r\n\r\n  \r\n    </div>\r\n\r\n     </div>\r\n\r\n\r\n</div>';return __p}}),define("content/category-sections/reporting/top-referrals/collections/top-referrals-collection",["backbone","../models/top50-referrals-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-top50-referrals.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/reporting/top-referrals/templates/top-referrals-ReportingTab-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=Rank)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=refWebsiteAddress)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=numberofVisits)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=numberofOrders)?"":__t)+" </td>\r\n</tr>";return __p}}),define("content/category-sections/reporting/top-referrals/views/top-referrals-ReportTab-view",["backbone","../templates/top-referrals-ReportingTab-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/category-sections/reporting/top-referrals/views/top-referrals-view",["backbone","../models/top50-referrals-model","../templates/top-referrals-tpl","../collections/top-referrals-collection","./top-referrals-ReportTab-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:n,render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template()),e.delegateEvents(),e.cacheElem(),e.valForm(),e.applyDates(),e.dataTable&&e.dataTable.destroy(),e.collection=i.deepClone(),e.addAllTopReferrals(),e.addAllChartsRows(),google.load("visualization","1.0",{callback:e.drawChart,packages:["corechart"]}),e.listenTo(i,"sort",e.addAllTopReferrals)}.bind(e)),e},events:{"click #go-btn":"handleGo","click #print-topReferrals-reports-btn":"handlePrintReport","click #print-ReferralsChart-btn":"handlePrintChart","click .sort-btn":"handleSort"},cacheElem:function(){this.$goBtn=this.$el.find("#go-btn"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$reports=this.$el.find(".top-Referrals-Report"),this.$topReferralsReportsContainer=this.$el.find("#top-Referrals-ReportingTable"),this.$dateForm=this.$el.find("#topReferrals-date-form"),this.$topReferralsTable=this.$el.find("#top-referrals-table"),this.$chartDivContainer=this.$el.find("#chart_div"),this.$sortButtons=this.$el.find(".sort-btn")},handleGo:function(){var e=this;e.$dateForm.valid()&&(document.getElementById("reportandChart-section").style.visibility="visible")},addTopReferrals:function(e){var t=new o({model:e,parent:this});this.$topReferralsReportsContainer.append(t.render().el)},addAllTopReferrals:function(){this.$topReferralsReportsContainer.empty(),i.each(this.addTopReferrals,this)},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},handlePrintChart:function(){var e=document.title,t=document.getElementById("chart_div").innerHTML,n=document.getElementById("print-top-referrals-section").innerHTML,i=window.open();i.document.open(),i.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),i.document.write(t),i.document.write(n),i.document.write("</body></html>"),i.document.close(),i.focus(),setTimeout(function(){i.print(),i.close()},300)},addChartsRows:function(e){var t=this,n=new o({model:e,parent:t}),i=[n.model.get("refWebsiteAddress"),n.model.get("numberofVisits")];ROWARRAY.length<10&&ROWARRAY.push(i)},addAllChartsRows:function(){var e=this;ROWARRAY=[],i.each(e.addChartsRows,e)},drawChart:function(){var e=new google.visualization.DataTable;e.addColumn("string","Website Address"),e.addColumn("number",""),e.addRows(ROWARRAY);var t={title:"Number of Visits",width:650,height:400,legend:{position:"none"},vAxis:{textStyle:{color:"black",fontSize:11,paddingRight:"100",marginRight:"100"}},textPosition:"none"},n=new google.visualization.BarChart(document.getElementById("chart_div"));n.draw(e,t)},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),i.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),i.changeSort(n,"ascending")),i.sort()},valForm:function(){var e=this;e.$dateForm.validate({rules:{"start-date":{required:!0},"end-date":{required:!0}}})}});return new r}),define("content/category-sections/reporting/orders-traffic/models/ordersandtraffic-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-ordersandtraffic.json",defaults:{totalVisitors:"",totalPageViews:"",totalOrders:"",totalofTotalSales:"",totalaverageOrderValues:"",totalConversionRate:"",displayedChart:"Visitors"}});return new t}),define("content/category-sections/reporting/orders-traffic/models/ordersandtraffic-reportingTabs-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-ordersandtrafficReport.json",defaults:{orderandTrafficReportDate:"",numberofVisitors:"",pageViews:"",numberofOrders:"",totalSales:"",averageOrderValues:"",conversionRate:"",displayedChart:"Visitors"}});return t}),define("content/category-sections/reporting/orders-traffic/templates/ordersandtraffic-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Orders & Traffic</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		This section reports the amount of orders and website traffic for the selected date range\r\n	</div>\r\n</div>\r\n\r\n<form name="ordersAndTarffic-date-form" id="ordersAndTarffic-date-form" class="form-section">\r\n	<div class="row row-spaced panel form-section">   \r\n		<div class="label x-space"> Report Time Period </div>\r\n			<div class="row row-spaced form-section">\r\n				<div class="col-d-5 col-6 form-section">\r\n					<label for="start-date">From:</label>\r\n					<div class="date-container">\r\n						<input type="text" id="start-date" name="start-date" class="date">\r\n					</div>\r\n				</div>\r\n				<div class="col-d-5 col-6 form-section">\r\n					<label for="end-date">To:</label>\r\n					<div class="date-container">\r\n						<input type="text" id="end-date" name="end-date" class="date">\r\n					</div>\r\n				</div>\r\n\r\n				</div>\r\n\r\n\r\n				<div class="row">\r\n					<div class="col-d-5 col-6 form-section">\r\n						<label for="f-site-dropdown">Site:</label>\r\n						<div class="select-container">\r\n							<select name="f-site-dropdown" id="f-site-dropdown">\r\n								<option selected disabled hidden value=""></option>\r\n								<option selected="selected" value="Combined">Combined</option>\r\n								<option value="Jennys">Jennys</option>\r\n								<option value="Lehrers">Lehrer\'s Flowers</option>\r\n								<option value="Martinas">Martina\'s Flowers</option>\r\n							</select>\r\n						</div>\r\n					</div>\r\n				\r\n\r\n				<div class="col-d-5 col-6 form-section">\r\n					<button type="button" id="go-btn" class="btn btn-submit row-btn">GO <i class="icon icon-right-circle-chevron icon-lg"></i></button>\r\n				</div>\r\n\r\n			</div>\r\n\r\n		</div>\r\n\r\n</form>\r\n\r\n<div class="form-section ordersAndTraffic-Code-Report" style="display: none;">\r\n    <div class="row row-spaced panel form-section">\r\n	 	<div class="row">\r\n			<div class="col-12">\r\n				<div class="clearfix section-title">\r\n					<h3 class="pull-left"> Orders & Traffic Reporting Chart </h3>\r\n					<div class="btn-panel">\r\n	                   <button id="print-OrdersChart-btn" type="button" class="btn btn-submit"><i class="icon icon-print"></i>Print</button>\r\n			           <button id="export-Chart-btn" type="button" class="btn btn-submit pull-right"><i class="icon icon-export"></i>Export</button>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3">\r\n				<label for="f-view-by">View By:</label>\r\n				<div class="select-container">\r\n					<select name="f-displayed-chart" id="f-displayed-chart">\r\n						<option selected disabled hidden value="'+(null==(__t=displayedChart)?"":__t)+'">'+(null==(__t=displayedChart)?"":__t)+'</option>\r\n						<option value="Visitors">Visitors</option>\r\n						<option value="PageViews">Page Views</option>\r\n						<option value="Orders">Orders</option>\r\n						<option value="ConversionRate">Conversion Rate</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			  <!-- Graph Goes Here -->\r\n		   <div id="chart_div" class="display-container" align=\'center\'></div>\r\n		</div>\r\n	</div>\r\n\r\n 	<div class="row row-spaced panel">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left">Orders & Traffic Reporting Table </h3>\r\n			</div>\r\n		</div>\r\n		<div id="print-OrdersAndTraffic-codes-section">\r\n			<div class="row row-spaced"> \r\n				<div class="col-12 y-space-top-xl">\r\n					<table id="ordersAndTraffic-code-table" class="table alternate">\r\n						<thead>\r\n							<tr class="highlighted">\r\n								<th class="col-2 left-align indented-l">Date <button data-attribute="orderandTrafficReportDate" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n								<th class="col-2 left-align">Visitors <button data-attribute="numberofVisitors" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n								<th class="col-2 left-align">Page Views <button data-attribute="pageViews" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n								<th class="col-2 left-align">Orders <button data-attribute="numberofOrders" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n								<th class="col-2 left-align">Total Sales <button data-attribute="totalSales" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n								<th class="col-2 left-align">Average Order Value <button data-attribute="averageOrderValues" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n								<th class="col-2 left-align">Conversion <button data-attribute="conversionRate" class="icon icon-btn icon-sort sort-btn"></button> </th>\r\n							</tr>\r\n						</thead>\r\n						<tbody id="ordersAndTraffic-ReportingTable">\r\n						</tbody>\r\n					</table>\r\n				</div>		\r\n			</div>\r\n		    <div class="row row-spaced">\r\n				<div class="col-12">\r\n					<table  class="table">\r\n						<thead>\r\n							<tr class="highlighted">\r\n								<th class="col-2 left-align indented-l"></th>\r\n								<th class="col-2 left-align">Visitors</th>\r\n								<th class="col-2 left-align">Page Views</th>\r\n								<th class="col-2 left-align">Orders</th>\r\n								<th class="col-2 left-align">Total Sales</th>\r\n								<th class="col-2 left-align">Average Order Value</th>\r\n								<th class="col-2 left-align">Conversion</th>\r\n							</tr>\r\n						</thead>\r\n						<tbody>\r\n							<tr class="rounded-table-container">\r\n								<td class="left-align">Total/Average</td>\r\n								<td class="left-align">'+(null==(__t=totalVisitors)?"":__t)+'</td>\r\n								<td class="left-align">'+(null==(__t=totalPageViews)?"":__t)+'</td>\r\n								<td class="left-align">'+(null==(__t=totalOrders)?"":__t)+'</td>\r\n								<td class="left-align">'+(null==(__t=totalofTotalSales)?"":__t)+'</td>\r\n								<td class="left-align">'+(null==(__t=totalaverageOrderValues)?"":__t)+'</td>\r\n								<td class="left-align">'+(null==(__t=totalConversionRate)?"":__t)+"% </td> \r\n							</tr>\r\n						</tbody>\r\n					</table>\r\n				</div>		\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>";
return __p}}),define("content/category-sections/reporting/orders-traffic/collections/ordersAndTraffic-collection",["backbone","../models/ordersandtraffic-reportingTabs-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-ordersandtrafficReport.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/reporting/orders-traffic/templates/ordersandtraffic-Reporting-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=orderandTrafficReportDate)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=numberofVisitors)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=pageViews)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=numberofOrders)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=totalSales)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=averageOrderValues)?"":__t)+' </td>\r\n	<td class="left-align">'+(null==(__t=conversionRate)?"":__t)+"%</td>\r\n</tr>";return __p}}),define("content/category-sections/reporting/orders-traffic/views/ordersandtraffic-reportTab-view",["backbone","../templates/ordersandtraffic-Reporting-tpl","global-events"],function(e,t){var n=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/category-sections/reporting/orders-traffic/views/ordersandtraffic-view",["backbone","../models/ordersandtraffic-model","../models/ordersandtraffic-reportingTabs-model","../templates/ordersandtraffic-tpl","../collections/ordersAndTraffic-collection","./ordersandtraffic-reportTab-view","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:i,render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyDates(),e.valForm(),o.fetchCustom().done(function(){e.collection=o.deepClone(),e.addAllOrdersAndTrafficCodes(),e.addAllChartsRows(),google.load("visualization","1.0",{callback:e.drawChart,packages:["corechart"]}),e.applyDataTables(e.$orderAndTrafficCodeTable)}.bind(e))}),e.listenTo(o,"sort",e.addAllOrdersAndTrafficCodes),e},events:{"click #go-btn":"handleGo","click #print-OrdersChart-btn":"handleChartAndReportPrint","change #f-displayed-chart":"addAllChartsRows","click .sort-btn":"handleSort"},cacheElem:function(){this.$goBtn=this.$el.find("#go-btn"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$reports=this.$el.find(".ordersAndTraffic-Code-Report"),this.$orderAndTrafficReportsContainer=this.$el.find("#ordersAndTraffic-ReportingTable"),this.$dateForm=this.$el.find("#ordersAndTarffic-date-form"),this.$orderAndTrafficCodeTable=this.$el.find("#ordersAndTraffic-code-table"),this.$displayedChartContainer=this.$el.find("#displayed-content-container"),this.$displayedChart=this.$el.find("#f-displayed-chart"),this.$sortButtons=this.$el.find(".sort-btn")},handleGo:function(){var e=this;e.$dateForm.valid()&&this.$reports.show()},addCodes:function(e){var t=new r({model:e,parent:this});this.$orderAndTrafficReportsContainer.append(t.render().el)},addAllOrdersAndTrafficCodes:function(){this.$orderAndTrafficReportsContainer.empty(),o.each(this.addCodes,this)},applyDates:function(){var e=this;console.log("applyDates"),e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyDataTables:function(){this.dataTable=this.$orderAndTrafficCodeTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,bDestroy:!0,info:!1,paging:!1,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",pageLength:50,language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},handleChartAndReportPrint:function(){var e=document.title,t=document.getElementById("chart_div").innerHTML,n=document.getElementById("print-OrdersAndTraffic-codes-section").innerHTML,i=window.open();i.document.open(),i.document.write("<html><head><title>"+e+'</title><style>@media print{html, body{height: auto;}} </style><link href="css/styles.css" type="text/css" rel="stylesheet"></head><body>'),i.document.write(t),i.document.write(n),i.document.write("</body></html>"),i.document.close(),i.focus(),setTimeout(function(){i.print(),i.close()},300)},addChartsRowsVisitors:function(e){var t=this,n=new r({model:e,parent:t}),i=[n.model.get("orderandTrafficReportDate"),n.model.get("numberofVisitors")];CHARTOPTIONS={title:"Visitors",width:650,height:400,legend:{position:"none"},vAxis:{textStyle:{color:"black",fontSize:11}},textPosition:"in"},ROWARRAY.length<10&&ROWARRAY.push(i)},addChartsRowsPageViews:function(e){var t=this,n=new r({model:e,parent:t});CHARTOPTIONS={title:"Page Views",width:650,height:400,legend:{position:"none"},vAxis:{textStyle:{color:"black",fontSize:11}},textPosition:"in"};var i=[n.model.get("orderandTrafficReportDate"),n.model.get("pageViews")];ROWARRAY.length<10&&ROWARRAY.push(i)},addChartsRowsNumberofOrders:function(e){var t=this,n=new r({model:e,parent:t});CHARTOPTIONS={title:"Orders",width:650,height:400,legend:{position:"none"},vAxis:{textStyle:{color:"black",fontSize:11}},textPosition:"in"};var i=[n.model.get("orderandTrafficReportDate"),n.model.get("numberofOrders")];ROWARRAY.length<10&&ROWARRAY.push(i)},addChartsRowsConversionRate:function(e){var t=this,n=new r({model:e,parent:t});CHARTOPTIONS={title:"",width:650,height:400,vAxis:{format:"#.00'%'"}};var i=[n.model.get("orderandTrafficReportDate"),n.model.get("conversionRate")];ROWARRAY.length<10&&ROWARRAY.push(i)},addAllChartsRows:function(){var e=this,t=e.$displayedChart.find("option:selected").val();e.$displayedChartContainer.empty(),ROWARRAY=[],"Visitors"===t?(o.each(e.addChartsRowsVisitors,e),google.load("visualization","1.0",{callback:e.drawChart,packages:["corechart"]})):"PageViews"===t?(e.$displayedChartContainer.fadeIn(200),o.each(e.addChartsRowsPageViews,e),google.load("visualization","1.0",{callback:e.drawChart,packages:["corechart"]})):"Orders"===t?(e.$displayedChartContainer.fadeIn(200),o.each(e.addChartsRowsNumberofOrders,e),google.load("visualization","1.0",{callback:e.drawChart,packages:["corechart"]})):"ConversionRate"===t?(e.$displayedChartContainer.fadeIn(200),o.each(e.addChartsRowsConversionRate,e),google.load("visualization","1.0",{callback:e.drawConversionRateChart,packages:["corechart"]})):e.$displayedChartContainer.fadeOut(200)},drawChart:function(){var e=new google.visualization.DataTable;e.addColumn("string","Date"),e.addColumn("number",""),e.addRows(ROWARRAY);var t=CHARTOPTIONS,n=new google.visualization.LineChart(document.getElementById("chart_div"));n.draw(e,t)},drawConversionRateChart:function(){var e=new google.visualization.DataTable;e.addColumn("string","Date"),e.addColumn("number","Conversion Rate"),e.addRows(ROWARRAY);var t=CHARTOPTIONS,n=new google.visualization.NumberFormat({suffix:"%",negativeColor:"#FF0000",decimalSymbol:".",fractionDigits:2});n.format(e,1);var i=new google.visualization.LineChart(document.getElementById("chart_div"));i.draw(e,t)},handleSort:function(e){var t=$(e.target),n=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),o.changeSort(n,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),o.changeSort(n,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),o.changeSort(n,"ascending")),o.sort()},valForm:function(){var e=this;e.$dateForm.validate({rules:{"start-date":{required:!0},"end-date":{required:!0}}})}});return new a}),define("content/category-sections/reporting/floral-app-reports/templates/floral-app-report-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Floral App Reports</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		You may use this section to find reports for your Floral App program to see how it is performing.\r\n	</div>\r\n</div>\r\n\r\n<div class="col-12">\r\n    <div id="tabs">\r\n		<ul class="clearfix">\r\n		<li class="col-6"><a class="center-align fill-container-width" href="#statistics">Statistics Management</a></li>\r\n		<li class="col-6"><a class="center-align fill-container-width" href="#users">Registered Users</a></li>\r\n		</ul>\r\n\r\n		<!-- Start of Account Tab -->\r\n		<div id="statistics">\r\n\r\n			<div class="row row-spaced">\r\n				<form name="f-statistic-dates" id="f-statistic-dates" class="form-section">\r\n					<div class="col-3 date-container form-section">\r\n						<div class="label">Statistics Date From:</div>\r\n					    <input type="text" id="f-statsStartDate" name="f-statsStartDate" class="f-statsStartDate" value="'+(null==(__t=statsStartDate)?"":__t)+'">\r\n					</div>\r\n					<div class="col-3 date-container form-section">\r\n						<div class="label">To:</div>\r\n					    <input type="text" id="f-statsEndDate" name="f-statsEndDate" class="f-statsEndDate" value="'+(null==(__t=statsEndDate)?"":__t)+'">\r\n					</div>\r\n					<!-- <div class="col-d-3 form-section">\r\n						<label for="f-site-dropdown">Site:</label>\r\n						<div class="select-container">\r\n							<select name="f-site-dropdown" id="f-site-dropdown">\r\n								<option selected disabled hidden value=""></option>\r\n								<option selected="selected" value="Combined">Combined</option>\r\n								<option value="Jennys">Jennys</option>\r\n								<option value="Lehrers">Lehrer\'s Flowers</option>\r\n								<option value="Martinas">Martina\'s Flowers</option>\r\n							</select>\r\n						</div>\r\n					</div> -->\r\n				</form>\r\n				<div class="col-3 form-section select-container">\r\n					<div class="label">Sort by:<i title="Select whether you would like the holiday price increase applied by the date the customer places the order or by the date the customer selected for delivery." class="icon icon-tool-tip x-space-s"></i></div>\r\n					<select name="f-sortby" id="f-sortby">\r\n				    	<option selected id="All" value="All">'+(null==(__t=sortType)?"":__t)+'</option>\r\n				    	<option id="Day" value="Day">Day</option>\r\n				    	<option id="Week" value="Week">Week</option>\r\n				    	<option id="Month" value="Month">Month</option>\r\n				    	<option id="Year" value="Year">Year</option>\r\n					</select>				\r\n				</div>\r\n				<div class="col-2 form-section buttonwithoutlabel">\r\n					<button type="button" id="search-stat-btn" class="btn btn-submit">Search</button>\r\n				</div>\r\n			</div>\r\n\r\n		\r\n\r\n			<div class="row row-spaced" id="report-all" style="display: none;">\r\n				<div class="col-12 y-space-top-l">\r\n			        <table class="table alternate">\r\n			            <thead>\r\n			                <tr class="highlighted">\r\n								<th class="col-1 left-align">Registration</th>\r\n								<th class="col-1 left-align">Orders</th>\r\n								<th class="col-1 left-align">Revenue</th>\r\n								<th class="col-1 left-align">Average Order Value</th>\r\n								<th class="col-1 left-align">Items Sold</th>\r\n								<th class="col-1 left-align">Promotion Codes Used</th>\r\n								<th class="col-1 left-align">Discount Total Amount</th>\r\n			                </tr>\r\n			            </thead>\r\n			            <tbody>\r\n			                <tr>\r\n			                    <td class="left-align">50</td>\r\n			                    <td class="left-align">377</td>\r\n			                    <td class="left-align">$20,340.67</td>\r\n			                    <td class="left-align">$53.95</td>\r\n			                    <td class="left-align">425</td>\r\n			                    <td class="left-align">85</td>\r\n			                    <td class="left-align">$1,278</td>             \r\n			                </tr>	              \r\n			            </tbody>\r\n			        </table>\r\n					<button type="button" class="btn btn-submit left-align y-space-top-l">DOWNLOAD</button>\r\n			    </div> \r\n			</div>\r\n\r\n			<div class="row row-spaced" id="report-day" style="display:none;">\r\n				<div class="col-12 y-space-top-l">\r\n			        <table class="table alternate">\r\n			            <thead>\r\n			                <tr class="highlighted">\r\n			                    <th class="col-1 left-align">Day</th>\r\n								<th class="col-1 left-align">Registration</th>\r\n								<th class="col-1 left-align">Orders</th>\r\n								<th class="col-1 left-align">Revenue</th>\r\n								<th class="col-1 left-align">Average Order Value</th>\r\n								<th class="col-1 left-align">Items Sold</th>\r\n								<th class="col-1 left-align">Promotion Codes Used</th>\r\n								<th class="col-1 left-align">Discount Total Amount</th>\r\n			                </tr>\r\n			            </thead>\r\n			            <tbody>\r\n			                <tr>\r\n			                    <td class="left-align">01/05/2015</td>\r\n			                    <td class="left-align">11</td>\r\n			                    <td class="left-align">25</td>\r\n			                    <td class="left-align">$3,222</td>\r\n			                    <td class="left-align">$12.88</td>\r\n			                    <td class="left-align">28</td>\r\n			                    <td class="left-align">9</td>\r\n			                    <td class="left-align">$79</td>             \r\n			                </tr>\r\n			                <tr>\r\n			                    <td class="left-align">01/06/2015</td>\r\n			                    <td class="left-align">3</td>\r\n			                    <td class="left-align">22</td>\r\n			                    <td class="left-align">$1,856</td>\r\n			                    <td class="left-align">$50.11</td>\r\n			                    <td class="left-align">2</td>\r\n			                    <td class="left-align">2</td>\r\n			                    <td class="left-align">$14</td>             \r\n			                </tr>\r\n			                 <tr>\r\n			                    <td class="left-align">01/07/2015</td>\r\n			                    <td class="left-align">0</td>\r\n			                    <td class="left-align">9</td>\r\n			                    <td class="left-align">$2,000</td>\r\n			                    <td class="left-align">$203.21</td>\r\n			                    <td class="left-align">4</td>\r\n			                    <td class="left-align">1</td>\r\n			                    <td class="left-align">$1,400</td>             \r\n			                </tr>	      	              \r\n			            </tbody>\r\n			        </table>\r\n			        <button type="button" class="btn btn-submit left-align y-space-top-l">DOWNLOAD</button>\r\n			    </div> \r\n			</div>\r\n\r\n			<div class="row row-spaced" id="report-week" style="display:none;">\r\n				<div class="col-12 y-space-top-l">\r\n			        <table class="table alternate">\r\n			            <thead>\r\n			                <tr class="highlighted">\r\n			                    <th class="col-2 left-align">Week</th>\r\n								<th class="col-1 left-align">Registration</th>\r\n								<th class="col-1 left-align">Orders</th>\r\n								<th class="col-1 left-align">Revenue</th>\r\n								<th class="col-1 left-align">Average Order Value</th>\r\n								<th class="col-1 left-align">Items Sold</th>\r\n								<th class="col-1 left-align">Promotion Codes Used</th>\r\n								<th class="col-1 left-align">Discount Total Amount</th>\r\n			                </tr>\r\n			            </thead>\r\n			            <tbody>\r\n			                <tr>\r\n			                    <td class="left-align">03/08 - 03/14</td>\r\n			                    <td class="left-align">44</td>\r\n			                    <td class="left-align">33</td>\r\n			                    <td class="left-align">$5,023</td>\r\n			                    <td class="left-align">$152.21</td>\r\n			                    <td class="left-align">50</td>\r\n			                    <td class="left-align">18</td>\r\n			                    <td class="left-align">$101</td>             \r\n			                </tr>\r\n			                <tr>\r\n			                    <td class="left-align">03/15 - 03/21</td>\r\n			                    <td class="left-align">51</td>\r\n			                    <td class="left-align">28</td>\r\n			                    <td class="left-align">$7,000</td>\r\n			                    <td class="left-align">$99.50</td>\r\n			                    <td class="left-align">82</td>\r\n			                    <td class="left-align">50</td>\r\n			                    <td class="left-align">$2,250</td>             \r\n			                </tr>	 \r\n			                <tr>\r\n			                    <td class="left-align">03/22 - 03/28</td>\r\n			                    <td class="left-align">19</td>\r\n			                    <td class="left-align">80</td>\r\n			                    <td class="left-align">$25,000</td>\r\n			                    <td class="left-align">$3,000</td>\r\n			                    <td class="left-align">155</td>\r\n			                    <td class="left-align">15</td>\r\n			                    <td class="left-align">$8,000</td>             \r\n			                </tr>	 	              \r\n			            </tbody>\r\n			        </table>\r\n			        <button type="button" class="btn btn-submit left-align y-space-top-l">DOWNLOAD</button>\r\n			    </div> \r\n			</div>\r\n\r\n			<div class="row row-spaced" id="report-month" style="display:none;">\r\n				<div class="col-12 y-space-top-l">\r\n			        <table class="table alternate">\r\n			            <thead>\r\n			                <tr class="highlighted">		        \r\n			                    <th class="col-1 left-align">Month</th>\r\n								<th class="col-1 left-align">Registration</th>\r\n								<th class="col-1 left-align">Orders</th>\r\n								<th class="col-1 left-align">Revenue</th>\r\n								<th class="col-1 left-align">Average Order Value</th>\r\n								<th class="col-1 left-align">Items Sold</th>\r\n								<th class="col-1 left-align">Promotion Codes Used</th>\r\n								<th class="col-1 left-align">Discount Total Amount</th>\r\n			                </tr>\r\n			            </thead>\r\n			            <tbody>\r\n			                <tr>			                   \r\n			                    <td class="left-align">March</td>\r\n			                    <td class="left-align">44</td>\r\n			                    <td class="left-align">350</td>\r\n			                    <td class="left-align">$16,629</td>\r\n			                    <td class="left-align">$47.51</td>\r\n			                    <td class="left-align">333</td>\r\n			                    <td class="left-align">60</td>\r\n			                    <td class="left-align">$993</td>             \r\n			                </tr>\r\n			                <tr>			                   \r\n			                    <td class="left-align">April</td>\r\n			                    <td class="left-align">200</td>\r\n			                    <td class="left-align">650</td>\r\n			                    <td class="left-align">$190,000</td>\r\n			                    <td class="left-align">$100.29</td>\r\n			                    <td class="left-align">560</td>\r\n			                    <td class="left-align">320</td>\r\n			                    <td class="left-align">$22,000</td>             \r\n			                </tr>	 	              \r\n			            </tbody>\r\n			        </table>\r\n			        <button type="button" class="btn btn-submit left-align y-space-top-l">DOWNLOAD</button>\r\n			    </div> \r\n			</div>\r\n\r\n			<div class="row row-spaced" id="report-year" style="display:none;">\r\n				<div class="col-12 y-space-top-l">\r\n			        <table class="table alternate">\r\n			            <thead>\r\n			                <tr class="highlighted">			                    \r\n			                    <th class="col-1 left-align">Year</th>\r\n								<th class="col-1 left-align">Registration</th>\r\n								<th class="col-1 left-align">Orders</th>\r\n								<th class="col-1 left-align">Revenue</th>\r\n								<th class="col-1 left-align">Average Order Value</th>\r\n								<th class="col-1 left-align">Items Sold</th>\r\n								<th class="col-1 left-align">Promotion Codes Used</th>\r\n								<th class="col-1 left-align">Discount Total Amount</th>\r\n			                </tr>\r\n			            </thead>\r\n			            <tbody>\r\n			                <tr>			               \r\n			                    <td class="left-align">2014</td>\r\n			                    <td class="left-align">2,986</td>\r\n			                    <td class="left-align">3,650</td>\r\n			                    <td class="left-align">$606,789</td>\r\n			                    <td class="left-align">$80</td>\r\n			                    <td class="left-align">20,046</td>\r\n			                    <td class="left-align">8,812</td>\r\n			                    <td class="left-align">$179,516</td>             \r\n			                </tr>	\r\n			                <tr>			               \r\n			                    <td class="left-align">2013</td>\r\n			                    <td class="left-align">1,456</td>\r\n			                    <td class="left-align">3,102</td>\r\n			                    <td class="left-align">$489,789</td>\r\n			                    <td class="left-align">$63.74</td>\r\n			                    <td class="left-align">16,132</td>\r\n			                    <td class="left-align">4,993</td>\r\n			                    <td class="left-align">$122,673</td>             \r\n			                </tr>	              \r\n			            </tbody>\r\n			        </table>\r\n			        <button type="button" class="btn btn-submit left-align y-space-top-l">DOWNLOAD</button>\r\n			    </div> \r\n			</div>\r\n\r\n\r\n\r\n\r\n			<div class="row row-spaced" >\r\n				<div class="col-12 y-space-top-l">\r\n			        <table class="table borderlesstable">\r\n			            <!-- <thead>\r\n			                <tr class="highlighted">\r\n			                    <th class="col-1 left-align">Date</th>\r\n			                    <th class="col-2 left-align">Reward Activity</th>\r\n			                </tr>\r\n			            </thead> -->\r\n			            <tbody>\r\n			                <tr class="borderlesstable">\r\n			                    <td class="left-align boldtext">Registration</td>\r\n			                    <td class="left-align">The number of new user registrations for your version of FloralApp, durin your selected time period.</td>             \r\n			                </tr>\r\n			                <tr class="borderlesstable">\r\n			                    <td class="left-align boldtext">Orders</td>\r\n			                    <td class="left-align">The number of orders that were placed over your FloralApp, during your selected time period.</td>	                    \r\n			                </tr>\r\n			                <tr class="borderlesstable">\r\n			                    <td class="left-align boldtext">Revenue</td>\r\n			                    <td class="left-align">This is the Gross amount for all orders placed during your selected time period.</td>	                    \r\n			                </tr>\r\n			                <tr class="borderlesstable">\r\n			                    <td class="left-align boldtext">Average Order Value</td>\r\n			                    <td class="left-align">This is the average order value of orders placed on your FloralApp during your selected time period.</td>	                \r\n			                </tr>\r\n			                <tr class="borderlesstable">\r\n			                    <td class="left-align boldtext">Items Sold</td>\r\n			                    <td class="left-align">This is the number of items sold in total, during your selected time period.</td>	                \r\n			                </tr>\r\n			                <tr class="borderlesstable">\r\n			                    <td class="left-align boldtext">Promotion Codes Used</td>\r\n			                    <td class="left-align">This is how many times a promotion code was used when placing an order on your FloralApp, during your selected time period.</td>               \r\n			                </tr>\r\n			                <tr class="borderlesstable">\r\n			                    <td class="left-align boldtext">Discount Total Amount</td>\r\n			                    <td class="left-align">This is the total amount of discounts used for  orders placed on FloralApp during your selected time period.</td>	                \r\n			                </tr>			              \r\n			            </tbody>\r\n\r\n			        </table>\r\n			    </div> \r\n			</div>\r\n\r\n		</div>\r\n		<!-- End of Account Tab -->\r\n\r\n		<!-- Start of Settings Tab -->\r\n		<div id="users">\r\n\r\n			<div class="row row-spaced">\r\n				<form name="f-user-dates" id="f-user-dates" class="form-section">\r\n					<div class="col-3 date-container form-section">\r\n						<div class="label">User Date From:</div>\r\n					    <input type="text" id="f-userStartDate" name="f-userStartDate" class="f-userStartDate" value="'+(null==(__t=userStartDate)?"":__t)+'">\r\n					</div>\r\n					<div class="col-3 date-container form-section">\r\n						<div class="label">To:</div>\r\n					    <input type="text" id="f-userEndDate" name="f-userEndDate" class="f-userEndDate" value="'+(null==(__t=userEndDate)?"":__t)+'">\r\n					</div>\r\n				</form>\r\n				<div class="col-2 form-section buttonwithoutlabel">\r\n					<button type="button" id="search-user-btn" class="btn btn-submit">Search</button>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced" id="user-report" style="display:none;">\r\n				<div class="col-12 y-space-top-l">\r\n			        <table class="table alternate">\r\n			            <thead>\r\n			                <tr class="highlighted">\r\n			                    <th class="col-1 left-align">Floral App Code</th>\r\n								<th class="col-1 left-align">Date Sign Up</th>\r\n								<th class="col-1 left-align">First Name</th>\r\n								<th class="col-1 left-align">Last Name</th>\r\n								<th class="col-1 left-align">Email Address</th>\r\n								<th class="col-1 left-align">How did you hear about us?</th>\r\n\r\n			                </tr>\r\n			            </thead>\r\n			            <tbody>\r\n			                <tr>\r\n			                    <td class="left-align">56SUDT2</td>\r\n			                    <td class="left-align">2/18/2015</td>\r\n			                    <td class="left-align">Gregorio</td>\r\n			                    <td class="left-align">Pinto</td>\r\n			                    <td class="left-align">gpinto@teleflora.com</td>\r\n			                    <td class="left-align">Friend</td>         \r\n			                </tr>\r\n			                <tr>\r\n			                    <td class="left-align">5091789</td>\r\n			                    <td class="left-align">2/18/2015</td>\r\n			                    <td class="left-align">Jeffrey</td>\r\n			                    <td class="left-align">Takaki</td>\r\n			                    <td class="left-align">jtakaki@teleflora.com</td>\r\n			                    <td class="left-align">Colleague</td>         \r\n			                </tr>	              \r\n			            </tbody>\r\n			        </table>\r\n			    </div> \r\n			    <div class="col-3 y-space-top-l"><button type="button" class="btn btn-submit">DOWNLOAD</button></div>\r\n			</div>\r\n\r\n\r\n\r\n		</div>\r\n		<!-- End of Settings Tab -->\r\n\r\n    </div><!-- End of Tabs Section -->\r\n\r\n</div>';return __p}}),define("content/category-sections/reporting/floral-app-reports/models/floral-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-floral-app-reports.json",defaults:{statsStartDate:"",statsEndDate:"",userStartDate:"",userEndDate:"",sortType:"",sortUserby:""}});return new t}),define("content/category-sections/reporting/floral-app-reports/collections/floral-collection",["backbone","../models/floral-model"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("content/category-sections/reporting/floral-app-reports/views/floral-app-report-home-view",["backbone","../templates/floral-app-report-home-view-tpl","../models/floral-model","../collections/floral-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({tagName:"div",id:"f-floral-app-report-home",template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyTabs(),e.applyDates(),e.applyUserDates(),e.applyToolTips(),e.valUserForm(),e.valStatForm()}.bind(this)),this},cacheElem:function(){this.$statisticsDateForm=this.$el.find("#f-statistic-dates"),this.$userDateForm=this.$el.find("#f-user-dates"),this.$statsStartDate=this.$el.find("#f-statsStartDate"),this.$statsEndDate=this.$el.find("#f-statsEndDate"),this.$userStartDate=this.$el.find("#f-userStartDate"),this.$userEndDate=this.$el.find("#f-userEndDate"),this.$sortType=this.$el.find("#f-sortType"),this.$reportAll=this.$el.find("#report-all"),this.$reportDay=this.$el.find("#report-day"),this.$reportWeek=this.$el.find("#report-week"),this.$reportMonth=this.$el.find("#report-month"),this.$reportYear=this.$el.find("#report-year"),this.$userReport=this.$el.find("#user-report"),this.$Day=this.$el.find("#Day"),this.$Week=this.$el.find("#Week"),this.$Month=this.$el.find("#Month"),this.$Year=this.$el.find("#Year"),this.$All=this.$el.find("#All"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #search-stat-btn":"reportStatChange","click #search-user-btn":"reportUserChange","click #save-btn":"handleSave"},reportStatChange:function(){var e=this;e.$reportAll.css({display:"none"}),e.$reportDay.css({display:"none"}),e.$reportWeek.css({display:"none"}),e.$reportMonth.css({display:"none"}),e.$reportYear.css({display:"none"}),e.$statisticsDateForm.valid()&&(e.$Day.is("option:selected")?e.$reportDay.css({display:"block"}):e.$Week.is("option:selected")?e.$reportWeek.css({display:"block"}):e.$Month.is("option:selected")?e.$reportMonth.css({display:"block"}):e.$Year.is("option:selected")?e.$reportYear.css({display:"block"}):e.$All.is("option:selected")&&e.$reportAll.css({display:"block"}))},reportUserChange:function(){var e=this;e.$userReport.css({display:"none"}),e.$userDateForm.valid()&&e.$userReport.css({display:"block"})},handleSave:function(){o.trigger("form:save",this.$tip)},applyTabs:function(){this.$el.find("#tabs").tabs()},applyDates:function(){var e=this;e.$statsStartDate.datepicker({onSelect:function(t){e.$statsEndDate.datepicker("option","minDate",t),e.$statsStartDate.trigger("blur")
},dateFormat:"mm/dd/y"}),e.$statsEndDate.datepicker({onSelect:function(t){e.$statsStartDate.datepicker("option","maxDate",t),e.$statsEndDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyUserDates:function(){var e=this;e.$userStartDate.datepicker({onSelect:function(t){e.$userEndDate.datepicker("option","minDate",t),e.$userStartDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$userEndDate.datepicker({onSelect:function(t){e.$userStartDate.datepicker("option","maxDate",t),e.$userEndDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},valStatForm:function(){var e=this;e.$statisticsDateForm.validate({rules:{"f-statsStartDate":{required:!0},"f-statsEndDate":{required:!0}}})},valUserForm:function(){var e=this;e.$userDateForm.validate({rules:{"f-userStartDate":{required:!0},"f-userEndDate":{required:!0}}})}});return new r}),define("content/category-sections/reporting/floral-app-reports/views/floral-app-report-view",["backbone","./floral-app-report-home-view"],function(e,t){var n=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)}});return new n}),define("text!content/category-sections/reporting/esat-audit-log/templates/audit-log-home-view-tpl.html",[],function(){return'<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title">\r\n			<h2 class="pull-left">eSAT Audit Log</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<!-- Hidden Alert Message for invalid search -->\r\n<div class="row row-spaced panel alert-panel hidden-alt" id="search-alert">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-4x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				Please enter search criteria into at least one of the below fields in order to look up orders.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced form-section panel">\r\n	<form id="p-form" class="form-section">\r\n		<div class="row row-spaced">\r\n			<div class="col-3 form-section" >\r\n				<label for="f-teleflora-id">Teleflora ID</label>\r\n				<input type="text" id="f-teleflora-id" name="f-teleflora-id">\r\n			</div>\r\n\r\n			<div class="col-3 form-section" >\r\n				<label for="f-start-date">Start Date</label>\r\n				<div class="date-container">\r\n				    <input type="text" id="f-start-date" name="f-start-date" class="date">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-3 form-section" >\r\n				<label for="f-end-date">End Date</label>\r\n				<div class="date-container">\r\n				    <input type="text" id="f-end-date" name="f-end-date" class="date">\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<div class="row">\r\n					<div class="col-3 form-section"><label for="f-site-id">Site ID</label></div>\r\n					<div class="col-3 form-section"><label for="f-user-id">User ID</label></div>\r\n				</div>\r\n\r\n				<div class="row form-section">\r\n					<div class="col-3 form-section"><input type="text" id="f-site-id" name="f-site-id"></div>\r\n					<div class="col-3 form-section"><input type="text" id="f-user-id" name="f-user-id"></div>\r\n					<div class="col-3 form-section"><button type="button" class="btn btn-submit y-space-s" id="search-btn">Search</button></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</form>\r\n	<div class="showResults">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Audit Search Result</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				Click on any entry to view the activity details.\r\n			</div>\r\n		</div>\r\n		<table id="audit-table" class="table alternate">\r\n			<thead>\r\n				<tr>\r\n					<th class="left-align">Teleflora ID<button data-attribute="telefloraID" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					<th class="left-align">Site ID<button data-attribute="siteID" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					<th class="left-align">User ID<button data-attribute="userID" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					<th class="left-align">Creation Time<button data-attribute="creationTime" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					<th class="left-align">Page<button data-attribute="page" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n					<th class="left-align">Audit Action<button data-attribute="action" class="icon icon-btn icon-sort sort-btn"></button></th>\r\n				</tr>\r\n			</thead>\r\n			<tbody id="audit-list"></tbody>\r\n		</table>\r\n	</div>\r\n</div>\r\n'}),define("content/category-sections/reporting/esat-audit-log/models/audit-model",["backbone"],function(e){var t=e.Model.extend({defaults:{telefloraID:null,siteID:null,creationTime:"",userID:null,shopName:"",startDate:"",endDate:"",page:"",creationTime:"",action:"",itemName:"",itemNewValue:"",itemOldValue:"",auditItemID:""}});return t}),define("content/category-sections/reporting/esat-audit-log/collections/audit-collection",["backbone","../models/audit-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-esat-audit-log.json",model:t,getSortFunction:function(e,t){return"ascending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)<n.get(e)?-1:1}:"descending"===t?function(t,n){return t.get("isDefault")?-1:n.get("isDefault")?1:t.get(e)>n.get(e)?-1:1}:void 0},changeSort:function(e,t){this.comparator=this.getSortFunction(e,t)}});return new n}),define("content/category-sections/reporting/esat-audit-log/templates/audit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="clickable">\r\n	<td class="left-align">'+(null==(__t=telefloraID)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=siteID)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=userID)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=creationTime)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=page)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=action)?"":__t)+"</td>\r\n</tr>";return __p}}),define("content/category-sections/reporting/esat-audit-log/views/audit-view",["backbone","../templates/audit-view-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON()))},events:{click:"showDetails"},showDetails:function(){this.parent.showDetails(this.model)},resend:function(){var e=this;n.trigger("modal:custom",{template:{title:"Resending Dove Number",text:'This order is now being resent via Dove. The customer will be receiving the order shortly.\n					<h3 class="center-align">Dove No. '+e.model.get("doveNumber")+"</h3>",confirmBtnText:"OK",singleBtn:!0}})}});return i}),define("content/category-sections/reporting/esat-audit-log/views/esat-audit-log-home-view",["backbone","text!../templates/audit-log-home-view-tpl.html","../collections/audit-collection","./audit-view","datatables","jqueryui","jqueryval"],function(e,t,n,i){var o=e.View.extend({tagName:"div",id:"f-order-lookup",template:t,initialize:function(){this.listenTo(n,"sort",this.addwithoutHide)},render:function(){var e=this;return e.$el.html(this.template),e.delegateEvents(),e.cacheElem(),n.fetchCustom().done(function(){e.addAllAuditLogs(),e.applyDataTables(e.$auditTable),e.validateForm()}),e.applyDates(),e},cacheElem:function(){this.$createEditForm=this.$el.find("#p-form"),this.$auditList=this.$el.find("#audit-list"),this.$auditTable=this.$el.find("#audit-table"),this.$telefloraID=this.$el.find("#f-teleflora-id"),this.$startDate=this.$el.find("#f-start-date"),this.$endDate=this.$el.find("#f-end-date"),this.$siteID=this.$el.find("#f-site-id"),this.$userID=this.$el.find("#f-user-id"),this.$searchAlert=this.$el.find("#search-alert"),this.$showResults=this.$el.find(".showResults"),this.$sortButtons=this.$el.find(".sort-btn")},events:{"change #f-teleflora-id":"validateFields","change #f-start-date":"validateFields","change #f-end-date":"validateFields","change #f-site-id":"validateFields","change #f-user-id":"validateFields","click #search-btn":"handleSearch","click .sort-btn":"handleSort"},showError:function(){this.$searchAlert.fadeIn(1e3)},hideError:function(){this.$searchAlert.fadeOut(1e3)},addAuditLog:function(e){var t=new i({model:e,parent:this.parent});this.$auditList.append(t.render().el)},addAllAuditLogs:function(){this.$auditList.empty(),this.$showResults.addClass("hidden"),n.each(this.addAuditLog,this)},addwithoutHide:function(){this.$auditList.empty(),n.each(this.addAuditLog,this)},applyDataTables:function(e){this.dataTable=e.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},handleSearch:function(){var e=this;if(e.$createEditForm.valid()){{var t=this.$telefloraID.val(),n=this.$startDate.val(),i=this.$endDate.val(),o=this.$siteID.val();this.$userID.val()}this.$showResults.addClass("hidden"),(t.length>0&&n.length>0&&i.length>0||o.length>0&&n.length>0&&i.length>0)&&this.$showResults.removeClass("hidden")}},handleSort:function(e){var t=$(e.target),i=t.data("attribute");t.hasClass("icon-sort-asc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-desc"),n.changeSort(i,"descending")):t.hasClass("icon-sort-desc")?(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),n.changeSort(i,"ascending")):(this.$sortButtons.removeClass("icon-sort-asc icon-sort-desc"),this.$sortButtons.addClass("icon-sort"),t.addClass("icon-sort-asc"),n.changeSort(i,"ascending")),n.sort()},validateFields:function(){var e=this;e.$telefloraID.valid(),e.$startDate.valid(),e.$endDate.valid(),e.$siteID.valid(),e.$userID.valid()},validateForm:function(){var e=this;e.$createEditForm.validate({rules:{"f-teleflora-id":{required:{depends:function(){return e.$siteID.is(":filled")||e.$userID.is(":filled")||e.$startDate.is(":filled")?void 0:!0}}},"f-site-id":{required:{depends:function(){return e.$telefloraID.is(":filled")||e.$userID.is(":filled")||e.$startDate.is(":filled")?void 0:!0}}},"f-user-id":{required:{depends:function(){return e.$telefloraID.is(":filled")||e.$siteID.is(":filled")||e.$startDate.is(":filled")?void 0:!0}}},"f-start-date":{required:!0},"f-end-date":{required:!0}}})}});return new o}),define("content/category-sections/reporting/esat-audit-log/templates/audit-details-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">eSAT Audit Log Details</h2>\r\n			<div class="btn-panel">\r\n<!-- 				<button class="btn btn-submit pull-right" id="order-lookup-resend-btn"><i class="icon icon-undo"></i>Resend</button> -->\r\n				<button class="btn btn-submit pull-right"><i class="icon icon-print"></i>Print</button>\r\n				<button id="cancel-btn" class="btn btn-other pull-right">Cancel</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">View the selected audit log details below.</div>\r\n</div>\r\n\r\n<!--// Order Info [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Shop Info &amp; Date Range</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Shop Name</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=shopName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Teleflora ID</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=telefloraID)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Site ID</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=siteID)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Start Date</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=startDate)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">End Date</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=endDate)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">User ID</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=userID)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Order Info [End] //-->\r\n\r\n<!--// Recipient Info [Start] //-->\r\n<div class="row row-spaced panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Activity Details</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Creation Time</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=creationTime)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Page</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=page)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Audit Action</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=action)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Item Name</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=itemName)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Item New Value</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=itemNewValue)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">				\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Item Old Value</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=itemOldValue)?"":__t)+'</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced-s detail-block">\r\n			<div class="col-12">				\r\n				<div class="row">\r\n					<div class="col-12">\r\n						<div class="col-3 right-align detail-title">Audit Item ID</div>\r\n						<div class="detail-divider"></div>\r\n						<div class="col-9 left-align detail-text">'+(null==(__t=auditItemID)?"":__t)+"</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!--// Recipient Info [End] //-->\r\n\r\n";return __p}}),define("content/category-sections/reporting/esat-audit-log/views/audit-details-view",["backbone","../templates/audit-details-tpl","global-events"],function(e,t,n){var i=e.View.extend({tagName:"div",id:"order-details",template:t,render:function(){var e=this.model.toJSON();return this.$el.html(this.template(e)),this.delegateEvents(),this.cacheElem(),this},cacheElem:function(){this.$creditCardNumber=this.$el.find("#credit-card-number")},events:{"click #cancel-btn":"showHome","click #toggle-credit-card-number-btn":"toggleCreditCardNumber","click #order-lookup-resend-btn":"resend"},showHome:function(){this.parent.showHome()},resend:function(){var e=this;n.trigger("modal:custom",{template:{title:"Resending Dove Number",text:'This order is now being resent via Dove. The customer will be receiving the order shortly.\n	          				<h3 class="center-align">Dove No. '+e.model.get("doveNumber")+"</h3>",confirmBtnText:"OK",singleBtn:!0}})},toggleCreditCardNumber:function(){this.$creditCardNumber.text(this.$creditCardNumber.text().trim().match(/XXXX-XXXX-XXXX/)?this.model.get("creditCardAccountNumberPayPalEmail")+" Expiration Date: "+this.model.get("creditCardExpirationDate"):this.model.get("creditCardAccountNumberPayPalEmail").replace(/\d{4}-\d{4}-\d{4}/,"XXXX-XXXX-XXXX"))}});return new i}),define("content/category-sections/reporting/esat-audit-log/views/esat-audit-log-view",["backbone","./esat-audit-log-home-view","./audit-details-view"],function(e,t,n){var i=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus())},showHome:function(){this.replaceVisible(t)},showDetails:function(e){n.model=e,this.replaceVisible(n)}});return new i}),define("content/category-sections/more/general-settings/templates/general-settings-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">General Settings</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n            <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this section to change settings, including setting a suspension, changing tax rates, and contact information.\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n\r\n<div id="tabs">\r\n  <ul>\r\n    <li><a class="general-settings-tab" href="#site-activation">Site Activation</a></li>\r\n    <li><a class="general-settings-tab" href="#shop-information">Shop Information</a></li>\r\n    <li><a class="general-settings-tab" href="#site-settings">Site Settings</a></li>\r\n    <li><a class="general-settings-tab" href="#tax">Tax</a></li>\r\n    <li><a class="general-settings-tab" href="#payment">Payment</a></li>\r\n  </ul>\r\n\r\n    <!-- site activation start -->\r\n      <div id="site-activation">\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Change Site Status\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4 center-align"><button type="button" class="btn btn-cancel"><i class="icon icon-ban"></i>  Cancel Site</button></div>\r\n            <div class="col-8">This button will cancel the site and should only be used if the florist has submitted paperwork and been through saves. If you are unsure, please check with the supervisor.\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Suspend Site\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <form id="create-suspension-form" class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="suspension-message">Suspension Message</label><i title="This will tell customers in a message why the website is currently closed." class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="suspension-message" name="suspension-message">\r\n            </div>\r\n\r\n            <div class="col-3 form-section">\r\n                <label for="start-date">Start Date</label><i title="When should this suspension begin?" class="icon icon-tool-tip x-space-s"></i>\r\n                <div class="date-container">\r\n                    <input type="text" id="start-date" name="start-date" class="date">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-3 form-section">\r\n                <label for="end-date">End Date</label><i title="When should this suspension end?" class="icon icon-tool-tip x-space-s"></i>\r\n                <div class="date-container">\r\n                    <input type="text" id="end-date" name="end-date" class="date">\r\n                </div>\r\n            </div>\r\n        </form>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-12">\r\n                <button type="button" id="new-suspension-btn" class="btn btn-other"><i class="icon icon-add icon-lg"></i>Schedule Suspension</button>\r\n            </div>\r\n        </div>\r\n        <div class="row panel alert-panel hidden">\r\n            <div class="col-12">\r\n                <div class="row">\r\n                    <div class="col-1">\r\n                        <div class="icon icon-3x icon-warning"></div>\r\n                    </div>\r\n                    <div class="col-11 alert-text">\r\n                        You may only have one suspension set up at a time. Please delete your existing suspension in order to add a new one.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <table class="table-list minimal">\r\n            <thead>\r\n                <tr>\r\n                    <th class="col-6 left-align">Suspension Message</th>\r\n                    <th class="col-2">Start Date</th>\r\n                    <th class="col-2">End Date</th>\r\n                    <th class="col-2">Delete</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody id="suspension-list">\r\n\r\n            </tbody>\r\n        </table>\r\n      </div>\r\n      <!-- site activation end -->\r\n\r\n      <!-- shop information start -->\r\n      <form id="shop-information" class="form-section">\r\n        <div class="row row-spaced">\r\n            <div class="col-12">\r\n                <h3 class="pull-left no-margin">Internal Testing URL</h3> <div class="pull-left x-space-s">'+(null==(__t=internalTestingUrl)?"":__t)+'</div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Basic Information\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="teleflora-id">Teleflora ID</label><i class="icon icon-tool-tip x-space-s" title="This ID number is unique to this shop. Do not change this without direct instruction from the supervisor."></i>\r\n                <input type="text" id="teleflora-id" name="teleflora-id" value="'+(null==(__t=telefloraId)?"":__t)+'">\r\n            </div>\r\n            <div class="col-6 form-section">\r\n                <label for="f-shop-info-url">URL</label><i class="icon icon-tool-tip x-space-s" title="This is the domain name that will direct to the website. Do not change this without a request from the shop. Check with the supervisor if unsure."></i>\r\n                <input type="text" id="f-shop-info-url" name="f-shop-info-url" value="'+(null==(__t=url)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="shop-name">Shop Name</label>\r\n                <input type="text" id="shop-name" name="shop-name" value="'+(null==(__t=shopName)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="address-1">Address 1</label>\r\n                <input type="text" id="address-1" name="address-1" value="'+(null==(__t=address1)?"":__t)+'">\r\n            </div>\r\n            <div class="col-6 form-section">\r\n                <label for="address-2">Address 2</label>\r\n                <input type="text" id="address-2" name="address-2" value="'+(null==(__t=address2)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="city">City</label>\r\n                <input type="text" id="city" name="city" value="'+(null==(__t=city)?"":__t)+'">\r\n            </div>\r\n            <div class="col-3 form-section">\r\n                <label id="stateProvinceLabel" for="state">'+(null==(__t="United States"===country?"State":"Province")?"":__t)+'</label>\r\n                <div class="select-container">\r\n                    <select id="state" name="state">\r\n                        <option selected disabled hidden value="'+(null==(__t=state)?"":__t)+'">'+(null==(__t=state)?"":__t)+'</option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AL">\r\n                            Alabama\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AK">\r\n                            Alaska\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AZ">\r\n                            Arizona\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AR">\r\n                            Arkansas\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="CA">\r\n                            California\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="CO">\r\n                            Colorado\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="CT">\r\n                            Connecticut\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="DE">\r\n                            Delaware\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="DC">\r\n                            District of Columbia\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="FL">\r\n                            Florida\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="GA">\r\n                            Georgia\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="HI">\r\n                            Hawaii\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="ID">\r\n                            Idaho\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="IL">\r\n                            Illinois\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="IN">\r\n                            Indiana\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="IA">\r\n                            Iowa\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="KS">\r\n                            Kansas\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="KY">\r\n                            Kentucky\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="LA">\r\n                            Louisiana\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="ME">\r\n                            Maine\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MD">\r\n                            Maryland\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MA">\r\n                            Massachusetts\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MI">\r\n                            Michigan\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MN">\r\n                            Minnesota\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MS">\r\n                            Mississippi\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MO">\r\n                            Missouri\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MT">\r\n                            Montana\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NE">\r\n                            Nebraska\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NV">\r\n                            Nevada\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NH">\r\n                            New Hampshire\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NJ">\r\n                            New Jersey\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NM">\r\n                            New Mexico\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NY">\r\n                            New York\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NC">\r\n                            North Carolina\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="ND">\r\n                            North Dakota\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="OH">\r\n                            Ohio\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="OK">\r\n                            Oklahoma\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="OR">\r\n                            Oregon\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="PA">\r\n                            Pennsylvania\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="PR">\r\n                            Puerto Rico\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="RI">\r\n                            Rhode Island\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="SC">\r\n                            South Carolina\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="SD">\r\n                            South Dakota\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="TN">\r\n                            Tennessee\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="TX">\r\n                            Texas\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="UT">\r\n                            Utah\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="VT">\r\n                            Vermont\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="VA">\r\n                            Virginia\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WA">\r\n                            Washington\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WV">\r\n                            West Virginia\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WI">\r\n                            Wisconsin\r\n                        </option>\r\n\r\n                        <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WY">\r\n                            Wyoming\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="AB">\r\n                            Alberta\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="BC">\r\n                            British Columbia\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="MB">\r\n                            Manitoba\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NB">\r\n                            New Brunswick\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NF">\r\n                            Newfoundland and Labrador\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NT">\r\n                            Northwest Territories\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NS">\r\n                            Nova Scotia\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NU">\r\n                            Nunavut\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="ON">\r\n                            Ontario\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="PE">\r\n                            Prince Edward Island\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="QC">\r\n                            Quebec\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="SK">\r\n                            Saskatchewan\r\n                        </option>\r\n\r\n                        <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="YT">\r\n                            Yukon\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="col-3 form-section">\r\n                <label id="zipPostalLabel" for="zip">'+(null==(__t="United States"===country?"Zip Code":"Postal Code")?"":__t)+'</label>\r\n                <input class="'+(null==(__t="United States"===country?"zipUS":"zipCA")?"":__t)+'" type="text" id="zip" name="zip" value="'+(null==(__t=zip)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="country">Country</label>\r\n                <div class="select-container">\r\n                    <select id="country" name="country">\r\n                        <option selected disabled hidden value="'+(null==(__t=country)?"":__t)+'">'+(null==(__t=country)?"":__t)+'</option>\r\n\r\n                        <option value="United States">United States</option>\r\n                        <option value="Canada">Canada</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div class="col-6 form-section">\r\n                <label for="local-phone-number">Local Phone Number</label>\r\n                <input type="tel" id="local-phone-number" name="local-phone-number" value="'+(null==(__t=localPhoneNumber)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="alternate-phone-number">Toll Free/Alternate Phone Number</label>\r\n                <input type="tel" id="alternate-phone-number" name="alternate-phone-number" value="'+(null==(__t=alternatePhoneNumber)?"":__t)+'">\r\n            </div>\r\n            <div class="col-6 form-section">\r\n                <label for="public-email">Public Email Address</label>\r\n                <input type="email" id="public-email" name="public-email" value="'+(null==(__t=publicEmail)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Contact Information\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="contact-name">Contact Name</label><i class="icon icon-tool-tip x-space-s" title="This is our point of contact at the shop."></i>\r\n                <input type="text" id="contact-name" name="contact-name" value="'+(null==(__t=contactName)?"":__t)+'">\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="contact-phone-number">Contact Phone Number</label><i class="icon icon-tool-tip x-space-s" title="This appears on the website as the contact phone number for the shop."></i>\r\n                <input type="tel" id="contact-phone-number" name="contact-phone-number" value="'+(null==(__t=contactPhoneNumber)?"":__t)+'">\r\n            </div>\r\n\r\n            <div class="col-6 form-section">\r\n                <label for="contact-alternate-phone-number">Alternate Phone Number</label><i class="icon icon-tool-tip x-space-s" title="This will show up on the site along with the contact phone number."></i>\r\n                <input type="tel" id="contact-alternate-phone-number" name="contact-alternate-phone-number" value="'+(null==(__t=contactAlternatePhoneNumber)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="contact-email">Contact Email Address</label><i class="icon icon-tool-tip x-space-s" title="This will show up on the site with the contact information on the about us page."></i>\r\n                <input type="email" id="contact-email" name="contact-email" value="'+(null==(__t=contactEmail)?"":__t)+'">\r\n            </div>\r\n            <div class="col-6 form-section">\r\n                <label for="contact-fax-number">Contact Fax Number</label><i class="icon icon-tool-tip x-space-s" title="This will show up on the site with the contact information on the about us page."></i>\r\n                <input type="tel" id="contact-fax-number" name="contact-fax-number" value="'+(null==(__t=contactFaxNumber)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <!-- shop information end -->\r\n\r\n    <!-- site settings start -->\r\n    <form id="site-settings" class="form-section">\r\n\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Site Settings\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4">\r\n                <div class="label">Display Phone in Header<i class="icon icon-tool-tip x-space-s" title="Leave this set to on to show the phone number in the website header."></i></div>\r\n                <input '+(null==(__t=phoneInHeaderActive?"checked":"")?"":__t)+' type="checkbox" id="phone-in-header-active" name="phone-in-header-active" class="on-off-switch" />\r\n                <label for="phone-in-header-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-push-4 col-4 form-section">\r\n                <label for="phone-number-displayed">Phone Number Displayed</label>\r\n                <div class="select-container">\r\n                    <select name="phone-number-displayed" id="phone-number-displayed">\r\n                        <option selected disabled hidden value="'+(null==(__t=phoneNumberDisplayed)?"":__t)+'">'+(null==(__t=phoneNumberDisplayed)?"":__t)+'</option>\r\n                        <option value="Local Number Only">Local Number Only</option>\r\n                        <option value="Toll Free Number Only">Toll Free Number Only</option>\r\n                        <option value="Display Both Shop Numbers">Display Both Shop Numbers</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4">\r\n                <div class="label">Display Click to Call<i class="icon icon-tool-tip x-space-s" title="Leave this set to on to show Click to Call in the footer."></i></div>\r\n                <input '+(null==(__t=clickCallActive?"checked":"")?"":__t)+' type="checkbox" id="display-click-call-active" name="display-click-call-active" class="on-off-switch" />\r\n                <label for="display-click-call-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-5">\r\n                <div class="label">Disable eCommerce Functionality<i class="icon icon-tool-tip x-space-s" title="If this setting is enabled, your site will not be able to be used to make purchases. Shoppers will not be able to check out."></i></div>\r\n                <input '+(null==(__t=disableEcommerceActive?"checked":"")?"":__t)+' type="checkbox" id="f-disable-Commerce-Active" name="f-disable-Commerce-Active" class="on-off-switch" />\r\n                <label for="f-disable-Commerce-Active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-3">\r\n                <div class="label">Translations<i class="icon icon-tool-tip x-space-s" title="Leave this turned on to allow Spanish and French translations."></i></div>\r\n                <input '+(null==(__t=translationsActive?"checked":"")?"":__t)+' type="checkbox" id="translation-active" name="translation-active" class="on-off-switch" />\r\n                <label for="translation-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4 form-section">\r\n                <label for="currency-symbol">Currency Symbol</label>\r\n                <input type="text" id="currency-symbol" name="currency-symbol" value="'+(null==(__t=currencySymbol)?"":__t)+'">\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="currency-label">Currency Label</label>\r\n                <input type="text" id="currency-label" name="currency-label" value="'+(null==(__t=currencyLabel)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-12 form-section">\r\n                <div class="panel-title">\r\n                    Point of Sale System Settings\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4">\r\n                <label for="point-of-sale-system">Point of Sale System</label><i class="icon icon-tool-tip x-space-s" title="Leave this set to their Point of Sale system. Do not change unless their POS system has changed. Verify with the supervisor if you are unsure."></i>\r\n                <div class="select-container">\r\n                    <select id="point-of-sale-system" name="point-of-sale-system">\r\n                        <option selected disabled hidden value="'+(null==(__t=pointOfSaleSystem)?"":__t)+'">'+(null==(__t=pointOfSaleSystem)?"":__t)+'</option>\r\n                        <option value="RTI">RTI</option>\r\n                        <option value="Daisy">Daisy</option>\r\n                        <option value="Dove POS">Dove POS</option>\r\n                        <option value="Eagle">Eagle</option>\r\n                        <option value="Other">Other</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <!-- site settings end -->\r\n\r\n     <!-- tax start -->\r\n    <form id="tax" class="form-section form-section">\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">Tax Rate</div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-8">\r\n                <div class="label">Use Automatic Tax Calculations<i class="icon icon-tool-tip x-space-s" title="If this setting is turned ON, tax for your site will be automatically calculated based on your shop\'s location and standard sales tax rates. If it is turned OFF, you will need to specify your sales tax rate in the Tax Rate field."></i></div>\r\n                <input '+(null==(__t=automaticTaxCalculationsActive?"checked":"")?"":__t)+' type="checkbox" id="f-automatic-tax-calculations-active" name="f-automatic-tax-calculations-active" class="on-off-switch" />\r\n                <label for="f-automatic-tax-calculations-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="f-tax-rate">Tax Rate (%)</label>\r\n                <input '+(null==(__t=automaticTaxCalculationsActive?"disabled":"")?"":__t)+' type="text" id="f-tax-rate" name="f-tax-rate" value="'+(null==(__t=taxRate)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-12 form-section">\r\n                <div class="panel-title">Tax Calculations</div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4">\r\n                <div class="label">Tax on Delivery Fees<i class="icon icon-tool-tip x-space-s" title="Leave this turned on to charge tax on the delivery fee."></i></div>\r\n                <input '+(null==(__t=taxDeliveryFeeActive?"checked":"")?"":__t)+' type="checkbox" id="tax-delivery-fee-active" name="tax-delivery-fee-active" class="on-off-switch" />\r\n                <label for="tax-delivery-fee-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">Tax Local Deliveries Only<i class="icon icon-tool-tip x-space-s" title="Leave this turned off to charge tax on all deliveries."></i></div>\r\n                <input '+(null==(__t=taxLocalOnlyActive?"checked":"")?"":__t)+' type="checkbox" id="tax-local-only" name="tax-local-only" class="on-off-switch" />\r\n                <label for="tax-local-only" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="tax-calculation">Tax Calculation</label><i class="icon icon-tool-tip x-space-s" title="Choose whether to charge tax by line item or by product total."></i>\r\n                <div class="select-container">\r\n                    <select id="tax-calculation" name="tax-calculation">\r\n                        <option selected disabled hidden value="'+(null==(__t=taxCalculation)?"":__t)+'">'+(null==(__t=taxCalculation)?"":__t)+'</option>\r\n                        <option value="By Line Item">By Line Item</option>\r\n                        <option value="Product Total Only">Product Total Only</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <!-- tax end -->\r\n\r\n        <!-- payment start -->\r\n    <form id="payment" class="form-section">\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Credit Card Settings\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4">\r\n                <div class="label">Accepted Cards</div>\r\n                <button type="button" id="configure-accepted-cards-btn" class="btn btn-submit">Configure</button>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="credit-card-authorization">Credit Card Authorization</label><i class="icon icon-tool-tip x-space-s" title="Use this to set up their method of credit card processing."></i>\r\n                <div class="select-container">\r\n                    <select id="credit-card-authorization" name="credit-card-authorization">\r\n                        <option selected disabled hidden value="'+(null==(__t=creditCardAuthorization)?"":__t)+'">'+(null==(__t=creditCardAuthorization)?"":__t)+'</option>\r\n                        <option value="Authorize and Capture">Authorize and Capture</option>\r\n                        <option value="CVV/AVS Only">CVV/AVS Only</option>\r\n                        <option value="No CC Processing">No CC Processing</option>\r\n                        <option value="Authorize Only">Authorize Only</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">Security Code Required<i class="icon icon-tool-tip x-space-s" title="Leave this turned on if the florist would like the CVV code to be required."></i></div>\r\n                <input '+(null==(__t=securityCodeActive?"checked":"")?"":__t)+' type="checkbox" id="security-code-active" name="security-code-active" class="on-off-switch" />\r\n                <label for="security-code-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">\r\n                    Additional Payment Methods\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4">\r\n                <div class="label">House Accounts<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept House Accounts online."></i></div>\r\n                <input '+(null==(__t=houseAccountsActive?"checked":"")?"":__t)+' type="checkbox" id="house-accounts-active" name="house-accounts-active" class="on-off-switch" />\r\n                <label for="house-accounts-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">Pay In Store<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to allow customers to place an order for pickup, and then pay in store."></i></div>\r\n                <input '+(null==(__t=payInStoreActive?"checked":"")?"":__t)+' type="checkbox" id="pay-in-store-active" name="pay-in-store-active" class="on-off-switch" />\r\n                <label for="pay-in-store-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">JCB<i class="icon icon-tool-tip x-space-s" title="Turning this ON will allow your users to pay using JCB."></i></div>\r\n                <input '+(null==(__t=jcbActive?"checked":"")?"":__t)+' type="checkbox" id="jcb-active" name="jcb-active" class="on-off-switch" />\r\n                <label for="jcb-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4">\r\n                <div class="label">Carte Blanche<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept Carte Blanche online."></i></div>\r\n                <input '+(null==(__t=carteBlancheActive?"checked":"")?"":__t)+' type="checkbox" id="carte-blanche-active" name="carte-blanche-active" class="on-off-switch" />\r\n                <label for="carte-blanche-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">PayPal<i class="icon icon-tool-tip x-space-s" title="Use the button below to configure PayPal options for your site."></i></div>\r\n                <button type="button" id="configure-paypal-btn" class="btn btn-submit">Configure</button>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">Gift Cards<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept gift cards online."></i></div>\r\n                <input '+(null==(__t=giftCardsActive?"checked":"")?"":__t)+' type="checkbox" id="gift-cards-active" name="gift-cards-active" class="on-off-switch" />\r\n                <label for="gift-cards-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n      </div>\r\n    </form>\r\n    <!-- payment -->\r\n</div>\r\n\r\n<div id="configure-modal"></div>';
return __p}}),define("content/category-sections/more/general-settings/models/general-settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-general-settings.json",defaults:{internalTestingUrl:"",telefloraId:"",url:"http://",shopName:"",address1:"",address2:"",city:"",state:"",zip:"",country:"United States",localPhoneNumber:"",alternatePhoneNumber:"",publicEmail:"",contactName:"",contactPhoneNumber:"",contactAlternatePhoneNumber:"",contactEmail:"",contactFaxNumber:"",phoneInHeaderActive:!0,phoneNumberDisplayed:"Primary Phone",clickCallActive:!0,disableEcommerceActive:!0,translationsActive:!0,currencySymbol:"$",currencyLabel:"",pointOfSaleSystem:"RTI",automaticTaxCalculationsActive:!1,taxRate:"",taxDeliveryFeeActive:!1,taxLocalOnlyActive:!0,taxCalculation:"By Line Item",creditCardAuthorization:"Authorize and Capture",securityCodeActive:!1,houseAccountsActive:!1,payInStoreActive:!1,jcbActive:!1,carteBlancheActive:!1,giftCardsActive:!0,creditCardVisaActive:!0,creditCardMasterCardActive:!0,creditCardDiscoverActive:!0,creditCardAmericanExpressActive:!0,paypalActive:!0,payPalEmailAddress:"",payPalPosAccountNumber:""}});return new t}),define("content/category-sections/more/general-settings/models/suspension-model",["backbone"],function(e){var t=e.Model.extend({defaults:{message:"",startDate:"",endDate:""}});return t}),define("content/category-sections/more/general-settings/collections/suspension-collection",["backbone","../models/suspension-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-suspensions.json",model:t});return new n}),define("content/category-sections/more/general-settings/templates/suspension-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n    <td class="left-align">'+(null==(__t=message)?"":__t)+"</td>\r\n    <td>"+(null==(__t=startDate)?"":__t)+"</td>\r\n    <td>"+(null==(__t=endDate)?"":__t)+'</td>\r\n    <td>\r\n        <button class="icon icon-btn icon-trash icon-2x"></button>\r\n    </td>\r\n</tr>';return __p}}),define("content/category-sections/more/general-settings/views/suspension-view",["underscore","backbone","../templates/suspension-tpl","../collections/suspension-collection","global-events"],function(e,t,n,i,o){var r=t.View.extend({template:n,initialize:function(){var e=this;e.listenTo(i,"remove",function(t){t===e.model&&e.$el.fadeOut(200,function(){e.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){o.trigger("form:delete",i.remove.bind(i,this.model))}});return r}),define("content/category-sections/more/general-settings/templates/credit-card-config-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Configure Accepted Credit Cards</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" class="btn btn-submit">Save Changes</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row form-section">\r\n    <div class="col-12">\r\n        <div class="row">\r\n        	<div class="col-6">\r\n                <div class="label">Visa<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept Visa online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardVisaActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-visa-active" name="f-credit-card-visa-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-visa-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n        	</div>\r\n\r\n        	<div class="col-6">\r\n                <div class="label">MasterCard<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept MasterCard online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardMasterCardActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-master-card-active" name="f-credit-card-master-card-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-master-card-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n        	</div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-6">\r\n                <div class="label">Discover<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept Discover online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardDiscoverActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-discover-active" name="f-credit-card-discover-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-discover-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-6">\r\n                <div class="label">American Express<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept American Express online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardAmericanExpressActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-american-express-active" name="f-credit-card-american-express-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-american-express-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';return __p}}),define("content/category-sections/more/general-settings/views/credit-card-config-view",["backbone","../models/general-settings-model","../templates/credit-card-config-tpl"],function(e,t,n){var i=e.View.extend({tagName:"div",template:n,render:function(){return this.$el.html(this.template(t.toJSON())),this.delegateEvents(),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick"},closeModal:function(){this.$el.parent().dialog("close")},handleSaveBtnClick:function(){t.set({creditCardVisaActive:this.$el.find("#f-credit-card-visa-active").is(":checked"),creditCardMasterCardActive:this.$el.find("#f-credit-card-master-card-active").is(":checked"),creditCardDiscoverActive:this.$el.find("#f-credit-card-discover-active").is(":checked"),creditCardAmericanExpressActive:this.$el.find("#f-credit-card-american-express-active").is(":checked")}),this.closeModal()}});return new i}),define("content/category-sections/more/general-settings/templates/paypal-config-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Configure PayPal</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" class="btn btn-submit">Save Changes</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<form id="edit-form" class="row form-section">\r\n    <div class="col-12">\r\n        <div class="row row-spaced">\r\n            <div class="col-2 form-section left-align">\r\n                <div class="label">Active<i class="icon icon-tool-tip x-space-s" title="If this is turned ON, your shoppers will be able to use PayPal to pay for orders if properly configured with a correct PayPal merchant account."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=payPalActive?"checked":"")?"":__t)+' type="checkbox" id="f-paypal-active" name="f-paypal-active" class="on-off-switch" />\r\n                    <label for="f-paypal-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        	<div class="col-5 form-section left-align">\r\n                <label for="f-paypal-email-address">PayPal Email Address</label><i class="icon icon-tool-tip x-space-s" title="Enter the email address associated with the florist\'s PayPal account here."></i>\r\n                <input id="f-paypal-email-address" name="f-paypal-email-address" type="email" value="'+(null==(__t=payPalEmailAddress)?"":__t)+'">\r\n        	</div>\r\n\r\n        	<div class="col-5 form-section left-align">\r\n                <label for="f-paypal-pos-account-number" class="label">POS Account Number</label><i class="icon icon-tool-tip x-space-s" title="Enter the Point of Sale Account Number here."></i>\r\n                <input id="f-paypal-pos-account-number" name="f-paypal-pos-account-number" type="text" value="'+(null==(__t=payPalPosAccountNumber)?"":__t)+'">\r\n        	</div>\r\n        </div>\r\n    </div>\r\n</form>';return __p}}),define("content/category-sections/more/general-settings/views/paypal-config-view",["backbone","../models/general-settings-model","../templates/paypal-config-tpl","jqueryval"],function(e,t,n){var i=e.View.extend({tagName:"div",template:n,render:function(){return this.$el.html(this.template(t.toJSON())),this.delegateEvents(),this.cacheElem(),this.validateForm(),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$editForm=this.$el.find("#edit-form")},closeModal:function(){this.$el.parent().dialog("close")},handleSaveBtnClick:function(){this.editForm.valid()&&(t.set({payPalEmailAddress:this.$el.find("#f-paypal-email-address").val().trim(),payPalPosAccountNumber:this.$el.find("#f-paypal-pos-account-number").val().trim(),payPalActive:this.$el.find("#f-paypal-active").is(":checked")}),this.closeModal())},validateForm:function(){this.editForm=this.$editForm.validate({rules:{"f-paypal-email-address":{required:!0,email:!0},"f-paypal-pos-account-number":{required:!0,digits:!0}}})}});return new i}),!function(e){"function"==typeof define&&define.amd?define("jquerymask",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t,n=navigator.userAgent,i=/iphone/i.test(n),o=/chrome/i.test(n),r=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,a){var s,l,c,d,u,h,p,f;if(!n&&this.length>0){s=e(this[0]);var v=s.data(e.mask.dataName);return v?v():void 0}return a=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},a),l=e.mask.definitions,c=[],d=p=n.length,u=null,e.each(n.split(""),function(e,t){"?"==t?(p--,d=e):l[t]?(c.push(new RegExp(l[t])),null===u&&(u=c.length-1),d>e&&(h=c.length-1)):c.push(null)}),this.trigger("unmask").each(function(){function s(){if(a.completed){for(var e=u;h>=e;e++)if(c[e]&&A[e]===v(e))return;a.completed.call(S)}}function v(e){return a.placeholder.charAt(e<a.placeholder.length?e:0)}function m(e){for(;++e<p&&!c[e];);return e}function g(e){for(;--e>=0&&!c[e];);return e}function b(e,t){var n,i;if(!(0>e)){for(n=e,i=m(t);p>n;n++)if(c[n]){if(!(p>i&&c[n].test(A[i])))break;A[n]=A[i],A[i]=v(i),i=m(i)}C(),S.caret(Math.max(u,e))}}function y(e){var t,n,i,o;for(t=e,n=v(e);p>t;t++)if(c[t]){if(i=m(t),o=A[t],A[t]=n,!(p>i&&c[i].test(o)))break;n=o}}function _(){var e=S.val(),t=S.caret();if(e.length<f.length){for(T(!0);t.begin>0&&!c[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<u&&!c[t.begin];)t.begin++;S.caret(t.begin,t.begin)}else{for(T(!0);t.begin<p&&!c[t.begin];)t.begin++;S.caret(t.begin,t.begin)}s()}function w(){T(),S.val()!=P&&S.change()}function x(e){if(!S.prop("readonly")){var t,n,o,r=e.which||e.keyCode;f=S.val(),8===r||46===r||i&&127===r?(t=S.caret(),n=t.begin,o=t.end,o-n===0&&(n=46!==r?g(n):o=m(n-1),o=46===r?m(o):o),k(n,o),b(n,o-1),e.preventDefault()):13===r?w.call(this,e):27===r&&(S.val(P),S.caret(0,T()),e.preventDefault())}}function $(t){if(!S.prop("readonly")){var n,i,o,a=t.which||t.keyCode,l=S.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||32>a)&&a&&13!==a){if(l.end-l.begin!==0&&(k(l.begin,l.end),b(l.begin,l.end-1)),n=m(l.begin-1),p>n&&(i=String.fromCharCode(a),c[n].test(i))){if(y(n),A[n]=i,C(),o=m(n),r){var d=function(){e.proxy(e.fn.caret,S,o)()};setTimeout(d,0)}else S.caret(o);l.begin<=h&&s()}t.preventDefault()}}}function k(e,t){var n;for(n=e;t>n&&p>n;n++)c[n]&&(A[n]=v(n))}function C(){S.val(A.join(""))}function T(e){var t,n,i,o=S.val(),r=-1;for(t=0,i=0;p>t;t++)if(c[t]){for(A[t]=v(t);i++<o.length;)if(n=o.charAt(i-1),c[t].test(n)){A[t]=n,r=t;break}if(i>o.length){k(t+1,p);break}}else A[t]===o.charAt(i)&&i++,d>t&&(r=t);return e?C():d>r+1?a.autoclear||A.join("")===D?(S.val()&&S.val(""),k(0,p)):C():(C(),S.val(S.val().substring(0,r+1))),d?t:u}var S=e(this),A=e.map(n.split(""),function(e,t){return"?"!=e?l[e]?v(t):e:void 0}),D=A.join(""),P=S.val();S.data(e.mask.dataName,function(){return e.map(A,function(e,t){return c[t]&&e!=v(t)?e:null}).join("")}),S.one("unmask",function(){S.off(".mask").removeData(e.mask.dataName)}).on("focus.mask",function(){if(!S.prop("readonly")){clearTimeout(t);var e;P=S.val(),e=T(),t=setTimeout(function(){C(),e==n.replace("?","").length?S.caret(0,e):S.caret(e)},10)}}).on("blur.mask",w).on("keydown.mask",x).on("keypress.mask",$).on("input.mask paste.mask",function(){S.prop("readonly")||setTimeout(function(){var e=T(!0);S.caret(e),s()},0)}),o&&r&&S.off("input.mask").on("input.mask",_),T()})}})}),define("content/category-sections/more/general-settings/views/general-settings-view",["underscore","backbone","../templates/general-settings-tpl","../models/general-settings-model","../collections/suspension-collection","./suspension-view","./credit-card-config-view","./paypal-config-view","global-events","jquerymask","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l){var c=t.View.extend({tagName:"div",id:"p-general-settings",template:n,initialize:function(){this.listenTo(o,"add remove",this.addAllSuspensions),jQuery.validator.addClassRules({zipCA:{zipCA:!0},zipUS:{zipUS:!0}})},render:function(){var e=this;return i.fetchCustom().done(function(){e.$el.html(e.template(i.toJSON())),e.cacheElem(),e.delegateEvents(),o.fetchCustom().done(function(){e.addAllSuspensions()}),e.setModal(),e.applyTabs(),e.applyDates(),e.applyToolTips(),e.validateForms(),e.addMasks()}),e},cacheElem:function(){this.$suspensionList=this.$el.find("#suspension-list"),this.$suspensionMessage=this.$el.find("#suspension-message"),this.$startDate=this.$el.find("#start-date"),this.$endDate=this.$el.find("#end-date"),this.$modal=$("#configure-modal"),this.$taxRateInput=this.$el.find("#f-tax-rate"),this.$automaticTaxCalculationsActive=this.$el.find("#f-automatic-tax-calculations-active"),this.$createSuspensionForm=this.$el.find("#create-suspension-form"),this.$suspensionAlert=this.$el.find(".alert-panel"),this.$shopInfoEditForm=this.$el.find("#shop-information"),this.$siteSettingsForm=this.$el.find("#site-settings"),this.$taxForm=this.$el.find("#tax"),this.$telefloraId=this.$el.find("#teleflora-id"),this.$url=this.$el.find("#f-shop-info-url"),this.$shopName=this.$el.find("#shop-name"),this.$address1=this.$el.find("#address-1"),this.$address2=this.$el.find("#address-2"),this.$city=this.$el.find("#city"),this.$state=this.$el.find("#state"),this.$zip=this.$el.find("#zip"),this.$country=this.$el.find("#country"),this.$localPhoneNumber=this.$el.find("#local-phone-number"),this.$alternatePhoneNumber=this.$el.find("#alternate-phone-number"),this.$publicEmail=this.$el.find("#public-email"),this.$contactName=this.$el.find("#contact-name"),this.$contactPhoneNumber=this.$el.find("#contact-phone-number"),this.$contactAlternatePhoneNumber=this.$el.find("#contact-alternate-phone-number"),this.$contactEmail=this.$el.find("#contact-email"),this.$contactFaxNumber=this.$el.find("#contact-fax-number"),this.$phoneInHeaderActive=this.$el.find("#phone-in-header-active"),this.$phoneNumberDisplayed=this.$el.find("#phone-number-displayed"),this.$clickCallActive=this.$el.find("#display-click-call-active"),this.$disableEcommerceActive=this.$el.find("#f-disable-Commerce-Active"),this.$translationsActive=this.$el.find("#translation-active"),this.$currencySymbol=this.$el.find("#currency-symbol"),this.$currencyLabel=this.$el.find("#currency-label"),this.$pointOfSaleSystem=this.$el.find("#point-of-sale-system"),this.$automaticTaxCalculationsActive=this.$el.find("#f-automatic-tax-calculations-active"),this.$taxRate=this.$el.find("#f-tax-rate"),this.$taxDeliveryFeeActive=this.$el.find("#tax-delivery-fee-active"),this.$taxLocalOnlyActive=this.$el.find("#f-tax-local-only-active"),this.$taxCalculation=this.$el.find("#tax-calculation"),this.$creditCardAuthorization=this.$el.find("#credit-card-authorization"),this.$securityCodeActive=this.$el.find("#security-code-active"),this.$houseAccountsActive=this.$el.find("#house-accounts-active"),this.$phoneInPaymentActive=this.$el.find("#phone-in-payment-active"),this.$payInStoreActive=this.$el.find("#pay-in-store-active"),this.$giftCardsActive=this.$el.find("#gift-cards-active"),this.$stateProvinceLabel=this.$el.find("#stateProvinceLabel"),this.$zipPostalLabel=this.$el.find("#zipPostalLabel"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #new-suspension-btn":"addNewSuspension","click #configure-accepted-cards-btn":"showCreditCardModal","click #configure-paypal-btn":"showPaypalModal","change #f-automatic-tax-calculations-active":"toggleTaxRateInput","click #save-btn":"saveEverything","change #country":"handleCountryChange"},_provinceOptions:null,_stateOptions:null,addMasks:function(){this.$localPhoneNumber.mask("(999) 999-9999"),this.$alternatePhoneNumber.mask("(999) 999-9999"),this.$contactPhoneNumber.mask("(999) 999-9999"),this.$contactAlternatePhoneNumber.mask("(999) 999-9999"),this.$contactFaxNumber.mask("(999) 999-9999")},handleCountryChange:function(){var e=this.$country.find("option:selected").val();"United States"===e?(this.$stateProvinceLabel.text("State"),this.$zipPostalLabel.text("Zip Code"),this._provinceOptions=this.$state.find("option.province").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._stateOptions&&(this.$state.append(this._stateOptions),this._stateOptions=null),this.$state.find("option.state").prop("hidden",!1),this.$zip.addClass("zipUS"),this.$zip.removeClass("zipCA"),this.$zip.val("").blur()):(this.$stateProvinceLabel.text("Province"),this.$zipPostalLabel.text("Postal Code"),this._stateOptions=this.$state.find("option.state").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._provinceOptions&&(this.$state.append(this._provinceOptions),this._provinceOptions=null),this.$state.find("option.province").prop("hidden",!1),this.$zip.addClass("zipCA"),this.$zip.removeClass("zipUS"),this.$zip.val("").blur())},applyTabs:function(){this.$el.find("#tabs").tabs()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},addSuspension:function(e){var t=new r({model:e});this.$suspensionList.append(t.render().el)},addAllSuspensions:function(){this.$suspensionList.empty(),o.each(this.addSuspension,this)},addNewSuspension:function(){this.$createSuspensionForm.valid()&&(o.length>0?this.$suspensionAlert.show().removeClass("hidden"):(this.$suspensionAlert.hide().addClass("hidden"),o.add({message:this.$suspensionMessage.val().trim(),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim()}),this.$suspensionMessage.val(""),this.$startDate.val(""),this.$endDate.val("")))},setModal:function(){this.$el.find("#configure-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showCreditCardModal:function(){this.$modal.empty(),this.$modal.append(a.render().el),this.$modal.dialog("open")},showPaypalModal:function(){this.$modal.empty(),this.$modal.append(s.render().el),this.$modal.dialog("open")},saveEverything:function(){this.$shopInfoEditForm.valid()&&this.$siteSettingsForm.valid()&&this.$taxForm.valid()&&(i.set({telefloraId:this.$telefloraId.val().trim(),url:this.$url.val().trim(),shopName:this.$shopName.val().trim(),address1:this.$address1.val().trim(),address2:this.$address2.val().trim(),city:this.$city.val().trim(),state:this.$state.find("option:selected").val().trim(),zip:this.$zip.val().trim(),country:this.$country.find("option:selected").val().trim(),localPhoneNumber:this.$localPhoneNumber.val().trim(),alternatePhoneNumber:this.$alternatePhoneNumber.val().trim(),publicEmail:this.$publicEmail.val().trim(),contactName:this.$contactName.val().trim(),contactPhoneNumber:this.$contactPhoneNumber.val().trim(),contactAlternatePhoneNumber:this.$contactAlternatePhoneNumber.val().trim(),contactEmail:this.$contactEmail.val().trim(),contactFaxNumber:this.$contactFaxNumber.val().trim(),phoneInHeaderActive:this.$phoneInHeaderActive.is(":checked"),phoneNumberDisplayed:this.$phoneNumberDisplayed.find("option:selected").val().trim(),clickCallActive:this.$clickCallActive.is(":checked"),disableEcommerceActive:this.$disableEcommerceActive.is(":checked"),translationsActive:this.$translationsActive.is(":checked"),currencySymbol:this.$currencySymbol.val().trim(),currencyLabel:this.$currencyLabel.val().trim(),pointOfSaleSystem:this.$pointOfSaleSystem.find("option:selected").val().trim(),automaticTaxCalculationsActive:this.$automaticTaxCalculationsActive.is(":checked"),taxRate:this.$taxRate.val().trim(),taxDeliveryFeeActive:this.$taxDeliveryFeeActive.is(":checked"),taxLocalOnlyActive:this.$taxLocalOnlyActive.is(":checked"),taxCalculation:this.$taxCalculation.find("option:selected").val().trim(),creditCardAuthorization:this.$creditCardAuthorization.find("option:selected").val().trim(),securityCodeActive:this.$securityCodeActive.is(":checked"),houseAccountsActive:this.$houseAccountsActive.is(":checked"),phoneInPaymentActive:this.$phoneInPaymentActive.is(":checked"),payInStoreActive:this.$payInStoreActive.is(":checked"),giftCardsActive:this.$giftCardsActive.is(":checked")}),l.trigger("form:save",this.$tip))},toggleTaxRateInput:function(){this.$taxForm.valid()&&this.$taxRateInput.prop("disabled",this.$automaticTaxCalculationsActive.is(":checked"))},validateForms:function(){var e=this;jQuery.validator.addMethod("domainCheck",function(e){return/^www/i.test(e)},"Invalid format, do not include http"),this.suspensionValidator=this.$createSuspensionForm.validate({rules:{"suspension-message":"required","start-date":"required","end-date":"required"}}),this.validator=this.$shopInfoEditForm.validate({rules:{"teleflora-id":"required","shop-name":"required","address-1":"required",city:"required","f-shop-info-url":{domainCheck:!0,required:!0},state:{required:function(){return!e.$state.find("option:selected").val().trim()}},zip:{required:!0},"local-phone-number":{phoneUS:!0,required:!0},"alternate-phone-number":{phoneUS:!0},"public-email":"required","contact-name":"required","contact-phone-number":{phoneUS:!0,required:!0},"contact-alternate-phone-number":{phoneUS:!0},"contact-fax-number":{phoneUS:!0},"contact-email":"required"}}),this.validator=this.$siteSettingsForm.validate({rules:{"currency-symbol":"required","currency-label":"required"}}),this.validator=this.$taxForm.validate({rules:{"f-tax-rate":{required:function(){return!$("#f-automatic-tax-calculations-active").is(":checked")}}}})}});return new c}),define("content/category-sections/more/store-locations/templates/store-locations-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Store Locations</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Does your business have more than one location? If so, you can use this page to add and manage those different locations. These can be seen by your customers when selecting In Store Pickup as a delivery method.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="col-6">\r\n		<div class="label">Allow In Store Pickup <i title="Leave this turned off if the florist does not allow in store pickup." class="icon icon-tool-tip x-space-s"></i></div>\r\n		<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-pickup-active" name="f-pickup-active" class="on-off-switch" />\r\n		<label for="f-pickup-active" class="on-off-switch-label">\r\n		    <div class="on-off-switch-state">on</div>\r\n		</label>\r\n	</div>\r\n\r\n	<div class="col-6">\r\n		<label for="f-pickup-label">In Store Pickup Label</label><i class="icon icon-tool-tip x-space-s" title="How should the option on the website actually read? Example: \'Pick up in store\'"></i>\r\n		<input type="text" name="f-pickup-label" id="f-pickup-label" value="'+(null==(__t=label)?"":__t)+'">\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Store Locations</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n		<button type="button" id="new-btn" class="btn btn-submit pull-right">\r\n			<i class="icon icon-add"></i> New Location\r\n		</button>\r\n		</div>\r\n	</div>\r\n\r\n	<table class="table alternate">\r\n		<thead>\r\n			<tr>\r\n				<th class="col-1"></th>\r\n				<th class="col-1">Sequence</th>\r\n				<th class="col-6 left-align">Description <button type="button" id="sort-btn" class="icon icon-btn icon-sort x-space-s"></button></th>\r\n				<th class="col-2">In Store Pickup</th>\r\n				<th class="col-1">Edit</th>\r\n				<th class="col-1">Delete</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody id="location-list"></tbody>\r\n	</table>\r\n</div>';return __p}}),define("content/category-sections/more/store-locations/models/pickup-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-location-settings.json",defaults:{active:!0,label:""}});return new t}),define("content/category-sections/more/store-locations/models/location-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,inStorePickupActive:!0,locationDescription:"",address1:"",address2:"",city:"",state:"",zip:"",country:"",phoneNumber:"",geoCode:""}});return t}),define("content/category-sections/more/store-locations/collections/location-collection",["backbone","../models/location-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-locations.json",model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("locationDescription")},descending:function(e,t){return e.get("locationDescription")>t.get("locationDescription")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return new n}),define("content/category-sections/more/store-locations/templates/location-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td>'+(null==(__t=sequence)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=locationDescription)?"":__t)+'</td>\r\n	<td class="hide-overflow">\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=inStorePickupActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="in-store-pickup-active-"+sequence)?"":__t)+'" name="'+(null==(__t="in-store-pickup-active-"+sequence)?"":__t)+'" class="on-off-switch in-store-pickup-active-switch" />\r\n	        <label for="'+(null==(__t="in-store-pickup-active-"+sequence)?"":__t)+'" class="on-off-switch-label">\r\n	            <div class="on-off-switch-state">on</div>\r\n        </label>\r\n        </div>\r\n	</td>\r\n	<td><button type="button" class="icon icon-btn icon-edit icon-2x"></button></td>\r\n	<td><button type="button" class="icon icon-btn icon-trash icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/more/store-locations/views/location-view",["backbone","../templates/location-tpl","../collections/location-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){var t=this;
t.parent=e.parent,t.collection=n,t.listenTo(t.collection,"remove",function(e){t.model===e&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-edit":"handleEdit","click .icon-trash":"handleDelete","change .active-switch":"handleActiveSwitch","change .in-store-pickup-active-switch":"handleActiveSwitch"},cacheElem:function(){this.$active=this.$el.find(".active-switch"),this.$inStorePickupActive=this.$el.find(".in-store-pickup-active-switch")},handleEdit:function(){this.parent.handleEdit(this.model)},handleDelete:function(){i.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleActiveSwitch:function(){this.model.set({active:this.$active.is(":checked"),inStorePickupActive:this.$inStorePickupActive.is(":checked")})}});return o}),define("content/category-sections/more/store-locations/views/store-locations-home-view",["backbone","../templates/store-locations-home-tpl","../models/pickup-model","../models/location-model","../collections/location-collection","./location-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"p-store-locations",template:t,initialize:function(){this.listenTo(o,"resequenced",this.addAllLocations)},render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.cacheElem(),e.delegateEvents(),e.applyToolTips(),o.fetchCustom().done(function(){o.resequence(),e.applySortable()})}),e},cacheElem:function(){this.$locationList=this.$el.find("#location-list"),this.$pickupActive=this.$el.find("#f-pickup-active"),this.$pickupLabel=this.$el.find("#f-pickup-label"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #new-btn":"handleNewBtnClick","click #sort-btn":"handleSortBtnClick","click #save-btn":"handleSave"},addLocation:function(e){var t=new r({model:e,parent:this});this.$locationList.append(t.render().el)},addAllLocations:function(){this.$locationList.empty(),o.each(this.addLocation,this)},handleNewBtnClick:function(){this.parent.showCreateEdit(new i)},handleEdit:function(e){this.parent.showCreateEdit(e)},handleSortBtnClick:function(e){var t=$(e.target);t.hasClass("icon-sort")?(t.switchClass("icon-sort","icon-sort-asc"),o.changeSort("ascending")):t.hasClass("icon-sort-asc")?(t.switchClass("icon-sort-asc","icon-sort-desc"),o.changeSort("descending")):t.hasClass("icon-sort-desc")&&(t.switchClass("icon-sort-desc","icon-sort-asc"),o.changeSort("ascending")),o.sort(),o.resequence(),o.changeSort("default")},handleSave:function(){n.set({active:this.$pickupActive.is(":checked"),label:this.$pickupLabel.val().trim()}),a.trigger("form:save",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#location-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$locationList.children().each(function(e){var t=$(this).data("id");o.where({id:t})[0].set("sequence",e+1)}),o.changeSort("sequence"),o.sort(),o.trigger("resequenced")}})}});return new s}),define("content/category-sections/more/store-locations/templates/create-edit-location-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n<div id="p-create-edit-location">\r\n<form id="create-edit-form" class="form-section">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit":"Add New ")?"":__t)+' Location </h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">\r\n						',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n					</button>\r\n                    <div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n  <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">Does the store have more than one location? If so, you can use this page to add those locations.</div>\r\n	</div>\r\n\r\n		<div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="f-location-description">Location Description</label><i title="What is the name of this location?" class="icon icon-tool-tip x-space-s"></i>\r\n                <input type="text" id="f-location-description" name="f-location-description" value="'+(null==(__t=locationDescription)?"":__t)+'">\r\n            </div>\r\n\r\n            <div class="col-3">\r\n                <div class="label">Allow In Store Pickup</div>\r\n                <input '+(null==(__t=inStorePickupActive?"checked":"")?"":__t)+' type="checkbox" id="f-in-store-pickup-active" name="f-in-store-pickup-active" class="on-off-switch" />\r\n                <label for="f-in-store-pickup-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="form-section col-6">\r\n				<label for="f-address-1">Address 1</label>\r\n				<input type="text" id="f-address-1" name="f-address-1" value="'+(null==(__t=address1)?"":__t)+'">\r\n			</div>\r\n			<div class="col-6">\r\n				<label for="f-address-2">Address 2</label>\r\n				<input type="text" id="f-address-2" name="f-address-2" value="'+(null==(__t=address2)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="form-section row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-city">City</label>\r\n				<input type="text" id="f-city" name="f-city" value="'+(null==(__t=city)?"":__t)+'">\r\n			</div>\r\n			<div class="col-3 form-section">\r\n				<label for="f-state">State/Province</label>\r\n                <div class="select-container">\r\n                    <select id="f-state" name="f-state">\r\n                        <option selected="selected" disabled hidden value="'+(null==(__t=state)?"":__t)+'">'+(null==(__t=state)?"":__t)+'</option>\r\n\r\n                        <option value="AL">\r\n                            Alabama\r\n                        </option>\r\n\r\n                        <option value="AK">\r\n                            Alaska\r\n                        </option>\r\n\r\n                        <option value="AZ">\r\n                            Arizona\r\n                        </option>\r\n\r\n                        <option value="AR">\r\n                            Arkansas\r\n                        </option>\r\n\r\n                        <option value="CA">\r\n                            CA\r\n                        </option>\r\n\r\n                        <option value="CO">\r\n                            Colorado\r\n                        </option>\r\n\r\n                        <option value="CT">\r\n                            Connecticut\r\n                        </option>\r\n\r\n                        <option value="DE">\r\n                            Delaware\r\n                        </option>\r\n\r\n                        <option value="DC">\r\n                            District of Columbia\r\n                        </option>\r\n\r\n                        <option value="FL">\r\n                            Florida\r\n                        </option>\r\n\r\n                        <option value="GA">\r\n                            Georgia\r\n                        </option>\r\n\r\n                        <option value="HI">\r\n                            Hawaii\r\n                        </option>\r\n\r\n                        <option value="ID">\r\n                            Idaho\r\n                        </option>\r\n\r\n                        <option value="IL">\r\n                            Illinois\r\n                        </option>\r\n\r\n                        <option value="IN">\r\n                            Indiana\r\n                        </option>\r\n\r\n                        <option value="IA">\r\n                            Iowa\r\n                        </option>\r\n\r\n                        <option value="KS">\r\n                            Kansas\r\n                        </option>\r\n\r\n                        <option value="KY">\r\n                            Kentucky\r\n                        </option>\r\n\r\n                        <option value="LA">\r\n                            Louisiana\r\n                        </option>\r\n\r\n                        <option value="ME">\r\n                            Maine\r\n                        </option>\r\n\r\n                        <option value="MD">\r\n                            Maryland\r\n                        </option>\r\n\r\n                        <option value="MA">\r\n                            Massachusetts\r\n                        </option>\r\n\r\n                        <option value="MI">\r\n                            Michigan\r\n                        </option>\r\n\r\n                        <option value="MN">\r\n                            Minnesota\r\n                        </option>\r\n\r\n                        <option value="MS">\r\n                            Mississippi\r\n                        </option>\r\n\r\n                        <option value="MO">\r\n                            Missouri\r\n                        </option>\r\n\r\n                        <option value="MT">\r\n                            Montana\r\n                        </option>\r\n\r\n                        <option value="NE">\r\n                            Nebraska\r\n                        </option>\r\n\r\n                        <option value="NV">\r\n                            Nevada\r\n                        </option>\r\n\r\n                        <option value="NH">\r\n                            New Hampshire\r\n                        </option>\r\n\r\n                        <option value="NJ">\r\n                            New Jersey\r\n                        </option>\r\n\r\n                        <option value="NM">\r\n                            New Mexico\r\n                        </option>\r\n\r\n                        <option value="NY">\r\n                            New York\r\n                        </option>\r\n\r\n                        <option value="NC">\r\n                            North Carolina\r\n                        </option>\r\n\r\n                        <option value="ND">\r\n                            North Dakota\r\n                        </option>\r\n\r\n                        <option value="OH">\r\n                            Ohio\r\n                        </option>\r\n\r\n                        <option value="OK">\r\n                            Oklahoma\r\n                        </option>\r\n\r\n                        <option value="OR">\r\n                            Oregon\r\n                        </option>\r\n\r\n                        <option value="PA">\r\n                            Pennsylvania\r\n                        </option>\r\n\r\n                        <option value="PR">\r\n                            Puerto Rico\r\n                        </option>\r\n\r\n                        <option value="RI">\r\n                            Rhode Island\r\n                        </option>\r\n\r\n                        <option value="SC">\r\n                            South Carolina\r\n                        </option>\r\n\r\n                        <option value="SD">\r\n                            South Dakota\r\n                        </option>\r\n\r\n                        <option value="TN">\r\n                            Tennessee\r\n                        </option>\r\n\r\n                        <option value="TX">\r\n                            Texas\r\n                        </option>\r\n\r\n                        <option value="UT">\r\n                            Utah\r\n                        </option>\r\n\r\n                        <option value="VT">\r\n                            Vermont\r\n                        </option>\r\n\r\n                        <option value="VA">\r\n                            Virginia\r\n                        </option>\r\n\r\n                        <option value="WA">\r\n                            Washington\r\n                        </option>\r\n\r\n                        <option value="WV">\r\n                            West Virginia\r\n                        </option>\r\n\r\n                        <option value="WI">\r\n                            Wisconsin\r\n                        </option>\r\n\r\n                        <option value="WY">\r\n                            Wyoming\r\n                        </option>\r\n\r\n                        <option value="AB">\r\n                            Alberta\r\n                        </option>\r\n\r\n                        <option value="BC">\r\n                            British Columbia\r\n                        </option>\r\n\r\n                        <option value="MB">\r\n                            Manitoba\r\n                        </option>\r\n\r\n                        <option value="NB">\r\n                            New Brunswick\r\n                        </option>\r\n\r\n                        <option value="NF">\r\n                            Newfoundland and Labrador\r\n                        </option>\r\n\r\n                        <option value="NT">\r\n                            Northwest Territories\r\n                        </option>\r\n\r\n                        <option value="NS">\r\n                            Nova Scotia\r\n                        </option>\r\n\r\n                        <option value="NU">\r\n                            Nunavut\r\n                        </option>\r\n\r\n                        <option value="ON">\r\n                            Ontario\r\n                        </option>\r\n\r\n                        <option value="PE">\r\n                            Prince Edward Island\r\n                        </option>\r\n\r\n                        <option value="QC">\r\n                            Quebec\r\n                        </option>\r\n\r\n                        <option value="SK">\r\n                            Saskatchewan\r\n                        </option>\r\n\r\n                        <option value="YT">\r\n                            Yukon\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n			</div>\r\n\r\n			<div class="col-3 form-section">\r\n				<label for="f-zip">Zip/Postal Code</label>\r\n				<input type="text" id="f-zip" name="f-zip" value="'+(null==(__t=zip)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-country">Country</label>\r\n                <div class="select-container">\r\n                    <select id="f-country" name="f-country">\r\n                        <option selected disabled hidden value="'+(null==(__t=country)?"":__t)+'">'+(null==(__t=country)?"":__t)+'</option>\r\n\r\n                        <option value="United States">United States</option>\r\n                        <option value="Canada">Canada</option>\r\n                    </select>\r\n                </div>\r\n			</div>\r\n\r\n			<div class="col-6">\r\n				<label for="f-phone-number">Local Phone Number</label>\r\n				<input type="text" id="f-phone-number" name="f-phone-number" value="'+(null==(__t=phoneNumber)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n                <div class="label">Generate Geocode</div>\r\n                <button type="button" id="geo-btn" class="btn btn-other">Generate</button>\r\n            </div>\r\n			<div class="col-6">\r\n                <label for="f-geo-code">Geocode<i title="Paste the geocode here." class="icon icon-tool-tip x-space-s"></i></label>\r\n                <input type="text" id="f-geo-code" name="f-geo-code" value="'+(null==(__t=geoCode)?"":__t)+'">         \r\n            </div>\r\n		</div>\r\n        </form>\r\n</div>';return __p}}),define("content/category-sections/more/store-locations/views/create-edit-location-view",["backbone","../templates/create-edit-location-tpl","../collections/location-collection","global-events","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.generateGeoCode(),this.validateForm(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick","click #geo-btn":"generateGeoCode"},cacheElem:function(){this.$active=this.$el.find("#f-active"),this.$inStorePickupActive=this.$el.find("#f-in-store-pickup-active"),this.$locationDescription=this.$el.find("#f-location-description"),this.$address1=this.$el.find("#f-address-1"),this.$address2=this.$el.find("#f-address-2"),this.$city=this.$el.find("#f-city"),this.$state=this.$el.find("#f-state"),this.$zip=this.$el.find("#f-zip"),this.$country=this.$el.find("#f-country"),this.$phoneNumber=this.$el.find("#f-phone-number"),this.$geoCode=this.$el.find("#f-geo-code"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change")},handleCancelBtnClick:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveBtnClick:function(){this.$createEditForm.valid()?(this.model.set({active:this.$active.is(":checked"),inStorePickupActive:this.$inStorePickupActive.is(":checked"),locationDescription:this.$locationDescription.val().trim(),address1:this.$address1.val().trim(),address2:this.$address2.val().trim(),city:this.$city.val().trim(),state:this.$state.find("option:selected").val().trim(),zip:this.$zip.val().trim(),country:this.$country.find("option:selected").val().trim(),phoneNumber:this.$phoneNumber.val().trim(),geoCode:this.$geoCode.val().trim()}),n.get(this.model)||n.add(this.model),i.trigger("form:save",this.$tip),this.parent.showHome()):i.trigger("form:invalid",this.$tip)},generateGeoCode:function(){var e=new google.maps.Geocoder,t=[this.$address1.val(),this.$address2.val()+",",this.$city.val()+",",this.$state.find("option:selected").val().trim(),this.$zip.val(),this.$country.find("option:selected").val().trim()].join(" "),n=this;e.geocode({address:t},function(e,t){t===google.maps.GeocoderStatus.OK&&n.$geoCode.val(e[0].geometry.location)})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{"f-location-description":"required","f-address-1":"required","f-city":"required","f-state":{required:function(e){return""===$(e).find("option:selected").val()}},"f-zip":{required:!0,digits:!0,minlength:5,maxlength:5},"f-country":{required:function(e){return""===$(e).find("option:selected").val()}}}})}});return new o}),define("content/category-sections/more/store-locations/views/store-locations-view",["backbone","./store-locations-home-view","./create-edit-location-view","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.showHome(),this},replaceVisible:function(e){e&&this.regions.visible!==e?(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e):e.render(),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;i.trigger("form:cancel",function(){n.model=e,t.replaceVisible(n)})}});return new o}),define("content/category-sections/more/funeral-home-locations/templates/funeral-locations-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Funeral Home Locations</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		You can use this page to configure which funeral homes you are associated with.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n		This is a generic placeholder for error messages in eSAT. <br>\r\n		In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="col-12">\r\n		<div class="label">Delivery Message</div>\r\n		<textarea class="size-2" name="f-delivery-message" id="f-delivery-message">'+(null==(__t=delMsg)?"":__t)+'</textarea>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Funeral Home Locations</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n		<button type="button" id="new-btn" class="btn btn-submit pull-right">\r\n			<i class="icon icon-add"></i> New Location\r\n		</button>\r\n		</div>\r\n	</div>\r\n\r\n	<table class="table alternate">\r\n		<thead>\r\n			<tr>\r\n				<th class="col-1"></th>\r\n				<th class="col-1">Sequence</th>\r\n				<th class="col-6 left-align">Description <button type="button" id="sort-btn" class="icon icon-btn icon-sort x-space-s"></button></th>\r\n				<th class="col-2">Status</th>\r\n				<th class="col-1">Edit</th>\r\n				<th class="col-1">Delete</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody id="location-list"></tbody>\r\n	</table>\r\n</div>';return __p}}),define("content/category-sections/more/funeral-home-locations/models/pickup-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-funeral-home-settings.json",defaults:{active:!0,delMsg:""}});return new t}),define("content/category-sections/more/funeral-home-locations/models/location-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,inStorePickupActive:!0,locationDescription:"",address1:"",address2:"",city:"",state:"",zip:"",country:"",phoneNumber:"",florists:"",geoCode:""}});return t}),define("content/category-sections/more/funeral-home-locations/collections/location-collection",["backbone","../models/location-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-funeral-homes.json",model:t,initialize:function(){var e=this;e.listenTo(e,"add",function(t){t.set("sequence",e.length)}),e.listenTo(e,"remove",function(t,n,i){for(var o=i.index,r=n.length;r>o;++o)n.at(o).set("sequence",o+1);e.trigger("resequenced")})},resequence:function(){this.each(function(e,t){e.set("sequence",t+1)}),this.trigger("resequenced")},comparator:function(e,t){return e.get("sequence")-t.get("sequence")},sortTypes:{sequence:function(e){return e.get("sequence")},ascending:function(e){return e.get("locationDescription")},descending:function(e,t){return e.get("locationDescription")>t.get("locationDescription")?-1:1}},changeSort:function(e){this.sortTypes[e]&&(this.comparator=this.sortTypes[e])}});return new n}),define("content/category-sections/more/funeral-home-locations/templates/location-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr class="sortable" data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td><i class="icon icon-arrows icon-2x"></i></td>\r\n	<td>'+(null==(__t=sequence)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=locationDescription)?"":__t)+'</td>\r\n	<td class="hide-overflow">\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=inStorePickupActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="in-store-pickup-active-"+sequence)?"":__t)+'" name="'+(null==(__t="in-store-pickup-active-"+sequence)?"":__t)+'" class="on-off-switch in-store-pickup-active-switch" />\r\n	        <label for="'+(null==(__t="in-store-pickup-active-"+sequence)?"":__t)+'" class="on-off-switch-label">\r\n	            <div class="on-off-switch-state">on</div>\r\n        </label>\r\n        </div>\r\n	</td>\r\n	<td><button type="button" class="icon icon-btn icon-edit icon-2x"></button></td>\r\n	<td><button type="button" class="icon icon-btn icon-trash icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/more/funeral-home-locations/views/location-view",["backbone","../templates/location-tpl","../collections/location-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){var t=this;t.parent=e.parent,t.collection=n,t.listenTo(t.collection,"remove",function(e){t.model===e&&t.$el.fadeOut(200,function(){t.remove()})})},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-edit":"handleEdit","click .icon-trash":"handleDelete","change .active-switch":"handleActiveSwitch","change .in-store-pickup-active-switch":"handleActiveSwitch"},cacheElem:function(){this.$active=this.$el.find(".active-switch"),this.$inStorePickupActive=this.$el.find(".in-store-pickup-active-switch")},handleEdit:function(){this.parent.handleEdit(this.model)},handleDelete:function(){i.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleActiveSwitch:function(){this.model.set({active:this.$active.is(":checked"),inStorePickupActive:this.$inStorePickupActive.is(":checked")})}});return o}),define("content/category-sections/more/funeral-home-locations/views/funeral-locations-home-view",["backbone","../templates/funeral-locations-home-tpl","../models/pickup-model","../models/location-model","../collections/location-collection","./location-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"p-funeral-locations",template:t,initialize:function(){this.listenTo(o,"resequenced",this.addAllLocations)},render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.cacheElem(),e.delegateEvents(),e.applyToolTips(),o.fetchCustom().done(function(){o.resequence(),e.applySortable()})}),e},cacheElem:function(){this.$locationList=this.$el.find("#location-list"),this.$pickupActive=this.$el.find("#f-pickup-active"),this.$pickupLabel=this.$el.find("#f-pickup-label"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #new-btn":"handleNewBtnClick","click #sort-btn":"handleSortBtnClick","click #save-btn":"handleSave"},addLocation:function(e){var t=new r({model:e,parent:this});this.$locationList.append(t.render().el)},addAllLocations:function(){this.$locationList.empty(),o.each(this.addLocation,this)},handleNewBtnClick:function(){this.parent.showCreateEdit(new i)},handleEdit:function(e){this.parent.showCreateEdit(e)},handleSortBtnClick:function(e){var t=$(e.target);t.hasClass("icon-sort")?(t.switchClass("icon-sort","icon-sort-asc"),o.changeSort("ascending")):t.hasClass("icon-sort-asc")?(t.switchClass("icon-sort-asc","icon-sort-desc"),o.changeSort("descending")):t.hasClass("icon-sort-desc")&&(t.switchClass("icon-sort-desc","icon-sort-asc"),o.changeSort("ascending")),o.sort(),o.resequence(),o.changeSort("default")},handleSave:function(){n.set({active:this.$pickupActive.is(":checked"),label:this.$pickupLabel.val().trim()}),a.trigger("form:save",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},helperFixRowWidth:function(e,t){var n=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(n.eq(e).width())}),i},applySortable:function(){var e=this;e.$el.find("#location-list").sortable({helper:e.helperFixRowWidth,containment:"parent",delay:100,tolerance:"pointer",start:function(e,t){t.helper.addClass("active"),t.placeholder.height(t.item.height())},update:function(){e.$locationList.children().each(function(e){var t=$(this).data("id");o.where({id:t})[0].set("sequence",e+1)}),o.changeSort("sequence"),o.sort(),o.trigger("resequenced")}})}});return new s}),define("content/category-sections/more/funeral-home-locations/templates/create-edit-location-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='\r\n<div id="p-create-edit-location">\r\n<form id="create-edit-form" class="form-section">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit":"Add New ")?"":__t)+' Funeral Home </h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">\r\n						',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n					</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n  <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n	<div class="row">\r\n	  <div class="col-1">\r\n		<div class="icon icon-3x icon-warning"></div>\r\n	  </div>\r\n	  <div class="col-11 alert-text">\r\n					 This is a generic placeholder for error messages in eSAT. <br>\r\n					 In the live app, this will be a real message and will be hidden by default.\r\n	  </div>\r\n	</div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">You can edit or add your funeral home location information here.</div>\r\n	</div>\r\n\r\n		<div class="row row-spaced panel">    \r\n			<div class="col-12">\r\n				<div class="row row-spaced">    \r\n					<div class="col-12">\r\n						<div class="panel-title">Funeral Home Information</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">\r\n					<div class="col-6 form-section">\r\n						<label for="f-location-description">Funeral Home Description</label><i title="What is the name of this location?" class="icon icon-tool-tip x-space-s"></i>\r\n						<input type="text" id="f-location-description" name="f-location-description" value="'+(null==(__t=locationDescription)?"":__t)+'">\r\n					</div>\r\n\r\n					<div class="col-3">\r\n						<div class="label">Status</div>\r\n						<input '+(null==(__t=inStorePickupActive?"checked":"")?"":__t)+' type="checkbox" id="f-in-store-pickup-active" name="f-in-store-pickup-active" class="on-off-switch" />\r\n						<label for="f-in-store-pickup-active" class="on-off-switch-label">\r\n							<div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="form-section col-6">\r\n						<label for="f-address-1">Address 1</label>\r\n						<input type="text" id="f-address-1" name="f-address-1" value="'+(null==(__t=address1)?"":__t)+'">\r\n					</div>\r\n					<div class="col-6">\r\n						<label for="f-address-2">Address 2</label>\r\n						<input type="text" id="f-address-2" name="f-address-2" value="'+(null==(__t=address2)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n\r\n				<div class="form-section row row-spaced">\r\n					<div class="col-6 form-section">\r\n						<label for="f-city">City</label>\r\n						<input type="text" id="f-city" name="f-city" value="'+(null==(__t=city)?"":__t)+'">\r\n					</div>\r\n					<div class="col-3 form-section">\r\n						<label for="f-state">State/Province</label>\r\n						<div class="select-container">\r\n							<select id="f-state" name="f-state">\r\n								<option selected="selected" disabled hidden value="'+(null==(__t=state)?"":__t)+'">'+(null==(__t=state)?"":__t)+'</option>\r\n\r\n								<option value="AL">\r\n									Alabama\r\n								</option>\r\n\r\n								<option value="AK">\r\n									Alaska\r\n								</option>\r\n\r\n								<option value="AZ">\r\n									Arizona\r\n								</option>\r\n\r\n								<option value="AR">\r\n									Arkansas\r\n								</option>\r\n\r\n								<option value="CA">\r\n									CA\r\n								</option>\r\n\r\n								<option value="CO">\r\n									Colorado\r\n								</option>\r\n\r\n								<option value="CT">\r\n									Connecticut\r\n								</option>\r\n\r\n								<option value="DE">\r\n									Delaware\r\n								</option>\r\n\r\n								<option value="DC">\r\n									District of Columbia\r\n								</option>\r\n\r\n								<option value="FL">\r\n									Florida\r\n								</option>\r\n\r\n								<option value="GA">\r\n									Georgia\r\n								</option>\r\n\r\n								<option value="HI">\r\n									Hawaii\r\n								</option>\r\n\r\n								<option value="ID">\r\n									Idaho\r\n								</option>\r\n\r\n								<option value="IL">\r\n									Illinois\r\n								</option>\r\n\r\n								<option value="IN">\r\n									Indiana\r\n								</option>\r\n\r\n								<option value="IA">\r\n									Iowa\r\n								</option>\r\n\r\n								<option value="KS">\r\n									Kansas\r\n								</option>\r\n\r\n								<option value="KY">\r\n									Kentucky\r\n								</option>\r\n\r\n								<option value="LA">\r\n									Louisiana\r\n								</option>\r\n\r\n								<option value="ME">\r\n									Maine\r\n								</option>\r\n\r\n								<option value="MD">\r\n									Maryland\r\n								</option>\r\n\r\n								<option value="MA">\r\n									Massachusetts\r\n								</option>\r\n\r\n								<option value="MI">\r\n									Michigan\r\n								</option>\r\n\r\n								<option value="MN">\r\n									Minnesota\r\n								</option>\r\n\r\n								<option value="MS">\r\n									Mississippi\r\n								</option>\r\n\r\n								<option value="MO">\r\n									Missouri\r\n								</option>\r\n\r\n								<option value="MT">\r\n									Montana\r\n								</option>\r\n\r\n								<option value="NE">\r\n									Nebraska\r\n								</option>\r\n\r\n								<option value="NV">\r\n									Nevada\r\n								</option>\r\n\r\n								<option value="NH">\r\n									New Hampshire\r\n								</option>\r\n\r\n								<option value="NJ">\r\n									New Jersey\r\n								</option>\r\n\r\n								<option value="NM">\r\n									New Mexico\r\n								</option>\r\n\r\n								<option value="NY">\r\n									New York\r\n								</option>\r\n\r\n								<option value="NC">\r\n									North Carolina\r\n								</option>\r\n\r\n								<option value="ND">\r\n									North Dakota\r\n								</option>\r\n\r\n								<option value="OH">\r\n									Ohio\r\n								</option>\r\n\r\n								<option value="OK">\r\n									Oklahoma\r\n								</option>\r\n\r\n								<option value="OR">\r\n									Oregon\r\n								</option>\r\n\r\n								<option value="PA">\r\n									Pennsylvania\r\n								</option>\r\n\r\n								<option value="PR">\r\n									Puerto Rico\r\n								</option>\r\n\r\n								<option value="RI">\r\n									Rhode Island\r\n								</option>\r\n\r\n								<option value="SC">\r\n									South Carolina\r\n								</option>\r\n\r\n								<option value="SD">\r\n									South Dakota\r\n								</option>\r\n\r\n								<option value="TN">\r\n									Tennessee\r\n								</option>\r\n\r\n								<option value="TX">\r\n									Texas\r\n								</option>\r\n\r\n								<option value="UT">\r\n									Utah\r\n								</option>\r\n\r\n								<option value="VT">\r\n									Vermont\r\n								</option>\r\n\r\n								<option value="VA">\r\n									Virginia\r\n								</option>\r\n\r\n								<option value="WA">\r\n									Washington\r\n								</option>\r\n\r\n								<option value="WV">\r\n									West Virginia\r\n								</option>\r\n\r\n								<option value="WI">\r\n									Wisconsin\r\n								</option>\r\n\r\n								<option value="WY">\r\n									Wyoming\r\n								</option>\r\n\r\n								<option value="AB">\r\n									Alberta\r\n								</option>\r\n\r\n								<option value="BC">\r\n									British Columbia\r\n								</option>\r\n\r\n								<option value="MB">\r\n									Manitoba\r\n								</option>\r\n\r\n								<option value="NB">\r\n									New Brunswick\r\n								</option>\r\n\r\n								<option value="NF">\r\n									Newfoundland and Labrador\r\n								</option>\r\n\r\n								<option value="NT">\r\n									Northwest Territories\r\n								</option>\r\n\r\n								<option value="NS">\r\n									Nova Scotia\r\n								</option>\r\n\r\n								<option value="NU">\r\n									Nunavut\r\n								</option>\r\n\r\n								<option value="ON">\r\n									Ontario\r\n								</option>\r\n\r\n								<option value="PE">\r\n									Prince Edward Island\r\n								</option>\r\n\r\n								<option value="QC">\r\n									Quebec\r\n								</option>\r\n\r\n								<option value="SK">\r\n									Saskatchewan\r\n								</option>\r\n\r\n								<option value="YT">\r\n									Yukon\r\n								</option>\r\n							</select>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="col-3 form-section">\r\n						<label for="f-zip">Zip/Postal Code</label>\r\n						<input type="text" id="f-zip" name="f-zip" value="'+(null==(__t=zip)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="col-6 form-section">\r\n						<label for="f-country">Country</label>\r\n						<div class="select-container">\r\n							<select id="f-country" name="f-country">\r\n								<option selected disabled hidden value="'+(null==(__t=country)?"":__t)+'">'+(null==(__t=country)?"":__t)+'</option>\r\n\r\n								<option value="United States">United States</option>\r\n								<option value="Canada">Canada</option>\r\n							</select>\r\n						</div>\r\n					</div>\r\n\r\n					<div class="col-6">\r\n						<label for="f-phone-number">Local Phone Number</label>\r\n						<input type="text" id="f-phone-number" name="f-phone-number" value="'+(null==(__t=phoneNumber)?"":__t)+'">\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row row-spaced">\r\n					<div class="col-6">\r\n						<div class="label">Generate Geocode</div>\r\n						<button type="button" id="geo-btn" class="btn btn-other">Generate</button>\r\n					</div>\r\n					<div class="col-6">\r\n						<label for="f-geo-code">Geocode<i title="Paste the geocode here." class="icon icon-tool-tip x-space-s"></i></label>\r\n						<input type="text" id="f-geo-code" name="f-geo-code" value="'+(null==(__t=geoCode)?"":__t)+'">         \r\n					</div>\r\n				</div>\r\n				\r\n			</div>\r\n		</div>\r\n\r\n\r\n		<div class="row row-spaced panel">	\r\n			<div class="col-12">\r\n				<div class="row row-spaced">\r\n					<div class="col-12">\r\n						<div class="panel-title">Preferred Florists</div>\r\n					</div>\r\n				</div>\r\n				<div class="row row-spaced">	\r\n					<div class="col-4 pull-right">\r\n						<button class="btn btn-submit pull-right" type="button" id="f-add-florist-btn"><i class="icon icon-add icon-lg"></i>Add Florist</button>\r\n					</div>\r\n				</div>\r\n				<div class="row form-section hidden-alt" id="f-florists-header">	\r\n					<div class="col-12">\r\n						<div class="col-4 left-align"><div class="label">Teleflora ID</div></div>\r\n						<div class="col-2"><div class="label">Delete</div></div>\r\n					</div>\r\n				</div>\r\n				<div id="f-florists"></div>\r\n			</div>\r\n		</div>	\r\n\r\n\r\n\r\n		</form>\r\n</div>';
return __p}}),define("content/category-sections/more/funeral-home-locations/views/create-edit-location-view",["backbone","../templates/create-edit-location-tpl","../collections/location-collection","global-events","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.generateGeoCode(),this.addAllFlorists(),this.validateForm(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSaveBtnClick","click #geo-btn":"generateGeoCode","click .icon-trash":"deleteRow","click #f-add-florist-btn":"addBlankFlorist"},cacheElem:function(){this.$active=this.$el.find("#f-active"),this.$inStorePickupActive=this.$el.find("#f-in-store-pickup-active"),this.$address1=this.$el.find("#f-address-1"),this.$address2=this.$el.find("#f-address-2"),this.$city=this.$el.find("#f-city"),this.$state=this.$el.find("#f-state"),this.$zip=this.$el.find("#f-zip"),this.$country=this.$el.find("#f-country"),this.$phoneNumber=this.$el.find("#f-phone-number"),this.$geoCode=this.$el.find("#f-geo-code"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change"),this.$add=this.$el.find("#f-add-florist-btn"),this.$floristTable=this.$el.find("#f-florists"),this.$floristHeader=this.$el.find("#f-florists-header")},handleCancelBtnClick:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveBtnClick:function(){this.$createEditForm.valid()?(this.model.set({active:this.$active.is(":checked"),inStorePickupActive:this.$inStorePickupActive.is(":checked"),locationDescription:this.$locationDescription.val().trim(),address1:this.$address1.val().trim(),address2:this.$address2.val().trim(),city:this.$city.val().trim(),state:this.$state.find("option:selected").val().trim(),zip:this.$zip.val().trim(),country:this.$country.find("option:selected").val().trim(),phoneNumber:this.$phoneNumber.val().trim(),geoCode:this.$geoCode.val().trim()}),n.get(this.model)||n.add(this.model),i.trigger("form:save",this.$tip),this.parent.showHome()):i.trigger("form:invalid",this.$tip)},deleteRow:function(e){var t=e.currentTarget,n=$(t).closest(".row");n.remove()},addBlankFlorist:function(){this.$floristHeader.fadeIn(100),this.$floristTable.append('<div class="row"><div class="col-12"><div class="col-4 form-section"><input type="text" class="f-florist-tfid" id="f-tfid-"></div><div class="col-2"><button type="button" class="icon icon-btn icon-trash icon-3x y-space-top-xs"></button></div></div></div>')},addFlorist:function(e){this.$floristTable.append('<div class="row"><div class="col-12"><div class="col-4 form-section"><input type="text" class="f-florist-tfid" id="f-tfid-'+e.id+'" value="'+e.tfid+'"></div><div class="col-2"><button type="button" class="icon icon-btn icon-trash icon-3x y-space-top-xs"></button></div></div></div>')},addAllFlorists:function(){var e=this,t=e.model.get("florists"),n=t.length;if(n>0){for(var i=0;n>i;i++){var o=t[i];e.addFlorist(o)}e.$floristHeader.fadeIn(200)}},generateGeoCode:function(){var e=new google.maps.Geocoder,t=[this.$address1.val(),this.$address2.val()+",",this.$city.val()+",",this.$state.find("option:selected").val().trim(),this.$zip.val(),this.$country.find("option:selected").val().trim()].join(" "),n=this;e.geocode({address:t},function(e,t){t===google.maps.GeocoderStatus.OK&&n.$geoCode.val(e[0].geometry.location)})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){this.$createEditForm.validate({rules:{"f-location-description":"required","f-address-1":"required","f-city":"required","f-state":{required:function(e){return""===$(e).find("option:selected").val()}},"f-zip":{required:!0,digits:!0,minlength:5,maxlength:5},"f-country":{required:function(e){return""===$(e).find("option:selected").val()}}}})}});return new o}),define("content/category-sections/more/funeral-home-locations/views/funeral-locations-view",["backbone","./funeral-locations-home-view","./create-edit-location-view","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.showHome(),this},replaceVisible:function(e){e&&this.regions.visible!==e?(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e):e.render(),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;i.trigger("form:cancel",function(){n.model=e,t.replaceVisible(n)})}});return new o}),define("content/category-sections/more/first-time-site-setup/templates/first-time-setup-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+=' <form id="shop-information-first-site-setup" name="shop-information-first-site-setup">\r\n    <div class="row row-spaced">\r\n      <div class="col-12">\r\n        <div class="section-title">\r\n          <h2 class="pull-left">First Time Site Setup</h2>\r\n             <div class="btn-panel">\r\n                <a href="lookup/"><button type="button" id="cancel-btn" class="btn btn-other">Cancel</a></button>\r\n                <button type="button" id="create-site-btn" class="btn btn-submit">Create Site</button>\r\n                <div role="tooltip" data-parent="create-site-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Hidden Alert Message -->\r\n\r\n    <div class="row panel alert-panel y-space-bottom-xxl">\r\n      <div class="col-12 y-space-s">\r\n        <div class="row">\r\n          <div class="col-1">\r\n            <div class="icon icon-3x icon-warning"></div>\r\n          </div>\r\n          <div class="col-11 alert-text">\r\n                         This is a generic placeholder for error messages in eSAT. <br>\r\n                         In the live app, this will be a real message and will be hidden by default.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Hidden Alert Message -->\r\n\r\n    <div id="tabs">\r\n      <ul>\r\n        <li class="right-pad-tabs"><a class="first-time-setup-edit-tab" href="#shop-Information">Shop Information</a></li>\r\n        <li class="right-pad-tabs"><a class="first-time-setup-edit-tab" href="#payment-and-Checkout">Payment & Checkout</a></li>\r\n        <li class="right-pad-tabs"><a class="first-time-setup-edit-tab" href="#siteDesign">Site Design</a></li>\r\n      </ul>\r\n\r\n\r\n    <div id="shop-Information">\r\n         <div class="row row-spaced panel">\r\n\r\n              <div class="row">\r\n                  <div class="col-12">\r\n                      <div class="panel-title">\r\n                          Shop Information\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n\r\n              <div class="row row-spaced">\r\n                  <div class="col-6 form-section">\r\n                      <label for="teleflora-id">Teleflora ID</label><i class="icon icon-tool-tip x-space-s" title="This ID number is unique to this shop. Do not change this without direct instruction from the supervisor."></i>\r\n                      <input type="text" id="teleflora-id" name="teleflora-id" value="'+(null==(__t=TelefloraID)?"":__t)+'">\r\n                  </div>\r\n                  <div class="col-6 form-section">\r\n                      <label for="f-shop-info-url">URL</label><i class="icon icon-tool-tip x-space-s" title="This is the domain name that will direct to the website. Do not change this without a request from the shop. Check with the supervisor if unsure."></i>\r\n                      <input type="text" id="f-shop-info-url" name="f-shop-info-url" value="'+(null==(__t=URL)?"":__t)+'">\r\n                  </div>\r\n              </div>\r\n\r\n              <div class="row row-spaced">\r\n                  <div class="col-6 form-section">\r\n                      <label for="shop-name">Shop Name</label>\r\n                      <input type="text" id="shop-name" name="shop-name" value="'+(null==(__t=ShopName)?"":__t)+'">\r\n                  </div>\r\n\r\n                  <div class="col-6 form-section">\r\n                      <div class="col-10 noPaddingLeft">\r\n                        <label for="f-site-parent">Site Parent</label>\r\n                        <input type="text" id="f-site-parent" name="f-site-parent" value="'+(null==(__t=SiteParent)?"":__t)+'" disabled>\r\n                      </div>\r\n                      <div class="col-2 buttonwithoutlabel">\r\n                        <button type="button" id="edit-parent-btn" class="icon icon-edit icon-btn icon-2x"></button>\r\n                      </div>\r\n                  </div>\r\n              </div>\r\n\r\n          <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                  <label for="address-1">Address 1</label>\r\n                  <input type="text" id="address-1" name="address-1" value="'+(null==(__t=address1)?"":__t)+'">\r\n              </div>\r\n              <div class="col-6 form-section">\r\n                  <label for="address-2">Address 2</label>\r\n                  <input type="text" id="address-2" name="address-2" value="'+(null==(__t=address2)?"":__t)+'">\r\n              </div>\r\n          </div>\r\n\r\n          <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                  <label for="city">City</label>\r\n                  <input type="text" id="city" name="city" value="'+(null==(__t=city)?"":__t)+'">\r\n              </div>\r\n              <div class="col-3 form-section">\r\n                  <label id="stateProvinceLabel" for="state">'+(null==(__t="United States"===country?"State":"Province")?"":__t)+'</label>\r\n                  <div class="select-container">\r\n                      <select id="state" name="state">\r\n                          <option selected disabled hidden value="'+(null==(__t=state)?"":__t)+'">'+(null==(__t=state)?"":__t)+'</option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AL">\r\n                              Alabama\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AK">\r\n                              Alaska\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AZ">\r\n                              Arizona\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="AR">\r\n                              Arkansas\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="CA">\r\n                              California\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="CO">\r\n                              Colorado\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="CT">\r\n                              Connecticut\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="DE">\r\n                              Delaware\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="DC">\r\n                              District of Columbia\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="FL">\r\n                              Florida\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="GA">\r\n                              Georgia\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="HI">\r\n                              Hawaii\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="ID">\r\n                              Idaho\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="IL">\r\n                              Illinois\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="IN">\r\n                              Indiana\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="IA">\r\n                              Iowa\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="KS">\r\n                              Kansas\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="KY">\r\n                              Kentucky\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="LA">\r\n                              Louisiana\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="ME">\r\n                              Maine\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MD">\r\n                              Maryland\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MA">\r\n                              Massachusetts\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MI">\r\n                              Michigan\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MN">\r\n                              Minnesota\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MS">\r\n                              Mississippi\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MO">\r\n                              Missouri\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="MT">\r\n                              Montana\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NE">\r\n                              Nebraska\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NV">\r\n                              Nevada\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NH">\r\n                              New Hampshire\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NJ">\r\n                              New Jersey\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NM">\r\n                              New Mexico\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NY">\r\n                              New York\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="NC">\r\n                              North Carolina\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="ND">\r\n                              North Dakota\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="OH">\r\n                              Ohio\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="OK">\r\n                              Oklahoma\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="OR">\r\n                              Oregon\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="PA">\r\n                              Pennsylvania\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="PR">\r\n                              Puerto Rico\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="RI">\r\n                              Rhode Island\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="SC">\r\n                              South Carolina\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="SD">\r\n                              South Dakota\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="TN">\r\n                              Tennessee\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="TX">\r\n                              Texas\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="UT">\r\n                              Utah\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="VT">\r\n                              Vermont\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="VA">\r\n                              Virginia\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WA">\r\n                              Washington\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WV">\r\n                              West Virginia\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WI">\r\n                              Wisconsin\r\n                          </option>\r\n\r\n                          <option class="state" '+(null==(__t="United States"===country?"":"hidden")?"":__t)+' value="WY">\r\n                              Wyoming\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="AB">\r\n                              Alberta\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="BC">\r\n                              British Columbia\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="MB">\r\n                              Manitoba\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NB">\r\n                              New Brunswick\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NF">\r\n                              Newfoundland and Labrador\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NT">\r\n                              Northwest Territories\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NS">\r\n                              Nova Scotia\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="NU">\r\n                              Nunavut\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="ON">\r\n                              Ontario\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="PE">\r\n                              Prince Edward Island\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="QC">\r\n                              Quebec\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="SK">\r\n                              Saskatchewan\r\n                          </option>\r\n\r\n                          <option class="province" '+(null==(__t="United States"===country?"hidden":"")?"":__t)+' value="YT">\r\n                              Yukon\r\n                          </option>\r\n                      </select>\r\n                  </div>\r\n              </div>\r\n              <div class="col-3 form-section">\r\n                  <label id="zipPostalLabel" for="zip">'+(null==(__t="United States"===country?"Zip Code":"Postal Code")?"":__t)+'</label>\r\n                  <input class="'+(null==(__t="United States"===country?"zipUS":"zipCA")?"":__t)+'" type="text" id="zip" name="zip" value="'+(null==(__t=zip)?"":__t)+'">\r\n              </div>\r\n          </div>\r\n\r\n          <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                  <label for="country">Country</label>\r\n                  <div class="select-container">\r\n                      <select id="country" name="country">\r\n                          <option selected disabled hidden value="'+(null==(__t=country)?"":__t)+'">'+(null==(__t=country)?"":__t)+'</option>\r\n\r\n                          <option value="United States">United States</option>\r\n                          <option value="Canada">Canada</option>\r\n                      </select>\r\n                  </div>\r\n              </div>\r\n              <div class="col-6 form-section">\r\n                  <label for="local-phone-number">Local Phone Number</label>\r\n                  <input type="tel" id="local-phone-number" name="local-phone-number" value="'+(null==(__t=localPhone)?"":__t)+'">\r\n              </div>\r\n          </div>\r\n\r\n          <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                  <label for="alternate-phone-number">Toll Free/Alternate Phone Number</label>\r\n                  <input type="tel" id="alternate-phone-number" name="alternate-phone-number" value="'+(null==(__t=tollfreeAlternatePhone)?"":__t)+'">\r\n              </div>\r\n              <div class="col-6 form-section">\r\n                  <label for="public-email">Public Email Address</label>\r\n                  <input type="email" id="public-email" name="public-email" value="'+(null==(__t=publicEmailAddress)?"":__t)+'">\r\n              </div>\r\n          </div>\r\n\r\n          <div class="row">\r\n              <div class="col-12">\r\n                  <div class="panel-title">\r\n                      Contact Information\r\n                  </div>\r\n              </div>\r\n          </div>\r\n\r\n          <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                  <label for="contact-name">Contact Name</label><i class="icon icon-tool-tip x-space-s" title="This is our point of contact at the shop."></i>\r\n                  <input type="text" id="contact-name" name="contact-name" value="'+(null==(__t=contactName)?"":__t)+'">\r\n              </div>\r\n\r\n          </div>\r\n\r\n          <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                  <label for="contact-phone-number">Contact Phone Number</label><i class="icon icon-tool-tip x-space-s" title="This appears on the website as the contact phone number for the shop."></i>\r\n                  <input type="tel" id="contact-phone-number" name="contact-phone-number" value="'+(null==(__t=contactPhone)?"":__t)+'">\r\n              </div>\r\n\r\n              <div class="col-6 form-section">\r\n                  <label for="contact-alternate-phone-number">Alternate Phone Number</label><i class="icon icon-tool-tip x-space-s" title="This will show up on the site along with the contact phone number."></i>\r\n                  <input type="tel" id="contact-alternate-phone-number" name="contact-alternate-phone-number" value="'+(null==(__t=contactAlternatePhoneNumber)?"":__t)+'">\r\n              </div>\r\n          </div>\r\n\r\n          <div class="row row-spaced">\r\n              <div class="col-6 form-section">\r\n                  <label for="contact-email">Contact Email Address</label><i class="icon icon-tool-tip x-space-s" title="This will show up on the site with the contact information on the about us page."></i>\r\n                  <input type="email" id="contact-email" name="contact-email" value="'+(null==(__t=contactEmail)?"":__t)+'">\r\n              </div>\r\n              <div class="col-6 form-section">\r\n                  <label for="contact-fax-number">Contact Fax Number</label><i class="icon icon-tool-tip x-space-s" title="This will show up on the site with the contact information on the about us page."></i>\r\n                  <input type="tel" id="contact-fax-number" name="contact-fax-number" value="'+(null==(__t=contactFaxNumber)?"":__t)+'">\r\n              </div>\r\n          </div>\r\n\r\n          </div>\r\n\r\n\r\n\r\n\r\n    </div>  <!-- Shopping Information Ends here-->\r\n\r\n\r\n    <div id="payment-and-Checkout">\r\n        <div class="row row-spaced panel">\r\n            <div class="row">\r\n                <div class="col-12">\r\n                    <div class="panel-title">\r\n                        Payment Types Accepted\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row row-spaced">\r\n              <div class="col-6 form-section y-space-bottom-m">\r\n                <label for="f-pos-system-parent">Point of Sale System</label>\r\n                <div class="select-container">\r\n                    <select id="f-pos-system-parent" name="f-pos-system-parent">\r\n                        <option selected disabled hidden value="'+(null==(__t=posSystem)?"":__t)+'">'+(null==(__t=posSystem)?"":__t)+'</option>\r\n                        <option value="Daisy">Daisy</option>\r\n                        <option value="Eagle">Eagle</option>\r\n                        <option value="RTI">RTI</option>\r\n                        <option value="Dove POS">Dove POS</option>\r\n                        <option value="Other">Other</option>\r\n                    </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          <div class="row row-spaced form-section y-space-bottom-m">\r\n            <div class="col-3 form-section y-space-bottom-m">\r\n                <div class="label">Accepted Cards</div>\r\n                <button type="button" id="configure-accepted-cards-btn" class="btn btn-submit">Configure</button>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="credit-card-authorization">Credit Card Authorization</label><i class="icon icon-tool-tip x-space-s" title="Use this to set up their method of credit card processing."></i>\r\n                <div class="select-container">\r\n                    <select id="credit-card-authorization" name="credit-card-authorization">\r\n                        <option selected disabled hidden value="'+(null==(__t=creditCardAuthorization)?"":__t)+'">'+(null==(__t=creditCardAuthorization)?"":__t)+'</option>\r\n                        <option value="Authorize and Capture">Authorize and Capture</option>\r\n                        <option value="CVV/AVS Only">CVV/AVS Only</option>\r\n                        <option value="No CC Processing">No CC Processing</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <div class="label">Security Code Required<i class="icon icon-tool-tip x-space-s" title="Leave this turned on if the florist would like the CVV code to be required."></i></div>\r\n                <input '+(null==(__t=securityCodeActive?"checked":"")?"":__t)+' type="checkbox" id="security-code-active" name="security-code-active" class="on-off-switch" />\r\n                <label for="security-code-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n          </div>\r\n\r\n\r\n             <!-- tax start -->\r\n        <div class="row">\r\n            <div class="col-12">\r\n                <div class="panel-title">Tax Rate</div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-8 form-section">\r\n                <div class="label">Use Automatic Tax Calculations<i class="icon icon-tool-tip x-space-s"></i></div>\r\n                <input '+(null==(__t=automaticTaxCalculationsActive?"checked":"")?"":__t)+' type="checkbox" id="f-automatic-tax-calculations-active" name="f-automatic-tax-calculations-active" class="on-off-switch" />\r\n                <label for="f-automatic-tax-calculations-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="f-tax-rate">Tax Rate (%)</label>\r\n                <input '+(null==(__t=automaticTaxCalculationsActive?"disabled":"")?"":__t)+' type="text" id="f-tax-rate" name="f-tax-rate" value="'+(null==(__t=taxRate)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-12 form-section">\r\n                <div class="panel-title">Tax Calculations</div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4 form-section">\r\n                <div class="label">Tax on Delivery Fees<i class="icon icon-tool-tip x-space-s" title="Leave this turned on to charge tax on the delivery fee."></i></div>\r\n                <input '+(null==(__t=taxDeliveryFeeActive?"checked":"")?"":__t)+' type="checkbox" id="tax-delivery-fee-active" name="tax-delivery-fee-active" class="on-off-switch" />\r\n                <label for="tax-delivery-fee-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <div class="label">Tax Local Deliveries Only<i class="icon icon-tool-tip x-space-s" title="Leave this turned off to charge tax on all deliveries."></i></div>\r\n                <input '+(null==(__t=taxLocalOnlyActive?"checked":"")?"":__t)+' type="checkbox" id="tax-local-only" name="tax-local-only" class="on-off-switch" />\r\n                <label for="tax-local-only" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="tax-calculation">Tax Calculation</label><i class="icon icon-tool-tip x-space-s" title="Choose whether to charge tax by line item or by product total."></i>\r\n                <div class="select-container">\r\n                    <select id="tax-calculation" name="tax-calculation">\r\n                        <option selected disabled hidden value="'+(null==(__t=taxCalculation)?"":__t)+'">'+(null==(__t=taxCalculation)?"":__t)+'</option>\r\n                        <option value="By Line Item">By Line Item</option>\r\n                        <option value="Product Total Only">Product Total Only</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    <!-- tax end -->\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-4 form-section">\r\n                <label for="currency-symbol">Currency Symbol</label>\r\n                <input type="text" id="currency-symbol" name="currency-symbol" value="'+(null==(__t=currencySymbol)?"":__t)+'">\r\n            </div>\r\n\r\n            <div class="col-4 form-section">\r\n                <label for="currency-label">Currency Label</label>\r\n                <input type="text" id="currency-label" name="currency-label" value="'+(null==(__t=currencyLabel)?"":__t)+'">\r\n            </div>\r\n        </div>\r\n\r\n\r\n\r\n        <div class="row">\r\n            <div class="col-12 y-space-top-l">\r\n                <div class="panel-title">\r\n                    Additional Payment Methods\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced form-section">\r\n            <div class="col-4">\r\n                <div class="label">House Accounts<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept House Accounts online."></i></div>\r\n                <input '+(null==(__t=houseAccountsActive?"checked":"")?"":__t)+' type="checkbox" id="house-accounts-active" name="house-accounts-active" class="on-off-switch" />\r\n                <label for="house-accounts-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">Pay In Store<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to allow customers to place an order for pickup, and then pay in store."></i></div>\r\n                <input '+(null==(__t=payInStoreActive?"checked":"")?"":__t)+' type="checkbox" id="pay-in-store-active" name="pay-in-store-active" class="on-off-switch" />\r\n                <label for="pay-in-store-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">JCB<i class="icon icon-tool-tip x-space-s"></i></div>\r\n                <input '+(null==(__t=jcbActive?"checked":"")?"":__t)+' type="checkbox" id="jcb-active" name="jcb-active" class="on-off-switch" />\r\n                <label for="jcb-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class="row row-spaced form-section">\r\n            <div class="col-4">\r\n                <div class="label">Carte Blanche<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept Carte Blanche online."></i></div>\r\n                <input '+(null==(__t=carteBlancheActive?"checked":"")?"":__t)+' type="checkbox" id="carte-blanche-active" name="carte-blanche-active" class="on-off-switch" />\r\n                <label for="carte-blanche-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">PayPal<i class="icon icon-tool-tip x-space-s"></i></div>\r\n                <button type="button" id="configure-paypal-btn" class="btn btn-submit">Configure</button>\r\n            </div>\r\n\r\n            <div class="col-4">\r\n                <div class="label">Gift Cards<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept gift cards online."></i></div>\r\n                <input '+(null==(__t=giftCardsActive?"checked":"")?"":__t)+' type="checkbox" id="gift-cards-active" name="gift-cards-active" class="on-off-switch" />\r\n                <label for="gift-cards-active" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n            </div>\r\n      </div>\r\n\r\n\r\n\r\n\r\n          <div class="row">\r\n            <div class="col-12 y-space-top-l">\r\n              <div class="panel-title">Available Delivery Days</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="row row-spaced">\r\n            <div class="col-12">\r\n              <table class="table alternate form-section" id="m-delivery-days-table">\r\n                <thead>\r\n                  <tr>\r\n                    <th class="col-4">Day</th>\r\n                    <th class="col-2">Availability</th>\r\n                    <th class="col-4">Cutoff Time</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody id="m-delivery-days-list"></tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n          \r\n          </div>\r\n\r\n     \r\n\r\n      <div class="row row-spaced panel">\r\n        <div class="row">\r\n          <div class="col-12">\r\n            <div class="panel-title">Standard Delivery Fee</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n          <div class="col-12 form-section">\r\n            <div class="row label-row">\r\n              <div class="col-3"><label for="f-deliveryFee">Delivery Fee<i class="icon icon-tool-tip x-space-s" title="This is your default delivery fee. We recommend using the local delivery fee here."></i></label></div>\r\n              <div class="col-1"></div>\r\n              <div class="col-6 form-section"><label for="f-deliveryFeeName">Delivery Fee Name<i class="icon icon-tool-tip x-space-s" title="This is what your customers will see when they see this fee."></i></label></div>\r\n            </div>\r\n            <div class="row"></div>\r\n          </div>\r\n          <div class="col-3 form-section">\r\n            <div class="dollar-container">\r\n            <input type="text" id="f-deliveryFee" name="f-deliveryFee" value="'+(null==(__t=deliveryFee)?"":__t)+'">\r\n            </div>\r\n          </div>\r\n          <div class="col-1"></div>\r\n          <div class="col-6 form-section">\r\n            <input type="text" id="f-deliveryFeeName" name="f-deliveryFeeName" value="'+(null==(__t=deliveryFeeName)?"":__t)+'">\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <div class="row label-row">\r\n              <div class="col-3 form-section"><label for="f-additionalFee">Additional Fee<i class="icon icon-tool-tip x-space-s" title="Are there any other fees aside from delivery you charge? You can put those here."></i></label></div>\r\n              <div class="col-1"></div>\r\n              <div class="col-6 form-section"><label for="f-additionalFeeName">Additional Fee Name<i class="icon icon-tool-tip x-space-s" title="What is this additional fee called?"></i></label></div>\r\n            </div>\r\n            <div class="row"></div>\r\n          </div>\r\n          <div class="col-3 form-section">\r\n          <div class="dollar-container form-section">\r\n            <input type="text" id="f-additionalFee" name="f-additionalFee" value="'+(null==(__t=additionalFee)?"":__t)+'">\r\n          </div>\r\n          </div>\r\n          <div class="col-1"></div>\r\n          <div class="col-6 form-section">\r\n            <input type="text" id="f-additionalFeeName" name="f-additionalFeeName" value="'+(null==(__t=additionalFeeName)?"":__t)+'">\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n          <div class="col-12 form-section">\r\n            <div class="row label-row">\r\n              <div class="col-3 form-section">\r\n                <label for="f-wireFee">Wire Fee<i class="icon icon-tool-tip x-space-s" title="Do you charge a wire out fee? If so, put that here."></i></label>\r\n              </div>\r\n              <div class="col-1"></div>\r\n              <div class="col-6 form-section">\r\n                <div class="bottom-aligned">\r\n                  <label for="f-wireFeeName">Wire Fee Name<i class="icon icon-tool-tip x-space-s" title="What would you like to call your wire fee?"></i></label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n              <div class="col-3 form-section">\r\n              <div class="dollar-container form-section">\r\n                <input type="text" id="f-wireFee" name="f-wireFee" value="'+(null==(__t=wireFee)?"":__t)+'">\r\n              </div>\r\n              </div>\r\n              <div class="col-1"></div>\r\n              <div class="col-6 form-section">\r\n                <input type="text" id="f-wireFeeName" name="f-wireFeeName" value="'+(null==(__t=wireFeeName)?"":__t)+'">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n          <div class="col-4 form-section"><div class="label">Activate In-Store Pickup Fee<i title="Do you charge a fee for customers to pick up in your store? If so, turn this option on." class="icon icon-tool-tip x-space-s"></i></div>\r\n          <input '+(null==(__t=inStorePickupFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-inStorePickupFeeActive" name="f-inStorePickupFeeActive" class="on-off-switch" />\r\n          <label for="f-inStorePickupFeeActive" class="on-off-switch-label">\r\n            <div class="on-off-switch-state">on</div>\r\n          </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n          <div id="in-store-pickup-fee-container" class="col-12 '+(null==(__t=inStorePickupFeeActive?"":"hidden-alt")?"":__t)+'">\r\n            <div class="row label-row form-section">\r\n              <div class="col-3"><label for="f-inStorePickupFee">In-Store Pickup Fee<i class="icon icon-tool-tip x-space-s" title="Do you charge a fee for customers to pick up in your store? If so, put that fee here."></i></label></div>\r\n              <div class="col-1"></div>\r\n              <div class="col-6 form-section"><label for="f-inStorePickupFeeName">In-Store Pickup Fee Name<i class="icon icon-tool-tip x-space-s" title="What would you like to call your In-Store Pickup Fee?"></i></label></div>\r\n            </div>\r\n\r\n            <div class="row">\r\n              <div class="col-3 form-section">\r\n              <div class="dollar-container form-section">\r\n                <input type="text" id="f-inStorePickupFee" name="f-inStorePickupFee" value="'+(null==(__t=inStorePickupFee)?"":__t)+'">\r\n              </div>\r\n              </div>\r\n              <div class="col-1"></div>\r\n              <div class="col-6 form-section">\r\n                <input type="text" id="f-inStorePickupFeeName" name="f-inStorePickupFeeName" value="'+(null==(__t=inStorePickupFeeName)?"":__t)+'">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n          <div class="col-12">\r\n            <div class="row label-row ">\r\n              <div class="col-4 form-section"><div class="label">One Delivery Fee to Same Address on Same Order on Same Day<i class="icon icon-tool-tip x-space-s" title="Leave this turned on to charge a single delivery if two orders are delivered to the same address on the same day."></i></div></div>\r\n            </div>\r\n\r\n            <div class="row">\r\n              <div class="col-4 form-section">\r\n                <input '+(null==(__t=oneDeliveryFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-oneDeliveryFeeActive" name="f-oneDeliveryFeeActive" class="on-off-switch" />\r\n                <label for="f-oneDeliveryFeeActive" class="on-off-switch-label">\r\n                    <div class="on-off-switch-state">on</div>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n\r\n\r\n    </div>  <!--Payment and Checkout Ends here-->\r\n\r\n\r\n\r\n    <div id="siteDesign">\r\n          <div class="row row-spaced panel">\r\n\r\n            <div class="row">\r\n                <div class="col-12">\r\n                    <div class="panel-title">\r\n                        Site Design\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class="row panel alert-panel hidden-alt">\r\n\r\n                <div class="col-12 y-space-bottom-xxl">\r\n\r\n                  <div class="row">\r\n                    <div class="col-1">\r\n                      <div class="icon icon-3x icon-warning"></div>\r\n\r\n                    </div>\r\n\r\n                <div class="col-11 alert-text left-align">\r\n                      You have uploaded an invalid image file.  Please upload image files that have\r\n                      extensions \'.gif\', \'.jpg\', \'.jpeg\', \'.bmp\' or \'.png\'.\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n\r\n\r\n\r\n            <div class="row row-spaced">\r\n\r\n                <div class="row y-space-bottom-l form-section">\r\n                         <div class="col-5 form-section ">\r\n\r\n                            <button type="button" class="fileUpload btn btn-Boostrap btn-primary">\r\n                                <span><i class="icon icon-add icon-lg"></i> Shop Logo</span>\r\n                                <input id="upload-shop-logo" name="upload-shop-logo" type="file" class="upload" accept="image/*"/>\r\n                              </button>\r\n                          </div>\r\n\r\n                          <div class="col-6 Upload-Logo-Div">\r\n\r\n                              <img id="preview-img" class="fit-container"  style="max-height:60%; padding: 10px; max-width:60%;" src="'+(null==(__t=shopLogo)?"":__t)+'">\r\n                            \r\n                          </div>\r\n\r\n\r\n                  </div>\r\n              </div>\r\n\r\n\r\n<!--         <form id="p-site-theme" name="p-site-theme">\r\n -->\r\n            <div class="row">\r\n                <div class="col-12">\r\n                    <div class="panel-title">\r\n                        Site Theme\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n              <div class="row row-spaced x-space-s">\r\n                <div class="col-12">\r\n                  Make your website your own by choosing your theme and layout. Select from the options below.\r\n                </div>\r\n              </div>\r\n\r\n              <div class="row row-spaced x-space-s">\r\n                <div class="row">\r\n                  <div class="col-12">\r\n                    <div class="panel-title">Theme Selection</div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="row row-spaced">\r\n                  <div class="col-6">\r\n                    <h3 class="title">Your Current Theme</h3>\r\n\r\n                    <div class="row">\r\n                      <div class="col-12">\r\n                        <div class="display-container">\r\n                          <img id="display-image" class="fill-container" src="'+(null==(__t=layoutImgUrl)?"":__t)+'" alt="">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="col-6">\r\n                    <div class="row">\r\n                      <div class="col-12 clearfix">\r\n                        <h3 class="title pull-left">Layout Options</h3><button type="button" id="back-btn" class="hidden-alt btn-clear pull-right no-padding"><i class="icon icon-left-chevron x-space-s"></i>Back</button>\r\n                      </div>\r\n                    </div>\r\n\r\n\r\n                    <div class="row">\r\n                      <div class="col-12">\r\n                        <div id="layout-theme-container" class="grid-2-closed scroll-container">\r\n\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div class="row row-spaced">\r\n                      <div id="seasonal-toggle" class="col-12 '+(null==(__t="Seasonal"===selectedThemeName?"":"hidden-alt")?"":__t)+'">\r\n                        <div class="label">Use Automatic Seasonal Rotation<i title="???" class="icon icon-tool-tip x-space-s"></i></div>\r\n                        <input '+(null==(__t=automaticSeasonalRotationActive?"checked":"")?"":__t)+' type="checkbox" id="f-automatic-seasonal-rotation-active" name="f-automatic-seasonal-rotation-active" class="on-off-switch" />\r\n                        <label for="f-automatic-seasonal-rotation-active" class="on-off-switch-label">\r\n                            <div class="on-off-switch-state">on</div>\r\n                        </label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n\r\n              <div class="row row-spaced x-space-s form-section">\r\n                <div class="row">\r\n                  <div class="col-12">\r\n                    <div class="panel-title">Header Settings</div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="row row-spaced">\r\n\r\n                  <div class="col-4 form-section select-container">\r\n                    <div class="label">Header Layout</div>\r\n                    <select id="f-header-layout" name="f-header-layout">\r\n                      <option selected disabled hidden value="'+(null==(__t=headerLayout)?"":__t)+'">'+(null==(__t=headerLayout)?"":__t)+'</option>\r\n                      <option value="Layout 1">Layout 1</option>\r\n                      <option value="Layout 2">Layout 2</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div class="col-4 form-section">\r\n                    <div class="label">Display Social Media Icons</div>\r\n                    <input '+(null==(__t=headerIcons?"checked":"")?"":__t)+' type="checkbox" id="f-header-icons" name="f-header-icons" class="on-off-switch" />\r\n                    <label for="f-header-icons" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>      \r\n                  </div>\r\n                  <div class="col-4 form-section">\r\n                    <div class="label">Display Quick Shop<i title="The Quick Shop feature allows your customers to search by occasion for fast and easy product results." class="icon icon-tool-tip x-space-s"></i></div>\r\n                    <input '+(null==(__t=headerQuickShop?"checked":"")?"":__t)+' type="checkbox" id="f-header-quick-shop" name="f-header-quick-shop" class="on-off-switch" />\r\n                    <label for="f-header-quick-shop" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>      \r\n                  </div>\r\n\r\n                </div>\r\n\r\n              </div>\r\n\r\n    \r\n\r\n<!--          <form id="m-hompeage-settings" name="m-hompeage-settings">\r\n -->\r\n                <div class="row row-spaced x-space-s">\r\n                  <div class="row">\r\n                    <div class="col-12">\r\n                      <div class="panel-title">Homepage Layout</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div id="homepage-layout-container" class="row row-spaced"></div>\r\n\r\n                  <div class="row row-spaced">\r\n                    <div class="col-12">\r\n                      <div class="panel-title">Homepage Featured Items</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="row row-spaced form-section">\r\n\r\n                  <div class="col-12">\r\n\r\n                    <div class="row">\r\n\r\n                      <div class="col-4 form-section">\r\n                        <label for="f-featured-item-count">Featured Item Count</label><i class="icon icon-tool-tip x-space-s" title="Select how many items you\'d like to feature on your homepage."></i>\r\n\r\n                        <div class="select-container">\r\n                          <select id="f-featured-item-count" name="f-featured-item-count">\r\n                              <option selected disabled hidden value="'+(null==(__t=featuredItemCount)?"":__t)+'">'+(null==(__t=featuredItemCount)?"":__t)+"</option>\r\n                              ";
for(var i=0,j=activeLayout.maxNumber;j>i;++i)__p+='\r\n                              <option value="'+(null==(__t=i+1)?"":__t)+'">'+(null==(__t=i+1)?"":__t)+"</option>\r\n                              ";__p+='\r\n                          </select>\r\n                        </div>\r\n\r\n                      </div>\r\n\r\n\r\n                      <div class="col-4">\r\n                        <div class="label">Suggested Number of Items<i class="icon icon-tool-tip x-space-s" title="We think the homepage looks best with '+(null==(__t=activeLayout.suggestedNumber)?"":__t)+' featured products."></i></div>\r\n                        <div id="suggested-count-display" class="y-space-s btn btn-other text-2x center-align">'+(null==(__t=activeLayout.suggestedNumber)?"":__t)+'</div>\r\n                      </div>\r\n\r\n                      <div class="col-4">\r\n                        <div class="label">Maximum Number of Items<i class="icon icon-tool-tip x-space-s" title="This is the maximum number of items you can feature on your homepage with the layout you selected."></i></div>\r\n                        <div id="max-count-display" class="y-space-s btn btn-other text-2x center-align">'+(null==(__t=activeLayout.maxNumber)?"":__t)+'</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div class="row row-spaced x-space-s">\r\n\r\n                  <div class="row">\r\n                    <div class="col-12">\r\n                      <div class="panel-title">Homepage Footer Text<i title="Not sure about our default homepage footer? You can write your own footer here!" class="icon icon-tool-tip x-space-s"></i></div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="row">\r\n                    <div class="col-12 form-section">\r\n                      <textarea class="size-2" name="f-homepage-footer-text" id="f-homepage-footer-text">'+(null==(__t=homepageFooterText)?"":__t)+'</textarea>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class="row row-spaced">\r\n\r\n                    <div class="col-12 form-section">\r\n                      <div class="label">Display Default SEO Text</div>\r\n                      <input '+(null==(__t=defaultFooter?"checked":"")?"":__t)+' type="checkbox" id="f-defaultFooter" name="f-defaultFooter" class="on-off-switch" />\r\n                      <label for="f-defaultFooter" class="on-off-switch-label">\r\n                          <div class="on-off-switch-state">on</div>\r\n                      </label>\r\n                    </div>\r\n                  </div>  \r\n                  \r\n                </div>\r\n\r\n\r\n\r\n\r\n    </div>  <!-- Site Design ends here -->\r\n\r\n <div id="configure-modal"></div>\r\n\r\n</div> <!-- Tabs Ends Here -->\r\n\r\n</form>\r\n'}return __p}}),define("content/category-sections/more/first-time-site-setup/models/first-time-site-setup-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-first-time-setup.json",defaults:{TelefloraID:"",ShopName:"",URL:"",SiteParent:"",address1:"",address2:"",city:"",state:"",zip:"",country:"United States",localPhone:"",tollfreeAlternatePhone:"",publicEmailAddress:"",contactName:"",contactPhone:"",contactAlternatePhoneNumber:"",contactEmail:"",contactFaxNumber:"",posSystem:"RTI",creditCardAuthorization:"Authorize and Capture",emailMarketingOptInStatus:!0,shopLogo:"",siteTheme:"",HomepageLayout:"",currencySymbol:"$",currencyLabel:"",pointOfSaleSystem:"RTI",securityCodeActive:!1,houseAccountsActive:!1,payInStoreActive:!1,jcbActive:!1,carteBlancheActive:!1,giftCardsActive:!0,deliveryFee:"0.00",deliveryFeeName:"",additionalFee:"0.00",additionalFeeName:"",wireFee:"0.00",wireFeeName:"",oneDeliveryFeeActive:!0,overrideAllCustomActive:!1,inStorePickupFeeActive:!0,inStorePickupFee:"0.00",inStorePickupFeeName:"",creditCardVisaActive:!0,creditCardMasterCardActive:!0,creditCardDiscoverActive:!0,creditCardAmericanExpressActive:!0,paypalActive:!0,payPalEmailAddress:"",payPalPosAccountNumber:"",emailMarketingActive:!0,layoutImgUrl:"",logoImgUrl:"",automaticSeasonalRotationActive:!0,selectedThemeName:"",selectedThemeId:"0.00",selectedThemeSchemeId:"0.00",headerIcons:!0,headerLayout:"Layout 1",headerQuickShop:!0,homepageFooterText:"",featuredItemCount:"0.00",defaultFooter:!0,featuredLayout:{},creditCardVisaActive:!0,creditCardMasterCardActive:!0,creditCardDiscoverActive:!0,creditCardAmericanExpressActive:!0,paypalActive:!0,payPalEmailAddress:"",payPalPosAccountNumber:"",payPalActive:!0,currencySymbol:"$",currencyLabel:"",pointOfSaleSystem:"RTI",automaticTaxCalculationsActive:!1,taxRate:"",taxDeliveryFeeActive:!1,taxLocalOnlyActive:!0,taxCalculation:"By Line Item",data:[]}});return new t}),define("content/category-sections/more/first-time-site-setup/templates/delivery-days-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'" class="data-row">\r\n	<td>'+(null==(__t=name)?"":__t)+'</td>\r\n	<td>\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-day-status-'+(null==(__t=id)?"":__t)+'" name="f-day-status-'+(null==(__t=id)?"":__t)+'" class="switch on-off-switch">\r\n			<label for="f-day-status-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n		</div>\r\n	</td>\r\n	<td>\r\n		<div class="col-6">\r\n			<div class="select-container">\r\n				<select class="f-time-1" name="f-day-time-'+(null==(__t=id)?"":__t)+'" id="f-day-time-'+(null==(__t=id)?"":__t)+'">\r\n					<option value="1:00" '+(null==(__t="1:00"==cutofftime?"selected":"")?"":__t)+'>1:00</option>\r\n					<option value="1:30" '+(null==(__t="1:30"==cutofftime?"selected":"")?"":__t)+'>1:30</option>\r\n					<option value="2:00" '+(null==(__t="2:00"==cutofftime?"selected":"")?"":__t)+'>2:00</option>\r\n					<option value="2:30" '+(null==(__t="2:30"==cutofftime?"selected":"")?"":__t)+'>2:30</option>\r\n					<option value="3:00" '+(null==(__t="3:00"==cutofftime?"selected":"")?"":__t)+'>3:00</option>\r\n					<option value="3:30" '+(null==(__t="3:30"==cutofftime?"selected":"")?"":__t)+'>3:30</option>\r\n					<option value="4:00" '+(null==(__t="4:00"==cutofftime?"selected":"")?"":__t)+'>4:00</option>\r\n					<option value="4:30" '+(null==(__t="4:30"==cutofftime?"selected":"")?"":__t)+'>4:30</option>\r\n					<option value="5:00" '+(null==(__t="5:00"==cutofftime?"selected":"")?"":__t)+'>5:00</option>\r\n					<option value="5:30" '+(null==(__t="5:30"==cutofftime?"selected":"")?"":__t)+'>5:30</option>\r\n					<option value="6:00" '+(null==(__t="6:00"==cutofftime?"selected":"")?"":__t)+'>6:00</option>\r\n					<option value="6:30" '+(null==(__t="6:30"==cutofftime?"selected":"")?"":__t)+'>6:30</option>\r\n					<option value="7:00" '+(null==(__t="7:00"==cutofftime?"selected":"")?"":__t)+'>7:00</option>\r\n					<option value="7:30" '+(null==(__t="7:30"==cutofftime?"selected":"")?"":__t)+'>7:30</option>\r\n					<option value="8:00" '+(null==(__t="8:00"==cutofftime?"selected":"")?"":__t)+'>8:00</option>\r\n					<option value="8:30" '+(null==(__t="8:30"==cutofftime?"selected":"")?"":__t)+'>8:30</option>\r\n					<option value="9:00" '+(null==(__t="9:00"==cutofftime?"selected":"")?"":__t)+'>9:00</option>\r\n					<option value="9:30" '+(null==(__t="9:30"==cutofftime?"selected":"")?"":__t)+'>9:30</option>\r\n					<option value="10:00" '+(null==(__t="10:00"==cutofftime?"selected":"")?"":__t)+'>10:00</option>\r\n					<option value="10:30" '+(null==(__t="10:30"==cutofftime?"selected":"")?"":__t)+'>10:30</option>\r\n					<option value="11:00" '+(null==(__t="11:00"==cutofftime?"selected":"")?"":__t)+'>11:00</option>\r\n					<option value="11:30" '+(null==(__t="11:30"==cutofftime?"selected":"")?"":__t)+'>11:30</option>\r\n					<option value="12:00" '+(null==(__t="12:00"==cutofftime?"selected":"")?"":__t)+'>12:00</option>\r\n					<option value="12:30" '+(null==(__t="12:30"==cutofftime?"selected":"")?"":__t)+'>12:30</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="col-6">\r\n			<div class="select-container">\r\n				<select class="f-time-2" id="f-day-ampm-'+(null==(__t=id)?"":__t)+'" name="f-day-ampm-'+(null==(__t=id)?"":__t)+'" class="m-deliverydaystimes-timeright">\r\n					<option value="PM" '+(null==(__t="PM"===cutoffampm?"selected":"")?"":__t)+'>PM</option>\r\n					<option value="AM" '+(null==(__t="AM"===cutoffampm?"selected":"")?"":__t)+">AM</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>";return __p}}),define("content/category-sections/more/first-time-site-setup/views/delivery-times-list-view",["jquery","underscore","backbone","../templates/delivery-days-list-tpl"],function(e,t,n,i){var o=n.View.extend({template:i,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this},cacheElem:function(){this.$active=this.$el.find(".on-off-switch"),this.$cutofftime=this.$el.find(".f-time-1"),this.$cutoffampm=this.$el.find(".f-time-2")},events:{"change .on-off-switch":"handleSwitch","change .f-time-1":"handleChangeTime1","change .f-time-2":"handleChangeTime2"},handleSwitch:function(){this.model.set("active",this.$active.is(":checked"))},handleChangeTime1:function(){this.model.set("cutofftime",this.$cutofftime.find("option:selected").val())},handleChangeTime2:function(){this.model.set("cutoffampm",this.$cutoffampm.find("option:selected").val())}});return o}),define("text!content/category-sections/more/first-time-site-setup/templates/delivery-days-list-tpl.html",[],function(){return"<tr data-id=\"<%= id %>\" class=\"data-row\">\r\n	<td><%= name %></td>\r\n	<td>\r\n		<div class=\"centered-content-container\">\r\n			<input <%= active ? 'checked' : '' %> type=\"checkbox\" id=\"f-day-status-<%= id %>\" name=\"f-day-status-<%= id %>\" class=\"switch on-off-switch\">\r\n			<label for=\"f-day-status-<%= id %>\" class=\"on-off-switch-label\"><div class=\"on-off-switch-state\"></div>on</label>\r\n		</div>\r\n	</td>\r\n	<td>\r\n		<div class=\"col-6\">\r\n			<div class=\"select-container\">\r\n				<select class=\"f-time-1\" name=\"f-day-time-<%= id %>\" id=\"f-day-time-<%= id %>\">\r\n					<option value=\"1:00\" <%= cutofftime == '1:00' ? 'selected' : '' %>>1:00</option>\r\n					<option value=\"1:30\" <%= cutofftime == '1:30' ? 'selected' : '' %>>1:30</option>\r\n					<option value=\"2:00\" <%= cutofftime == '2:00' ? 'selected' : '' %>>2:00</option>\r\n					<option value=\"2:30\" <%= cutofftime == '2:30' ? 'selected' : '' %>>2:30</option>\r\n					<option value=\"3:00\" <%= cutofftime == '3:00' ? 'selected' : '' %>>3:00</option>\r\n					<option value=\"3:30\" <%= cutofftime == '3:30' ? 'selected' : '' %>>3:30</option>\r\n					<option value=\"4:00\" <%= cutofftime == '4:00' ? 'selected' : '' %>>4:00</option>\r\n					<option value=\"4:30\" <%= cutofftime == '4:30' ? 'selected' : '' %>>4:30</option>\r\n					<option value=\"5:00\" <%= cutofftime == '5:00' ? 'selected' : '' %>>5:00</option>\r\n					<option value=\"5:30\" <%= cutofftime == '5:30' ? 'selected' : '' %>>5:30</option>\r\n					<option value=\"6:00\" <%= cutofftime == '6:00' ? 'selected' : '' %>>6:00</option>\r\n					<option value=\"6:30\" <%= cutofftime == '6:30' ? 'selected' : '' %>>6:30</option>\r\n					<option value=\"7:00\" <%= cutofftime == '7:00' ? 'selected' : '' %>>7:00</option>\r\n					<option value=\"7:30\" <%= cutofftime == '7:30' ? 'selected' : '' %>>7:30</option>\r\n					<option value=\"8:00\" <%= cutofftime == '8:00' ? 'selected' : '' %>>8:00</option>\r\n					<option value=\"8:30\" <%= cutofftime == '8:30' ? 'selected' : '' %>>8:30</option>\r\n					<option value=\"9:00\" <%= cutofftime == '9:00' ? 'selected' : '' %>>9:00</option>\r\n					<option value=\"9:30\" <%= cutofftime == '9:30' ? 'selected' : '' %>>9:30</option>\r\n					<option value=\"10:00\" <%= cutofftime == '10:00' ? 'selected' : '' %>>10:00</option>\r\n					<option value=\"10:30\" <%= cutofftime == '10:30' ? 'selected' : '' %>>10:30</option>\r\n					<option value=\"11:00\" <%= cutofftime == '11:00' ? 'selected' : '' %>>11:00</option>\r\n					<option value=\"11:30\" <%= cutofftime == '11:30' ? 'selected' : '' %>>11:30</option>\r\n					<option value=\"12:00\" <%= cutofftime == '12:00' ? 'selected' : '' %>>12:00</option>\r\n					<option value=\"12:30\" <%= cutofftime == '12:30' ? 'selected' : '' %>>12:30</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n\r\n		<div class=\"col-6\">\r\n			<div class=\"select-container\">\r\n				<select class=\"f-time-2\" id=\"f-day-ampm-<%= id %>\" name=\"f-day-ampm-<%= id %>\" class=\"m-deliverydaystimes-timeright\">\r\n					<option value=\"PM\" <%= cutoffampm === 'PM' ? 'selected' : '' %>>PM</option>\r\n					<option value=\"AM\" <%= cutoffampm === 'AM' ? 'selected' : '' %>>AM</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>"}),define("content/category-sections/more/first-time-site-setup/models/delivery-days-model",["backbone"],function(e){var t=e.Model.extend({defaults:{name:"",active:!0,cutofftime:"5:00",cutoffampm:"PM"}});return t}),define("content/category-sections/more/first-time-site-setup/collections/delivery-days-collection",["backbone","../models/delivery-days-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-delivery-days-times.json",model:t,comparator:function(e,t){return e.get("id")<t.get("id")?-1:1}});return new n}),define("content/category-sections/more/first-time-site-setup/models/layout-theme-model",["backbone"],function(e){var t=e.Model.extend({defaults:{name:"",imgUrl:"",colorSchemes:[]}});return t}),define("content/category-sections/more/first-time-site-setup/collections/layout-theme-collection",["backbone","../models/layout-theme-model"],function(e,t){var n=e.Collection.extend({url:"/mock/site-theme-layouts.json",model:t});return new n}),define("content/category-sections/more/first-time-site-setup/templates/layout-theme-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<span>\r\n	<div id="'+(null==(__t="l"+id)?"":__t)+'" class="site-theme-layout-theme grid-item hover-tip-overlay '+(null==(__t="Seasonal"===name?"seasonal-layout":"")?"":__t)+'">\r\n		<div class="hover-tip outline">\r\n			<div class="row row-spaced center-align">\r\n				<div class="col-12 y-space-s">\r\n					'+(null==(__t=name)?"":__t)+'	\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<img class="fill-container" src="'+(null==(__t=imgUrl)?"":__t)+'" alt="">\r\n	</div>\r\n\r\n	<div class="hidden-alt site-theme-color-schemes">\r\n		';for(var i=0,j=colorSchemes.length;j>i;++i)__p+='\r\n			<div id="'+(null==(__t="l"+id+"s"+colorSchemes[i].id)?"":__t)+'" class="grid-item color-scheme hover-tip-overlay">\r\n				<div class="hover-tip outline">\r\n					<div class="row row-spaced center-align">\r\n						<div class="col-12 y-space-s">\r\n							'+(null==(__t=colorSchemes[i].name)?"":__t)+'	\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<img class="fill-container" src="'+(null==(__t=colorSchemes[i].imgUrl)?"":__t)+'" alt="">\r\n			</div>\r\n		';__p+="\r\n	</div>\r\n</span>"}return __p}}),define("content/category-sections/more/first-time-site-setup/views/layout-theme-view",["backbone","../templates/layout-theme-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.cacheElem()},cacheElem:function(){this.$colorSchemes=this.$el.find(".site-theme-color-schemes")},events:{"click .site-theme-layout-theme":"showColorSchemes","click .color-scheme":"markActiveColorScheme"},showColorSchemes:function(e){$(e.currentTarget).hasClass("seasonal-layout")?this.parent.showSeasonalToggle():this.parent.hideSeasonalToggle(),this.parent.showColorSchemes(),this.$colorSchemes.fadeIn(200)},markActiveColorScheme:function(e){var t,i;t=e.currentTarget.getAttribute("id").match(/^l(\d)s(\d)$/),this.parent.markActiveColorScheme("#"+t[0]),i={themeId:t[1],themeSchemeId:t[2]},this.parent.updateState(i),n.trigger("form:editing")}});return i}),define("content/category-sections/more/first-time-site-setup/collections/homepage-layout-collection",["backbone","components/current-layout/models/layout-model"],function(e,t){var n=e.Collection.extend({url:"/mock/homepage-layouts.json",model:t,getActive:function(){return this.where({active:!0})},setAllInactive:function(){this.getActive().forEach(function(e){e.set("active",!1)})}});return n}),define("content/category-sections/more/first-time-site-setup/templates/credit-card-config-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Configure Accepted Credit Cards</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" class="btn btn-submit">Save Changes</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n    <!-- Hidden Alert Message -->\r\n\r\n    <div class="row panel alert-panel y-space-bottom-xxl">\r\n      <div class="col-12 y-space-s">\r\n        <div class="row">\r\n          <div class="col-1">\r\n            <div class="icon icon-3x icon-warning"></div>\r\n          </div>\r\n          <div class="col-11 alert-text left-align">\r\n                         This is a generic placeholder for error messages in eSAT. <br>\r\n                         In the live app, this will be a real message and will be hidden by default.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row form-section">\r\n    <div class="col-12 ">\r\n        <div class="row">\r\n        	<div class="col-3">\r\n                <div class="label">Visa<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept Visa online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardVisaActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-visa-active" name="f-credit-card-visa-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-visa-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n        	</div>\r\n\r\n        	<div class="col-3">\r\n                <div class="label">MasterCard<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept MasterCard online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardMasterCardActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-master-card-active" name="f-credit-card-master-card-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-master-card-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n        	</div>\r\n\r\n            <div class="col-3">\r\n                <div class="label">Discover<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept Discover online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardDiscoverActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-discover-active" name="f-credit-card-discover-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-discover-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-3">\r\n                <div class="label">American Express<i class="icon icon-tool-tip x-space-s" title="Turn this on if the florist would like to accept American Express online."></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=creditCardAmericanExpressActive?"checked":"")?"":__t)+' type="checkbox" id="f-credit-card-american-express-active" name="f-credit-card-american-express-active" class="on-off-switch" />\r\n                    <label for="f-credit-card-american-express-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n</div>';return __p}}),define("content/category-sections/more/first-time-site-setup/views/credit-card-config-view",["backbone","../models/first-time-site-setup-model","../templates/credit-card-config-tpl"],function(e,t,n){var i=e.View.extend({tagName:"div",template:n,render:function(){return this.$el.html(this.template(t.toJSON())),this.delegateEvents(),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick"},closeModal:function(){this.$el.parent().dialog("close")},handleSaveBtnClick:function(){t.set({creditCardVisaActive:this.$el.find("#f-credit-card-visa-active").is(":checked"),creditCardMasterCardActive:this.$el.find("#f-credit-card-master-card-active").is(":checked"),creditCardDiscoverActive:this.$el.find("#f-credit-card-discover-active").is(":checked"),creditCardAmericanExpressActive:this.$el.find("#f-credit-card-american-express-active").is(":checked")}),this.closeModal()}});return new i}),define("content/category-sections/more/first-time-site-setup/templates/paypal-config-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Configure PayPal</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" class="btn btn-submit">Save Changes</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text left-align">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<form id="edit-form" class="row form-section">\r\n    <div class="col-12">\r\n        <div class="row row-spaced">\r\n            <div class="col-2 form-section left-align">\r\n                <div class="label">Active<i class="icon icon-tool-tip x-space-s" title=""></i></div>\r\n                <div class="centered-content-container">\r\n                    <input '+(null==(__t=payPalActive?"checked":"")?"":__t)+' type="checkbox" id="f-paypal-active" name="f-paypal-active" class="on-off-switch" />\r\n                    <label for="f-paypal-active" class="on-off-switch-label">\r\n                        <div class="on-off-switch-state">on</div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        	<div class="col-5 form-section left-align">\r\n                <label for="f-paypal-email-address">PayPal Email Address</label><i class="icon icon-tool-tip x-space-s" title="Enter the email address associated with the florist\'s PayPal account here."></i>\r\n                <input id="f-paypal-email-address" name="f-paypal-email-address" type="email" value="'+(null==(__t=payPalEmailAddress)?"":__t)+'">\r\n        	</div>\r\n\r\n        	<div class="col-5 form-section left-align">\r\n                <label for="f-paypal-pos-account-number" class="label">POS Account Number</label><i class="icon icon-tool-tip x-space-s" title="Enter the Point of Sale Account Number here."></i>\r\n                <input id="f-paypal-pos-account-number" name="f-paypal-pos-account-number" type="text" value="'+(null==(__t=payPalPosAccountNumber)?"":__t)+'">\r\n        	</div>\r\n        </div>\r\n    </div>\r\n</form>';return __p}}),define("content/category-sections/more/first-time-site-setup/views/paypal-config-view",["backbone","../models/first-time-site-setup-model","../templates/paypal-config-tpl","jqueryval"],function(e,t,n){var i=e.View.extend({tagName:"div",template:n,render:function(){return this.$el.html(this.template(t.toJSON())),this.delegateEvents(),this.cacheElem(),this.validateForm(),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick"},cacheElem:function(){this.$editForm=this.$el.find("#edit-form")},closeModal:function(){this.$el.parent().dialog("close")},handleSaveBtnClick:function(){this.editForm.valid()&&(t.set({payPalEmailAddress:this.$el.find("#f-paypal-email-address").val().trim(),payPalPosAccountNumber:this.$el.find("#f-paypal-pos-account-number").val().trim(),payPalActive:this.$el.find("#f-paypal-active").is(":checked")}),this.closeModal())},validateForm:function(){this.editForm=this.$editForm.validate({rules:{"f-paypal-email-address":{required:!0,email:!0},"f-paypal-pos-account-number":{required:!0,digits:!0}}})}});return new i}),define("content/category-sections/more/first-time-site-setup/templates/edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="site-lookup-box">\r\n	<div class="row row-spaced">\r\n		<div class="col-6 left-align">\r\n			<h2 class="siteTitle">\r\n				Site Lookup\r\n			</h2>\r\n			<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloribus facere necessitatibus repudiandae, porro saepe fugit provident.</p>\r\n			<form id="f-site-lookup">\r\n				<div class="form-section">\r\n					<label for="f-tfid">Teleflora ID:</label>\r\n					<input type="text" id="f-tfid" name="f-tfid">\r\n				</div>\r\n				<div class="form-section">\r\n					<label for="f-name">Site Name:</label>\r\n					<input type="text" id="f-name" name="f-name">\r\n				</div>						\r\n				<div class="form-section">\r\n					<label for="f-url">URL:</label>\r\n					<input type="text" id="f-url" name="f-url">\r\n				</div>\r\n				<div class="form-section">\r\n					<label for="f-vendorid">Vendor ID:</label>\r\n					<input type="text" id="f-vendorid" name="f-vendorid">\r\n				</div>\r\n				<div class="form-section">\r\n					<label for="f-group">Group:</label>\r\n					<input type="text" id="f-group" name="f-group">\r\n				</div>																		\r\n				<div class="center-align y-space-s"><button class="btn btn-submit" type="button" id="search-btn">Search</button></div>\r\n\r\n			</form>\r\n\r\n		</div>\r\n\r\n		<div class="col-6 left-align">\r\n			<table id="site-table">\r\n				<thead>\r\n					<th>id</th>\r\n					<th>tfid</th>\r\n					<th>name</th>\r\n					<th>url</th>\r\n					<th>vendorid</th>\r\n					<th>group</th>		\r\n				</thead>\r\n				<tbody>\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n	<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n</div>\r\n';return __p}}),function(e){function t(e,t,n,i){for(var o="",r=0,a=n.length;a>r;r++)o+=i(n[r],t);return"<tr>"+o+"</tr>"}function n(e,t){var n=e.attributeWriter(t),i="<td";return(e.hidden||e.textAlign)&&(i+=' style="',e.hidden&&(i+="display: none;"),e.textAlign&&(i+="text-align: "+e.textAlign+";"),i+='"'),i+">"+n+"</td>"}function i(e){return e[this.id]}function o(t){return e(t).html()}function r(t,n){this.update=function(){var i="",o=n.table.columns,r=n.writers._rowWriter,a=n.writers._cellWriter;t.$element.trigger("dynatable:beforeUpdate",i);for(var s=0,l=n.dataset.records.length;l>s;s++){var c=n.dataset.records[s],d=r(s,c,o,a);i+=d}if(n.features.recordCount&&e("#dynatable-record-count-"+t.element.id).replaceWith(t.recordsCount.create()),n.features.paginate&&(e("#dynatable-pagination-links-"+t.element.id).replaceWith(t.paginationLinks.create()),n.features.perPageSelect&&e("#dynatable-per-page-"+t.element.id).val(parseInt(n.dataset.perPage))),n.features.sort&&o){t.sortsHeaders.removeAllArrows();for(var s=0,l=o.length;l>s;s++){var u=o[s],h=x.allMatch(n.dataset.sorts,u.sorts,function(e,t){return t in e}),p=n.dataset.sorts[u.sorts[0]];h&&t.$element.find('[data-dynatable-column="'+u.id+'"]').find(".dynatable-sort-header").each(function(){1==p?t.sortsHeaders.appendArrowUp(e(this)):t.sortsHeaders.appendArrowDown(e(this))})}}if(n.inputs.queries||n.features.search){var f=n.inputs.queries||e();n.features.search&&(f=f.add("#dynatable-query-search-"+t.element.id)),f.each(function(){var t=e(this),i=n.dataset.queries[t.data("dynatable-query")];t.val(i||"")})}t.$element.find(n.table.bodyRowSelector).remove(),t.$element.append(i),t.$element.trigger("dynatable:afterUpdate",i)}}function a(t,n){var i=this;this.initOnLoad=function(){return t.$element.is("table")},this.init=function(){n.table.columns=[],this.getFromTable()},this.getFromTable=function(){var o=t.$element.find(n.table.headRowSelector).children("th,td");return o.length?void o.each(function(t){i.add(e(this),t,!0)}):e.error("Couldn't find any columns headers in '"+n.table.headRowSelector+" th,td'. If your header row is different, specify the selector in the table: headRowSelector option.")},this.add=function(i,o,r,a){var s=n.table.columns,l=i.text(),c=i.data("dynatable-column")||x.normalizeText(l,n.table.defaultColumnIdStyle),d=i.data("dynatable-sorts"),u=d?e.map(d.split(","),function(t){return e.trim(t)}):[c];if(c||(this.generate(i),c=i.data("dynatable-column")),s.splice(o,0,{index:o,label:l,id:c,attributeWriter:n.writers[c]||n.writers._attributeWriter,attributeReader:n.readers[c]||n.readers._attributeReader,sorts:u,hidden:"none"===i.css("display"),textAlign:i.css("text-align")}),i.attr("data-dynatable-column",c).addClass("dynatable-head"),n.table.headRowClass&&i.addClass(n.table.headRowClass),!r){var h=o+1,p=t.$element.find(n.table.headRowSelector).children("th:nth-child("+h+"),td:nth-child("+h+")").first(),f=s.slice(o+1,s.length);if(p.length?p.before(i):t.$element.find(n.table.headRowSelector).append(i),t.sortsHeaders.attachOne(i.get()),f.length)for(var v=0,m=f.length;m>v;v++)f[v].index+=1;a||t.dom.update()}return _},this.remove=function(e){{var i=n.table.columns;i.length}if("number"==typeof e){var o=i[e];this.removeFromTable(o.id),this.removeFromArray(e)}else for(var r=i.length-1;r>=0;r--){var o=i[r];o.id===e&&(this.removeFromTable(e),this.removeFromArray(r))}t.dom.update()},this.removeFromTable=function(e){t.$element.find(n.table.headRowSelector).children('[data-dynatable-column="'+e+'"]').first().remove()},this.removeFromArray=function(e){var t,i=n.table.columns;i.splice(e,1),t=i.slice(e,i.length);for(var o=0,r=t.length;r>o;o++)t[o].index-=1},this.generate=function(t){var n=void 0===t?e("<th></th>"):t;return this.attachGeneratedAttributes(n)},this.attachGeneratedAttributes=function(e){var i=t.$element.find(n.table.headRowSelector).children("th[data-dynatable-generated]").length;return e.attr("data-dynatable-column","dynatable-generated-"+i).attr("data-dynatable-no-sort","true").attr("data-dynatable-generated",i)}}function s(t,n){this.initOnLoad=function(){return!n.dataset.ajax},this.init=function(){null===n.dataset.records&&(n.dataset.records=this.getFromTable(),n.dataset.queryRecordCount||(n.dataset.queryRecordCount=this.count()),n.dataset.totalRecordCount||(n.dataset.totalRecordCount=n.dataset.queryRecordCount)),n.dataset.originalRecords=e.extend(!0,[],n.dataset.records)
},this.updateFromJson=function(e){var t;if("_root"===n.params.records?t=e:n.params.records in e&&(t=e[n.params.records]),n.params.record)for(var i=t.length-1,o=0;i>o;o++)t[o]=t[o][n.params.record];n.params.queryRecordCount in e&&(n.dataset.queryRecordCount=e[n.params.queryRecordCount]),n.params.totalRecordCount in e&&(n.dataset.totalRecordCount=e[n.params.totalRecordCount]),n.dataset.records=t},this.sort=function(){var i=[].sort,o=n.dataset.sorts,r=n.dataset.sortsKeys,a=n.dataset.sortTypes,s=function(n,i){var s;if(e.isEmptyObject(o))s=t.sorts.functions.originalPlacement(n,i);else for(var l=0,c=r.length;c>l;l++){var d=r[l],u=o[d],h=a[d]||t.sorts.guessType(n,i,d);if(s=t.sorts.functions[h](n,i,d,u),0!==s)break}return s};return i.call(n.dataset.records,s)},this.paginate=function(){var e=this.pageBounds(),t=e[0],i=e[1];n.dataset.records=n.dataset.records.slice(t,i)},this.resetOriginal=function(){n.dataset.records=n.dataset.originalRecords||[]},this.pageBounds=function(){var e=n.dataset.page||1,t=(e-1)*n.dataset.perPage,i=Math.min(t+n.dataset.perPage,n.dataset.queryRecordCount);return[t,i]},this.getFromTable=function(){var i=[],o=n.table.columns,r=t.$element.find(n.table.bodyRowSelector);return r.each(function(r){var a={};a["dynatable-original-index"]=r,e(this).find("th,td").each(function(n){void 0===o[n]&&t.domColumns.add(t.domColumns.generate(),o.length,!1,!0);var i=o[n].attributeReader(this,a),r=o[n].id;"string"==typeof i&&i.match(/\s*\<.+\>/)&&(a["dynatable-sortable-text"]||(a["dynatable-sortable-text"]={}),a["dynatable-sortable-text"][r]=e.trim(e("<div></div>").html(i).text())),a[r]=i}),"function"==typeof n.readers._rowReader&&n.readers._rowReader(r,this,a),i.push(a)}),i},this.count=function(){return n.dataset.records.length}}function l(t,n){this.initOnLoad=function(){return n.features.recordCount},this.init=function(){this.attach()},this.create=function(){var i=t.records.count(),o=n.dataset.queryRecordCount,r=n.dataset.totalRecordCount,a=n.inputs.recordCountText,s=n.params.records;if(o>i&&n.features.paginate){var l=t.records.pageBounds();a+="<span class='dynatable-record-bounds'>"+(l[0]+1)+" to "+l[1]+"</span> of "}else i===o&&n.features.paginate&&(a+=i+" of ");return a+=o+" "+s,r>o&&(a+=" (filtered from "+r+" total records)"),e("<span></span>",{id:"dynatable-record-count-"+t.element.id,"class":"dynatable-record-count",html:a})},this.attach=function(){var i=n.inputs.recordCountTarget?e(n.inputs.recordCountTarget):t.$element;i[n.inputs.recordCountPlacement](this.create())}}function c(t,n){this.init=function(){this.attach()},this.create=function(){var i=e("<div></div>",{html:"<span>"+n.inputs.processingText+"</span>",id:"dynatable-processing-"+t.element.id,"class":"dynatable-processing",style:"position: absolute; display: none;"});return i},this.position=function(){var n=e("#dynatable-processing-"+t.element.id),i=n.children("span"),o=i.outerHeight(),r=i.outerWidth(),a=t.$element,s=a.offset(),l=a.outerHeight(),c=a.outerWidth();return n.offset({left:s.left,top:s.top}).width(c).height(l),i.offset({left:s.left+(c-r)/2,top:s.top+(l-o)/2}),n},this.attach=function(){t.$element.before(this.create())},this.show=function(){e("#dynatable-processing-"+t.element.id).show(),this.position()},this.hide=function(){e("#dynatable-processing-"+t.element.id).hide()}}function d(t,n){this.initOnLoad=function(){return n.features.pushState&&history.pushState},this.init=function(){window.onpopstate=function(e){e.state&&e.state.dynatable&&t.state.pop(e)}},this.push=function(i){var o,r,a,s,l,c,d=window.location.search,u=!(window.history.state&&window.history.state.dynatable),h=u?"replaceState":"pushState";d&&/^\?/.test(d)&&(d=d.substring(1)),e.extend(o,i),a=x.refreshQueryString(d,i,n),a&&(a="?"+a),s=window.location.hash,r=window.location.pathname,t.$element.trigger("dynatable:push",i),c={dynatable:{dataset:n.dataset}},u||(c.dynatable.scrollTop=e(window).scrollTop()),l=JSON.stringify(c),c.dynatable.dataset.perPageOptions=e.makeArray(c.dynatable.dataset.perPageOptions);try{window.history[h](c,"Dynatable state",r+a+s)}catch(p){c.dynatable.dataset.records=null,window.history[h](c,"Dynatable state",r+a+s)}},this.pop=function(i){var o=i.state.dynatable;n.dataset=o.dataset,o.scrollTop&&e(window).scrollTop(o.scrollTop),o.dataset.records?t.dom.update():t.process(!0)}}function u(t,n){this.initOnLoad=function(){return n.features.sort},this.init=function(){var e=window.location.search.match(new RegExp(n.params.sorts+"[^&=]*=[^&]*","g"));n.dataset.sorts=e?x.deserialize(e)[n.params.sorts]:{},n.dataset.sortsKeys=e?x.keysFromObject(n.dataset.sorts):[]},this.add=function(t,i){var o=n.dataset.sortsKeys,r=e.inArray(t,o);return n.dataset.sorts[t]=i,-1===r&&o.push(t),_},this.remove=function(t){var i=n.dataset.sortsKeys,o=e.inArray(t,i);return delete n.dataset.sorts[t],-1!==o&&i.splice(o,1),_},this.clear=function(){n.dataset.sorts={},n.dataset.sortsKeys.length=0},this.guessType=function(e,t,n){var i={string:"string",number:"number","boolean":"number",object:"number"},o=e[n]?typeof e[n]:typeof t[n],r=i[o]||"number";return r},this.functions={number:function(e,t,n,i){return e[n]===t[n]?0:i>0?e[n]-t[n]:t[n]-e[n]},string:function(e,t,n,i){var o,r=e["dynatable-sortable-text"]&&e["dynatable-sortable-text"][n]?e["dynatable-sortable-text"][n]:e[n],a=t["dynatable-sortable-text"]&&t["dynatable-sortable-text"][n]?t["dynatable-sortable-text"][n]:t[n];return r=r.toLowerCase(),a=a.toLowerCase(),o=r===a?0:i>0?r>a:a>r,o===!1?-1:o-0},originalPlacement:function(e,t){return e["dynatable-original-index"]-t["dynatable-original-index"]}}}function h(t,n){var i=this;this.initOnLoad=function(){return n.features.sort},this.init=function(){this.attach()},this.create=function(o){var r=e(o),a=e("<a></a>",{"class":"dynatable-sort-header",href:"#",html:r.html()}),s=r.data("dynatable-column"),l=x.findObjectInArray(n.table.columns,{id:s});return a.bind("click",function(e){i.toggleSort(e,a,l),t.process(),e.preventDefault()}),this.sortedByColumn(a,l)&&(1==this.sortedByColumnValue(l)?this.appendArrowUp(a):this.appendArrowDown(a)),a},this.removeAll=function(){t.$element.find(n.table.headRowSelector).children("th,td").each(function(){i.removeAllArrows(),i.removeOne(this)})},this.removeOne=function(t){var n=e(t),i=n.find(".dynatable-sort-header");if(i.length){var o=i.html();i.remove(),n.html(n.html()+o)}},this.attach=function(){t.$element.find(n.table.headRowSelector).children("th,td").each(function(){i.attachOne(this)})},this.attachOne=function(t){var n=e(t);n.data("dynatable-no-sort")||n.html(this.create(t))},this.appendArrowUp=function(e){this.removeArrow(e),e.append("<span class='dynatable-arrow'> &#9650;</span>")},this.appendArrowDown=function(e){this.removeArrow(e),e.append("<span class='dynatable-arrow'> &#9660;</span>")},this.removeArrow=function(e){e.find(".dynatable-arrow").remove()},this.removeAllArrows=function(){t.$element.find(".dynatable-arrow").remove()},this.toggleSort=function(e,i,o){var r=this.sortedByColumn(i,o),a=this.sortedByColumnValue(o);if(n.inputs.multisort&&x.anyMatch(e,n.inputs.multisort,function(t,n){return e[n]})||(this.removeAllArrows(),t.sorts.clear()),r)if(1==a){for(var s=0,l=o.sorts.length;l>s;s++)t.sorts.add(o.sorts[s],-1);this.appendArrowDown(i)}else{for(var s=0,l=o.sorts.length;l>s;s++)t.sorts.remove(o.sorts[s]);this.removeArrow(i)}else{for(var s=0,l=o.sorts.length;l>s;s++)t.sorts.add(o.sorts[s],1);this.appendArrowUp(i)}},this.sortedByColumn=function(e,t){return x.allMatch(n.dataset.sorts,t.sorts,function(e,t){return t in e})},this.sortedByColumnValue=function(e){return n.dataset.sorts[e.sorts[0]]}}function p(t,n){var i=this;this.initOnLoad=function(){return n.inputs.queries||n.features.search},this.init=function(){var e=window.location.search.match(new RegExp(n.params.queries+"[^&=]*=[^&]*","g"));n.dataset.queries=e?x.deserialize(e)[n.params.queries]:{},""===n.dataset.queries&&(n.dataset.queries={}),n.inputs.queries&&this.setupInputs()},this.add=function(e,t){return n.features.paginate&&(n.dataset.page=1),n.dataset.queries[e]=t,_},this.remove=function(e){return delete n.dataset.queries[e],_},this.run=function(){for(query in n.dataset.queries)if(n.dataset.queries.hasOwnProperty(query)){var o=n.dataset.queries[query];if(void 0===i.functions[query]){var r=x.findObjectInArray(n.table.columns,{id:query});if(!r){e.error("Query named '"+query+"' called, but not defined in queries.functions");continue}i.functions[query]=function(e,t){return e[query]==t}}n.dataset.records=e.map(n.dataset.records,function(e){return i.functions[query](e,o)?e:null})}n.dataset.queryRecordCount=t.records.count()},this.runSearch=function(i){var o=e.extend({},n.dataset.queries);i?this.add("search",i):this.remove("search"),x.objectsEqual(n.dataset.queries,o)||t.process()},this.setupInputs=function(){n.inputs.queries.each(function(){var o=e(this),r=o.data("dynatable-query-event")||n.inputs.queryEvent,a=o.data("dynatable-query")||o.attr("name")||this.id,s=function(o){var r=e(this).val();return""===r&&(r=void 0),r===n.dataset.queries[a]?!1:(r?i.add(a,r):i.remove(a),t.process(),void o.preventDefault())};o.attr("data-dynatable-query",a).bind(r,s).bind("keypress",function(e){13==e.which&&s.call(this,e)}),n.dataset.queries[a]&&o.val(decodeURIComponent(n.dataset.queries[a]))})},this.functions={search:function(e,t){var n=!1;for(attr in e)if(e.hasOwnProperty(attr)){var i=e[attr];if("string"==typeof i&&-1!==i.toLowerCase().indexOf(t.toLowerCase())){n=!0;break}}else;return n}}}function f(t,n){this.initOnLoad=function(){return n.features.search},this.init=function(){this.attach()},this.create=function(){var i=e("<input />",{type:"search",id:"dynatable-query-search-"+t.element.id,"data-dynatable-query":"search",value:n.dataset.queries.search}),o=e("<span></span>",{id:"dynatable-search-"+t.element.id,"class":"dynatable-search",text:"Search: "}).append(i);return i.bind(n.inputs.queryEvent,function(){t.queries.runSearch(e(this).val())}).bind("keypress",function(n){13==n.which&&(t.queries.runSearch(e(this).val()),n.preventDefault())}),o},this.attach=function(){var i=n.inputs.searchTarget?e(n.inputs.searchTarget):t.$element;i[n.inputs.searchPlacement](this.create())}}function v(e,t){this.initOnLoad=function(){return t.features.paginate},this.init=function(){var e=window.location.search.match(new RegExp(t.params.page+"=([^&]*)"));this.set(e&&t.features.pushState?e[1]:1)},this.set=function(e){t.dataset.page=parseInt(e,10)}}function m(t,n){var i=this;this.initOnLoad=function(){return n.features.paginate},this.init=function(){var e=window.location.search.match(new RegExp(n.params.perPage+"=([^&]*)"));e&&n.features.pushState?this.set(e[1],!0):this.set(n.dataset.perPageDefault,!0),n.features.perPageSelect&&this.attach()},this.create=function(){for(var o=e("<select>",{id:"dynatable-per-page-"+t.element.id,"class":"dynatable-per-page-select"}),r=0,a=n.dataset.perPageOptions.length;a>r;r++){var s=n.dataset.perPageOptions[r],l=n.dataset.perPage==s?'selected="selected"':"";o.append('<option value="'+s+'" '+l+">"+s+"</option>")}return o.bind("change",function(){i.set(e(this).val()),t.process()}),e("<span />",{"class":"dynatable-per-page"}).append("<span class='dynatable-per-page-label'>"+n.inputs.perPageText+"</span>").append(o)},this.attach=function(){var i=n.inputs.perPageTarget?e(n.inputs.perPageTarget):t.$element;i[n.inputs.perPagePlacement](this.create())},this.set=function(e,i){i||t.paginationPage.set(1),n.dataset.perPage=parseInt(e)}}function g(t,n){this.initOnLoad=function(){return n.features.paginate},this.init=function(){this.attach()},this.create=function(){var i='<ul id="dynatable-pagination-links-'+t.element.id+'" class="'+n.inputs.paginationClass+'">',o=n.inputs.paginationLinkClass,r=n.inputs.paginationActiveClass,a=n.inputs.paginationDisabledClass,s=Math.ceil(n.dataset.queryRecordCount/n.dataset.perPage),l=n.dataset.page,c=[n.inputs.paginationGap[0],n.dataset.page-n.inputs.paginationGap[1],n.dataset.page+n.inputs.paginationGap[2],s+1-n.inputs.paginationGap[3]];i+="<li><span>Pages: </span></li>";for(var d=1;s>=d;d++)if(!(d>c[0]&&d<c[1]||d>c[2]&&d<c[3])){var u,h,p=t.paginationLinks.buildLink(d,d,o,l==d,r);if(u=e.inArray(d,c),h=c[u+1],u>0&&1!==d&&h&&h>d+1){var f='<li><span class="dynatable-page-break">&hellip;</span></li>';p=2>u?f+p:p+f}if(n.inputs.paginationPrev&&1===d){var v=t.paginationLinks.buildLink(l-1,n.inputs.paginationPrev,o+" "+n.inputs.paginationPrevClass,1===l,a);p=v+p}if(n.inputs.paginationNext&&d===s){var m=t.paginationLinks.buildLink(l+1,n.inputs.paginationNext,o+" "+n.inputs.paginationNextClass,l===s,a);p+=m}i+=p}i+="</ul>";var g="#dynatable-pagination-links-"+t.element.id+" a."+o+":not(."+r+",."+a+")";return e(document).undelegate(g,"click.dynatable"),e(document).delegate(g,"click.dynatable",function(i){$this=e(this),$this.closest(n.inputs.paginationClass).find("."+r).removeClass(r),$this.addClass(r),t.paginationPage.set($this.data("dynatable-page")),t.process(),i.preventDefault()}),i},this.buildLink=function(e,t,n,i,o){var r="<a data-dynatable-page="+e+' class="'+n,a="<li";return i&&(r+=" "+o,a+=' class="'+o+'"'),r+='">'+t+"</a>",a+=">"+r+"</li>"},this.attach=function(){var i=n.inputs.paginationLinkTarget?e(n.inputs.paginationLinkTarget):t.$element;i[n.inputs.paginationLinkPlacement](t.paginationLinks.create())}}var b,y,_,w,x,$,k,t,n,i,o,C={dom:r,domColumns:a,records:s,recordsCount:l,processingIndicator:c,state:d,sorts:u,sortsHeaders:h,queries:p,inputsSearch:f,paginationPage:v,paginationPerPage:m,paginationLinks:g};b={features:{paginate:!0,sort:!0,pushState:!0,search:!0,recordCount:!0,perPageSelect:!0},table:{defaultColumnIdStyle:"camelCase",columns:null,headRowSelector:"thead tr",bodyRowSelector:"tbody tr",headRowClass:null},inputs:{queries:null,sorts:null,multisort:["ctrlKey","shiftKey","metaKey"],page:null,queryEvent:"blur change",recordCountTarget:null,recordCountPlacement:"after",paginationLinkTarget:null,paginationLinkPlacement:"after",paginationClass:"dynatable-pagination-links",paginationLinkClass:"dynatable-page-link",paginationPrevClass:"dynatable-page-prev",paginationNextClass:"dynatable-page-next",paginationActiveClass:"dynatable-active-page",paginationDisabledClass:"dynatable-disabled-page",paginationPrev:"Previous",paginationNext:"Next",paginationGap:[1,2,2,1],searchTarget:null,searchPlacement:"before",perPageTarget:null,perPagePlacement:"before",perPageText:"Show: ",recordCountText:"Showing ",processingText:"Processing..."},dataset:{ajax:!1,ajaxUrl:null,ajaxCache:null,ajaxOnLoad:!1,ajaxMethod:"GET",ajaxDataType:"json",totalRecordCount:null,queries:{},queryRecordCount:null,page:null,perPageDefault:10,perPageOptions:[10,20,50,100],sorts:{},sortsKeys:null,sortTypes:{},records:null},writers:{_rowWriter:t,_cellWriter:n,_attributeWriter:i},readers:{_rowReader:null,_attributeReader:o},params:{dynatable:"dynatable",queries:"queries",sorts:"sorts",page:"page",perPage:"perPage",offset:"offset",records:"records",record:null,queryRecordCount:"queryRecordCount",totalRecordCount:"totalRecordCount"}},_={init:function(t,n){return this.settings=y(n),this.element=t,this.$element=e(t),$.call(this),this},process:function(e){k.call(this,e)}},y=function(t){var n=e.extend(!0,{},b,t);return t&&(t.inputs&&(t.inputs.multisort&&(n.inputs.multisort=t.inputs.multisort),t.inputs.paginationGap&&(n.inputs.paginationGap=t.inputs.paginationGap)),t.dataset&&t.dataset.perPageOptions&&(n.dataset.perPageOptions=t.dataset.perPageOptions)),n},$=function(){this.$element.trigger("dynatable:preinit",this);for(model in C)if(C.hasOwnProperty(model)){var e=this[model]=new C[model](this,this.settings);e.initOnLoad()&&e.init()}this.$element.trigger("dynatable:init",this),(!this.settings.dataset.ajax||this.settings.dataset.ajax&&this.settings.dataset.ajaxOnLoad||this.settings.features.paginate)&&this.process()},k=function(t){var n={};if(this.$element.trigger("dynatable:beforeProcess",n),e.isEmptyObject(this.settings.dataset.queries)||(n[this.settings.params.queries]=this.settings.dataset.queries),this.processingIndicator.show(),this.settings.features.sort&&!e.isEmptyObject(this.settings.dataset.sorts)&&(n[this.settings.params.sorts]=this.settings.dataset.sorts),this.settings.features.paginate&&this.settings.dataset.page){var i=this.settings.dataset.page,o=this.settings.dataset.perPage;n[this.settings.params.page]=i,n[this.settings.params.perPage]=o,n[this.settings.params.offset]=(i-1)*o}if(this.settings.dataset.ajaxData&&e.extend(n,this.settings.dataset.ajaxData),this.settings.dataset.ajax){var r=this,a={type:r.settings.dataset.ajaxMethod,dataType:r.settings.dataset.ajaxDataType,data:n,error:function(){},success:function(e){r.$element.trigger("dynatable:ajax:success",e),r.records.updateFromJson(e),r.dom.update(),!t&&r.state.initOnLoad()&&r.state.push(n)},complete:function(){r.processingIndicator.hide()}};a.url=this.settings.dataset.ajaxUrl?this.settings.dataset.ajaxUrl:x.refreshQueryString(window.location.href,{},this.settings),null!==this.settings.dataset.ajaxCache&&(a.cache=this.settings.dataset.ajaxCache),e.ajax(a)}else this.records.resetOriginal(),this.queries.run(),this.settings.features.sort&&this.records.sort(),this.settings.features.paginate&&this.records.paginate(),this.dom.update(),this.processingIndicator.hide(),!t&&this.state.initOnLoad()&&this.state.push(n);this.$element.trigger("dynatable:afterProcess",n)},w={initOnLoad:function(){return!0},init:function(){}};for(model in C)if(C.hasOwnProperty(model)){var T=C[model];T.prototype=w}x=_.utility={normalizeText:function(e,t){return e=this.textTransform[t](e)},textTransform:{trimDash:function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"-")},camelCase:function(e){return e=this.trimDash(e),e.replace(/(\-[a-zA-Z])/g,function(e){return e.toUpperCase().replace("-","")}).replace(/([A-Z])([A-Z]+)/g,function(e,t,n){return t+n.toLowerCase()}).replace(/^[A-Z]/,function(e){return e.toLowerCase()})},dashed:function(e){return e=this.trimDash(e),this.lowercase(e)},underscore:function(e){return e=this.trimDash(e),this.lowercase(e.replace(/(-)/g,"_"))},lowercase:function(e){return e.replace(/([A-Z])/g,function(e){return e.toLowerCase()})}},deserialize:function(t){if(!t)return{};"object"==typeof t&&(t=t.join("&"));for(var n={},i=t.split("&"),o=0;o<i.length;o++){var r,a,s=i[o].split("="),l=decodeURIComponent(s[0]);if(s[1]){for(r=decodeURIComponent(s[1].replace(/\+/g," "));a=l.match(/([^&=]+)\[([^&=]+)\]$/);){var c=r;l=a[1],r={},"]["==a[2].substr(a[2].length-2)?r[a[2].substr(0,a[2].length-2)]=[c]:r[a[2]]=c}"undefined"==typeof n[l]?n[l]="[]"!=l.substr(l.length-2)?r:[r]:"string"==typeof n[l]?n[l]=r:"object"==typeof n[l]?n[l]=e.extend({},n[l],r):n[l].push(r)}}return n},refreshQueryString:function(t,n,i){{var o,r=this,a=t.split("?");a.shift()}o=this.deserialize(t);for(h in i.params)if(i.params.hasOwnProperty(h)){var s=i.params[h];if(!i.features.sort&&"sorts"==h||!i.features.paginate&&r.anyMatch(h,["page","perPage","offset"],function(e,t){return e==t}))continue;if(("page"===h||"offset"===h)&&1===n.page){o[s]&&delete o[s];continue}if("perPage"===h&&n[s]==i.dataset.perPageDefault){o[s]&&delete o[s];continue}if("queries"==h&&n[s]){var l=i.inputs.queries||[],c=e.makeArray(l.map(function(){return e(this).attr("name")}));i.features.search&&c.push("search");for(var d=0,u=c.length;u>d;d++){var h=c[d];n[s][h]?("undefined"==typeof o[s]&&(o[s]={}),o[s][h]=n[s][h]):delete o[s][h]}continue}n[s]?o[s]=n[s]:delete o[s]}return decodeURI(e.param(o))},keysFromObject:function(e){var t=[];for(var n in e)t.push(n);return t},findObjectInArray:function(e,t){for(var n,i=this,o=0,r=e.length;r>o;o++){var a=e[o];if(i.allMatch(a,t,function(e,t,n){return e[t]==n})){n=a;break}}return n},allMatch:function(t,n,i){var o=!0,r=e.isArray(n);return e.each(n,function(e,n){var a=r?i(t,n):i(t,e,n);return a?void 0:o=!1}),o},anyMatch:function(t,n,i){var o=!1,r=e.isArray(n);return e.each(n,function(e,n){var a=r?i(t,n):i(t,e,n);return a?(o=!0,!1):void 0}),o},objectsEqual:function(e,t){for(attr in e)if(e.hasOwnProperty(attr)&&(!t.hasOwnProperty(attr)||e[attr]!==t[attr]))return!1;for(attr in t)if(t.hasOwnProperty(attr)&&!e.hasOwnProperty(attr))return!1;return!0},randomHash:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)}},"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),e.dynatableSetup=function(e){b=y(e)},e.dynatable=function(t){e.fn.dynatable=function(n){return this.each(function(){e.data(this,"dynatable")||e.data(this,"dynatable",Object.create(t).init(this,n))})}},e.dynatable(_)}(jQuery),define("dynatables",function(){}),define("content/category-sections/more/first-time-site-setup/views/edit-view",["backbone","../models/first-time-site-setup-model","../templates/edit-view-tpl","dynatables","datatables"],function(e,t,n){var i=e.View.extend({tagName:"div",template:n,render:function(){var e=this;return this.$el.html(this.template(t.toJSON())),this.delegateEvents(),setTimeout(function(){e.runDataTables(),e.handleSearch()},500),this},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSaveBtnClick","click #search-btn":"handleSearch","click .odd":"handleSave","click .even":"handleSave"},runDataTables:function(){dtable=$("#site-table").DataTable({ajax:"/lookup/sites.json",features:{paginate:!1,sort:!1,perPageSelect:!1},columns:[{data:"tfid",sDefaultContent:""},{data:"name",sDefaultContent:""},{data:"url",sDefaultContent:""},{data:"vendorid",sDefaultContent:""},{data:"group",sDefaultContent:""}]})},handleSearch:function(){$("#f-tfid").on("keyup change",function(){dtable.column(0).search(this.value).draw()}),$("#f-name").on("keyup change",function(){dtable.column(1).search(this.value).draw()}),$("#f-url").on("keyup change",function(){dtable.column(2).search(this.value).draw()}),$("#f-vendorid").on("keyup change",function(){dtable.column(3).search(this.value).draw()}),$("#f-group").on("keyup change",function(){dtable.column(4).search(this.value).draw()})},closeModal:function(){this.$el.parent().dialog("close")},handleSave:function(e){var n=e.currentTarget.cells[1].innerText;t.set({SiteParent:n.trim()}),this.closeModal()}});return new i}),define("content/category-sections/more/first-time-site-setup/views/first-time-site-setup-view",["underscore","backbone","../templates/first-time-setup-home-tpl","../models/first-time-site-setup-model","./delivery-times-list-view","text!../templates/delivery-days-list-tpl.html","../collections/delivery-days-collection","../collections/layout-theme-collection","./layout-theme-view","components/current-layout/views/current-layout-view","../collections/homepage-layout-collection","./credit-card-config-view","./paypal-config-view","./edit-view","global-events","jquerymask","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c,d,u,h,p,f){var v=t.View.extend({template:n,render:function(){var e=this;return i.fetchCustom().done(function(){e.currentLayoutView=new c({type:"Homepage",collection:new d(i.get("featuredLayout")),cb:e.updateFeaturedCounts.bind(e)});var t=i.toJSON();t.activeLayout=i.get("featuredLayout"),e.$el.html(e.template(t)),e.cacheElem(),e.delegateEvents(),e.setModal(),e.applyTabs(),e.applyToolTips(),e.validateForms(),e.$homepageLayoutContainer.append(e.currentLayoutView.render().el),s.fetchCustom().done(function(){e.addAllLayoutThemes(),e.markActiveColorScheme()}),e.state={themeId:i.get("selectedThemeId"),themeSchemeId:i.get("selectedThemeSchemeId")}}),a.fetchCustom().done(function(){e.daysCollection=a.deepClone(),e.cacheElem(),e.addAllDays(),e.applyToolTips()}),e.cacheElem(),e.validateForms(),e.addMasks(),f.trigger("form:editing"),e},events:{"click #create-site-btn":"handleSave","change #upload-shop-logo":"handleShopLogoUpload","click #back-btn":"hideColorSchemes","change #f-automatic-seasonal-rotation-active":"handleSeasonalToggle","click #configure-accepted-cards-btn":"showCreditCardModal","click #configure-paypal-btn":"showPaypalModal","click #edit-parent-btn":"showEditModal","change #country":"handleCountryChange","change #f-automatic-tax-calculations-active":"handleTaxToggle"},cacheElem:function(){this.$daysList=this.$el.find("#m-delivery-days-list"),this.$firstTimeSetupForm=this.$el.find("#shop-information-first-site-setup"),this.$telefloraId=this.$el.find("#teleflora-id"),this.$url=this.$el.find("#f-shop-info-url"),this.$shopName=this.$el.find("#shop-name"),this.$address1=this.$el.find("#address-1"),this.$address2=this.$el.find("#address-2"),this.$SiteParent=this.$el.find("#f-site-parent"),this.$city=this.$el.find("#city"),this.$state=this.$el.find("#state"),this.$zip=this.$el.find("#zip"),this.$country=this.$el.find("#country"),this.$localPhoneNumber=this.$el.find("#local-phone-number"),this.$alternatePhoneNumber=this.$el.find("#alternate-phone-number"),this.$publicEmail=this.$el.find("#public-email"),this.$contactName=this.$el.find("#contact-name"),this.$contactPhoneNumber=this.$el.find("#contact-phone-number"),this.$contactAlternatePhoneNumber=this.$el.find("#contact-alternate-phone-number"),this.$contactEmail=this.$el.find("#contact-email"),this.$contactFaxNumber=this.$el.find("#contact-fax-number"),this.$pointOfSaleSystem=this.$el.find("#f-pos-system-parent"),this.$creditCardAuthorization=this.$el.find("#credit-card-authorization"),this.$deliveryFee=this.$el.find("#f-deliveryFee"),this.$deliveryFeeName=this.$el.find("#f-deliveryFeeName"),this.$additionalFee=this.$el.find("#f-additionalFee"),this.$additionalFeeName=this.$el.find("#f-additionalFeeName"),this.$wireFee=this.$el.find("#f-wireFee"),this.$wireFeeName=this.$el.find("#f-wireFeeName"),this.$oneDeliveryFeeActive=this.$el.find("#f-oneDeliveryFeeActive"),this.$overrideAllCustomActive=this.$el.find("#f-overrideAllCustomActive"),this.$inStorePickupFeeActive=this.$el.find("#f-inStorePickupFeeActive"),this.$inStorePickupFee=this.$el.find("#f-inStorePickupFee"),this.$inStorePickupFeeName=this.$el.find("#f-inStorePickupFeeName"),this.$securityCodeActive=this.$el.find("#security-code-active"),this.$houseAccountsActive=this.$el.find("#house-accounts-active"),this.$phoneInPaymentActive=this.$el.find("#phone-in-payment-active"),this.$payInStoreActive=this.$el.find("#pay-in-store-active"),this.$giftCardsActive=this.$el.find("#gift-cards-active"),this.$carteBlanche=this.$el.find("#carte-blanche-active"),this.$JCBActive=this.$el.find("#jcb-active"),this.$emailMarketingOptInStatus=this.$el.find("#email-marketing-active"),this.$layoutThemeContainer=this.$el.find("#layout-theme-container"),this.$displayImage=this.$el.find("#display-image"),this.$backButton=this.$el.find("#back-btn"),this.$seasonalToggle=this.$el.find("#seasonal-toggle"),this.$logoImg=this.$el.find("#logo-img"),this.$seasonalToggleActive=this.$el.find("#f-automatic-seasonal-rotation-active"),this.$homepageLayoutContainer=this.$el.find("#homepage-layout-container"),this.$featuredItemCount=this.$el.find("#f-featured-item-count"),this.$homepageFooterText=this.$el.find("#f-homepage-footer-text"),this.$maxCountDisplay=this.$el.find("#max-count-display"),this.$suggestedCountDisplay=this.$el.find("#suggested-count-display"),this.$modal=$("#configure-modal"),this.$stateProvinceLabel=this.$el.find("#stateProvinceLabel"),this.$zipPostalLabel=this.$el.find("#zipPostalLabel"),this.$tip=this.$el.find(".tooltip-change"),this.$alertPanel=this.$el.find(".alert-panel"),this.$LogoDiv=this.$el.find(".Upload-Logo-Div"),this.$defaultFooterActive=this.$el.find("#f-defaultFooter"),this.$headerLayout=this.$el.find("#f-header-layout"),this.$headerIcons=this.$el.find("#f-header-icons"),this.$headerQuickShop=this.$el.find("#f-header-quick-shop"),this.$automaticTaxCalculationsActive=this.$el.find("#f-automatic-tax-calculations-active"),this.$taxRate=this.$el.find("#f-tax-rate"),this.$taxDeliveryFeeActive=this.$el.find("#tax-delivery-fee-active"),this.$taxLocalOnlyActive=this.$el.find("#f-tax-local-only-active"),this.$taxCalculation=this.$el.find("#tax-calculation")},handleTaxToggle:function(){var e=this;this.$taxRate.hasClass("error")&&e.$taxRate.valid(),this.$automaticTaxCalculationsActive.is(":checked")?e.$taxRate.prop("disabled",!0):e.$taxRate.prop("disabled",!1)},handleSave:function(){this.$firstTimeSetupForm.valid()?(i.set({TelefloraID:this.$telefloraId.val().trim(),ShopName:this.$shopName.val().trim(),URL:this.$url.val().trim(),SiteParent:this.$SiteParent.val().trim(),address1:this.$address1.val().trim(),address2:this.$address2.val().trim(),city:this.$city.val().trim(),state:this.$state.find("option:selected").val().trim(),zip:this.$zip.val().trim(),country:this.$country.find("option:selected").val().trim(),localPhone:this.$localPhoneNumber.val().trim(),tollfreeAlternatePhone:this.$alternatePhoneNumber.val().trim(),publicEmailAddress:this.$publicEmail.val().trim(),contactName:this.$contactName.val().trim(),contactPhone:this.$contactPhoneNumber.val().trim(),contactAlternatePhoneNumber:this.$alternatePhoneNumber.val().trim(),contactEmail:this.$contactEmail.val().trim(),contactFaxNumber:this.$contactFaxNumber.val().trim(),posSystem:this.$pointOfSaleSystem.find("option:selected").val().trim(),securityCodeActive:this.$securityCodeActive.is(":checked"),emailMarketingOptInStatus:this.$emailMarketingOptInStatus.is(":checked"),creditCardAuthorization:this.$creditCardAuthorization.find("option:selected").val().trim,houseAccountsActive:this.$houseAccountsActive.is(":checked"),phoneInPaymentActive:this.$phoneInPaymentActive.is(":checked"),payInStoreActive:this.$payInStoreActive.is(":checked"),giftCardsActive:this.$giftCardsActive.is(":checked"),carteBlancheActive:this.$el.find("#carte-blanche-active"),homepageFooterText:this.$homepageFooterText.val().trim(),deliveryFee:this.$deliveryFee.val().trim(),deliveryFeeName:this.$deliveryFeeName.val().trim(),additionalFee:this.$additionalFee.val().trim(),additionalFeeName:this.$additionalFeeName.val().trim(),wireFee:this.$wireFee.val().trim(),wireFeeName:this.$wireFeeName.val().trim(),oneDeliveryFeeActive:this.$oneDeliveryFeeActive.is(":checked"),overrideAllCustomActive:this.$overrideAllCustomActive.is(":checked"),inStorePickupFeeActive:this.$inStorePickupFeeActive.is(":checked"),inStorePickupFee:this.$inStorePickupFee.val().trim(),inStorePickupFeeName:this.$inStorePickupFeeName.val().trim(),featuredItemCount:this.$featuredItemCount.find("option:selected").val(),featuredLayout:this.currentLayoutView.collection.where({active:!0})[0].toJSON(),layoutImgUrl:this.$displayImage.prop("src"),logoImgUrl:this.$logoImg.prop("src"),automaticSeasonalRotationActive:this.$seasonalToggleActive.is(":checked"),selectedThemeName:this.state.name,selectedThemeId:this.state.themeId,automaticTaxCalculationsActive:this.$automaticTaxCalculationsActive.is(":checked"),taxRate:this.$taxRate.val().trim(),taxDeliveryFeeActive:this.$taxDeliveryFeeActive.is(":checked"),taxLocalOnlyActive:this.$taxLocalOnlyActive.is(":checked"),taxCalculation:this.$taxCalculation.find("option:selected").val().trim(),selectedThemeSchemeId:this.state.themeSchemeId,shopLogo:this.$shopLogo,jcbActive:this.$JCBActive.is(":checked"),defaultFooter:this.$defaultFooterActive.is(":checked"),headerLayout:this.$headerLayout.find("option:selected").val().trim(),headerIcons:this.$headerIcons.is(":checked"),headerQuickShop:this.$headerQuickShop.is(":checked")}),a.set(this.daysCollection.toJSON()),f.trigger("form:save",this.$tip)):f.trigger("form:invalid",this.$tip)},_provinceOptions:null,_stateOptions:null,handleCountryChange:function(){var e=this.$country.find("option:selected").val();"United States"===e?(this.$stateProvinceLabel.text("State"),this.$zipPostalLabel.text("Zip Code"),this._provinceOptions=this.$state.find("option.province").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._stateOptions&&(this.$state.append(this._stateOptions),this._stateOptions=null),this.$state.find("option.state").prop("hidden",!1),this.$zip.addClass("zipUS"),this.$zip.removeClass("zipCA"),this.$zip.val("").blur()):(this.$stateProvinceLabel.text("Province"),this.$zipPostalLabel.text("Postal Code"),this._stateOptions=this.$state.find("option.state").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._provinceOptions&&(this.$state.append(this._provinceOptions),this._provinceOptions=null),this.$state.find("option.province").prop("hidden",!1),this.$zip.addClass("zipCA"),this.$zip.removeClass("zipUS"),this.$zip.val("").blur())
},setModal:function(){var e=this;this.$el.find("#configure-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100},close:function(){e.refreshParent()}})},addMasks:function(){var e=this;setTimeout(function(){e.$localPhoneNumber.mask("(999) 999-9999"),e.$alternatePhoneNumber.mask("(999) 999-9999"),e.$contactPhoneNumber.mask("(999) 999-9999"),e.$contactAlternatePhoneNumber.mask("(999) 999-9999"),e.$contactFaxNumber.mask("(999) 999-9999")},100)},refreshParent:function(){var e=this,t=i.get("SiteParent");e.$SiteParent.val(t)},showCreditCardModal:function(){this.$modal.empty(),this.$modal.append(u.render().el),this.$modal.dialog("open")},showPaypalModal:function(){this.$modal.empty(),this.$modal.append(h.render().el),this.$modal.dialog("open")},showEditModal:function(){this.$modal.empty(),this.$modal.append(p.render().el),this.$modal.dialog("open")},addDay:function(e){var t=new o({model:e});this.$daysList.append(t.render().el)},addAllDays:function(){this.$daysList.empty(),this.daysCollection.each(this.addDay,this)},handleShopLogoUpload:function(e){{var t=this,n=new FileReader,i=e.target.files[0],o=i.name;$("#preview-img").remove()}n.onload=function(e){var n=e.target.result;t.$LogoDiv.append('<img id="preview-img" style="max-height:60%; padding: 10px; max-width:60%;" src="'+n+'">'),t.$shopLogo=n},t.hasValidImageExtension(o)?(t.hideAlertPanel(),n.readAsDataURL(e.target.files[0])):t.showAlertPanel()},hasValidImageExtension:function(e){return new RegExp("(\\.gif|\\.jpg|\\.jpeg|\\.bmp|\\.png)$","i").test(e)},showAlertPanel:function(){this.$alertPanel.show()},hideAlertPanel:function(){this.$alertPanel.hide()},state:{themeId:"",themeSchemeId:""},updateState:function(e){this.state=e},addLayoutTheme:function(e){var t=new l({model:e,parent:this});this.$layoutThemeContainer.append(t.render().el)},addAllLayoutThemes:function(){this.$layoutThemeContainer.empty(),s.each(this.addLayoutTheme,this)},showColorSchemes:function(){this.$layoutThemeContainer.find(".site-theme-layout-theme").hide(),this.$backButton.fadeIn(200)},hideColorSchemes:function(){this.$backButton.fadeOut(200),this.$layoutThemeContainer.find(".site-theme-color-schemes").hide(),this.$layoutThemeContainer.find(".site-theme-layout-theme").fadeIn(200)},markActiveColorScheme:function(e){e=e||"#l"+i.get("selectedThemeId")+"s"+i.get("selectedThemeSchemeId");var t=this.$layoutThemeContainer.find(e);this.$layoutThemeContainer.find(".active").removeClass("active"),t.addClass("active"),t.parent().siblings(".site-theme-layout-theme").addClass("active"),this.$displayImage.attr("src",t.children("img").attr("src")),this.$layoutThemeContainer.find(".seasonal-layout").hasClass("active")?this.$seasonalToggle.find(".on-off-switch").prop("checked",!1):this.$seasonalToggle.fadeOut(200)},showSeasonalToggle:function(){this.$seasonalToggle.fadeIn(200),this.handleSeasonalToggle()},hideSeasonalToggle:function(){this.$seasonalToggle.fadeOut(200)},handleSeasonalToggle:function(){this.$seasonalToggleActive.is(":checked")&&(this.$layoutThemeContainer.find(".active").removeClass("active"),this.$layoutThemeContainer.find(".seasonal-layout").addClass("active"))},updateFeaturedItemSelect:function(e){this.$featuredItemCount.empty();for(var t,n=document.createDocumentFragment(),i=0;e>i;++i)t=document.createElement("option"),t.value=i+1,t.text=i+1,n.appendChild(t);this.$featuredItemCount.append(n),this.$featuredItemCount.val(e)},updateFeaturedCounts:function(e){this.activeLayout=e;var t=e.get("maxNumber");this.updateFeaturedItemSelect(t),this.$maxCountDisplay.text(t),this.$suggestedCountDisplay.text(e.get("suggestedNumber"))},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyTabs:function(){this.$el.find("#tabs").tabs()},validateForms:function(){var e=this;jQuery.validator.addMethod("domainCheck",function(e){return/^www/i.test(e)},"Invalid format, do not include http"),jQuery.validator.addMethod("checkFees",function(){var t=e.$deliveryFee.val(),n=parseInt(t);return 0>=n},"Required"),jQuery.validator.addMethod("checkAdditionalFees",function(){var t=e.$additionalFee.val(),n=parseInt(t);return 0>=n},"Required"),jQuery.validator.addMethod("checkWireFees",function(){var t=e.$wireFee.val(),n=parseInt(t);return 0>=n},"Required"),jQuery.validator.addMethod("checkInStorePickupFees",function(){var t=e.$inStorePickupFee.val(),n=parseInt(t);return 0>=n},"Required"),this.validator=this.$firstTimeSetupForm.validate({rules:{"teleflora-id":{required:!0,maxlength:8},"shop-name":"required","address-1":"required",city:"required","f-shop-info-url":{domainCheck:!0,required:!0},state:{required:function(){return!e.$state.find("option:selected").val().trim()}},"f-tax-rate":{required:function(){return!e.$automaticTaxCalculationsActive.is(":checked")}},"f-deliveryFeeName":{checkFees:!0},"f-additionalFeeName":{checkAdditionalFees:!0},"f-wireFeeName":{checkWireFees:!0},"f-inStorePickupFeeName":{checkInStorePickupFees:!0},zip:{required:!0},"local-phone-number":{phoneUS:!0,required:!0},"alternate-phone-number":{phoneUS:!0},"public-email":"required","contact-name":"required","currency-symbol":"required","currency-label":"required","contact-phone-number":{phoneUS:!0,required:!0},"contact-alternate-phone-number":{phoneUS:!0},"contact-fax-number":{phoneUS:!0},"contact-email":"required"}})}});return new v}),define("content/category-sections/more/checkout-config/models/checkout-config-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-checkout-configuration.json",defaults:{reqDelZip:!0,reqDelPhone:!0,upgrades:!0,useAVS:!0,subPolicy:"Hidden",delInfoText:"",reminderDisplay:!0,reminderDefault:"Checked",displayTC:!0,TCtext:"",emailDefault:"Checked",emailMessage:"",confHeadline:""}});return new t}),define("content/category-sections/more/checkout-config/templates/checkout-config-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Checkout Configuration</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to control checkout settings.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced panel form-section">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Shopping Cart Settings</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<div class="label">Display Upgrades <i class="icon icon-tool-tip x-space-s" title="This will allow users to upgrade products directly from the Basket page."></i></div>\r\n				<input '+(null==(__t=upgrades?"checked":"")?"":__t)+' type="checkbox" id="f-upgrades" name="f-upgrades" class="switch on-off-switch">\r\n				<label for="f-upgrades" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n			</div>\r\n		</div>\r\n\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Delivery Page Settings</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<div class="label">Require Zip For Delivery Address <i class="icon icon-tool-tip x-space-s" title="Leave this turned on to prompt the customer to enter their zip code."></i></div>\r\n				<input '+(null==(__t=reqDelZip?"checked":"")?"":__t)+' type="checkbox" id="f-reqDelZip" name="f-reqDelZip" class="switch on-off-switch">\r\n				<label for="f-reqDelZip" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n			</div>\r\n\r\n			<div class="col-6">\r\n				<div class="label">Require Phone Number For Delivery Address <i class="icon icon-tool-tip x-space-s" title="Leave this turned on to prompt the customer to enter a phone number for the delivery address."></i></div>\r\n				<input '+(null==(__t=reqDelPhone?"checked":"")?"":__t)+' type="checkbox" id="f-reqDelPhone" name="f-reqDelPhone" class="switch on-off-switch">\r\n				<label for="f-reqDelPhone" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<div class="label">Address Verification (QAS) <i class="icon icon-tool-tip x-space-s" title="This should be turned on if the shop is using our credit processing."></i></div>\r\n				<input '+(null==(__t=useAVS?"checked":"")?"":__t)+' type="checkbox" id="f-useAVS" name="f-useAVS" class="switch on-off-switch">\r\n				<label for="f-useAVS" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n			</div>\r\n\r\n			<div class="select-container col-6">\r\n				<label for="f-subPolicy">Substitution Policy Option</label> <i title="This setting controls the display of the option for your customers to opt in or out of bouquet substitution. Hidden does not give the customer an option or display this feature. Optional leaves the checkbox there so the customer can opt in or out. Force automatically forces the customer to accept any substitutions." class="icon icon-tool-tip x-space-s"></i>\r\n				<select id="f-subPolicy" name="subPolicy">\r\n					<option selected disabled hidden value="'+(null==(__t=subPolicy)?"":__t)+'">'+(null==(__t=subPolicy)?"":__t)+'</option>\r\n					<option value="Hidden">Hidden</option>\r\n					<option value="Optional">Optional</option>\r\n					<option value="Force">Force</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<label for="f-delInfoText">Delivery Information Text</label> <i class="icon icon-tool-tip x-space-s" title="Information that needs to be relayed to online customers? Put all of that information here."></i>\r\n				<textarea name="f-delInfoText" id="f-delInfoText" class="size-2">'+(null==(__t=delInfoText)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6">\r\n				<div class="label">Display Reminder Checkbox <i class="icon icon-tool-tip x-space-s" title="Leave this turned on to give online customers the option to have yearly reminders emailed to them."></i></div>\r\n				<input '+(null==(__t=reminderDisplay?"checked":"")?"":__t)+' type="checkbox" id="f-reminderDisplay" name="f-reminderDisplay" class="switch on-off-switch">\r\n				<label for="f-reminderDisplay" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n			</div>\r\n\r\n			<div class="select-container col-6">\r\n				<label for="f-reminderDefault">Reminder Checkbox Default</label> <i class="icon icon-tool-tip x-space-s" title="Select whether the reminder checkbox should be automatically checked or unchecked."></i>\r\n				<select id="f-reminderDefault" name="f-reminderDefault">\r\n					<option selected disabled hidden value="'+(null==(__t=reminderDefault)?"":__t)+'">'+(null==(__t=reminderDefault)?"":__t)+'</option>\r\n					<option value="Checked">Checked</option>\r\n					<option value="Unchecked">Unchecked</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="col-12">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Payment Page Settings</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="label">Terms & Conditions Message <i class="icon icon-tool-tip x-space-s" title="Leave this turned on for customers to see the terms & conditions."></i></div>\r\n			<input '+(null==(__t=displayTC?"checked":"")?"":__t)+' type="checkbox" id="f-displayTC" name="f-displayTC" class="switch on-off-switch">\r\n			<label for="f-displayTC" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<label for="f-TCtext">Terms & Conditions Text</label> <i class="icon icon-tool-tip x-space-s" title="Use this field to replace the default Terms & Conditions."></i>\r\n			<textarea name="f-TCtext" id="f-TCtext" class="size-2">'+(null==(__t=TCtext)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="select-container col-6">\r\n			<label for="f-emailDefault">Email Signup Checkbox Default</label> <i class="icon icon-tool-tip x-space-s" title="Select whether the email signup checkbox should be automatically checked or unchecked."></i>\r\n			<select id="f-emailDefault" name="emailDefault">\r\n				<option selected disabled hidden value="'+(null==(__t=emailDefault)?"":__t)+'">'+(null==(__t=emailDefault)?"":__t)+'</option>\r\n				<option value="Checked">Checked</option>\r\n				<option value="Unchecked">Unchecked</option>\r\n			</select>\r\n		</div>\r\n\r\n		<div class="col-6">\r\n			<label for="f-emailMessage">Email Signup Message</label> <i class="icon icon-tool-tip x-space-s" title="Use this to let the online customers know that signing up for email campaigns will get them special deals."></i>\r\n			<input type="text" name="f-emailMessage" id="f-emailMessage" value="'+(null==(__t=emailMessage)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Confirmation Page Settings</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<label for="f-confHeadline">Confirmation Headline Text</label> <i class="icon icon-tool-tip x-space-s" title="Any additional information that should be shown on the confirmation page should go here."></i>\r\n				<textarea name="f-confHeadline" id="f-confHeadline" class="size-2">'+(null==(__t=confHeadline)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div id="featured-occasion-container"></div>';return __p}}),define("content/category-sections/more/checkout-config/views/checkout-config-home-view",["backbone","../models/checkout-config-model","components/featured-occasions/views/featured-occasion-view","../templates/checkout-config-home-tpl","global-events","jqueryui"],function(e,t,n,i,o){var r=e.View.extend({tagName:"form",id:"p-footer-management",template:i,render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.delegateEvents(),e.cacheElem(),n.options={noText:!0,title:"What's Next Featured Occasion"},e.$featuredOccasionContainer.append(n.render().el),e.applyToolTips()}),e},cacheElem:function(){this.$featuredOccasionContainer=this.$el.find("#featured-occasion-container"),this.$reqDelZip=this.$el.find("#f-reqDelZip"),this.$reqDelPhone=this.$el.find("#f-reqDelPhone"),this.$useAVS=this.$el.find("#f-useAVS"),this.$subPolicy=this.$el.find("#f-subPolicy"),this.$delInfoText=this.$el.find("#f-delInfoText"),this.$reminderDisplay=this.$el.find("#f-reminderDisplay"),this.$reminderDefault=this.$el.find("#f-reminderDefault"),this.$displayTC=this.$el.find("#f-displayTC"),this.$TCtext=this.$el.find("#f-TCtext"),this.$emailDefault=this.$el.find("#f-emailDefault"),this.$emailMessage=this.$el.find("#f-emailMessage"),this.$confHeadline=this.$el.find("#f-confHeadline"),this.$tip=this.$el.find(".tooltip-change")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},events:{"click #save-btn":"handleSave"},handleSave:function(){t.set({reqDelZip:this.$reqDelZip.is(":checked"),reqDelPhone:this.$reqDelPhone.is(":checked"),useAVS:this.$useAVS.is(":checked"),subPolicy:this.$subPolicy.find("option:selected").val(),delInfoText:this.$delInfoText.val().trim(),reminderDisplay:this.$reminderDisplay.is(":checked"),reminderDefault:this.$reminderDefault.find("option:selected").val(),displayTC:this.$displayTC.is(":checked"),TCtext:this.$TCtext.val().trim(),emailDefault:this.$emailDefault.find("option:selected").val(),emailMessage:this.$emailMessage.val().trim(),confHeadline:this.$confHeadline.val().trim()}),o.trigger("form:save",this.$tip)}});return new r}),define("content/category-sections/more/checkout-config/views/checkout-config-view",["backbone","./checkout-config-home-view","components/featured-occasions/views/featured-occasion-view","components/featured-occasions/views/create-edit-occasion-view","components/featured-occasions/collections/occasion-collection","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",initialize:function(){t.parent=this,this.occasionCollection=new o},regions:{visible:null},render:function(){return n.options={title:"What's Next Featured Occasion"},n.parent=this,i.parent=this,i.options={noText:!0},this.replaceVisible(t.render()),this},replaceVisible:function(e){e&&this.regions.visible!==e&&(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;r.trigger("form:cancel",function(){i.model=e,i.options={noText:!0},t.replaceVisible(i)})}});return new a}),define("text!content/category-sections/more/delivery-days-times/templates/days-page-tpl.html",[],function(){return'<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Delivery Days & Times</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to set up which days the shop is open and closed, as well as the cut-off time for a delivery. For example, if a shop closes at 5 p.m., they probably couldn\'t get an order built and delivered if it was placed at 4:30. We recommend setting the cutoff time for deliveries at least 2 hours before you close for the day.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Available Delivery Days</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate form-section" id="m-delivery-days-table">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-4">Day</th>\r\n						<th class="col-2">Availability</th>\r\n						<th class="col-4">Cutoff Time</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="m-delivery-days-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>'}),define("content/category-sections/more/delivery-days-times/models/days-model",["backbone"],function(e){var t=e.Model.extend({defaults:{name:"",active:!0,cutofftime:"5:00",cutoffampm:"PM"}});return t}),define("content/category-sections/more/delivery-days-times/collections/days-collection",["backbone","../models/days-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-delivery-days-times.json",model:t,comparator:function(e,t){return e.get("id")<t.get("id")?-1:1}});return new n}),define("content/category-sections/more/delivery-days-times/templates/days-list-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'" class="data-row">\r\n	<td>'+(null==(__t=name)?"":__t)+'</td>\r\n	<td>\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-day-status-'+(null==(__t=id)?"":__t)+'" name="f-day-status-'+(null==(__t=id)?"":__t)+'" class="switch on-off-switch">\r\n			<label for="f-day-status-'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label"><div class="on-off-switch-state"></div>on</label>\r\n		</div>\r\n	</td>\r\n	<td>\r\n		<div class="col-6">\r\n			<div class="select-container">\r\n				<select class="f-time-1" name="f-day-time-'+(null==(__t=id)?"":__t)+'" id="f-day-time-'+(null==(__t=id)?"":__t)+'">\r\n					<option value="1:00" '+(null==(__t="1:00"==cutofftime?"selected":"")?"":__t)+'>1:00</option>\r\n					<option value="1:30" '+(null==(__t="1:30"==cutofftime?"selected":"")?"":__t)+'>1:30</option>\r\n					<option value="2:00" '+(null==(__t="2:00"==cutofftime?"selected":"")?"":__t)+'>2:00</option>\r\n					<option value="2:30" '+(null==(__t="2:30"==cutofftime?"selected":"")?"":__t)+'>2:30</option>\r\n					<option value="3:00" '+(null==(__t="3:00"==cutofftime?"selected":"")?"":__t)+'>3:00</option>\r\n					<option value="3:30" '+(null==(__t="3:30"==cutofftime?"selected":"")?"":__t)+'>3:30</option>\r\n					<option value="4:00" '+(null==(__t="4:00"==cutofftime?"selected":"")?"":__t)+'>4:00</option>\r\n					<option value="4:30" '+(null==(__t="4:30"==cutofftime?"selected":"")?"":__t)+'>4:30</option>\r\n					<option value="5:00" '+(null==(__t="5:00"==cutofftime?"selected":"")?"":__t)+'>5:00</option>\r\n					<option value="5:30" '+(null==(__t="5:30"==cutofftime?"selected":"")?"":__t)+'>5:30</option>\r\n					<option value="6:00" '+(null==(__t="6:00"==cutofftime?"selected":"")?"":__t)+'>6:00</option>\r\n					<option value="6:30" '+(null==(__t="6:30"==cutofftime?"selected":"")?"":__t)+'>6:30</option>\r\n					<option value="7:00" '+(null==(__t="7:00"==cutofftime?"selected":"")?"":__t)+'>7:00</option>\r\n					<option value="7:30" '+(null==(__t="7:30"==cutofftime?"selected":"")?"":__t)+'>7:30</option>\r\n					<option value="8:00" '+(null==(__t="8:00"==cutofftime?"selected":"")?"":__t)+'>8:00</option>\r\n					<option value="8:30" '+(null==(__t="8:30"==cutofftime?"selected":"")?"":__t)+'>8:30</option>\r\n					<option value="9:00" '+(null==(__t="9:00"==cutofftime?"selected":"")?"":__t)+'>9:00</option>\r\n					<option value="9:30" '+(null==(__t="9:30"==cutofftime?"selected":"")?"":__t)+'>9:30</option>\r\n					<option value="10:00" '+(null==(__t="10:00"==cutofftime?"selected":"")?"":__t)+'>10:00</option>\r\n					<option value="10:30" '+(null==(__t="10:30"==cutofftime?"selected":"")?"":__t)+'>10:30</option>\r\n					<option value="11:00" '+(null==(__t="11:00"==cutofftime?"selected":"")?"":__t)+'>11:00</option>\r\n					<option value="11:30" '+(null==(__t="11:30"==cutofftime?"selected":"")?"":__t)+'>11:30</option>\r\n					<option value="12:00" '+(null==(__t="12:00"==cutofftime?"selected":"")?"":__t)+'>12:00</option>\r\n					<option value="12:30" '+(null==(__t="12:30"==cutofftime?"selected":"")?"":__t)+'>12:30</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="col-6">\r\n			<div class="select-container">\r\n				<select class="f-time-2" id="f-day-ampm-'+(null==(__t=id)?"":__t)+'" name="f-day-ampm-'+(null==(__t=id)?"":__t)+'" class="m-deliverydaystimes-timeright">\r\n					<option value="PM" '+(null==(__t="PM"===cutoffampm?"selected":"")?"":__t)+'>PM</option>\r\n					<option value="AM" '+(null==(__t="AM"===cutoffampm?"selected":"")?"":__t)+">AM</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>";return __p}}),define("content/category-sections/more/delivery-days-times/views/list-view",["jquery","underscore","backbone","../templates/days-list-tpl"],function(e,t,n,i){var o=n.View.extend({template:i,render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this},cacheElem:function(){this.$active=this.$el.find(".on-off-switch"),this.$cutofftime=this.$el.find(".f-time-1"),this.$cutoffampm=this.$el.find(".f-time-2")},events:{"change .on-off-switch":"handleSwitch","change .f-time-1":"handleChangeTime1","change .f-time-2":"handleChangeTime2"},handleSwitch:function(){this.model.set("active",this.$active.is(":checked"))},handleChangeTime1:function(){this.model.set("cutofftime",this.$cutofftime.find("option:selected").val())},handleChangeTime2:function(){this.model.set("cutoffampm",this.$cutoffampm.find("option:selected").val())}});return o}),define("content/category-sections/more/delivery-days-times/views/delivery-days-times-view",["jquery","backbone","text!../templates/days-page-tpl.html","../collections/days-collection","./list-view","global-events","jqueryui"],function(e,t,n,i,o,r){var a=t.View.extend({tagName:"form",id:"p-delivery-days-times",template:n,render:function(){var e=this;return e.$el.html(e.template),e.cacheElem(),i.fetchCustom().done(function(){e.daysCollection=i.deepClone(),e.addAllDays(),e.delegateEvents(),e.applyToolTips()}),e},cacheElem:function(){this.$daysList=this.$el.find("#m-delivery-days-list"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #save-btn":"handleSave"},addDay:function(e){var t=new o({model:e});this.$daysList.append(t.render().el)},addAllDays:function(){this.$daysList.empty(),this.daysCollection.each(this.addDay,this)},handleSave:function(){i.set(this.daysCollection.toJSON()),r.trigger("form:save",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new a}),define("content/category-sections/more/drop-shipping-setup/templates/drop-shipping-setup-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title">\r\n			<h2 class="pull-left">Drop Ship Setup</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Are there items that you sell on your website that are not only delivered, but you also mail them out as well? Use this page to set up your website to be able to sell those items online.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<button type="button" class="btn btn-submit pull-right" id="add-btn"><i class="icon icon-add icon-lg"></i> New Drop-Ship Method</button>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<table class="table alternate">\r\n			<thead>\r\n				<tr>\r\n					<th class="col-2 left-align indented-s">Method</th>\r\n					<th class="col-1">Rate</th>\r\n					<th class="col-4 left-align">Checkout Text</th>\r\n					<th class="col-1">Edit</th>\r\n					<th class="col-2">Active</th>\r\n					<th class="col-1">Delete</th>\r\n				</tr>\r\n			</thead>\r\n			<tbody id="drop-ship-list"></tbody>\r\n		</table>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<div class="col-12">\r\n		<label for="f-dropShipMessage">Active Drop Ship Message (Appears below shipping options during checkout)</label><i class="icon icon-tool-tip x-space-s" title="This message appears below the shipping options during the checkout process."></i>\r\n		<textarea name="f-dropShipMessage" id="f-dropShipMessage">'+(null==(__t=dropShipMessage)?"":__t)+"</textarea>\r\n	</div>\r\n</div>";return __p}}),define("content/category-sections/more/drop-shipping-setup/models/drop-shipping-setup-model",["backbone"],function(e){var t=e.Model.extend({url:"mock/user-drop-ship-settings.json",defaults:{dropShipMessage:""}});return new t}),define("content/category-sections/more/drop-shipping-setup/templates/drop-ship-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-s">'+(null==(__t=serviceType)?"":__t)+"</td>\r\n	<td>"+(null==(__t=standardDeliveryFee)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=checkoutText)?"":__t)+'</td>\r\n	<td><button type="button" class="icon icon-btn icon-2x icon-edit"></button></td>\r\n	<td class="hide-overflow">\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" class="on-off-switch" id="'+(null==(__t=serviceType)?"":__t)+'" name="'+(null==(__t=serviceType)?"":__t)+'"/>\r\n	        <label for="'+(null==(__t=serviceType)?"":__t)+'" class="on-off-switch-label">\r\n	            <div class="on-off-switch-state">on</div>\r\n	        </label>\r\n        </div>\r\n	</td>\r\n	<td><button type="button" class="icon icon-btn icon-2x icon-trash"></button> </td>\r\n</tr>\r\n';return __p}}),define("content/category-sections/more/drop-shipping-setup/views/drop-ship-view",["backbone","../templates/drop-ship-tpl","../collections/drop-ship-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent},render:function(){var e=this;return e.setElement(e.template(e.model.toJSON())),e.cacheElem(),e.listenTo(n,"remove",function(t){t===e.model&&e.$el.fadeOut(200,function(){e.remove()})}),e},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","change .on-off-switch":"handleChange"},cacheElem:function(){this.$active=this.$el.find(".on-off-switch")},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)},handleSwitch:function(){this.model.set({active:this.$active.is(":checked")})}});return o}),define("content/category-sections/more/drop-shipping-setup/views/drop-shipping-setup-home-view",["backbone","../templates/drop-shipping-setup-home-tpl","../models/drop-shipping-setup-model","../models/drop-ship-model","../collections/drop-ship-collection","./drop-ship-view","global-events","jqueryui"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"p-drop-shipping-setup",template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.cacheElem(),o.fetchCustom().done(function(){e.addAllDropShips(),e.delegateEvents()}),e.applyToolTips()}),e},cacheElem:function(){this.$buttonLink=this.$el.find("#button-link"),this.$dropShipList=this.$el.find("#drop-ship-list"),this.$dropShipMessage=this.$el.find("#f-dropShipMessage"),this.$tip=this.$el.find(".tooltip-change")},addDropShip:function(e){var t=new r({model:e,parent:this});this.$dropShipList.append(t.render().el)
},addAllDropShips:function(){this.$dropShipList.empty(),o.each(this.addDropShip,this)},events:{"click #add-btn":"handleNewBtn","click #save-btn":"handleSave"},handleNewBtn:function(){this.handleEdit(new i)},handleEdit:function(e){this.parent.showCreateEdit(e)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleSave:function(){n.set({dropShipMessage:this.$dropShipMessage.val().trim()}),a.trigger("form:save",this.$tip)}});return new s}),define("content/category-sections/more/drop-shipping-setup/templates/create-edit-drop-ship-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="p-create-edit-drop-ship">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'Drop Ship Method</h2>\r\n				<div class="btn-panel">\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n					<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button id="save-btn" class="btn btn-submit pull-right">\r\n						',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n					</button>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">You can configure your shipping method from this page. You can specify price, where it can be delivered, and how long it will take for delivery.</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n	<form id="create-edit-form" class="row row-spaced panel form-section">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">'+(null==(__t=id?"Edit ":"Create ")?"":__t)+'Drop Ship Method</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-4 form-section">\r\n				<label for="f-service-type">Drop Ship Service Type</label>\r\n        <div class="select-container">\r\n            <select id="f-service-type" name="f-service-type">\r\n                <option selected disabled hidden value="'+(null==(__t=serviceType)?"":__t)+'">'+(null==(__t=serviceType)?"":__t)+'</option>\r\n                <option value="Ground">Ground</option>\r\n                <option value="2 Day">2 Day</option>\r\n                <option value="Overnight">Overnight</option>\r\n                <option value="Saturday">Saturday</option>\r\n                <option value="Future Date">Future Date</option>\r\n            </select>\r\n        </div>\r\n			</div>\r\n\r\n			<div class="col-4 form-section">\r\n				<label for="f-min-days-delivery">Min Days For Delivery</label><i title="List here how many days it will take for the item to arrive with this shipping method." class="icon icon-tool-tip x-space-s"></i>\r\n				<input type="text" id="f-min-days-delivery" name="f-min-days-delivery" value="'+(null==(__t=minDaysDelivery)?"":__t)+'">\r\n			</div>\r\n\r\n			<div class="col-4 form-section">\r\n				<label for="f-standard-delivery-fee">Standard Delivery Fee</label><i title="What is the delivery fee for this type of shipping?" class="icon icon-tool-tip x-space-s"></i>\r\n				<div class="dollar-container">\r\n				<input type="text" id="f-standard-delivery-fee" name="f-standard-delivery-fee" value="'+(null==(__t=standardDeliveryFee)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-3">\r\n				<div class="label">Delivery to Alaska</div>\r\n				<input '+(null==(__t=alaskaDeliveryActive?"checked":"")?"":__t)+' type="checkbox" id="f-alaska-delivery-active" name="f-alaska-delivery-active" class="on-off-switch" />\r\n		        <label for="f-alaska-delivery-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n\r\n			<div class="col-3">\r\n				<div class="label">Delivery to Hawaii</div>\r\n				<input '+(null==(__t=hawaiiDeliveryActive?"checked":"")?"":__t)+' type="checkbox" id="f-hawaii-delivery-active" name="f-hawaii-delivery-active" class="on-off-switch" />\r\n		        <label for="f-hawaii-delivery-active" class="on-off-switch-label">\r\n		            <div class="on-off-switch-state">on</div>\r\n		        </label>\r\n			</div>\r\n\r\n			<div class="col-6 form-section">\r\n				<label for="f-checkout-text">Checkout Text</label><i title="This is the name of the shipping method and will be shown to your customer when checking out." class="icon icon-tool-tip x-space-s"></i>\r\n				<input type="text" id="f-checkout-text" name="f-checkout-text" value="'+(null==(__t=checkoutText)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<label for="f-comments">Comments</label><i title="Is there any other information you need to convey to your customers? Place that information here." class="icon icon-tool-tip x-space-s"></i>\r\n				<textarea id="f-comments" name="f-comments">'+(null==(__t=comments)?"":__t)+'</textarea>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- <div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Delivery Days</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<table class="table-list alternate form-section" id="m-delivery-days-table">\r\n					<thead>\r\n						<tr>\r\n							<th class="col-4">Day</th>\r\n							<th class="col-2">Availability</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="m-delivery-days-list"></tbody>\r\n				</table>\r\n			</div>\r\n		</div> -->\r\n	</form>\r\n</div>';return __p}}),define("content/category-sections/more/drop-shipping-setup/views/create-edit-drop-ship-view",["backbone","../collections/drop-ship-collection","../templates/create-edit-drop-ship-tpl","../../delivery-days-times/collections/days-collection","../../delivery-days-times/views/list-view","global-events","jquery","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({template:n,initialize:function(){},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this.addAllDays(),this.applyToolTips(),this.validateForm(),this},cacheElem:function(){this.$serviceType=this.$el.find("#f-service-type"),this.$minDaysDelivery=this.$el.find("#f-min-days-delivery"),this.$standardDeliveryFee=this.$el.find("#f-standard-delivery-fee"),this.$alaskaDeliveryActive=this.$el.find("#f-alaska-delivery-active"),this.$hawaiiDeliveryActive=this.$el.find("#f-hawaii-delivery-active"),this.$checkoutText=this.$el.find("#f-checkout-text"),this.$comments=this.$el.find("#f-comments"),this.$daysList=this.$el.find("#m-delivery-days-list"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #cancel-btn":"handleCancelClick","click #save-btn":"handleSaveClick"},handleCancelClick:function(){r.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleSaveClick:function(){var e,n;this.$createEditForm.valid()?(e=Number(this.$standardDeliveryFee.val().trim().replace(/[^0-9\.]+/g,""))+"",n=e.match(/\.\d{2}/),n&&0!==Number(n[0])||(e+=".00"),this.model.set({serviceType:this.$serviceType.find("option:selected").val().trim(),minDaysDelivery:this.$minDaysDelivery.val().trim(),standardDeliveryFee:"$"+e,alaskaDeliveryActive:this.$alaskaDeliveryActive.is(":checked"),hawaiiDeliveryActive:this.$hawaiiDeliveryActive.is(":checked"),checkoutText:this.$checkoutText.val().trim(),comments:this.$comments.val().trim()}),t.get(this.model)||(this.model.set("id",(new Date).getTime()),t.add(this.model)),this.parent.showHome(),r.trigger("form:save",this.$tip)):r.trigger("form:invalid",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},addDay:function(e){var t=new o({model:e});this.$daysList.append(t.render().el)},addAllDays:function(){this.$daysList.empty(),i.each(this.addDay,this)},validateForm:function(){this.$createEditForm.validate({rules:{"f-standard-delivery-fee":{required:!0,dollars:!0},"f-service-type":{required:function(e){return""===$(e).find("option:selected").val()}},"f-checkout-text":"required","f-min-days-delivery":{required:!0,min:0}}})}});return new a}),define("content/category-sections/more/drop-shipping-setup/views/drop-shipping-setup-view",["backbone","./drop-shipping-setup-home-view","./create-edit-drop-ship-view","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this,n.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){e&&this.regions.visible!==e&&(this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),this.regions.visible=e),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e){var t=this;i.trigger("form:cancel",function(){n.model=e,t.replaceVisible(n)})}});return new o}),define("content/category-sections/more/manage-delivery-fees/templates/manage-delivery-fees-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="p-manage-delivery-fees-home" name="p-manage-delivery-fees-home">\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title">\r\n			<h2 class="pull-left">Manage Delivery Fees</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to manage your delivery fees, and to set up delivery fees for other areas you also serve.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Standard Delivery Fee</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="row label-row form-section">\r\n				<div class="col-3"><label for="f-deliveryFee">Delivery Fee<i class="icon icon-tool-tip x-space-s" title="This is your default delivery fee. We recommend using the local delivery fee here."></i></label></div>\r\n				<div class="col-1"></div>\r\n				<div class="col-6"><label for="f-deliveryFeeName">Delivery Fee Name<i class="icon icon-tool-tip x-space-s" title="This is what your customers will see when they see this fee."></i></label></div>\r\n			</div>\r\n			<div class="row"></div>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<div class="dollar-container">\r\n			<input type="text" id="f-deliveryFee" name="f-deliveryFee" value="'+(null==(__t=deliveryFee)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="col-1"></div>\r\n		<div class="col-6 form-section">\r\n			<input type="text" id="f-deliveryFeeName" name="f-deliveryFeeName" value="'+(null==(__t=deliveryFeeName)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12 form-section">\r\n			<div class="row label-row">\r\n				<div class="col-3"><label for="f-additionalFee">Additional Fee<i class="icon icon-tool-tip x-space-s" title="Are there any other fees aside from delivery you charge? You can put those here."></i></label></div>\r\n				<div class="col-1"></div>\r\n				<div class="col-6"><label for="f-additionalFeeName">Additional Fee Name<i class="icon icon-tool-tip x-space-s" title="What is this additional fee called?"></i></label></div>\r\n			</div>\r\n			<div class="row"></div>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n		<div class="dollar-container">\r\n			<input type="text" id="f-additionalFee" name="f-additionalFee" value="'+(null==(__t=additionalFee)?"":__t)+'">\r\n		</div>\r\n		</div>\r\n		<div class="col-1"></div>\r\n		<div class="col-6 form-section">\r\n			<input type="text" id="f-additionalFeeName" name="f-additionalFeeName" value="'+(null==(__t=additionalFeeName)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="row label-row">\r\n				<div class="col-3">\r\n					<label for="f-wireFee">Wire Fee<i class="icon icon-tool-tip x-space-s" title="Do you charge a wire out fee? If so, put that here."></i></label>\r\n				</div>\r\n				<div class="col-1"></div>\r\n				<div class="col-6">\r\n					<div class="bottom-aligned">\r\n						<label for="f-wireFeeName">Wire Fee Name<i class="icon icon-tool-tip x-space-s" title="What would you like to call your wire fee?"></i></label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row">\r\n				<div class="col-3 form-section">\r\n				<div class="dollar-container">\r\n					<input type="text" id="f-wireFee" name="f-wireFee" value="'+(null==(__t=wireFee)?"":__t)+'">\r\n				</div>\r\n				</div>\r\n				<div class="col-1"></div>\r\n				<div class="col-6 form-section">\r\n					<input type="text" id="f-wireFeeName" name="f-wireFeeName" value="'+(null==(__t=wireFeeName)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-4"><div class="label">Activate In-Store Pickup Fee<i title="Do you charge a fee for customers to pick up in your store? If so, turn this option on." class="icon icon-tool-tip x-space-s"></i></div>\r\n		<input '+(null==(__t=inStorePickupFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-inStorePickupFeeActive" name="f-inStorePickupFeeActive" class="on-off-switch" />\r\n		<label for="f-inStorePickupFeeActive" class="on-off-switch-label">\r\n			<div class="on-off-switch-state">on</div>\r\n		</label>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div id="in-store-pickup-fee-container" class="col-12 '+(null==(__t=inStorePickupFeeActive?"":"hidden-alt")?"":__t)+'">\r\n			<div class="row label-row">\r\n				<div class="col-3"><label for="f-inStorePickupFee">In-Store Pickup Fee<i class="icon icon-tool-tip x-space-s" title="Do you charge a fee for customers to pick up in your store? If so, put that fee here."></i></label></div>\r\n				<div class="col-1"></div>\r\n				<div class="col-6"><label for="f-inStorePickupFeeName">In-Store Pickup Fee Name<i class="icon icon-tool-tip x-space-s" title="What would you like to call your In-Store Pickup Fee?"></i></label></div>\r\n			</div>\r\n\r\n			<div class="row">\r\n				<div class="col-3">\r\n				<div class="dollar-container">\r\n					<input type="text" id="f-inStorePickupFee" name="f-inStorePickupFee" value="'+(null==(__t=inStorePickupFee)?"":__t)+'">\r\n				</div>\r\n				</div>\r\n				<div class="col-1"></div>\r\n				<div class="col-6 form-section">\r\n					<input type="text" id="f-inStorePickupFeeName" name="f-inStorePickupFeeName" value="'+(null==(__t=inStorePickupFeeName)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="row label-row">\r\n				<div class="col-4"><div class="label">One Delivery Fee to Same Address on Same Order on Same Day<i class="icon icon-tool-tip x-space-s" title="Leave this turned on to charge a single delivery if two orders are delivered to the same address on the same day."></i></div></div>\r\n			</div>\r\n\r\n			<div class="row">\r\n				<div class="col-4">\r\n					<input '+(null==(__t=oneDeliveryFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-oneDeliveryFeeActive" name="f-oneDeliveryFeeActive" class="on-off-switch" />\r\n					<label for="f-oneDeliveryFeeActive" class="on-off-switch-label">\r\n					    <div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Location Based Fees</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use this section to set up custom delivery fees by zip code, city, state, distance or facility name.\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-12">\r\n			<div class="row">\r\n				<div class="col-6"><div class="label">Enable Location Based Fees<i title="Do you want to charge different fees for delivering to a different area than you normally deliver to? If so, set this to on." class="icon icon-tool-tip x-space-s"></i></div></div>\r\n			</div>\r\n			<div class="row">\r\n				<div class="col-6"><input '+(null==(__t=overrideAllCustomActive?"checked":"")?"":__t)+' type="checkbox" id="f-overrideAllCustomActive" name="f-overrideAllCustomActive" class="on-off-switch" />\r\n			<label for="f-overrideAllCustomActive" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label></div>\r\n				<div class="col-6 y-space-s"><button type="button" id="setup-by-destination-btn" class="btn btn-submit pull-right">Continue</button></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Date & Time Based Fees</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use this section to set up seasonal delivery fees to add to your standard delivery fee during different date ranges.\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<button type="button" id="setup-by-date-time-btn" class="btn btn-submit pull-right">Continue</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n</form>';return __p}}),define("content/category-sections/more/manage-delivery-fees/models/manage-delivery-fees-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-delivery-fee-settings.json",defaults:{deliveryFee:"0.00",deliveryFeeName:"",additionalFee:"0.00",additionalFeeName:"",wireFee:"0.00",wireFeeName:"",oneDeliveryFeeActive:!0,overrideAllCustomActive:!1,inStorePickupFeeActive:!0,inStorePickupFee:"0.00",inStorePickupFeeName:""}});return new t}),define("content/category-sections/more/manage-delivery-fees/views/manage-delivery-fees-home-view",["backbone","../templates/manage-delivery-fees-home-tpl","../models/manage-delivery-fees-model","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template(n.toJSON())),e.cacheElem(),e.delegateEvents(),e.applyToolTips(),e.validateForms()}),e},cacheElem:function(){this.$createEditForm=this.$el.find("#p-manage-delivery-fees-home"),this.$pickupFeeContainer=this.$el.find("#in-store-pickup-fee-container"),this.$deliveryFee=this.$el.find("#f-deliveryFee"),this.$deliveryFeeName=this.$el.find("#f-deliveryFeeName"),this.$additionalFee=this.$el.find("#f-additionalFee"),this.$additionalFeeName=this.$el.find("#f-additionalFeeName"),this.$wireFee=this.$el.find("#f-wireFee"),this.$wireFeeName=this.$el.find("#f-wireFeeName"),this.$oneDeliveryFeeActive=this.$el.find("#f-oneDeliveryFeeActive"),this.$overrideAllCustomActive=this.$el.find("#f-overrideAllCustomActive"),this.$inStorePickupFeeActive=this.$el.find("#f-inStorePickupFeeActive"),this.$inStorePickupFee=this.$el.find("#f-inStorePickupFee"),this.$inStorePickupFeeName=this.$el.find("#f-inStorePickupFeeName"),this.$tip=this.$el.find(".tooltip-change")},events:{"click #setup-by-destination-btn":"showSetupByDestination","click #setup-by-date-time-btn":"showSetupByDateTime","click #save-btn":"handleSave","change #f-inStorePickupFeeActive":"togglePickupFeeContainer"},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},showSetupByDestination:function(){this.parent.showSetupByDestination()},showSetupByDateTime:function(){this.parent.showSetupByDateTime()},handleSave:function(){this.$createEditForm.valid()&&(n.set({deliveryFee:this.$deliveryFee.val().trim(),deliveryFeeName:this.$deliveryFeeName.val().trim(),additionalFee:this.$additionalFee.val().trim(),additionalFeeName:this.$additionalFeeName.val().trim(),wireFee:this.$wireFee.val().trim(),wireFeeName:this.$wireFeeName.val().trim(),oneDeliveryFeeActive:this.$oneDeliveryFeeActive.is(":checked"),overrideAllCustomActive:this.$overrideAllCustomActive.is(":checked"),inStorePickupFeeActive:this.$inStorePickupFeeActive.is(":checked"),inStorePickupFee:this.$inStorePickupFee.val().trim(),inStorePickupFeeName:this.$inStorePickupFeeName.val().trim()}),i.trigger("form:save",this.$tip))},togglePickupFeeContainer:function(){this.$inStorePickupFeeActive.is(":checked")?this.$pickupFeeContainer.fadeIn(200):this.$pickupFeeContainer.fadeOut(200)},validateForms:function(){var e=this;jQuery.validator.addMethod("checkFees",function(){var t=e.$deliveryFee.val(),n=parseInt(t);return 0>=n},"Required"),jQuery.validator.addMethod("checkAdditionalFees",function(){var t=e.$additionalFee.val(),n=parseInt(t);return 0>=n},"Required"),jQuery.validator.addMethod("checkWireFees",function(){var t=e.$wireFee.val(),n=parseInt(t);return 0>=n},"Required"),jQuery.validator.addMethod("checkInStorePickupFees",function(){var t=e.$inStorePickupFee.val(),n=parseInt(t);return 0>=n},"Required"),this.validator=this.$createEditForm.validate({rules:{"f-deliveryFeeName":{checkFees:!0},"f-additionalFeeName":{checkAdditionalFees:!0},"f-wireFeeName":{checkWireFees:!0},"f-inStorePickupFeeName":{checkInStorePickupFees:!0}}})}});return new o}),define("text!content/category-sections/more/manage-delivery-fees/templates/setup-by-destination-home-tpl.html",[],function(){return'<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title">\r\n			<h2 class="pull-left">Location Based Fees</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button class="btn btn-submit">Save Changes</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this page to set up fees for different areas that you deliver to. Does it cost more to deliver to one city over another? Set your delivery fee to reflect that. You can set fees by zip code, city name, or facility.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<button id="add-btn" class="x-space-s btn compact btn-submit pull-right"><i class="icon icon-add"></i>Add New Fee</button>\r\n	<button class="x-space-s btn compact btn-submit pull-right btn-file">\r\n	<input type="file">\r\n	<i class="icon icon-add"></i>Import Fees\r\n	</button>\r\n	<button class="x-space-s btn compact btn-submit pull-right"><i class="icon icon-export"></i>Export Fees</button>\r\n	<button class="x-space-s btn compact btn-other pull-right">Download Sample</button>\r\n</div>\r\n\r\n<div class="row row-spaced form-section">\r\n	<div class="col-4">\r\n		<label for="f-condition-type">Select Location Type</label>\r\n		<div class="select-container">\r\n		    <select id="f-condition-type" name="f-condition-type">\r\n		        <option selected disabled hidden value=""></option>\r\n		        <option value=""></option>\r\n		        <option value="City">City</option>\r\n		        <option value="Zip Code">Zip Code</option>\r\n		        <option value="Facility Name">Facility Name</option>\r\n		    </select>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="col-4">\r\n		<label for="f-condition-value">Search for Location Value</label><i class="icon icon-tool-tip x-space-s" title="Search for a delivery fee by it\'s location or zip code."></i>\r\n		<div class="search-container">\r\n			<input type="text" id="f-condition-value" name="f-condition-value">\r\n		</div>\r\n	</div>	\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n	<table id="destination-delivery-fee-table" class="table alternate">\r\n		<thead>\r\n			<tr>\r\n				<th>Location Type</th>\r\n				<th>Location Value</th>\r\n				<th>Delivery Fee</th>\r\n				<th>Status</th>\r\n				<th>Edit</th>\r\n				<th>Delete</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody id="destination-delivery-fee-list"></tbody>\r\n	</table>\r\n	</div>\r\n</div>\r\n'}),define("content/category-sections/more/manage-delivery-fees/models/destination-delivery-fee-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,active:!0,conditionType:"",conditionValue:"",deliveryFee:"0.00",wireFee:"0.00",additionalFee:"0.00",additionalFeeName:"",country:"",state:"",city:"",zip:""}});return t}),define("content/category-sections/more/manage-delivery-fees/collections/destination-delivery-fee-collection",["backbone","../models/destination-delivery-fee-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-destination-delivery-fees.json",model:t});return new n}),define("content/category-sections/more/manage-delivery-fees/templates/destination-delivery-fee-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<tr>\r\n	<td>"+(null==(__t=conditionType)?"":__t)+"</td>\r\n	<td>"+(null==(__t=conditionValue)?"":__t)+"</td>\r\n	<td>$"+(null==(__t=deliveryFee)?"":__t)+'</td>\r\n	<td>\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="ddf"+id)?"":__t)+'" name="'+(null==(__t="ddf"+id)?"":__t)+'" class="on-off-switch" />\r\n			<label for="'+(null==(__t="ddf"+id)?"":__t)+'" class="on-off-switch-label no-margin">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</td>\r\n	<td>\r\n		<button class="icon icon-btn icon-edit icon-2x"></button>\r\n	</td>\r\n	<td>\r\n		<button class="icon icon-btn icon-trash icon-2x"></button>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/more/manage-delivery-fees/views/destination-delivery-fee-view",["backbone","../templates/destination-delivery-fee-tpl","../collections/destination-delivery-fee-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.listenTo(n,"remove",function(e){e===this.model&&(this.parent.dataTable.row(this.$el).remove().draw(),this.remove())}),this.listenTo(this.parent,"reset",function(){this.remove()})},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return o}),define("content/category-sections/more/manage-delivery-fees/views/setup-by-destination-home-view",["backbone","text!../templates/setup-by-destination-home-tpl.html","../models/destination-delivery-fee-model","../collections/destination-delivery-fee-collection","./destination-delivery-fee-view","datatables"],function(e,t,n,i,o){var r=e.View.extend({tagName:"div",id:"p-setup-by-destination-home",template:t,render:function(){var e=this;return e.$el.html(e.template),e.delegateEvents(),e.cacheElem(),i.fetchCustom().done(function(){e.addAllDesinationDeliveryFees(),e.applyDataTables()}),e},events:{"click #add-btn":"handleCreate","change #f-condition-type":"handleConditionTypeSearch","keydown #f-condition-value":"handleConditionValueSearch","click #cancel-btn":"handleCancel"},cacheElem:function(){this.$destinationDeliveryFeeList=this.$el.find("#destination-delivery-fee-list"),this.$destinationDeliveryFeeTable=this.$el.find("#destination-delivery-fee-table"),this.$conditionTypeSearch=this.$el.find("#f-condition-type"),this.$conditionValueSearch=this.$el.find("#f-condition-value")},addDestinationDeliveryFee:function(e){var t=new o({model:e,parent:this});this.$destinationDeliveryFeeList.append(t.render().el)},addAllDesinationDeliveryFees:function(){this.$destinationDeliveryFeeList.empty(),this.trigger("reset"),i.each(this.addDestinationDeliveryFee,this)},handleCreate:function(){this.handleEdit(new n)},handleEdit:function(e){this.parent.showEdit(e)},handleCancel:function(){this.parent.showParentHome()},applyDataTables:function(){this.dataTable=this.$destinationDeliveryFeeTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},handleConditionTypeSearch:function(e){this.dataTable.columns(0).search(e.target.value).draw()},handleConditionValueSearch:function(e){var t=this;window.setTimeout(function(){t.dataTable.columns(1).search(e.target.value).draw()},0)}});return new r}),define("content/category-sections/more/manage-delivery-fees/templates/create-edit-destination-delivery-fee-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="products-messaging">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Create ")?"":__t)+'Location Based Fee</h2>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					',id&&(__p+='\r\n					<button type="button" id="delete-btn" class="btn btn-cancel">\r\n						<i class="icon icon-x icon-lg"></i>Delete\r\n					</button>\r\n					'),__p+='\r\n					<button type="button" id="save-btn" class="btn btn-submit pull-right">\r\n						',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n					</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Use this section to setup custom delivery fees by different destination\'s conditions like zip code, city state, or facility name.\r\n		</div>\r\n	</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n	<form id="create-edit-form" class="row row-spaced panel form-section">\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<div class="label">Active<i title="Set this to on in order for this delivery fee to be active." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n				<label for="f-active" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-condition-type">Location Type</label>\r\n				<div class="select-container">\r\n				    <select id="f-condition-type" name="f-condition-type">\r\n				        <option selected disabled hidden value="'+(null==(__t=conditionType)?"":__t)+'">'+(null==(__t=conditionType)?"":__t)+'</option>\r\n				        <option value="City">City</option>\r\n				        <option value="Zip Code">Zip Code</option>\r\n				        <option value="Facility Name">Facility Name</option>\r\n				    </select>\r\n				</div>\r\n			</div>\r\n			<div class="col-6 form-section">\r\n				<label for="f-condition-value">Location Value</label><i class="icon icon-tool-tip x-space-s" title="Put the city, zip code, or facility name here."></i>\r\n				<input type="text" id="f-condition-value" name="f-condition-value" value="'+(null==(__t=conditionValue)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3 form-section">\r\n				<label for="f-delivery-fee">Delivery Fee</label>\r\n				<div class="dollar-container">\r\n				<input type="text" id="f-delivery-fee" name="f-delivery-fee" value="'+(null==(__t=deliveryFee)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n			<div class="col-3 form-section">\r\n				<label for="f-wire-fee">Wire Fee</label><i class="icon icon-tool-tip x-space-s" title="Will you charge a wire fee for this? If so, put that amount here."></i>\r\n				<div class="dollar-container">\r\n				<input type="text" id="f-wire-fee" name="f-wire-fee" value="'+(null==(__t=wireFee)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-6 form-section">\r\n				<label for="f-additional-fee">Additional Fee</label><i class="icon icon-tool-tip x-space-s" title="Are there any additional fees you charge for this delivery? If so, put those here."></i>\r\n				<div class="dollar-container">\r\n				<input type="text" id="f-additional-fee" name="f-additional-fee" value="'+(null==(__t=additionalFee)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n			<div class="col-6">\r\n				<label for="f-additional-fee-name">Additional Fee Name</label><i class="icon icon-tool-tip x-space-s" title="What is your additional fee called?"></i>\r\n				<input type="text" id="f-additional-fee-name" name="f-additional-fee-name" value="'+(null==(__t=additionalFeeName)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n	</form>\r\n\r\n	<div id="condition-type-modal"></div>\r\n</div>';
return __p}}),define("content/category-sections/more/manage-delivery-fees/templates/city-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){if(__p+='<div class="row row-spaced">\r\n    <div class="col-12">\r\n        <div class="clearfix section-title">\r\n            <h2 class="pull-left">Custom Delivery Fee By City</h2>\r\n            <div class="btn-panel">\r\n                <button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n                <button type="button" id="continue-btn" class="btn btn-submit">Continue</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel hidden">\r\n    <div class="col-12">\r\n        <div class="row">\r\n            <div class="col-1">\r\n                <div class="icon icon-3x icon-warning"></div>\r\n            </div>\r\n            <div class="col-11 alert-text">\r\n                Alert area placeholder.\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="row">\r\n    <div class="col-12">\r\n        <div class="row">\r\n            <div class="col-12 left-align">\r\n                <p>Select the city you want to create a custom delivery fee for.</p>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-6 form-section">\r\n                <label for="f-country">Country</label>\r\n                <div class="select-container">\r\n\r\n                 <select id="f-country" name="f-country">\r\n                     <option selected disabled hidden value="'+(null==(__t=country)?"":__t)+'">'+(null==(__t=country)?"":__t)+'</option>\r\n\r\n                     <option value="United States">United States</option>\r\n                     <option value="Canada">Canada</option>\r\n             </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-6 form-section">\r\n             <label id="stateProvinceLabel" for="f-state">'+(null==(__t="United States"===country?"State":"Province")?"":__t)+'</label>\r\n                <div class="select-container">\r\n                   <select id="f-state" name="f-state">\r\n                   \r\n        <option selected disabled hidden value="'+(null==(__t=state)?"":__t)+'">'+(null==(__t=state)?"":__t)+"</option>\r\n            ","United States"===country){__p+="\r\n                    ";for(var i=0,j=stateList.length;j>i;++i)__p+="\r\n                ","state"===stateList[i].type&&(__p+='\r\n                    <option value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n            '+(null==(__t=stateList[i].name)?"":__t)+"\r\n            </option>\r\n                "),__p+="\r\n            ";for(__p+="\r\n                ",i=0,j=stateList.length;j>i;++i)__p+="\r\n                        ","state"!==stateList[i].type&&(__p+='\r\n                <option hidden value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n                        '+(null==(__t=stateList[i].name)?"":__t)+"\r\n                </option>\r\n                    "),__p+="\r\n                    ";__p+="\r\n                "}else{__p+="\r\n                        ";for(var i=0,j=stateList.length;j>i;++i)__p+="\r\n                            ","state"!==stateList[i].type&&(__p+='\r\n                    <option value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n                        '+(null==(__t=stateList[i].name)?"":__t)+"\r\n                    </option>\r\n                        "),__p+="\r\n                        ";for(__p+="\r\n",i=0,j=stateList.length;j>i;++i)__p+="\r\n            ","state"===stateList[i].type&&(__p+='\r\n                    <option hidden value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n                    '+(null==(__t=stateList[i].name)?"":__t)+"\r\n                </option>\r\n                "),__p+="\r\n                ";__p+="\r\n                "}__p+='\r\n                    </select>\r\n                </div>      \r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced">\r\n           \r\n                    <div class="col-6">\r\n                        <div class="form-section">\r\n                            <label for="f-city">Search for City</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n                            <div>\r\n                                <input type="text" id="f-city" name="f-city" value="'+(null==(__t=city)?"":__t)+'">\r\n                            </div>\r\n                        </div>                    \r\n                        <div class="">\r\n                            <button type="button" class="btn btn-other city-search-btn" id="search-btn">Lookup</button>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div class="col-6">\r\n                        <table id="city-search-table" class="table-list left-align clickable-search-results">\r\n                          <thead>\r\n                            <tr class="highlighted">\r\n                              <th class="col-4">City Search Result</th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody id="search-results"></tbody>\r\n                        </table>\r\n                    </div>  \r\n            \r\n        </div>\r\n    </div>\r\n</div>    '}return __p}}),define("content/category-sections/more/manage-delivery-fees/models/city-search-model",["backbone"],function(e){var t=e.Model.extend({defaults:{cityName:""}});return t}),define("content/category-sections/more/manage-delivery-fees/collections/city-search-collection",["backbone","../models/city-search-model"],function(e,t){var n=e.Collection.extend({url:"/mock/cities.json",model:t});return new n}),define("content/category-sections/more/manage-delivery-fees/templates/city-search-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<tr>\r\n  <td>"+(null==(__t=cityName)?"":__t)+"</td>\r\n</tr>";return __p}}),define("content/category-sections/more/manage-delivery-fees/views/city-search-view",["backbone","../templates/city-search-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(){this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/shared/states",[],function(){return[{value:"AL",name:"Alabama",type:"state"},{value:"AK",name:"Alaska",type:"state"},{value:"AZ",name:"Arizona",type:"state"},{value:"AR",name:"Arkansas",type:"state"},{value:"CA",name:"California",type:"state"},{value:"CO",name:"Colorado",type:"state"},{value:"CT",name:"Connecticut",type:"state"},{value:"DE",name:"Delaware",type:"state"},{value:"DC",name:"District of Columbia",type:"state"},{value:"FL",name:"Florida",type:"state"},{value:"GA",name:"Georgia",type:"state"},{value:"HI",name:"Hawaii",type:"state"},{value:"ID",name:"Idaho",type:"state"},{value:"IL",name:"Illinois",type:"state"},{value:"IN",name:"Indiana",type:"state"},{value:"IA",name:"Iowa",type:"state"},{value:"KS",name:"Kansas",type:"state"},{value:"KY",name:"Kentucky",type:"state"},{value:"LA",name:"Louisiana",type:"state"},{value:"ME",name:"Maine",type:"state"},{value:"MD",name:"Maryland",type:"state"},{value:"MA",name:"Massachusetts",type:"state"},{value:"MI",name:"Michigan",type:"state"},{value:"MN",name:"Minnesota",type:"state"},{value:"MS",name:"Mississippi",type:"state"},{value:"MO",name:"Missouri",type:"state"},{value:"MT",name:"Montana",type:"state"},{value:"NE",name:"Nebraska",type:"state"},{value:"NV",name:"Nevada",type:"state"},{value:"NH",name:"New Hampshire",type:"state"},{value:"NJ",name:"New Jersey",type:"state"},{value:"NM",name:"New Mexico",type:"state"},{value:"NY",name:"New York",type:"state"},{value:"NC",name:"North Carolina",type:"state"},{value:"ND",name:"North Dakota",type:"state"},{value:"OH",name:"Ohio",type:"state"},{value:"OK",name:"Oklahoma",type:"state"},{value:"OR",name:"Oregon",type:"state"},{value:"PA",name:"Pennsylvania",type:"state"},{value:"PR",name:"Puerto Rico",type:"state"},{value:"RI",name:"Rhode Island",type:"state"},{value:"SC",name:"South Carolina",type:"state"},{value:"SD",name:"South Dakota",type:"state"},{value:"TN",name:"Tennessee",type:"state"},{value:"TX",name:"Texas",type:"state"},{value:"UT",name:"Utah",type:"state"},{value:"VT",name:"Vermont",type:"state"},{value:"VA",name:"Virginia",type:"state"},{value:"WA",name:"Washington",type:"state"},{value:"WV",name:"West Virginia",type:"state"},{value:"WI",name:"Wisconsin",type:"state"},{value:"WY",name:"Wyoming",type:"state"},{type:"province",value:"AB",name:"Alberta"},{type:"province",value:"BC",name:"British Columbia"},{type:"province",value:"MB",name:"Manitoba"},{type:"province",value:"NB",name:"New Brunswick"},{type:"province",value:"NF",name:"Newfoundland and Labrador"},{type:"province",value:"NT",name:"Northwest Territories"},{type:"province",value:"NS",name:"Nova Scotia"},{type:"province",value:"NU",name:"Nunavut"},{type:"province",value:"ON",name:"Ontario"},{type:"province",value:"PE",name:"Prince Edward Island"},{type:"province",value:"QC",name:"Quebec"},{type:"province",value:"SK",name:"Saskatchewan"},{type:"province",value:"YT",name:"Yukon"}]}),define("content/category-sections/more/manage-delivery-fees/views/city-modal-view",["backbone","../templates/city-modal-tpl","../collections/city-search-collection","./city-search-view","content/shared/states","datatables","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({tagName:"form",id:"city-modal",template:t,initialize:function(){},render:function(){var e=this.model.toJSON();e.stateList=o,this.$el.html(this.template(e)),this.delegateEvents(),this.cacheElem(),this.validateForm(),n.fetchCustom().done(function(){this.addAllSearchResults(),this.applyDataTables(),this.dataTable.columns(0).search("asdasdasd").draw()}.bind(this));return this},events:{"click #cancel-btn":"closeModal","click #continue-btn":"handleContinue","click #search-results li":"selectCity","click #search-btn":"handleSearch","change #f-country":"handleCountryChange","blur #f-city":"checkForm"},cacheElem:function(){this.$country=this.$el.find("#f-country"),this.$state=this.$el.find("#f-state"),this.$searchResults=this.$el.find("#search-results"),this.$city=this.$el.find("#f-city"),this.$cityModalForm=this.$el.find("#f-location-fee-city"),this.$searchTable=this.$el.find("#city-search-table"),this.$searchList=this.$el.find("#search-results"),this.$stateProvinceLabel=this.$el.find("#stateProvinceLabel")},closeModal:function(){this.$el.parent().dialog("close"),this.parent.setSelectValue()},addSearchResult:function(e){var t=new i({model:e});this.$searchResults.append(t.render().el)},addAllSearchResults:function(){this.$searchResults.empty(),n.each(this.addSearchResult,this)},handleSearch:function(){var e=this;this.checkForm()&&(setTimeout(function(){e.$el.closest(".ui-dialog").css("top",0)},0),this.dataTable.columns(0).search(this.$city.val().trim()).draw())},handleCountryChange:function(){var e=this.$country.find("option:selected").val();"United States"===e?(this.$stateProvinceLabel.text("State"),this._provinceOptions=this.$state.find("option.province").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._stateOptions&&(this.$state.append(this._stateOptions),this._stateOptions=null),this.$state.find("option.state").prop("hidden",!1)):(this.$stateProvinceLabel.text("Province"),this._stateOptions=this.$state.find("option.state").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._provinceOptions&&(this.$state.append(this._provinceOptions),this._provinceOptions=null),this.$state.find("option.province").prop("hidden",!1))},handleContinue:function(){var e;this.checkForm()&&(e=this.model.clone(),cityValue=this.$city.val(),stateValue=this.$state.find("option:selected").val(),conditionValue=cityValue&&stateValue?[cityValue,", ",stateValue].join(""):"",e.set({country:this.$country.find("option:selected").val(),state:stateValue,city:cityValue,conditionValue:conditionValue}),this.parent.renderVisible(e),this.closeModal())},selectCity:function(e){this.$searchResults.find("li").removeClass("active"),$(e.currentTarget).addClass("active")},checkForm:function(){return this.$el.valid()},validateForm:function(){var e=this;this.$el.validate({rules:{"f-country":{required:function(){return!e.$country.find("option:selected").val().trim()}},"f-state":{required:function(){return!e.$state.find("option:selected").val()}},"f-city":{required:!0}}})},applyDataTables:function(){this.dataTable=this.$searchTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!0,processing:!1,searching:!0,serverSide:!1,stateSave:!1,bDestroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new r}),define("content/category-sections/more/manage-delivery-fees/templates/facility-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){if(__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Custom Delivery Fee By Facility Name</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="continue-btn" class="btn btn-submit">Continue</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row form-section">\r\n	<div class="col-12">\r\n		<div class="row left-align">\r\n			<div class="col-12">\r\n				<p>Search for and select the Facility Name you want to create a custom delivery fee for.</p>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced">\r\n			<div class="col-4 form-section">\r\n				<label for="f-country">Country</label>\r\n				<div class="select-container">\r\n					<select id="f-country" name="f-country">\r\n					<option selected disabled hidden value="'+(null==(__t=country)?"":__t)+'">'+(null==(__t=country)?"":__t)+'</option>\r\n					<option value="United States">United States</option>\r\n					<option value="Canada">Canada</option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-4 form-section">\r\n				<label id="stateProvinceLabel" for="f-state">'+(null==(__t="United States"===country?"State":"Province")?"":__t)+'</label>\r\n				<div class="select-container">\r\n					<select id="f-state" name="f-state">\r\n						<option selected disabled hidden value="'+(null==(__t=state)?"":__t)+'">'+(null==(__t=state)?"":__t)+"</option>\r\n						","United States"===country){__p+="\r\n						";for(var i=0,j=stateList.length;j>i;++i)__p+="\r\n						","state"===stateList[i].type&&(__p+='\r\n						<option value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n						'+(null==(__t=stateList[i].name)?"":__t)+"\r\n						</option>\r\n						"),__p+="\r\n						";for(__p+="\r\n						",i=0,j=stateList.length;j>i;++i)__p+="\r\n						","state"!==stateList[i].type&&(__p+='\r\n						<option hidden value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n						'+(null==(__t=stateList[i].name)?"":__t)+"\r\n						</option>\r\n						"),__p+="\r\n						";__p+="\r\n						"}else{__p+="\r\n						";for(var i=0,j=stateList.length;j>i;++i)__p+="\r\n						","state"!==stateList[i].type&&(__p+='\r\n						<option value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n						'+(null==(__t=stateList[i].name)?"":__t)+"\r\n						</option>\r\n						"),__p+="\r\n						";for(__p+="\r\n						",i=0,j=stateList.length;j>i;++i)__p+="\r\n						","state"===stateList[i].type&&(__p+='\r\n						<option hidden value="'+(null==(__t=stateList[i].value)?"":__t)+'" class="'+(null==(__t=stateList[i].type)?"":__t)+'">\r\n						'+(null==(__t=stateList[i].name)?"":__t)+"\r\n						</option>\r\n						"),__p+="\r\n						";__p+="\r\n						"}__p+='\r\n					</select>\r\n				</div>\r\n			</div>\r\n			<div class="col-4 form-section">\r\n				<label for="f-city">City</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n				<input type="text" id="f-city" name="f-city" value="'+(null==(__t=city)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n\r\n				<div class="row form-section">\r\n					<div class="col-4 form-section">\r\n						<label id="zipPostalLabel" for="f-zip">'+(null==(__t="United States"===country?"Zip Code":"Postal Code")?"":__t)+'</label>\r\n						<input class="'+(null==(__t="United States"===country?"zipUS":"zipCA")?"":__t)+'" type="text" id="f-zip" name="f-zip" value="'+(null==(__t=zip)?"":__t)+'">\r\n					</div>\r\n					<div class="col-4 form-section">\r\n\r\n						<label for="f-facility">Search for Facility Name</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n\r\n						<div class="search-container">\r\n						<input type="text" id="f-facility" name="f-facility" value="'+(null==(__t="Facility Name"===conditionType?conditionValue:"")?"":__t)+'"></div>\r\n					</div>\r\n\r\n					<div class="col-4"><button type="button" class="btn btn-other facility-search-btn" id="search-btn">Lookup</button></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-12">\r\n				<table id="facility-search-table" class="table-list left-align clickable-search-results">\r\n					<thead>\r\n						<tr class="highlighted">\r\n							<th class="col-4">State/Zip Code</th>\r\n							<th class="col-8 left-indent">Facility Name</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="search-results"></tbody>\r\n				</table>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}return __p}}),define("content/category-sections/more/manage-delivery-fees/models/facility-search-model",["backbone"],function(e){var t=e.Model.extend({defaults:{stateZip:"",facilityName:""}});return t}),define("content/category-sections/more/manage-delivery-fees/collections/facility-search-collection",["backbone","../models/facility-search-model"],function(e,t){var n=e.Collection.extend({url:"/mock/facilities.json",model:t});return new n}),define("content/category-sections/more/manage-delivery-fees/templates/facility-search-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<tr>\r\n  <td>"+(null==(__t=stateZip)?"":__t)+"</td>\r\n  <td>"+(null==(__t=facilityName)?"":__t)+"</td>\r\n</tr>";return __p}}),define("content/category-sections/more/manage-delivery-fees/views/facility-search-view",["backbone","../templates/facility-search-tpl"],function(e,t){var n=e.View.extend({template:t,initialize:function(){this.setElement(this.template(this.model.toJSON()))}});return n}),define("content/category-sections/more/manage-delivery-fees/views/facility-modal-view",["backbone","../templates/facility-modal-tpl","../collections/facility-search-collection","./facility-search-view","content/shared/states","datatables","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({tagName:"form",id:"facility-modal",template:t,initialize:function(){},render:function(){var e=this.model.toJSON();e.stateList=o,this.$el.html(this.template(e)),this.delegateEvents(),this.cacheElem(),this.validateForms(),n.fetchCustom().done(function(){this.addAllSearchResults(),this.applyDataTables(),this.dataTable.columns(1).search("asdasdasd").draw()}.bind(this));return this},cacheElem:function(){this.$country=this.$el.find("#f-country"),this.$state=this.$el.find("#f-state"),this.$city=this.$el.find("#f-city"),this.$zip=this.$el.find("#f-zip"),this.$facility=this.$el.find("#f-facility"),this.$searchTable=this.$el.find("#facility-search-table"),this.$searchList=this.$el.find("#search-results"),this.$stateProvinceLabel=this.$el.find("#stateProvinceLabel"),this.$zipPostalLabel=this.$el.find("#zipPostalLabel")},events:{"click #cancel-btn":"closeModal","click #continue-btn":"handleContinue","click #search-results tr":"selectFacilityName","click #search-btn":"handleSearch","blur #f-zip":"checkForm","blur #f-city":"checkForm","blur #f-facility":"checkForm","change #f-country":"handleCountryChange"},handleCountryChange:function(){var e=this.$country.find("option:selected").val();"United States"===e?(this.$stateProvinceLabel.text("State"),this.$zipPostalLabel.text("Zip Code"),this._provinceOptions=this.$state.find("option.province").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._stateOptions&&(this.$state.append(this._stateOptions),this._stateOptions=null),this.$state.find("option.state").prop("hidden",!1),this.$zip.addClass("zipUS"),this.$zip.removeClass("zipCA"),this.$zip.val("").blur()):(this.$stateProvinceLabel.text("Province"),this.$zipPostalLabel.text("Postal Code"),this._stateOptions=this.$state.find("option.state").prop("hidden",!0).detach(),this.$state.find("option:selected").prop("selected",!1),this._provinceOptions&&(this.$state.append(this._provinceOptions),this._provinceOptions=null),this.$state.find("option.province").prop("hidden",!1),this.$zip.addClass("zipCA"),this.$zip.removeClass("zipUS"),this.$zip.val("").blur())},handleSearch:function(){var e=this;this.checkForm()&&(setTimeout(function(){e.$el.closest(".ui-dialog").css("top",0)},0),this.dataTable.columns(1).search(this.$facility.val().trim()).draw())},closeModal:function(){this.$el.parent().dialog("close"),this.parent.setSelectValue()},checkForm:function(){return this.$el.valid()},addSearchResult:function(e){var t=new i({model:e});this.$searchList.append(t.render().el)},addAllSearchResults:function(){this.$searchList.empty(),n.each(this.addSearchResult,this)},handleContinue:function(){var e;this.checkForm()&&(e=this.model.clone(),e.set({country:this.$country.find("option:selected").val(),state:this.$state.find("option:selected").val(),city:this.$city.val().trim(),zip:this.$zip.val().trim(),conditionType:"Facility Name",conditionValue:this.$facility.val().trim()}),this.parent.renderVisible(e),this.closeModal())},selectFacilityName:function(e){this.$facility.val($(e.currentTarget).children().eq(1).text()),this.handleContinue()},validateForms:function(){var e=this;this.$el.validate({rules:{"f-country":{required:function(){return!e.$country.find("option:selected").val().trim()}},"f-state":{required:function(){return!e.$state.find("option:selected").val()}},"f-city":{required:function(){return!e.$zip.val().trim()&&!e.$facility.val().trim()}},"f-zip":{required:function(){return!e.$city.val().trim()&&!e.$facility.val().trim()},zipUSCA:!0},"f-facility":{required:function(){return!e.$zip.val().trim()&&!e.$city.val().trim()}}}})},applyDataTables:function(){this.dataTable=this.$searchTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!0,processing:!1,searching:!0,serverSide:!1,stateSave:!1,bDestroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new r}),define("content/category-sections/more/manage-delivery-fees/views/create-edit-destination-delivery-fee-view",["backbone","../templates/create-edit-destination-delivery-fee-tpl","../collections/destination-delivery-fee-collection","./city-modal-view","./facility-modal-view","global-events","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"div",id:"p-create-edit-destination-delivery-fee",template:t,initialize:function(){i.parent=this,o.parent=this},render:function(){return this.visibleModel=this.model,this.renderVisible(this.model),this},renderVisible:function(e){this.visibleModel=e,this.$el.html(this.template(e.toJSON())),this.delegateEvents(),this.setModal(),this.cacheElem(),this.applyToolTips(),this.validateForm(),"Zip Code"===this.$conditionType.find("option:selected").val()&&this.handleConditionTypeChange()},events:{"click #cancel-btn":"handleCancel","click #delete-btn":"handleDelete","click #save-btn":"handleSave","change #f-condition-type":"handleConditionTypeChange"},cacheElem:function(){this.$modal=$("#condition-type-modal"),this.$active=this.$el.find("#f-active"),this.$conditionType=this.$el.find("#f-condition-type"),this.$conditionValue=this.$el.find("#f-condition-value"),this.$deliveryFee=this.$el.find("#f-delivery-fee"),this.$wireFee=this.$el.find("#f-wire-fee"),this.$additionalFee=this.$el.find("#f-additional-fee"),this.$additionalFeeName=this.$el.find("#f-additional-fee-name"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$tip=this.$el.find(".tooltip-change")},showHome:function(){this.parent.showHome()},getDollarFormat:function(e){var t,n;return t=Number(e.replace(/[^0-9\.]+/g,""))+"",n=t.match(/\.\d{2}/),n&&0!==Number(n[0])||(t+=".00"),t},setSelectValue:function(){this.$conditionType.val("")},handleCancel:function(){r.trigger("form:cancel",this.showHome.bind(this))},handleDelete:function(){var e=this;r.trigger("form:delete",function(){n.remove(e.model),e.showHome(),r.trigger("form:finished")})},handleSave:function(){this.$createEditForm.valid()&&(this.model.set({active:this.$active.is(":checked"),conditionType:this.$conditionType.find("option:selected").val(),conditionValue:this.$conditionValue.val().trim(),deliveryFee:this.getDollarFormat(this.$deliveryFee.val().trim()),wireFee:this.getDollarFormat(this.$wireFee.val().trim()),additionalFee:this.getDollarFormat(this.$additionalFee.val().trim()),additionalFeeName:this.$additionalFeeName.val().trim(),country:this.visibleModel.get("country"),state:this.visibleModel.get("state"),city:this.visibleModel.get("city"),zip:this.visibleModel.get("zip")}),this.model.get("id")||(this.model.set("id",(new Date).getTime()),n.add(this.model)),this.showHome(),r.trigger("form:save",this.$tip))},handleConditionTypeChange:function(){switch(this.$conditionType.find("option:selected").val()){case"City":this.showModal(i),this.$conditionValue.removeClass("zipUSCA");break;case"Zip Code":this.$conditionValue.val(this.visibleModel.get("zip")),this.$conditionValue.addClass("zipUSCA");break;case"Facility Name":this.showModal(o),this.$conditionValue.removeClass("zipUSCA")}},setModal:function(){this.$el.find("#condition-type-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=this.visibleModel,this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){var e=this;this.$createEditForm.validate({rules:{"f-condition-type":{required:function(e){return""===$(e).find("option:selected").val()}},"f-condition-value":{required:function(t){var n=t.value;return"Zip Code"===e.$conditionType.find("option:selected").val().trim()?!/^\d{5}$/.test(n):0===n.length||/^\s+$/.test(n)}},"f-delivery-fee":{required:!0,dollars:!0},"f-wire-fee":{dollars:!0},"f-additional-fee":{dollars:!0}}}),jQuery.validator.addClassRules({zipUSCA:{zipUSCAwild:!0}})}});return new a}),define("content/category-sections/more/manage-delivery-fees/views/setup-by-destination-view",["backbone","./setup-by-destination-home-view","./create-edit-destination-delivery-fee-view"],function(e,t,n){var i=e.View.extend({tagName:"div",id:"p-setup-by-destination",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showEdit:function(e){n.model=e,this.replaceVisible(n)},showParentHome:function(){this.parent.showHome()}});return new i}),define("content/category-sections/more/manage-delivery-fees/models/date-time-delivery-settings-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-date-time-delivery-settings.json",defaults:{feeType:"Fee",sameDayFee:"0.00",earlyFeeActive:!0,earlyFee:"0.00",cutOffTime:"5:00PM",frontEndMessage:"",mondayFee:"0.00",mondayFeeActive:!0,tuesdayFee:"0.00",tuesdayFeeActive:!0,wednesdayFee:"0.00",wednesdayFeeActive:!0,thursdayFee:"0.00",thursdayFeeActive:!0,fridayFee:"0.00",fridayFeeActive:!0,saturdayFee:"0.00",saturdayFeeActive:!0,sundayFee:"0.00",sundayFeeActive:!0}});return new t}),define("content/category-sections/more/manage-delivery-fees/templates/setup-by-date-time-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title">\r\n			<h2 class="pull-left">Date & Time Based Fees</h2>\r\n			<div class="btn-panel">\r\n				<button id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button id="save-btn" class="btn btn-submit">Save Changes</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this section to set up seasonal delivery fees based on date ranges.  Also, set up delivery fees for same or 2nd day delivery and for each day of the week.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title clearfix">Seasonal Delivery Fees\r\n				<button class="btn btn-submit pull-right" id="add-btn">\r\n					<i class="icon icon-add"></i>Add New Fee\r\n				</button>\r\n			</div>\r\n\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n	<table id="date-time-delivery-fee-table" class="table alternate">\r\n		<thead>\r\n			<tr>\r\n				<th>Start Date</th>\r\n				<th>End Date</th>\r\n				<th>Fee Amount</th>\r\n				<th>Status</th>\r\n				<th>Edit</th>\r\n				<th>Delete</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody id="date-time-delivery-fee-list"></tbody>\r\n	</table>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Same Day Delivery Additional Fee</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3">\r\n			<label for="f-same-day-fee">Same Day Fee</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n			<div class="dollar-container">\r\n				<input type="text" id="f-same-day-fee" name="f-same-day-fee" value="'+(null==(__t=sameDayFee)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<form id="f-early-delivery">\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Early Delivery Additional Fee</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-2 form-section">\r\n			<div class="label">Active</div>\r\n			<input '+(null==(__t=earlyFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-early-fee-active" name="f-early-fee-active" class="on-off-switch" />\r\n			<label for="f-early-fee-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n		<div class="col-2 form-section">\r\n			<label for="f-early-fee">Fee Amount</label>\r\n			<div class="dollar-container">\r\n			<input type="text" id="f-early-fee" name="f-early-fee" value="'+(null==(__t=earlyFee)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n		<div class="col-3 form-section">\r\n			<label for="f-cut-off-time">Cut Off Time</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n			<div class="select-container">\r\n			    <select id="f-cut-off-time" name="f-cut-off-time">\r\n			        <option selected disabled hidden value="'+(null==(__t=cutOffTime)?"":__t)+'">'+(null==(__t=cutOffTime)?"":__t)+'</option>\r\n\r\n			        <option value="6:00AM">6:00AM</option>\r\n			        <option value="6:30AM">6:30AM</option>\r\n			        <option value="7:00AM">7:00AM</option>\r\n			        <option value="7:30AM">7:30AM</option>\r\n			        <option value="8:00AM">8:00AM</option>\r\n			        <option value="8:30AM">8:30AM</option>\r\n			        <option value="9:00AM">9:00AM</option>\r\n			        <option value="9:30AM">9:30AM</option>\r\n			        <option value="10:00AM">10:00AM</option>\r\n			        <option value="10:30AM">10:30AM</option>\r\n			        <option value="11:00AM">11:00AM</option>\r\n			        <option value="11:30AM">11:30AM</option>\r\n			        <option value="12:00PM">12:00PM</option>\r\n			        <option value="12:30PM">12:30PM</option>\r\n			        <option value="1:00PM">1:00PM</option>\r\n			        <option value="1:30PM">1:30PM</option>\r\n			        <option value="2:00PM">2:00PM</option>\r\n			        <option value="2:30PM">2:30PM</option>\r\n			        <option value="3:00PM">3:00PM</option>\r\n			        <option value="3:30PM">3:30PM</option>\r\n			        <option value="4:00PM">4:00PM</option>\r\n			        <option value="4:30PM">4:30PM</option>\r\n			        <option value="5:00PM">5:00PM</option>\r\n			        <option value="5:30PM">5:30PM</option>\r\n			        <option value="6:00PM">6:00PM</option>\r\n			        <option value="6:30PM">6:30PM</option>\r\n			        <option value="7:00PM">7:00PM</option>\r\n			        <option value="7:30PM">7:30PM</option>\r\n			        <option value="8:00PM">8:00PM</option>\r\n			        <option value="8:30PM">8:30PM</option>\r\n			        <option value="9:00PM">9:00PM</option>\r\n			        <option value="9:30PM">9:30PM</option>\r\n			        <option value="10:00PM">10:00PM</option>\r\n			        <option value="10:30PM">10:30PM</option>\r\n			        <option value="11:00PM">11:00PM</option>\r\n			        <option value="11:30PM">11:30PM</option>\r\n			        <option value="12:00AM">12:00AM</option>\r\n			        <option value="12:30AM">12:30AM</option>\r\n			        <option value="1:00AM">1:00AM</option>\r\n			        <option value="1:30AM">1:30AM</option>\r\n			        <option value="2:00AM">2:00AM</option>\r\n			        <option value="2:30AM">2:30AM</option>\r\n			        <option value="3:00AM">3:00AM</option>\r\n			        <option value="3:30AM">3:30AM</option>\r\n			        <option value="4:00AM">4:00AM</option>\r\n			        <option value="4:30AM">4:30AM</option>\r\n			        <option value="5:00AM">5:00AM</option>\r\n			        <option value="5:30AM">5:30AM</option>\r\n			    </select>\r\n			</div>\r\n		</div>\r\n		<div class="col-5 form-section">\r\n			<label for="f-front-end-message">Front-End Message</label>\r\n			<input type="text" id="f-front-end-message" name="f-front-end-message" value="'+(null==(__t=frontEndMessage)?"":__t)+'">\r\n		</div>\r\n	</div>\r\n</div>\r\n</form>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Fees for Days of the Week to be Added to Other Delivery Fees<i class="icon icon-tool-tip x-space-s" title="???"></i></div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n	<table class="table alternate">\r\n		<thead>\r\n			<tr>\r\n				<th class="col-4 left-align indented-s">Day</th>\r\n				<th class="col-4">Fee Amount</th>\r\n				<th class="col-4">Active</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody>\r\n			<tr>\r\n				<td class="left-align"><span class="x-space-s font-size-xxl">Monday</span></td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n					<div class="dollar-container fee">\r\n					<input type="text" id="f-monday-fee" name="f-monday-fee" value="'+(null==(__t=mondayFee)?"":__t)+'">\r\n					</div>\r\n					</div>\r\n				</td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n						<input '+(null==(__t=mondayFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-monday-fee-active" name="f-monday-fee-active" class="on-off-switch" />\r\n						<label for="f-monday-fee-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n			<tr>\r\n				<td class="left-align"><span class="x-space-s font-size-xxl">Tueday</span></td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n					<div class="dollar-container fee">\r\n					<input type="text" id="f-tuesday-fee" name="f-tuesday-fee" value="'+(null==(__t=tuesdayFee)?"":__t)+'">\r\n					</div>\r\n					</div>\r\n				</td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n						<input '+(null==(__t=tuesdayFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-tuesday-fee-active" name="f-tuesday-fee-active" class="on-off-switch" />\r\n						<label for="f-tuesday-fee-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n			<tr>\r\n				<td class="left-align"><span class="x-space-s font-size-xxl">Wednesday</span></td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n					<div class="dollar-container fee">\r\n					<input type="text" id="f-wednesday-fee" name="f-wednesday-fee" value="'+(null==(__t=wednesdayFee)?"":__t)+'">\r\n					</div>\r\n					</div>\r\n				</td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n						<input '+(null==(__t=wednesdayFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-wednesday-fee-active" name="f-wednesday-fee-active" class="on-off-switch" />\r\n						<label for="f-wednesday-fee-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n			<tr>\r\n				<td class="left-align"><span class="x-space-s font-size-xxl">Thursday</span></td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n					<div class="dollar-container fee">\r\n					<input type="text" id="f-thursday-fee" name="f-thursday-fee" value="'+(null==(__t=thursdayFee)?"":__t)+'">\r\n					</div>\r\n					</div>\r\n				</td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n						<input '+(null==(__t=thursdayFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-thursday-fee-active" name="f-thursday-fee-active" class="on-off-switch" />\r\n						<label for="f-thursday-fee-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n			<tr>\r\n				<td class="left-align"><span class="x-space-s font-size-xxl">Friday</span></td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n					<div class="dollar-container fee">\r\n					<input type="text" id="f-friday-fee" name="f-friday-fee" value="'+(null==(__t=fridayFee)?"":__t)+'">\r\n					</div>\r\n					</div>\r\n				</td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n						<input '+(null==(__t=fridayFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-friday-fee-active" name="f-friday-fee-active" class="on-off-switch" />\r\n						<label for="f-friday-fee-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n			<tr>\r\n				<td class="left-align"><span class="x-space-s font-size-xxl">Saturday</span></td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n					<div class="dollar-container fee">\r\n					<input type="text" id="f-saturday-fee" name="f-saturday-fee" value="'+(null==(__t=saturdayFee)?"":__t)+'">\r\n					</div>\r\n					</div>\r\n				</td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n						<input '+(null==(__t=saturdayFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-saturday-fee-active" name="f-saturday-fee-active" class="on-off-switch" />\r\n						<label for="f-saturday-fee-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n			<tr>\r\n				<td class="left-align"><span class="x-space-s font-size-xxl">Sunday</span></td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n					<div class="dollar-container fee">\r\n					<input type="text" id="f-sunday-fee" name="f-sunday-fee" value="'+(null==(__t=sundayFee)?"":__t)+'">\r\n					</div>\r\n					</div>\r\n				</td>\r\n				<td>\r\n					<div class="centered-content-container">\r\n						<input '+(null==(__t=sundayFeeActive?"checked":"")?"":__t)+' type="checkbox" id="f-sunday-fee-active" name="f-sunday-fee-active" class="on-off-switch" />\r\n						<label for="f-sunday-fee-active" class="on-off-switch-label">\r\n						    <div class="on-off-switch-state">on</div>\r\n						</label>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n		</tbody>\r\n	</table>\r\n	</div>\r\n	</div>\r\n</div>';
return __p}}),define("content/category-sections/more/manage-delivery-fees/models/date-time-delivery-fee-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,active:!0,startDate:"",endDate:"",fee:"0.00",feeType:"Fee",feeMessageActive:!0,calendarColor:"#FFFFFF",feeMessage:""}});return t}),define("content/category-sections/more/manage-delivery-fees/collections/date-time-delivery-fee-collection",["backbone","../models/date-time-delivery-fee-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-date-time-delivery-fees.json",model:t});return new n}),define("content/category-sections/more/manage-delivery-fees/templates/date-time-delivery-fee-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<tr>\r\n	<td>"+(null==(__t=startDate)?"":__t)+"</td>\r\n	<td>"+(null==(__t=endDate)?"":__t)+"</td>\r\n	<td>$"+(null==(__t=fee)?"":__t)+'</td>\r\n	<td>\r\n		<div class="centered-content-container">\r\n			<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="ddf"+id)?"":__t)+'" name="'+(null==(__t="ddf"+id)?"":__t)+'" class="on-off-switch" />\r\n			<label for="'+(null==(__t="ddf"+id)?"":__t)+'" class="on-off-switch-label no-margin">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n	</td>\r\n	<td>\r\n		<button class="icon icon-btn icon-edit icon-2x"></button>\r\n	</td>\r\n	<td>\r\n		<button class="icon icon-btn icon-trash icon-2x"></button>\r\n	</td>\r\n</tr>';return __p}}),define("content/category-sections/more/manage-delivery-fees/views/date-time-delivery-fee-view",["backbone","../templates/date-time-delivery-fee-tpl","../collections/date-time-delivery-fee-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.listenTo(n,"remove",function(e){e===this.model&&(this.parent.dataTable.row(this.$el).remove().draw(),this.remove())}),this.listenTo(this.parent,"reset",function(){this.remove()})},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit"},handleDelete:function(){i.trigger("form:delete",n.remove.bind(n,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)}});return o}),define("content/category-sections/more/manage-delivery-fees/views/setup-by-date-time-home-view",["backbone","../models/date-time-delivery-settings-model","../templates/setup-by-date-time-home-tpl","../models/date-time-delivery-fee-model","../collections/date-time-delivery-fee-collection","./date-time-delivery-fee-view","global-events","datatables"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"div",id:"p-setup-by-date-time-home",template:n,render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.delegateEvents(),e.cacheElem(),o.fetchCustom().done(function(){e.addAllDateTimeDeliveryFees(),e.applyDataTables()}),e.validateForm()}),e},events:{"click #add-btn":"handleCreate","click #cancel-btn":"handleCancel","click #save-btn":"handleSave"},cacheElem:function(){this.$dateTimeDeliveryFeeList=this.$el.find("#date-time-delivery-fee-list"),this.$dateTimeDeliveryFeeTable=this.$el.find("#date-time-delivery-fee-table"),this.$early=this.$el.find("#f-early-fee-active"),this.$form=this.$el.find("#f-early-delivery"),this.$tip=this.$el.find(".tooltip-change")},addDateTimeDeliveryFee:function(e){var t=new r({model:e,parent:this});this.$dateTimeDeliveryFeeList.append(t.render().el)},addAllDateTimeDeliveryFees:function(){this.$dateTimeDeliveryFeeList&&this.$dateTimeDeliveryFeeList.empty(),this.trigger("reset"),o.each(this.addDateTimeDeliveryFee,this)},handleCreate:function(){this.handleEdit(new i)},handleSave:function(){var e=this;this.$form.valid()?(a.trigger("form:save",this.$tip),e.parent.showParentHome()):a.trigger("form:invalid",this.$tip)},handleEdit:function(e){this.parent.showEdit(e)},handleCancel:function(){this.parent.showParentHome()},validateForm:function(){var e=this;e.$form.validate({rules:{"f-early-fee":{required:{depends:function(){return e.$early.is(":checked")}},dollars:!0,min:1},"f-front-end-message":{required:{depends:function(){return e.$early.is(":checked")}}}}})},applyDataTables:function(){this.dataTable=this.$dateTimeDeliveryFeeTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,searching:!1,serverSide:!1,stateSave:!1,bDestroy:!0,info:!0,paging:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})}});return new s}),define("content/category-sections/more/manage-delivery-fees/templates/create-edit-date-time-delivery-fee-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div id="products-messaging">\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h2 class="pull-left">'+(null==(__t=id?"Edit ":"Create ")?"":__t)+'Date & Time Based Fee</h2>\r\n				<div class="btn-panel">\r\n					<button id="cancel-btn" class="btn compact btn-other">Cancel</button>\r\n					',id&&(__p+='<button id="delete-btn" class="btn compact btn-cancel">\r\n						<i class="icon icon-x icon-lg"></i>Delete\r\n					</button>'),__p+='\r\n					<button id="save-btn" class="btn compact btn-submit pull-right">\r\n						',id||(__p+='<i class="icon icon-add icon-lg"></i>'),__p+='Save\r\n					</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Velit voluptate optio suscipit odio! Aliquam culpa eum necessitatibus quia ab similique, labore nemo ut voluptate maxime, modi facilis amet, architecto sed.\r\n		</div>\r\n	</div>\r\n\r\n	<form id="create-edit-form" class="row row-spaced panel form-section">\r\n		<div class="row row-spaced">\r\n\r\n			<div class="col-3 form-section">\r\n				<label for="f-fee" id="f-fee-label">Fee Amount</label>\r\n				<div class="dollar-container">\r\n				<input type="text" id="f-fee" name="f-fee" value="'+(null==(__t=fee)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-3">\r\n				<div class="label">Active<i title="???" class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=active?"checked":"")?"":__t)+' type="checkbox" id="f-active" name="f-active" class="on-off-switch" />\r\n				<label for="f-active" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3 form-section">\r\n				<label for="f-start-date">Start Date</label><i title="???" class="icon icon-tool-tip x-space-s"></i>\r\n				<div class="date-container">\r\n				    <input type="text" id="f-start-date" name="f-start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-3 form-section">\r\n				<label for="f-end-date">End Date</label><i title="???" class="icon icon-tool-tip x-space-s"></i>\r\n				<div class="date-container">\r\n				    <input type="text" id="f-end-date" name="f-end-date" class="date" value="'+(null==(__t=endDate)?"":__t)+'">\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-6 form-section">\r\n				<label for="f-calendar-color">Calendar Display Color Code</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n				<input type="color" id="f-calendar-color" name="f-calendar-color" value="'+(null==(__t=calendarColor)?"":__t)+'">\r\n			</div>\r\n\r\n		</div>\r\n\r\n		<div class="row row-spaced">\r\n			<div class="col-3">\r\n				<div class="label">Display Fee Message<i title="???" class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=feeMessageActive?"checked":"")?"":__t)+' type="checkbox" id="f-fee-message-active" name="f-fee-message-active" class="on-off-switch" />\r\n				<label for="f-fee-message-active" class="on-off-switch-label">\r\n				    <div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n			<div class="col-9">\r\n				<label for="f-fee-message">Fee Message</label><i class="icon icon-tool-tip x-space-s" title="???"></i>\r\n				<input type="text" id="f-fee-message" name="f-fee-message" value="'+(null==(__t=feeMessage)?"":__t)+'">\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>';return __p}}),define("content/category-sections/more/manage-delivery-fees/views/create-edit-date-time-delivery-fee-view",["backbone","../templates/create-edit-date-time-delivery-fee-tpl","../collections/date-time-delivery-fee-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=e.View.extend({tagName:"div",id:"p-create-edit-date-time-delivery-fee",template:t,render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.applyToolTips(),this.applyDates(),this.validateForm(),this},events:{"click #cancel-btn":"handleCancel","click #delete-btn":"handleDelete","click #save-btn":"handleSave","change #f-start-date":"hasValidForm","change #f-end-date":"hasValidForm","change #f-feetype":"handleFeeType"},cacheElem:function(){this.$active=this.$el.find("#f-active"),this.$startDate=this.$el.find("#f-start-date"),this.$endDate=this.$el.find("#f-end-date"),this.$fee=this.$el.find("#f-fee"),this.$feeMessageActive=this.$el.find("#f-fee-message-active"),this.$calendarColor=this.$el.find("#f-calendar-color"),this.$feeMessage=this.$el.find("#f-fee-message"),this.$createEditForm=this.$el.find("#create-edit-form"),this.$ftype=this.$el.find("#f-feetype"),this.$flabel=this.$el.find("#f-fee-label"),this.$tip=this.$el.find(".tooltip-change")},showHome:function(){this.parent.showHome()},handleCancel:function(){i.trigger("form:cancel",this.parent.showHome.bind(this.parent))},handleFeeType:function(){var e=this.$ftype.val();this.$flabel.text("Fee"==e?"Fee Amount":"Discount Amount")},handleDelete:function(){var e=this;i.trigger("form:delete",function(){n.remove(e.model),e.showHome(),i.trigger("form:finished")})},getDollarFormat:function(e){var t,n;return t=Number(e.replace(/[^0-9\.]+/g,""))+"",n=t.match(/\.\d{2}/),n&&0!==Number(n[0])||(t+=".00"),"$"+t},hasValidForm:function(){return this.$createEditForm.valid()},handleSave:function(){this.hasValidForm()&&(this.model.set({active:this.$active.is(":checked"),startDate:this.$startDate.val().trim(),endDate:this.$endDate.val().trim(),fee:this.getDollarFormat(this.$fee.val()),feeMessageActive:this.$feeMessageActive.is(":checked"),calendarColor:this.$calendarColor.val(),feeMessage:this.$feeMessage.val().trim()}),this.model.get("id")||(this.model.set("id",(new Date).getTime()),n.add(this.model)),this.showHome(),i.trigger("form:save",this.$tip))},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$endDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/y"}),e.$endDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$endDate.trigger("blur")},dateFormat:"mm/dd/y"})},validateForm:function(){this.$createEditForm.validate({rules:{"f-start-date":{dateCustom:!0,required:!0},"f-end-date":{dateCustom:!0,required:!0},"f-fee":{dollars:!0,required:!0}}})}});return new o}),define("content/category-sections/more/manage-delivery-fees/views/setup-by-date-time-view",["backbone","./setup-by-date-time-home-view","./create-edit-date-time-delivery-fee-view"],function(e,t,n){var i=e.View.extend({tagName:"div",id:"p-setup-by-date-time",initialize:function(){t.parent=this,n.parent=this},render:function(){return this.replaceVisible(t),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showEdit:function(e){n.model=e,this.replaceVisible(n)},showParentHome:function(){this.parent.showHome()}});return new i}),define("content/category-sections/more/manage-delivery-fees/views/manage-delivery-fees-view",["backbone","./manage-delivery-fees-home-view","./setup-by-destination-view","./setup-by-date-time-view","global-events"],function(e,t,n,i,o){var r=e.View.extend({tagName:"div",id:"p-manage-delivery-fees",initialize:function(){t.parent=this,n.parent=this,i.parent=this},regions:{visible:null},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){var t=this;e&&t.regions.visible!==e&&o.trigger("form:cancel",function(){t.$el.empty(),t.$el.append(e.render().$el.fadeIn(200).focus()),t.regions.visible=e}),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showSetupByDestination:function(){this.replaceVisible(n)},showSetupByDateTime:function(){this.replaceVisible(i)}});return new r}),define("content/category-sections/more/site-theme/models/site-theme-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-site-theme-settings.json",defaults:{layoutImgUrl:"",logoImgUrl:"",automaticSeasonalRotationActive:!0,selectedThemeName:"",selectedThemeId:0,selectedThemeSchemeId:0,headerIcons:!1,headerLayout:"Layout 1",headerQuickShop:!1}});return new t}),define("content/category-sections/more/site-theme/templates/site-theme-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">Site Theme</h2>\r\n			<button type="button" id="save-btn" class="btn btn-submit pull-right">Save Changes</button>\r\n			<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Make your website your own by choosing your theme and layout. Select from the options below.\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Theme Selection</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-6">\r\n			<h3 class="title">Your Current Theme</h3>\r\n\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div class="display-container">\r\n						<img id="display-image" class="fill-container" src="'+(null==(__t=layoutImgUrl)?"":__t)+'" alt="">\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="col-6">\r\n			<div class="row">\r\n				<div class="col-12 clearfix">\r\n					<h3 class="title pull-left">Layout Options</h3><button type="button" id="back-btn" class="hidden-alt btn-clear pull-right no-padding"><i class="icon icon-left-chevron x-space-s"></i>Back</button>\r\n				</div>\r\n			</div>\r\n\r\n\r\n			<div class="row">\r\n				<div class="col-12">\r\n					<div id="layout-theme-container" class="grid-2-closed scroll-container">\r\n\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="row row-spaced">\r\n				<div id="seasonal-toggle" class="col-12 '+(null==(__t="Seasonal"===selectedThemeName?"":"hidden-alt")?"":__t)+'">\r\n					<div class="label">Use Automatic Seasonal Rotation<i title="???" class="icon icon-tool-tip x-space-s"></i></div>\r\n					<input '+(null==(__t=automaticSeasonalRotationActive?"checked":"")?"":__t)+' type="checkbox" id="f-automatic-seasonal-rotation-active" name="f-automatic-seasonal-rotation-active" class="on-off-switch" />\r\n					<label for="f-automatic-seasonal-rotation-active" class="on-off-switch-label">\r\n					    <div class="on-off-switch-state">on</div>\r\n					</label>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Your Logo</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-3">\r\n			<label for="f-logo-img-file">Change Logo</label>\r\n			<button id="f-logo-img-file" type="button" class="btn btn-other btn-file fill-container-width y-space-s">\r\n				Select\r\n			</button>\r\n		</div>\r\n\r\n		<div class="col-9 right-align">\r\n			<img src="'+(null==(__t=logoImgUrl)?"":__t)+'" class="fit-container" alt="" id="logo-img">\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Header Settings</div>\r\n		</div>\r\n	</div>\r\n		<div class="row row-spaced panel alert-panel hidden-alt" id="display-social-quick-alert">\r\n			<div class="col-12">\r\n				<div class="row">\r\n					<div class="col-1">\r\n						<div class="icon icon-4x icon-warning"></div>\r\n					</div>\r\n					<div class="col-11 alert-text">\r\n						You can only activate either Social Media Icons or the Quick Shop button but not both.\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n	<div class="row row-spaced">\r\n\r\n		<div class="col-4 form-section select-container">\r\n			<div class="label">Header Layout</div>\r\n			<select id="f-header-layout" name="f-header-layout">\r\n				<option selected disabled hidden value="'+(null==(__t=headerLayout)?"":__t)+'">'+(null==(__t=headerLayout)?"":__t)+'</option>\r\n				<option value="Layout 1">Layout 1</option>\r\n				<option value="Layout 2">Layout 2</option>\r\n			</select>\r\n		</div>\r\n\r\n		<div class="col-4 form-section">\r\n			<div class="label">Display Social Media Icons</div>\r\n			<input '+(null==(__t=headerIcons?"checked":"")?"":__t)+' type="checkbox" id="f-header-icons" name="f-header-icons" class="on-off-switch" />\r\n			<label for="f-header-icons" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>			\r\n		</div>\r\n\r\n		<div class="col-4 form-section">\r\n			<div class="label">Display Quick Shop<i title="The Quick Shop feature allows your customers to search by occasion for fast and easy product results." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=headerQuickShop?"checked":"")?"":__t)+' type="checkbox" id="f-header-quick-shop" name="f-header-quick-shop" class="on-off-switch" />\r\n			<label for="f-header-quick-shop" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>			\r\n		</div>\r\n\r\n	</div>\r\n\r\n</div>';return __p}}),define("content/category-sections/more/site-theme/models/layout-theme-model",["backbone"],function(e){var t=e.Model.extend({defaults:{name:"",imgUrl:"",colorSchemes:[]}});return t}),define("content/category-sections/more/site-theme/collections/layout-theme-collection",["backbone","../models/layout-theme-model"],function(e,t){var n=e.Collection.extend({url:"/mock/site-theme-layouts.json",model:t});return new n}),define("content/category-sections/more/site-theme/templates/layout-theme-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<span>\r\n	<div id="'+(null==(__t="l"+id)?"":__t)+'" class="site-theme-layout-theme grid-item hover-tip-overlay '+(null==(__t="Seasonal"===name?"seasonal-layout":"")?"":__t)+'">\r\n		<div class="hover-tip outline">\r\n			<div class="row row-spaced center-align">\r\n				<div class="col-12 y-space-s wrap-text break-text">\r\n					'+(null==(__t=name)?"":__t)+'	\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<img class="fill-container" src="'+(null==(__t=imgUrl)?"":__t)+'" alt="">\r\n	</div>\r\n\r\n	<div class="hidden-alt site-theme-color-schemes" >\r\n		';for(var i=0,j=colorSchemes.length;j>i;++i)__p+='\r\n			<div id="'+(null==(__t="l"+id+"s"+colorSchemes[i].id)?"":__t)+'" class="grid-item color-scheme hover-tip-overlay">\r\n				<div class="hover-tip outline">\r\n					<div class="row row-spaced center-align wrap-text">\r\n						<div class="col-12 y-space-s wrap-text">\r\n							'+(null==(__t=colorSchemes[i].name)?"":__t)+'	\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<img class="fill-container" src="'+(null==(__t=colorSchemes[i].imgUrl)?"":__t)+'" alt="">\r\n			</div>\r\n		';__p+="\r\n	</div>\r\n</span>"}return __p}}),define("content/category-sections/more/site-theme/views/layout-theme-view",["backbone","../templates/layout-theme-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.parent=e.parent,this.setElement(this.template(this.model.toJSON())),this.cacheElem()},cacheElem:function(){this.$colorSchemes=this.$el.find(".site-theme-color-schemes")},events:{"click .site-theme-layout-theme":"showColorSchemes","click .color-scheme":"markActiveColorScheme"},showColorSchemes:function(e){$(e.currentTarget).hasClass("seasonal-layout")?this.parent.showSeasonalToggle():this.parent.hideSeasonalToggle(),this.parent.showColorSchemes(),this.$colorSchemes.fadeIn(200)},markActiveColorScheme:function(e){var t,i;t=e.currentTarget.getAttribute("id").match(/^l(\d)s(\d)$/),this.parent.markActiveColorScheme("#"+t[0]),i={themeId:t[1],themeSchemeId:t[2]},this.parent.updateState(i),n.trigger("form:editing")}});return i}),define("content/category-sections/more/site-theme/views/site-theme-view",["backbone","../models/site-theme-model","../templates/site-theme-tpl","../collections/layout-theme-collection","./layout-theme-view","global-events"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"form",id:"p-site-theme",template:n,render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.cacheElem(),e.delegateEvents(),e.applyToolTips(),i.fetchCustom().done(function(){e.addAllLayoutThemes(),e.markActiveColorScheme()}),e.state={themeId:t.get("selectedThemeId"),themeSchemeId:t.get("selectedThemeSchemeId")}}),e},cacheElem:function(){this.$layoutThemeContainer=this.$el.find("#layout-theme-container"),this.$displayImage=this.$el.find("#display-image"),this.$backButton=this.$el.find("#back-btn"),this.$seasonalToggle=this.$el.find("#seasonal-toggle"),this.$logoImg=this.$el.find("#logo-img"),this.$seasonalToggleActive=this.$el.find("#f-automatic-seasonal-rotation-active"),this.$tip=this.$el.find(".tooltip-change"),this.$DisplaySocialIcon=this.$el.find("#f-header-icons"),this.$DisplayQuickShop=this.$el.find("#f-header-quick-shop"),this.$displaySocialQuickAlert=this.$el.find("#display-social-quick-alert")},events:{"click #back-btn":"hideColorSchemes","click #f-logo-img-file":"handleFileUpload","change #f-automatic-seasonal-rotation-active":"handleSeasonalToggle","click #f-header-icons":"checkDisplayButtons","click #f-header-quick-shop":"checkDisplayButtons","click #save-btn":"handleSave"},state:{themeId:"",themeSchemeId:""},updateState:function(e){this.state=e},addLayoutTheme:function(e){var t=new o({model:e,parent:this});this.$layoutThemeContainer.append(t.render().el)},addAllLayoutThemes:function(){this.$layoutThemeContainer.empty(),i.each(this.addLayoutTheme,this)},showColorSchemes:function(){this.$layoutThemeContainer.find(".site-theme-layout-theme").hide(),this.$backButton.fadeIn(200)},hideColorSchemes:function(){this.$backButton.fadeOut(200),this.$layoutThemeContainer.find(".site-theme-color-schemes").hide(),this.$layoutThemeContainer.find(".site-theme-layout-theme").fadeIn(200)},markActiveColorScheme:function(e){e=e||"#l"+t.get("selectedThemeId")+"s"+t.get("selectedThemeSchemeId");var n=this.$layoutThemeContainer.find(e);this.$layoutThemeContainer.find(".active").removeClass("active"),n.addClass("active"),n.parent().siblings(".site-theme-layout-theme").addClass("active"),this.$displayImage.attr("src",n.children("img").attr("src")),this.$layoutThemeContainer.find(".seasonal-layout").hasClass("active")?this.$seasonalToggle.find(".on-off-switch").prop("checked",!1):this.$seasonalToggle.fadeOut(200)},showSeasonalToggle:function(){this.$seasonalToggle.fadeIn(200),this.handleSeasonalToggle()},hideSeasonalToggle:function(){this.$seasonalToggle.fadeOut(200)},handleSeasonalToggle:function(){this.$seasonalToggleActive.is(":checked")&&(this.$layoutThemeContainer.find(".active").removeClass("active"),this.$layoutThemeContainer.find(".seasonal-layout").addClass("active"))},handleFileUpload:function(){var e=this;r.trigger("form:image-upload",{cb:function(t){e.$logoImg.prop("src",t)},active:e.$logoImg.prop("src"),name:"Logo"})},handleSave:function(){t.set({layoutImgUrl:this.$displayImage.prop("src"),logoImgUrl:this.$logoImg.prop("src"),automaticSeasonalRotationActive:this.$seasonalToggleActive.is(":checked"),selectedThemeName:this.state.name,selectedThemeId:this.state.themeId,selectedThemeSchemeId:this.state.themeSchemeId}),r.trigger("form:save",this.$tip)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},showError:function(){this.$displaySocialQuickAlert.fadeIn(200)},hideError:function(){this.$displaySocialQuickAlert.fadeOut(200)},checkDisplayButtons:function(e){{var t=this;$(e.target)}$("#f-header-icons").is(":checked")&&$("#f-header-quick-shop").is(":checked")?(e.preventDefault(),this.showError(),setTimeout(function(){t.hideError()},5e3)):this.hideError()}});return new a}),define("content/category-sections/more/image-management/templates/image-management-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="clearfix section-title">\r\n      <h2 class="pull-left">Image Management</h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    Use this page to manage images on your website and upload more.\r\n  </div>\r\n</div>\r\n\r\n<div class="row panel alert-panel hidden-alt">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text left-align">\r\n        There already exists a folder with that name. Please choose another name.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <button type="button" id="new-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i>Create Folder</button>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <table class="table alternate">\r\n      <thead>\r\n        <tr>\r\n          <th class="col-10 left-align indented-l">Image Folder Name</th>\r\n          <th class="col-1">Edit</th>\r\n          <th class="col-1">Delete</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody id="image-folder-list"></tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n';return __p}}),define("content/category-sections/more/image-management/templates/image-folder-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr>\r\n  <td class="left-align indented-l">'+(null==(__t=name)?"":__t)+'</td>\r\n  <td>\r\n    <a href="#more/image-management/'+(null==(__t=hash)?"":__t)+'">\r\n      <button class="icon icon-btn icon-2x icon-edit"></button>\r\n    </a>\r\n  </td>\r\n  <td>\r\n    ',primary||(__p+='\r\n      <button class="icon icon-btn icon-2x icon-trash"></button>\r\n    '),__p+="\r\n  </td>\r\n</tr>";return __p}}),define("content/category-sections/more/image-management/views/image-folder-view",["backbone","../templates/image-folder-tpl","components/image-modal/collections/image-folder-collection","global-events"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(){var e=this;e.listenTo(n,"remove",function(t){e.model===t&&e.remove()})},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDelete"},handleDelete:function(){var e=this;i.trigger("form:delete",function(){n.remove(e.model)})}});return o}),define("content/category-sections/more/image-management/views/image-management-home-view",["backbone","components/image-modal/collections/image-folder-collection","../templates/image-management-home-tpl","./image-folder-view","global-events"],function(e,t,n,i,o){var r=e.View.extend({tagName:"div",template:n,render:function(){var e=this;return e.$el.html(e.template()),e.delegateEvents(),e.cacheElem(),t.fetchCustom().done(function(){e.addAllImageFolders()}),e},events:{"click #new-btn":"createFolder"},cacheElem:function(){this.$imageFolderList=this.$el.find("#image-folder-list"),this.$createImageFolderForm=this.$el.find("#create-image-folder-form"),this.$imageFolderName=this.$el.find("#image-folder-name"),this.$alertPanel=this.$el.find(".alert-panel")},createFolder:function(){var e=this;o.trigger("form:create",{cb:function(n){if(e.isNotDuplicate(n)){var i;i=n.toLowerCase().replace(/\s/g,"-"),t.add({id:Date.now(),name:n,hash:i,nested:!1})}},template:{title:"Create Image Folder",label:"Image Folder Name"}})},addImageFolder:function(e){if(!e.get("nested")){var t=new i({model:e});this.$imageFolderList.append(t.render().el)}},addAllImageFolders:function(){this.$imageFolderList.empty(),this.stopListening(t,"add remove"),t.each(this.addImageFolder,this),this.listenTo(t,"add remove",this.addAllImageFolders)},isNotDuplicate:function(e){return t.findWhere({name:e})?(this.showAlertPanel(),!1):(this.hideAlertPanel(),!0)},showAlertPanel:function(){this.$alertPanel.show()},hideAlertPanel:function(){this.$alertPanel.hide()}});return new r}),define("content/category-sections/more/image-management/templates/image-management-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row">\r\n  <section class="no-mobile col-d-3" id="side-menu"></section>\r\n  <section class="col-12 col-d-9" id="section"></section>\r\n</div>';return __p}}),define("content/category-sections/more/image-management/templates/image-side-menu-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){__p+='<ul id="side-nav">\r\n  <li class="side-nav-title">\r\n    <i class="icon icon-prefix icon-folder icon-2x"></i>\r\n    Image Folders\r\n  </li>\r\n\r\n  ';for(var i=0,j=imageFolders.length;j>i;++i)__p+="\r\n    ",imageFolders[i].nested||(__p+='\r\n    <a href="'+(null==(__t=baseUrl+imageFolders[i].hash)?"":__t)+'">\r\n      <li>'+(null==(__t=imageFolders[i].name)?"":__t)+"</li>\r\n    </a>\r\n    "),__p+="\r\n  ";
__p+="\r\n</ul>"}return __p}}),define("content/category-sections/more/image-management/views/image-side-menu-view",["backbone","../templates/image-side-menu-tpl","components/image-modal/collections/image-folder-collection"],function(e,t,n){var i=e.View.extend({tagName:"div",id:"side-menu-inner",template:t,render:function(){var e=this;return n.fetchCustom().done(function(){e.$el.html(e.template({baseUrl:"#more/image-management/",imageFolders:n.toJSON()}))}),e}});return new i}),define("content/category-sections/more/image-management/templates/edit-images-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced">\r\n  <div class="col-12">\r\n    <div class="clearfix section-title">\r\n      <h2 class="pull-left">Image Management - '+(null==(__t=name)?"":__t)+'</h2>\r\n      <div class="btn-panel">\r\n      <button type="button" id="back-btn" class="btn btn-other">Back</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n  <div class="col-12">\r\n    '+(null==(__t="Promotional"===name?"Use this page to delete and upload new promotional images for your website":"")?"":__t)+"\r\n    "+(null==(__t="Tile"===name?"Use this page to delete and upload new tile images for your website.":"")?"":__t)+"\r\n    "+(null==(__t="Collections"===name?"Use this page to delete and upload new images for the Collection pages of your website.":"")?"":__t)+"\r\n    "+(null==(__t="Logo"===name?"Use this page to delete and upload new images for the logo of your website.":"")?"":__t)+"\r\n    "+(null==(__t="About Us"===name?"Use this page to delete and upload new images for the About Us page of your website.":"")?"":__t)+"\r\n    "+(null==(__t="Custom HTML"===name?"Use this page to delete and upload new images for the custom HTML pages of your website.":"")?"":__t)+"\r\n    "+(null==(__t="Products"===name?"Use this page to delete and upload new images for the product pages of your website.":"")?"":__t)+'\r\n    \r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row panel alert-panel hidden-alt">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text left-align">\r\n        There already exists a folder with that name. Please choose another name.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n  ',__p+=1==global?'\r\n  <div class="col-4 left-align">\r\n    <button type="button" id="copy-btn" class="btn btn-submit hidden-alt">Download</button>\r\n  </div>\r\n  ':'\r\n  <div class="col-4 left-align">\r\n    <button type="button" id="delete-btn" class="btn btn-cancel hidden-alt">Delete</button>\r\n    <button type="button" id="edit-btn" class="btn btn-other x-space-s hidden-alt">Edit</button>\r\n  </div>\r\n  <div class="col-8 pull-right right-align form-section">\r\n    <button type="button" id="new-folder-btn" class="btn btn-submit x-space-s"><i class="icon icon-add icon-lg"></i>Create Folder</button>\r\n\r\n    <button type="button" class="btn btn-submit btn-file">\r\n      <input type="file" id="upload-btn" accept="image/*">\r\n      <i class="icon icon-add icon-lg"></i> Upload File\r\n    </button>\r\n  </div>\r\n  ',__p+='\r\n</div>\r\n\r\n<div id="aviary" class="hidden-alt"></div>\r\n<div id="image-grid" class="row row-spaced"></div>\r\n<div id="image-mgmt-edit-modal-container"></div>';return __p}}),define("content/category-sections/more/image-management/templates/image-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="grid-item clickable '+(null==(__t=active?"active":"")?"":__t)+(null==(__t=global?" global":" custom")?"":__t)+" "+(null==(__t="image"!==type?type:"")?"":__t)+'">\r\n',type.indexOf("image")>-1?(__p+='\r\n  <img id="img_'+(null==(__t=id)?"":__t)+'" class="fit-container" src="'+(null==(__t=url)?"":__t)+'" alt="'+(null==(__t=name)?"":__t)+'"/>\r\n  ',global&&(__p+='<i title="This is a global image so it cannot be modified." class="icon icon-tool-tip icon-tool-tip-federated federated-bottom-right"></i>'),__p+="\r\n"):__p+='\r\n  <div class="grid-label">\r\n    '+(null==(__t=name)?"":__t)+"\r\n  </div>\r\n",__p+="\r\n","folder"===type&&(__p+="\r\n  ",__p+=0==global?'\r\n  <div class="row bottom-overlay y-space-s">\r\n    <div class="col-12">\r\n      <button type="button" class="icon icon-trash icon-btn fa-lg pull-right"></button>\r\n    </div>\r\n  </div>\r\n  ':'\r\n  <i title="This is a global folder so it cannot be modified." class="icon icon-tool-tip icon-tool-tip-federated federated-bottom-right"></i>\r\n  ',__p+="\r\n"),__p+="\r\n</div>";return __p}}),define("content/category-sections/more/image-management/views/image-view",["backbone","../templates/image-tpl","components/image-modal/collections/image-collection","global-events"],function(e,t,n,i){var o=e.View.extend({tagName:"span",template:t,initialize:function(e){var t=this;t.parent=e.parent,t.listenTo(this.model,"remove",function(){t.remove()}),t.listenTo(t.model,"change",function(e){t.render(),e.get("active")&&t.parent.setActive(t.model)}),t.model.get("active")&&t.parent.setActive(t.model),i.on("route:image-management-folder",function(){t.$el.fadeIn(200).focus()})},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),1==e.model.get("global")&&this.applyToolTips(),this},events:{click:"setActive","click .icon-trash":"removeModel"},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},setActive:function(){if(this.model.set("active",!0),"folder"===this.model.get("type")){var e=this.model.get("url");e=e.replace(/^.*[\\\/]/,""),this.parent.goToFolder(e)}},removeModel:function(e){e.stopPropagation(),"folder"===this.model.get("type")&&(this.model.set("active",!0),this.parent.deleteImage())}});return o}),define("content/category-sections/more/image-management/templates/edit-image-modal-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="image-modal" class="left-align">\r\n  <div id="aviary2" class="hidden-alt"></div>\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      <div class="clearfix section-title">\r\n        <h2 class="pull-left">Edit Image</h2>\r\n        <div class="btn-panel">\r\n          <button type="button" class="cancel-btn btn btn-other">Cancel</button>\r\n          <button type="button" class="save-btn btn btn-submit">Save Changes</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel hidden">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n      You have reached the maximum number of add-ons allowed.<br>Please remove add-ons you have selected if you wish to add more.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n  <div class="row row-spaced">\r\n    <div class="col-12">\r\n      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Delectus, alias voluptate voluptatum veniam, consectetur iste sapiente provident ad quidem quod rerum ullam sed atque aperiam quibusdam odit earum eum harum.\r\n    </div>\r\n  </div>\r\n\r\n  <div class="row row-spaced form-section">\r\n    <div class="col-12">\r\n      <div class="row row-spaced">\r\n        <div class="scroll-container auto-resize">\r\n          <div class="col-3">\r\n            <div class="row">\r\n              <div class="col-12">\r\n              <img id="f-image" class="fit-container" src="'+(null==(__t=url)?"":__t)+'" alt="'+(null==(__t=altText)?"":__t)+'"/>\r\n              </div>\r\n            </div>\r\n            <div class="row row-spaced">\r\n              <div class="col-12">\r\n                <button type="button" title="Edit image with Aviary" class="edit-btn icon icon-edit icon-btn fa-lg">\r\n                  <div class="icon-text">Edit image with Aviary</div>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-9">\r\n            <div class="row row-spaced">\r\n              <div><b>File Name:</b> '+(null==(__t=fileName)?"":__t)+"</div><br>\r\n              <div><b>File Type:</b> "+(null==(__t=type)?"":__t)+"</div><br>\r\n              <div><b>Upload Date:</b> "+(null==(__t=uploadDate)?"":__t)+'</div><br>\r\n              <div class="wrap-text"><b>Link URL:</b> <span id="f-url">'+(null==(__t=url)?"":__t)+'</span></div><br>\r\n              <div><b>Dimensions:</b> <span id="f-dimensions">'+(null==(__t=dimensions)?"":__t)+'</span></div><br>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <label for="f-title">Title</label>\r\n          <input type="text" id="f-title" name="f-title" value="'+(null==(__t=title)?"":__t)+'">\r\n        </div>\r\n      </div>\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <label for="f-altText">Alternate Text</label>\r\n          <input type="text" id="f-altText" name="f-altText" value="'+(null==(__t=altText)?"":__t)+'">\r\n        </div>\r\n      </div>\r\n      <div class="row row-spaced">\r\n        <div class="col-12">\r\n          <label for="f-description">Description</label>\r\n          <textarea class="size-2" id="f-description" name="f-description">'+(null==(__t=description)?"":__t)+'</textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id="image-mgmt-edit-modal-container"></div>\r\n</form>';return __p}}),define("content/category-sections/more/image-management/views/edit-image-modal-view",["backbone","../templates/edit-image-modal-tpl","global-events","jqueryui"],function(e,t,n){var i=e.View.extend({template:t,tagName:"div",initialize:function(){},events:{"click .cancel-btn":"closeModal","click .save-btn":"saveChanges","click .edit-btn":"aviaryImage"},updateUrl:function(){this.$image.attr("src",this.model.get("url")),this.$url.text(this.model.get("url")),this.$dimensions.text(this.model.get("dimensions"))},saveChanges:function(){this.model.set({title:this.$title.val().trim(),altText:this.$altText.val().trim(),description:this.$description.val().trim()}),n.trigger("form:save"),this.closeModal()},closeModal:function(){n.trigger("form:cancel",function(){this.parent.closeModal()}.bind(this))},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this.initAviary(),this},cacheElem:function(){this.$aviary=this.$el.find("#aviary2"),this.$title=this.$el.find("#f-title"),this.$altText=this.$el.find("#f-altText"),this.$description=this.$el.find("#f-description"),this.$image=this.$el.find("#f-image"),this.$url=this.$el.find("#f-url"),this.$dimensions=this.$el.find("#f-dimensions")},initAviary:function(){this.featherEditor=new Aviary.Feather({appendTo:"aviary2",apiKey:"88736f3311251f0f",apiVersion:3,theme:"light",maxSize:1400,tools:"all",displayImageSize:!0,onClose:function(){$("#aviary2").hide()},onError:function(e){alert(e.message)}})},aviaryImage:function(){var e=this,t="f-image",n=this.parent.getActive().get("url");this.$aviary.show(),this.featherEditor.launch({image:t,url:n,onSave:function(t,n){var i=new Image;console.log(n),i.onload=function(){e.model.set({dimensions:i.width+"x"+i.height,url:n}),e.featherEditor.close(),e.$dimensions.text(i.width+"x"+i.height)},i.src=n,e.$image.attr("src",n)}})}});return new i}),define("content/category-sections/more/image-management/views/edit-images-view",["backbone","../templates/edit-images-tpl","./image-view","./edit-image-modal-view","components/image-modal/collections/image-folder-collection","global-events","router"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"div",template:t,setActive:function(e){this.activeImage=e,e?(e.get("type").indexOf("image")>-1?(this.$editBtn.show(),this.$copyBtn.show()):(this.$editBtn.hide(),this.$copyBtn.hide()),"folder"===e.get("type")?this.$deleteBtn.hide():this.$deleteBtn.show()):(this.$editBtn.hide(),this.$deleteBtn.hide(),this.$copyBtn.hide())},getActive:function(){return this.activeImage},initialize:function(){this.initAviary(),i.parent=this},render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),e.delegateEvents(),e.cacheElem(),e.initModal(),e.setCollection(e.model.get("collection")),e.collection.url()?e.collection.fetchCustom().done(function(){e.setActive(""),e.collection.clearActive(),e.addAllImages(e.collection)}):(e.setActive(""),e.collection.clearActive(),e.addAllImages(e.collection)),e},events:{"click #delete-btn":"deleteImage","click #edit-btn":"editImage","change #upload-btn":"uploadImage","click #new-folder-btn":"createFolder","click #back-btn":"goBack"},goBack:function(){var e;e=this.model.get("hash").split("/"),e.pop(),e=e.join("/"),a.get().navigate("more/image-management/"+e,{trigger:!0})},cacheElem:function(){this.$imageGrid=this.$el.find("#image-grid"),this.$editBtn=this.$el.find("#edit-btn"),this.$deleteBtn=this.$el.find("#delete-btn"),this.$copyBtn=this.$el.find("#copy-btn"),this.$alertPanel=this.$el.find(".alert-panel"),this.$aviary=this.$el.find("#aviary"),this.$modal=this.$el.find("#image-mgmt-edit-modal-container")},createFolder:function(){var e=this;r.trigger("form:create",{cb:function(t){var n;n=t.toLowerCase().replace(/\s/g,"-"),n=[e.model.get("hash"),n].join("/"),o.findWhere({hash:n})?e.showAlertPanel():(e.hideAlertPanel(),o.add({id:Date.now(),name:t,hash:n,nested:!0}),e.collection.add({id:Date.now(),name:t,url:n,active:!1,type:"folder"}),console.log(o))},template:{title:"Create Image Folder",label:"Image Folder Name"}})},setCollection:function(e){var t=this;t.stopListening(t.collection,"add remove"),t.collection=e,t.listenTo(t.collection,"remove",function(){t.setActive("")}),t.listenTo(t.collection,"add remove",t.addAllImages.bind(t,t.collection))},addImage:function(e){var t=new n({model:e,parent:this});this.$imageGrid.append(t.render().el)},addAllImages:function(e){this.$imageGrid.empty(),e.each(this.addImage,this)},deleteImage:function(){var e=this;e.getActive()&&r.trigger("form:delete",function(){var t=e.getActive();e.collection.remove(e.getActive()),"folder"===t.get("type")&&o.remove(t),e.collection.models[0]||e.setActive("")})},initAviary:function(){this.featherEditor=new Aviary.Feather({appendTo:"aviary",apiKey:"88736f3311251f0f",apiVersion:3,theme:"light",maxSize:1400,tools:"all",displayImageSize:!0,onClose:function(){$("#aviary").hide()},onError:function(e){alert(e.message)}})},editImage:function(){this.showModal(i)},goToFolder:function(e){var t=document.URL;t=t+"/"+e,window.location.href=t},initModal:function(){this.$modal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModal:function(e){e.model=this.getActive(),this.$modal.empty(),this.$modal.append(e.render().el),this.$modal.dialog("open")},closeModal:function(){this.$modal.dialog("close")},uploadImage:function(e){var t=this,n=new FileReader,i=e.target.files[0].name;n.onload=function(e){var n=e.target.result;t.collection.add(t.hasValidImageExtension(i)?{id:Date.now(),name:i,url:n,type:"image"}:{id:Date.now(),name:i,url:n,type:"file"})},n.readAsDataURL(e.target.files[0])},hasValidImageExtension:function(e){return new RegExp("(\\.gif|\\.jpg|\\.jpeg|\\.bmp|\\.png)$","i").test(e)},showAlertPanel:function(){this.$alertPanel.show()},hideAlertPanel:function(){this.$alertPanel.hide()}});return new s}),define("content/category-sections/more/image-management/views/image-management-view",["backbone","./image-management-home-view","../templates/image-management-tpl","./image-side-menu-view","./edit-images-view","components/image-modal/collections/image-folder-collection","app-view","global-events"],function(e,t,n,i,o,r,a,s){var l=e.View.extend({tagName:"div",template:n,id:"image-management",initialize:function(){var e=this;e.$el.html(e.template()),this.listenTo(r,"add remove",this.render),s.on("route:image-management",function(t){a.changeContent(e),t?e.showCreateEdit(t):e.showHome()})},render:function(){var e=this;return e.cacheElem(),e.showMenu(),e},cacheElem:function(){this.$section=this.$el.find("#section"),this.$menu=this.$el.find("#side-menu")},replaceVisible:function(e){this.$section.empty(),this.$section.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},unmarkAll:function(){this.$menu.find(".selected").removeClass("selected")},markActive:function(){this.unmarkAll(),this.$menu.find('a[href*="'+e.history.fragment+'"]').addClass("selected")},showHome:function(){this.replaceVisible(t),this.unmarkAll()},showMenu:function(){this.$menu.append(i.render().$el.fadeIn(200))},showCreateEdit:function(e){var t,n;t=this,r.fetchCustom().done(function(){n=r.findWhere({hash:e}),n&&(t.markActive(),o.model=n,t.replaceVisible(o))})}});return new l}),define("content/category-sections/more/customer-accounts/models/customer-accounts-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-customer-accounts-info.json",defaults:{FacebookAppId:"",OrderTrackingActive:!1,ProvideStatementActive:!1,UploadedFileInfo:""}});return new t}),define("content/category-sections/more/customer-accounts/templates/customer-accounts-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Customer Accounts Management</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n		<div class="y-space-top-xs"> Use this section to view your customers\' information </div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Customer Accounts Settings</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section y-space-top-xl">\r\n		<div class="col-5">\r\n			<label for="f-facebook-label2">Website\'s Facebook App ID</label><i class="icon icon-tool-tip x-space-s" title="You can specify your Facebook app ID here."></i>\r\n			<input type="text" id="f-facebookApp" name="f-facebook-label" value="'+(null==(__t=FacebookAppId)?"":__t)+'">\r\n		</div>\r\n\r\n		<div class="col-3">\r\n			<div class="label">Order Tracking <i title="Use this setting to enable or disable order tracking for your customers\' accounts." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=OrderTrackingActive?"checked":"")?"":__t)+' type="checkbox" id="f-orderTracking-active" name="f-orderTracking-active" class="on-off-switch" />\r\n			<label for="f-orderTracking-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n\r\n		<div class="col-3">\r\n			<div class="label">Provide Statement <i title="You can use this setting to enable or disable statements from being provided for your customer accounts." class="icon icon-tool-tip x-space-s"></i></div>\r\n			<input '+(null==(__t=ProvideStatementActive?"checked":"")?"":__t)+' type="checkbox" id="f-statement-active" name="f-statement-active" class="on-off-switch" />\r\n			<label for="f-statement-active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n		</div>\r\n\r\n 	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced panel">\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="panel-title">Customer Accounts List</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row y-space-top-xl y-space-bottom-l">\r\n		<div class="col-12">\r\n			<div class="btn-panel pull-left">\r\n				<button type="button" class="fileUpload btn btn-Boostrap btn-primary">\r\n					<span><i class="icon icon-add icon-lg"></i>  UPLOAD NEW LIST</span>\r\n					<input type="file" class="upload" />\r\n				</button>\r\n				<button id="download-list-btn" type="button" class="btn btn-submit ">\r\n					<i class="icon icon-export"></i>DOWNLOAD LIST\r\n				</button> \r\n				<button type="button" id="sample-file-btn" class="btn btn-other">SAMPLE FILE</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n	<div class="row x-space-m">\r\n	   <div class="col-12 y-space-bottom-l">\r\n			<p>Upload File should contain the following 3 fields: </p>\r\n			<p> - First Name </p>\r\n			<p> - Last Name </p>\r\n			<p> - Email </p>\r\n\r\n			<p> Optional Fields in the file: </p>\r\n			<p> - Address1 </p>\r\n			<p> - Address2 </p>\r\n			<p> - City </p>\r\n			<p> - State </p>\r\n			<p> - Zip code </p>\r\n			<p> - Country  </p>\r\n			<p> - Phone  </p>\r\n			<p> - Opt-in status (Yes/No)\r\n	   </div>\r\n	</div>\r\n</div>';return __p}}),define("content/category-sections/more/customer-accounts/views/customer-accounts-view",["backbone","../models/customer-accounts-model","../templates/customer-accounts-tpl","global-events","jquery","jqueryval"],function(e,t,n,i){var o=e.View.extend({tagName:"form",id:"f-customer-accounts-info",template:n,render:function(){var e=this;return t.fetchCustom().done(function(){e.$el.html(e.template(t.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyToolTips()}),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel"},cacheElem:function(){this.$FacebookAppID=this.$el.find("#f-facebookApp"),this.$OrderTracking=this.$el.find("#f-orderTracking-active"),this.$Statement=this.$el.find("#f-statement-active"),this.$tip=this.$el.find(".tooltip-change")},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},handleSave:function(){t.set({FacebookAppId:this.$FacebookAppID.val().trim(),OrderTrackingActive:this.$OrderTracking.is(":checked"),ProvideStatementActive:this.$Statement.is(":checked")}),i.trigger("form:save",this.$tip)},handleCancel:function(){i.trigger("form:reset",this.render.bind(this))}});return new o}),define("content/category-sections/more/esat-administration/models/esat-administration-Home-model",["backbone"],function(e){var t=e.Model.extend({defaults:{HomePageContent:""}});return new t}),define("content/category-sections/more/esat-administration/collections/esat-admininistration-Home-collection",["backbone","../models/esat-administration-Home-model"],function(e,t){var n=e.Collection.extend({model:t});return new n}),define("content/category-sections/more/esat-administration/models/esat-administration-CustomHtmlPage-model",["backbone"],function(e){var t=e.Model.extend({url:"mock/user-esat-administration-customHtmlPage.json",defaults:{id:null,CustomHTMLPageName:"",CustomHTMLPageActive:!0,CustomHTMLPageURL:"",CustomHTMLPageMetaTags:"",CustomHTMLPageContent:""}});return t}),define("content/category-sections/more/esat-administration/collections/esat-admininistration-CustomHtmlPage-collection",["backbone","../models/esat-administration-CustomHtmlPage-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-esat-administration-customHtmlPage.json",model:t});return new n}),define("content/category-sections/more/esat-administration/models/esat-administration-MegaMenu-model",["backbone"],function(e){var t=e.Model.extend({url:"mock/user-esat-megamenu.json",defaults:{id:null,MegaMenuName:"",MegaMenuActive:!0,MegaMenuAssociatedSection:"",MegaMenuBlockTitle:"",MegaMenuBlockContent:""}});return t}),define("content/category-sections/more/esat-administration/collections/esat-admininistration-MegaMenu-collection",["backbone","../models/esat-administration-MegaMenu-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-esat-megamenu.json",model:t});return new n}),define("content/category-sections/more/esat-administration/models/esat-administration-CreateEditPermissions-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-esatAdmin-menu-permissions.json",defaults:{id:null,UserGroups:"",MenuEntries:[]}});return t}),define("content/category-sections/more/esat-administration/collections/esat-admininistration-Permissions-collection",["backbone","../models/esat-administration-CreateEditPermissions-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-esatAdmin-menu-permissions.json",model:t});return new n}),define("content/category-sections/more/esat-administration/templates/esat-administration-home-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">eSAT Administration</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n		<div class="y-space-top-xs">This section is used to manage various pieces of eSAT. You can configure the content on the home page, build new custom content pages, configure the mega menu content, and change permissions to control who has access to what pages of eSAT.</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row row-spaced panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div id="tabs">\r\n	<ul>\r\n		<li class="right-pad-tabs"><a class="esat-management-edit-tab" href="#homepage-Content">Home Page Content</a></li>\r\n		<li class="right-pad-tabs"><a class="esat-management-edit-tab" href="#custom-HtmlPages">Custom HTML Pages</a></li>\r\n		<li class="right-pad-tabs"><a class="esat-management-edit-tab" href="#Mega-menu-blocks">Mega Menu Content</a></li>\r\n		<li class="right-pad-tabs"><a class="esat-management-edit-tab" href="#Permissions" class="right-pad-tabs">Permissions</a></li>\r\n	</ul>\r\n\r\n\r\n	<div id="homepage-Content">\r\n	    <div class="row">\r\n	        <div class="col-12">\r\n	           <div class="panel-title">eSAT Home Page Content </div>\r\n	        </div>\r\n	    </div>\r\n\r\n	    <div id="tiny-mce-container" class="row row-spaced panel form-section">\r\n			<div class="row">\r\n				<div class="col-12">     \r\n					<textarea id="f-home-page-content" class="size-4 tinymce y-space-s" name="f-home-page-content" disabled>'+(null==(__t=HomePageContent)?"":__t)+'</textarea>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>  <!-- HOMEPAGE CONTENT ENDS HERE -->\r\n\r\n	<div id="custom-HtmlPages">\r\n	    <div class="row">\r\n	        <div class="col-12">\r\n	           <div class="panel-title y-space-top-m">eSAT HTML Pages<button type="button" id="add-new-CustomHTMLPage-btn" class="btn btn-submit pull-right y-space-top-nm"><i class="icon icon-add"></i>New Page</button></div>\r\n			</div>\r\n		</div>\r\n\r\n      	<div class="row row-spaced"> \r\n			<div class="col-12 y-space-top-l">\r\n				<table class="table alternate">\r\n					<thead>\r\n						<tr class="highlighted">\r\n							<th class="col-6 left-align indented-l">Page Name</th>\r\n							<th class="col-2 left-align">Status</th>\r\n							<th class="col-2 left-align">Edit</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="CustomHTMLPages-List"></tbody>\r\n				</table>\r\n			</div>		\r\n		</div>\r\n	    \r\n	    <div id="CustomHtmlPage-modal"></div>\r\n	</div> <!-- CUSTOM HTML PAGES ENDS HERE -->\r\n\r\n	<div id="Mega-menu-blocks">\r\n	    <div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">Mega Menu Content</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced"> \r\n			<div class="col-12 y-space-top-l">\r\n				<table class="table alternate">	\r\n					<thead>\r\n						<tr class="highlighted">\r\n							<th class="col-5 left-align indented-l">Menu Main Sections</th>\r\n							<th class="col-1 left-align">Edit</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="MegaMenuPages-List"></tbody>\r\n				</table>\r\n			</div>		\r\n		</div>\r\n\r\n		<div id="MegaMenuPage-modal"></div>\r\n	</div> <!-- MEGA MENU CONTENT-->\r\n\r\n	<div id="Permissions">\r\n		<div class="row">\r\n			<div class="col-12">\r\n				<div class="panel-title">eSat Permissions/Access Levels</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row row-spaced"> \r\n			<div class="col-12 y-space-top-l">\r\n				<table class="table alternate">\r\n					<thead>\r\n						<tr class="highlighted">\r\n							<th class="col-5 left-align indented-l">User Groups</th>\r\n							<th class="col-1 left-align">Edit</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody id="Permissions-List"></tbody>\r\n				</table>\r\n			</div>		\r\n		</div>\r\n	    \r\n		<div id="Permissions-modal"></div>\r\n	</div> <!-- PERMISSIONS -->\r\n\r\n</div> <!-- TABS LINKS ENDS HERE-->\r\n\r\n';return __p}}),define("content/category-sections/more/esat-administration/templates/esat-administration-createEdit-customHTMLPage-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="row row-spaced form-section x-space-s left-align">\r\n <div class="row row-spaced form-section">\r\n        <div class="clearfix section-title">\r\n            <h2 id="saved-DisplayMoved" class="pull-left left-pad-xs">'+(null==(__t=id?"Edit ":"Add New ")?"":__t)+'eSAT Custom HTML Page</h2>\r\n           <div role="tooltip" data-parent="saved-DisplayMoved" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n\r\n            <div class="btn-panel">\r\n                        <button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right"> Save</button>\r\n                        ',id&&(__p+='\r\n			                <button type="button" id="delete-btn" class="btn btn-cancel btn-panel pull-right ">Delete</button>\r\n		                '),__p+='\r\n		                <button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n\r\n\r\n            </div>\r\n        </div>\r\n\r\n        </div>\r\n\r\n\r\n  <div class="row row-spaced form-section">\r\n\r\n	  <div class="col-12 form-section" >\r\n\r\n			<h4 class="pull-left">Add or edit content of the eSAT page below.</h4>\r\n\r\n					  </div>\r\n				</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<form id="customhtmlpage-form">\r\n <div class="row row-spaced">\r\n               \r\n\r\n  		<div class="col-2 form-section">\r\n			<label for="customHtmlPage-status"> Status </label>\r\n			\r\n\r\n			<input '+(null==(__t=CustomHTMLPageActive?"checked":"")?"":__t)+' type="checkbox" id="f-create-edit-page-Active" name="f-create-edit-page-Active" class="on-off-switch"/>\r\n\r\n			<label for="f-create-edit-page-Active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n         </div>\r\n          \r\n\r\n          <div class="col-5 form-section"> \r\n	    	<label for="f-page-Name"> Page Name</label><i title="Edit or Create a Page Name" class="icon icon-tool-tip x-space-s"></i>\r\n			\r\n\r\n			<input id="f-customHTML-page-name" name="f-customHTML-page-name" type="text" value="'+(null==(__t=CustomHTMLPageName)?"":__t)+'" />		\r\n		</div>\r\n\r\n		<div class="col-5 form-section">\r\n		   <label for="f-customHTML-page-url"> Page URL</label><i title="Edit or Create a Page URL" class="icon icon-tool-tip x-space-s"></i>\r\n			<input id="f-customHTML-page-url" name="f-customHTML-page-url" type="text" value="'+(null==(__t=CustomHTMLPageURL)?"":__t)+'" />		\r\n		</div>\r\n\r\n\r\n\r\n\r\n</div> <!-- End Status Col here -->\r\n</form>\r\n\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-5 pull-left">\r\n			<label for="f-customHTML-page-content" class="pull-left"> Meta Tags</label>\r\n			<i title="Edit or Create Meta Tags(SEO)" class="icon icon-tool-tip pull-left" style="position: relative;"></i>\r\n		</div>\r\n		<div class="col-12" > \r\n	        <textarea id="f-customHTMLMetaTags" name="f-customHTMLMetaTags" class="size-2" >'+(null==(__t=CustomHTMLPageMetaTags)?"":__t)+'</textarea>\r\n		</div>\r\n	</div>  <!-- End Meta Tags here -->\r\n\r\n\r\n<div class="row row-spaced form-section">\r\n			<div class="col-5 pull-left">\r\n				<label for="f-customHTML-page-content" class="pull-left"> Create/Edit the Page Content </label>\r\n				<i title="Edit or Create a Page Content" class="icon icon-tool-tip pull-left" style="position: relative;"></i>\r\n			</div>\r\n\r\n	</div>\r\n\r\n<div class="row form-section" >\r\n\r\n		<div class="col-12">\r\n\r\n			<textarea name="f-customHTML-page-content" id="f-customHTML-page-content" class="size-2 tinymce" >'+(null==(__t=CustomHTMLPageContent)?"":__t)+"</textarea>\r\n \r\n	     </div>\r\n\r\n	</div>\r\n\r\n</div>";
return __p}}),define("content/category-sections/more/esat-administration/views/esat-administration-createEdit-CustomHTML-page-view",["backbone","../collections/esat-admininistration-Home-collection","../collections/esat-admininistration-CustomHtmlPage-collection","../templates/esat-administration-createEdit-customHTMLPage-tpl","../models/esat-administration-CustomHtmlPage-model","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"CustomHTMLPageModal",template:i,initialize:function(){},render:function(){var e=this;return this.viewModel=this.model.toJSON(),this.setElement(this.template(this.model.toJSON())),this.$el.html(this.template(this.viewModel)),this.delegateEvents(),this.cacheElem(),this.applyTinymce(),this.validateForm(),e},events:{"click #cancel-btn":"closeModal","click #delete-btn":"handleDeleteBtn","click #save-btn":"handleSave"},cacheElem:function(){this.$CustomHTMLPageActive=this.$el.find("#f-create-edit-page-Active"),this.$CustomHTMLPageName=this.$el.find("#f-customHTML-page-name"),this.$CustomHTMLPageUrl=this.$el.find("#f-customHTML-page-url"),this.$CustomHTMLPageMetaTags=this.$el.find("#f-customHTMLMetaTags"),this.$tip=this.$el.find(".tooltip-change"),this.$createEditForm=this.$el.find("#customhtmlpage-form")},handleDeleteBtn:function(){var e=this;r.trigger("form:delete",n.remove.bind(n,e.model)),e.$el.parent().dialog("close"),setTimeout(function(){e.parent.handleCustomHTMLTableUpdate()},1500)},handleSave:function(){var e=this;e.$createEditForm.valid()&&(console.log("If the two input fields are empty, a console log should not appear"),e.model.set({CustomHTMLPageName:e.$CustomHTMLPageName.val().trim(),CustomHTMLPageActive:e.$CustomHTMLPageActive.is(":checked"),CustomHTMLPageURL:e.$CustomHTMLPageUrl.val().trim(),CustomHTMLPageMetaTags:e.$CustomHTMLPageMetaTags.val().trim(),CustomHTMLPageContent:a.activeEditor.getContent()}),n.get(e.model)||(e.model.set("id",Date.now()),n.add(e.model)),r.trigger("form:save",e.$tip),e.closeModal())},handleImageUpload:function(){var e;r.trigger("form:image-upload",{cb:function(t){e=t,newImg='<img src="'+e+'">',editor.selection.setContent(newImg)},active:e,name:"Custom HTML Content"})},applyTinymce:function(){setTimeout(function(){a.remove(),a.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;r.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Custom HTML ADD/EDIT"})}}),e.on("change",function(){r.trigger("form:editing")})},selector:"textarea.tinymce",width:"99%",height:200,toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},closeModal:function(){this.parent.handleCustomHTMLTableUpdate(),this.$el.parent().dialog("close")},validateForm:function(){var e=this;e.$createEditForm.validate({rules:{"f-customHTML-page-name":{required:!0},"f-customHTML-page-url":{required:!0}}})}});return new s}),define("content/category-sections/more/esat-administration/templates/esat-administration-CustomHTMLPages-Tab-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n    <td class="left-align indented-l">'+(null==(__t=CustomHTMLPageName)?"":__t)+'</td>\r\n    <td class="left-align hide-overflow">  \r\n        <div class="centered-content-container">\r\n            <input '+(null==(__t=CustomHTMLPageActive?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="custom-html-active-"+id)?"":__t)+'" name="'+(null==(__t="custom-html-active-"+id)?"":__t)+'" class="on-off-switch customHTMLActive-switch" />\r\n            <label for="'+(null==(__t="custom-html-active-"+id)?"":__t)+'" class="on-off-switch-label">\r\n                <div class="on-off-switch-state">on</div>\r\n            </label>\r\n        </div>\r\n    </td> \r\n    <td class="left-align"><button type="button" class="icon icon-btn icon-2x icon-edit"></button></td> \r\n</tr>';return __p}}),define("content/category-sections/more/esat-administration/views/esat-administration-CustomHTMLRend-view",["backbone","../collections/esat-admininistration-Home-collection","../models/esat-administration-CustomHtmlPage-model","./esat-administration-createEdit-CustomHTML-page-view","../templates/esat-administration-CustomHTMLPages-Tab-tpl","global-events","jquery","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:o,initialize:function(e){this.parent=e.parent,i.parent=this},render:function(){return this.visibleModel=this.model,this.renderVisible(this.model),this},renderVisible:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this.cacheElem(),this},events:{"click .icon-edit":"handleEdit","change .customHTMLActive-switch":"handleCustomHTMLSave"},cacheElem:function(){this.$CustomHTMLPageActiveStatus=this.$el.find(".customHTMLActive-switch")},handleEdit:function(){this.parent.handleHTMLEdit(this.model)},handleCustomHTMLTableUpdate:function(){this.parent.handleCustomHTMLTableResequence()},handleCustomHTMLSave:function(){this.model.set({CustomHTMLPageActive:this.$CustomHTMLPageActiveStatus.is(":checked")})}});return r}),define("content/category-sections/more/esat-administration/templates/esat-administration-MegaMenu-Tab-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=MegaMenuName)?"":__t)+'</td>\r\n   <td class="left-align"> <button type="button" class="icon icon-btn icon-2x icon-edit"></button>  </td>   			\r\n</tr>';return __p}}),define("content/category-sections/more/esat-administration/views/esat-administration-MegaMenuRend-view",["backbone","../collections/esat-admininistration-MegaMenu-collection","../models/esat-administration-MegaMenu-model","../templates/esat-administration-MegaMenu-Tab-tpl","global-events","jquery","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:i,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-edit":"handleEdit"},handleEdit:function(){this.parent.handleMegaMenuEdit(this.model)}});return o}),define("content/category-sections/more/esat-administration/templates/esat-administration-Permissions-Tab-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr>\r\n	<td class="left-align indented-l">'+(null==(__t=UserGroups)?"":__t)+'</td>\r\n   <td class="left-align"> <button type="button" class="icon icon-btn icon-2x icon-edit"></button>  </td>   			\r\n</tr>';return __p}}),define("content/category-sections/more/esat-administration/views/esat-administration-Permissions-Rend-view",["backbone","../collections/esat-admininistration-Permissions-collection","../models/esat-administration-CreateEditPermissions-model","../templates/esat-administration-Permissions-Tab-tpl","global-events","jquery","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:i,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-edit":"handleEdit"},handleEdit:function(){this.parent.handlePermissionsEdit(this.model)}});return o}),define("content/category-sections/more/esat-administration/templates/esat-administration-createEdit-MegaMenu-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced x-space-s left-align">\r\n    <div class="row form-section">\r\n    	<div class="col-12">\r\n        	<div class="clearfix section-title">\r\n            	<h2 class="pull-left" >Edit Mega Menu Content</h2>\r\n		    	<button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n            	<button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right"> Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n    		</div>\r\n      	</div>\r\n    </div>\r\n\r\n  	<div class="row">\r\n		<div class="col-12" >\r\n			<h4 class="pull-left">Edit Content of HTML block in eSAT mega menu</h4>		 \r\n		</div>\r\n	</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n <div class="row row-spaced form-section">\r\n\r\n       <div class="col-2 form-section">\r\n			<div class="label"> Status </div>\r\n			\r\n\r\n			<input '+(null==(__t=MegaMenuActive?"checked":"")?"":__t)+' type="checkbox" id="f-create-edit-MegaMenu-Active" name="f-create-edit-MegaMenu-Active" class="on-off-switch"/>\r\n\r\n			<label for="f-create-edit-MegaMenu-Active" class="on-off-switch-label">\r\n			    <div class="on-off-switch-state">on</div>\r\n			</label>\r\n         </div>\r\n        <div class="col-5 form-section"> \r\n	    	<label for="f-AssociatedMenu-name"> Associated Menu Section</label>\r\n\r\n			<input id="f-AssociatedMenu-name" name="f-AssociatedMenu-name" type="text" value="'+(null==(__t=MegaMenuAssociatedSection)?"":__t)+'" disabled />\r\n		  </div>\r\n\r\n          \r\n	    <div class="col-5 form-section">\r\n	        <label for="f-blocktitle-name"> Block Title in the Menu <i title="???" class="icon icon-tool-tip"></i>\r\n			</label>\r\n\r\n            <input id="f-blocktitle-name" name="f-blocktitle-name" type="text" value="'+(null==(__t=MegaMenuBlockTitle)?"":__t)+'" />	\r\n\r\n     </div>\r\n\r\n\r\n	</div>		\r\n\r\n\r\n<div class="row row-spaced">\r\n			<div class="col-5 pull-left form-section">\r\n				<label for="f-megaMenu-page-content" class="pull-left"> Edit HTML Block </label>\r\n				<i title="Edit or Create a Page Content" class="icon icon-tool-tip pull-left" style="position: relative;"></i>\r\n			</div>\r\n	</div>\r\n\r\n<div class="row form-section" >\r\n		<div class="col-12 form-section">\r\n\r\n			<textarea name="f-megaMenu-page-content" id="f-megaMenu-page-content" class="size-2 tinymce" >'+(null==(__t=MegaMenuBlockContent)?"":__t)+"</textarea>\r\n \r\n	     </div>\r\n\r\n	</div>\r\n\r\n\r\n</div> <!-- Mega Memu ends here -->\r\n";return __p}}),define("content/category-sections/more/esat-administration/views/esat-administration-createEdit-MegaMenu-page-view",["backbone","../collections/esat-admininistration-MegaMenu-collection","../templates/esat-administration-createEdit-MegaMenu-tpl","../models/esat-administration-MegaMenu-model","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r){var a=e.View.extend({tagName:"form",id:"MegaMenuPageModal",template:n,initialize:function(){},render:function(){this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.delegateEvents(),this.cacheElem(),this.applyTinymce();var e=this;return e},events:{"click #cancel-btn":"closeModal","click #save-btn":"handleSave"},cacheElem:function(){this.$MegaMenuActiveStatus=this.$el.find("#f-create-edit-MegaMenu-Active"),this.$MegaMenuBlockTitle=this.$el.find("#f-blocktitle-name"),this.$createEditMegaMenuForm=this.$el.find("#MegaMenu-modal-val"),this.$tip=this.$el.find(".tooltip-change")},handleImageUpload:function(){var e;o.trigger("form:image-upload",{cb:function(t){e=t,newImg='<img src="'+e+'">',editor.selection.setContent(newImg)},active:e,name:"Mega Menu Content"})},handleSave:function(){var e=this;e.model.set({MegaMenuBlockContent:r.activeEditor.getContent(),MegaMenuActive:e.$MegaMenuActiveStatus.is(":checked"),MegaMenuBlockTitle:e.$MegaMenuBlockTitle.val().trim()}),o.trigger("form:save",e.$tip),e.closeModal()},applyTinymce:function(){setTimeout(function(){r.remove(),r.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;o.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Mega Menu ADD/EDIT"})}}),e.on("change",function(){o.trigger("form:editing")})},selector:"textarea.tinymce",width:"100%",height:300,toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},closeModal:function(){this.$el.parent().dialog("close")}});return new a}),define("content/category-sections/more/esat-administration/templates/esat-administration-createEdit-Permissions-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=' <form name="f-permissions-menu-names" id="f-edit-permissions-menu-page" class="left-align">\r\n    <div class="row row-spaced x-space-s left-align">\r\n    \r\n        <div class="row form-section">\r\n            <div class="col-12">\r\n                <div class="section-title">\r\n                    <h2 id="savedDisplayMoved"class="pull-left">Edit eSAT User Group Access Level</h2>\r\n                    <div role="tooltip" data-parent="savedDisplayMoved" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n                    <button type="button" id="cancel-btn" class="btn btn-other btn-panel pull-right">Cancel</button>\r\n                    <button type="button" id="save-btn" class="btn btn-submit btn-panel pull-right"> Save</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Hidden Alert Message -->\r\n        <div class="row row-spaced panel alert-panel">\r\n            <div class="col-12">\r\n                <div class="row">\r\n                    <div class="col-1">\r\n                        <div class="icon icon-3x icon-warning"></div>\r\n                    </div>\r\n                    <div class="col-11 alert-text">\r\n                        This is a generic placeholder for error messages in eSAT. <br>\r\n                        In the live app, this will be a real message and will be hidden by default.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- Hidden Alert Message -->\r\n\r\n        <div class="row row-spaced">\r\n            <div class="col-12">\r\n                Add or edit permissions and access level for eSAT user groups. Check or uncheck different sections<br> to assign or remove access level for this user group.\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced form-section">\r\n            <div class="col-6">\r\n                <div class="label pull-left"> User Group Name</div>\r\n                <input id="f-UserGroup-name" name="-UserGroup-name" type="text" value="'+(null==(__t=UserGroups)?"":__t)+'" disabled>   \r\n            </div>\r\n        </div>\r\n\r\n        <div class="row row-spaced"> \r\n            <div class="col-12">\r\n                <table class="table alternate">\r\n                    <thead>\r\n                        <tr class="highlighted">\r\n                            <th class="col-4">Permissions</th>\r\n                            <th class="col-8 left-indent left-align">eSAT Menu Sections</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody id="Permissions-MenuNames-List"></tbody>\r\n                </table>\r\n            </div>    \r\n        </div>\r\n\r\n    </div>  <!-- Template Ends Here -->\r\n</form>';return __p}}),define("content/category-sections/more/esat-administration/templates/esat-administration-createEdit-PermissionsTABLE-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<tr>\r\n	<td>   \r\n      <input "+(null==(__t=PermissionsActiveStatus?"checked":"")?"":__t)+' type="checkbox" id="'+(null==(__t="permissions-active-"+id)?"":__t)+'" name="'+(null==(__t="permissions-active-"+id)?"":__t)+'" class="PermissionsActiveCheck">\r\n	 </td>\r\n   <td class="left-align">'+(null==(__t=MenuName)?"":__t)+" </td>   			\r\n</tr>";return __p}}),define("content/category-sections/more/esat-administration/views/esat-administration-createEdit-permissions-Table-view",["backbone","../collections/esat-admininistration-Permissions-collection","../models/esat-administration-CreateEditPermissions-model","../templates/esat-administration-createEdit-PermissionsTABLE-tpl","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({template:i,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},cacheElem:function(){this.$PermissionsActiveCheckStatus=this.$el.find(".PermissionsActiveCheck"),this.$tip=this.$el.find(".tooltip-change")},events:{},handleSaveRedirect:function(e){e.model=this.model,this.parent.handleSave(e)}});return o}),define("content/category-sections/more/esat-administration/views/esat-administration-createEdit-Permissions-page-view",["backbone","../collections/esat-admininistration-Permissions-collection","../templates/esat-administration-createEdit-Permissions-tpl","../models/esat-administration-CreateEditPermissions-model","../views/esat-administration-createEdit-permissions-Table-view","content/shared/collections/blank-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i,o,r,a){var s=e.View.extend({tagName:"form",id:"PermissionsPageModal",template:n,permissionsTypeCollection:null,initialize:function(){var e=this;o.parent=e},render:function(){var e=this;return e.CreateEditPermissionTableView&&e.CreateEditPermissionTableView.remove(),e.CreateEditPermissionTableView=new o({collection:new r(e.model.get("MenuEntries"))}),e.viewModel=e.model.toJSON(),e.$el.html(e.template(e.viewModel)),e.delegateEvents(),e.cacheElem(),e.EsatAdminPermissionsCollection=new r(e.model.get("MenuEntries")),t.fetchCustom().done(function(){e.addAllMenuNames()}),e},events:{"click #cancel-btn":"closeModal","change .PermissionsActiveCheck":"handleSave"},cacheElem:function(){this.$PermissionsMenuNamesList=this.$el.find("#Permissions-MenuNames-List"),this.$PermissionsActiveCheckStatus=this.$el.find(".PermissionsActiveCheck"),this.$tip=this.$el.find(".tooltip-change")},handleSave:function(){var e=this;e.model.set({MenuEntries:this.CreateEditPermissionTableView.collection.toJSON()}),a.trigger("form:save",this.$tip)},addMenuName:function(e){var t=new o({model:e,parent:this});this.$PermissionsMenuNamesList.append(t.render().el)},addAllMenuNames:function(){this.$PermissionsMenuNamesList.empty(),this.EsatAdminPermissionsCollection.each(this.addMenuName,this)},closeModal:function(){this.$el.parent().dialog("close")}});return new s}),define("content/category-sections/more/esat-administration/views/esat-administration-home-view",["backbone","../collections/esat-admininistration-Home-collection","../collections/esat-admininistration-CustomHtmlPage-collection","../collections/esat-admininistration-MegaMenu-collection","../models/esat-administration-CreateEditPermissions-model","../models/esat-administration-Home-model","../models/esat-administration-CustomHtmlPage-model","../models/esat-administration-MegaMenu-model","../collections/esat-admininistration-Permissions-collection","../templates/esat-administration-home-tpl","./esat-administration-CustomHTMLRend-view","./esat-administration-MegaMenuRend-view","./esat-administration-Permissions-Rend-view","./esat-administration-createEdit-CustomHTML-page-view","./esat-administration-createEdit-MegaMenu-page-view","./esat-administration-createEdit-Permissions-page-view","global-events","tinymce","jqueryui","jqueryval"],function(e,t,n,i,o,r,a,s,l,c,d,u,h,p,f,v,m,g){var b=e.View.extend({tagName:"form",id:"m-eSat-management",template:c,render:function(){var e=this;return e.$el.html(e.template(r.toJSON())),e.delegateEvents(),e.cacheElem(),e.applyTabs(),e.applyTinymce(),n.fetchCustom().done(function(){e.addAllCustomHTMLPages(),e.setModalCustomHTMLPage()}),i.fetchCustom().done(function(){e.addAllMegaMenuPages(),e.setModalMegaMenu()}),l.fetchCustom().done(function(){e.addAllPermissionsGroups(),e.setModalPermissions()}),e},events:{"click #save-btn":"handleSave","click #cancel-btn":"handleCancel","click #add-new-CustomHTMLPage-btn":"handleCreateNewCustomHTMLPage"},cacheElem:function(){this.$modalCustomHTML=this.$el.find("#CustomHtmlPage-modal"),this.$modalMegaMenu=this.$el.find("#MegaMenuPage-modal"),this.$modalPermissions=this.$el.find("#Permissions-modal"),this.$HomePageContent=this.$el.find("#f-home-page-content"),this.$tip=this.$el.find(".tooltip-change"),this.$CustomHTMLPageList=this.$el.find("#CustomHTMLPages-List"),this.$CustomHTMLPageActiveStatus=this.$el.find(".customHTMLActive-switch"),this.$MegaMenuList=this.$el.find("#MegaMenuPages-List"),this.$PermissionsList=this.$el.find("#Permissions-List")},handleSave:function(){var e=this;r.set({HomePageContent:g.activeEditor.getContent()}),m.trigger("form:save",e.$tip)},handleCancel:function(){m.trigger("modal:custom",{template:{title:"Reset Settings",text:"Are you sure? This will reset all applicable fields to their default values."},confirmFn:function(){g.activeEditor.setContent(r.get("HomePageContent"))}})},handleCreateNewCustomHTMLPage:function(){this.showModalCustomHTMLPage(p,new a)},setModalCustomHTMLPage:function(){this.$modalCustomHTML.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModalCustomHTMLPage:function(e,t){e.model=t,this.$modalCustomHTML.empty(),this.$modalCustomHTML.append(e.render().el),this.$modalCustomHTML.dialog("open")},handleHTMLEdit:function(e){this.showModalCustomHTMLPage(p,e)},handleCustomHTMLTableResequence:function(){this.addAllCustomHTMLPages()},addCustomHTMLPage:function(e){var t=new d({model:e,parent:this});this.$CustomHTMLPageList.append(t.render().el)},addAllCustomHTMLPages:function(){this.$CustomHTMLPageList.empty(),n.each(this.addCustomHTMLPage,this)},handleMegaMenuEdit:function(e){this.showModalMegaMenu(f,e)},setModalMegaMenu:function(){this.$modalMegaMenu.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModalMegaMenu:function(e,t){e.model=t,this.$modalMegaMenu.empty(),this.$modalMegaMenu.append(e.render().el),this.$modalMegaMenu.dialog("open")},addMegaMenuPage:function(e){var t=new u({model:e,parent:this});this.$MegaMenuList.append(t.render().el)},addAllMegaMenuPages:function(){this.$MegaMenuList.empty(),i.each(this.addMegaMenuPage,this)},handlePermissionsEdit:function(e){this.showPermissionsModal(v,e)},setModalPermissions:function(){this.$modalPermissions.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showPermissionsModal:function(e,t){e.model=t,this.$modalPermissions.empty(),this.$modalPermissions.append(e.render().el),this.$modalPermissions.dialog("open")},addPermissionsGroup:function(e){var t=new h({model:e,parent:this});this.$PermissionsList.append(t.render().el)},addAllPermissionsGroups:function(){this.$PermissionsList.empty(),l.each(this.addPermissionsGroup,this)},handleImageUpload:function(){var e;m.trigger("form:image-upload",{cb:function(t){e=t,newImg='<img src="'+e+'">',editor.selection.setContent(newImg)},active:e,name:"Home Page Content"})},applyTabs:function(){this.$el.find("#tabs").tabs()},applyTinymce:function(){setTimeout(function(){g.remove(),g.init({setup:function(e){e.addButton("myimagebutton",{title:"Insert image",icon:"image",onclick:function(){e.focus();var t;m.trigger("form:image-upload",{cb:function(n){t=n,newImg='<img src="'+t+'">',e.selection.setContent(newImg)},active:t,name:"Custom HTML"})}}),e.on("change",function(){m.trigger("form:editing")})},selector:"textarea.tinymce",height:300,toolbar:"undo redo | styleselect | bold underline italic | fontselect fontsizeselect forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | myimagebutton | code",plugins:["code textcolor"],force_br_newlines:!0,force_p_newlines:!1})},0)},validateTinymce:function(){return g.activeEditor.getContent()?!0:($("#tiny-mce-container").addClass("error").append('<label id="f-page-main-content-error" class="error" for="f-page-main-content">This field is required.</label>'),!1)}});return new b}),define("content/category-sections/more/orders-exceptions/templates/orders-exclusions-home-tpl",[],function(){return function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Order Blocks/Exceptions</h2>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Use this tool to manage holiday closures for your website. Select the dates when your shop will be closed or will not accept delivery requests on your website. These dates will not appear as availbale delivery dates, but your website will still be able to accept orders for other days.\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row-spaced panel">\r\n    \r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="panel-title clearfix">\r\n				<div class="pull-left">Available Delivery Dates Preview</div>\r\n			</div>		\r\n		</div>\r\n		<div class="row">\r\n			<div class="col-12 y-space-top-s x-space-s">\r\n				<div> Available delivery dates are showing with white background</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Calendar Here -->    \r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div id="OrdersExclusions-Available-dates" class="left-offset-m"></div>\r\n		</div>\r\n	</div>\r\n 	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class=" section-title">\r\n				<h3 class="pull-left">Blocked Delivery Dates </h3>\r\n				<button type="button" id="add-new-BlockedDeliveryDate-btn" class="btn btn-submit pull-right"><i class="icon icon-add"></i>ADD NEW CLOSURE</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced"> \r\n		<div class="col-12 y-space-top-l">\r\n			<table id="Blocked-Delivery-Table" class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-3 left-align indented-l">Closure Reason</th>\r\n						<th class="col-3 left-align">Start Blocks On</th>\r\n						<th class="col-3 left-align">Resume Orders On</th>\r\n						<th class="col-2 left-align">Repeats Yearly</th>\r\n						<th class="col-1 left-align">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="BlockedDeliveryDates-List"></tbody>\r\n			</table>\r\n		</div>		\r\n	</div>\r\n\r\n 	<div class="row row-spaced">\r\n		<div class="col-12 y-space-top-xl">\r\n		<div class=" section-title">\r\n			   <h3 class="pull-left">Exceptions Delivery Dates </h3>\r\n              <button type="button" id="add-new-Exception-btn" class="btn btn-submit pull-right"><i class="icon icon-add"></i>ADD NEW EXCEPTION</button>\r\n		  </div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			Use this section to add specific days exception to the days of the week you are normally closed and not available for delivery.\r\n			Your website will take deliveries on these exception dates.\r\n		</div>\r\n	</div>\r\n\r\n\r\n    <!-- Exceptions Delivery Dates Table -->\r\n	<div class="row row-spaced"> \r\n		  <div class="col-12 y-space-top-l">\r\n			<table id="Exceptions-Delivery-Table" class="table alternate">\r\n				<thead>\r\n					<tr>\r\n						<th class="col-7 left-align indented-l">Exception Reason</th>\r\n						<th class="col-4 left-align">Exception Date</th>\r\n						<th class="col-1 left-align">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="ExceptionsDeliveryDates-List"></tbody>\r\n			</table>\r\n		</div>		\r\n	</div>\r\n</div>\r\n\r\n<div id="create-new-Exception-deliveryDateModal"></div>  <!--Create New Exceptiion Modal -->\r\n\r\n<div id="create-new-closure-delivery-BlockModal"></div> <!-- Create New Closure Delivery Block Modal -->';return __p}}),define("content/category-sections/more/orders-exceptions/models/orders-exclusionsBlockedDeliveryDates-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,closureReason:"",startDate:"",resumeDate:"",repeatsYearly:""}});return t}),define("content/category-sections/more/orders-exceptions/collections/ordersExclusions-blockedDeliveryDatesCollection",["backbone","../models/orders-exclusionsBlockedDeliveryDates-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-orderBlockedExclusions-Deliverydates.json",model:t});return new n}),define("content/category-sections/more/orders-exceptions/templates/orders-exclusions-blocked-delivery-dates-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<tr> \r\n	<td class="left-align indented-l">\r\n	   '+(null==(__t=closureReason)?"":__t)+'\r\n	</td>\r\n\r\n	<td class="left-align"> \r\n		',__p+="Yes"===repeatsYearly?"\r\n			"+(null==(__t=startDate.substr(0,5))?"":__t)+"\r\n		":"\r\n			"+(null==(__t=startDate)?"":__t)+"\r\n		",__p+='\r\n	</td>\r\n\r\n	<td class="left-align">\r\n		',__p+="Yes"===repeatsYearly?" \r\n			"+(null==(__t=resumeDate.substr(0,5))?"":__t)+"\r\n		":"\r\n			"+(null==(__t=resumeDate)?"":__t)+"\r\n		",__p+='\r\n	</td>\r\n\r\n	<td class="left-align">\r\n	  '+(null==(__t=repeatsYearly)?"":__t)+'\r\n	</td>\r\n	 \r\n	<td class="left-align">\r\n		<button class="icon icon-btn icon-2x icon-trash"></button>\r\n	</td>\r\n\r\n</tr>\r\n';return __p}}),define("content/category-sections/more/orders-exceptions/views/orders-exclusionsBlockedDeliveryDates-view",["backbone","../collections/ordersExclusions-blockedDeliveryDatesCollection","../models/orders-exclusionsBlockedDeliveryDates-model","../templates/orders-exclusions-blocked-delivery-dates-tpl","global-events","jquery"],function(e,t,n,i,o){var r=e.View.extend({template:i,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDeleteExceptionsDeliveryDate"},handleDeleteExceptionsDeliveryDate:function(){var e=this;o.trigger("form:delete",t.remove.bind(t,e.model)),setTimeout(function(){e.parent.handleClosureDeliveryTableUpdate()},1500)}});return r}),define("content/category-sections/more/orders-exceptions/models/orders-exclusionsExceptionDeliveryDates-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,exceptionReason:"",exceptionDate:""}});return t}),define("content/category-sections/more/orders-exceptions/collections/ordersExclusions-ExceptionsDeliveryDatesCollection",["backbone","../models/orders-exclusionsExceptionDeliveryDates-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-ordersExceptions-DeliveryDates.json",model:t});
return new n}),define("content/category-sections/more/orders-exceptions/templates/orders-exclusions-excpetions-DeliveryDates-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr> \r\n	<td class="left-align indented-l">\r\n\r\n	'+(null==(__t=exceptionReason)?"":__t)+'\r\n	  </td>\r\n\r\n	<td class="left-align"> \r\n	'+(null==(__t=exceptionDate)?"":__t)+'\r\n	 </td>\r\n\r\n	<td class="left-align"> \r\n      <button class="icon icon-btn icon-2x icon-trash"></button>\r\n	  </td>\r\n\r\n</tr>\r\n';return __p}}),define("content/category-sections/more/orders-exceptions/views/orders-exclusionsExceptionsDeliveryDates-view",["backbone","../collections/ordersExclusions-ExceptionsDeliveryDatesCollection","../models/orders-exclusionsExceptionDeliveryDates-model","../templates/orders-exclusions-excpetions-DeliveryDates-tpl","global-events","jquery"],function(e,t,n,i,o){var r=e.View.extend({template:i,initialize:function(e){this.parent=e.parent},render:function(){return this.setElement(this.template(this.model.toJSON())),this.delegateEvents(),this},events:{"click .icon-trash":"handleDeleteExceptionsDeliveryDate"},handleDeleteExceptionsDeliveryDate:function(){var e=this;o.trigger("form:delete",t.remove.bind(t,e.model)),setTimeout(function(){e.parent.handleExceptionTableUpdate()},1500)}});return r}),define("content/category-sections/more/orders-exceptions/templates/create-Exception-deliveryDate-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="create-edit-New-exceptionsForm" class="left-align">\r\n\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="clearfix section-title">\r\n				<h3 class="pull-left">Create Exception Delivery Date</h3>\r\n				<div class="btn-panel">\r\n					<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n					<button type="button" id="save-btn" class="btn btn-submit"><div class="icon icon-add"></div>Save</button>\r\n					<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Hidden Alert Message -->\r\n\r\n	<div class="row panel alert-panel">\r\n	  <div class="col-12">\r\n	    <div class="row">\r\n	      <div class="col-1">\r\n	        <div class="icon icon-3x icon-warning"></div>\r\n	      </div>\r\n	      <div class="col-11 alert-text">\r\n	                     This is a generic placeholder for error messages in eSAT. <br>\r\n	                     In the live app, this will be a real message and will be hidden by default.\r\n	      </div>\r\n	    </div>\r\n	  </div>\r\n	</div>\r\n\r\n	<!-- Hidden Alert Message -->\r\n\r\n	<div class="row">\r\n		<div class="col-12">\r\n			<div class="wrap-text"> Create a specific day exception to the days of the week you are normally closed and not available for delivery. </div>\r\n	 	</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section">\r\n	   <div class="col-11">\r\n	   	   <label for"f-closure-reason" class="pull-left"> Exception Reason or Description </label>\r\n		   <input type="text" id="f-closure-reason" name="f-closure-reason" value="'+(null==(__t=exceptionReason)?"":__t)+'">\r\n\r\n	   </div>\r\n	</div>\r\n\r\n	<div class="row row-spaced">\r\n	   <div class="col-4 form-section">\r\n			<label for="exception-date" class="pull-left">Exception Date</label>\r\n			<div class="date-container">\r\n				<input type="text" id="exception-date" name="exception-date" class="date" value="'+(null==(__t=exceptionDate)?"":__t)+'">\r\n		    </div>\r\n		</div>\r\n	</div>\r\n\r\n</form>';return __p}}),define("content/category-sections/more/orders-exceptions/views/create-new-ExceptionsDeliveryDate-view",["backbone","../templates/create-Exception-deliveryDate-tpl","../collections/ordersExclusions-ExceptionsDeliveryDatesCollection","../models/orders-exclusionsExceptionDeliveryDates-model","global-events","jquery","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:t,initialize:function(){},render:function(){this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel));var e=this;return this.delegateEvents(),this.cacheElem(),this.applyDates(),setTimeout(function(){e.applyToolTips()},500),this.handleValidateExceptionForm(),this},events:{"click #cancel-btn":"handlecloseModal","click #save-btn":"handleSave"},cacheElem:function(){this.$exceptionReason=this.$el.find("#f-closure-reason"),this.$exceptionDate=this.$el.find("#exception-date"),this.$tip=this.$el.find(".tooltip-change"),this.$CreateNewExceptionsForm=this.$el.find("#create-edit-New-exceptionsForm")},handleSave:function(){this.$CreateNewExceptionsForm.valid()?(this.model.set({exceptionReason:this.$exceptionReason.val().trim(),exceptionDate:this.$exceptionDate.val().trim()}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),o.trigger("form:save",this.$tip),this.handlecloseModal(),this.parent.handleExceptionTableUpdate()):o.trigger("form:invalid",this.$tip)},handlecloseModal:function(){var e=this;o.trigger("form:cancel",function(){e.$el.parent().dialog("close")})},applyDates:function(){var e=this;e.$exceptionDate.datepicker({onSelect:function(t){e.$exceptionDate.datepicker("option",t),e.$exceptionDate.trigger("blur")},dateFormat:"mm/dd/yy"})},handleValidateExceptionForm:function(){this.$CreateNewExceptionsForm.validate({rules:{"f-closure-reason":"required","exception-date":{required:!0}}})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new r}),define("content/category-sections/more/orders-exceptions/templates/create-New-Closure-Delivery-BlockDate-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<form id="create-new-closure-deliverydate" name="create-new-closure-deliverydate" class="left-align">\r\n   <div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h3 class="pull-left">Create New Closure (Delivery Block)</h3>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit"><div class="icon icon-add"></div>Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row panel alert-panel">\r\n  <div class="col-12">\r\n    <div class="row">\r\n      <div class="col-1">\r\n        <div class="icon icon-3x icon-warning"></div>\r\n      </div>\r\n      <div class="col-11 alert-text">\r\n                     This is a generic placeholder for error messages in eSAT. <br>\r\n                     In the live app, this will be a real message and will be hidden by default.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row">\r\n	<div class="col-12">\r\n		<div class="pull-left"> Enter the Start and Resume Dates for blocking delivery to your website </div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced form-section y-space-top-m">\r\n   <div class="col-12">\r\n   	   <label for"f-closure-reason" class="pull-left"> Closure Reason or Description </label>\r\n	   <input type="text" id="f-closure-reason" name="f-closure-reason" value="'+(null==(__t=closureReason)?"":__t)+'">\r\n\r\n   </div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n		<div class="col-4 form-section">\r\n			<label for="start-date">Start Block On</label>\r\n			<div class="date-container">\r\n				<input type="text" id="start-date" name="start-date" class="date" value="'+(null==(__t=startDate)?"":__t)+'">\r\n		    </div>\r\n	    </div>\r\n   <div class="col-4 form-section">\r\n				<label for="resume-date">Resume Orders On</label><i title="This is the date you resume delivery date for your site" class="icon icon-tool-tip x-space-s"></i>\r\n				<div class="date-container">\r\n					<input type="text" id="resume-date" name="resume-date" class="date" value="'+(null==(__t=resumeDate)?"":__t)+'">\r\n				</div>\r\n\r\n			</div>\r\n\r\n       <div class="col-4 form-section">\r\n       				<label for="repeats-yearly-active">Repeats Every Year</label><i title="Repeat this Closure yearly for your site" class="icon icon-tool-tip x-space-s"></i>\r\n\r\n		    <input '+(null==(__t=repeatsYearly?"checked":"")?"":__t)+' type="checkbox" id="repeats-yearly-active" name="repeats-yearly-active" class="on-off-switch f-repeats-YearlyActive" />\r\n\r\n	          <label for="repeats-yearly-active" class="on-off-switch-label">\r\n\r\n	              <div class="on-off-switch-state">on</div>\r\n	        </label>\r\n\r\n	    </div>\r\n\r\n\r\n  </div>\r\n\r\n</form>';return __p}}),define("content/category-sections/more/orders-exceptions/views/create-new-BlockedDeliveryDates-view",["backbone","../templates/create-New-Closure-Delivery-BlockDate-tpl","../collections/ordersExclusions-blockedDeliveryDatesCollection","../models/orders-exclusionsBlockedDeliveryDates-model","global-events","jquery","jqueryui","jqueryval"],function(e,t,n,i,o){var r=e.View.extend({template:t,initialize:function(){},render:function(){return this.viewModel=this.model.toJSON(),this.$el.html(this.template(this.viewModel)),this.delegateEvents(),this.cacheElem(),this.applyDates(),this.applyToolTips(),this.handleValidateClosureDeliveryForm(),this},events:{"click #cancel-btn":"handlecloseModal","click #save-btn":"handleSave"},cacheElem:function(){this.$CreateNewClosureDeliveryForm=this.$el.find("#create-new-closure-deliverydate"),this.$closureReason=this.$el.find("#f-closure-reason"),this.$startDate=this.$el.find("#start-date"),this.$resumeDate=this.$el.find("#resume-date"),this.$tip=this.$el.find(".tooltip-change"),this.$repeatsYearlyActive=this.$el.find(".f-repeats-YearlyActive")},handleSave:function(){var e=this.$repeatsYearlyActive.is(":checked");if(e===!0)var t="Yes";else var t="No";this.$CreateNewClosureDeliveryForm.valid()?(this.model.set({closureReason:this.$closureReason.val().trim(),startDate:this.$startDate.val().trim(),resumeDate:this.$resumeDate.val().trim(),repeatsYearly:t}),n.get(this.model)||(this.model.set("id",Date.now()),n.add(this.model)),o.trigger("form:save",this.$tip),this.handlecloseModal(),this.parent.handleClosureDeliveryTableUpdate()):o.trigger("form:invalid",this.$tip)},handlecloseModal:function(){var e=this;o.trigger("form:cancel",function(){e.$el.parent().dialog("close")})},applyDates:function(){var e=this;e.$startDate.datepicker({onSelect:function(t){e.$resumeDate.datepicker("option","minDate",t),e.$startDate.trigger("blur")},dateFormat:"mm/dd/yy"}),e.$resumeDate.datepicker({onSelect:function(t){e.$startDate.datepicker("option","maxDate",t),e.$resumeDate.trigger("blur")},dateFormat:"mm/dd/yy"})},handleValidateClosureDeliveryForm:function(){this.$CreateNewClosureDeliveryForm.validate({rules:{"f-closure-reason":"required","resume-date":{required:!0},"start-date":{required:!0}}})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()}});return new r}),define("content/category-sections/more/orders-exceptions/views/orders-exclusions-home-view",["backbone","../templates/orders-exclusions-home-tpl","../collections/ordersExclusions-blockedDeliveryDatesCollection","../models/orders-exclusionsBlockedDeliveryDates-model","./orders-exclusionsBlockedDeliveryDates-view","../collections/ordersExclusions-ExceptionsDeliveryDatesCollection","../models/orders-exclusionsExceptionDeliveryDates-model","./orders-exclusionsExceptionsDeliveryDates-view","./create-new-ExceptionsDeliveryDate-view","./create-new-BlockedDeliveryDates-view","datatables","jquery","jqueryui","global-events"],function(e,t,n,i,o,r,a,s,l,c){var d=e.View.extend({template:t,initialize:function(){c.parent=this,l.parent=this,s.parent=this,o.parent=this},render:function(){var e=this;return e.$el.html(e.template()),e.delegateEvents(),e.cacheElem(),e.dataTable&&e.dataTable.destroy(),n.fetchCustom().done(function(){e.addAllBlockedDisabledDeliveryDates(),e.applyDates(),e.addAllBlockedDeliveryDates(),e.applyDataTablesBlockedDeliveryDates(),e.setModalClosureDeliveryBlock()}),r.fetchCustom().done(function(){e.addAllExceptionsDeliveryDates(),e.applyDataTablesExceptionsDeliveryDates(),e.setModalExceptionDeliveryDateModal()}),e},events:{"click #add-new-Exception-btn":"handleCreateNewException","click #add-new-BlockedDeliveryDate-btn":"handleCreateNewBlockedDeliveryDate"},cacheElem:function(){this.$CreateNewClosureDeliveryBlockModal=this.$el.find("#create-new-Exception-deliveryDateModal"),this.$CreateNewExceptionDeliveryDateModal=this.$el.find("#create-new-closure-delivery-BlockModal"),this.$BlockedDeliveryDatesList=this.$el.find("#BlockedDeliveryDates-List"),this.$ExceptionsDeliveryList=this.$el.find("#ExceptionsDeliveryDates-List"),this.$ExceptionsDeliveryTable=this.$el.find("#Exceptions-Delivery-Table"),this.$BlockedDeliveryTable=this.$el.find("#Blocked-Delivery-Table"),this.$OrdersAvailableDates=this.$el.find("#OrdersExclusions-Available-dates")},handleCreateNewBlockedDeliveryDate:function(){this.showModalClosureDeliveryBlock(c,new i)},handleCreateNewException:function(){this.showModalExceptionDeliveryDateModal(l,new a)},addBlockedDeliveryDate:function(e){var t=new o({model:e,parent:this});this.$BlockedDeliveryDatesList.append(t.render().el)},addAllBlockedDeliveryDates:function(){this.$BlockedDeliveryDatesList.empty(),n.each(this.addBlockedDeliveryDate,this)},addExceptionsDeliveryDate:function(e){var t=new s({model:e,parent:this});this.$ExceptionsDeliveryList.append(t.render().el)},addAllExceptionsDeliveryDates:function(){this.$ExceptionsDeliveryList.empty(),r.each(this.addExceptionsDeliveryDate,this)},handleClosureDeliveryTableUpdate:function(){this.addAllBlockedDeliveryDates()},handleExceptionTableUpdate:function(){this.addAllExceptionsDeliveryDates()},applyDataTablesBlockedDeliveryDates:function(){this.dataTable1=this.$BlockedDeliveryTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,searching:!0,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},applyDataTablesExceptionsDeliveryDates:function(){var e=this;e.dataTable2=e.$ExceptionsDeliveryTable.DataTable({autoWidth:!1,deferRender:!1,jQueryUI:!1,lengthChange:!1,ordering:!1,processing:!1,searching:!0,serverSide:!1,stateSave:!1,destroy:!0,info:!0,pading:!0,infoCallback:function(e,t,n,i,o){return t+" - "+n+" of "+o},pagingType:"simple",language:{paginate:{previous:" ",next:" "}},dom:'lrt<"data-tables-pagination"ip>'})},addBlockedDisabledDeliveryDates:function(e){var t=this,n=new o({model:e,parent:t}),i=n.model.get("startDate");DISABLESPECIFICDAYS.push(i)},addAllBlockedDisabledDeliveryDates:function(){var e=this;DISABLESPECIFICDAYS=[],n.each(e.addBlockedDisabledDeliveryDates,e)},setModalClosureDeliveryBlock:function(){this.$CreateNewClosureDeliveryBlockModal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModalClosureDeliveryBlock:function(e,t){e.model=t,this.$CreateNewClosureDeliveryBlockModal.empty(),this.$CreateNewClosureDeliveryBlockModal.append(e.render().el),this.$CreateNewClosureDeliveryBlockModal.dialog("open")},setModalExceptionDeliveryDateModal:function(){this.$CreateNewExceptionDeliveryDateModal.dialog({autoOpen:!1,modal:!0,draggable:!1,show:{effect:"fade",speed:200},hide:{effect:"fade",speed:100}})},showModalExceptionDeliveryDateModal:function(e,t){e.model=t,this.$CreateNewExceptionDeliveryDateModal.empty(),this.$CreateNewExceptionDeliveryDateModal.append(e.render().el),this.$CreateNewExceptionDeliveryDateModal.dialog("open")},applyDates:function(){this.$OrdersAvailableDates.datepicker({beforeShowDay:this.disableSpecificDaysAndWeekends,dateFormat:"mm/dd/yy"})},disableSpecificDaysAndWeekends:function(e){for(var t=e.getMonth(),n=e.getDate(),i=e.getFullYear(),o=0;o<DISABLESPECIFICDAYS.length;o++)if(-1!=$.inArray(t+1+"/"+n+"/"+i,DISABLESPECIFICDAYS)||new Date>e)return[!1];return[!0]}});return new d}),define("content/category-sections/more/manage-search-terms/templates/manage-search-terms-home-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="clearfix section-title">\r\n			<h2 class="pull-left">Manage Search Terms</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="cancel-btn" class="btn btn-other">Cancel</button>\r\n				<button type="button" id="new-btn" class="btn btn-submit pull-right"><i class="icon icon-add icon-lg"></i>Add New</button>\r\n				<button type="button" id="save-btn" class="btn btn-submit">Save</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		We have compiled a list of the most common search terms and have created graphical landing page headers for you. On this page, you can control which ones you use as well as build new ones!\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n\r\n<div class="row row-spaced panel form-section">\r\n	<div class="row row-spaced">\r\n		<div class="col-6">\r\n			<div class="switch-input-switch">\r\n				<div class="label">Search Terms Status<i title="If you do not wish to display a special banner on your search results page, or redirect users to selected landing pages, you can choose to turn this functionality off." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=searchTermStatus?"checked":"")?"":__t)+' type="checkbox" id="f-searchTermStatus" name="f-searchTermStatus" class="on-off-switch" />\r\n				<label for="f-searchTermStatus" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<div class="panel-title">Existing Search Terms</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- Start of Section table -->\r\n	<div class="row row-spaced">\r\n		<div class="col-12">\r\n			<table class="table alternate">\r\n				<thead>\r\n					<tr>\r\n					<th class="col-4 left-align">Search Term</th>\r\n					<th class="col-3 left-align">Location</th>\r\n					<th class="col-2">Type</th>\r\n					<th class="col-1">Status</th>\r\n					<th class="col-1">Edit</th>\r\n					<th class="col-1">Delete</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="section-list"></tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n	<!-- End of Section Table -->\r\n\r\n</div>\r\n\r\n\r\n';return __p}}),define("content/category-sections/more/manage-search-terms/templates/section-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<tr data-id="'+(null==(__t=id)?"":__t)+'">\r\n	<td class="left-align">'+(null==(__t=searchTerm)?"":__t)+'</td>\r\n	<td class="left-align">'+(null==(__t=landingPageOrBannerImage)?"":__t)+"</td>\r\n\r\n\r\n	 <td>"+(null==(__t=type)?"":__t)+" </td>\r\n	<td>\r\n		<input "+(null==(__t=searchActiveStatus?"checked":"")?"":__t)+' type="checkbox"  id="'+(null==(__t=id)?"":__t)+'" name="'+(null==(__t=id)?"":__t)+'" class="on-off-switch"/>\r\n        <label for="'+(null==(__t=id)?"":__t)+'" class="on-off-switch-label">\r\n        	<div class="on-off-switch-state">on</div>\r\n        </label>\r\n    </td>\r\n\r\n\r\n\r\n	<td> <button type="button" class="icon icon-btn '+(null==(__t="Custom"===type?"icon-edit":"icon-search")?"":__t)+' icon-2x"></button></td>\r\n\r\n	<td><button type="button" class="icon icon-btn '+(null==(__t="Custom"===type?"icon-trash":"")?"":__t)+' icon-2x"></button></td>\r\n</tr>';return __p}}),define("content/category-sections/more/manage-search-terms/views/section-view",["backbone","../templates/section-view-tpl","global-events"],function(e,t,n){var i=e.View.extend({template:t,initialize:function(e){this.collection=e.collection,this.parent=e.parent,this.listenTo(this.collection,"remove",function(e){this.model===e&&this.remove()}.bind(this))},render:function(){return this.setElement(this.template(this.model.toJSON())),this.cacheElem(),this},events:{"click .icon-trash":"handleDelete","click .icon-edit":"handleEdit","click .icon-search":"handleEdit","change .on-off-switch":"handleActiveSwitch"},cacheElem:function(){this.$onOffSwitch=this.$el.find(".on-off-switch")},handleDelete:function(){n.trigger("form:delete",this.collection.remove.bind(this.collection,this.model))},handleEdit:function(){this.parent.handleEdit(this.model)},handleActiveSwitch:function(){this.model.set({searchActiveStatus:this.$onOffSwitch.is(":checked")}),n.trigger("form:editing")}});return i}),define("content/category-sections/more/manage-search-terms/templates/create-edit-view-tpl",[],function(){return function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<form id="create-edit-form" class="form-section">\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		<div class="section-title clearfix">\r\n			<h2 class="pull-left">',__p+=id?"Edit "+(null==(__t=searchTerm)?"":__t):"Add New",__p+='</h2>\r\n			<div class="btn-panel">\r\n				<button type="button" id="save-btn" class="btn btn-submit pull-right">Save</button>\r\n		        <button type="button" id="cancel-btn"class="btn btn-other">Cancel</button>\r\n				<div role="tooltip" data-parent="save-btn" class="ui-tooltip ui-widget ui-corner-all ui-widget-content tooltip-change"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n<div class="row row-spaced">\r\n	<div class="col-12">\r\n		Build your own search terms, and when a customer uses one that matches, you can control the banner or page that is shown. \r\n	</div>\r\n</div>\r\n\r\n<!-- Hidden Alert Message -->\r\n<div class="row panel alert-panel">\r\n	<div class="col-12">\r\n		<div class="row">\r\n			<div class="col-1">\r\n				<div class="icon icon-3x icon-warning"></div>\r\n			</div>\r\n			<div class="col-11 alert-text">\r\n				This is a generic placeholder for error messages in eSAT. <br>\r\n				In the live app, this will be a real message and will be hidden by default.\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Hidden Alert Message -->\r\n\r\n<div class="row-spaced panel">\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-4 form-section">\r\n			<div class="switch-input-switch">\r\n				<div class="label">Search Term Status<i title="If you do not wish to display a special banner on your search results page, or redirect users to selected landing pages, you can choose to turn this functionality off." class="icon icon-tool-tip x-space-s"></i></div>\r\n				<input '+(null==(__t=searchActiveStatus?"checked":"")?"":__t)+' type="checkbox" id="f-searchActiveStatus" name="f-searchActiveStatus" class="on-off-switch"/>\r\n				<label for="f-searchActiveStatus" class="on-off-switch-label">\r\n					<div class="on-off-switch-state">on</div>\r\n				</label>\r\n			</div>\r\n		</div>\r\n		<div class="col-6 form-section">\r\n			<label for="f-searchTerm">Search Term</label><i class="icon icon-tool-tip x-space-s" title="Enter the specific search term you want to have special options such as a banner image or landing page link for here."></i>\r\n		    <input type="text" id="f-searchTerm" name="f-searchTerm" value="'+(null==(__t=searchTerm)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-spaced form-section">\r\n		<div class="col-4 form-section">\r\n			<label for="f-landingPageOrBannerImage">Banner/Landing Page</label>\r\n			<div class="select-container">\r\n				<select id="f-landingPageOrBannerImage" name="f-landingPageOrBannerImage" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n					<option selected disabled hidden value="'+(null==(__t=landingPageOrBannerImage)?"":__t)+'">'+(null==(__t=landingPageOrBannerImage)?"":__t)+'</option>\r\n					<option id="bannerSelect" value="Banner Image">Banner Image</option>\r\n					<option id="landingSelect" value="Landing Page">Landing Page</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n		<div class="col-6 form-section table-container-two hidden">\r\n			<label for="f-landingPageURL">Landing Page URL</label><i class="icon icon-tool-tip x-space-s" title="	Choose a page to direct your search term. For instance, Birthday. You can have anyone who searches for Birthday, land on the Birthday category, instead of searching for all bouquets that have the word Birthday associated to it. "></i>\r\n			<input type="text" id="f-landingPageURL" name="f-landingPageURL" value="'+(null==(__t=landingPageURL)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+'>\r\n		</div>		\r\n	</div>\r\n\r\n\r\n	<div class="table-container-one hidden">\r\n		<div class="row row-spaced">\r\n			<div class="col-12 form-section">\r\n				<div class="panel-title">Banner Image Settings</div>\r\n			</div>\r\n		</div>\r\n		<div class="row row-spaced form-section">\r\n				<div class="col-12">Use this option to display a banner when a search term matches. Upload your own custom banner to display for your search term: Upload a file up to 4MB in size. Use image editor to make any updates you need! We suggest your final banner be 775 pixels wide. Max File Size: 100KB</div>\r\n		</div>\r\n		<div class="row row-spaced form-section">\r\n			<div class="col-3 form-section image-section">\r\n				<label for="f-banner-image-upload" style="margin-right:20px;">Banner Image<i class="icon icon-tool-tip x-space-s" title="Use the button below to configure a banner image for this search term."></i></label>\r\n				<button type="button" id="f-banner-image-upload" class="image-upload icon icon-btn icon-image btn-file icon-4x y-space-s"></button>\r\n			</div>\r\n			<div class="col-3 form-section image-form-section" id="f-image-1">\r\n				<label for="f-banner-image">Banner Preview<i class="icon icon-tool-tip x-space-s" title="The banner image associated with this search term can be previewed below. This will be displayed when your shopper enters the search term."></i></label>\r\n					<img id="f-banner-image"  name="f-banner-image" class="center-align y-space-s fill-container-width small-table-image" src="'+(null==(__t=bannerImage)?"":__t)+'" alt="">\r\n			</div>	\r\n			<div class="col-6">\r\n				<label for="f-imageAlt">Image Alt</label><i class="icon icon-tool-tip x-space-s" title="This is the alt text associated with the banner image and is used for search engine optimization purposes."></i>\r\n				<input type="text" id="f-imageAlt" name="f-imageAlt" value="'+(null==(__t=imageAlt)?"":__t)+'" '+(null==(__t="Custom"===type?"":"disabled")?"":__t)+">\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n</div>\r\n	\r\n</form>";return __p}}),define("content/category-sections/more/manage-search-terms/models/section-model",["backbone"],function(e){var t=e.Model.extend({defaults:{id:null,searchTerm:"",type:"Custom",landingPageOrBannerImage:"",bannerImage:"",imageAlt:"",landingPageURL:"",searchActiveStatus:!0}});return t}),define("content/category-sections/more/manage-search-terms/collections/section-collection",["backbone","../models/section-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-manage-search-terms.json",model:t});return n}),define("content/category-sections/more/manage-search-terms/views/create-edit-view",["backbone","../templates/create-edit-view-tpl","../collections/section-collection","global-events","jqueryui","jqueryval"],function(e,t,n,i){var o=e.View.extend({template:t,initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.cacheElem(),this.delegateEvents(),this.applyToolTips(),this.handleSelectChange(),this.validateForm(),this},events:{"click #cancel-btn":"handleCancelBtnClick","click #save-btn":"handleSave","click .image-upload":"handleImageUpload","change #f-landingPageOrBannerImage":"handleSelectChange"},cacheElem:function(){this.$createEditForm=this.$el.find("#create-edit-form"),this.$searchTerm=this.$el.find("#f-searchTerm"),this.$searchActiveStatus=this.$el.find("#f-searchActiveStatus"),this.$landingPageOrBannerImage=this.$el.find("#f-landingPageOrBannerImage"),this.$imageAlt=this.$el.find("#f-imageAlt"),this.$landingPageURL=this.$el.find("#f-landingPageURL"),this.$bannerImage=this.$el.find("#f-banner-image"),this.$img1=this.$el.find("#f-image-1"),this.$tableContainerOne=this.$el.find(".table-container-one"),this.$tableContainerTwo=this.$el.find(".table-container-two"),this.$bannerImageUpload=this.$el.find("#f-banner-image-upload"),this.$tip=this.$el.find(".tooltip-change"),this.$bonusToggles=this.$el.find(".f-bonus-toggle")},requireImg:function(e){var t=this,n=e.find("img");""!==n.attr("src")?t.hideImgError(e):t.showImgError(e)},handleSelectChange:function(){var e=this,t=this.$landingPageOrBannerImage.find("option:selected").val();this.$tableContainerTwo.addClass("hidden"),this.$tableContainerOne.addClass("hidden"),"Landing Page"===t?e.$tableContainerTwo.removeClass("hidden"):"Banner Image"===t&&e.$tableContainerOne.removeClass("hidden")},handleCancelBtnClick:function(){i.trigger("form:cancel",this.parent.showParentHome.bind(this.parent))},handleSave:function(){var e=this;return e.requireImg(this.$img1),this.$el.find(".image-form-section.error").is("*")?(i.trigger("form:invalid",this.$tip),!1):void(e.$createEditForm.valid()&&(this.model.set({searchTerm:this.$searchTerm.val().trim(),searchActiveStatus:this.$searchActiveStatus.is(":checked"),landingPageOrBannerImage:this.$landingPageOrBannerImage.find("option:selected").val(),bannerImage:this.$bannerImage.attr("src"),imageAlt:this.$imageAlt.val().trim(),landingPageURL:this.$landingPageURL.val().trim()}),e.parent.sectionCollection.get(this.model)||(this.model.set("id",-1),e.parent.sectionCollection.add(this.model)),i.trigger("form:save",this.$tip),this.parent.addAllSections(),this.parent.showParentHome()))},showImgError:function(e){$(e).addClass("error"),$(e).append('<label class="error pull-left">This image is required</label>')},hideImgError:function(e){$(e).removeClass("error"),$(e).find("label.error").remove()},handleImageUpload:function(){var e=this;i.trigger("form:image-upload",{cb:function(t){e.$bannerImage.prop("src",t),e.hideImgError(e.$img1)},active:e.$bannerImage.prop("src"),name:"Manage Search Terms"})},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},validateForm:function(){var e=this;this.$createEditForm.validate({rules:{"f-searchTerm":{required:!0},"f-landingPageOrBannerImage":{required:!0},"f-landingPageURL":{url3:!0,required:function(){return e.$landingPageOrBannerImage.prop("Landing Page")?!0:void 0}},"f-banner-image":{required:!0}}})}});return new o}),define("content/category-sections/more/manage-search-terms/models/search-model",["backbone"],function(e){var t=e.Model.extend({url:"/mock/user-manage-search-terms.json",defaults:{id:null,searchTermStatus:!0,sections:[]}});return new t}),define("content/category-sections/more/manage-search-terms/collections/search-collection",["backbone","../models/search-model"],function(e,t){var n=e.Collection.extend({url:"/mock/user-manage-search-terms.json",model:t});
return n}),define("content/category-sections/more/manage-search-terms/views/manage-search-terms-home-view",["backbone","../templates/manage-search-terms-home-view-tpl","../views/section-view","./create-edit-view","../models/search-model","../models/section-model","../collections/search-collection","../collections/section-collection","global-events","datatables"],function(e,t,n,i,o,r,a,s,l){var c=e.View.extend({tagName:"div",id:"f-manage-search-terms",template:t,initialize:function(){i.parent=this},render:function(){var e=this;return o.fetchCustom().done(function(){this.$el.html(e.template(o.toJSON())),this.delegateEvents(),this.cacheElem(),this.applyToolTips(),this.sectionCollection=new s(o.get("sections")),o.listenTo(this.sectionCollection,"add remove change",function(){o.set("sections",this.sectionCollection.toJSON())}.bind(this)),this.addAllSections()}.bind(this)),this},events:{"click #save-btn":"handleSave","click #new-btn":"handleAddSection","change input":"triggerChange"},triggerChange:function(){l.trigger("form:editing")},cacheElem:function(){this.$tip=this.$el.find(".tooltip-change"),this.$searchTermStatus=this.$el.find("#f-searchTermStatus"),this.$sectionList=this.$el.find("#section-list")},handleSave:function(){o.set({searchTermStatus:this.$searchTermStatus.is(":checked")}),l.trigger("form:save",this.$tip)},handleAddSection:function(){this.handleEdit(new r)},handleEdit:function(e){this.parent.showCreateEdit(e,this.sectionCollection)},addSection:function(e){var t=new n({model:e,collection:this.sectionCollection,parent:this});this.$sectionList.append(t.render().el)},addAllSections:function(){this.$sectionList.empty(),this.sectionCollection.each(this.addSection,this)},applyToolTips:function(){this.$el.find(".icon-tool-tip").tooltip()},showParentHome:function(){this.parent.showHome()}});return new c}),define("content/category-sections/more/manage-search-terms/views/manage-search-terms-view",["backbone","./manage-search-terms-home-view","./create-edit-view","global-events","jqueryui"],function(e,t,n,i){var o=e.View.extend({tagName:"div",initialize:function(){t.parent=this},render:function(){return this.replaceVisible(t.render()),this},replaceVisible:function(e){this.$el.empty(),this.$el.append(e.render().$el.fadeIn(200).focus()),$(window).scrollTop(0)},showHome:function(){this.replaceVisible(t)},showCreateEdit:function(e,t){var o=this;i.trigger("form:cancel",function(){n.model=e,n.collection=t,o.replaceVisible(n)})}});return new o}),define("content/category-sections/category-section-view-map",["require","./common/products-messaging/views/products-messaging-view","./merchandising/homepage-customization/views/homepage-customization-view","./common/homepage-settings/views/homepage-settings-view","./merchandising/manage-categories/views/manage-categories-view","./merchandising/manage-collections/views/manage-collections-view","./common/category-settings/views/category-settings-view","./merchandising/navigation/views/site-nav-view","./merchandising/product-management/views/product-management-view","./merchandising/product-attributes/views/product-attributes-view","./merchandising/deal-of-the-day/views/deal-of-the-day-view","./more/product-page-settings/views/product-page-settings-view","./more/general-product-settings/views/general-settings-view","./merchandising/sympathy-page/views/sympathy-page-view","./merchandising/add-ons/views/add-ons-view","./merchandising/third-party-products-catalog/views/third-party-product-view","./merchandising/merchandising-icons/views/merchandising-icons-ReplaceView","./merchandising/subscription-product-setup/views/edit-subscription-setup-view","./common/about-us/views/about-us-view","./content-management/help/views/help-view","./content-management/modal-management/views/modal-management-view","./content-management/custom-html-pages/views/custom-html-pages-view","./content-management/custom-forms/views/forms-view","./merchandising/weddings-page/views/wedding-page-view","./more/checkout-messaging-management/views/checkoutMessagingManagement-ReplaceView","./seo/social-media-setup/views/social-media-view","./merchandising/wedding-product/views/wedding-product-page-home-view","./content-management/wedding-galleries/views/wedding-gallery-view","./content-management/wedding-flowers/views/wedding-flower-view","./marketing-promotions/manage-marketing-emails/views/manage-marketing-emails-view","./common/email-settings/views/email-settings-view","./more/email-list/views/email-list-view","./more/floral-app-code-management/views/floral-app-code-view","./more/bonus-bloom-program/views/bonus-bloom-home-view","./marketing-promotions/promotion-codes/views/promotion-codes-view","./more/manage-rewards/views/manage-rewards-view","./marketing-promotions/marketing-campaigns/views/marketing-campaigns-page-view","./more/floral-app-settings/views/floral-app-settings-view","./marketing-promotions/paid-membership/views/paid-membership-view","./seo/footer-management/views/footer-management-view","./common/products-messaging/views/products-messaging-view","./common/about-us/views/about-us-view","./seo/site-meta/views/site-meta-view","./seo/social-media-setup/views/social-media-MGT-home-view","./seo/url-management/views/UrlManagement-ReplaceView","./seo/site-map/views/site-map-view","./reporting/google-analytics/views/google-analytics-view","./common/order-lookup/views/order-lookup-view","./reporting/find-a-florist/views/find-a-florist-view","./reporting/source-codes/views/source-codes-view","./reporting/promo-codes/views/promo-codes-view","./reporting/top-products/views/top-products-view","./reporting/osm-tracking/views/osm-tracking-view","./reporting/top-referrals/views/top-referrals-view","./reporting/orders-traffic/views/ordersandtraffic-view","./reporting/floral-app-reports/views/floral-app-report-view","./reporting/esat-audit-log/views/esat-audit-log-view","./more/general-settings/views/general-settings-view","./more/store-locations/views/store-locations-view","./more/funeral-home-locations/views/funeral-locations-view","./common/homepage-settings/views/homepage-settings-view","./common/category-settings/views/category-settings-view","./more/product-page-settings/views/product-page-settings-view","./more/general-product-settings/views/general-settings-view","./more/first-time-site-setup/views/first-time-site-setup-view","./more/checkout-config/views/checkout-config-view","./common/email-settings/views/email-settings-view","./more/delivery-days-times/views/delivery-days-times-view","./common/order-lookup/views/order-lookup-view","./more/drop-shipping-setup/views/drop-shipping-setup-view","./more/manage-delivery-fees/views/manage-delivery-fees-view","./more/email-list/views/email-list-view","./more/manage-rewards/views/manage-rewards-view","./more/site-theme/views/site-theme-view","./more/image-management/views/image-management-view","./more/customer-accounts/views/customer-accounts-view","./more/esat-administration/views/esat-administration-home-view","./more/orders-exceptions/views/orders-exclusions-home-view","./more/floral-app-code-management/views/floral-app-code-view","./more/bonus-bloom-program/views/bonus-bloom-home-view","./more/checkout-messaging-management/views/checkoutMessagingManagement-ReplaceView","./more/manage-search-terms/views/manage-search-terms-view","./merchandising/navigation/views/site-nav-view"],function(e){return function(t,n){switch(t){case"merchandising":switch(n){case"products-messaging":return e("./common/products-messaging/views/products-messaging-view");case"homepage-customization":return e("./merchandising/homepage-customization/views/homepage-customization-view");case"homepage-settings":return e("./common/homepage-settings/views/homepage-settings-view");case"manage-categories":return e("./merchandising/manage-categories/views/manage-categories-view");case"collections":return e("./merchandising/manage-collections/views/manage-collections-view");case"category-settings":return e("./common/category-settings/views/category-settings-view");case"site-navigation":return e("./merchandising/navigation/views/site-nav-view");case"product-management":return e("./merchandising/product-management/views/product-management-view");case"product-attributes":return e("./merchandising/product-attributes/views/product-attributes-view");case"deal-of-the-day":return e("./merchandising/deal-of-the-day/views/deal-of-the-day-view");case"product-page-settings":return e("./more/product-page-settings/views/product-page-settings-view");case"general-product-settings":return e("./more/general-product-settings/views/general-settings-view");case"sympathy-page":return e("./merchandising/sympathy-page/views/sympathy-page-view");case"add-ons":return e("./merchandising/add-ons/views/add-ons-view");case"third-party-products-catalog":return e("./merchandising/third-party-products-catalog/views/third-party-product-view");case"merchandising-icons":return e("./merchandising/merchandising-icons/views/merchandising-icons-ReplaceView");case"subscription-product-setup":return e("./merchandising/subscription-product-setup/views/edit-subscription-setup-view")}break;case"content-management":switch(n){case"about-us":return e("./common/about-us/views/about-us-view");case"help":return e("./content-management/help/views/help-view");case"modal-management":return e("./content-management/modal-management/views/modal-management-view");case"custom-html-pages":return e("./content-management/custom-html-pages/views/custom-html-pages-view");case"custom-forms":return e("./content-management/custom-forms/views/forms-view");case"wedding-page":return e("./merchandising/weddings-page/views/wedding-page-view");case"checkout-messaging-management":return e("./more/checkout-messaging-management/views/checkoutMessagingManagement-ReplaceView");case"social-media-setup":return e("./seo/social-media-setup/views/social-media-view");case"wedding-product":return e("./merchandising/wedding-product/views/wedding-product-page-home-view");case"wedding-gallery":return e("./content-management/wedding-galleries/views/wedding-gallery-view");case"wedding-flowers":return e("./content-management/wedding-flowers/views/wedding-flower-view")}break;case"marketing-promotions":switch(n){case"manage-marketing-emails":return e("./marketing-promotions/manage-marketing-emails/views/manage-marketing-emails-view");case"email-settings":return e("./common/email-settings/views/email-settings-view");case"email-list-management":return e("./more/email-list/views/email-list-view");case"floral-app-code-management":return e("./more/floral-app-code-management/views/floral-app-code-view");case"bonus-bloom-program":return e("./more/bonus-bloom-program/views/bonus-bloom-home-view");case"promotion-codes":return e("./marketing-promotions/promotion-codes/views/promotion-codes-view");case"manage-rewards":return e("./more/manage-rewards/views/manage-rewards-view");case"marketing-campaigns":return e("./marketing-promotions/marketing-campaigns/views/marketing-campaigns-page-view");case"floral-app-settings":return e("./more/floral-app-settings/views/floral-app-settings-view");case"paid-membership":return e("./marketing-promotions/paid-membership/views/paid-membership-view");case"footer-management":return e("./seo/footer-management/views/footer-management-view");case"products-messaging":return e("./common/products-messaging/views/products-messaging-view");case"about-us":return e("./common/about-us/views/about-us-view");case"site-meta-tags":return e("./seo/site-meta/views/site-meta-view");case"social-media-setup":return e("./seo/social-media-setup/views/social-media-MGT-home-view");case"url-management":return e("./seo/url-management/views/UrlManagement-ReplaceView");case"site-map":return e("./seo/site-map/views/site-map-view")}break;case"reporting":switch(n){case"google-analytics":return e("./reporting/google-analytics/views/google-analytics-view");case"order-lookup":return e("./common/order-lookup/views/order-lookup-view");case"find-a-florist":return e("./reporting/find-a-florist/views/find-a-florist-view");case"source-codes":return e("./reporting/source-codes/views/source-codes-view");case"promo-codes":return e("./reporting/promo-codes/views/promo-codes-view");case"top-products":return e("./reporting/top-products/views/top-products-view");case"online-search":return e("./reporting/osm-tracking/views/osm-tracking-view");case"top-referrals":return e("./reporting/top-referrals/views/top-referrals-view");case"orders-traffic":return e("./reporting/orders-traffic/views/ordersandtraffic-view");case"floral-app-reports":return e("./reporting/floral-app-reports/views/floral-app-report-view");case"esat-audit-log":return e("./reporting/esat-audit-log/views/esat-audit-log-view")}break;case"more":switch(n){case"general-settings":return e("./more/general-settings/views/general-settings-view");case"store-locations":return e("./more/store-locations/views/store-locations-view");case"funeral-home-locations":return e("./more/funeral-home-locations/views/funeral-locations-view");case"homepage-settings":return e("./common/homepage-settings/views/homepage-settings-view");case"category-settings":return e("./common/category-settings/views/category-settings-view");case"product-page-settings":return e("./more/product-page-settings/views/product-page-settings-view");case"general-product-settings":return e("./more/general-product-settings/views/general-settings-view");case"first-time-site-setup":return e("./more/first-time-site-setup/views/first-time-site-setup-view");case"checkout-configuration":return e("./more/checkout-config/views/checkout-config-view");case"email-settings":return e("./common/email-settings/views/email-settings-view");case"delivery-days-times":return e("./more/delivery-days-times/views/delivery-days-times-view");case"order-lookup":return e("./common/order-lookup/views/order-lookup-view");case"drop-shipping-setup":return e("./more/drop-shipping-setup/views/drop-shipping-setup-view");case"manage-delivery-fees":return e("./more/manage-delivery-fees/views/manage-delivery-fees-view");case"email-list-management":return e("./more/email-list/views/email-list-view");case"manage-rewards":return e("./more/manage-rewards/views/manage-rewards-view");case"site-theme":return e("./more/site-theme/views/site-theme-view");case"image-management":return e("./more/image-management/views/image-management-view");case"customers-accounts":return e("./more/customer-accounts/views/customer-accounts-view");case"esat-administration":return e("./more/esat-administration/views/esat-administration-home-view");case"orders-exceptions":return e("./more/orders-exceptions/views/orders-exclusions-home-view");case"floral-app-code-management":return e("./more/floral-app-code-management/views/floral-app-code-view");case"bonus-bloom-program":return e("./more/bonus-bloom-program/views/bonus-bloom-home-view");case"checkout-messaging-management":return e("./more/checkout-messaging-management/views/checkoutMessagingManagement-ReplaceView");case"manage-search-terms":return e("./more/manage-search-terms/views/manage-search-terms-view");case"site-navigation":return e("./merchandising/navigation/views/site-nav-view")}}}}),define("content/category-sections/side-menus/menu-view-map",["require","./views/merchandising-menu-view","./views/content-management-menu-view","./views/marketing-promotions-menu-view","./views/seo-menu-view","./views/reporting-menu-view","./views/more-menu-view"],function(e){return function(t){switch(t){case"merchandising":return e("./views/merchandising-menu-view");case"content-management":return e("./views/content-management-menu-view");case"marketing-promotions":return e("./views/marketing-promotions-menu-view");case"seo":return e("./views/seo-menu-view");case"reporting":return e("./views/reporting-menu-view");case"more":return e("./views/more-menu-view")}}}),define("link",["app-view","global-events","content/content-view-map","content/category-sections/category-section-view-map","content/category-sections/side-menus/menu-view-map","content/category-sections/container/category-section-view"],function(e,t,n,i,o,r){t.on("route:content",function(t){var i=n(t);i&&e.changeContent(i)}),t.on("route:category-section",function(t,n){var a=i(t,n),s=o(t);e.changeContent(r),r.changeMenu(s),a&&r.changeSection(a)})}),require.config({baseUrl:"js/app",paths:{jquery:"../vendor/jquery",underscore:"../vendor/underscore",backbonebase:"../vendor/backbone",backbone:"../vendor/backbone-custom",text:"../vendor/text",jqueryui:"../vendor/jquery-ui",datatables:"../vendor/jquery-datatables",dynatables:"../vendor/jquery-dynatable",jqueryvalbase:"../vendor/jquery-validate-base",jqueryval:"../vendor/jquery-validate",jquerymask:"../vendor/jquery-maskedinput",hoverintent:"../vendor/jquery-hover-intent",tinymce:"../vendor/tinymce/tinymce",rivets:"../vendor/rivets",sightglass:"../vendor/sightglass",deepmodel:"../vendor/deepmodel",nestedmodel:"../vendor/nestedmodel",deepextend:"../vendor/deep-extend",scrollwindowto:"../vendor/scrollwindowto",ie8nodeenum:"../vendor/ie8nodeenum",nest2:"../vendor/nest2",formbuilder:"../vendor/formbuilder"},shim:{jqueryui:{deps:["jquery"],exports:"$"},formbuilder:{deps:["rivets","deepmodel","scrollwindowto","ie8nodeenum"],exports:"formbuilder"},sightglass:{exports:"sightglass"},deepmodel:{exports:"deepmodel"},nestedmodel:{exports:"nestedmodel",deps:["underscore"]},nest2:{exports:"nest2"},rivets:{deps:["sightglass"],exports:"rivets"},tinymce:{exports:"tinymce"},hoverintent:{deps:["jquery"],exports:"$"}},urlArgs:"bust="+(new Date).getTime()}),require(["backbone","router","app-view","link","content/category-sections/category-section-view-map","content/category-sections/more/image-management/views/image-management-view"],function(e,t){t.get(),e.history.start()}),define("../main",function(){});